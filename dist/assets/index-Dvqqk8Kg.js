function qM(E,H){for(var L=0;L<H.length;L++){const le=H[L];if(typeof le!="string"&&!Array.isArray(le)){for(const Te in le)if(Te!=="default"&&!(Te in E)){const Ve=Object.getOwnPropertyDescriptor(le,Te);Ve&&Object.defineProperty(E,Te,Ve.get?Ve:{enumerable:!0,get:()=>le[Te]})}}}return Object.freeze(Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}))}(function(){const H=document.createElement("link").relList;if(H&&H.supports&&H.supports("modulepreload"))return;for(const Te of document.querySelectorAll('link[rel="modulepreload"]'))le(Te);new MutationObserver(Te=>{for(const Ve of Te)if(Ve.type==="childList")for(const st of Ve.addedNodes)st.tagName==="LINK"&&st.rel==="modulepreload"&&le(st)}).observe(document,{childList:!0,subtree:!0});function L(Te){const Ve={};return Te.integrity&&(Ve.integrity=Te.integrity),Te.referrerPolicy&&(Ve.referrerPolicy=Te.referrerPolicy),Te.crossOrigin==="use-credentials"?Ve.credentials="include":Te.crossOrigin==="anonymous"?Ve.credentials="omit":Ve.credentials="same-origin",Ve}function le(Te){if(Te.ep)return;Te.ep=!0;const Ve=L(Te);fetch(Te.href,Ve)}})();var Um=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function n_(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}function XM(E){if(E.__esModule)return E;var H=E.default;if(typeof H=="function"){var L=function le(){return this instanceof le?Reflect.construct(H,arguments,this.constructor):H.apply(this,arguments)};L.prototype=H.prototype}else L={};return Object.defineProperty(L,"__esModule",{value:!0}),Object.keys(E).forEach(function(le){var Te=Object.getOwnPropertyDescriptor(E,le);Object.defineProperty(L,le,Te.get?Te:{enumerable:!0,get:function(){return E[le]}})}),L}var r0={exports:{}},qv={},i0={exports:{}},ia={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx;function QM(){if(Xx)return ia;Xx=1;var E=Symbol.for("react.element"),H=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),Te=Symbol.for("react.profiler"),Ve=Symbol.for("react.provider"),st=Symbol.for("react.context"),Tt=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),be=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),se=Symbol.iterator;function B(Ut){return Ut===null||typeof Ut!="object"?null:(Ut=se&&Ut[se]||Ut["@@iterator"],typeof Ut=="function"?Ut:null)}var Fe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Be=Object.assign,ce={};function me(Ut,Ot,rn){this.props=Ut,this.context=Ot,this.refs=ce,this.updater=rn||Fe}me.prototype.isReactComponent={},me.prototype.setState=function(Ut,Ot){if(typeof Ut!="object"&&typeof Ut!="function"&&Ut!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ut,Ot,"setState")},me.prototype.forceUpdate=function(Ut){this.updater.enqueueForceUpdate(this,Ut,"forceUpdate")};function we(){}we.prototype=me.prototype;function ae(Ut,Ot,rn){this.props=Ut,this.context=Ot,this.refs=ce,this.updater=rn||Fe}var De=ae.prototype=new we;De.constructor=ae,Be(De,me.prototype),De.isPureReactComponent=!0;var Pe=Array.isArray,Se=Object.prototype.hasOwnProperty,ee={current:null},Qe={key:!0,ref:!0,__self:!0,__source:!0};function wt(Ut,Ot,rn){var $t,sn={},lt=null,Zt=null;if(Ot!=null)for($t in Ot.ref!==void 0&&(Zt=Ot.ref),Ot.key!==void 0&&(lt=""+Ot.key),Ot)Se.call(Ot,$t)&&!Qe.hasOwnProperty($t)&&(sn[$t]=Ot[$t]);var zt=arguments.length-2;if(zt===1)sn.children=rn;else if(1<zt){for(var Le=Array(zt),Mt=0;Mt<zt;Mt++)Le[Mt]=arguments[Mt+2];sn.children=Le}if(Ut&&Ut.defaultProps)for($t in zt=Ut.defaultProps,zt)sn[$t]===void 0&&(sn[$t]=zt[$t]);return{$$typeof:E,type:Ut,key:lt,ref:Zt,props:sn,_owner:ee.current}}function Dt(Ut,Ot){return{$$typeof:E,type:Ut.type,key:Ot,ref:Ut.ref,props:Ut.props,_owner:Ut._owner}}function at(Ut){return typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===E}function Ne(Ut){var Ot={"=":"=0",":":"=2"};return"$"+Ut.replace(/[=:]/g,function(rn){return Ot[rn]})}var Je=/\/+/g;function pt(Ut,Ot){return typeof Ut=="object"&&Ut!==null&&Ut.key!=null?Ne(""+Ut.key):Ot.toString(36)}function ot(Ut,Ot,rn,$t,sn){var lt=typeof Ut;(lt==="undefined"||lt==="boolean")&&(Ut=null);var Zt=!1;if(Ut===null)Zt=!0;else switch(lt){case"string":case"number":Zt=!0;break;case"object":switch(Ut.$$typeof){case E:case H:Zt=!0}}if(Zt)return Zt=Ut,sn=sn(Zt),Ut=$t===""?"."+pt(Zt,0):$t,Pe(sn)?(rn="",Ut!=null&&(rn=Ut.replace(Je,"$&/")+"/"),ot(sn,Ot,rn,"",function(Mt){return Mt})):sn!=null&&(at(sn)&&(sn=Dt(sn,rn+(!sn.key||Zt&&Zt.key===sn.key?"":(""+sn.key).replace(Je,"$&/")+"/")+Ut)),Ot.push(sn)),1;if(Zt=0,$t=$t===""?".":$t+":",Pe(Ut))for(var zt=0;zt<Ut.length;zt++){lt=Ut[zt];var Le=$t+pt(lt,zt);Zt+=ot(lt,Ot,rn,Le,sn)}else if(Le=B(Ut),typeof Le=="function")for(Ut=Le.call(Ut),zt=0;!(lt=Ut.next()).done;)lt=lt.value,Le=$t+pt(lt,zt++),Zt+=ot(lt,Ot,rn,Le,sn);else if(lt==="object")throw Ot=String(Ut),Error("Objects are not valid as a React child (found: "+(Ot==="[object Object]"?"object with keys {"+Object.keys(Ut).join(", ")+"}":Ot)+"). If you meant to render a collection of children, use an array instead.");return Zt}function Jt(Ut,Ot,rn){if(Ut==null)return Ut;var $t=[],sn=0;return ot(Ut,$t,"","",function(lt){return Ot.call(rn,lt,sn++)}),$t}function Qt(Ut){if(Ut._status===-1){var Ot=Ut._result;Ot=Ot(),Ot.then(function(rn){(Ut._status===0||Ut._status===-1)&&(Ut._status=1,Ut._result=rn)},function(rn){(Ut._status===0||Ut._status===-1)&&(Ut._status=2,Ut._result=rn)}),Ut._status===-1&&(Ut._status=0,Ut._result=Ot)}if(Ut._status===1)return Ut._result.default;throw Ut._result}var ut={current:null},St={transition:null},Lt={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:St,ReactCurrentOwner:ee};function Ue(){throw Error("act(...) is not supported in production builds of React.")}return ia.Children={map:Jt,forEach:function(Ut,Ot,rn){Jt(Ut,function(){Ot.apply(this,arguments)},rn)},count:function(Ut){var Ot=0;return Jt(Ut,function(){Ot++}),Ot},toArray:function(Ut){return Jt(Ut,function(Ot){return Ot})||[]},only:function(Ut){if(!at(Ut))throw Error("React.Children.only expected to receive a single React element child.");return Ut}},ia.Component=me,ia.Fragment=L,ia.Profiler=Te,ia.PureComponent=ae,ia.StrictMode=le,ia.Suspense=je,ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lt,ia.act=Ue,ia.cloneElement=function(Ut,Ot,rn){if(Ut==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ut+".");var $t=Be({},Ut.props),sn=Ut.key,lt=Ut.ref,Zt=Ut._owner;if(Ot!=null){if(Ot.ref!==void 0&&(lt=Ot.ref,Zt=ee.current),Ot.key!==void 0&&(sn=""+Ot.key),Ut.type&&Ut.type.defaultProps)var zt=Ut.type.defaultProps;for(Le in Ot)Se.call(Ot,Le)&&!Qe.hasOwnProperty(Le)&&($t[Le]=Ot[Le]===void 0&&zt!==void 0?zt[Le]:Ot[Le])}var Le=arguments.length-2;if(Le===1)$t.children=rn;else if(1<Le){zt=Array(Le);for(var Mt=0;Mt<Le;Mt++)zt[Mt]=arguments[Mt+2];$t.children=zt}return{$$typeof:E,type:Ut.type,key:sn,ref:lt,props:$t,_owner:Zt}},ia.createContext=function(Ut){return Ut={$$typeof:st,_currentValue:Ut,_currentValue2:Ut,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ut.Provider={$$typeof:Ve,_context:Ut},Ut.Consumer=Ut},ia.createElement=wt,ia.createFactory=function(Ut){var Ot=wt.bind(null,Ut);return Ot.type=Ut,Ot},ia.createRef=function(){return{current:null}},ia.forwardRef=function(Ut){return{$$typeof:Tt,render:Ut}},ia.isValidElement=at,ia.lazy=function(Ut){return{$$typeof:K,_payload:{_status:-1,_result:Ut},_init:Qt}},ia.memo=function(Ut,Ot){return{$$typeof:be,type:Ut,compare:Ot===void 0?null:Ot}},ia.startTransition=function(Ut){var Ot=St.transition;St.transition={};try{Ut()}finally{St.transition=Ot}},ia.unstable_act=Ue,ia.useCallback=function(Ut,Ot){return ut.current.useCallback(Ut,Ot)},ia.useContext=function(Ut){return ut.current.useContext(Ut)},ia.useDebugValue=function(){},ia.useDeferredValue=function(Ut){return ut.current.useDeferredValue(Ut)},ia.useEffect=function(Ut,Ot){return ut.current.useEffect(Ut,Ot)},ia.useId=function(){return ut.current.useId()},ia.useImperativeHandle=function(Ut,Ot,rn){return ut.current.useImperativeHandle(Ut,Ot,rn)},ia.useInsertionEffect=function(Ut,Ot){return ut.current.useInsertionEffect(Ut,Ot)},ia.useLayoutEffect=function(Ut,Ot){return ut.current.useLayoutEffect(Ut,Ot)},ia.useMemo=function(Ut,Ot){return ut.current.useMemo(Ut,Ot)},ia.useReducer=function(Ut,Ot,rn){return ut.current.useReducer(Ut,Ot,rn)},ia.useRef=function(Ut){return ut.current.useRef(Ut)},ia.useState=function(Ut){return ut.current.useState(Ut)},ia.useSyncExternalStore=function(Ut,Ot,rn){return ut.current.useSyncExternalStore(Ut,Ot,rn)},ia.useTransition=function(){return ut.current.useTransition()},ia.version="18.3.1",ia}var Qx;function ty(){return Qx||(Qx=1,i0.exports=QM()),i0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx;function JM(){if(Jx)return qv;Jx=1;var E=ty(),H=Symbol.for("react.element"),L=Symbol.for("react.fragment"),le=Object.prototype.hasOwnProperty,Te=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ve={key:!0,ref:!0,__self:!0,__source:!0};function st(Tt,je,be){var K,se={},B=null,Fe=null;be!==void 0&&(B=""+be),je.key!==void 0&&(B=""+je.key),je.ref!==void 0&&(Fe=je.ref);for(K in je)le.call(je,K)&&!Ve.hasOwnProperty(K)&&(se[K]=je[K]);if(Tt&&Tt.defaultProps)for(K in je=Tt.defaultProps,je)se[K]===void 0&&(se[K]=je[K]);return{$$typeof:H,type:Tt,key:B,ref:Fe,props:se,_owner:Te.current}}return qv.Fragment=L,qv.jsx=st,qv.jsxs=st,qv}var eb;function eP(){return eb||(eb=1,r0.exports=JM()),r0.exports}var bn=eP(),hn=ty();const Ia=n_(hn),tP=qM({__proto__:null,default:Ia},[hn]);var E_={},s0={exports:{}},mh={},a0={exports:{}},o0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb;function nP(){return tb||(tb=1,function(E){function H(St,Lt){var Ue=St.length;St.push(Lt);e:for(;0<Ue;){var Ut=Ue-1>>>1,Ot=St[Ut];if(0<Te(Ot,Lt))St[Ut]=Lt,St[Ue]=Ot,Ue=Ut;else break e}}function L(St){return St.length===0?null:St[0]}function le(St){if(St.length===0)return null;var Lt=St[0],Ue=St.pop();if(Ue!==Lt){St[0]=Ue;e:for(var Ut=0,Ot=St.length,rn=Ot>>>1;Ut<rn;){var $t=2*(Ut+1)-1,sn=St[$t],lt=$t+1,Zt=St[lt];if(0>Te(sn,Ue))lt<Ot&&0>Te(Zt,sn)?(St[Ut]=Zt,St[lt]=Ue,Ut=lt):(St[Ut]=sn,St[$t]=Ue,Ut=$t);else if(lt<Ot&&0>Te(Zt,Ue))St[Ut]=Zt,St[lt]=Ue,Ut=lt;else break e}}return Lt}function Te(St,Lt){var Ue=St.sortIndex-Lt.sortIndex;return Ue!==0?Ue:St.id-Lt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Ve=performance;E.unstable_now=function(){return Ve.now()}}else{var st=Date,Tt=st.now();E.unstable_now=function(){return st.now()-Tt}}var je=[],be=[],K=1,se=null,B=3,Fe=!1,Be=!1,ce=!1,me=typeof setTimeout=="function"?setTimeout:null,we=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function De(St){for(var Lt=L(be);Lt!==null;){if(Lt.callback===null)le(be);else if(Lt.startTime<=St)le(be),Lt.sortIndex=Lt.expirationTime,H(je,Lt);else break;Lt=L(be)}}function Pe(St){if(ce=!1,De(St),!Be)if(L(je)!==null)Be=!0,Qt(Se);else{var Lt=L(be);Lt!==null&&ut(Pe,Lt.startTime-St)}}function Se(St,Lt){Be=!1,ce&&(ce=!1,we(wt),wt=-1),Fe=!0;var Ue=B;try{for(De(Lt),se=L(je);se!==null&&(!(se.expirationTime>Lt)||St&&!Ne());){var Ut=se.callback;if(typeof Ut=="function"){se.callback=null,B=se.priorityLevel;var Ot=Ut(se.expirationTime<=Lt);Lt=E.unstable_now(),typeof Ot=="function"?se.callback=Ot:se===L(je)&&le(je),De(Lt)}else le(je);se=L(je)}if(se!==null)var rn=!0;else{var $t=L(be);$t!==null&&ut(Pe,$t.startTime-Lt),rn=!1}return rn}finally{se=null,B=Ue,Fe=!1}}var ee=!1,Qe=null,wt=-1,Dt=5,at=-1;function Ne(){return!(E.unstable_now()-at<Dt)}function Je(){if(Qe!==null){var St=E.unstable_now();at=St;var Lt=!0;try{Lt=Qe(!0,St)}finally{Lt?pt():(ee=!1,Qe=null)}}else ee=!1}var pt;if(typeof ae=="function")pt=function(){ae(Je)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,Jt=ot.port2;ot.port1.onmessage=Je,pt=function(){Jt.postMessage(null)}}else pt=function(){me(Je,0)};function Qt(St){Qe=St,ee||(ee=!0,pt())}function ut(St,Lt){wt=me(function(){St(E.unstable_now())},Lt)}E.unstable_IdlePriority=5,E.unstable_ImmediatePriority=1,E.unstable_LowPriority=4,E.unstable_NormalPriority=3,E.unstable_Profiling=null,E.unstable_UserBlockingPriority=2,E.unstable_cancelCallback=function(St){St.callback=null},E.unstable_continueExecution=function(){Be||Fe||(Be=!0,Qt(Se))},E.unstable_forceFrameRate=function(St){0>St||125<St?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Dt=0<St?Math.floor(1e3/St):5},E.unstable_getCurrentPriorityLevel=function(){return B},E.unstable_getFirstCallbackNode=function(){return L(je)},E.unstable_next=function(St){switch(B){case 1:case 2:case 3:var Lt=3;break;default:Lt=B}var Ue=B;B=Lt;try{return St()}finally{B=Ue}},E.unstable_pauseExecution=function(){},E.unstable_requestPaint=function(){},E.unstable_runWithPriority=function(St,Lt){switch(St){case 1:case 2:case 3:case 4:case 5:break;default:St=3}var Ue=B;B=St;try{return Lt()}finally{B=Ue}},E.unstable_scheduleCallback=function(St,Lt,Ue){var Ut=E.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?Ut+Ue:Ut):Ue=Ut,St){case 1:var Ot=-1;break;case 2:Ot=250;break;case 5:Ot=1073741823;break;case 4:Ot=1e4;break;default:Ot=5e3}return Ot=Ue+Ot,St={id:K++,callback:Lt,priorityLevel:St,startTime:Ue,expirationTime:Ot,sortIndex:-1},Ue>Ut?(St.sortIndex=Ue,H(be,St),L(je)===null&&St===L(be)&&(ce?(we(wt),wt=-1):ce=!0,ut(Pe,Ue-Ut))):(St.sortIndex=Ot,H(je,St),Be||Fe||(Be=!0,Qt(Se))),St},E.unstable_shouldYield=Ne,E.unstable_wrapCallback=function(St){var Lt=B;return function(){var Ue=B;B=Lt;try{return St.apply(this,arguments)}finally{B=Ue}}}}(o0)),o0}var nb;function rP(){return nb||(nb=1,a0.exports=nP()),a0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function iP(){if(rb)return mh;rb=1;var E=ty(),H=rP();function L(l){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+l,x=1;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var le=new Set,Te={};function Ve(l,f){st(l,f),st(l+"Capture",f)}function st(l,f){for(Te[l]=f,l=0;l<f.length;l++)le.add(f[l])}var Tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),je=Object.prototype.hasOwnProperty,be=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,K={},se={};function B(l){return je.call(se,l)?!0:je.call(K,l)?!1:be.test(l)?se[l]=!0:(K[l]=!0,!1)}function Fe(l,f,x,N){if(x!==null&&x.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return N?!1:x!==null?!x.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function Be(l,f,x,N){if(f===null||typeof f>"u"||Fe(l,f,x,N))return!0;if(N)return!1;if(x!==null)switch(x.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function ce(l,f,x,N,ge,Oe,Ht){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=N,this.attributeNamespace=ge,this.mustUseProperty=x,this.propertyName=l,this.type=f,this.sanitizeURL=Oe,this.removeEmptyString=Ht}var me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){me[l]=new ce(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var f=l[0];me[f]=new ce(f,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){me[l]=new ce(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){me[l]=new ce(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){me[l]=new ce(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){me[l]=new ce(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){me[l]=new ce(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){me[l]=new ce(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){me[l]=new ce(l,5,!1,l.toLowerCase(),null,!1,!1)});var we=/[\-:]([a-z])/g;function ae(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var f=l.replace(we,ae);me[f]=new ce(f,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var f=l.replace(we,ae);me[f]=new ce(f,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var f=l.replace(we,ae);me[f]=new ce(f,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){me[l]=new ce(l,1,!1,l.toLowerCase(),null,!1,!1)}),me.xlinkHref=new ce("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){me[l]=new ce(l,1,!1,l.toLowerCase(),null,!0,!0)});function De(l,f,x,N){var ge=me.hasOwnProperty(f)?me[f]:null;(ge!==null?ge.type!==0:N||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(Be(f,x,ge,N)&&(x=null),N||ge===null?B(f)&&(x===null?l.removeAttribute(f):l.setAttribute(f,""+x)):ge.mustUseProperty?l[ge.propertyName]=x===null?ge.type===3?!1:"":x:(f=ge.attributeName,N=ge.attributeNamespace,x===null?l.removeAttribute(f):(ge=ge.type,x=ge===3||ge===4&&x===!0?"":""+x,N?l.setAttributeNS(N,f,x):l.setAttribute(f,x))))}var Pe=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),ee=Symbol.for("react.portal"),Qe=Symbol.for("react.fragment"),wt=Symbol.for("react.strict_mode"),Dt=Symbol.for("react.profiler"),at=Symbol.for("react.provider"),Ne=Symbol.for("react.context"),Je=Symbol.for("react.forward_ref"),pt=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),Jt=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),ut=Symbol.for("react.offscreen"),St=Symbol.iterator;function Lt(l){return l===null||typeof l!="object"?null:(l=St&&l[St]||l["@@iterator"],typeof l=="function"?l:null)}var Ue=Object.assign,Ut;function Ot(l){if(Ut===void 0)try{throw Error()}catch(x){var f=x.stack.trim().match(/\n( *(at )?)/);Ut=f&&f[1]||""}return`
`+Ut+l}var rn=!1;function $t(l,f){if(!l||rn)return"";rn=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(dr){var N=dr}Reflect.construct(l,[],f)}else{try{f.call()}catch(dr){N=dr}l.call(f.prototype)}else{try{throw Error()}catch(dr){N=dr}l()}}catch(dr){if(dr&&N&&typeof dr.stack=="string"){for(var ge=dr.stack.split(`
`),Oe=N.stack.split(`
`),Ht=ge.length-1,Sn=Oe.length-1;1<=Ht&&0<=Sn&&ge[Ht]!==Oe[Sn];)Sn--;for(;1<=Ht&&0<=Sn;Ht--,Sn--)if(ge[Ht]!==Oe[Sn]){if(Ht!==1||Sn!==1)do if(Ht--,Sn--,0>Sn||ge[Ht]!==Oe[Sn]){var Rn=`
`+ge[Ht].replace(" at new "," at ");return l.displayName&&Rn.includes("<anonymous>")&&(Rn=Rn.replace("<anonymous>",l.displayName)),Rn}while(1<=Ht&&0<=Sn);break}}}finally{rn=!1,Error.prepareStackTrace=x}return(l=l?l.displayName||l.name:"")?Ot(l):""}function sn(l){switch(l.tag){case 5:return Ot(l.type);case 16:return Ot("Lazy");case 13:return Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 2:case 15:return l=$t(l.type,!1),l;case 11:return l=$t(l.type.render,!1),l;case 1:return l=$t(l.type,!0),l;default:return""}}function lt(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case Qe:return"Fragment";case ee:return"Portal";case Dt:return"Profiler";case wt:return"StrictMode";case pt:return"Suspense";case ot:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case Ne:return(l.displayName||"Context")+".Consumer";case at:return(l._context.displayName||"Context")+".Provider";case Je:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Jt:return f=l.displayName||null,f!==null?f:lt(l.type)||"Memo";case Qt:f=l._payload,l=l._init;try{return lt(l(f))}catch{}}return null}function Zt(l){var f=l.type;switch(l.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=f.render,l=l.displayName||l.name||"",f.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lt(f);case 8:return f===wt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function zt(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Le(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Mt(l){var f=Le(l)?"checked":"value",x=Object.getOwnPropertyDescriptor(l.constructor.prototype,f),N=""+l[f];if(!l.hasOwnProperty(f)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var ge=x.get,Oe=x.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return ge.call(this)},set:function(Ht){N=""+Ht,Oe.call(this,Ht)}}),Object.defineProperty(l,f,{enumerable:x.enumerable}),{getValue:function(){return N},setValue:function(Ht){N=""+Ht},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function Rt(l){l._valueTracker||(l._valueTracker=Mt(l))}function tt(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var x=f.getValue(),N="";return l&&(N=Le(l)?l.checked?"true":"false":l.value),l=N,l!==x?(f.setValue(l),!0):!1}function We(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function C(l,f){var x=f.checked;return Ue({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??l._wrapperState.initialChecked})}function U(l,f){var x=f.defaultValue==null?"":f.defaultValue,N=f.checked!=null?f.checked:f.defaultChecked;x=zt(f.value!=null?f.value:x),l._wrapperState={initialChecked:N,initialValue:x,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function Q(l,f){f=f.checked,f!=null&&De(l,"checked",f,!1)}function fe(l,f){Q(l,f);var x=zt(f.value),N=f.type;if(x!=null)N==="number"?(x===0&&l.value===""||l.value!=x)&&(l.value=""+x):l.value!==""+x&&(l.value=""+x);else if(N==="submit"||N==="reset"){l.removeAttribute("value");return}f.hasOwnProperty("value")?Ce(l,f.type,x):f.hasOwnProperty("defaultValue")&&Ce(l,f.type,zt(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(l.defaultChecked=!!f.defaultChecked)}function de(l,f,x){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var N=f.type;if(!(N!=="submit"&&N!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+l._wrapperState.initialValue,x||f===l.value||(l.value=f),l.defaultValue=f}x=l.name,x!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,x!==""&&(l.name=x)}function Ce(l,f,x){(f!=="number"||We(l.ownerDocument)!==l)&&(x==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+x&&(l.defaultValue=""+x))}var Ye=Array.isArray;function Ke(l,f,x,N){if(l=l.options,f){f={};for(var ge=0;ge<x.length;ge++)f["$"+x[ge]]=!0;for(x=0;x<l.length;x++)ge=f.hasOwnProperty("$"+l[x].value),l[x].selected!==ge&&(l[x].selected=ge),ge&&N&&(l[x].defaultSelected=!0)}else{for(x=""+zt(x),f=null,ge=0;ge<l.length;ge++){if(l[ge].value===x){l[ge].selected=!0,N&&(l[ge].defaultSelected=!0);return}f!==null||l[ge].disabled||(f=l[ge])}f!==null&&(f.selected=!0)}}function ct(l,f){if(f.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ue({},f,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function _t(l,f){var x=f.value;if(x==null){if(x=f.children,f=f.defaultValue,x!=null){if(f!=null)throw Error(L(92));if(Ye(x)){if(1<x.length)throw Error(L(93));x=x[0]}f=x}f==null&&(f=""),x=f}l._wrapperState={initialValue:zt(x)}}function qe(l,f){var x=zt(f.value),N=zt(f.defaultValue);x!=null&&(x=""+x,x!==l.value&&(l.value=x),f.defaultValue==null&&l.defaultValue!==x&&(l.defaultValue=x)),N!=null&&(l.defaultValue=""+N)}function ht(l){var f=l.textContent;f===l._wrapperState.initialValue&&f!==""&&f!==null&&(l.value=f)}function Pt(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(l,f){return l==null||l==="http://www.w3.org/1999/xhtml"?Pt(f):l==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Ge,en=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,x,N,ge){MSApp.execUnsafeLocalFunction(function(){return l(f,x,N,ge)})}:l}(function(l,f){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=f;else{for(Ge=Ge||document.createElement("div"),Ge.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=Ge.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;f.firstChild;)l.appendChild(f.firstChild)}});function bt(l,f){if(f){var x=l.firstChild;if(x&&x===l.lastChild&&x.nodeType===3){x.nodeValue=f;return}}l.textContent=f}var Vt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_n=["Webkit","ms","Moz","O"];Object.keys(Vt).forEach(function(l){_n.forEach(function(f){f=f+l.charAt(0).toUpperCase()+l.substring(1),Vt[f]=Vt[l]})});function Yn(l,f,x){return f==null||typeof f=="boolean"||f===""?"":x||typeof f!="number"||f===0||Vt.hasOwnProperty(l)&&Vt[l]?(""+f).trim():f+"px"}function or(l,f){l=l.style;for(var x in f)if(f.hasOwnProperty(x)){var N=x.indexOf("--")===0,ge=Yn(x,f[x],N);x==="float"&&(x="cssFloat"),N?l.setProperty(x,ge):l[x]=ge}}var lr=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jn(l,f){if(f){if(lr[l]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(L(137,l));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(L(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(L(61))}if(f.style!=null&&typeof f.style!="object")throw Error(L(62))}}function $n(l,f){if(l.indexOf("-")===-1)return typeof f.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tn=null;function Gn(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var tr=null,pr=null,Br=null;function Mr(l){if(l=ed(l)){if(typeof tr!="function")throw Error(L(280));var f=l.stateNode;f&&(f=zd(f),tr(l.stateNode,l.type,f))}}function pn(l){pr?Br?Br.push(l):Br=[l]:pr=l}function Wt(){if(pr){var l=pr,f=Br;if(Br=pr=null,Mr(l),f)for(l=0;l<f.length;l++)Mr(f[l])}}function un(l,f){return l(f)}function fn(){}var Bn=!1;function Hn(l,f,x){if(Bn)return l(f,x);Bn=!0;try{return un(l,f,x)}finally{Bn=!1,(pr!==null||Br!==null)&&(fn(),Wt())}}function yr(l,f){var x=l.stateNode;if(x===null)return null;var N=zd(x);if(N===null)return null;x=N[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(l=l.type,N=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!N;break e;default:l=!1}if(l)return null;if(x&&typeof x!="function")throw Error(L(231,f,typeof x));return x}var zr=!1;if(Tt)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){zr=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{zr=!1}function Ni(l,f,x,N,ge,Oe,Ht,Sn,Rn){var dr=Array.prototype.slice.call(arguments,3);try{f.apply(x,dr)}catch(Dr){this.onError(Dr)}}var as=!1,Ss=null,Os=!1,go=null,$u={onError:function(l){as=!0,Ss=l}};function gc(l,f,x,N,ge,Oe,Ht,Sn,Rn){as=!1,Ss=null,Ni.apply($u,arguments)}function Xl(l,f,x,N,ge,Oe,Ht,Sn,Rn){if(gc.apply(this,arguments),as){if(as){var dr=Ss;as=!1,Ss=null}else throw Error(L(198));Os||(Os=!0,go=dr)}}function Co(l){var f=l,x=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(x=f.return),l=f.return;while(l)}return f.tag===3?x:null}function Mu(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function Ha(l){if(Co(l)!==l)throw Error(L(188))}function vh(l){var f=l.alternate;if(!f){if(f=Co(l),f===null)throw Error(L(188));return f!==l?null:l}for(var x=l,N=f;;){var ge=x.return;if(ge===null)break;var Oe=ge.alternate;if(Oe===null){if(N=ge.return,N!==null){x=N;continue}break}if(ge.child===Oe.child){for(Oe=ge.child;Oe;){if(Oe===x)return Ha(ge),l;if(Oe===N)return Ha(ge),f;Oe=Oe.sibling}throw Error(L(188))}if(x.return!==N.return)x=ge,N=Oe;else{for(var Ht=!1,Sn=ge.child;Sn;){if(Sn===x){Ht=!0,x=ge,N=Oe;break}if(Sn===N){Ht=!0,N=ge,x=Oe;break}Sn=Sn.sibling}if(!Ht){for(Sn=Oe.child;Sn;){if(Sn===x){Ht=!0,x=Oe,N=ge;break}if(Sn===N){Ht=!0,N=Oe,x=ge;break}Sn=Sn.sibling}if(!Ht)throw Error(L(189))}}if(x.alternate!==N)throw Error(L(190))}if(x.tag!==3)throw Error(L(188));return x.stateNode.current===x?l:f}function mc(l){return l=vh(l),l!==null?Vc(l):null}function Vc(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var f=Vc(l);if(f!==null)return f;l=l.sibling}return null}var Pu=H.unstable_scheduleCallback,Ou=H.unstable_cancelCallback,Jo=H.unstable_shouldYield,Ku=H.unstable_requestPaint,ca=H.unstable_now,Ql=H.unstable_getCurrentPriorityLevel,Jl=H.unstable_ImmediatePriority,qu=H.unstable_UserBlockingPriority,Xu=H.unstable_NormalPriority,_h=H.unstable_LowPriority,Sl=H.unstable_IdlePriority,wi=null,Ja=null;function fu(l){if(Ja&&typeof Ja.onCommitFiberRoot=="function")try{Ja.onCommitFiberRoot(wi,l,void 0,(l.current.flags&128)===128)}catch{}}var lo=Math.clz32?Math.clz32:hp,cp=Math.log,Td=Math.LN2;function hp(l){return l>>>=0,l===0?32:31-(cp(l)/Td|0)|0}var Hc=64,vc=4194304;function _c(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function yh(l,f){var x=l.pendingLanes;if(x===0)return 0;var N=0,ge=l.suspendedLanes,Oe=l.pingedLanes,Ht=x&268435455;if(Ht!==0){var Sn=Ht&~ge;Sn!==0?N=_c(Sn):(Oe&=Ht,Oe!==0&&(N=_c(Oe)))}else Ht=x&~ge,Ht!==0?N=_c(Ht):Oe!==0&&(N=_c(Oe));if(N===0)return 0;if(f!==0&&f!==N&&(f&ge)===0&&(ge=N&-N,Oe=f&-f,ge>=Oe||ge===16&&(Oe&4194240)!==0))return f;if((N&4)!==0&&(N|=x&16),f=l.entangledLanes,f!==0)for(l=l.entanglements,f&=N;0<f;)x=31-lo(f),ge=1<<x,N|=l[x],f&=~ge;return N}function ku(l,f){switch(l){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vo(l,f){for(var x=l.suspendedLanes,N=l.pingedLanes,ge=l.expirationTimes,Oe=l.pendingLanes;0<Oe;){var Ht=31-lo(Oe),Sn=1<<Ht,Rn=ge[Ht];Rn===-1?((Sn&x)===0||(Sn&N)!==0)&&(ge[Ht]=ku(Sn,f)):Rn<=f&&(l.expiredLanes|=Sn),Oe&=~Sn}}function af(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Wc(){var l=Hc;return Hc<<=1,(Hc&4194240)===0&&(Hc=64),l}function Gc(l){for(var f=[],x=0;31>x;x++)f.push(l);return f}function Iu(l,f,x){l.pendingLanes|=f,f!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,f=31-lo(f),l[f]=x}function wh(l,f){var x=l.pendingLanes&~f;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=f,l.mutableReadLanes&=f,l.entangledLanes&=f,f=l.entanglements;var N=l.eventTimes;for(l=l.expirationTimes;0<x;){var ge=31-lo(x),Oe=1<<ge;f[ge]=0,N[ge]=-1,l[ge]=-1,x&=~Oe}}function Vf(l,f){var x=l.entangledLanes|=f;for(l=l.entanglements;x;){var N=31-lo(x),ge=1<<N;ge&f|l[N]&f&&(l[N]|=f),x&=~ge}}var Vs=0;function Lu(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var xh,of,yc,Cs,Yc,lf=!1,wc=[],hl=null,Fl=null,mo=null,xc=new Map,w=new Map,ne=[],it="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kt(l,f){switch(l){case"focusin":case"focusout":hl=null;break;case"dragenter":case"dragleave":Fl=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":xc.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":w.delete(f.pointerId)}}function mn(l,f,x,N,ge,Oe){return l===null||l.nativeEvent!==Oe?(l={blockedOn:f,domEventName:x,eventSystemFlags:N,nativeEvent:Oe,targetContainers:[ge]},f!==null&&(f=ed(f),f!==null&&of(f)),l):(l.eventSystemFlags|=N,f=l.targetContainers,ge!==null&&f.indexOf(ge)===-1&&f.push(ge),l)}function er(l,f,x,N,ge){switch(f){case"focusin":return hl=mn(hl,l,f,x,N,ge),!0;case"dragenter":return Fl=mn(Fl,l,f,x,N,ge),!0;case"mouseover":return mo=mn(mo,l,f,x,N,ge),!0;case"pointerover":var Oe=ge.pointerId;return xc.set(Oe,mn(xc.get(Oe)||null,l,f,x,N,ge)),!0;case"gotpointercapture":return Oe=ge.pointerId,w.set(Oe,mn(w.get(Oe)||null,l,f,x,N,ge)),!0}return!1}function gr(l){var f=th(l.target);if(f!==null){var x=Co(f);if(x!==null){if(f=x.tag,f===13){if(f=Mu(x),f!==null){l.blockedOn=f,Yc(l.priority,function(){yc(x)});return}}else if(f===3&&x.stateNode.current.memoizedState.isDehydrated){l.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ni(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var x=Md(l.domEventName,l.eventSystemFlags,f[0],l.nativeEvent);if(x===null){x=l.nativeEvent;var N=new x.constructor(x.type,x);Tn=N,x.target.dispatchEvent(N),Tn=null}else return f=ed(x),f!==null&&of(f),l.blockedOn=x,!1;f.shift()}return!0}function li(l,f,x){ni(l)&&x.delete(f)}function os(){lf=!1,hl!==null&&ni(hl)&&(hl=null),Fl!==null&&ni(Fl)&&(Fl=null),mo!==null&&ni(mo)&&(mo=null),xc.forEach(li),w.forEach(li)}function Xi(l,f){l.blockedOn===f&&(l.blockedOn=null,lf||(lf=!0,H.unstable_scheduleCallback(H.unstable_NormalPriority,os)))}function Ar(l){function f(ge){return Xi(ge,l)}if(0<wc.length){Xi(wc[0],l);for(var x=1;x<wc.length;x++){var N=wc[x];N.blockedOn===l&&(N.blockedOn=null)}}for(hl!==null&&Xi(hl,l),Fl!==null&&Xi(Fl,l),mo!==null&&Xi(mo,l),xc.forEach(f),w.forEach(f),x=0;x<ne.length;x++)N=ne[x],N.blockedOn===l&&(N.blockedOn=null);for(;0<ne.length&&(x=ne[0],x.blockedOn===null);)gr(x),x.blockedOn===null&&ne.shift()}var ss=Pe.ReactCurrentBatchConfig,Bu=!0;function eu(l,f,x,N){var ge=Vs,Oe=ss.transition;ss.transition=null;try{Vs=1,du(l,f,x,N)}finally{Vs=ge,ss.transition=Oe}}function uf(l,f,x,N){var ge=Vs,Oe=ss.transition;ss.transition=null;try{Vs=4,du(l,f,x,N)}finally{Vs=ge,ss.transition=Oe}}function du(l,f,x,N){if(Bu){var ge=Md(l,f,x,N);if(ge===null)wf(l,f,N,pu,x),kt(l,N);else if(er(ge,l,f,x,N))N.stopPropagation();else if(kt(l,N),f&4&&-1<it.indexOf(l)){for(;ge!==null;){var Oe=ed(ge);if(Oe!==null&&xh(Oe),Oe=Md(l,f,x,N),Oe===null&&wf(l,f,N,pu,x),Oe===ge)break;ge=Oe}ge!==null&&N.stopPropagation()}else wf(l,f,N,null,x)}}var pu=null;function Md(l,f,x,N){if(pu=null,l=Gn(N),l=th(l),l!==null)if(f=Co(l),f===null)l=null;else if(x=f.tag,x===13){if(l=Mu(f),l!==null)return l;l=null}else if(x===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null);return pu=l,null}function rg(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ql()){case Jl:return 1;case qu:return 4;case Xu:case _h:return 16;case Sl:return 536870912;default:return 16}default:return 16}}var Gi=null,Yi=null,Hf=null;function Pd(){if(Hf)return Hf;var l,f=Yi,x=f.length,N,ge="value"in Gi?Gi.value:Gi.textContent,Oe=ge.length;for(l=0;l<x&&f[l]===ge[l];l++);var Ht=x-l;for(N=1;N<=Ht&&f[x-N]===ge[Oe-N];N++);return Hf=ge.slice(l,1<N?1-N:void 0)}function Wf(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function Od(){return!0}function fp(){return!1}function tu(l){function f(x,N,ge,Oe,Ht){this._reactName=x,this._targetInst=ge,this.type=N,this.nativeEvent=Oe,this.target=Ht,this.currentTarget=null;for(var Sn in l)l.hasOwnProperty(Sn)&&(x=l[Sn],this[Sn]=x?x(Oe):Oe[Sn]);return this.isDefaultPrevented=(Oe.defaultPrevented!=null?Oe.defaultPrevented:Oe.returnValue===!1)?Od:fp,this.isPropagationStopped=fp,this}return Ue(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Od)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Od)},persist:function(){},isPersistent:Od}),f}var bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kd=tu(bc),Ls=Ue({},bc,{view:0,detail:0}),dp=tu(Ls),Ru,Gf,Qu,La=Ue({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:el,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Qu&&(Qu&&l.type==="mousemove"?(Ru=l.screenX-Qu.screenX,Gf=l.screenY-Qu.screenY):Gf=Ru=0,Qu=l),Ru)},movementY:function(l){return"movementY"in l?l.movementY:Gf}}),Id=tu(La),pp=Ue({},La,{dataTransfer:0}),gu=tu(pp),gp=Ue({},Ls,{relatedTarget:0}),Yf=tu(gp),mp=Ue({},bc,{animationName:0,elapsedTime:0,pseudoElement:0}),Ba=tu(mp),Yg=Ue({},bc,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Wa=tu(Yg),vp=Ue({},bc,{data:0}),Ld=tu(vp),Cl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ts(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=Sc[l])?!!f[l]:!1}function el(){return ts}var Zf=Ue({},Ls,{key:function(l){if(l.key){var f=Cl[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=Wf(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Zc[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:el,charCode:function(l){return l.type==="keypress"?Wf(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Wf(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),_p=tu(Zf),$f=Ue({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ig=tu($f),Bd=Ue({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:el}),Cc=tu(Bd),Kf=Ue({},bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),$c=tu(Kf),Dl=Ue({},La,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Zg=tu(Dl),yp=[9,13,27,32],qf=Tt&&"CompositionEvent"in window,Dc=null;Tt&&"documentMode"in document&&(Dc=document.documentMode);var cf=Tt&&"TextEvent"in window&&!Dc,Rd=Tt&&(!qf||Dc&&8<Dc&&11>=Dc),sg=" ",hf=!1;function bh(l,f){switch(l){case"keyup":return yp.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ag(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Kc=!1;function Aa(l,f){switch(l){case"compositionend":return ag(f);case"keypress":return f.which!==32?null:(hf=!0,sg);case"textInput":return l=f.data,l===sg&&hf?null:l;default:return null}}function ff(l,f){if(Kc)return l==="compositionend"||!qf&&bh(l,f)?(l=Pd(),Hf=Yi=Gi=null,Kc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Rd&&f.locale!=="ko"?null:f.data;default:return null}}var Ac={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!Ac[l.type]:f==="textarea"}function df(l,f,x,N){pn(N),f=dl(f,"onChange"),0<f.length&&(x=new kd("onChange","change",null,x,N),l.push({event:x,listeners:f}))}var pf=null,gf=null;function mf(l){Qc(l,0)}function Qf(l){var f=wu(l);if(tt(f))return l}function wp(l,f){if(l==="change")return f}var nu=!1;if(Tt){var xp;if(Tt){var Jf="oninput"in document;if(!Jf){var ru=document.createElement("div");ru.setAttribute("oninput","return;"),Jf=typeof ru.oninput=="function"}xp=Jf}else xp=!1;nu=xp&&(!document.documentMode||9<document.documentMode)}function Sh(){pf&&(pf.detachEvent("onpropertychange",Ro),gf=pf=null)}function Ro(l){if(l.propertyName==="value"&&Qf(gf)){var f=[];df(f,gf,l,Gn(l)),Hn(mf,f)}}function Ec(l,f,x){l==="focusin"?(Sh(),pf=f,gf=x,pf.attachEvent("onpropertychange",Ro)):l==="focusout"&&Sh()}function $g(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Qf(gf)}function Kg(l,f){if(l==="click")return Qf(f)}function qg(l,f){if(l==="input"||l==="change")return Qf(f)}function iu(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var sa=typeof Object.is=="function"?Object.is:iu;function qc(l,f){if(sa(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var x=Object.keys(l),N=Object.keys(f);if(x.length!==N.length)return!1;for(N=0;N<x.length;N++){var ge=x[N];if(!je.call(f,ge)||!sa(l[ge],f[ge]))return!1}return!0}function vo(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function bp(l,f){var x=vo(l);l=0;for(var N;x;){if(x.nodeType===3){if(N=l+x.textContent.length,l<=f&&N>=f)return{node:x,offset:f-l};l=N}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=vo(x)}}function vf(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?vf(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function _f(){for(var l=window,f=We();f instanceof l.HTMLIFrameElement;){try{var x=typeof f.contentWindow.location.href=="string"}catch{x=!1}if(x)l=f.contentWindow;else break;f=We(l.document)}return f}function Nd(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}function Ii(l){var f=_f(),x=l.focusedElem,N=l.selectionRange;if(f!==x&&x&&x.ownerDocument&&vf(x.ownerDocument.documentElement,x)){if(N!==null&&Nd(x)){if(f=N.start,l=N.end,l===void 0&&(l=f),"selectionStart"in x)x.selectionStart=f,x.selectionEnd=Math.min(l,x.value.length);else if(l=(f=x.ownerDocument||document)&&f.defaultView||window,l.getSelection){l=l.getSelection();var ge=x.textContent.length,Oe=Math.min(N.start,ge);N=N.end===void 0?Oe:Math.min(N.end,ge),!l.extend&&Oe>N&&(ge=N,N=Oe,Oe=ge),ge=bp(x,Oe);var Ht=bp(x,N);ge&&Ht&&(l.rangeCount!==1||l.anchorNode!==ge.node||l.anchorOffset!==ge.offset||l.focusNode!==Ht.node||l.focusOffset!==Ht.offset)&&(f=f.createRange(),f.setStart(ge.node,ge.offset),l.removeAllRanges(),Oe>N?(l.addRange(f),l.extend(Ht.node,Ht.offset)):(f.setEnd(Ht.node,Ht.offset),l.addRange(f)))}}for(f=[],l=x;l=l.parentNode;)l.nodeType===1&&f.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<f.length;x++)l=f[x],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var Xt=Tt&&"documentMode"in document&&11>=document.documentMode,Dn=null,vn=null,Er=null,Tr=!1;function bi(l,f,x){var N=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Tr||Dn==null||Dn!==We(N)||(N=Dn,"selectionStart"in N&&Nd(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),Er&&qc(Er,N)||(Er=N,N=dl(vn,"onSelect"),0<N.length&&(f=new kd("onSelect","select",null,f,x),l.push({event:f,listeners:N}),f.target=Dn)))}function xs(l,f){var x={};return x[l.toLowerCase()]=f.toLowerCase(),x["Webkit"+l]="webkit"+f,x["Moz"+l]="moz"+f,x}var ki={animationend:xs("Animation","AnimationEnd"),animationiteration:xs("Animation","AnimationIteration"),animationstart:xs("Animation","AnimationStart"),transitionend:xs("Transition","TransitionEnd")},Ch={},og={};Tt&&(og=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);function Sa(l){if(Ch[l])return Ch[l];if(!ki[l])return l;var f=ki[l],x;for(x in f)if(f.hasOwnProperty(x)&&x in og)return Ch[l]=f[x];return l}var su=Sa("animationend"),lg=Sa("animationiteration"),mu=Sa("animationstart"),Ju=Sa("transitionend"),au=new Map,ji="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xc(l,f){au.set(l,f),Ve(f,[l])}for(var Dh=0;Dh<ji.length;Dh++){var vu=ji[Dh],Xg=vu.toLowerCase(),Qg=vu[0].toUpperCase()+vu.slice(1);Xc(Xg,"on"+Qg)}Xc(su,"onAnimationEnd"),Xc(lg,"onAnimationIteration"),Xc(mu,"onAnimationStart"),Xc("dblclick","onDoubleClick"),Xc("focusin","onFocus"),Xc("focusout","onBlur"),Xc(Ju,"onTransitionEnd"),st("onMouseEnter",["mouseout","mouseover"]),st("onMouseLeave",["mouseout","mouseover"]),st("onPointerEnter",["pointerout","pointerover"]),st("onPointerLeave",["pointerout","pointerover"]),Ve("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ve("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ve("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ve("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ve("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ve("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ah="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_u=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ah));function fl(l,f,x){var N=l.type||"unknown-event";l.currentTarget=x,Xl(N,f,void 0,l),l.currentTarget=null}function Qc(l,f){f=(f&4)!==0;for(var x=0;x<l.length;x++){var N=l[x],ge=N.event;N=N.listeners;e:{var Oe=void 0;if(f)for(var Ht=N.length-1;0<=Ht;Ht--){var Sn=N[Ht],Rn=Sn.instance,dr=Sn.currentTarget;if(Sn=Sn.listener,Rn!==Oe&&ge.isPropagationStopped())break e;fl(ge,Sn,dr),Oe=Rn}else for(Ht=0;Ht<N.length;Ht++){if(Sn=N[Ht],Rn=Sn.instance,dr=Sn.currentTarget,Sn=Sn.listener,Rn!==Oe&&ge.isPropagationStopped())break e;fl(ge,Sn,dr),Oe=Rn}}}if(Os)throw l=go,Os=!1,go=null,l}function va(l,f){var x=f[Go];x===void 0&&(x=f[Go]=new Set);var N=l+"__bubble";x.has(N)||(ec(f,l,2,!1),x.add(N))}function Nu(l,f,x){var N=0;f&&(N|=4),ec(x,l,N,f)}var yf="_reactListening"+Math.random().toString(36).slice(2);function Eh(l){if(!l[yf]){l[yf]=!0,le.forEach(function(x){x!=="selectionchange"&&(_u.has(x)||Nu(x,!1,l),Nu(x,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[yf]||(f[yf]=!0,Nu("selectionchange",!1,f))}}function ec(l,f,x,N){switch(rg(f)){case 1:var ge=eu;break;case 4:ge=uf;break;default:ge=du}x=ge.bind(null,f,x,l),ge=void 0,!zr||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(ge=!0),N?ge!==void 0?l.addEventListener(f,x,{capture:!0,passive:ge}):l.addEventListener(f,x,!0):ge!==void 0?l.addEventListener(f,x,{passive:ge}):l.addEventListener(f,x,!1)}function wf(l,f,x,N,ge){var Oe=N;if((f&1)===0&&(f&2)===0&&N!==null)e:for(;;){if(N===null)return;var Ht=N.tag;if(Ht===3||Ht===4){var Sn=N.stateNode.containerInfo;if(Sn===ge||Sn.nodeType===8&&Sn.parentNode===ge)break;if(Ht===4)for(Ht=N.return;Ht!==null;){var Rn=Ht.tag;if((Rn===3||Rn===4)&&(Rn=Ht.stateNode.containerInfo,Rn===ge||Rn.nodeType===8&&Rn.parentNode===ge))return;Ht=Ht.return}for(;Sn!==null;){if(Ht=th(Sn),Ht===null)return;if(Rn=Ht.tag,Rn===5||Rn===6){N=Oe=Ht;continue e}Sn=Sn.parentNode}}N=N.return}Hn(function(){var dr=Oe,Dr=Gn(x),Pr=[];e:{var Ur=au.get(l);if(Ur!==void 0){var pi=kd,mi=l;switch(l){case"keypress":if(Wf(x)===0)break e;case"keydown":case"keyup":pi=_p;break;case"focusin":mi="focus",pi=Yf;break;case"focusout":mi="blur",pi=Yf;break;case"beforeblur":case"afterblur":pi=Yf;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pi=Id;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pi=gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pi=Cc;break;case su:case lg:case mu:pi=Ba;break;case Ju:pi=$c;break;case"scroll":pi=dp;break;case"wheel":pi=Zg;break;case"copy":case"cut":case"paste":pi=Wa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pi=ig}var gi=(f&4)!==0,xa=!gi&&l==="scroll",Xn=gi?Ur!==null?Ur+"Capture":null:Ur;gi=[];for(var Un=dr,rr;Un!==null;){rr=Un;var Nr=rr.stateNode;if(rr.tag===5&&Nr!==null&&(rr=Nr,Xn!==null&&(Nr=yr(Un,Xn),Nr!=null&&gi.push(ou(Un,Nr,rr)))),xa)break;Un=Un.return}0<gi.length&&(Ur=new pi(Ur,mi,null,x,Dr),Pr.push({event:Ur,listeners:gi}))}}if((f&7)===0){e:{if(Ur=l==="mouseover"||l==="pointerover",pi=l==="mouseout"||l==="pointerout",Ur&&x!==Tn&&(mi=x.relatedTarget||x.fromElement)&&(th(mi)||mi[Wo]))break e;if((pi||Ur)&&(Ur=Dr.window===Dr?Dr:(Ur=Dr.ownerDocument)?Ur.defaultView||Ur.parentWindow:window,pi?(mi=x.relatedTarget||x.toElement,pi=dr,mi=mi?th(mi):null,mi!==null&&(xa=Co(mi),mi!==xa||mi.tag!==5&&mi.tag!==6)&&(mi=null)):(pi=null,mi=dr),pi!==mi)){if(gi=Id,Nr="onMouseLeave",Xn="onMouseEnter",Un="mouse",(l==="pointerout"||l==="pointerover")&&(gi=ig,Nr="onPointerLeave",Xn="onPointerEnter",Un="pointer"),xa=pi==null?Ur:wu(pi),rr=mi==null?Ur:wu(mi),Ur=new gi(Nr,Un+"leave",pi,x,Dr),Ur.target=xa,Ur.relatedTarget=rr,Nr=null,th(Dr)===dr&&(gi=new gi(Xn,Un+"enter",mi,x,Dr),gi.target=rr,gi.relatedTarget=xa,Nr=gi),xa=Nr,pi&&mi)t:{for(gi=pi,Xn=mi,Un=0,rr=gi;rr;rr=zl(rr))Un++;for(rr=0,Nr=Xn;Nr;Nr=zl(Nr))rr++;for(;0<Un-rr;)gi=zl(gi),Un--;for(;0<rr-Un;)Xn=zl(Xn),rr--;for(;Un--;){if(gi===Xn||Xn!==null&&gi===Xn.alternate)break t;gi=zl(gi),Xn=zl(Xn)}gi=null}else gi=null;pi!==null&&xf(Pr,Ur,pi,gi,!1),mi!==null&&xa!==null&&xf(Pr,xa,mi,gi,!0)}}e:{if(Ur=dr?wu(dr):window,pi=Ur.nodeName&&Ur.nodeName.toLowerCase(),pi==="select"||pi==="input"&&Ur.type==="file")var vi=wp;else if(Xf(Ur))if(nu)vi=qg;else{vi=$g;var xi=Ec}else(pi=Ur.nodeName)&&pi.toLowerCase()==="input"&&(Ur.type==="checkbox"||Ur.type==="radio")&&(vi=Kg);if(vi&&(vi=vi(l,dr))){df(Pr,vi,x,Dr);break e}xi&&xi(l,Ur,dr),l==="focusout"&&(xi=Ur._wrapperState)&&xi.controlled&&Ur.type==="number"&&Ce(Ur,"number",Ur.value)}switch(xi=dr?wu(dr):window,l){case"focusin":(Xf(xi)||xi.contentEditable==="true")&&(Dn=xi,vn=dr,Er=null);break;case"focusout":Er=vn=Dn=null;break;case"mousedown":Tr=!0;break;case"contextmenu":case"mouseup":case"dragend":Tr=!1,bi(Pr,x,Dr);break;case"selectionchange":if(Xt)break;case"keydown":case"keyup":bi(Pr,x,Dr)}var Ri;if(qf)e:{switch(l){case"compositionstart":var Ui="onCompositionStart";break e;case"compositionend":Ui="onCompositionEnd";break e;case"compositionupdate":Ui="onCompositionUpdate";break e}Ui=void 0}else Kc?bh(l,x)&&(Ui="onCompositionEnd"):l==="keydown"&&x.keyCode===229&&(Ui="onCompositionStart");Ui&&(Rd&&x.locale!=="ko"&&(Kc||Ui!=="onCompositionStart"?Ui==="onCompositionEnd"&&Kc&&(Ri=Pd()):(Gi=Dr,Yi="value"in Gi?Gi.value:Gi.textContent,Kc=!0)),xi=dl(dr,Ui),0<xi.length&&(Ui=new Ld(Ui,l,null,x,Dr),Pr.push({event:Ui,listeners:xi}),Ri?Ui.data=Ri:(Ri=ag(x),Ri!==null&&(Ui.data=Ri)))),(Ri=cf?Aa(l,x):ff(l,x))&&(dr=dl(dr,"onBeforeInput"),0<dr.length&&(Dr=new Ld("onBeforeInput","beforeinput",null,x,Dr),Pr.push({event:Dr,listeners:dr}),Dr.data=Ri))}Qc(Pr,f)})}function ou(l,f,x){return{instance:l,listener:f,currentTarget:x}}function dl(l,f){for(var x=f+"Capture",N=[];l!==null;){var ge=l,Oe=ge.stateNode;ge.tag===5&&Oe!==null&&(ge=Oe,Oe=yr(l,x),Oe!=null&&N.unshift(ou(l,Oe,ge)),Oe=yr(l,f),Oe!=null&&N.push(ou(l,Oe,ge))),l=l.return}return N}function zl(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function xf(l,f,x,N,ge){for(var Oe=f._reactName,Ht=[];x!==null&&x!==N;){var Sn=x,Rn=Sn.alternate,dr=Sn.stateNode;if(Rn!==null&&Rn===N)break;Sn.tag===5&&dr!==null&&(Sn=dr,ge?(Rn=yr(x,Oe),Rn!=null&&Ht.unshift(ou(x,Rn,Sn))):ge||(Rn=yr(x,Oe),Rn!=null&&Ht.push(ou(x,Rn,Sn)))),x=x.return}Ht.length!==0&&l.push({event:f,listeners:Ht})}var Jg=/\r\n?/g,em=/\u0000|\uFFFD/g;function tc(l){return(typeof l=="string"?l:""+l).replace(Jg,`
`).replace(em,"")}function yu(l,f,x){if(f=tc(f),tc(l)!==f&&x)throw Error(L(425))}function Jc(){}var Sp=null,Th=null;function _a(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var ya=typeof setTimeout=="function"?setTimeout:void 0,ks=typeof clearTimeout=="function"?clearTimeout:void 0,Qs=typeof Promise=="function"?Promise:void 0,ug=typeof queueMicrotask=="function"?queueMicrotask:typeof Qs<"u"?function(l){return Qs.resolve(null).then(l).catch(Fd)}:ya;function Fd(l){setTimeout(function(){throw l})}function bf(l,f){var x=f,N=0;do{var ge=x.nextSibling;if(l.removeChild(x),ge&&ge.nodeType===8)if(x=ge.data,x==="/$"){if(N===0){l.removeChild(ge),Ar(f);return}N--}else x!=="$"&&x!=="$?"&&x!=="$!"||N++;x=ge}while(x);Ar(f)}function Tc(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return l}function Mh(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var x=l.data;if(x==="$"||x==="$!"||x==="$?"){if(f===0)return l;f--}else x==="/$"&&f++}l=l.previousSibling}return null}var Ul=Math.random().toString(36).slice(2),jl="__reactFiber$"+Ul,Ho="__reactProps$"+Ul,Wo="__reactContainer$"+Ul,Go="__reactEvents$"+Ul,eh="__reactListeners$"+Ul,Fu="__reactHandles$"+Ul;function th(l){var f=l[jl];if(f)return f;for(var x=l.parentNode;x;){if(f=x[Wo]||x[jl]){if(x=f.alternate,f.child!==null||x!==null&&x.child!==null)for(l=Mh(l);l!==null;){if(x=l[jl])return x;l=Mh(l)}return f}l=x,x=l.parentNode}return null}function ed(l){return l=l[jl]||l[Wo],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function wu(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(L(33))}function zd(l){return l[Ho]||null}var Cp=[],xu=-1;function pl(l){return{current:l}}function Ea(l){0>xu||(l.current=Cp[xu],Cp[xu]=null,xu--)}function ye(l,f){xu++,Cp[xu]=l.current,l.current=f}var Yo={},wa=pl(Yo),Bs=pl(!1),hi=Yo;function Ph(l,f){var x=l.type.contextTypes;if(!x)return Yo;var N=l.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===f)return N.__reactInternalMemoizedMaskedChildContext;var ge={},Oe;for(Oe in x)ge[Oe]=f[Oe];return N&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=f,l.__reactInternalMemoizedMaskedChildContext=ge),ge}function Al(l){return l=l.childContextTypes,l!=null}function Oh(){Ea(Bs),Ea(wa)}function El(l,f,x){if(wa.current!==Yo)throw Error(L(168));ye(wa,f),ye(Bs,x)}function cg(l,f,x){var N=l.stateNode;if(f=f.childContextTypes,typeof N.getChildContext!="function")return x;N=N.getChildContext();for(var ge in N)if(!(ge in f))throw Error(L(108,Zt(l)||"Unknown",ge));return Ue({},x,N)}function Sf(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Yo,hi=wa.current,ye(wa,l),ye(Bs,Bs.current),!0}function Dp(l,f,x){var N=l.stateNode;if(!N)throw Error(L(169));x?(l=cg(l,f,hi),N.__reactInternalMemoizedMergedChildContext=l,Ea(Bs),Ea(wa),ye(wa,l)):Ea(Bs),ye(Bs,x)}var Mc=null,Ud=!1,No=!1;function hg(l){Mc===null?Mc=[l]:Mc.push(l)}function Ap(l){Ud=!0,hg(l)}function nh(){if(!No&&Mc!==null){No=!0;var l=0,f=Vs;try{var x=Mc;for(Vs=1;l<x.length;l++){var N=x[l];do N=N(!0);while(N!==null)}Mc=null,Ud=!1}catch(ge){throw Mc!==null&&(Mc=Mc.slice(l+1)),Pu(Jl,nh),ge}finally{Vs=f,No=!1}}return null}var Cf=[],nc=0,Do=null,td=0,tl=[],bu=0,rh=null,rc=1,uo="";function ic(l,f){Cf[nc++]=td,Cf[nc++]=Do,Do=l,td=f}function jd(l,f,x){tl[bu++]=rc,tl[bu++]=uo,tl[bu++]=rh,rh=l;var N=rc;l=uo;var ge=32-lo(N)-1;N&=~(1<<ge),x+=1;var Oe=32-lo(f)+ge;if(30<Oe){var Ht=ge-ge%5;Oe=(N&(1<<Ht)-1).toString(32),N>>=Ht,ge-=Ht,rc=1<<32-lo(f)+ge|x<<ge|N,uo=Oe+l}else rc=1<<Oe|x<<ge|N,uo=l}function Ga(l){l.return!==null&&(ic(l,1),jd(l,1,0))}function Vd(l){for(;l===Do;)Do=Cf[--nc],Cf[nc]=null,td=Cf[--nc],Cf[nc]=null;for(;l===rh;)rh=tl[--bu],tl[bu]=null,uo=tl[--bu],tl[bu]=null,rc=tl[--bu],tl[bu]=null}var Tl=null,Vl=null,Ys=!1,zu=null;function nd(l,f){var x=Bi(5,null,null,0);x.elementType="DELETED",x.stateNode=f,x.return=l,f=l.deletions,f===null?(l.deletions=[x],l.flags|=16):f.push(x)}function Hd(l,f){switch(l.tag){case 5:var x=l.type;return f=f.nodeType!==1||x.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(l.stateNode=f,Tl=l,Vl=Tc(f.firstChild),!0):!1;case 6:return f=l.pendingProps===""||f.nodeType!==3?null:f,f!==null?(l.stateNode=f,Tl=l,Vl=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(x=rh!==null?{id:rc,overflow:uo}:null,l.memoizedState={dehydrated:f,treeContext:x,retryLane:1073741824},x=Bi(18,null,null,0),x.stateNode=f,x.return=l,l.child=x,Tl=l,Vl=null,!0):!1;default:return!1}}function rd(l){return(l.mode&1)!==0&&(l.flags&128)===0}function id(l){if(Ys){var f=Vl;if(f){var x=f;if(!Hd(l,f)){if(rd(l))throw Error(L(418));f=Tc(x.nextSibling);var N=Tl;f&&Hd(l,f)?nd(N,x):(l.flags=l.flags&-4097|2,Ys=!1,Tl=l)}}else{if(rd(l))throw Error(L(418));l.flags=l.flags&-4097|2,Ys=!1,Tl=l}}}function Df(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Tl=l}function Hl(l){if(l!==Tl)return!1;if(!Ys)return Df(l),Ys=!0,!1;var f;if((f=l.tag!==3)&&!(f=l.tag!==5)&&(f=l.type,f=f!=="head"&&f!=="body"&&!_a(l.type,l.memoizedProps)),f&&(f=Vl)){if(rd(l))throw Su(),Error(L(418));for(;f;)nd(l,f),f=Tc(f.nextSibling)}if(Df(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(L(317));e:{for(l=l.nextSibling,f=0;l;){if(l.nodeType===8){var x=l.data;if(x==="/$"){if(f===0){Vl=Tc(l.nextSibling);break e}f--}else x!=="$"&&x!=="$!"&&x!=="$?"||f++}l=l.nextSibling}Vl=null}}else Vl=Tl?Tc(l.stateNode.nextSibling):null;return!0}function Su(){for(var l=Vl;l;)l=Tc(l.nextSibling)}function kh(){Vl=Tl=null,Ys=!1}function Ih(l){zu===null?zu=[l]:zu.push(l)}var fg=Pe.ReactCurrentBatchConfig;function co(l,f,x){if(l=x.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(L(309));var N=x.stateNode}if(!N)throw Error(L(147,l));var ge=N,Oe=""+l;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===Oe?f.ref:(f=function(Ht){var Sn=ge.refs;Ht===null?delete Sn[Oe]:Sn[Oe]=Ht},f._stringRef=Oe,f)}if(typeof l!="string")throw Error(L(284));if(!x._owner)throw Error(L(290,l))}return l}function Pc(l,f){throw l=Object.prototype.toString.call(f),Error(L(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l))}function Ml(l){var f=l._init;return f(l._payload)}function eo(l){function f(Xn,Un){if(l){var rr=Xn.deletions;rr===null?(Xn.deletions=[Un],Xn.flags|=16):rr.push(Un)}}function x(Xn,Un){if(!l)return null;for(;Un!==null;)f(Xn,Un),Un=Un.sibling;return null}function N(Xn,Un){for(Xn=new Map;Un!==null;)Un.key!==null?Xn.set(Un.key,Un):Xn.set(Un.index,Un),Un=Un.sibling;return Xn}function ge(Xn,Un){return Xn=As(Xn,Un),Xn.index=0,Xn.sibling=null,Xn}function Oe(Xn,Un,rr){return Xn.index=rr,l?(rr=Xn.alternate,rr!==null?(rr=rr.index,rr<Un?(Xn.flags|=2,Un):rr):(Xn.flags|=2,Un)):(Xn.flags|=1048576,Un)}function Ht(Xn){return l&&Xn.alternate===null&&(Xn.flags|=2),Xn}function Sn(Xn,Un,rr,Nr){return Un===null||Un.tag!==6?(Un=Is(rr,Xn.mode,Nr),Un.return=Xn,Un):(Un=ge(Un,rr),Un.return=Xn,Un)}function Rn(Xn,Un,rr,Nr){var vi=rr.type;return vi===Qe?Dr(Xn,Un,rr.props.children,Nr,rr.key):Un!==null&&(Un.elementType===vi||typeof vi=="object"&&vi!==null&&vi.$$typeof===Qt&&Ml(vi)===Un.type)?(Nr=ge(Un,rr.props),Nr.ref=co(Xn,Un,rr),Nr.return=Xn,Nr):(Nr=rs(rr.type,rr.key,rr.props,null,Xn.mode,Nr),Nr.ref=co(Xn,Un,rr),Nr.return=Xn,Nr)}function dr(Xn,Un,rr,Nr){return Un===null||Un.tag!==4||Un.stateNode.containerInfo!==rr.containerInfo||Un.stateNode.implementation!==rr.implementation?(Un=Ws(rr,Xn.mode,Nr),Un.return=Xn,Un):(Un=ge(Un,rr.children||[]),Un.return=Xn,Un)}function Dr(Xn,Un,rr,Nr,vi){return Un===null||Un.tag!==7?(Un=Ji(rr,Xn.mode,Nr,vi),Un.return=Xn,Un):(Un=ge(Un,rr),Un.return=Xn,Un)}function Pr(Xn,Un,rr){if(typeof Un=="string"&&Un!==""||typeof Un=="number")return Un=Is(""+Un,Xn.mode,rr),Un.return=Xn,Un;if(typeof Un=="object"&&Un!==null){switch(Un.$$typeof){case Se:return rr=rs(Un.type,Un.key,Un.props,null,Xn.mode,rr),rr.ref=co(Xn,null,Un),rr.return=Xn,rr;case ee:return Un=Ws(Un,Xn.mode,rr),Un.return=Xn,Un;case Qt:var Nr=Un._init;return Pr(Xn,Nr(Un._payload),rr)}if(Ye(Un)||Lt(Un))return Un=Ji(Un,Xn.mode,rr,null),Un.return=Xn,Un;Pc(Xn,Un)}return null}function Ur(Xn,Un,rr,Nr){var vi=Un!==null?Un.key:null;if(typeof rr=="string"&&rr!==""||typeof rr=="number")return vi!==null?null:Sn(Xn,Un,""+rr,Nr);if(typeof rr=="object"&&rr!==null){switch(rr.$$typeof){case Se:return rr.key===vi?Rn(Xn,Un,rr,Nr):null;case ee:return rr.key===vi?dr(Xn,Un,rr,Nr):null;case Qt:return vi=rr._init,Ur(Xn,Un,vi(rr._payload),Nr)}if(Ye(rr)||Lt(rr))return vi!==null?null:Dr(Xn,Un,rr,Nr,null);Pc(Xn,rr)}return null}function pi(Xn,Un,rr,Nr,vi){if(typeof Nr=="string"&&Nr!==""||typeof Nr=="number")return Xn=Xn.get(rr)||null,Sn(Un,Xn,""+Nr,vi);if(typeof Nr=="object"&&Nr!==null){switch(Nr.$$typeof){case Se:return Xn=Xn.get(Nr.key===null?rr:Nr.key)||null,Rn(Un,Xn,Nr,vi);case ee:return Xn=Xn.get(Nr.key===null?rr:Nr.key)||null,dr(Un,Xn,Nr,vi);case Qt:var xi=Nr._init;return pi(Xn,Un,rr,xi(Nr._payload),vi)}if(Ye(Nr)||Lt(Nr))return Xn=Xn.get(rr)||null,Dr(Un,Xn,Nr,vi,null);Pc(Un,Nr)}return null}function mi(Xn,Un,rr,Nr){for(var vi=null,xi=null,Ri=Un,Ui=Un=0,zs=null;Ri!==null&&Ui<rr.length;Ui++){Ri.index>Ui?(zs=Ri,Ri=null):zs=Ri.sibling;var M=Ur(Xn,Ri,rr[Ui],Nr);if(M===null){Ri===null&&(Ri=zs);break}l&&Ri&&M.alternate===null&&f(Xn,Ri),Un=Oe(M,Un,Ui),xi===null?vi=M:xi.sibling=M,xi=M,Ri=zs}if(Ui===rr.length)return x(Xn,Ri),Ys&&ic(Xn,Ui),vi;if(Ri===null){for(;Ui<rr.length;Ui++)Ri=Pr(Xn,rr[Ui],Nr),Ri!==null&&(Un=Oe(Ri,Un,Ui),xi===null?vi=Ri:xi.sibling=Ri,xi=Ri);return Ys&&ic(Xn,Ui),vi}for(Ri=N(Xn,Ri);Ui<rr.length;Ui++)zs=pi(Ri,Xn,Ui,rr[Ui],Nr),zs!==null&&(l&&zs.alternate!==null&&Ri.delete(zs.key===null?Ui:zs.key),Un=Oe(zs,Un,Ui),xi===null?vi=zs:xi.sibling=zs,xi=zs);return l&&Ri.forEach(function(Z){return f(Xn,Z)}),Ys&&ic(Xn,Ui),vi}function gi(Xn,Un,rr,Nr){var vi=Lt(rr);if(typeof vi!="function")throw Error(L(150));if(rr=vi.call(rr),rr==null)throw Error(L(151));for(var xi=vi=null,Ri=Un,Ui=Un=0,zs=null,M=rr.next();Ri!==null&&!M.done;Ui++,M=rr.next()){Ri.index>Ui?(zs=Ri,Ri=null):zs=Ri.sibling;var Z=Ur(Xn,Ri,M.value,Nr);if(Z===null){Ri===null&&(Ri=zs);break}l&&Ri&&Z.alternate===null&&f(Xn,Ri),Un=Oe(Z,Un,Ui),xi===null?vi=Z:xi.sibling=Z,xi=Z,Ri=zs}if(M.done)return x(Xn,Ri),Ys&&ic(Xn,Ui),vi;if(Ri===null){for(;!M.done;Ui++,M=rr.next())M=Pr(Xn,M.value,Nr),M!==null&&(Un=Oe(M,Un,Ui),xi===null?vi=M:xi.sibling=M,xi=M);return Ys&&ic(Xn,Ui),vi}for(Ri=N(Xn,Ri);!M.done;Ui++,M=rr.next())M=pi(Ri,Xn,Ui,M.value,Nr),M!==null&&(l&&M.alternate!==null&&Ri.delete(M.key===null?Ui:M.key),Un=Oe(M,Un,Ui),xi===null?vi=M:xi.sibling=M,xi=M);return l&&Ri.forEach(function(xe){return f(Xn,xe)}),Ys&&ic(Xn,Ui),vi}function xa(Xn,Un,rr,Nr){if(typeof rr=="object"&&rr!==null&&rr.type===Qe&&rr.key===null&&(rr=rr.props.children),typeof rr=="object"&&rr!==null){switch(rr.$$typeof){case Se:e:{for(var vi=rr.key,xi=Un;xi!==null;){if(xi.key===vi){if(vi=rr.type,vi===Qe){if(xi.tag===7){x(Xn,xi.sibling),Un=ge(xi,rr.props.children),Un.return=Xn,Xn=Un;break e}}else if(xi.elementType===vi||typeof vi=="object"&&vi!==null&&vi.$$typeof===Qt&&Ml(vi)===xi.type){x(Xn,xi.sibling),Un=ge(xi,rr.props),Un.ref=co(Xn,xi,rr),Un.return=Xn,Xn=Un;break e}x(Xn,xi);break}else f(Xn,xi);xi=xi.sibling}rr.type===Qe?(Un=Ji(rr.props.children,Xn.mode,Nr,rr.key),Un.return=Xn,Xn=Un):(Nr=rs(rr.type,rr.key,rr.props,null,Xn.mode,Nr),Nr.ref=co(Xn,Un,rr),Nr.return=Xn,Xn=Nr)}return Ht(Xn);case ee:e:{for(xi=rr.key;Un!==null;){if(Un.key===xi)if(Un.tag===4&&Un.stateNode.containerInfo===rr.containerInfo&&Un.stateNode.implementation===rr.implementation){x(Xn,Un.sibling),Un=ge(Un,rr.children||[]),Un.return=Xn,Xn=Un;break e}else{x(Xn,Un);break}else f(Xn,Un);Un=Un.sibling}Un=Ws(rr,Xn.mode,Nr),Un.return=Xn,Xn=Un}return Ht(Xn);case Qt:return xi=rr._init,xa(Xn,Un,xi(rr._payload),Nr)}if(Ye(rr))return mi(Xn,Un,rr,Nr);if(Lt(rr))return gi(Xn,Un,rr,Nr);Pc(Xn,rr)}return typeof rr=="string"&&rr!==""||typeof rr=="number"?(rr=""+rr,Un!==null&&Un.tag===6?(x(Xn,Un.sibling),Un=ge(Un,rr),Un.return=Xn,Xn=Un):(x(Xn,Un),Un=Is(rr,Xn.mode,Nr),Un.return=Xn,Xn=Un),Ht(Xn)):x(Xn,Un)}return xa}var Af=eo(!0),Lh=eo(!1),Bh=pl(null),gl=null,_o=null,Rh=null;function sd(){Rh=_o=gl=null}function Zo(l){var f=Bh.current;Ea(Bh),l._currentValue=f}function Wd(l,f,x){for(;l!==null;){var N=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,N!==null&&(N.childLanes|=f)):N!==null&&(N.childLanes&f)!==f&&(N.childLanes|=f),l===x)break;l=l.return}}function Oc(l,f){gl=l,Rh=_o=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&f)!==0&&(rl=!0),l.firstContext=null)}function cs(l){var f=l._currentValue;if(Rh!==l)if(l={context:l,memoizedValue:f,next:null},_o===null){if(gl===null)throw Error(L(308));_o=l,gl.dependencies={lanes:0,firstContext:l}}else _o=_o.next=l;return f}var Cu=null;function Ef(l){Cu===null?Cu=[l]:Cu.push(l)}function yo(l,f,x,N){var ge=f.interleaved;return ge===null?(x.next=x,Ef(f)):(x.next=ge.next,ge.next=x),f.interleaved=x,Pl(l,N)}function Pl(l,f){l.lanes|=f;var x=l.alternate;for(x!==null&&(x.lanes|=f),x=l,l=l.return;l!==null;)l.childLanes|=f,x=l.alternate,x!==null&&(x.childLanes|=f),x=l,l=l.return;return x.tag===3?x.stateNode:null}var ml=!1;function nl(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nh(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Rs(l,f){return{eventTime:l,lane:f,tag:0,payload:null,callback:null,next:null}}function Du(l,f,x){var N=l.updateQueue;if(N===null)return null;if(N=N.shared,(fs&2)!==0){var ge=N.pending;return ge===null?f.next=f:(f.next=ge.next,ge.next=f),N.pending=f,Pl(l,x)}return ge=N.interleaved,ge===null?(f.next=f,Ef(N)):(f.next=ge.next,ge.next=f),N.interleaved=f,Pl(l,x)}function ad(l,f,x){if(f=f.updateQueue,f!==null&&(f=f.shared,(x&4194240)!==0)){var N=f.lanes;N&=l.pendingLanes,x|=N,f.lanes=x,Vf(l,x)}}function dg(l,f){var x=l.updateQueue,N=l.alternate;if(N!==null&&(N=N.updateQueue,x===N)){var ge=null,Oe=null;if(x=x.firstBaseUpdate,x!==null){do{var Ht={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};Oe===null?ge=Oe=Ht:Oe=Oe.next=Ht,x=x.next}while(x!==null);Oe===null?ge=Oe=f:Oe=Oe.next=f}else ge=Oe=f;x={baseState:N.baseState,firstBaseUpdate:ge,lastBaseUpdate:Oe,shared:N.shared,effects:N.effects},l.updateQueue=x;return}l=x.lastBaseUpdate,l===null?x.firstBaseUpdate=f:l.next=f,x.lastBaseUpdate=f}function Gd(l,f,x,N){var ge=l.updateQueue;ml=!1;var Oe=ge.firstBaseUpdate,Ht=ge.lastBaseUpdate,Sn=ge.shared.pending;if(Sn!==null){ge.shared.pending=null;var Rn=Sn,dr=Rn.next;Rn.next=null,Ht===null?Oe=dr:Ht.next=dr,Ht=Rn;var Dr=l.alternate;Dr!==null&&(Dr=Dr.updateQueue,Sn=Dr.lastBaseUpdate,Sn!==Ht&&(Sn===null?Dr.firstBaseUpdate=dr:Sn.next=dr,Dr.lastBaseUpdate=Rn))}if(Oe!==null){var Pr=ge.baseState;Ht=0,Dr=dr=Rn=null,Sn=Oe;do{var Ur=Sn.lane,pi=Sn.eventTime;if((N&Ur)===Ur){Dr!==null&&(Dr=Dr.next={eventTime:pi,lane:0,tag:Sn.tag,payload:Sn.payload,callback:Sn.callback,next:null});e:{var mi=l,gi=Sn;switch(Ur=f,pi=x,gi.tag){case 1:if(mi=gi.payload,typeof mi=="function"){Pr=mi.call(pi,Pr,Ur);break e}Pr=mi;break e;case 3:mi.flags=mi.flags&-65537|128;case 0:if(mi=gi.payload,Ur=typeof mi=="function"?mi.call(pi,Pr,Ur):mi,Ur==null)break e;Pr=Ue({},Pr,Ur);break e;case 2:ml=!0}}Sn.callback!==null&&Sn.lane!==0&&(l.flags|=64,Ur=ge.effects,Ur===null?ge.effects=[Sn]:Ur.push(Sn))}else pi={eventTime:pi,lane:Ur,tag:Sn.tag,payload:Sn.payload,callback:Sn.callback,next:null},Dr===null?(dr=Dr=pi,Rn=Pr):Dr=Dr.next=pi,Ht|=Ur;if(Sn=Sn.next,Sn===null){if(Sn=ge.shared.pending,Sn===null)break;Ur=Sn,Sn=Ur.next,Ur.next=null,ge.lastBaseUpdate=Ur,ge.shared.pending=null}}while(!0);if(Dr===null&&(Rn=Pr),ge.baseState=Rn,ge.firstBaseUpdate=dr,ge.lastBaseUpdate=Dr,f=ge.shared.interleaved,f!==null){ge=f;do Ht|=ge.lane,ge=ge.next;while(ge!==f)}else Oe===null&&(ge.shared.lanes=0);i|=Ht,l.lanes=Ht,l.memoizedState=Pr}}function Fh(l,f,x){if(l=f.effects,f.effects=null,l!==null)for(f=0;f<l.length;f++){var N=l[f],ge=N.callback;if(ge!==null){if(N.callback=null,N=x,typeof ge!="function")throw Error(L(191,ge));ge.call(N)}}}var zh={},Fo=pl(zh),Uh=pl(zh),od=pl(zh);function jh(l){if(l===zh)throw Error(L(174));return l}function Uu(l,f){switch(ye(od,f),ye(Uh,l),ye(Fo,zh),l=f.nodeType,l){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:xt(null,"");break;default:l=l===8?f.parentNode:f,f=l.namespaceURI||null,l=l.tagName,f=xt(f,l)}Ea(Fo),ye(Fo,f)}function ju(){Ea(Fo),Ea(Uh),Ea(od)}function Ep(l){jh(od.current);var f=jh(Fo.current),x=xt(f,l.type);f!==x&&(ye(Uh,l),ye(Fo,x))}function Vu(l){Uh.current===l&&(Ea(Fo),Ea(Uh))}var Or=pl(0);function Yd(l){for(var f=l;f!==null;){if(f.tag===13){var x=f.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Vh=[];function Tf(){for(var l=0;l<Vh.length;l++)Vh[l]._workInProgressVersionPrimary=null;Vh.length=0}var ih=Pe.ReactCurrentDispatcher,sh=Pe.ReactCurrentBatchConfig,sc=0,Ta=null,aa=null,ha=null,lu=!1,$o=!1,Au=0,Ao=0;function Eo(){throw Error(L(321))}function ld(l,f){if(f===null)return!1;for(var x=0;x<f.length&&x<l.length;x++)if(!sa(l[x],f[x]))return!1;return!0}function Hu(l,f,x,N,ge,Oe){if(sc=Oe,Ta=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ih.current=l===null||l.memoizedState===null?Na:Op,l=x(N,ge),$o){Oe=0;do{if($o=!1,Au=0,25<=Oe)throw Error(L(301));Oe+=1,ha=aa=null,f.updateQueue=null,ih.current=qd,l=x(N,ge)}while($o)}if(ih.current=pd,f=aa!==null&&aa.next!==null,sc=0,ha=aa=Ta=null,lu=!1,f)throw Error(L(300));return l}function Tp(){var l=Au!==0;return Au=0,l}function Ol(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ha===null?Ta.memoizedState=ha=l:ha=ha.next=l,ha}function Wl(){if(aa===null){var l=Ta.alternate;l=l!==null?l.memoizedState:null}else l=aa.next;var f=ha===null?Ta.memoizedState:ha.next;if(f!==null)ha=f,aa=l;else{if(l===null)throw Error(L(310));aa=l,l={memoizedState:aa.memoizedState,baseState:aa.baseState,baseQueue:aa.baseQueue,queue:aa.queue,next:null},ha===null?Ta.memoizedState=ha=l:ha=ha.next=l}return ha}function Ko(l,f){return typeof f=="function"?f(l):f}function vr(l){var f=Wl(),x=f.queue;if(x===null)throw Error(L(311));x.lastRenderedReducer=l;var N=aa,ge=N.baseQueue,Oe=x.pending;if(Oe!==null){if(ge!==null){var Ht=ge.next;ge.next=Oe.next,Oe.next=Ht}N.baseQueue=ge=Oe,x.pending=null}if(ge!==null){Oe=ge.next,N=N.baseState;var Sn=Ht=null,Rn=null,dr=Oe;do{var Dr=dr.lane;if((sc&Dr)===Dr)Rn!==null&&(Rn=Rn.next={lane:0,action:dr.action,hasEagerState:dr.hasEagerState,eagerState:dr.eagerState,next:null}),N=dr.hasEagerState?dr.eagerState:l(N,dr.action);else{var Pr={lane:Dr,action:dr.action,hasEagerState:dr.hasEagerState,eagerState:dr.eagerState,next:null};Rn===null?(Sn=Rn=Pr,Ht=N):Rn=Rn.next=Pr,Ta.lanes|=Dr,i|=Dr}dr=dr.next}while(dr!==null&&dr!==Oe);Rn===null?Ht=N:Rn.next=Sn,sa(N,f.memoizedState)||(rl=!0),f.memoizedState=N,f.baseState=Ht,f.baseQueue=Rn,x.lastRenderedState=N}if(l=x.interleaved,l!==null){ge=l;do Oe=ge.lane,Ta.lanes|=Oe,i|=Oe,ge=ge.next;while(ge!==l)}else ge===null&&(x.lanes=0);return[f.memoizedState,x.dispatch]}function ah(l){var f=Wl(),x=f.queue;if(x===null)throw Error(L(311));x.lastRenderedReducer=l;var N=x.dispatch,ge=x.pending,Oe=f.memoizedState;if(ge!==null){x.pending=null;var Ht=ge=ge.next;do Oe=l(Oe,Ht.action),Ht=Ht.next;while(Ht!==ge);sa(Oe,f.memoizedState)||(rl=!0),f.memoizedState=Oe,f.baseQueue===null&&(f.baseState=Oe),x.lastRenderedState=Oe}return[Oe,N]}function fi(){}function pg(l,f){var x=Ta,N=Wl(),ge=f(),Oe=!sa(N.memoizedState,ge);if(Oe&&(N.memoizedState=ge,rl=!0),N=N.queue,Ma(Zd.bind(null,x,N,l),[l]),N.getSnapshot!==f||Oe||ha!==null&&ha.memoizedState.tag&1){if(x.flags|=2048,Mf(9,Wu.bind(null,x,N,ge,f),void 0,null),Ds===null)throw Error(L(349));(sc&30)!==0||Mp(x,f,ge)}return ge}function Mp(l,f,x){l.flags|=16384,l={getSnapshot:f,value:x},f=Ta.updateQueue,f===null?(f={lastEffect:null,stores:null},Ta.updateQueue=f,f.stores=[l]):(x=f.stores,x===null?f.stores=[l]:x.push(l))}function Wu(l,f,x,N){f.value=x,f.getSnapshot=N,ud(f)&&Pp(l)}function Zd(l,f,x){return x(function(){ud(f)&&Pp(l)})}function ud(l){var f=l.getSnapshot;l=l.value;try{var x=f();return!sa(l,x)}catch{return!0}}function Pp(l){var f=Pl(l,1);f!==null&&te(f,l,1,-1)}function Ra(l){var f=Ol();return typeof l=="function"&&(l=l()),f.memoizedState=f.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:l},f.queue=l,l=l.dispatch=zo.bind(null,Ta,l),[f.memoizedState,l]}function Mf(l,f,x,N){return l={tag:l,create:f,destroy:x,deps:N,next:null},f=Ta.updateQueue,f===null?(f={lastEffect:null,stores:null},Ta.updateQueue=f,f.lastEffect=l.next=l):(x=f.lastEffect,x===null?f.lastEffect=l.next=l:(N=x.next,x.next=l,l.next=N,f.lastEffect=l)),l}function ac(){return Wl().memoizedState}function oh(l,f,x,N){var ge=Ol();Ta.flags|=l,ge.memoizedState=Mf(1|f,x,void 0,N===void 0?null:N)}function Hh(l,f,x,N){var ge=Wl();N=N===void 0?null:N;var Oe=void 0;if(aa!==null){var Ht=aa.memoizedState;if(Oe=Ht.destroy,N!==null&&ld(N,Ht.deps)){ge.memoizedState=Mf(f,x,Oe,N);return}}Ta.flags|=l,ge.memoizedState=Mf(1|f,x,Oe,N)}function $d(l,f){return oh(8390656,8,l,f)}function Ma(l,f){return Hh(2048,8,l,f)}function vl(l,f){return Hh(4,2,l,f)}function Pf(l,f){return Hh(4,4,l,f)}function Kd(l,f){if(typeof f=="function")return l=l(),f(l),function(){f(null)};if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function lh(l,f,x){return x=x!=null?x.concat([l]):null,Hh(4,4,Kd.bind(null,f,l),x)}function cd(){}function Of(l,f){var x=Wl();f=f===void 0?null:f;var N=x.memoizedState;return N!==null&&f!==null&&ld(f,N[1])?N[0]:(x.memoizedState=[l,f],l)}function hd(l,f){var x=Wl();f=f===void 0?null:f;var N=x.memoizedState;return N!==null&&f!==null&&ld(f,N[1])?N[0]:(l=l(),x.memoizedState=[l,f],l)}function Wh(l,f,x){return(sc&21)===0?(l.baseState&&(l.baseState=!1,rl=!0),l.memoizedState=x):(sa(x,f)||(x=Wc(),Ta.lanes|=x,i|=x,l.baseState=!0),f)}function kf(l,f){var x=Vs;Vs=x!==0&&4>x?x:4,l(!0);var N=sh.transition;sh.transition={};try{l(!1),f()}finally{Vs=x,sh.transition=N}}function To(){return Wl().memoizedState}function fd(l,f,x){var N=G(l);if(x={lane:N,action:x,hasEagerState:!1,eagerState:null,next:null},dd(l))kc(f,x);else if(x=yo(l,f,x,N),x!==null){var ge=I();te(x,l,N,ge),uh(x,f,N)}}function zo(l,f,x){var N=G(l),ge={lane:N,action:x,hasEagerState:!1,eagerState:null,next:null};if(dd(l))kc(f,ge);else{var Oe=l.alternate;if(l.lanes===0&&(Oe===null||Oe.lanes===0)&&(Oe=f.lastRenderedReducer,Oe!==null))try{var Ht=f.lastRenderedState,Sn=Oe(Ht,x);if(ge.hasEagerState=!0,ge.eagerState=Sn,sa(Sn,Ht)){var Rn=f.interleaved;Rn===null?(ge.next=ge,Ef(f)):(ge.next=Rn.next,Rn.next=ge),f.interleaved=ge;return}}catch{}finally{}x=yo(l,f,ge,N),x!==null&&(ge=I(),te(x,l,N,ge),uh(x,f,N))}}function dd(l){var f=l.alternate;return l===Ta||f!==null&&f===Ta}function kc(l,f){$o=lu=!0;var x=l.pending;x===null?f.next=f:(f.next=x.next,x.next=f),l.pending=f}function uh(l,f,x){if((x&4194240)!==0){var N=f.lanes;N&=l.pendingLanes,x|=N,f.lanes=x,Vf(l,x)}}var pd={readContext:cs,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},Na={readContext:cs,useCallback:function(l,f){return Ol().memoizedState=[l,f===void 0?null:f],l},useContext:cs,useEffect:$d,useImperativeHandle:function(l,f,x){return x=x!=null?x.concat([l]):null,oh(4194308,4,Kd.bind(null,f,l),x)},useLayoutEffect:function(l,f){return oh(4194308,4,l,f)},useInsertionEffect:function(l,f){return oh(4,2,l,f)},useMemo:function(l,f){var x=Ol();return f=f===void 0?null:f,l=l(),x.memoizedState=[l,f],l},useReducer:function(l,f,x){var N=Ol();return f=x!==void 0?x(f):f,N.memoizedState=N.baseState=f,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:f},N.queue=l,l=l.dispatch=fd.bind(null,Ta,l),[N.memoizedState,l]},useRef:function(l){var f=Ol();return l={current:l},f.memoizedState=l},useState:Ra,useDebugValue:cd,useDeferredValue:function(l){return Ol().memoizedState=l},useTransition:function(){var l=Ra(!1),f=l[0];return l=kf.bind(null,l[1]),Ol().memoizedState=l,[f,l]},useMutableSource:function(){},useSyncExternalStore:function(l,f,x){var N=Ta,ge=Ol();if(Ys){if(x===void 0)throw Error(L(407));x=x()}else{if(x=f(),Ds===null)throw Error(L(349));(sc&30)!==0||Mp(N,f,x)}ge.memoizedState=x;var Oe={value:x,getSnapshot:f};return ge.queue=Oe,$d(Zd.bind(null,N,Oe,l),[l]),N.flags|=2048,Mf(9,Wu.bind(null,N,Oe,x,f),void 0,null),x},useId:function(){var l=Ol(),f=Ds.identifierPrefix;if(Ys){var x=uo,N=rc;x=(N&~(1<<32-lo(N)-1)).toString(32)+x,f=":"+f+"R"+x,x=Au++,0<x&&(f+="H"+x.toString(32)),f+=":"}else x=Ao++,f=":"+f+"r"+x.toString(32)+":";return l.memoizedState=f},unstable_isNewReconciler:!1},Op={readContext:cs,useCallback:Of,useContext:cs,useEffect:Ma,useImperativeHandle:lh,useInsertionEffect:vl,useLayoutEffect:Pf,useMemo:hd,useReducer:vr,useRef:ac,useState:function(){return vr(Ko)},useDebugValue:cd,useDeferredValue:function(l){var f=Wl();return Wh(f,aa.memoizedState,l)},useTransition:function(){var l=vr(Ko)[0],f=Wl().memoizedState;return[l,f]},useMutableSource:fi,useSyncExternalStore:pg,useId:To,unstable_isNewReconciler:!1},qd={readContext:cs,useCallback:Of,useContext:cs,useEffect:Ma,useImperativeHandle:lh,useInsertionEffect:vl,useLayoutEffect:Pf,useMemo:hd,useReducer:ah,useRef:ac,useState:function(){return ah(Ko)},useDebugValue:cd,useDeferredValue:function(l){var f=Wl();return aa===null?f.memoizedState=l:Wh(f,aa.memoizedState,l)},useTransition:function(){var l=ah(Ko)[0],f=Wl().memoizedState;return[l,f]},useMutableSource:fi,useSyncExternalStore:pg,useId:To,unstable_isNewReconciler:!1};function kl(l,f){if(l&&l.defaultProps){f=Ue({},f),l=l.defaultProps;for(var x in l)f[x]===void 0&&(f[x]=l[x]);return f}return f}function kp(l,f,x,N){f=l.memoizedState,x=x(N,f),x=x==null?f:Ue({},f,x),l.memoizedState=x,l.lanes===0&&(l.updateQueue.baseState=x)}var Gh={isMounted:function(l){return(l=l._reactInternals)?Co(l)===l:!1},enqueueSetState:function(l,f,x){l=l._reactInternals;var N=I(),ge=G(l),Oe=Rs(N,ge);Oe.payload=f,x!=null&&(Oe.callback=x),f=Du(l,Oe,ge),f!==null&&(te(f,l,ge,N),ad(f,l,ge))},enqueueReplaceState:function(l,f,x){l=l._reactInternals;var N=I(),ge=G(l),Oe=Rs(N,ge);Oe.tag=1,Oe.payload=f,x!=null&&(Oe.callback=x),f=Du(l,Oe,ge),f!==null&&(te(f,l,ge,N),ad(f,l,ge))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var x=I(),N=G(l),ge=Rs(x,N);ge.tag=2,f!=null&&(ge.callback=f),f=Du(l,ge,N),f!==null&&(te(f,l,N,x),ad(f,l,N))}};function ch(l,f,x,N,ge,Oe,Ht){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(N,Oe,Ht):f.prototype&&f.prototype.isPureReactComponent?!qc(x,N)||!qc(ge,Oe):!0}function Js(l,f,x){var N=!1,ge=Yo,Oe=f.contextType;return typeof Oe=="object"&&Oe!==null?Oe=cs(Oe):(ge=Al(f)?hi:wa.current,N=f.contextTypes,Oe=(N=N!=null)?Ph(l,ge):Yo),f=new f(x,Oe),l.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Gh,l.stateNode=f,f._reactInternals=l,N&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=ge,l.__reactInternalMemoizedMaskedChildContext=Oe),f}function ho(l,f,x,N){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(x,N),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(x,N),f.state!==l&&Gh.enqueueReplaceState(f,f.state,null)}function Xd(l,f,x,N){var ge=l.stateNode;ge.props=x,ge.state=l.memoizedState,ge.refs={},nl(l);var Oe=f.contextType;typeof Oe=="object"&&Oe!==null?ge.context=cs(Oe):(Oe=Al(f)?hi:wa.current,ge.context=Ph(l,Oe)),ge.state=l.memoizedState,Oe=f.getDerivedStateFromProps,typeof Oe=="function"&&(kp(l,f,Oe,x),ge.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof ge.getSnapshotBeforeUpdate=="function"||typeof ge.UNSAFE_componentWillMount!="function"&&typeof ge.componentWillMount!="function"||(f=ge.state,typeof ge.componentWillMount=="function"&&ge.componentWillMount(),typeof ge.UNSAFE_componentWillMount=="function"&&ge.UNSAFE_componentWillMount(),f!==ge.state&&Gh.enqueueReplaceState(ge,ge.state,null),Gd(l,x,ge,N),ge.state=l.memoizedState),typeof ge.componentDidMount=="function"&&(l.flags|=4194308)}function If(l,f){try{var x="",N=f;do x+=sn(N),N=N.return;while(N);var ge=x}catch(Oe){ge=`
Error generating stack: `+Oe.message+`
`+Oe.stack}return{value:l,source:f,stack:ge,digest:null}}function Ic(l,f,x){return{value:l,source:null,stack:x??null,digest:f??null}}function Il(l,f){try{console.error(f.value)}catch(x){setTimeout(function(){throw x})}}var Lf=typeof WeakMap=="function"?WeakMap:Map;function Qd(l,f,x){x=Rs(-1,x),x.tag=3,x.payload={element:null};var N=f.value;return x.callback=function(){P||(P=!0,F=N),Il(l,f)},x}function Ip(l,f,x){x=Rs(-1,x),x.tag=3;var N=l.type.getDerivedStateFromError;if(typeof N=="function"){var ge=f.value;x.payload=function(){return N(ge)},x.callback=function(){Il(l,f)}}var Oe=l.stateNode;return Oe!==null&&typeof Oe.componentDidCatch=="function"&&(x.callback=function(){Il(l,f),typeof N!="function"&&(V===null?V=new Set([this]):V.add(this));var Ht=f.stack;this.componentDidCatch(f.value,{componentStack:Ht!==null?Ht:""})}),x}function Jd(l,f,x){var N=l.pingCache;if(N===null){N=l.pingCache=new Lf;var ge=new Set;N.set(f,ge)}else ge=N.get(f),ge===void 0&&(ge=new Set,N.set(f,ge));ge.has(x)||(ge.add(x),l=ti.bind(null,l,f,x),f.then(l,l))}function Gl(l){do{var f;if((f=l.tag===13)&&(f=l.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return l;l=l.return}while(l!==null);return null}function oc(l,f,x,N,ge){return(l.mode&1)===0?(l===f?l.flags|=65536:(l.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(f=Rs(-1,1),f.tag=2,Du(x,f,1))),x.lanes|=1),l):(l.flags|=65536,l.lanes=ge,l)}var tm=Pe.ReactCurrentOwner,rl=!1;function Mo(l,f,x,N){f.child=l===null?Lh(f,null,x,N):Af(f,l.child,x,N)}function Lc(l,f,x,N,ge){x=x.render;var Oe=f.ref;return Oc(f,ge),N=Hu(l,f,x,N,Oe,ge),x=Tp(),l!==null&&!rl?(f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~ge,rt(l,f,ge)):(Ys&&x&&Ga(f),f.flags|=1,Mo(l,f,N,ge),f.child)}function gd(l,f,x,N,ge){if(l===null){var Oe=x.type;return typeof Oe=="function"&&!ys(Oe)&&Oe.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(f.tag=15,f.type=Oe,Bc(l,f,Oe,N,ge)):(l=rs(x.type,null,N,f,f.mode,ge),l.ref=f.ref,l.return=f,f.child=l)}if(Oe=l.child,(l.lanes&ge)===0){var Ht=Oe.memoizedProps;if(x=x.compare,x=x!==null?x:qc,x(Ht,N)&&l.ref===f.ref)return rt(l,f,ge)}return f.flags|=1,l=As(Oe,N),l.ref=f.ref,l.return=f,f.child=l}function Bc(l,f,x,N,ge){if(l!==null){var Oe=l.memoizedProps;if(qc(Oe,N)&&l.ref===f.ref)if(rl=!1,f.pendingProps=N=Oe,(l.lanes&ge)!==0)(l.flags&131072)!==0&&(rl=!0);else return f.lanes=l.lanes,rt(l,f,ge)}return md(l,f,x,N,ge)}function Yh(l,f,x){var N=f.pendingProps,ge=N.children,Oe=l!==null?l.memoizedState:null;if(N.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(bo,ui),ui|=x;else{if((x&1073741824)===0)return l=Oe!==null?Oe.baseLanes|x:x,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:l,cachePool:null,transitions:null},f.updateQueue=null,ye(bo,ui),ui|=l,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=Oe!==null?Oe.baseLanes:x,ye(bo,ui),ui|=N}else Oe!==null?(N=Oe.baseLanes|x,f.memoizedState=null):N=x,ye(bo,ui),ui|=N;return Mo(l,f,ge,x),f.child}function Rc(l,f){var x=f.ref;(l===null&&x!==null||l!==null&&l.ref!==x)&&(f.flags|=512,f.flags|=2097152)}function md(l,f,x,N,ge){var Oe=Al(x)?hi:wa.current;return Oe=Ph(f,Oe),Oc(f,ge),x=Hu(l,f,x,N,Oe,ge),N=Tp(),l!==null&&!rl?(f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~ge,rt(l,f,ge)):(Ys&&N&&Ga(f),f.flags|=1,Mo(l,f,x,ge),f.child)}function ep(l,f,x,N,ge){if(Al(x)){var Oe=!0;Sf(f)}else Oe=!1;if(Oc(f,ge),f.stateNode===null)Ae(l,f),Js(f,x,N),Xd(f,x,N,ge),N=!0;else if(l===null){var Ht=f.stateNode,Sn=f.memoizedProps;Ht.props=Sn;var Rn=Ht.context,dr=x.contextType;typeof dr=="object"&&dr!==null?dr=cs(dr):(dr=Al(x)?hi:wa.current,dr=Ph(f,dr));var Dr=x.getDerivedStateFromProps,Pr=typeof Dr=="function"||typeof Ht.getSnapshotBeforeUpdate=="function";Pr||typeof Ht.UNSAFE_componentWillReceiveProps!="function"&&typeof Ht.componentWillReceiveProps!="function"||(Sn!==N||Rn!==dr)&&ho(f,Ht,N,dr),ml=!1;var Ur=f.memoizedState;Ht.state=Ur,Gd(f,N,Ht,ge),Rn=f.memoizedState,Sn!==N||Ur!==Rn||Bs.current||ml?(typeof Dr=="function"&&(kp(f,x,Dr,N),Rn=f.memoizedState),(Sn=ml||ch(f,x,Sn,N,Ur,Rn,dr))?(Pr||typeof Ht.UNSAFE_componentWillMount!="function"&&typeof Ht.componentWillMount!="function"||(typeof Ht.componentWillMount=="function"&&Ht.componentWillMount(),typeof Ht.UNSAFE_componentWillMount=="function"&&Ht.UNSAFE_componentWillMount()),typeof Ht.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Ht.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=N,f.memoizedState=Rn),Ht.props=N,Ht.state=Rn,Ht.context=dr,N=Sn):(typeof Ht.componentDidMount=="function"&&(f.flags|=4194308),N=!1)}else{Ht=f.stateNode,Nh(l,f),Sn=f.memoizedProps,dr=f.type===f.elementType?Sn:kl(f.type,Sn),Ht.props=dr,Pr=f.pendingProps,Ur=Ht.context,Rn=x.contextType,typeof Rn=="object"&&Rn!==null?Rn=cs(Rn):(Rn=Al(x)?hi:wa.current,Rn=Ph(f,Rn));var pi=x.getDerivedStateFromProps;(Dr=typeof pi=="function"||typeof Ht.getSnapshotBeforeUpdate=="function")||typeof Ht.UNSAFE_componentWillReceiveProps!="function"&&typeof Ht.componentWillReceiveProps!="function"||(Sn!==Pr||Ur!==Rn)&&ho(f,Ht,N,Rn),ml=!1,Ur=f.memoizedState,Ht.state=Ur,Gd(f,N,Ht,ge);var mi=f.memoizedState;Sn!==Pr||Ur!==mi||Bs.current||ml?(typeof pi=="function"&&(kp(f,x,pi,N),mi=f.memoizedState),(dr=ml||ch(f,x,dr,N,Ur,mi,Rn)||!1)?(Dr||typeof Ht.UNSAFE_componentWillUpdate!="function"&&typeof Ht.componentWillUpdate!="function"||(typeof Ht.componentWillUpdate=="function"&&Ht.componentWillUpdate(N,mi,Rn),typeof Ht.UNSAFE_componentWillUpdate=="function"&&Ht.UNSAFE_componentWillUpdate(N,mi,Rn)),typeof Ht.componentDidUpdate=="function"&&(f.flags|=4),typeof Ht.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Ht.componentDidUpdate!="function"||Sn===l.memoizedProps&&Ur===l.memoizedState||(f.flags|=4),typeof Ht.getSnapshotBeforeUpdate!="function"||Sn===l.memoizedProps&&Ur===l.memoizedState||(f.flags|=1024),f.memoizedProps=N,f.memoizedState=mi),Ht.props=N,Ht.state=mi,Ht.context=Rn,N=dr):(typeof Ht.componentDidUpdate!="function"||Sn===l.memoizedProps&&Ur===l.memoizedState||(f.flags|=4),typeof Ht.getSnapshotBeforeUpdate!="function"||Sn===l.memoizedProps&&Ur===l.memoizedState||(f.flags|=1024),N=!1)}return Nc(l,f,x,N,Oe,ge)}function Nc(l,f,x,N,ge,Oe){Rc(l,f);var Ht=(f.flags&128)!==0;if(!N&&!Ht)return ge&&Dp(f,x,!1),rt(l,f,Oe);N=f.stateNode,tm.current=f;var Sn=Ht&&typeof x.getDerivedStateFromError!="function"?null:N.render();return f.flags|=1,l!==null&&Ht?(f.child=Af(f,l.child,null,Oe),f.child=Af(f,null,Sn,Oe)):Mo(l,f,Sn,Oe),f.memoizedState=N.state,ge&&Dp(f,x,!0),f.child}function y(l){var f=l.stateNode;f.pendingContext?El(l,f.pendingContext,f.pendingContext!==f.context):f.context&&El(l,f.context,!1),Uu(l,f.containerInfo)}function e(l,f,x,N,ge){return kh(),Ih(ge),f.flags|=256,Mo(l,f,x,N),f.child}var n={dehydrated:null,treeContext:null,retryLane:0};function s(l){return{baseLanes:l,cachePool:null,transitions:null}}function c(l,f,x){var N=f.pendingProps,ge=Or.current,Oe=!1,Ht=(f.flags&128)!==0,Sn;if((Sn=Ht)||(Sn=l!==null&&l.memoizedState===null?!1:(ge&2)!==0),Sn?(Oe=!0,f.flags&=-129):(l===null||l.memoizedState!==null)&&(ge|=1),ye(Or,ge&1),l===null)return id(f),l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((f.mode&1)===0?f.lanes=1:l.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(Ht=N.children,l=N.fallback,Oe?(N=f.mode,Oe=f.child,Ht={mode:"hidden",children:Ht},(N&1)===0&&Oe!==null?(Oe.childLanes=0,Oe.pendingProps=Ht):Oe=Fs(Ht,N,0,null),l=Ji(l,N,x,null),Oe.return=f,l.return=f,Oe.sibling=l,f.child=Oe,f.child.memoizedState=s(x),f.memoizedState=n,l):u(f,Ht));if(ge=l.memoizedState,ge!==null&&(Sn=ge.dehydrated,Sn!==null))return b(l,f,Ht,N,Sn,ge,x);if(Oe){Oe=N.fallback,Ht=f.mode,ge=l.child,Sn=ge.sibling;var Rn={mode:"hidden",children:N.children};return(Ht&1)===0&&f.child!==ge?(N=f.child,N.childLanes=0,N.pendingProps=Rn,f.deletions=null):(N=As(ge,Rn),N.subtreeFlags=ge.subtreeFlags&14680064),Sn!==null?Oe=As(Sn,Oe):(Oe=Ji(Oe,Ht,x,null),Oe.flags|=2),Oe.return=f,N.return=f,N.sibling=Oe,f.child=N,N=Oe,Oe=f.child,Ht=l.child.memoizedState,Ht=Ht===null?s(x):{baseLanes:Ht.baseLanes|x,cachePool:null,transitions:Ht.transitions},Oe.memoizedState=Ht,Oe.childLanes=l.childLanes&~x,f.memoizedState=n,N}return Oe=l.child,l=Oe.sibling,N=As(Oe,{mode:"visible",children:N.children}),(f.mode&1)===0&&(N.lanes=x),N.return=f,N.sibling=null,l!==null&&(x=f.deletions,x===null?(f.deletions=[l],f.flags|=16):x.push(l)),f.child=N,f.memoizedState=null,N}function u(l,f){return f=Fs({mode:"visible",children:f},l.mode,0,null),f.return=l,l.child=f}function m(l,f,x,N){return N!==null&&Ih(N),Af(f,l.child,null,x),l=u(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function b(l,f,x,N,ge,Oe,Ht){if(x)return f.flags&256?(f.flags&=-257,N=Ic(Error(L(422))),m(l,f,Ht,N)):f.memoizedState!==null?(f.child=l.child,f.flags|=128,null):(Oe=N.fallback,ge=f.mode,N=Fs({mode:"visible",children:N.children},ge,0,null),Oe=Ji(Oe,ge,Ht,null),Oe.flags|=2,N.return=f,Oe.return=f,N.sibling=Oe,f.child=N,(f.mode&1)!==0&&Af(f,l.child,null,Ht),f.child.memoizedState=s(Ht),f.memoizedState=n,Oe);if((f.mode&1)===0)return m(l,f,Ht,null);if(ge.data==="$!"){if(N=ge.nextSibling&&ge.nextSibling.dataset,N)var Sn=N.dgst;return N=Sn,Oe=Error(L(419)),N=Ic(Oe,N,void 0),m(l,f,Ht,N)}if(Sn=(Ht&l.childLanes)!==0,rl||Sn){if(N=Ds,N!==null){switch(Ht&-Ht){case 4:ge=2;break;case 16:ge=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ge=32;break;case 536870912:ge=268435456;break;default:ge=0}ge=(ge&(N.suspendedLanes|Ht))!==0?0:ge,ge!==0&&ge!==Oe.retryLane&&(Oe.retryLane=ge,Pl(l,ge),te(N,l,ge,-1))}return Zn(),N=Ic(Error(L(421))),m(l,f,Ht,N)}return ge.data==="$?"?(f.flags|=128,f.child=l.child,f=ls.bind(null,l),ge._reactRetry=f,null):(l=Oe.treeContext,Vl=Tc(ge.nextSibling),Tl=f,Ys=!0,zu=null,l!==null&&(tl[bu++]=rc,tl[bu++]=uo,tl[bu++]=rh,rc=l.id,uo=l.overflow,rh=f),f=u(f,N.children),f.flags|=4096,f)}function k(l,f,x){l.lanes|=f;var N=l.alternate;N!==null&&(N.lanes|=f),Wd(l.return,f,x)}function W(l,f,x,N,ge){var Oe=l.memoizedState;Oe===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:N,tail:x,tailMode:ge}:(Oe.isBackwards=f,Oe.rendering=null,Oe.renderingStartTime=0,Oe.last=N,Oe.tail=x,Oe.tailMode=ge)}function ve(l,f,x){var N=f.pendingProps,ge=N.revealOrder,Oe=N.tail;if(Mo(l,f,N.children,x),N=Or.current,(N&2)!==0)N=N&1|2,f.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&k(l,x,f);else if(l.tag===19)k(l,x,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}N&=1}if(ye(Or,N),(f.mode&1)===0)f.memoizedState=null;else switch(ge){case"forwards":for(x=f.child,ge=null;x!==null;)l=x.alternate,l!==null&&Yd(l)===null&&(ge=x),x=x.sibling;x=ge,x===null?(ge=f.child,f.child=null):(ge=x.sibling,x.sibling=null),W(f,!1,ge,x,Oe);break;case"backwards":for(x=null,ge=f.child,f.child=null;ge!==null;){if(l=ge.alternate,l!==null&&Yd(l)===null){f.child=ge;break}l=ge.sibling,ge.sibling=x,x=ge,ge=l}W(f,!0,x,null,Oe);break;case"together":W(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Ae(l,f){(f.mode&1)===0&&l!==null&&(l.alternate=null,f.alternate=null,f.flags|=2)}function rt(l,f,x){if(l!==null&&(f.dependencies=l.dependencies),i|=f.lanes,(x&f.childLanes)===0)return null;if(l!==null&&f.child!==l.child)throw Error(L(153));if(f.child!==null){for(l=f.child,x=As(l,l.pendingProps),f.child=x,x.return=f;l.sibling!==null;)l=l.sibling,x=x.sibling=As(l,l.pendingProps),x.return=f;x.sibling=null}return f.child}function re(l,f,x){switch(f.tag){case 3:y(f),kh();break;case 5:Ep(f);break;case 1:Al(f.type)&&Sf(f);break;case 4:Uu(f,f.stateNode.containerInfo);break;case 10:var N=f.type._context,ge=f.memoizedProps.value;ye(Bh,N._currentValue),N._currentValue=ge;break;case 13:if(N=f.memoizedState,N!==null)return N.dehydrated!==null?(ye(Or,Or.current&1),f.flags|=128,null):(x&f.child.childLanes)!==0?c(l,f,x):(ye(Or,Or.current&1),l=rt(l,f,x),l!==null?l.sibling:null);ye(Or,Or.current&1);break;case 19:if(N=(x&f.childLanes)!==0,(l.flags&128)!==0){if(N)return ve(l,f,x);f.flags|=128}if(ge=f.memoizedState,ge!==null&&(ge.rendering=null,ge.tail=null,ge.lastEffect=null),ye(Or,Or.current),N)break;return null;case 22:case 23:return f.lanes=0,Yh(l,f,x)}return rt(l,f,x)}var mt,nt,tn,Ie;mt=function(l,f){for(var x=f.child;x!==null;){if(x.tag===5||x.tag===6)l.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},nt=function(){},tn=function(l,f,x,N){var ge=l.memoizedProps;if(ge!==N){l=f.stateNode,jh(Fo.current);var Oe=null;switch(x){case"input":ge=C(l,ge),N=C(l,N),Oe=[];break;case"select":ge=Ue({},ge,{value:void 0}),N=Ue({},N,{value:void 0}),Oe=[];break;case"textarea":ge=ct(l,ge),N=ct(l,N),Oe=[];break;default:typeof ge.onClick!="function"&&typeof N.onClick=="function"&&(l.onclick=Jc)}Jn(x,N);var Ht;x=null;for(dr in ge)if(!N.hasOwnProperty(dr)&&ge.hasOwnProperty(dr)&&ge[dr]!=null)if(dr==="style"){var Sn=ge[dr];for(Ht in Sn)Sn.hasOwnProperty(Ht)&&(x||(x={}),x[Ht]="")}else dr!=="dangerouslySetInnerHTML"&&dr!=="children"&&dr!=="suppressContentEditableWarning"&&dr!=="suppressHydrationWarning"&&dr!=="autoFocus"&&(Te.hasOwnProperty(dr)?Oe||(Oe=[]):(Oe=Oe||[]).push(dr,null));for(dr in N){var Rn=N[dr];if(Sn=ge!=null?ge[dr]:void 0,N.hasOwnProperty(dr)&&Rn!==Sn&&(Rn!=null||Sn!=null))if(dr==="style")if(Sn){for(Ht in Sn)!Sn.hasOwnProperty(Ht)||Rn&&Rn.hasOwnProperty(Ht)||(x||(x={}),x[Ht]="");for(Ht in Rn)Rn.hasOwnProperty(Ht)&&Sn[Ht]!==Rn[Ht]&&(x||(x={}),x[Ht]=Rn[Ht])}else x||(Oe||(Oe=[]),Oe.push(dr,x)),x=Rn;else dr==="dangerouslySetInnerHTML"?(Rn=Rn?Rn.__html:void 0,Sn=Sn?Sn.__html:void 0,Rn!=null&&Sn!==Rn&&(Oe=Oe||[]).push(dr,Rn)):dr==="children"?typeof Rn!="string"&&typeof Rn!="number"||(Oe=Oe||[]).push(dr,""+Rn):dr!=="suppressContentEditableWarning"&&dr!=="suppressHydrationWarning"&&(Te.hasOwnProperty(dr)?(Rn!=null&&dr==="onScroll"&&va("scroll",l),Oe||Sn===Rn||(Oe=[])):(Oe=Oe||[]).push(dr,Rn))}x&&(Oe=Oe||[]).push("style",x);var dr=Oe;(f.updateQueue=dr)&&(f.flags|=4)}},Ie=function(l,f,x,N){x!==N&&(f.flags|=4)};function Kt(l,f){if(!Ys)switch(l.tailMode){case"hidden":f=l.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?l.tail=null:x.sibling=null;break;case"collapsed":x=l.tail;for(var N=null;x!==null;)x.alternate!==null&&(N=x),x=x.sibling;N===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:N.sibling=null}}function At(l){var f=l.alternate!==null&&l.alternate.child===l.child,x=0,N=0;if(f)for(var ge=l.child;ge!==null;)x|=ge.lanes|ge.childLanes,N|=ge.subtreeFlags&14680064,N|=ge.flags&14680064,ge.return=l,ge=ge.sibling;else for(ge=l.child;ge!==null;)x|=ge.lanes|ge.childLanes,N|=ge.subtreeFlags,N|=ge.flags,ge.return=l,ge=ge.sibling;return l.subtreeFlags|=N,l.childLanes=x,f}function an(l,f,x){var N=f.pendingProps;switch(Vd(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(f),null;case 1:return Al(f.type)&&Oh(),At(f),null;case 3:return N=f.stateNode,ju(),Ea(Bs),Ea(wa),Tf(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(l===null||l.child===null)&&(Hl(f)?f.flags|=4:l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,zu!==null&&($e(zu),zu=null))),nt(l,f),At(f),null;case 5:Vu(f);var ge=jh(od.current);if(x=f.type,l!==null&&f.stateNode!=null)tn(l,f,x,N,ge),l.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!N){if(f.stateNode===null)throw Error(L(166));return At(f),null}if(l=jh(Fo.current),Hl(f)){N=f.stateNode,x=f.type;var Oe=f.memoizedProps;switch(N[jl]=f,N[Ho]=Oe,l=(f.mode&1)!==0,x){case"dialog":va("cancel",N),va("close",N);break;case"iframe":case"object":case"embed":va("load",N);break;case"video":case"audio":for(ge=0;ge<Ah.length;ge++)va(Ah[ge],N);break;case"source":va("error",N);break;case"img":case"image":case"link":va("error",N),va("load",N);break;case"details":va("toggle",N);break;case"input":U(N,Oe),va("invalid",N);break;case"select":N._wrapperState={wasMultiple:!!Oe.multiple},va("invalid",N);break;case"textarea":_t(N,Oe),va("invalid",N)}Jn(x,Oe),ge=null;for(var Ht in Oe)if(Oe.hasOwnProperty(Ht)){var Sn=Oe[Ht];Ht==="children"?typeof Sn=="string"?N.textContent!==Sn&&(Oe.suppressHydrationWarning!==!0&&yu(N.textContent,Sn,l),ge=["children",Sn]):typeof Sn=="number"&&N.textContent!==""+Sn&&(Oe.suppressHydrationWarning!==!0&&yu(N.textContent,Sn,l),ge=["children",""+Sn]):Te.hasOwnProperty(Ht)&&Sn!=null&&Ht==="onScroll"&&va("scroll",N)}switch(x){case"input":Rt(N),de(N,Oe,!0);break;case"textarea":Rt(N),ht(N);break;case"select":case"option":break;default:typeof Oe.onClick=="function"&&(N.onclick=Jc)}N=ge,f.updateQueue=N,N!==null&&(f.flags|=4)}else{Ht=ge.nodeType===9?ge:ge.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Pt(x)),l==="http://www.w3.org/1999/xhtml"?x==="script"?(l=Ht.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof N.is=="string"?l=Ht.createElement(x,{is:N.is}):(l=Ht.createElement(x),x==="select"&&(Ht=l,N.multiple?Ht.multiple=!0:N.size&&(Ht.size=N.size))):l=Ht.createElementNS(l,x),l[jl]=f,l[Ho]=N,mt(l,f,!1,!1),f.stateNode=l;e:{switch(Ht=$n(x,N),x){case"dialog":va("cancel",l),va("close",l),ge=N;break;case"iframe":case"object":case"embed":va("load",l),ge=N;break;case"video":case"audio":for(ge=0;ge<Ah.length;ge++)va(Ah[ge],l);ge=N;break;case"source":va("error",l),ge=N;break;case"img":case"image":case"link":va("error",l),va("load",l),ge=N;break;case"details":va("toggle",l),ge=N;break;case"input":U(l,N),ge=C(l,N),va("invalid",l);break;case"option":ge=N;break;case"select":l._wrapperState={wasMultiple:!!N.multiple},ge=Ue({},N,{value:void 0}),va("invalid",l);break;case"textarea":_t(l,N),ge=ct(l,N),va("invalid",l);break;default:ge=N}Jn(x,ge),Sn=ge;for(Oe in Sn)if(Sn.hasOwnProperty(Oe)){var Rn=Sn[Oe];Oe==="style"?or(l,Rn):Oe==="dangerouslySetInnerHTML"?(Rn=Rn?Rn.__html:void 0,Rn!=null&&en(l,Rn)):Oe==="children"?typeof Rn=="string"?(x!=="textarea"||Rn!=="")&&bt(l,Rn):typeof Rn=="number"&&bt(l,""+Rn):Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&Oe!=="autoFocus"&&(Te.hasOwnProperty(Oe)?Rn!=null&&Oe==="onScroll"&&va("scroll",l):Rn!=null&&De(l,Oe,Rn,Ht))}switch(x){case"input":Rt(l),de(l,N,!1);break;case"textarea":Rt(l),ht(l);break;case"option":N.value!=null&&l.setAttribute("value",""+zt(N.value));break;case"select":l.multiple=!!N.multiple,Oe=N.value,Oe!=null?Ke(l,!!N.multiple,Oe,!1):N.defaultValue!=null&&Ke(l,!!N.multiple,N.defaultValue,!0);break;default:typeof ge.onClick=="function"&&(l.onclick=Jc)}switch(x){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}}N&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return At(f),null;case 6:if(l&&f.stateNode!=null)Ie(l,f,l.memoizedProps,N);else{if(typeof N!="string"&&f.stateNode===null)throw Error(L(166));if(x=jh(od.current),jh(Fo.current),Hl(f)){if(N=f.stateNode,x=f.memoizedProps,N[jl]=f,(Oe=N.nodeValue!==x)&&(l=Tl,l!==null))switch(l.tag){case 3:yu(N.nodeValue,x,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&yu(N.nodeValue,x,(l.mode&1)!==0)}Oe&&(f.flags|=4)}else N=(x.nodeType===9?x:x.ownerDocument).createTextNode(N),N[jl]=f,f.stateNode=N}return At(f),null;case 13:if(Ea(Or),N=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Ys&&Vl!==null&&(f.mode&1)!==0&&(f.flags&128)===0)Su(),kh(),f.flags|=98560,Oe=!1;else if(Oe=Hl(f),N!==null&&N.dehydrated!==null){if(l===null){if(!Oe)throw Error(L(318));if(Oe=f.memoizedState,Oe=Oe!==null?Oe.dehydrated:null,!Oe)throw Error(L(317));Oe[jl]=f}else kh(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;At(f),Oe=!1}else zu!==null&&($e(zu),zu=null),Oe=!0;if(!Oe)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=x,f):(N=N!==null,N!==(l!==null&&l.memoizedState!==null)&&N&&(f.child.flags|=8192,(f.mode&1)!==0&&(l===null||(Or.current&1)!==0?ar===0&&(ar=3):Zn())),f.updateQueue!==null&&(f.flags|=4),At(f),null);case 4:return ju(),nt(l,f),l===null&&Eh(f.stateNode.containerInfo),At(f),null;case 10:return Zo(f.type._context),At(f),null;case 17:return Al(f.type)&&Oh(),At(f),null;case 19:if(Ea(Or),Oe=f.memoizedState,Oe===null)return At(f),null;if(N=(f.flags&128)!==0,Ht=Oe.rendering,Ht===null)if(N)Kt(Oe,!1);else{if(ar!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(Ht=Yd(l),Ht!==null){for(f.flags|=128,Kt(Oe,!1),N=Ht.updateQueue,N!==null&&(f.updateQueue=N,f.flags|=4),f.subtreeFlags=0,N=x,x=f.child;x!==null;)Oe=x,l=N,Oe.flags&=14680066,Ht=Oe.alternate,Ht===null?(Oe.childLanes=0,Oe.lanes=l,Oe.child=null,Oe.subtreeFlags=0,Oe.memoizedProps=null,Oe.memoizedState=null,Oe.updateQueue=null,Oe.dependencies=null,Oe.stateNode=null):(Oe.childLanes=Ht.childLanes,Oe.lanes=Ht.lanes,Oe.child=Ht.child,Oe.subtreeFlags=0,Oe.deletions=null,Oe.memoizedProps=Ht.memoizedProps,Oe.memoizedState=Ht.memoizedState,Oe.updateQueue=Ht.updateQueue,Oe.type=Ht.type,l=Ht.dependencies,Oe.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),x=x.sibling;return ye(Or,Or.current&1|2),f.child}l=l.sibling}Oe.tail!==null&&ca()>A&&(f.flags|=128,N=!0,Kt(Oe,!1),f.lanes=4194304)}else{if(!N)if(l=Yd(Ht),l!==null){if(f.flags|=128,N=!0,x=l.updateQueue,x!==null&&(f.updateQueue=x,f.flags|=4),Kt(Oe,!0),Oe.tail===null&&Oe.tailMode==="hidden"&&!Ht.alternate&&!Ys)return At(f),null}else 2*ca()-Oe.renderingStartTime>A&&x!==1073741824&&(f.flags|=128,N=!0,Kt(Oe,!1),f.lanes=4194304);Oe.isBackwards?(Ht.sibling=f.child,f.child=Ht):(x=Oe.last,x!==null?x.sibling=Ht:f.child=Ht,Oe.last=Ht)}return Oe.tail!==null?(f=Oe.tail,Oe.rendering=f,Oe.tail=f.sibling,Oe.renderingStartTime=ca(),f.sibling=null,x=Or.current,ye(Or,N?x&1|2:x&1),f):(At(f),null);case 22:case 23:return Yt(),N=f.memoizedState!==null,l!==null&&l.memoizedState!==null!==N&&(f.flags|=8192),N&&(f.mode&1)!==0?(ui&1073741824)!==0&&(At(f),f.subtreeFlags&6&&(f.flags|=8192)):At(f),null;case 24:return null;case 25:return null}throw Error(L(156,f.tag))}function Cn(l,f){switch(Vd(f),f.tag){case 1:return Al(f.type)&&Oh(),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return ju(),Ea(Bs),Ea(wa),Tf(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 5:return Vu(f),null;case 13:if(Ea(Or),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(L(340));kh()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return Ea(Or),null;case 4:return ju(),null;case 10:return Zo(f.type._context),null;case 22:case 23:return Yt(),null;case 24:return null;default:return null}}var He=!1,_e=!1,Sr=typeof WeakSet=="function"?WeakSet:Set,On=null;function Kr(l,f){var x=l.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(N){Ir(l,f,N)}else x.current=null}function Mi(l,f,x){try{x()}catch(N){Ir(l,f,N)}}var ei=!1;function oi(l,f){if(Sp=Bu,l=_f(),Nd(l)){if("selectionStart"in l)var x={start:l.selectionStart,end:l.selectionEnd};else e:{x=(x=l.ownerDocument)&&x.defaultView||window;var N=x.getSelection&&x.getSelection();if(N&&N.rangeCount!==0){x=N.anchorNode;var ge=N.anchorOffset,Oe=N.focusNode;N=N.focusOffset;try{x.nodeType,Oe.nodeType}catch{x=null;break e}var Ht=0,Sn=-1,Rn=-1,dr=0,Dr=0,Pr=l,Ur=null;t:for(;;){for(var pi;Pr!==x||ge!==0&&Pr.nodeType!==3||(Sn=Ht+ge),Pr!==Oe||N!==0&&Pr.nodeType!==3||(Rn=Ht+N),Pr.nodeType===3&&(Ht+=Pr.nodeValue.length),(pi=Pr.firstChild)!==null;)Ur=Pr,Pr=pi;for(;;){if(Pr===l)break t;if(Ur===x&&++dr===ge&&(Sn=Ht),Ur===Oe&&++Dr===N&&(Rn=Ht),(pi=Pr.nextSibling)!==null)break;Pr=Ur,Ur=Pr.parentNode}Pr=pi}x=Sn===-1||Rn===-1?null:{start:Sn,end:Rn}}else x=null}x=x||{start:0,end:0}}else x=null;for(Th={focusedElem:l,selectionRange:x},Bu=!1,On=f;On!==null;)if(f=On,l=f.child,(f.subtreeFlags&1028)!==0&&l!==null)l.return=f,On=l;else for(;On!==null;){f=On;try{var mi=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(mi!==null){var gi=mi.memoizedProps,xa=mi.memoizedState,Xn=f.stateNode,Un=Xn.getSnapshotBeforeUpdate(f.elementType===f.type?gi:kl(f.type,gi),xa);Xn.__reactInternalSnapshotBeforeUpdate=Un}break;case 3:var rr=f.stateNode.containerInfo;rr.nodeType===1?rr.textContent="":rr.nodeType===9&&rr.documentElement&&rr.removeChild(rr.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(Nr){Ir(f,f.return,Nr)}if(l=f.sibling,l!==null){l.return=f.return,On=l;break}On=f.return}return mi=ei,ei=!1,mi}function xr(l,f,x){var N=f.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var ge=N=N.next;do{if((ge.tag&l)===l){var Oe=ge.destroy;ge.destroy=void 0,Oe!==void 0&&Mi(f,x,Oe)}ge=ge.next}while(ge!==N)}}function Ts(l,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&l)===l){var N=x.create;x.destroy=N()}x=x.next}while(x!==f)}}function Fn(l){var f=l.ref;if(f!==null){var x=l.stateNode;switch(l.tag){case 5:l=x;break;default:l=x}typeof f=="function"?f(l):f.current=l}}function si(l){var f=l.alternate;f!==null&&(l.alternate=null,si(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&(delete f[jl],delete f[Ho],delete f[Go],delete f[eh],delete f[Fu])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Pi(l){return l.tag===5||l.tag===3||l.tag===4}function ai(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Pi(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function hs(l,f,x){var N=l.tag;if(N===5||N===6)l=l.stateNode,f?x.nodeType===8?x.parentNode.insertBefore(l,f):x.insertBefore(l,f):(x.nodeType===8?(f=x.parentNode,f.insertBefore(l,x)):(f=x,f.appendChild(l)),x=x._reactRootContainer,x!=null||f.onclick!==null||(f.onclick=Jc));else if(N!==4&&(l=l.child,l!==null))for(hs(l,f,x),l=l.sibling;l!==null;)hs(l,f,x),l=l.sibling}function fa(l,f,x){var N=l.tag;if(N===5||N===6)l=l.stateNode,f?x.insertBefore(l,f):x.appendChild(l);else if(N!==4&&(l=l.child,l!==null))for(fa(l,f,x),l=l.sibling;l!==null;)fa(l,f,x),l=l.sibling}var Hs=null,Ns=!1;function da(l,f,x){for(x=x.child;x!==null;)Zi(l,f,x),x=x.sibling}function Zi(l,f,x){if(Ja&&typeof Ja.onCommitFiberUnmount=="function")try{Ja.onCommitFiberUnmount(wi,x)}catch{}switch(x.tag){case 5:_e||Kr(x,f);case 6:var N=Hs,ge=Ns;Hs=null,da(l,f,x),Hs=N,Ns=ge,Hs!==null&&(Ns?(l=Hs,x=x.stateNode,l.nodeType===8?l.parentNode.removeChild(x):l.removeChild(x)):Hs.removeChild(x.stateNode));break;case 18:Hs!==null&&(Ns?(l=Hs,x=x.stateNode,l.nodeType===8?bf(l.parentNode,x):l.nodeType===1&&bf(l,x),Ar(l)):bf(Hs,x.stateNode));break;case 4:N=Hs,ge=Ns,Hs=x.stateNode.containerInfo,Ns=!0,da(l,f,x),Hs=N,Ns=ge;break;case 0:case 11:case 14:case 15:if(!_e&&(N=x.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){ge=N=N.next;do{var Oe=ge,Ht=Oe.destroy;Oe=Oe.tag,Ht!==void 0&&((Oe&2)!==0||(Oe&4)!==0)&&Mi(x,f,Ht),ge=ge.next}while(ge!==N)}da(l,f,x);break;case 1:if(!_e&&(Kr(x,f),N=x.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=x.memoizedProps,N.state=x.memoizedState,N.componentWillUnmount()}catch(Sn){Ir(x,f,Sn)}da(l,f,x);break;case 21:da(l,f,x);break;case 22:x.mode&1?(_e=(N=_e)||x.memoizedState!==null,da(l,f,x),_e=N):da(l,f,x);break;default:da(l,f,x)}}function fo(l){var f=l.updateQueue;if(f!==null){l.updateQueue=null;var x=l.stateNode;x===null&&(x=l.stateNode=new Sr),f.forEach(function(N){var ge=Vr.bind(null,l,N);x.has(N)||(x.add(N),N.then(ge,ge))})}}function io(l,f){var x=f.deletions;if(x!==null)for(var N=0;N<x.length;N++){var ge=x[N];try{var Oe=l,Ht=f,Sn=Ht;e:for(;Sn!==null;){switch(Sn.tag){case 5:Hs=Sn.stateNode,Ns=!1;break e;case 3:Hs=Sn.stateNode.containerInfo,Ns=!0;break e;case 4:Hs=Sn.stateNode.containerInfo,Ns=!0;break e}Sn=Sn.return}if(Hs===null)throw Error(L(160));Zi(Oe,Ht,ge),Hs=null,Ns=!1;var Rn=ge.alternate;Rn!==null&&(Rn.return=null),ge.return=null}catch(dr){Ir(ge,f,dr)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)qo(f,l),f=f.sibling}function qo(l,f){var x=l.alternate,N=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(io(f,l),Ti(l),N&4){try{xr(3,l,l.return),Ts(3,l)}catch(gi){Ir(l,l.return,gi)}try{xr(5,l,l.return)}catch(gi){Ir(l,l.return,gi)}}break;case 1:io(f,l),Ti(l),N&512&&x!==null&&Kr(x,x.return);break;case 5:if(io(f,l),Ti(l),N&512&&x!==null&&Kr(x,x.return),l.flags&32){var ge=l.stateNode;try{bt(ge,"")}catch(gi){Ir(l,l.return,gi)}}if(N&4&&(ge=l.stateNode,ge!=null)){var Oe=l.memoizedProps,Ht=x!==null?x.memoizedProps:Oe,Sn=l.type,Rn=l.updateQueue;if(l.updateQueue=null,Rn!==null)try{Sn==="input"&&Oe.type==="radio"&&Oe.name!=null&&Q(ge,Oe),$n(Sn,Ht);var dr=$n(Sn,Oe);for(Ht=0;Ht<Rn.length;Ht+=2){var Dr=Rn[Ht],Pr=Rn[Ht+1];Dr==="style"?or(ge,Pr):Dr==="dangerouslySetInnerHTML"?en(ge,Pr):Dr==="children"?bt(ge,Pr):De(ge,Dr,Pr,dr)}switch(Sn){case"input":fe(ge,Oe);break;case"textarea":qe(ge,Oe);break;case"select":var Ur=ge._wrapperState.wasMultiple;ge._wrapperState.wasMultiple=!!Oe.multiple;var pi=Oe.value;pi!=null?Ke(ge,!!Oe.multiple,pi,!1):Ur!==!!Oe.multiple&&(Oe.defaultValue!=null?Ke(ge,!!Oe.multiple,Oe.defaultValue,!0):Ke(ge,!!Oe.multiple,Oe.multiple?[]:"",!1))}ge[Ho]=Oe}catch(gi){Ir(l,l.return,gi)}}break;case 6:if(io(f,l),Ti(l),N&4){if(l.stateNode===null)throw Error(L(162));ge=l.stateNode,Oe=l.memoizedProps;try{ge.nodeValue=Oe}catch(gi){Ir(l,l.return,gi)}}break;case 3:if(io(f,l),Ti(l),N&4&&x!==null&&x.memoizedState.isDehydrated)try{Ar(f.containerInfo)}catch(gi){Ir(l,l.return,gi)}break;case 4:io(f,l),Ti(l);break;case 13:io(f,l),Ti(l),ge=l.child,ge.flags&8192&&(Oe=ge.memoizedState!==null,ge.stateNode.isHidden=Oe,!Oe||ge.alternate!==null&&ge.alternate.memoizedState!==null||(D=ca())),N&4&&fo(l);break;case 22:if(Dr=x!==null&&x.memoizedState!==null,l.mode&1?(_e=(dr=_e)||Dr,io(f,l),_e=dr):io(f,l),Ti(l),N&8192){if(dr=l.memoizedState!==null,(l.stateNode.isHidden=dr)&&!Dr&&(l.mode&1)!==0)for(On=l,Dr=l.child;Dr!==null;){for(Pr=On=Dr;On!==null;){switch(Ur=On,pi=Ur.child,Ur.tag){case 0:case 11:case 14:case 15:xr(4,Ur,Ur.return);break;case 1:Kr(Ur,Ur.return);var mi=Ur.stateNode;if(typeof mi.componentWillUnmount=="function"){N=Ur,x=Ur.return;try{f=N,mi.props=f.memoizedProps,mi.state=f.memoizedState,mi.componentWillUnmount()}catch(gi){Ir(N,x,gi)}}break;case 5:Kr(Ur,Ur.return);break;case 22:if(Ur.memoizedState!==null){xo(Pr);continue}}pi!==null?(pi.return=Ur,On=pi):xo(Pr)}Dr=Dr.sibling}e:for(Dr=null,Pr=l;;){if(Pr.tag===5){if(Dr===null){Dr=Pr;try{ge=Pr.stateNode,dr?(Oe=ge.style,typeof Oe.setProperty=="function"?Oe.setProperty("display","none","important"):Oe.display="none"):(Sn=Pr.stateNode,Rn=Pr.memoizedProps.style,Ht=Rn!=null&&Rn.hasOwnProperty("display")?Rn.display:null,Sn.style.display=Yn("display",Ht))}catch(gi){Ir(l,l.return,gi)}}}else if(Pr.tag===6){if(Dr===null)try{Pr.stateNode.nodeValue=dr?"":Pr.memoizedProps}catch(gi){Ir(l,l.return,gi)}}else if((Pr.tag!==22&&Pr.tag!==23||Pr.memoizedState===null||Pr===l)&&Pr.child!==null){Pr.child.return=Pr,Pr=Pr.child;continue}if(Pr===l)break e;for(;Pr.sibling===null;){if(Pr.return===null||Pr.return===l)break e;Dr===Pr&&(Dr=null),Pr=Pr.return}Dr===Pr&&(Dr=null),Pr.sibling.return=Pr.return,Pr=Pr.sibling}}break;case 19:io(f,l),Ti(l),N&4&&fo(l);break;case 21:break;default:io(f,l),Ti(l)}}function Ti(l){var f=l.flags;if(f&2){try{e:{for(var x=l.return;x!==null;){if(Pi(x)){var N=x;break e}x=x.return}throw Error(L(160))}switch(N.tag){case 5:var ge=N.stateNode;N.flags&32&&(bt(ge,""),N.flags&=-33);var Oe=ai(l);fa(l,Oe,ge);break;case 3:case 4:var Ht=N.stateNode.containerInfo,Sn=ai(l);hs(l,Sn,Ht);break;default:throw Error(L(161))}}catch(Rn){Ir(l,l.return,Rn)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function Fi(l,f,x){On=l,zi(l)}function zi(l,f,x){for(var N=(l.mode&1)!==0;On!==null;){var ge=On,Oe=ge.child;if(ge.tag===22&&N){var Ht=ge.memoizedState!==null||He;if(!Ht){var Sn=ge.alternate,Rn=Sn!==null&&Sn.memoizedState!==null||_e;Sn=He;var dr=_e;if(He=Ht,(_e=Rn)&&!dr)for(On=ge;On!==null;)Ht=On,Rn=Ht.child,Ht.tag===22&&Ht.memoizedState!==null?Fa(ge):Rn!==null?(Rn.return=Ht,On=Rn):Fa(ge);for(;Oe!==null;)On=Oe,zi(Oe),Oe=Oe.sibling;On=ge,He=Sn,_e=dr}wo(l)}else(ge.subtreeFlags&8772)!==0&&Oe!==null?(Oe.return=ge,On=Oe):wo(l)}}function wo(l){for(;On!==null;){var f=On;if((f.flags&8772)!==0){var x=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:_e||Ts(5,f);break;case 1:var N=f.stateNode;if(f.flags&4&&!_e)if(x===null)N.componentDidMount();else{var ge=f.elementType===f.type?x.memoizedProps:kl(f.type,x.memoizedProps);N.componentDidUpdate(ge,x.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var Oe=f.updateQueue;Oe!==null&&Fh(f,Oe,N);break;case 3:var Ht=f.updateQueue;if(Ht!==null){if(x=null,f.child!==null)switch(f.child.tag){case 5:x=f.child.stateNode;break;case 1:x=f.child.stateNode}Fh(f,Ht,x)}break;case 5:var Sn=f.stateNode;if(x===null&&f.flags&4){x=Sn;var Rn=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":Rn.autoFocus&&x.focus();break;case"img":Rn.src&&(x.src=Rn.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var dr=f.alternate;if(dr!==null){var Dr=dr.memoizedState;if(Dr!==null){var Pr=Dr.dehydrated;Pr!==null&&Ar(Pr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}_e||f.flags&512&&Fn(f)}catch(Ur){Ir(f,f.return,Ur)}}if(f===l){On=null;break}if(x=f.sibling,x!==null){x.return=f.return,On=x;break}On=f.return}}function xo(l){for(;On!==null;){var f=On;if(f===l){On=null;break}var x=f.sibling;if(x!==null){x.return=f.return,On=x;break}On=f.return}}function Fa(l){for(;On!==null;){var f=On;try{switch(f.tag){case 0:case 11:case 15:var x=f.return;try{Ts(4,f)}catch(Rn){Ir(f,x,Rn)}break;case 1:var N=f.stateNode;if(typeof N.componentDidMount=="function"){var ge=f.return;try{N.componentDidMount()}catch(Rn){Ir(f,ge,Rn)}}var Oe=f.return;try{Fn(f)}catch(Rn){Ir(f,Oe,Rn)}break;case 5:var Ht=f.return;try{Fn(f)}catch(Rn){Ir(f,Ht,Rn)}}}catch(Rn){Ir(f,f.return,Rn)}if(f===l){On=null;break}var Sn=f.sibling;if(Sn!==null){Sn.return=f.return,On=Sn;break}On=f.return}}var Uo=Math.ceil,so=Pe.ReactCurrentDispatcher,pa=Pe.ReactCurrentOwner,ea=Pe.ReactCurrentBatchConfig,fs=0,Ds=null,di=null,Ai=0,ui=0,bo=pl(0),ar=0,t=null,i=0,o=0,h=0,d=null,v=null,D=0,A=1/0,T=null,P=!1,F=null,V=null,z=!1,R=null,J=0,Y=0,ie=null,j=-1,X=0;function I(){return(fs&6)!==0?ca():j!==-1?j:j=ca()}function G(l){return(l.mode&1)===0?1:(fs&2)!==0&&Ai!==0?Ai&-Ai:fg.transition!==null?(X===0&&(X=Wc()),X):(l=Vs,l!==0||(l=window.event,l=l===void 0?16:rg(l.type)),l)}function te(l,f,x,N){if(50<Y)throw Y=0,ie=null,Error(L(185));Iu(l,x,N),((fs&2)===0||l!==Ds)&&(l===Ds&&((fs&2)===0&&(o|=x),ar===4&&ft(l,Ai)),pe(l,N),x===1&&fs===0&&(f.mode&1)===0&&(A=ca()+500,Ud&&nh()))}function pe(l,f){var x=l.callbackNode;Vo(l,f);var N=yh(l,l===Ds?Ai:0);if(N===0)x!==null&&Ou(x),l.callbackNode=null,l.callbackPriority=0;else if(f=N&-N,l.callbackPriority!==f){if(x!=null&&Ou(x),f===1)l.tag===0?Ap(Ze.bind(null,l)):hg(Ze.bind(null,l)),ug(function(){(fs&6)===0&&nh()}),x=null;else{switch(Lu(N)){case 1:x=Jl;break;case 4:x=qu;break;case 16:x=Xu;break;case 536870912:x=Sl;break;default:x=Xu}x=Qi(x,oe.bind(null,l))}l.callbackPriority=f,l.callbackNode=x}}function oe(l,f){if(j=-1,X=0,(fs&6)!==0)throw Error(L(327));var x=l.callbackNode;if(Rr()&&l.callbackNode!==x)return null;var N=yh(l,l===Ds?Ai:0);if(N===0)return null;if((N&30)!==0||(N&l.expiredLanes)!==0||f)f=Kn(l,N);else{f=N;var ge=fs;fs|=2;var Oe=In();(Ds!==l||Ai!==f)&&(T=null,A=ca()+500,qt(l,f));do try{yn();break}catch(Sn){ln(l,Sn)}while(!0);sd(),so.current=Oe,fs=ge,di!==null?f=0:(Ds=null,Ai=0,f=ar)}if(f!==0){if(f===2&&(ge=af(l),ge!==0&&(N=ge,f=Ee(l,ge))),f===1)throw x=t,qt(l,0),ft(l,N),pe(l,ca()),x;if(f===6)ft(l,N);else{if(ge=l.current.alternate,(N&30)===0&&!Xe(ge)&&(f=Kn(l,N),f===2&&(Oe=af(l),Oe!==0&&(N=Oe,f=Ee(l,Oe))),f===1))throw x=t,qt(l,0),ft(l,N),pe(l,ca()),x;switch(l.finishedWork=ge,l.finishedLanes=N,f){case 0:case 1:throw Error(L(345));case 2:cr(l,v,T);break;case 3:if(ft(l,N),(N&130023424)===N&&(f=D+500-ca(),10<f)){if(yh(l,0)!==0)break;if(ge=l.suspendedLanes,(ge&N)!==N){I(),l.pingedLanes|=l.suspendedLanes&ge;break}l.timeoutHandle=ya(cr.bind(null,l,v,T),f);break}cr(l,v,T);break;case 4:if(ft(l,N),(N&4194240)===N)break;for(f=l.eventTimes,ge=-1;0<N;){var Ht=31-lo(N);Oe=1<<Ht,Ht=f[Ht],Ht>ge&&(ge=Ht),N&=~Oe}if(N=ge,N=ca()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*Uo(N/1960))-N,10<N){l.timeoutHandle=ya(cr.bind(null,l,v,T),N);break}cr(l,v,T);break;case 5:cr(l,v,T);break;default:throw Error(L(329))}}}return pe(l,ca()),l.callbackNode===x?oe.bind(null,l):null}function Ee(l,f){var x=d;return l.current.memoizedState.isDehydrated&&(qt(l,f).flags|=256),l=Kn(l,f),l!==2&&(f=v,v=x,f!==null&&$e(f)),l}function $e(l){v===null?v=l:v.push.apply(v,l)}function Xe(l){for(var f=l;;){if(f.flags&16384){var x=f.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var N=0;N<x.length;N++){var ge=x[N],Oe=ge.getSnapshot;ge=ge.value;try{if(!sa(Oe(),ge))return!1}catch{return!1}}}if(x=f.child,f.subtreeFlags&16384&&x!==null)x.return=f,f=x;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function ft(l,f){for(f&=~h,f&=~o,l.suspendedLanes|=f,l.pingedLanes&=~f,l=l.expirationTimes;0<f;){var x=31-lo(f),N=1<<x;l[x]=-1,f&=~N}}function Ze(l){if((fs&6)!==0)throw Error(L(327));Rr();var f=yh(l,0);if((f&1)===0)return pe(l,ca()),null;var x=Kn(l,f);if(l.tag!==0&&x===2){var N=af(l);N!==0&&(f=N,x=Ee(l,N))}if(x===1)throw x=t,qt(l,0),ft(l,f),pe(l,ca()),x;if(x===6)throw Error(L(345));return l.finishedWork=l.current.alternate,l.finishedLanes=f,cr(l,v,T),pe(l,ca()),null}function yt(l,f){var x=fs;fs|=1;try{return l(f)}finally{fs=x,fs===0&&(A=ca()+500,Ud&&nh())}}function Et(l){R!==null&&R.tag===0&&(fs&6)===0&&Rr();var f=fs;fs|=1;var x=ea.transition,N=Vs;try{if(ea.transition=null,Vs=1,l)return l()}finally{Vs=N,ea.transition=x,fs=f,(fs&6)===0&&nh()}}function Yt(){ui=bo.current,Ea(bo)}function qt(l,f){l.finishedWork=null,l.finishedLanes=0;var x=l.timeoutHandle;if(x!==-1&&(l.timeoutHandle=-1,ks(x)),di!==null)for(x=di.return;x!==null;){var N=x;switch(Vd(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&Oh();break;case 3:ju(),Ea(Bs),Ea(wa),Tf();break;case 5:Vu(N);break;case 4:ju();break;case 13:Ea(Or);break;case 19:Ea(Or);break;case 10:Zo(N.type._context);break;case 22:case 23:Yt()}x=x.return}if(Ds=l,di=l=As(l.current,null),Ai=ui=f,ar=0,t=null,h=o=i=0,v=d=null,Cu!==null){for(f=0;f<Cu.length;f++)if(x=Cu[f],N=x.interleaved,N!==null){x.interleaved=null;var ge=N.next,Oe=x.pending;if(Oe!==null){var Ht=Oe.next;Oe.next=ge,N.next=Ht}x.pending=N}Cu=null}return l}function ln(l,f){do{var x=di;try{if(sd(),ih.current=pd,lu){for(var N=Ta.memoizedState;N!==null;){var ge=N.queue;ge!==null&&(ge.pending=null),N=N.next}lu=!1}if(sc=0,ha=aa=Ta=null,$o=!1,Au=0,pa.current=null,x===null||x.return===null){ar=1,t=f,di=null;break}e:{var Oe=l,Ht=x.return,Sn=x,Rn=f;if(f=Ai,Sn.flags|=32768,Rn!==null&&typeof Rn=="object"&&typeof Rn.then=="function"){var dr=Rn,Dr=Sn,Pr=Dr.tag;if((Dr.mode&1)===0&&(Pr===0||Pr===11||Pr===15)){var Ur=Dr.alternate;Ur?(Dr.updateQueue=Ur.updateQueue,Dr.memoizedState=Ur.memoizedState,Dr.lanes=Ur.lanes):(Dr.updateQueue=null,Dr.memoizedState=null)}var pi=Gl(Ht);if(pi!==null){pi.flags&=-257,oc(pi,Ht,Sn,Oe,f),pi.mode&1&&Jd(Oe,dr,f),f=pi,Rn=dr;var mi=f.updateQueue;if(mi===null){var gi=new Set;gi.add(Rn),f.updateQueue=gi}else mi.add(Rn);break e}else{if((f&1)===0){Jd(Oe,dr,f),Zn();break e}Rn=Error(L(426))}}else if(Ys&&Sn.mode&1){var xa=Gl(Ht);if(xa!==null){(xa.flags&65536)===0&&(xa.flags|=256),oc(xa,Ht,Sn,Oe,f),Ih(If(Rn,Sn));break e}}Oe=Rn=If(Rn,Sn),ar!==4&&(ar=2),d===null?d=[Oe]:d.push(Oe),Oe=Ht;do{switch(Oe.tag){case 3:Oe.flags|=65536,f&=-f,Oe.lanes|=f;var Xn=Qd(Oe,Rn,f);dg(Oe,Xn);break e;case 1:Sn=Rn;var Un=Oe.type,rr=Oe.stateNode;if((Oe.flags&128)===0&&(typeof Un.getDerivedStateFromError=="function"||rr!==null&&typeof rr.componentDidCatch=="function"&&(V===null||!V.has(rr)))){Oe.flags|=65536,f&=-f,Oe.lanes|=f;var Nr=Ip(Oe,Sn,f);dg(Oe,Nr);break e}}Oe=Oe.return}while(Oe!==null)}qn(x)}catch(vi){f=vi,di===x&&x!==null&&(di=x=x.return);continue}break}while(!0)}function In(){var l=so.current;return so.current=pd,l===null?pd:l}function Zn(){(ar===0||ar===3||ar===2)&&(ar=4),Ds===null||(i&268435455)===0&&(o&268435455)===0||ft(Ds,Ai)}function Kn(l,f){var x=fs;fs|=2;var N=In();(Ds!==l||Ai!==f)&&(T=null,qt(l,f));do try{ur();break}catch(ge){ln(l,ge)}while(!0);if(sd(),fs=x,so.current=N,di!==null)throw Error(L(261));return Ds=null,Ai=0,ar}function ur(){for(;di!==null;)An(di)}function yn(){for(;di!==null&&!Jo();)An(di)}function An(l){var f=$i(l.alternate,l,ui);l.memoizedProps=l.pendingProps,f===null?qn(l):di=f,pa.current=null}function qn(l){var f=l;do{var x=f.alternate;if(l=f.return,(f.flags&32768)===0){if(x=an(x,f,ui),x!==null){di=x;return}}else{if(x=Cn(x,f),x!==null){x.flags&=32767,di=x;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{ar=6,di=null;return}}if(f=f.sibling,f!==null){di=f;return}di=f=l}while(f!==null);ar===0&&(ar=5)}function cr(l,f,x){var N=Vs,ge=ea.transition;try{ea.transition=null,Vs=1,mr(l,f,x,N)}finally{ea.transition=ge,Vs=N}return null}function mr(l,f,x,N){do Rr();while(R!==null);if((fs&6)!==0)throw Error(L(327));x=l.finishedWork;var ge=l.finishedLanes;if(x===null)return null;if(l.finishedWork=null,l.finishedLanes=0,x===l.current)throw Error(L(177));l.callbackNode=null,l.callbackPriority=0;var Oe=x.lanes|x.childLanes;if(wh(l,Oe),l===Ds&&(di=Ds=null,Ai=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||z||(z=!0,Qi(Xu,function(){return Rr(),null})),Oe=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||Oe){Oe=ea.transition,ea.transition=null;var Ht=Vs;Vs=1;var Sn=fs;fs|=4,pa.current=null,oi(l,x),qo(x,l),Ii(Th),Bu=!!Sp,Th=Sp=null,l.current=x,Fi(x),Ku(),fs=Sn,Vs=Ht,ea.transition=Oe}else l.current=x;if(z&&(z=!1,R=l,J=ge),Oe=l.pendingLanes,Oe===0&&(V=null),fu(x.stateNode),pe(l,ca()),f!==null)for(N=l.onRecoverableError,x=0;x<f.length;x++)ge=f[x],N(ge.value,{componentStack:ge.stack,digest:ge.digest});if(P)throw P=!1,l=F,F=null,l;return(J&1)!==0&&l.tag!==0&&Rr(),Oe=l.pendingLanes,(Oe&1)!==0?l===ie?Y++:(Y=0,ie=l):Y=0,nh(),null}function Rr(){if(R!==null){var l=Lu(J),f=ea.transition,x=Vs;try{if(ea.transition=null,Vs=16>l?16:l,R===null)var N=!1;else{if(l=R,R=null,J=0,(fs&6)!==0)throw Error(L(331));var ge=fs;for(fs|=4,On=l.current;On!==null;){var Oe=On,Ht=Oe.child;if((On.flags&16)!==0){var Sn=Oe.deletions;if(Sn!==null){for(var Rn=0;Rn<Sn.length;Rn++){var dr=Sn[Rn];for(On=dr;On!==null;){var Dr=On;switch(Dr.tag){case 0:case 11:case 15:xr(8,Dr,Oe)}var Pr=Dr.child;if(Pr!==null)Pr.return=Dr,On=Pr;else for(;On!==null;){Dr=On;var Ur=Dr.sibling,pi=Dr.return;if(si(Dr),Dr===dr){On=null;break}if(Ur!==null){Ur.return=pi,On=Ur;break}On=pi}}}var mi=Oe.alternate;if(mi!==null){var gi=mi.child;if(gi!==null){mi.child=null;do{var xa=gi.sibling;gi.sibling=null,gi=xa}while(gi!==null)}}On=Oe}}if((Oe.subtreeFlags&2064)!==0&&Ht!==null)Ht.return=Oe,On=Ht;else e:for(;On!==null;){if(Oe=On,(Oe.flags&2048)!==0)switch(Oe.tag){case 0:case 11:case 15:xr(9,Oe,Oe.return)}var Xn=Oe.sibling;if(Xn!==null){Xn.return=Oe.return,On=Xn;break e}On=Oe.return}}var Un=l.current;for(On=Un;On!==null;){Ht=On;var rr=Ht.child;if((Ht.subtreeFlags&2064)!==0&&rr!==null)rr.return=Ht,On=rr;else e:for(Ht=Un;On!==null;){if(Sn=On,(Sn.flags&2048)!==0)try{switch(Sn.tag){case 0:case 11:case 15:Ts(9,Sn)}}catch(vi){Ir(Sn,Sn.return,vi)}if(Sn===Ht){On=null;break e}var Nr=Sn.sibling;if(Nr!==null){Nr.return=Sn.return,On=Nr;break e}On=Sn.return}}if(fs=ge,nh(),Ja&&typeof Ja.onPostCommitFiberRoot=="function")try{Ja.onPostCommitFiberRoot(wi,l)}catch{}N=!0}return N}finally{Vs=x,ea.transition=f}}return!1}function Lr(l,f,x){f=If(x,f),f=Qd(l,f,1),l=Du(l,f,1),f=I(),l!==null&&(Iu(l,1,f),pe(l,f))}function Ir(l,f,x){if(l.tag===3)Lr(l,l,x);else for(;f!==null;){if(f.tag===3){Lr(f,l,x);break}else if(f.tag===1){var N=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(V===null||!V.has(N))){l=If(x,l),l=Ip(f,l,1),f=Du(f,l,1),l=I(),f!==null&&(Iu(f,1,l),pe(f,l));break}}f=f.return}}function ti(l,f,x){var N=l.pingCache;N!==null&&N.delete(f),f=I(),l.pingedLanes|=l.suspendedLanes&x,Ds===l&&(Ai&x)===x&&(ar===4||ar===3&&(Ai&130023424)===Ai&&500>ca()-D?qt(l,0):h|=x),pe(l,f)}function Wr(l,f){f===0&&((l.mode&1)===0?f=1:(f=vc,vc<<=1,(vc&130023424)===0&&(vc=4194304)));var x=I();l=Pl(l,f),l!==null&&(Iu(l,f,x),pe(l,x))}function ls(l){var f=l.memoizedState,x=0;f!==null&&(x=f.retryLane),Wr(l,x)}function Vr(l,f){var x=0;switch(l.tag){case 13:var N=l.stateNode,ge=l.memoizedState;ge!==null&&(x=ge.retryLane);break;case 19:N=l.stateNode;break;default:throw Error(L(314))}N!==null&&N.delete(f),Wr(l,x)}var $i;$i=function(l,f,x){if(l!==null)if(l.memoizedProps!==f.pendingProps||Bs.current)rl=!0;else{if((l.lanes&x)===0&&(f.flags&128)===0)return rl=!1,re(l,f,x);rl=(l.flags&131072)!==0}else rl=!1,Ys&&(f.flags&1048576)!==0&&jd(f,td,f.index);switch(f.lanes=0,f.tag){case 2:var N=f.type;Ae(l,f),l=f.pendingProps;var ge=Ph(f,wa.current);Oc(f,x),ge=Hu(null,f,N,l,ge,x);var Oe=Tp();return f.flags|=1,typeof ge=="object"&&ge!==null&&typeof ge.render=="function"&&ge.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Al(N)?(Oe=!0,Sf(f)):Oe=!1,f.memoizedState=ge.state!==null&&ge.state!==void 0?ge.state:null,nl(f),ge.updater=Gh,f.stateNode=ge,ge._reactInternals=f,Xd(f,N,l,x),f=Nc(null,f,N,!0,Oe,x)):(f.tag=0,Ys&&Oe&&Ga(f),Mo(null,f,ge,x),f=f.child),f;case 16:N=f.elementType;e:{switch(Ae(l,f),l=f.pendingProps,ge=N._init,N=ge(N._payload),f.type=N,ge=f.tag=ns(N),l=kl(N,l),ge){case 0:f=md(null,f,N,l,x);break e;case 1:f=ep(null,f,N,l,x);break e;case 11:f=Lc(null,f,N,l,x);break e;case 14:f=gd(null,f,N,kl(N.type,l),x);break e}throw Error(L(306,N,""))}return f;case 0:return N=f.type,ge=f.pendingProps,ge=f.elementType===N?ge:kl(N,ge),md(l,f,N,ge,x);case 1:return N=f.type,ge=f.pendingProps,ge=f.elementType===N?ge:kl(N,ge),ep(l,f,N,ge,x);case 3:e:{if(y(f),l===null)throw Error(L(387));N=f.pendingProps,Oe=f.memoizedState,ge=Oe.element,Nh(l,f),Gd(f,N,null,x);var Ht=f.memoizedState;if(N=Ht.element,Oe.isDehydrated)if(Oe={element:N,isDehydrated:!1,cache:Ht.cache,pendingSuspenseBoundaries:Ht.pendingSuspenseBoundaries,transitions:Ht.transitions},f.updateQueue.baseState=Oe,f.memoizedState=Oe,f.flags&256){ge=If(Error(L(423)),f),f=e(l,f,N,x,ge);break e}else if(N!==ge){ge=If(Error(L(424)),f),f=e(l,f,N,x,ge);break e}else for(Vl=Tc(f.stateNode.containerInfo.firstChild),Tl=f,Ys=!0,zu=null,x=Lh(f,null,N,x),f.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(kh(),N===ge){f=rt(l,f,x);break e}Mo(l,f,N,x)}f=f.child}return f;case 5:return Ep(f),l===null&&id(f),N=f.type,ge=f.pendingProps,Oe=l!==null?l.memoizedProps:null,Ht=ge.children,_a(N,ge)?Ht=null:Oe!==null&&_a(N,Oe)&&(f.flags|=32),Rc(l,f),Mo(l,f,Ht,x),f.child;case 6:return l===null&&id(f),null;case 13:return c(l,f,x);case 4:return Uu(f,f.stateNode.containerInfo),N=f.pendingProps,l===null?f.child=Af(f,null,N,x):Mo(l,f,N,x),f.child;case 11:return N=f.type,ge=f.pendingProps,ge=f.elementType===N?ge:kl(N,ge),Lc(l,f,N,ge,x);case 7:return Mo(l,f,f.pendingProps,x),f.child;case 8:return Mo(l,f,f.pendingProps.children,x),f.child;case 12:return Mo(l,f,f.pendingProps.children,x),f.child;case 10:e:{if(N=f.type._context,ge=f.pendingProps,Oe=f.memoizedProps,Ht=ge.value,ye(Bh,N._currentValue),N._currentValue=Ht,Oe!==null)if(sa(Oe.value,Ht)){if(Oe.children===ge.children&&!Bs.current){f=rt(l,f,x);break e}}else for(Oe=f.child,Oe!==null&&(Oe.return=f);Oe!==null;){var Sn=Oe.dependencies;if(Sn!==null){Ht=Oe.child;for(var Rn=Sn.firstContext;Rn!==null;){if(Rn.context===N){if(Oe.tag===1){Rn=Rs(-1,x&-x),Rn.tag=2;var dr=Oe.updateQueue;if(dr!==null){dr=dr.shared;var Dr=dr.pending;Dr===null?Rn.next=Rn:(Rn.next=Dr.next,Dr.next=Rn),dr.pending=Rn}}Oe.lanes|=x,Rn=Oe.alternate,Rn!==null&&(Rn.lanes|=x),Wd(Oe.return,x,f),Sn.lanes|=x;break}Rn=Rn.next}}else if(Oe.tag===10)Ht=Oe.type===f.type?null:Oe.child;else if(Oe.tag===18){if(Ht=Oe.return,Ht===null)throw Error(L(341));Ht.lanes|=x,Sn=Ht.alternate,Sn!==null&&(Sn.lanes|=x),Wd(Ht,x,f),Ht=Oe.sibling}else Ht=Oe.child;if(Ht!==null)Ht.return=Oe;else for(Ht=Oe;Ht!==null;){if(Ht===f){Ht=null;break}if(Oe=Ht.sibling,Oe!==null){Oe.return=Ht.return,Ht=Oe;break}Ht=Ht.return}Oe=Ht}Mo(l,f,ge.children,x),f=f.child}return f;case 9:return ge=f.type,N=f.pendingProps.children,Oc(f,x),ge=cs(ge),N=N(ge),f.flags|=1,Mo(l,f,N,x),f.child;case 14:return N=f.type,ge=kl(N,f.pendingProps),ge=kl(N.type,ge),gd(l,f,N,ge,x);case 15:return Bc(l,f,f.type,f.pendingProps,x);case 17:return N=f.type,ge=f.pendingProps,ge=f.elementType===N?ge:kl(N,ge),Ae(l,f),f.tag=1,Al(N)?(l=!0,Sf(f)):l=!1,Oc(f,x),Js(f,N,ge),Xd(f,N,ge,x),Nc(null,f,N,!0,l,x);case 19:return ve(l,f,x);case 22:return Yh(l,f,x)}throw Error(L(156,f.tag))};function Qi(l,f){return Pu(l,f)}function Oi(l,f,x,N){this.tag=l,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(l,f,x,N){return new Oi(l,f,x,N)}function ys(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ns(l){if(typeof l=="function")return ys(l)?1:0;if(l!=null){if(l=l.$$typeof,l===Je)return 11;if(l===Jt)return 14}return 2}function As(l,f){var x=l.alternate;return x===null?(x=Bi(l.tag,f,l.key,l.mode),x.elementType=l.elementType,x.type=l.type,x.stateNode=l.stateNode,x.alternate=l,l.alternate=x):(x.pendingProps=f,x.type=l.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=l.flags&14680064,x.childLanes=l.childLanes,x.lanes=l.lanes,x.child=l.child,x.memoizedProps=l.memoizedProps,x.memoizedState=l.memoizedState,x.updateQueue=l.updateQueue,f=l.dependencies,x.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},x.sibling=l.sibling,x.index=l.index,x.ref=l.ref,x}function rs(l,f,x,N,ge,Oe){var Ht=2;if(N=l,typeof l=="function")ys(l)&&(Ht=1);else if(typeof l=="string")Ht=5;else e:switch(l){case Qe:return Ji(x.children,ge,Oe,f);case wt:Ht=8,ge|=8;break;case Dt:return l=Bi(12,x,f,ge|2),l.elementType=Dt,l.lanes=Oe,l;case pt:return l=Bi(13,x,f,ge),l.elementType=pt,l.lanes=Oe,l;case ot:return l=Bi(19,x,f,ge),l.elementType=ot,l.lanes=Oe,l;case ut:return Fs(x,ge,Oe,f);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case at:Ht=10;break e;case Ne:Ht=9;break e;case Je:Ht=11;break e;case Jt:Ht=14;break e;case Qt:Ht=16,N=null;break e}throw Error(L(130,l==null?l:typeof l,""))}return f=Bi(Ht,x,f,ge),f.elementType=l,f.type=N,f.lanes=Oe,f}function Ji(l,f,x,N){return l=Bi(7,l,N,f),l.lanes=x,l}function Fs(l,f,x,N){return l=Bi(22,l,N,f),l.elementType=ut,l.lanes=x,l.stateNode={isHidden:!1},l}function Is(l,f,x){return l=Bi(6,l,null,f),l.lanes=x,l}function Ws(l,f,x){return f=Bi(4,l.children!==null?l.children:[],l.key,f),f.lanes=x,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}function Ca(l,f,x,N,ge){this.tag=f,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gc(0),this.expirationTimes=Gc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gc(0),this.identifierPrefix=N,this.onRecoverableError=ge,this.mutableSourceEagerHydrationData=null}function ta(l,f,x,N,ge,Oe,Ht,Sn,Rn){return l=new Ca(l,f,x,Sn,Rn),f===1?(f=1,Oe===!0&&(f|=8)):f=0,Oe=Bi(3,null,null,f),l.current=Oe,Oe.stateNode=l,Oe.memoizedState={element:N,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},nl(Oe),l}function Po(l,f,x){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:N==null?null:""+N,children:l,containerInfo:f,implementation:x}}function il(l){if(!l)return Yo;l=l._reactInternals;e:{if(Co(l)!==l||l.tag!==1)throw Error(L(170));var f=l;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Al(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(L(171))}if(l.tag===1){var x=l.type;if(Al(x))return cg(l,x,f)}return f}function Oo(l,f,x,N,ge,Oe,Ht,Sn,Rn){return l=ta(x,N,!0,l,ge,Oe,Ht,Sn,Rn),l.context=il(null),x=l.current,N=I(),ge=G(x),Oe=Rs(N,ge),Oe.callback=f??null,Du(x,Oe,ge),l.current.lanes=ge,Iu(l,ge,N),pe(l,N),l}function sl(l,f,x,N){var ge=f.current,Oe=I(),Ht=G(ge);return x=il(x),f.context===null?f.context=x:f.pendingContext=x,f=Rs(Oe,Ht),f.payload={element:l},N=N===void 0?null:N,N!==null&&(f.callback=N),l=Du(ge,f,Ht),l!==null&&(te(l,ge,Ht,Oe),ad(l,ge,Ht)),Ht}function Ya(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function al(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var x=l.retryLane;l.retryLane=x!==0&&x<f?x:f}}function Vi(l,f){al(l,f),(l=l.alternate)&&al(l,f)}function Ll(){return null}var po=typeof reportError=="function"?reportError:function(l){console.error(l)};function Za(l){this._internalRoot=l}ga.prototype.render=Za.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(L(409));sl(l,f,null,null)},ga.prototype.unmount=Za.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;Et(function(){sl(null,l,null,null)}),f[Wo]=null}};function ga(l){this._internalRoot=l}ga.prototype.unstable_scheduleHydration=function(l){if(l){var f=Cs();l={blockedOn:null,target:l,priority:f};for(var x=0;x<ne.length&&f!==0&&f<ne[x].priority;x++);ne.splice(x,0,l),x===0&&gr(l)}};function $a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function oa(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function Zs(){}function _(l,f,x,N,ge){if(ge){if(typeof N=="function"){var Oe=N;N=function(){var dr=Ya(Ht);Oe.call(dr)}}var Ht=Oo(f,N,l,0,null,!1,!1,"",Zs);return l._reactRootContainer=Ht,l[Wo]=Ht.current,Eh(l.nodeType===8?l.parentNode:l),Et(),Ht}for(;ge=l.lastChild;)l.removeChild(ge);if(typeof N=="function"){var Sn=N;N=function(){var dr=Ya(Rn);Sn.call(dr)}}var Rn=ta(l,0,!1,null,null,!1,!1,"",Zs);return l._reactRootContainer=Rn,l[Wo]=Rn.current,Eh(l.nodeType===8?l.parentNode:l),Et(function(){sl(f,Rn,x,N)}),Rn}function he(l,f,x,N,ge){var Oe=x._reactRootContainer;if(Oe){var Ht=Oe;if(typeof ge=="function"){var Sn=ge;ge=function(){var Rn=Ya(Ht);Sn.call(Rn)}}sl(f,Ht,l,ge)}else Ht=_(x,f,l,ge,N);return Ya(Ht)}xh=function(l){switch(l.tag){case 3:var f=l.stateNode;if(f.current.memoizedState.isDehydrated){var x=_c(f.pendingLanes);x!==0&&(Vf(f,x|1),pe(f,ca()),(fs&6)===0&&(A=ca()+500,nh()))}break;case 13:Et(function(){var N=Pl(l,1);if(N!==null){var ge=I();te(N,l,1,ge)}}),Vi(l,1)}},of=function(l){if(l.tag===13){var f=Pl(l,134217728);if(f!==null){var x=I();te(f,l,134217728,x)}Vi(l,134217728)}},yc=function(l){if(l.tag===13){var f=G(l),x=Pl(l,f);if(x!==null){var N=I();te(x,l,f,N)}Vi(l,f)}},Cs=function(){return Vs},Yc=function(l,f){var x=Vs;try{return Vs=l,f()}finally{Vs=x}},tr=function(l,f,x){switch(f){case"input":if(fe(l,x),f=x.name,x.type==="radio"&&f!=null){for(x=l;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<x.length;f++){var N=x[f];if(N!==l&&N.form===l.form){var ge=zd(N);if(!ge)throw Error(L(90));tt(N),fe(N,ge)}}}break;case"textarea":qe(l,x);break;case"select":f=x.value,f!=null&&Ke(l,!!x.multiple,f,!1)}},un=yt,fn=Et;var gt={usingClientEntryPoint:!1,Events:[ed,wu,zd,pn,Wt,yt]},jt={findFiberByHostInstance:th,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wn={bundleType:jt.bundleType,version:jt.version,rendererPackageName:jt.rendererPackageName,rendererConfig:jt.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=mc(l),l===null?null:l.stateNode},findFiberByHostInstance:jt.findFiberByHostInstance||Ll,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nr.isDisabled&&nr.supportsFiber)try{wi=nr.inject(wn),Ja=nr}catch{}}return mh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gt,mh.createPortal=function(l,f){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$a(f))throw Error(L(200));return Po(l,f,null,x)},mh.createRoot=function(l,f){if(!$a(l))throw Error(L(299));var x=!1,N="",ge=po;return f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(N=f.identifierPrefix),f.onRecoverableError!==void 0&&(ge=f.onRecoverableError)),f=ta(l,1,!1,null,null,x,!1,N,ge),l[Wo]=f.current,Eh(l.nodeType===8?l.parentNode:l),new Za(f)},mh.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(L(188)):(l=Object.keys(l).join(","),Error(L(268,l)));return l=mc(f),l=l===null?null:l.stateNode,l},mh.flushSync=function(l){return Et(l)},mh.hydrate=function(l,f,x){if(!oa(f))throw Error(L(200));return he(null,l,f,!0,x)},mh.hydrateRoot=function(l,f,x){if(!$a(l))throw Error(L(405));var N=x!=null&&x.hydratedSources||null,ge=!1,Oe="",Ht=po;if(x!=null&&(x.unstable_strictMode===!0&&(ge=!0),x.identifierPrefix!==void 0&&(Oe=x.identifierPrefix),x.onRecoverableError!==void 0&&(Ht=x.onRecoverableError)),f=Oo(f,null,l,1,x??null,ge,!1,Oe,Ht),l[Wo]=f.current,Eh(l),N)for(l=0;l<N.length;l++)x=N[l],ge=x._getVersion,ge=ge(x._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[x,ge]:f.mutableSourceEagerHydrationData.push(x,ge);return new ga(f)},mh.render=function(l,f,x){if(!oa(f))throw Error(L(200));return he(null,l,f,!1,x)},mh.unmountComponentAtNode=function(l){if(!oa(l))throw Error(L(40));return l._reactRootContainer?(Et(function(){he(null,null,l,!1,function(){l._reactRootContainer=null,l[Wo]=null})}),!0):!1},mh.unstable_batchedUpdates=yt,mh.unstable_renderSubtreeIntoContainer=function(l,f,x,N){if(!oa(x))throw Error(L(200));if(l==null||l._reactInternals===void 0)throw Error(L(38));return he(l,f,x,!1,N)},mh.version="18.3.1-next-f1338f8080-20240426",mh}var ib;function Yb(){if(ib)return s0.exports;ib=1;function E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E)}catch(H){console.error(H)}}return E(),s0.exports=iP(),s0.exports}var sb;function sP(){if(sb)return E_;sb=1;var E=Yb();return E_.createRoot=E.createRoot,E_.hydrateRoot=E.hydrateRoot,E_}var aP=sP();const oP=n_(aP);var l0={exports:{}},u0={exports:{}},ro={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab;function lP(){if(ab)return ro;ab=1;var E=typeof Symbol=="function"&&Symbol.for,H=E?Symbol.for("react.element"):60103,L=E?Symbol.for("react.portal"):60106,le=E?Symbol.for("react.fragment"):60107,Te=E?Symbol.for("react.strict_mode"):60108,Ve=E?Symbol.for("react.profiler"):60114,st=E?Symbol.for("react.provider"):60109,Tt=E?Symbol.for("react.context"):60110,je=E?Symbol.for("react.async_mode"):60111,be=E?Symbol.for("react.concurrent_mode"):60111,K=E?Symbol.for("react.forward_ref"):60112,se=E?Symbol.for("react.suspense"):60113,B=E?Symbol.for("react.suspense_list"):60120,Fe=E?Symbol.for("react.memo"):60115,Be=E?Symbol.for("react.lazy"):60116,ce=E?Symbol.for("react.block"):60121,me=E?Symbol.for("react.fundamental"):60117,we=E?Symbol.for("react.responder"):60118,ae=E?Symbol.for("react.scope"):60119;function De(Se){if(typeof Se=="object"&&Se!==null){var ee=Se.$$typeof;switch(ee){case H:switch(Se=Se.type,Se){case je:case be:case le:case Ve:case Te:case se:return Se;default:switch(Se=Se&&Se.$$typeof,Se){case Tt:case K:case Be:case Fe:case st:return Se;default:return ee}}case L:return ee}}}function Pe(Se){return De(Se)===be}return ro.AsyncMode=je,ro.ConcurrentMode=be,ro.ContextConsumer=Tt,ro.ContextProvider=st,ro.Element=H,ro.ForwardRef=K,ro.Fragment=le,ro.Lazy=Be,ro.Memo=Fe,ro.Portal=L,ro.Profiler=Ve,ro.StrictMode=Te,ro.Suspense=se,ro.isAsyncMode=function(Se){return Pe(Se)||De(Se)===je},ro.isConcurrentMode=Pe,ro.isContextConsumer=function(Se){return De(Se)===Tt},ro.isContextProvider=function(Se){return De(Se)===st},ro.isElement=function(Se){return typeof Se=="object"&&Se!==null&&Se.$$typeof===H},ro.isForwardRef=function(Se){return De(Se)===K},ro.isFragment=function(Se){return De(Se)===le},ro.isLazy=function(Se){return De(Se)===Be},ro.isMemo=function(Se){return De(Se)===Fe},ro.isPortal=function(Se){return De(Se)===L},ro.isProfiler=function(Se){return De(Se)===Ve},ro.isStrictMode=function(Se){return De(Se)===Te},ro.isSuspense=function(Se){return De(Se)===se},ro.isValidElementType=function(Se){return typeof Se=="string"||typeof Se=="function"||Se===le||Se===be||Se===Ve||Se===Te||Se===se||Se===B||typeof Se=="object"&&Se!==null&&(Se.$$typeof===Be||Se.$$typeof===Fe||Se.$$typeof===st||Se.$$typeof===Tt||Se.$$typeof===K||Se.$$typeof===me||Se.$$typeof===we||Se.$$typeof===ae||Se.$$typeof===ce)},ro.typeOf=De,ro}var ob;function Zb(){return ob||(ob=1,u0.exports=lP()),u0.exports}var $b=Zb(),c0,lb;function uP(){return lb||(lb=1,c0=function(H,L,le,Te){var Ve=le?le.call(Te,H,L):void 0;if(Ve!==void 0)return!!Ve;if(H===L)return!0;if(typeof H!="object"||!H||typeof L!="object"||!L)return!1;var st=Object.keys(H),Tt=Object.keys(L);if(st.length!==Tt.length)return!1;for(var je=Object.prototype.hasOwnProperty.bind(L),be=0;be<st.length;be++){var K=st[be];if(!je(K))return!1;var se=H[K],B=L[K];if(Ve=le?le.call(Te,se,B,K):void 0,Ve===!1||Ve===void 0&&se!==B)return!1}return!0}),c0}var cP=uP();const hP=n_(cP);function fP(E){function H(Ot,rn,$t,sn,lt){for(var Zt=0,zt=0,Le=0,Mt=0,Rt,tt,We=0,C=0,U,Q=U=Rt=0,fe=0,de=0,Ce=0,Ye=0,Ke=$t.length,ct=Ke-1,_t,qe="",ht="",Pt="",xt="",Ge;fe<Ke;){if(tt=$t.charCodeAt(fe),fe===ct&&zt+Mt+Le+Zt!==0&&(zt!==0&&(tt=zt===47?10:47),Mt=Le=Zt=0,Ke++,ct++),zt+Mt+Le+Zt===0){if(fe===ct&&(0<de&&(qe=qe.replace(B,"")),0<qe.trim().length)){switch(tt){case 32:case 9:case 59:case 13:case 10:break;default:qe+=$t.charAt(fe)}tt=59}switch(tt){case 123:for(qe=qe.trim(),Rt=qe.charCodeAt(0),U=1,Ye=++fe;fe<Ke;){switch(tt=$t.charCodeAt(fe)){case 123:U++;break;case 125:U--;break;case 47:switch(tt=$t.charCodeAt(fe+1)){case 42:case 47:e:{for(Q=fe+1;Q<ct;++Q)switch($t.charCodeAt(Q)){case 47:if(tt===42&&$t.charCodeAt(Q-1)===42&&fe+2!==Q){fe=Q+1;break e}break;case 10:if(tt===47){fe=Q+1;break e}}fe=Q}}break;case 91:tt++;case 40:tt++;case 34:case 39:for(;fe++<ct&&$t.charCodeAt(fe)!==tt;);}if(U===0)break;fe++}switch(U=$t.substring(Ye,fe),Rt===0&&(Rt=(qe=qe.replace(se,"").trim()).charCodeAt(0)),Rt){case 64:switch(0<de&&(qe=qe.replace(B,"")),tt=qe.charCodeAt(1),tt){case 100:case 109:case 115:case 45:de=rn;break;default:de=Qt}if(U=H(rn,de,U,tt,lt+1),Ye=U.length,0<St&&(de=L(Qt,qe,Ce),Ge=Tt(3,U,de,rn,pt,Je,Ye,tt,lt,sn),qe=de.join(""),Ge!==void 0&&(Ye=(U=Ge.trim()).length)===0&&(tt=0,U="")),0<Ye)switch(tt){case 115:qe=qe.replace(ee,st);case 100:case 109:case 45:U=qe+"{"+U+"}";break;case 107:qe=qe.replace(ae,"$1 $2"),U=qe+"{"+U+"}",U=Jt===1||Jt===2&&Ve("@"+U,3)?"@-webkit-"+U+"@"+U:"@"+U;break;default:U=qe+U,sn===112&&(U=(ht+=U,""))}else U="";break;default:U=H(rn,L(rn,qe,Ce),U,sn,lt+1)}Pt+=U,U=Ce=de=Q=Rt=0,qe="",tt=$t.charCodeAt(++fe);break;case 125:case 59:if(qe=(0<de?qe.replace(B,""):qe).trim(),1<(Ye=qe.length))switch(Q===0&&(Rt=qe.charCodeAt(0),Rt===45||96<Rt&&123>Rt)&&(Ye=(qe=qe.replace(" ",":")).length),0<St&&(Ge=Tt(1,qe,rn,Ot,pt,Je,ht.length,sn,lt,sn))!==void 0&&(Ye=(qe=Ge.trim()).length)===0&&(qe="\0\0"),Rt=qe.charCodeAt(0),tt=qe.charCodeAt(1),Rt){case 0:break;case 64:if(tt===105||tt===99){xt+=qe+$t.charAt(fe);break}default:qe.charCodeAt(Ye-1)!==58&&(ht+=Te(qe,Rt,tt,qe.charCodeAt(2)))}Ce=de=Q=Rt=0,qe="",tt=$t.charCodeAt(++fe)}}switch(tt){case 13:case 10:zt===47?zt=0:1+Rt===0&&sn!==107&&0<qe.length&&(de=1,qe+="\0"),0<St*Ue&&Tt(0,qe,rn,Ot,pt,Je,ht.length,sn,lt,sn),Je=1,pt++;break;case 59:case 125:if(zt+Mt+Le+Zt===0){Je++;break}default:switch(Je++,_t=$t.charAt(fe),tt){case 9:case 32:if(Mt+Zt+zt===0)switch(We){case 44:case 58:case 9:case 32:_t="";break;default:tt!==32&&(_t=" ")}break;case 0:_t="\\0";break;case 12:_t="\\f";break;case 11:_t="\\v";break;case 38:Mt+zt+Zt===0&&(de=Ce=1,_t="\f"+_t);break;case 108:if(Mt+zt+Zt+ot===0&&0<Q)switch(fe-Q){case 2:We===112&&$t.charCodeAt(fe-3)===58&&(ot=We);case 8:C===111&&(ot=C)}break;case 58:Mt+zt+Zt===0&&(Q=fe);break;case 44:zt+Le+Mt+Zt===0&&(de=1,_t+="\r");break;case 34:case 39:zt===0&&(Mt=Mt===tt?0:Mt===0?tt:Mt);break;case 91:Mt+zt+Le===0&&Zt++;break;case 93:Mt+zt+Le===0&&Zt--;break;case 41:Mt+zt+Zt===0&&Le--;break;case 40:if(Mt+zt+Zt===0){if(Rt===0)switch(2*We+3*C){case 533:break;default:Rt=1}Le++}break;case 64:zt+Le+Mt+Zt+Q+U===0&&(U=1);break;case 42:case 47:if(!(0<Mt+Zt+Le))switch(zt){case 0:switch(2*tt+3*$t.charCodeAt(fe+1)){case 235:zt=47;break;case 220:Ye=fe,zt=42}break;case 42:tt===47&&We===42&&Ye+2!==fe&&($t.charCodeAt(Ye+2)===33&&(ht+=$t.substring(Ye,fe+1)),_t="",zt=0)}}zt===0&&(qe+=_t)}C=We,We=tt,fe++}if(Ye=ht.length,0<Ye){if(de=rn,0<St&&(Ge=Tt(2,ht,de,Ot,pt,Je,Ye,sn,lt,sn),Ge!==void 0&&(ht=Ge).length===0))return xt+ht+Pt;if(ht=de.join(",")+"{"+ht+"}",Jt*ot!==0){switch(Jt!==2||Ve(ht,2)||(ot=0),ot){case 111:ht=ht.replace(Pe,":-moz-$1")+ht;break;case 112:ht=ht.replace(De,"::-webkit-input-$1")+ht.replace(De,"::-moz-$1")+ht.replace(De,":-ms-input-$1")+ht}ot=0}}return xt+ht+Pt}function L(Ot,rn,$t){var sn=rn.trim().split(me);rn=sn;var lt=sn.length,Zt=Ot.length;switch(Zt){case 0:case 1:var zt=0;for(Ot=Zt===0?"":Ot[0]+" ";zt<lt;++zt)rn[zt]=le(Ot,rn[zt],$t).trim();break;default:var Le=zt=0;for(rn=[];zt<lt;++zt)for(var Mt=0;Mt<Zt;++Mt)rn[Le++]=le(Ot[Mt]+" ",sn[zt],$t).trim()}return rn}function le(Ot,rn,$t){var sn=rn.charCodeAt(0);switch(33>sn&&(sn=(rn=rn.trim()).charCodeAt(0)),sn){case 38:return rn.replace(we,"$1"+Ot.trim());case 58:return Ot.trim()+rn.replace(we,"$1"+Ot.trim());default:if(0<1*$t&&0<rn.indexOf("\f"))return rn.replace(we,(Ot.charCodeAt(0)===58?"":"$1")+Ot.trim())}return Ot+rn}function Te(Ot,rn,$t,sn){var lt=Ot+";",Zt=2*rn+3*$t+4*sn;if(Zt===944){Ot=lt.indexOf(":",9)+1;var zt=lt.substring(Ot,lt.length-1).trim();return zt=lt.substring(0,Ot).trim()+zt+";",Jt===1||Jt===2&&Ve(zt,1)?"-webkit-"+zt+zt:zt}if(Jt===0||Jt===2&&!Ve(lt,1))return lt;switch(Zt){case 1015:return lt.charCodeAt(10)===97?"-webkit-"+lt+lt:lt;case 951:return lt.charCodeAt(3)===116?"-webkit-"+lt+lt:lt;case 963:return lt.charCodeAt(5)===110?"-webkit-"+lt+lt:lt;case 1009:if(lt.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+lt+lt;case 978:return"-webkit-"+lt+"-moz-"+lt+lt;case 1019:case 983:return"-webkit-"+lt+"-moz-"+lt+"-ms-"+lt+lt;case 883:if(lt.charCodeAt(8)===45)return"-webkit-"+lt+lt;if(0<lt.indexOf("image-set(",11))return lt.replace(Ne,"$1-webkit-$2")+lt;break;case 932:if(lt.charCodeAt(4)===45)switch(lt.charCodeAt(5)){case 103:return"-webkit-box-"+lt.replace("-grow","")+"-webkit-"+lt+"-ms-"+lt.replace("grow","positive")+lt;case 115:return"-webkit-"+lt+"-ms-"+lt.replace("shrink","negative")+lt;case 98:return"-webkit-"+lt+"-ms-"+lt.replace("basis","preferred-size")+lt}return"-webkit-"+lt+"-ms-"+lt+lt;case 964:return"-webkit-"+lt+"-ms-flex-"+lt+lt;case 1023:if(lt.charCodeAt(8)!==99)break;return zt=lt.substring(lt.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+zt+"-webkit-"+lt+"-ms-flex-pack"+zt+lt;case 1005:return Be.test(lt)?lt.replace(Fe,":-webkit-")+lt.replace(Fe,":-moz-")+lt:lt;case 1e3:switch(zt=lt.substring(13).trim(),rn=zt.indexOf("-")+1,zt.charCodeAt(0)+zt.charCodeAt(rn)){case 226:zt=lt.replace(Se,"tb");break;case 232:zt=lt.replace(Se,"tb-rl");break;case 220:zt=lt.replace(Se,"lr");break;default:return lt}return"-webkit-"+lt+"-ms-"+zt+lt;case 1017:if(lt.indexOf("sticky",9)===-1)break;case 975:switch(rn=(lt=Ot).length-10,zt=(lt.charCodeAt(rn)===33?lt.substring(0,rn):lt).substring(Ot.indexOf(":",7)+1).trim(),Zt=zt.charCodeAt(0)+(zt.charCodeAt(7)|0)){case 203:if(111>zt.charCodeAt(8))break;case 115:lt=lt.replace(zt,"-webkit-"+zt)+";"+lt;break;case 207:case 102:lt=lt.replace(zt,"-webkit-"+(102<Zt?"inline-":"")+"box")+";"+lt.replace(zt,"-webkit-"+zt)+";"+lt.replace(zt,"-ms-"+zt+"box")+";"+lt}return lt+";";case 938:if(lt.charCodeAt(5)===45)switch(lt.charCodeAt(6)){case 105:return zt=lt.replace("-items",""),"-webkit-"+lt+"-webkit-box-"+zt+"-ms-flex-"+zt+lt;case 115:return"-webkit-"+lt+"-ms-flex-item-"+lt.replace(wt,"")+lt;default:return"-webkit-"+lt+"-ms-flex-line-pack"+lt.replace("align-content","").replace(wt,"")+lt}break;case 973:case 989:if(lt.charCodeAt(3)!==45||lt.charCodeAt(4)===122)break;case 931:case 953:if(at.test(Ot)===!0)return(zt=Ot.substring(Ot.indexOf(":")+1)).charCodeAt(0)===115?Te(Ot.replace("stretch","fill-available"),rn,$t,sn).replace(":fill-available",":stretch"):lt.replace(zt,"-webkit-"+zt)+lt.replace(zt,"-moz-"+zt.replace("fill-",""))+lt;break;case 962:if(lt="-webkit-"+lt+(lt.charCodeAt(5)===102?"-ms-"+lt:"")+lt,$t+sn===211&&lt.charCodeAt(13)===105&&0<lt.indexOf("transform",10))return lt.substring(0,lt.indexOf(";",27)+1).replace(ce,"$1-webkit-$2")+lt}return lt}function Ve(Ot,rn){var $t=Ot.indexOf(rn===1?":":"{"),sn=Ot.substring(0,rn!==3?$t:10);return $t=Ot.substring($t+1,Ot.length-1),Lt(rn!==2?sn:sn.replace(Dt,"$1"),$t,rn)}function st(Ot,rn){var $t=Te(rn,rn.charCodeAt(0),rn.charCodeAt(1),rn.charCodeAt(2));return $t!==rn+";"?$t.replace(Qe," or ($1)").substring(4):"("+rn+")"}function Tt(Ot,rn,$t,sn,lt,Zt,zt,Le,Mt,Rt){for(var tt=0,We=rn,C;tt<St;++tt)switch(C=ut[tt].call(K,Ot,We,$t,sn,lt,Zt,zt,Le,Mt,Rt)){case void 0:case!1:case!0:case null:break;default:We=C}if(We!==rn)return We}function je(Ot){switch(Ot){case void 0:case null:St=ut.length=0;break;default:if(typeof Ot=="function")ut[St++]=Ot;else if(typeof Ot=="object")for(var rn=0,$t=Ot.length;rn<$t;++rn)je(Ot[rn]);else Ue=!!Ot|0}return je}function be(Ot){return Ot=Ot.prefix,Ot!==void 0&&(Lt=null,Ot?typeof Ot!="function"?Jt=1:(Jt=2,Lt=Ot):Jt=0),be}function K(Ot,rn){var $t=Ot;if(33>$t.charCodeAt(0)&&($t=$t.trim()),Ut=$t,$t=[Ut],0<St){var sn=Tt(-1,rn,$t,$t,pt,Je,0,0,0,0);sn!==void 0&&typeof sn=="string"&&(rn=sn)}var lt=H(Qt,$t,rn,0,0);return 0<St&&(sn=Tt(-2,lt,$t,$t,pt,Je,lt.length,0,0,0),sn!==void 0&&(lt=sn)),Ut="",ot=0,Je=pt=1,lt}var se=/^\0+/g,B=/[\0\r\f]/g,Fe=/: */g,Be=/zoo|gra/,ce=/([,: ])(transform)/g,me=/,\r+?/g,we=/([\t\r\n ])*\f?&/g,ae=/@(k\w+)\s*(\S*)\s*/,De=/::(place)/g,Pe=/:(read-only)/g,Se=/[svh]\w+-[tblr]{2}/,ee=/\(\s*(.*)\s*\)/g,Qe=/([\s\S]*?);/g,wt=/-self|flex-/g,Dt=/[^]*?(:[rp][el]a[\w-]+)[^]*/,at=/stretch|:\s*\w+\-(?:conte|avail)/,Ne=/([^-])(image-set\()/,Je=1,pt=1,ot=0,Jt=1,Qt=[],ut=[],St=0,Lt=null,Ue=0,Ut="";return K.use=je,K.set=be,E!==void 0&&be(E),K}var dP={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function pP(E){var H=Object.create(null);return function(L){return H[L]===void 0&&(H[L]=E(L)),H[L]}}var gP=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ub=pP(function(E){return gP.test(E)||E.charCodeAt(0)===111&&E.charCodeAt(1)===110&&E.charCodeAt(2)<91}),h0,cb;function mP(){if(cb)return h0;cb=1;var E=Zb(),H={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},L={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},le={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Te={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ve={};Ve[E.ForwardRef]=le,Ve[E.Memo]=Te;function st(Be){return E.isMemo(Be)?Te:Ve[Be.$$typeof]||H}var Tt=Object.defineProperty,je=Object.getOwnPropertyNames,be=Object.getOwnPropertySymbols,K=Object.getOwnPropertyDescriptor,se=Object.getPrototypeOf,B=Object.prototype;function Fe(Be,ce,me){if(typeof ce!="string"){if(B){var we=se(ce);we&&we!==B&&Fe(Be,we,me)}var ae=je(ce);be&&(ae=ae.concat(be(ce)));for(var De=st(Be),Pe=st(ce),Se=0;Se<ae.length;++Se){var ee=ae[Se];if(!L[ee]&&!(me&&me[ee])&&!(Pe&&Pe[ee])&&!(De&&De[ee])){var Qe=K(ce,ee);try{Tt(Be,ee,Qe)}catch{}}}}return Be}return h0=Fe,h0}var vP=mP();const Kb=n_(vP);var jf={};function rf(){return(rf=Object.assign||function(E){for(var H=1;H<arguments.length;H++){var L=arguments[H];for(var le in L)Object.prototype.hasOwnProperty.call(L,le)&&(E[le]=L[le])}return E}).apply(this,arguments)}var hb=function(E,H){for(var L=[E[0]],le=0,Te=H.length;le<Te;le+=1)L.push(H[le],E[le+1]);return L},E0=function(E){return E!==null&&typeof E=="object"&&(E.toString?E.toString():Object.prototype.toString.call(E))==="[object Object]"&&!$b.typeOf(E)},Y_=Object.freeze([]),Rg=Object.freeze({});function qm(E){return typeof E=="function"}function T0(E){return E.displayName||E.name||"Component"}function ny(E){return E&&typeof E.styledComponentId=="string"}var Ng=typeof process<"u"&&jf!==void 0&&(jf.REACT_APP_SC_ATTR||jf.SC_ATTR)||"data-styled",_P="5.3.11",K0=typeof window<"u"&&"HTMLElement"in window,yP=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&jf!==void 0&&(jf.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&jf.REACT_APP_SC_DISABLE_SPEEDY!==""?jf.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&jf.REACT_APP_SC_DISABLE_SPEEDY:jf.SC_DISABLE_SPEEDY!==void 0&&jf.SC_DISABLE_SPEEDY!==""&&jf.SC_DISABLE_SPEEDY!=="false"&&jf.SC_DISABLE_SPEEDY)),wP={};function Cd(E){for(var H=arguments.length,L=new Array(H>1?H-1:0),le=1;le<H;le++)L[le-1]=arguments[le];throw new Error("An error occurred. See https://git.io/JUIaE#"+E+" for more information."+(L.length>0?" Args: "+L.join(", "):""))}var xP=function(){function E(L){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=L}var H=E.prototype;return H.indexOfGroup=function(L){for(var le=0,Te=0;Te<L;Te++)le+=this.groupSizes[Te];return le},H.insertRules=function(L,le){if(L>=this.groupSizes.length){for(var Te=this.groupSizes,Ve=Te.length,st=Ve;L>=st;)(st<<=1)<0&&Cd(16,""+L);this.groupSizes=new Uint32Array(st),this.groupSizes.set(Te),this.length=st;for(var Tt=Ve;Tt<st;Tt++)this.groupSizes[Tt]=0}for(var je=this.indexOfGroup(L+1),be=0,K=le.length;be<K;be++)this.tag.insertRule(je,le[be])&&(this.groupSizes[L]++,je++)},H.clearGroup=function(L){if(L<this.length){var le=this.groupSizes[L],Te=this.indexOfGroup(L),Ve=Te+le;this.groupSizes[L]=0;for(var st=Te;st<Ve;st++)this.tag.deleteRule(Te)}},H.getGroup=function(L){var le="";if(L>=this.length||this.groupSizes[L]===0)return le;for(var Te=this.groupSizes[L],Ve=this.indexOfGroup(L),st=Ve+Te,Tt=Ve;Tt<st;Tt++)le+=this.tag.getRule(Tt)+`/*!sc*/
`;return le},E}(),N_=new Map,Z_=new Map,Jv=1,T_=function(E){if(N_.has(E))return N_.get(E);for(;Z_.has(Jv);)Jv++;var H=Jv++;return N_.set(E,H),Z_.set(H,E),H},bP=function(E){return Z_.get(E)},SP=function(E,H){H>=Jv&&(Jv=H+1),N_.set(E,H),Z_.set(H,E)},CP="style["+Ng+'][data-styled-version="5.3.11"]',DP=new RegExp("^"+Ng+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),AP=function(E,H,L){for(var le,Te=L.split(","),Ve=0,st=Te.length;Ve<st;Ve++)(le=Te[Ve])&&E.registerName(H,le)},EP=function(E,H){for(var L=(H.textContent||"").split(`/*!sc*/
`),le=[],Te=0,Ve=L.length;Te<Ve;Te++){var st=L[Te].trim();if(st){var Tt=st.match(DP);if(Tt){var je=0|parseInt(Tt[1],10),be=Tt[2];je!==0&&(SP(be,je),AP(E,be,Tt[3]),E.getTag().insertRules(je,le)),le.length=0}else le.push(st)}}},M0=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},qb=function(E){var H=document.head,L=E||H,le=document.createElement("style"),Te=function(Tt){for(var je=Tt.childNodes,be=je.length;be>=0;be--){var K=je[be];if(K&&K.nodeType===1&&K.hasAttribute(Ng))return K}}(L),Ve=Te!==void 0?Te.nextSibling:null;le.setAttribute(Ng,"active"),le.setAttribute("data-styled-version","5.3.11");var st=M0();return st&&le.setAttribute("nonce",st),L.insertBefore(le,Ve),le},TP=function(){function E(L){var le=this.element=qb(L);le.appendChild(document.createTextNode("")),this.sheet=function(Te){if(Te.sheet)return Te.sheet;for(var Ve=document.styleSheets,st=0,Tt=Ve.length;st<Tt;st++){var je=Ve[st];if(je.ownerNode===Te)return je}Cd(17)}(le),this.length=0}var H=E.prototype;return H.insertRule=function(L,le){try{return this.sheet.insertRule(le,L),this.length++,!0}catch{return!1}},H.deleteRule=function(L){this.sheet.deleteRule(L),this.length--},H.getRule=function(L){var le=this.sheet.cssRules[L];return le!==void 0&&typeof le.cssText=="string"?le.cssText:""},E}(),MP=function(){function E(L){var le=this.element=qb(L);this.nodes=le.childNodes,this.length=0}var H=E.prototype;return H.insertRule=function(L,le){if(L<=this.length&&L>=0){var Te=document.createTextNode(le),Ve=this.nodes[L];return this.element.insertBefore(Te,Ve||null),this.length++,!0}return!1},H.deleteRule=function(L){this.element.removeChild(this.nodes[L]),this.length--},H.getRule=function(L){return L<this.length?this.nodes[L].textContent:""},E}(),PP=function(){function E(L){this.rules=[],this.length=0}var H=E.prototype;return H.insertRule=function(L,le){return L<=this.length&&(this.rules.splice(L,0,le),this.length++,!0)},H.deleteRule=function(L){this.rules.splice(L,1),this.length--},H.getRule=function(L){return L<this.length?this.rules[L]:""},E}(),fb=K0,OP={isServer:!K0,useCSSOMInjection:!yP},Xm=function(){function E(L,le,Te){L===void 0&&(L=Rg),le===void 0&&(le={}),this.options=rf({},OP,{},L),this.gs=le,this.names=new Map(Te),this.server=!!L.isServer,!this.server&&K0&&fb&&(fb=!1,function(Ve){for(var st=document.querySelectorAll(CP),Tt=0,je=st.length;Tt<je;Tt++){var be=st[Tt];be&&be.getAttribute(Ng)!=="active"&&(EP(Ve,be),be.parentNode&&be.parentNode.removeChild(be))}}(this))}E.registerId=function(L){return T_(L)};var H=E.prototype;return H.reconstructWithOptions=function(L,le){return le===void 0&&(le=!0),new E(rf({},this.options,{},L),this.gs,le&&this.names||void 0)},H.allocateGSInstance=function(L){return this.gs[L]=(this.gs[L]||0)+1},H.getTag=function(){return this.tag||(this.tag=(Te=(le=this.options).isServer,Ve=le.useCSSOMInjection,st=le.target,L=Te?new PP(st):Ve?new TP(st):new MP(st),new xP(L)));var L,le,Te,Ve,st},H.hasNameForId=function(L,le){return this.names.has(L)&&this.names.get(L).has(le)},H.registerName=function(L,le){if(T_(L),this.names.has(L))this.names.get(L).add(le);else{var Te=new Set;Te.add(le),this.names.set(L,Te)}},H.insertRules=function(L,le,Te){this.registerName(L,le),this.getTag().insertRules(T_(L),Te)},H.clearNames=function(L){this.names.has(L)&&this.names.get(L).clear()},H.clearRules=function(L){this.getTag().clearGroup(T_(L)),this.clearNames(L)},H.clearTag=function(){this.tag=void 0},H.toString=function(){return function(L){for(var le=L.getTag(),Te=le.length,Ve="",st=0;st<Te;st++){var Tt=bP(st);if(Tt!==void 0){var je=L.names.get(Tt),be=le.getGroup(st);if(je&&be&&je.size){var K=Ng+".g"+st+'[id="'+Tt+'"]',se="";je!==void 0&&je.forEach(function(B){B.length>0&&(se+=B+",")}),Ve+=""+be+K+'{content:"'+se+`"}/*!sc*/
`}}}return Ve}(this)},E}(),kP=/(a)(d)/gi,db=function(E){return String.fromCharCode(E+(E>25?39:97))};function P0(E){var H,L="";for(H=Math.abs(E);H>52;H=H/52|0)L=db(H%52)+L;return(db(H%52)+L).replace(kP,"$1-$2")}var Zm=function(E,H){for(var L=H.length;L;)E=33*E^H.charCodeAt(--L);return E},Xb=function(E){return Zm(5381,E)};function Qb(E){for(var H=0;H<E.length;H+=1){var L=E[H];if(qm(L)&&!ny(L))return!1}return!0}var IP=Xb("5.3.11"),LP=function(){function E(H,L,le){this.rules=H,this.staticRulesId="",this.isStatic=(le===void 0||le.isStatic)&&Qb(H),this.componentId=L,this.baseHash=Zm(IP,L),this.baseStyle=le,Xm.registerId(L)}return E.prototype.generateAndInjectStyles=function(H,L,le){var Te=this.componentId,Ve=[];if(this.baseStyle&&Ve.push(this.baseStyle.generateAndInjectStyles(H,L,le)),this.isStatic&&!le.hash)if(this.staticRulesId&&L.hasNameForId(Te,this.staticRulesId))Ve.push(this.staticRulesId);else{var st=mm(this.rules,H,L,le).join(""),Tt=P0(Zm(this.baseHash,st)>>>0);if(!L.hasNameForId(Te,Tt)){var je=le(st,"."+Tt,void 0,Te);L.insertRules(Te,Tt,je)}Ve.push(Tt),this.staticRulesId=Tt}else{for(var be=this.rules.length,K=Zm(this.baseHash,le.hash),se="",B=0;B<be;B++){var Fe=this.rules[B];if(typeof Fe=="string")se+=Fe;else if(Fe){var Be=mm(Fe,H,L,le),ce=Array.isArray(Be)?Be.join(""):Be;K=Zm(K,ce+B),se+=ce}}if(se){var me=P0(K>>>0);if(!L.hasNameForId(Te,me)){var we=le(se,"."+me,void 0,Te);L.insertRules(Te,me,we)}Ve.push(me)}}return Ve.join(" ")},E}(),BP=/^\s*\/\/.*$/gm,RP=[":","[",".","#"];function Jb(E){var H,L,le,Te,Ve=E===void 0?Rg:E,st=Ve.options,Tt=st===void 0?Rg:st,je=Ve.plugins,be=je===void 0?Y_:je,K=new fP(Tt),se=[],B=function(ce){function me(we){if(we)try{ce(we+"}")}catch{}}return function(we,ae,De,Pe,Se,ee,Qe,wt,Dt,at){switch(we){case 1:if(Dt===0&&ae.charCodeAt(0)===64)return ce(ae+";"),"";break;case 2:if(wt===0)return ae+"/*|*/";break;case 3:switch(wt){case 102:case 112:return ce(De[0]+ae),"";default:return ae+(at===0?"/*|*/":"")}case-2:ae.split("/*|*/}").forEach(me)}}}(function(ce){se.push(ce)}),Fe=function(ce,me,we){return me===0&&RP.indexOf(we[L.length])!==-1||we.match(Te)?ce:"."+H};function Be(ce,me,we,ae){ae===void 0&&(ae="&");var De=ce.replace(BP,""),Pe=me&&we?we+" "+me+" { "+De+" }":De;return H=ae,L=me,le=new RegExp("\\"+L+"\\b","g"),Te=new RegExp("(\\"+L+"\\b){2,}"),K(we||!me?"":me,Pe)}return K.use([].concat(be,[function(ce,me,we){ce===2&&we.length&&we[0].lastIndexOf(L)>0&&(we[0]=we[0].replace(le,Fe))},B,function(ce){if(ce===-2){var me=se;return se=[],me}}])),Be.hash=be.length?be.reduce(function(ce,me){return me.name||Cd(15),Zm(ce,me.name)},5381).toString():"",Be}var ry=Ia.createContext(),NP=ry.Consumer,q0=Ia.createContext(),e1=(q0.Consumer,new Xm),O0=Jb();function X0(){return hn.useContext(ry)||e1}function t1(){return hn.useContext(q0)||O0}function n1(E){var H=hn.useState(E.stylisPlugins),L=H[0],le=H[1],Te=X0(),Ve=hn.useMemo(function(){var Tt=Te;return E.sheet?Tt=E.sheet:E.target&&(Tt=Tt.reconstructWithOptions({target:E.target},!1)),E.disableCSSOMInjection&&(Tt=Tt.reconstructWithOptions({useCSSOMInjection:!1})),Tt},[E.disableCSSOMInjection,E.sheet,E.target]),st=hn.useMemo(function(){return Jb({options:{prefix:!E.disableVendorPrefixes},plugins:L})},[E.disableVendorPrefixes,L]);return hn.useEffect(function(){hP(L,E.stylisPlugins)||le(E.stylisPlugins)},[E.stylisPlugins]),Ia.createElement(ry.Provider,{value:Ve},Ia.createElement(q0.Provider,{value:st},E.children))}var r1=function(){function E(H,L){var le=this;this.inject=function(Te,Ve){Ve===void 0&&(Ve=O0);var st=le.name+Ve.hash;Te.hasNameForId(le.id,st)||Te.insertRules(le.id,st,Ve(le.rules,st,"@keyframes"))},this.toString=function(){return Cd(12,String(le.name))},this.name=H,this.id="sc-keyframes-"+H,this.rules=L}return E.prototype.getName=function(H){return H===void 0&&(H=O0),this.name+H.hash},E}(),FP=/([A-Z])/,zP=/([A-Z])/g,UP=/^ms-/,jP=function(E){return"-"+E.toLowerCase()};function pb(E){return FP.test(E)?E.replace(zP,jP).replace(UP,"-ms-"):E}var gb=function(E){return E==null||E===!1||E===""};function mm(E,H,L,le){if(Array.isArray(E)){for(var Te,Ve=[],st=0,Tt=E.length;st<Tt;st+=1)(Te=mm(E[st],H,L,le))!==""&&(Array.isArray(Te)?Ve.push.apply(Ve,Te):Ve.push(Te));return Ve}if(gb(E))return"";if(ny(E))return"."+E.styledComponentId;if(qm(E)){if(typeof(be=E)!="function"||be.prototype&&be.prototype.isReactComponent||!H)return E;var je=E(H);return mm(je,H,L,le)}var be;return E instanceof r1?L?(E.inject(L,le),E.getName(le)):E:E0(E)?function K(se,B){var Fe,Be,ce=[];for(var me in se)se.hasOwnProperty(me)&&!gb(se[me])&&(Array.isArray(se[me])&&se[me].isCss||qm(se[me])?ce.push(pb(me)+":",se[me],";"):E0(se[me])?ce.push.apply(ce,K(se[me],me)):ce.push(pb(me)+": "+(Fe=me,(Be=se[me])==null||typeof Be=="boolean"||Be===""?"":typeof Be!="number"||Be===0||Fe in dP||Fe.startsWith("--")?String(Be).trim():Be+"px")+";"));return B?[B+" {"].concat(ce,["}"]):ce}(E):E.toString()}var mb=function(E){return Array.isArray(E)&&(E.isCss=!0),E};function iy(E){for(var H=arguments.length,L=new Array(H>1?H-1:0),le=1;le<H;le++)L[le-1]=arguments[le];return qm(E)||E0(E)?mb(mm(hb(Y_,[E].concat(L)))):L.length===0&&E.length===1&&typeof E[0]=="string"?E:mb(mm(hb(E,L)))}var Q0=function(E,H,L){return L===void 0&&(L=Rg),E.theme!==L.theme&&E.theme||H||L.theme},VP=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,HP=/(^-|-$)/g;function f0(E){return E.replace(VP,"-").replace(HP,"")}var J0=function(E){return P0(Xb(E)>>>0)};function M_(E){return typeof E=="string"&&!0}var k0=function(E){return typeof E=="function"||typeof E=="object"&&E!==null&&!Array.isArray(E)},WP=function(E){return E!=="__proto__"&&E!=="constructor"&&E!=="prototype"};function GP(E,H,L){var le=E[L];k0(H)&&k0(le)?i1(le,H):E[L]=H}function i1(E){for(var H=arguments.length,L=new Array(H>1?H-1:0),le=1;le<H;le++)L[le-1]=arguments[le];for(var Te=0,Ve=L;Te<Ve.length;Te++){var st=Ve[Te];if(k0(st))for(var Tt in st)WP(Tt)&&GP(E,st[Tt],Tt)}return E}var Fg=Ia.createContext(),YP=Fg.Consumer;function ZP(E){var H=hn.useContext(Fg),L=hn.useMemo(function(){return function(le,Te){if(!le)return Cd(14);if(qm(le)){var Ve=le(Te);return Ve}return Array.isArray(le)||typeof le!="object"?Cd(8):Te?rf({},Te,{},le):le}(E.theme,H)},[E.theme,H]);return E.children?Ia.createElement(Fg.Provider,{value:L},E.children):null}var d0={};function s1(E,H,L){var le=ny(E),Te=!M_(E),Ve=H.attrs,st=Ve===void 0?Y_:Ve,Tt=H.componentId,je=Tt===void 0?function(ae,De){var Pe=typeof ae!="string"?"sc":f0(ae);d0[Pe]=(d0[Pe]||0)+1;var Se=Pe+"-"+J0("5.3.11"+Pe+d0[Pe]);return De?De+"-"+Se:Se}(H.displayName,H.parentComponentId):Tt,be=H.displayName,K=be===void 0?function(ae){return M_(ae)?"styled."+ae:"Styled("+T0(ae)+")"}(E):be,se=H.displayName&&H.componentId?f0(H.displayName)+"-"+H.componentId:H.componentId||je,B=le&&E.attrs?Array.prototype.concat(E.attrs,st).filter(Boolean):st,Fe=H.shouldForwardProp;le&&E.shouldForwardProp&&(Fe=H.shouldForwardProp?function(ae,De,Pe){return E.shouldForwardProp(ae,De,Pe)&&H.shouldForwardProp(ae,De,Pe)}:E.shouldForwardProp);var Be,ce=new LP(L,se,le?E.componentStyle:void 0),me=ce.isStatic&&st.length===0,we=function(ae,De){return function(Pe,Se,ee,Qe){var wt=Pe.attrs,Dt=Pe.componentStyle,at=Pe.defaultProps,Ne=Pe.foldedComponentIds,Je=Pe.shouldForwardProp,pt=Pe.styledComponentId,ot=Pe.target,Jt=function(sn,lt,Zt){sn===void 0&&(sn=Rg);var zt=rf({},lt,{theme:sn}),Le={};return Zt.forEach(function(Mt){var Rt,tt,We,C=Mt;for(Rt in qm(C)&&(C=C(zt)),C)zt[Rt]=Le[Rt]=Rt==="className"?(tt=Le[Rt],We=C[Rt],tt&&We?tt+" "+We:tt||We):C[Rt]}),[zt,Le]}(Q0(Se,hn.useContext(Fg),at)||Rg,Se,wt),Qt=Jt[0],ut=Jt[1],St=function(sn,lt,Zt,zt){var Le=X0(),Mt=t1(),Rt=lt?sn.generateAndInjectStyles(Rg,Le,Mt):sn.generateAndInjectStyles(Zt,Le,Mt);return Rt}(Dt,Qe,Qt),Lt=ee,Ue=ut.$as||Se.$as||ut.as||Se.as||ot,Ut=M_(Ue),Ot=ut!==Se?rf({},Se,{},ut):Se,rn={};for(var $t in Ot)$t[0]!=="$"&&$t!=="as"&&($t==="forwardedAs"?rn.as=Ot[$t]:(Je?Je($t,ub,Ue):!Ut||ub($t))&&(rn[$t]=Ot[$t]));return Se.style&&ut.style!==Se.style&&(rn.style=rf({},Se.style,{},ut.style)),rn.className=Array.prototype.concat(Ne,pt,St!==pt?St:null,Se.className,ut.className).filter(Boolean).join(" "),rn.ref=Lt,hn.createElement(Ue,rn)}(Be,ae,De,me)};return we.displayName=K,(Be=Ia.forwardRef(we)).attrs=B,Be.componentStyle=ce,Be.displayName=K,Be.shouldForwardProp=Fe,Be.foldedComponentIds=le?Array.prototype.concat(E.foldedComponentIds,E.styledComponentId):Y_,Be.styledComponentId=se,Be.target=le?E.target:E,Be.withComponent=function(ae){var De=H.componentId,Pe=function(ee,Qe){if(ee==null)return{};var wt,Dt,at={},Ne=Object.keys(ee);for(Dt=0;Dt<Ne.length;Dt++)wt=Ne[Dt],Qe.indexOf(wt)>=0||(at[wt]=ee[wt]);return at}(H,["componentId"]),Se=De&&De+"-"+(M_(ae)?ae:f0(T0(ae)));return s1(ae,rf({},Pe,{attrs:B,componentId:Se}),L)},Object.defineProperty(Be,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(ae){this._foldedDefaultProps=le?i1({},E.defaultProps,ae):ae}}),Object.defineProperty(Be,"toString",{value:function(){return"."+Be.styledComponentId}}),Te&&Kb(Be,E,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),Be}var I0=function(E){return function H(L,le,Te){if(Te===void 0&&(Te=Rg),!$b.isValidElementType(le))return Cd(1,String(le));var Ve=function(){return L(le,Te,iy.apply(void 0,arguments))};return Ve.withConfig=function(st){return H(L,le,rf({},Te,{},st))},Ve.attrs=function(st){return H(L,le,rf({},Te,{attrs:Array.prototype.concat(Te.attrs,st).filter(Boolean)}))},Ve}(s1,E)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(E){I0[E]=I0(E)});var $P=function(){function E(L,le){this.rules=L,this.componentId=le,this.isStatic=Qb(L),Xm.registerId(this.componentId+1)}var H=E.prototype;return H.createStyles=function(L,le,Te,Ve){var st=Ve(mm(this.rules,le,Te,Ve).join(""),""),Tt=this.componentId+L;Te.insertRules(Tt,Tt,st)},H.removeStyles=function(L,le){le.clearRules(this.componentId+L)},H.renderStyles=function(L,le,Te,Ve){L>2&&Xm.registerId(this.componentId+L),this.removeStyles(L,Te),this.createStyles(L,le,Te,Ve)},E}();function KP(E){for(var H=arguments.length,L=new Array(H>1?H-1:0),le=1;le<H;le++)L[le-1]=arguments[le];var Te=iy.apply(void 0,[E].concat(L)),Ve="sc-global-"+J0(JSON.stringify(Te)),st=new $P(Te,Ve);function Tt(be){var K=X0(),se=t1(),B=hn.useContext(Fg),Fe=hn.useRef(K.allocateGSInstance(Ve)).current;return K.server&&je(Fe,be,K,B,se),hn.useLayoutEffect(function(){if(!K.server)return je(Fe,be,K,B,se),function(){return st.removeStyles(Fe,K)}},[Fe,be,K,B,se]),null}function je(be,K,se,B,Fe){if(st.isStatic)st.renderStyles(be,wP,se,Fe);else{var Be=rf({},K,{theme:Q0(K,B,Tt.defaultProps)});st.renderStyles(be,Be,se,Fe)}}return Ia.memo(Tt)}function qP(E){for(var H=arguments.length,L=new Array(H>1?H-1:0),le=1;le<H;le++)L[le-1]=arguments[le];var Te=iy.apply(void 0,[E].concat(L)).join(""),Ve=J0(Te);return new r1(Ve,Te)}var XP=function(){function E(){var L=this;this._emitSheetCSS=function(){var le=L.instance.toString();if(!le)return"";var Te=M0();return"<style "+[Te&&'nonce="'+Te+'"',Ng+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+le+"</style>"},this.getStyleTags=function(){return L.sealed?Cd(2):L._emitSheetCSS()},this.getStyleElement=function(){var le;if(L.sealed)return Cd(2);var Te=((le={})[Ng]="",le["data-styled-version"]="5.3.11",le.dangerouslySetInnerHTML={__html:L.instance.toString()},le),Ve=M0();return Ve&&(Te.nonce=Ve),[Ia.createElement("style",rf({},Te,{key:"sc-0-0"}))]},this.seal=function(){L.sealed=!0},this.instance=new Xm({isServer:!0}),this.sealed=!1}var H=E.prototype;return H.collectStyles=function(L){return this.sealed?Cd(2):Ia.createElement(n1,{sheet:this.instance},L)},H.interleaveWithNodeStream=function(L){return Cd(3)},E}(),QP=function(E){var H=Ia.forwardRef(function(L,le){var Te=hn.useContext(Fg),Ve=E.defaultProps,st=Q0(L,Te,Ve);return Ia.createElement(E,rf({},L,{theme:st,ref:le}))});return Kb(H,E),H.displayName="WithTheme("+T0(E)+")",H},JP=function(){return hn.useContext(Fg)},eO={StyleSheet:Xm,masterSheet:e1};const tO=Object.freeze(Object.defineProperty({__proto__:null,ServerStyleSheet:XP,StyleSheetConsumer:NP,StyleSheetContext:ry,StyleSheetManager:n1,ThemeConsumer:YP,ThemeContext:Fg,ThemeProvider:ZP,__PRIVATE__:eO,createGlobalStyle:KP,css:iy,default:I0,isStyledComponent:ny,keyframes:qP,useTheme:JP,version:_P,withTheme:QP},Symbol.toStringTag,{value:"Module"})),nO=XM(tO);var Xv={exports:{}},rO=Xv.exports,vb;function iO(){return vb||(vb=1,function(E,H){(function(L,le){le(H)})(rO,function(L){var le=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],Te=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Ve="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",st="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Tt={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},je="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",be={5:je,"5module":je+" export import",6:je+" const class extends export import super"},K=/^in(stanceof)?$/,se=new RegExp("["+st+"]"),B=new RegExp("["+st+Ve+"]");function Fe(w,ne){for(var it=65536,kt=0;kt<ne.length;kt+=2){if(it+=ne[kt],it>w)return!1;if(it+=ne[kt+1],it>=w)return!0}return!1}function Be(w,ne){return w<65?w===36:w<91?!0:w<97?w===95:w<123?!0:w<=65535?w>=170&&se.test(String.fromCharCode(w)):ne===!1?!1:Fe(w,Te)}function ce(w,ne){return w<48?w===36:w<58?!0:w<65?!1:w<91?!0:w<97?w===95:w<123?!0:w<=65535?w>=170&&B.test(String.fromCharCode(w)):ne===!1?!1:Fe(w,Te)||Fe(w,le)}var me=function(ne,it){it===void 0&&(it={}),this.label=ne,this.keyword=it.keyword,this.beforeExpr=!!it.beforeExpr,this.startsExpr=!!it.startsExpr,this.isLoop=!!it.isLoop,this.isAssign=!!it.isAssign,this.prefix=!!it.prefix,this.postfix=!!it.postfix,this.binop=it.binop||null,this.updateContext=null};function we(w,ne){return new me(w,{beforeExpr:!0,binop:ne})}var ae={beforeExpr:!0},De={startsExpr:!0},Pe={};function Se(w,ne){return ne===void 0&&(ne={}),ne.keyword=w,Pe[w]=new me(w,ne)}var ee={num:new me("num",De),regexp:new me("regexp",De),string:new me("string",De),name:new me("name",De),privateId:new me("privateId",De),eof:new me("eof"),bracketL:new me("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new me("]"),braceL:new me("{",{beforeExpr:!0,startsExpr:!0}),braceR:new me("}"),parenL:new me("(",{beforeExpr:!0,startsExpr:!0}),parenR:new me(")"),comma:new me(",",ae),semi:new me(";",ae),colon:new me(":",ae),dot:new me("."),question:new me("?",ae),questionDot:new me("?."),arrow:new me("=>",ae),template:new me("template"),invalidTemplate:new me("invalidTemplate"),ellipsis:new me("...",ae),backQuote:new me("`",De),dollarBraceL:new me("${",{beforeExpr:!0,startsExpr:!0}),eq:new me("=",{beforeExpr:!0,isAssign:!0}),assign:new me("_=",{beforeExpr:!0,isAssign:!0}),incDec:new me("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new me("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:we("||",1),logicalAND:we("&&",2),bitwiseOR:we("|",3),bitwiseXOR:we("^",4),bitwiseAND:we("&",5),equality:we("==/!=/===/!==",6),relational:we("</>/<=/>=",7),bitShift:we("<</>>/>>>",8),plusMin:new me("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:we("%",10),star:we("*",10),slash:we("/",10),starstar:new me("**",{beforeExpr:!0}),coalesce:we("??",1),_break:Se("break"),_case:Se("case",ae),_catch:Se("catch"),_continue:Se("continue"),_debugger:Se("debugger"),_default:Se("default",ae),_do:Se("do",{isLoop:!0,beforeExpr:!0}),_else:Se("else",ae),_finally:Se("finally"),_for:Se("for",{isLoop:!0}),_function:Se("function",De),_if:Se("if"),_return:Se("return",ae),_switch:Se("switch"),_throw:Se("throw",ae),_try:Se("try"),_var:Se("var"),_const:Se("const"),_while:Se("while",{isLoop:!0}),_with:Se("with"),_new:Se("new",{beforeExpr:!0,startsExpr:!0}),_this:Se("this",De),_super:Se("super",De),_class:Se("class",De),_extends:Se("extends",ae),_export:Se("export"),_import:Se("import",De),_null:Se("null",De),_true:Se("true",De),_false:Se("false",De),_in:Se("in",{beforeExpr:!0,binop:7}),_instanceof:Se("instanceof",{beforeExpr:!0,binop:7}),_typeof:Se("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Se("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Se("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Qe=/\r\n?|\n|\u2028|\u2029/,wt=new RegExp(Qe.source,"g");function Dt(w){return w===10||w===13||w===8232||w===8233}function at(w,ne,it){it===void 0&&(it=w.length);for(var kt=ne;kt<it;kt++){var mn=w.charCodeAt(kt);if(Dt(mn))return kt<it-1&&mn===13&&w.charCodeAt(kt+1)===10?kt+2:kt+1}return-1}var Ne=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Je=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,pt=Object.prototype,ot=pt.hasOwnProperty,Jt=pt.toString,Qt=Object.hasOwn||function(w,ne){return ot.call(w,ne)},ut=Array.isArray||function(w){return Jt.call(w)==="[object Array]"},St=Object.create(null);function Lt(w){return St[w]||(St[w]=new RegExp("^(?:"+w.replace(/ /g,"|")+")$"))}function Ue(w){return w<=65535?String.fromCharCode(w):(w-=65536,String.fromCharCode((w>>10)+55296,(w&1023)+56320))}var Ut=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Ot=function(ne,it){this.line=ne,this.column=it};Ot.prototype.offset=function(ne){return new Ot(this.line,this.column+ne)};var rn=function(ne,it,kt){this.start=it,this.end=kt,ne.sourceFile!==null&&(this.source=ne.sourceFile)};function $t(w,ne){for(var it=1,kt=0;;){var mn=at(w,kt,ne);if(mn<0)return new Ot(it,ne-kt);++it,kt=mn}}var sn={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},lt=!1;function Zt(w){var ne={};for(var it in sn)ne[it]=w&&Qt(w,it)?w[it]:sn[it];if(ne.ecmaVersion==="latest"?ne.ecmaVersion=1e8:ne.ecmaVersion==null?(!lt&&typeof console=="object"&&console.warn&&(lt=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),ne.ecmaVersion=11):ne.ecmaVersion>=2015&&(ne.ecmaVersion-=2009),ne.allowReserved==null&&(ne.allowReserved=ne.ecmaVersion<5),(!w||w.allowHashBang==null)&&(ne.allowHashBang=ne.ecmaVersion>=14),ut(ne.onToken)){var kt=ne.onToken;ne.onToken=function(mn){return kt.push(mn)}}return ut(ne.onComment)&&(ne.onComment=zt(ne,ne.onComment)),ne}function zt(w,ne){return function(it,kt,mn,er,gr,ni){var li={type:it?"Block":"Line",value:kt,start:mn,end:er};w.locations&&(li.loc=new rn(this,gr,ni)),w.ranges&&(li.range=[mn,er]),ne.push(li)}}var Le=1,Mt=2,Rt=4,tt=8,We=16,C=32,U=64,Q=128,fe=256,de=512,Ce=Le|Mt|fe;function Ye(w,ne){return Mt|(w?Rt:0)|(ne?tt:0)}var Ke=0,ct=1,_t=2,qe=3,ht=4,Pt=5,xt=function(ne,it,kt){this.options=ne=Zt(ne),this.sourceFile=ne.sourceFile,this.keywords=Lt(be[ne.ecmaVersion>=6?6:ne.sourceType==="module"?"5module":5]);var mn="";ne.allowReserved!==!0&&(mn=Tt[ne.ecmaVersion>=6?6:ne.ecmaVersion===5?5:3],ne.sourceType==="module"&&(mn+=" await")),this.reservedWords=Lt(mn);var er=(mn?mn+" ":"")+Tt.strict;this.reservedWordsStrict=Lt(er),this.reservedWordsStrictBind=Lt(er+" "+Tt.strictBind),this.input=String(it),this.containsEsc=!1,kt?(this.pos=kt,this.lineStart=this.input.lastIndexOf(`
`,kt-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Qe).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=ee.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=ne.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&ne.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Le),this.regexpState=null,this.privateNameStack=[]},Ge={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};xt.prototype.parse=function(){var ne=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(ne)},Ge.inFunction.get=function(){return(this.currentVarScope().flags&Mt)>0},Ge.inGenerator.get=function(){return(this.currentVarScope().flags&tt)>0},Ge.inAsync.get=function(){return(this.currentVarScope().flags&Rt)>0},Ge.canAwait.get=function(){for(var w=this.scopeStack.length-1;w>=0;w--){var ne=this.scopeStack[w],it=ne.flags;if(it&(fe|de))return!1;if(it&Mt)return(it&Rt)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},Ge.allowSuper.get=function(){var w=this.currentThisScope(),ne=w.flags;return(ne&U)>0||this.options.allowSuperOutsideMethod},Ge.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Q)>0},Ge.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},Ge.allowNewDotTarget.get=function(){for(var w=this.scopeStack.length-1;w>=0;w--){var ne=this.scopeStack[w],it=ne.flags;if(it&(fe|de)||it&Mt&&!(it&We))return!0}return!1},Ge.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&fe)>0},xt.extend=function(){for(var ne=[],it=arguments.length;it--;)ne[it]=arguments[it];for(var kt=this,mn=0;mn<ne.length;mn++)kt=ne[mn](kt);return kt},xt.parse=function(ne,it){return new this(it,ne).parse()},xt.parseExpressionAt=function(ne,it,kt){var mn=new this(kt,ne,it);return mn.nextToken(),mn.parseExpression()},xt.tokenizer=function(ne,it){return new this(it,ne)},Object.defineProperties(xt.prototype,Ge);var en=xt.prototype,bt=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;en.strictDirective=function(w){if(this.options.ecmaVersion<5)return!1;for(;;){Je.lastIndex=w,w+=Je.exec(this.input)[0].length;var ne=bt.exec(this.input.slice(w));if(!ne)return!1;if((ne[1]||ne[2])==="use strict"){Je.lastIndex=w+ne[0].length;var it=Je.exec(this.input),kt=it.index+it[0].length,mn=this.input.charAt(kt);return mn===";"||mn==="}"||Qe.test(it[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(mn)||mn==="!"&&this.input.charAt(kt+1)==="=")}w+=ne[0].length,Je.lastIndex=w,w+=Je.exec(this.input)[0].length,this.input[w]===";"&&w++}},en.eat=function(w){return this.type===w?(this.next(),!0):!1},en.isContextual=function(w){return this.type===ee.name&&this.value===w&&!this.containsEsc},en.eatContextual=function(w){return this.isContextual(w)?(this.next(),!0):!1},en.expectContextual=function(w){this.eatContextual(w)||this.unexpected()},en.canInsertSemicolon=function(){return this.type===ee.eof||this.type===ee.braceR||Qe.test(this.input.slice(this.lastTokEnd,this.start))},en.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},en.semicolon=function(){!this.eat(ee.semi)&&!this.insertSemicolon()&&this.unexpected()},en.afterTrailingComma=function(w,ne){if(this.type===w)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),ne||this.next(),!0},en.expect=function(w){this.eat(w)||this.unexpected()},en.unexpected=function(w){this.raise(w??this.start,"Unexpected token")};var Vt=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};en.checkPatternErrors=function(w,ne){if(w){w.trailingComma>-1&&this.raiseRecoverable(w.trailingComma,"Comma is not permitted after the rest element");var it=ne?w.parenthesizedAssign:w.parenthesizedBind;it>-1&&this.raiseRecoverable(it,ne?"Assigning to rvalue":"Parenthesized pattern")}},en.checkExpressionErrors=function(w,ne){if(!w)return!1;var it=w.shorthandAssign,kt=w.doubleProto;if(!ne)return it>=0||kt>=0;it>=0&&this.raise(it,"Shorthand property assignments are valid only in destructuring patterns"),kt>=0&&this.raiseRecoverable(kt,"Redefinition of __proto__ property")},en.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},en.isSimpleAssignTarget=function(w){return w.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(w.expression):w.type==="Identifier"||w.type==="MemberExpression"};var _n=xt.prototype;_n.parseTopLevel=function(w){var ne=Object.create(null);for(w.body||(w.body=[]);this.type!==ee.eof;){var it=this.parseStatement(null,!0,ne);w.body.push(it)}if(this.inModule)for(var kt=0,mn=Object.keys(this.undefinedExports);kt<mn.length;kt+=1){var er=mn[kt];this.raiseRecoverable(this.undefinedExports[er].start,"Export '"+er+"' is not defined")}return this.adaptDirectivePrologue(w.body),this.next(),w.sourceType=this.options.sourceType,this.finishNode(w,"Program")};var Yn={kind:"loop"},or={kind:"switch"};_n.isLet=function(w){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Je.lastIndex=this.pos;var ne=Je.exec(this.input),it=this.pos+ne[0].length,kt=this.input.charCodeAt(it);if(kt===91||kt===92)return!0;if(w)return!1;if(kt===123||kt>55295&&kt<56320)return!0;if(Be(kt,!0)){for(var mn=it+1;ce(kt=this.input.charCodeAt(mn),!0);)++mn;if(kt===92||kt>55295&&kt<56320)return!0;var er=this.input.slice(it,mn);if(!K.test(er))return!0}return!1},_n.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Je.lastIndex=this.pos;var w=Je.exec(this.input),ne=this.pos+w[0].length,it;return!Qe.test(this.input.slice(this.pos,ne))&&this.input.slice(ne,ne+8)==="function"&&(ne+8===this.input.length||!(ce(it=this.input.charCodeAt(ne+8))||it>55295&&it<56320))},_n.parseStatement=function(w,ne,it){var kt=this.type,mn=this.startNode(),er;switch(this.isLet(w)&&(kt=ee._var,er="let"),kt){case ee._break:case ee._continue:return this.parseBreakContinueStatement(mn,kt.keyword);case ee._debugger:return this.parseDebuggerStatement(mn);case ee._do:return this.parseDoStatement(mn);case ee._for:return this.parseForStatement(mn);case ee._function:return w&&(this.strict||w!=="if"&&w!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(mn,!1,!w);case ee._class:return w&&this.unexpected(),this.parseClass(mn,!0);case ee._if:return this.parseIfStatement(mn);case ee._return:return this.parseReturnStatement(mn);case ee._switch:return this.parseSwitchStatement(mn);case ee._throw:return this.parseThrowStatement(mn);case ee._try:return this.parseTryStatement(mn);case ee._const:case ee._var:return er=er||this.value,w&&er!=="var"&&this.unexpected(),this.parseVarStatement(mn,er);case ee._while:return this.parseWhileStatement(mn);case ee._with:return this.parseWithStatement(mn);case ee.braceL:return this.parseBlock(!0,mn);case ee.semi:return this.parseEmptyStatement(mn);case ee._export:case ee._import:if(this.options.ecmaVersion>10&&kt===ee._import){Je.lastIndex=this.pos;var gr=Je.exec(this.input),ni=this.pos+gr[0].length,li=this.input.charCodeAt(ni);if(li===40||li===46)return this.parseExpressionStatement(mn,this.parseExpression())}return this.options.allowImportExportEverywhere||(ne||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),kt===ee._import?this.parseImport(mn):this.parseExport(mn,it);default:if(this.isAsyncFunction())return w&&this.unexpected(),this.next(),this.parseFunctionStatement(mn,!0,!w);var os=this.value,Xi=this.parseExpression();return kt===ee.name&&Xi.type==="Identifier"&&this.eat(ee.colon)?this.parseLabeledStatement(mn,os,Xi,w):this.parseExpressionStatement(mn,Xi)}},_n.parseBreakContinueStatement=function(w,ne){var it=ne==="break";this.next(),this.eat(ee.semi)||this.insertSemicolon()?w.label=null:this.type!==ee.name?this.unexpected():(w.label=this.parseIdent(),this.semicolon());for(var kt=0;kt<this.labels.length;++kt){var mn=this.labels[kt];if((w.label==null||mn.name===w.label.name)&&(mn.kind!=null&&(it||mn.kind==="loop")||w.label&&it))break}return kt===this.labels.length&&this.raise(w.start,"Unsyntactic "+ne),this.finishNode(w,it?"BreakStatement":"ContinueStatement")},_n.parseDebuggerStatement=function(w){return this.next(),this.semicolon(),this.finishNode(w,"DebuggerStatement")},_n.parseDoStatement=function(w){return this.next(),this.labels.push(Yn),w.body=this.parseStatement("do"),this.labels.pop(),this.expect(ee._while),w.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(ee.semi):this.semicolon(),this.finishNode(w,"DoWhileStatement")},_n.parseForStatement=function(w){this.next();var ne=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Yn),this.enterScope(0),this.expect(ee.parenL),this.type===ee.semi)return ne>-1&&this.unexpected(ne),this.parseFor(w,null);var it=this.isLet();if(this.type===ee._var||this.type===ee._const||it){var kt=this.startNode(),mn=it?"let":this.value;return this.next(),this.parseVar(kt,!0,mn),this.finishNode(kt,"VariableDeclaration"),(this.type===ee._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&kt.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===ee._in?ne>-1&&this.unexpected(ne):w.await=ne>-1),this.parseForIn(w,kt)):(ne>-1&&this.unexpected(ne),this.parseFor(w,kt))}var er=this.isContextual("let"),gr=!1,ni=this.containsEsc,li=new Vt,os=this.start,Xi=ne>-1?this.parseExprSubscripts(li,"await"):this.parseExpression(!0,li);return this.type===ee._in||(gr=this.options.ecmaVersion>=6&&this.isContextual("of"))?(ne>-1?(this.type===ee._in&&this.unexpected(ne),w.await=!0):gr&&this.options.ecmaVersion>=8&&(Xi.start===os&&!ni&&Xi.type==="Identifier"&&Xi.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(w.await=!1)),er&&gr&&this.raise(Xi.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Xi,!1,li),this.checkLValPattern(Xi),this.parseForIn(w,Xi)):(this.checkExpressionErrors(li,!0),ne>-1&&this.unexpected(ne),this.parseFor(w,Xi))},_n.parseFunctionStatement=function(w,ne,it){return this.next(),this.parseFunction(w,Jn|(it?0:$n),!1,ne)},_n.parseIfStatement=function(w){return this.next(),w.test=this.parseParenExpression(),w.consequent=this.parseStatement("if"),w.alternate=this.eat(ee._else)?this.parseStatement("if"):null,this.finishNode(w,"IfStatement")},_n.parseReturnStatement=function(w){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(ee.semi)||this.insertSemicolon()?w.argument=null:(w.argument=this.parseExpression(),this.semicolon()),this.finishNode(w,"ReturnStatement")},_n.parseSwitchStatement=function(w){this.next(),w.discriminant=this.parseParenExpression(),w.cases=[],this.expect(ee.braceL),this.labels.push(or),this.enterScope(0);for(var ne,it=!1;this.type!==ee.braceR;)if(this.type===ee._case||this.type===ee._default){var kt=this.type===ee._case;ne&&this.finishNode(ne,"SwitchCase"),w.cases.push(ne=this.startNode()),ne.consequent=[],this.next(),kt?ne.test=this.parseExpression():(it&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),it=!0,ne.test=null),this.expect(ee.colon)}else ne||this.unexpected(),ne.consequent.push(this.parseStatement(null));return this.exitScope(),ne&&this.finishNode(ne,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(w,"SwitchStatement")},_n.parseThrowStatement=function(w){return this.next(),Qe.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),w.argument=this.parseExpression(),this.semicolon(),this.finishNode(w,"ThrowStatement")};var lr=[];_n.parseCatchClauseParam=function(){var w=this.parseBindingAtom(),ne=w.type==="Identifier";return this.enterScope(ne?C:0),this.checkLValPattern(w,ne?ht:_t),this.expect(ee.parenR),w},_n.parseTryStatement=function(w){if(this.next(),w.block=this.parseBlock(),w.handler=null,this.type===ee._catch){var ne=this.startNode();this.next(),this.eat(ee.parenL)?ne.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),ne.param=null,this.enterScope(0)),ne.body=this.parseBlock(!1),this.exitScope(),w.handler=this.finishNode(ne,"CatchClause")}return w.finalizer=this.eat(ee._finally)?this.parseBlock():null,!w.handler&&!w.finalizer&&this.raise(w.start,"Missing catch or finally clause"),this.finishNode(w,"TryStatement")},_n.parseVarStatement=function(w,ne,it){return this.next(),this.parseVar(w,!1,ne,it),this.semicolon(),this.finishNode(w,"VariableDeclaration")},_n.parseWhileStatement=function(w){return this.next(),w.test=this.parseParenExpression(),this.labels.push(Yn),w.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(w,"WhileStatement")},_n.parseWithStatement=function(w){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),w.object=this.parseParenExpression(),w.body=this.parseStatement("with"),this.finishNode(w,"WithStatement")},_n.parseEmptyStatement=function(w){return this.next(),this.finishNode(w,"EmptyStatement")},_n.parseLabeledStatement=function(w,ne,it,kt){for(var mn=0,er=this.labels;mn<er.length;mn+=1){var gr=er[mn];gr.name===ne&&this.raise(it.start,"Label '"+ne+"' is already declared")}for(var ni=this.type.isLoop?"loop":this.type===ee._switch?"switch":null,li=this.labels.length-1;li>=0;li--){var os=this.labels[li];if(os.statementStart===w.start)os.statementStart=this.start,os.kind=ni;else break}return this.labels.push({name:ne,kind:ni,statementStart:this.start}),w.body=this.parseStatement(kt?kt.indexOf("label")===-1?kt+"label":kt:"label"),this.labels.pop(),w.label=it,this.finishNode(w,"LabeledStatement")},_n.parseExpressionStatement=function(w,ne){return w.expression=ne,this.semicolon(),this.finishNode(w,"ExpressionStatement")},_n.parseBlock=function(w,ne,it){for(w===void 0&&(w=!0),ne===void 0&&(ne=this.startNode()),ne.body=[],this.expect(ee.braceL),w&&this.enterScope(0);this.type!==ee.braceR;){var kt=this.parseStatement(null);ne.body.push(kt)}return it&&(this.strict=!1),this.next(),w&&this.exitScope(),this.finishNode(ne,"BlockStatement")},_n.parseFor=function(w,ne){return w.init=ne,this.expect(ee.semi),w.test=this.type===ee.semi?null:this.parseExpression(),this.expect(ee.semi),w.update=this.type===ee.parenR?null:this.parseExpression(),this.expect(ee.parenR),w.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(w,"ForStatement")},_n.parseForIn=function(w,ne){var it=this.type===ee._in;return this.next(),ne.type==="VariableDeclaration"&&ne.declarations[0].init!=null&&(!it||this.options.ecmaVersion<8||this.strict||ne.kind!=="var"||ne.declarations[0].id.type!=="Identifier")&&this.raise(ne.start,(it?"for-in":"for-of")+" loop variable declaration may not have an initializer"),w.left=ne,w.right=it?this.parseExpression():this.parseMaybeAssign(),this.expect(ee.parenR),w.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(w,it?"ForInStatement":"ForOfStatement")},_n.parseVar=function(w,ne,it,kt){for(w.declarations=[],w.kind=it;;){var mn=this.startNode();if(this.parseVarId(mn,it),this.eat(ee.eq)?mn.init=this.parseMaybeAssign(ne):!kt&&it==="const"&&!(this.type===ee._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!kt&&mn.id.type!=="Identifier"&&!(ne&&(this.type===ee._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):mn.init=null,w.declarations.push(this.finishNode(mn,"VariableDeclarator")),!this.eat(ee.comma))break}return w},_n.parseVarId=function(w,ne){w.id=this.parseBindingAtom(),this.checkLValPattern(w.id,ne==="var"?ct:_t,!1)};var Jn=1,$n=2,Tn=4;_n.parseFunction=function(w,ne,it,kt,mn){this.initFunction(w),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!kt)&&(this.type===ee.star&&ne&$n&&this.unexpected(),w.generator=this.eat(ee.star)),this.options.ecmaVersion>=8&&(w.async=!!kt),ne&Jn&&(w.id=ne&Tn&&this.type!==ee.name?null:this.parseIdent(),w.id&&!(ne&$n)&&this.checkLValSimple(w.id,this.strict||w.generator||w.async?this.treatFunctionsAsVar?ct:_t:qe));var er=this.yieldPos,gr=this.awaitPos,ni=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Ye(w.async,w.generator)),ne&Jn||(w.id=this.type===ee.name?this.parseIdent():null),this.parseFunctionParams(w),this.parseFunctionBody(w,it,!1,mn),this.yieldPos=er,this.awaitPos=gr,this.awaitIdentPos=ni,this.finishNode(w,ne&Jn?"FunctionDeclaration":"FunctionExpression")},_n.parseFunctionParams=function(w){this.expect(ee.parenL),w.params=this.parseBindingList(ee.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},_n.parseClass=function(w,ne){this.next();var it=this.strict;this.strict=!0,this.parseClassId(w,ne),this.parseClassSuper(w);var kt=this.enterClassBody(),mn=this.startNode(),er=!1;for(mn.body=[],this.expect(ee.braceL);this.type!==ee.braceR;){var gr=this.parseClassElement(w.superClass!==null);gr&&(mn.body.push(gr),gr.type==="MethodDefinition"&&gr.kind==="constructor"?(er&&this.raiseRecoverable(gr.start,"Duplicate constructor in the same class"),er=!0):gr.key&&gr.key.type==="PrivateIdentifier"&&Gn(kt,gr)&&this.raiseRecoverable(gr.key.start,"Identifier '#"+gr.key.name+"' has already been declared"))}return this.strict=it,this.next(),w.body=this.finishNode(mn,"ClassBody"),this.exitClassBody(),this.finishNode(w,ne?"ClassDeclaration":"ClassExpression")},_n.parseClassElement=function(w){if(this.eat(ee.semi))return null;var ne=this.options.ecmaVersion,it=this.startNode(),kt="",mn=!1,er=!1,gr="method",ni=!1;if(this.eatContextual("static")){if(ne>=13&&this.eat(ee.braceL))return this.parseClassStaticBlock(it),it;this.isClassElementNameStart()||this.type===ee.star?ni=!0:kt="static"}if(it.static=ni,!kt&&ne>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===ee.star)&&!this.canInsertSemicolon()?er=!0:kt="async"),!kt&&(ne>=9||!er)&&this.eat(ee.star)&&(mn=!0),!kt&&!er&&!mn){var li=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?gr=li:kt=li)}if(kt?(it.computed=!1,it.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),it.key.name=kt,this.finishNode(it.key,"Identifier")):this.parseClassElementName(it),ne<13||this.type===ee.parenL||gr!=="method"||mn||er){var os=!it.static&&tr(it,"constructor"),Xi=os&&w;os&&gr!=="method"&&this.raise(it.key.start,"Constructor can't have get/set modifier"),it.kind=os?"constructor":gr,this.parseClassMethod(it,mn,er,Xi)}else this.parseClassField(it);return it},_n.isClassElementNameStart=function(){return this.type===ee.name||this.type===ee.privateId||this.type===ee.num||this.type===ee.string||this.type===ee.bracketL||this.type.keyword},_n.parseClassElementName=function(w){this.type===ee.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),w.computed=!1,w.key=this.parsePrivateIdent()):this.parsePropertyName(w)},_n.parseClassMethod=function(w,ne,it,kt){var mn=w.key;w.kind==="constructor"?(ne&&this.raise(mn.start,"Constructor can't be a generator"),it&&this.raise(mn.start,"Constructor can't be an async method")):w.static&&tr(w,"prototype")&&this.raise(mn.start,"Classes may not have a static property named prototype");var er=w.value=this.parseMethod(ne,it,kt);return w.kind==="get"&&er.params.length!==0&&this.raiseRecoverable(er.start,"getter should have no params"),w.kind==="set"&&er.params.length!==1&&this.raiseRecoverable(er.start,"setter should have exactly one param"),w.kind==="set"&&er.params[0].type==="RestElement"&&this.raiseRecoverable(er.params[0].start,"Setter cannot use rest params"),this.finishNode(w,"MethodDefinition")},_n.parseClassField=function(w){return tr(w,"constructor")?this.raise(w.key.start,"Classes can't have a field named 'constructor'"):w.static&&tr(w,"prototype")&&this.raise(w.key.start,"Classes can't have a static field named 'prototype'"),this.eat(ee.eq)?(this.enterScope(de|U),w.value=this.parseMaybeAssign(),this.exitScope()):w.value=null,this.semicolon(),this.finishNode(w,"PropertyDefinition")},_n.parseClassStaticBlock=function(w){w.body=[];var ne=this.labels;for(this.labels=[],this.enterScope(fe|U);this.type!==ee.braceR;){var it=this.parseStatement(null);w.body.push(it)}return this.next(),this.exitScope(),this.labels=ne,this.finishNode(w,"StaticBlock")},_n.parseClassId=function(w,ne){this.type===ee.name?(w.id=this.parseIdent(),ne&&this.checkLValSimple(w.id,_t,!1)):(ne===!0&&this.unexpected(),w.id=null)},_n.parseClassSuper=function(w){w.superClass=this.eat(ee._extends)?this.parseExprSubscripts(null,!1):null},_n.enterClassBody=function(){var w={declared:Object.create(null),used:[]};return this.privateNameStack.push(w),w.declared},_n.exitClassBody=function(){var w=this.privateNameStack.pop(),ne=w.declared,it=w.used;if(this.options.checkPrivateFields)for(var kt=this.privateNameStack.length,mn=kt===0?null:this.privateNameStack[kt-1],er=0;er<it.length;++er){var gr=it[er];Qt(ne,gr.name)||(mn?mn.used.push(gr):this.raiseRecoverable(gr.start,"Private field '#"+gr.name+"' must be declared in an enclosing class"))}};function Gn(w,ne){var it=ne.key.name,kt=w[it],mn="true";return ne.type==="MethodDefinition"&&(ne.kind==="get"||ne.kind==="set")&&(mn=(ne.static?"s":"i")+ne.kind),kt==="iget"&&mn==="iset"||kt==="iset"&&mn==="iget"||kt==="sget"&&mn==="sset"||kt==="sset"&&mn==="sget"?(w[it]="true",!1):kt?!0:(w[it]=mn,!1)}function tr(w,ne){var it=w.computed,kt=w.key;return!it&&(kt.type==="Identifier"&&kt.name===ne||kt.type==="Literal"&&kt.value===ne)}_n.parseExportAllDeclaration=function(w,ne){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(w.exported=this.parseModuleExportName(),this.checkExport(ne,w.exported,this.lastTokStart)):w.exported=null),this.expectContextual("from"),this.type!==ee.string&&this.unexpected(),w.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(w.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(w,"ExportAllDeclaration")},_n.parseExport=function(w,ne){if(this.next(),this.eat(ee.star))return this.parseExportAllDeclaration(w,ne);if(this.eat(ee._default))return this.checkExport(ne,"default",this.lastTokStart),w.declaration=this.parseExportDefaultDeclaration(),this.finishNode(w,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())w.declaration=this.parseExportDeclaration(w),w.declaration.type==="VariableDeclaration"?this.checkVariableExport(ne,w.declaration.declarations):this.checkExport(ne,w.declaration.id,w.declaration.id.start),w.specifiers=[],w.source=null,this.options.ecmaVersion>=16&&(w.attributes=[]);else{if(w.declaration=null,w.specifiers=this.parseExportSpecifiers(ne),this.eatContextual("from"))this.type!==ee.string&&this.unexpected(),w.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(w.attributes=this.parseWithClause());else{for(var it=0,kt=w.specifiers;it<kt.length;it+=1){var mn=kt[it];this.checkUnreserved(mn.local),this.checkLocalExport(mn.local),mn.local.type==="Literal"&&this.raise(mn.local.start,"A string literal cannot be used as an exported binding without `from`.")}w.source=null,this.options.ecmaVersion>=16&&(w.attributes=[])}this.semicolon()}return this.finishNode(w,"ExportNamedDeclaration")},_n.parseExportDeclaration=function(w){return this.parseStatement(null)},_n.parseExportDefaultDeclaration=function(){var w;if(this.type===ee._function||(w=this.isAsyncFunction())){var ne=this.startNode();return this.next(),w&&this.next(),this.parseFunction(ne,Jn|Tn,!1,w)}else if(this.type===ee._class){var it=this.startNode();return this.parseClass(it,"nullableID")}else{var kt=this.parseMaybeAssign();return this.semicolon(),kt}},_n.checkExport=function(w,ne,it){w&&(typeof ne!="string"&&(ne=ne.type==="Identifier"?ne.name:ne.value),Qt(w,ne)&&this.raiseRecoverable(it,"Duplicate export '"+ne+"'"),w[ne]=!0)},_n.checkPatternExport=function(w,ne){var it=ne.type;if(it==="Identifier")this.checkExport(w,ne,ne.start);else if(it==="ObjectPattern")for(var kt=0,mn=ne.properties;kt<mn.length;kt+=1){var er=mn[kt];this.checkPatternExport(w,er)}else if(it==="ArrayPattern")for(var gr=0,ni=ne.elements;gr<ni.length;gr+=1){var li=ni[gr];li&&this.checkPatternExport(w,li)}else it==="Property"?this.checkPatternExport(w,ne.value):it==="AssignmentPattern"?this.checkPatternExport(w,ne.left):it==="RestElement"&&this.checkPatternExport(w,ne.argument)},_n.checkVariableExport=function(w,ne){if(w)for(var it=0,kt=ne;it<kt.length;it+=1){var mn=kt[it];this.checkPatternExport(w,mn.id)}},_n.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},_n.parseExportSpecifier=function(w){var ne=this.startNode();return ne.local=this.parseModuleExportName(),ne.exported=this.eatContextual("as")?this.parseModuleExportName():ne.local,this.checkExport(w,ne.exported,ne.exported.start),this.finishNode(ne,"ExportSpecifier")},_n.parseExportSpecifiers=function(w){var ne=[],it=!0;for(this.expect(ee.braceL);!this.eat(ee.braceR);){if(it)it=!1;else if(this.expect(ee.comma),this.afterTrailingComma(ee.braceR))break;ne.push(this.parseExportSpecifier(w))}return ne},_n.parseImport=function(w){return this.next(),this.type===ee.string?(w.specifiers=lr,w.source=this.parseExprAtom()):(w.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),w.source=this.type===ee.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(w.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(w,"ImportDeclaration")},_n.parseImportSpecifier=function(){var w=this.startNode();return w.imported=this.parseModuleExportName(),this.eatContextual("as")?w.local=this.parseIdent():(this.checkUnreserved(w.imported),w.local=w.imported),this.checkLValSimple(w.local,_t),this.finishNode(w,"ImportSpecifier")},_n.parseImportDefaultSpecifier=function(){var w=this.startNode();return w.local=this.parseIdent(),this.checkLValSimple(w.local,_t),this.finishNode(w,"ImportDefaultSpecifier")},_n.parseImportNamespaceSpecifier=function(){var w=this.startNode();return this.next(),this.expectContextual("as"),w.local=this.parseIdent(),this.checkLValSimple(w.local,_t),this.finishNode(w,"ImportNamespaceSpecifier")},_n.parseImportSpecifiers=function(){var w=[],ne=!0;if(this.type===ee.name&&(w.push(this.parseImportDefaultSpecifier()),!this.eat(ee.comma)))return w;if(this.type===ee.star)return w.push(this.parseImportNamespaceSpecifier()),w;for(this.expect(ee.braceL);!this.eat(ee.braceR);){if(ne)ne=!1;else if(this.expect(ee.comma),this.afterTrailingComma(ee.braceR))break;w.push(this.parseImportSpecifier())}return w},_n.parseWithClause=function(){var w=[];if(!this.eat(ee._with))return w;this.expect(ee.braceL);for(var ne={},it=!0;!this.eat(ee.braceR);){if(it)it=!1;else if(this.expect(ee.comma),this.afterTrailingComma(ee.braceR))break;var kt=this.parseImportAttribute(),mn=kt.key.type==="Identifier"?kt.key.name:kt.key.value;Qt(ne,mn)&&this.raiseRecoverable(kt.key.start,"Duplicate attribute key '"+mn+"'"),ne[mn]=!0,w.push(kt)}return w},_n.parseImportAttribute=function(){var w=this.startNode();return w.key=this.type===ee.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(ee.colon),this.type!==ee.string&&this.unexpected(),w.value=this.parseExprAtom(),this.finishNode(w,"ImportAttribute")},_n.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===ee.string){var w=this.parseLiteral(this.value);return Ut.test(w.value)&&this.raise(w.start,"An export name cannot include a lone surrogate."),w}return this.parseIdent(!0)},_n.adaptDirectivePrologue=function(w){for(var ne=0;ne<w.length&&this.isDirectiveCandidate(w[ne]);++ne)w[ne].directive=w[ne].expression.raw.slice(1,-1)},_n.isDirectiveCandidate=function(w){return this.options.ecmaVersion>=5&&w.type==="ExpressionStatement"&&w.expression.type==="Literal"&&typeof w.expression.value=="string"&&(this.input[w.start]==='"'||this.input[w.start]==="'")};var pr=xt.prototype;pr.toAssignable=function(w,ne,it){if(this.options.ecmaVersion>=6&&w)switch(w.type){case"Identifier":this.inAsync&&w.name==="await"&&this.raise(w.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":w.type="ObjectPattern",it&&this.checkPatternErrors(it,!0);for(var kt=0,mn=w.properties;kt<mn.length;kt+=1){var er=mn[kt];this.toAssignable(er,ne),er.type==="RestElement"&&(er.argument.type==="ArrayPattern"||er.argument.type==="ObjectPattern")&&this.raise(er.argument.start,"Unexpected token")}break;case"Property":w.kind!=="init"&&this.raise(w.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(w.value,ne);break;case"ArrayExpression":w.type="ArrayPattern",it&&this.checkPatternErrors(it,!0),this.toAssignableList(w.elements,ne);break;case"SpreadElement":w.type="RestElement",this.toAssignable(w.argument,ne),w.argument.type==="AssignmentPattern"&&this.raise(w.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":w.operator!=="="&&this.raise(w.left.end,"Only '=' operator can be used for specifying default value."),w.type="AssignmentPattern",delete w.operator,this.toAssignable(w.left,ne);break;case"ParenthesizedExpression":this.toAssignable(w.expression,ne,it);break;case"ChainExpression":this.raiseRecoverable(w.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!ne)break;default:this.raise(w.start,"Assigning to rvalue")}else it&&this.checkPatternErrors(it,!0);return w},pr.toAssignableList=function(w,ne){for(var it=w.length,kt=0;kt<it;kt++){var mn=w[kt];mn&&this.toAssignable(mn,ne)}if(it){var er=w[it-1];this.options.ecmaVersion===6&&ne&&er&&er.type==="RestElement"&&er.argument.type!=="Identifier"&&this.unexpected(er.argument.start)}return w},pr.parseSpread=function(w){var ne=this.startNode();return this.next(),ne.argument=this.parseMaybeAssign(!1,w),this.finishNode(ne,"SpreadElement")},pr.parseRestBinding=function(){var w=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==ee.name&&this.unexpected(),w.argument=this.parseBindingAtom(),this.finishNode(w,"RestElement")},pr.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case ee.bracketL:var w=this.startNode();return this.next(),w.elements=this.parseBindingList(ee.bracketR,!0,!0),this.finishNode(w,"ArrayPattern");case ee.braceL:return this.parseObj(!0)}return this.parseIdent()},pr.parseBindingList=function(w,ne,it,kt){for(var mn=[],er=!0;!this.eat(w);)if(er?er=!1:this.expect(ee.comma),ne&&this.type===ee.comma)mn.push(null);else{if(it&&this.afterTrailingComma(w))break;if(this.type===ee.ellipsis){var gr=this.parseRestBinding();this.parseBindingListItem(gr),mn.push(gr),this.type===ee.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(w);break}else mn.push(this.parseAssignableListItem(kt))}return mn},pr.parseAssignableListItem=function(w){var ne=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(ne),ne},pr.parseBindingListItem=function(w){return w},pr.parseMaybeDefault=function(w,ne,it){if(it=it||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(ee.eq))return it;var kt=this.startNodeAt(w,ne);return kt.left=it,kt.right=this.parseMaybeAssign(),this.finishNode(kt,"AssignmentPattern")},pr.checkLValSimple=function(w,ne,it){ne===void 0&&(ne=Ke);var kt=ne!==Ke;switch(w.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(w.name)&&this.raiseRecoverable(w.start,(kt?"Binding ":"Assigning to ")+w.name+" in strict mode"),kt&&(ne===_t&&w.name==="let"&&this.raiseRecoverable(w.start,"let is disallowed as a lexically bound name"),it&&(Qt(it,w.name)&&this.raiseRecoverable(w.start,"Argument name clash"),it[w.name]=!0),ne!==Pt&&this.declareName(w.name,ne,w.start));break;case"ChainExpression":this.raiseRecoverable(w.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":kt&&this.raiseRecoverable(w.start,"Binding member expression");break;case"ParenthesizedExpression":return kt&&this.raiseRecoverable(w.start,"Binding parenthesized expression"),this.checkLValSimple(w.expression,ne,it);default:this.raise(w.start,(kt?"Binding":"Assigning to")+" rvalue")}},pr.checkLValPattern=function(w,ne,it){switch(ne===void 0&&(ne=Ke),w.type){case"ObjectPattern":for(var kt=0,mn=w.properties;kt<mn.length;kt+=1){var er=mn[kt];this.checkLValInnerPattern(er,ne,it)}break;case"ArrayPattern":for(var gr=0,ni=w.elements;gr<ni.length;gr+=1){var li=ni[gr];li&&this.checkLValInnerPattern(li,ne,it)}break;default:this.checkLValSimple(w,ne,it)}},pr.checkLValInnerPattern=function(w,ne,it){switch(ne===void 0&&(ne=Ke),w.type){case"Property":this.checkLValInnerPattern(w.value,ne,it);break;case"AssignmentPattern":this.checkLValPattern(w.left,ne,it);break;case"RestElement":this.checkLValPattern(w.argument,ne,it);break;default:this.checkLValPattern(w,ne,it)}};var Br=function(ne,it,kt,mn,er){this.token=ne,this.isExpr=!!it,this.preserveSpace=!!kt,this.override=mn,this.generator=!!er},Mr={b_stat:new Br("{",!1),b_expr:new Br("{",!0),b_tmpl:new Br("${",!1),p_stat:new Br("(",!1),p_expr:new Br("(",!0),q_tmpl:new Br("`",!0,!0,function(w){return w.tryReadTemplateToken()}),f_stat:new Br("function",!1),f_expr:new Br("function",!0),f_expr_gen:new Br("function",!0,!1,null,!0),f_gen:new Br("function",!1,!1,null,!0)},pn=xt.prototype;pn.initialContext=function(){return[Mr.b_stat]},pn.curContext=function(){return this.context[this.context.length-1]},pn.braceIsBlock=function(w){var ne=this.curContext();return ne===Mr.f_expr||ne===Mr.f_stat?!0:w===ee.colon&&(ne===Mr.b_stat||ne===Mr.b_expr)?!ne.isExpr:w===ee._return||w===ee.name&&this.exprAllowed?Qe.test(this.input.slice(this.lastTokEnd,this.start)):w===ee._else||w===ee.semi||w===ee.eof||w===ee.parenR||w===ee.arrow?!0:w===ee.braceL?ne===Mr.b_stat:w===ee._var||w===ee._const||w===ee.name?!1:!this.exprAllowed},pn.inGeneratorContext=function(){for(var w=this.context.length-1;w>=1;w--){var ne=this.context[w];if(ne.token==="function")return ne.generator}return!1},pn.updateContext=function(w){var ne,it=this.type;it.keyword&&w===ee.dot?this.exprAllowed=!1:(ne=it.updateContext)?ne.call(this,w):this.exprAllowed=it.beforeExpr},pn.overrideContext=function(w){this.curContext()!==w&&(this.context[this.context.length-1]=w)},ee.parenR.updateContext=ee.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var w=this.context.pop();w===Mr.b_stat&&this.curContext().token==="function"&&(w=this.context.pop()),this.exprAllowed=!w.isExpr},ee.braceL.updateContext=function(w){this.context.push(this.braceIsBlock(w)?Mr.b_stat:Mr.b_expr),this.exprAllowed=!0},ee.dollarBraceL.updateContext=function(){this.context.push(Mr.b_tmpl),this.exprAllowed=!0},ee.parenL.updateContext=function(w){var ne=w===ee._if||w===ee._for||w===ee._with||w===ee._while;this.context.push(ne?Mr.p_stat:Mr.p_expr),this.exprAllowed=!0},ee.incDec.updateContext=function(){},ee._function.updateContext=ee._class.updateContext=function(w){w.beforeExpr&&w!==ee._else&&!(w===ee.semi&&this.curContext()!==Mr.p_stat)&&!(w===ee._return&&Qe.test(this.input.slice(this.lastTokEnd,this.start)))&&!((w===ee.colon||w===ee.braceL)&&this.curContext()===Mr.b_stat)?this.context.push(Mr.f_expr):this.context.push(Mr.f_stat),this.exprAllowed=!1},ee.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},ee.backQuote.updateContext=function(){this.curContext()===Mr.q_tmpl?this.context.pop():this.context.push(Mr.q_tmpl),this.exprAllowed=!1},ee.star.updateContext=function(w){if(w===ee._function){var ne=this.context.length-1;this.context[ne]===Mr.f_expr?this.context[ne]=Mr.f_expr_gen:this.context[ne]=Mr.f_gen}this.exprAllowed=!0},ee.name.updateContext=function(w){var ne=!1;this.options.ecmaVersion>=6&&w!==ee.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(ne=!0),this.exprAllowed=ne};var Wt=xt.prototype;Wt.checkPropClash=function(w,ne,it){if(!(this.options.ecmaVersion>=9&&w.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(w.computed||w.method||w.shorthand))){var kt=w.key,mn;switch(kt.type){case"Identifier":mn=kt.name;break;case"Literal":mn=String(kt.value);break;default:return}var er=w.kind;if(this.options.ecmaVersion>=6){mn==="__proto__"&&er==="init"&&(ne.proto&&(it?it.doubleProto<0&&(it.doubleProto=kt.start):this.raiseRecoverable(kt.start,"Redefinition of __proto__ property")),ne.proto=!0);return}mn="$"+mn;var gr=ne[mn];if(gr){var ni;er==="init"?ni=this.strict&&gr.init||gr.get||gr.set:ni=gr.init||gr[er],ni&&this.raiseRecoverable(kt.start,"Redefinition of property")}else gr=ne[mn]={init:!1,get:!1,set:!1};gr[er]=!0}},Wt.parseExpression=function(w,ne){var it=this.start,kt=this.startLoc,mn=this.parseMaybeAssign(w,ne);if(this.type===ee.comma){var er=this.startNodeAt(it,kt);for(er.expressions=[mn];this.eat(ee.comma);)er.expressions.push(this.parseMaybeAssign(w,ne));return this.finishNode(er,"SequenceExpression")}return mn},Wt.parseMaybeAssign=function(w,ne,it){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(w);this.exprAllowed=!1}var kt=!1,mn=-1,er=-1,gr=-1;ne?(mn=ne.parenthesizedAssign,er=ne.trailingComma,gr=ne.doubleProto,ne.parenthesizedAssign=ne.trailingComma=-1):(ne=new Vt,kt=!0);var ni=this.start,li=this.startLoc;(this.type===ee.parenL||this.type===ee.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=w==="await");var os=this.parseMaybeConditional(w,ne);if(it&&(os=it.call(this,os,ni,li)),this.type.isAssign){var Xi=this.startNodeAt(ni,li);return Xi.operator=this.value,this.type===ee.eq&&(os=this.toAssignable(os,!1,ne)),kt||(ne.parenthesizedAssign=ne.trailingComma=ne.doubleProto=-1),ne.shorthandAssign>=os.start&&(ne.shorthandAssign=-1),this.type===ee.eq?this.checkLValPattern(os):this.checkLValSimple(os),Xi.left=os,this.next(),Xi.right=this.parseMaybeAssign(w),gr>-1&&(ne.doubleProto=gr),this.finishNode(Xi,"AssignmentExpression")}else kt&&this.checkExpressionErrors(ne,!0);return mn>-1&&(ne.parenthesizedAssign=mn),er>-1&&(ne.trailingComma=er),os},Wt.parseMaybeConditional=function(w,ne){var it=this.start,kt=this.startLoc,mn=this.parseExprOps(w,ne);if(this.checkExpressionErrors(ne))return mn;if(this.eat(ee.question)){var er=this.startNodeAt(it,kt);return er.test=mn,er.consequent=this.parseMaybeAssign(),this.expect(ee.colon),er.alternate=this.parseMaybeAssign(w),this.finishNode(er,"ConditionalExpression")}return mn},Wt.parseExprOps=function(w,ne){var it=this.start,kt=this.startLoc,mn=this.parseMaybeUnary(ne,!1,!1,w);return this.checkExpressionErrors(ne)||mn.start===it&&mn.type==="ArrowFunctionExpression"?mn:this.parseExprOp(mn,it,kt,-1,w)},Wt.parseExprOp=function(w,ne,it,kt,mn){var er=this.type.binop;if(er!=null&&(!mn||this.type!==ee._in)&&er>kt){var gr=this.type===ee.logicalOR||this.type===ee.logicalAND,ni=this.type===ee.coalesce;ni&&(er=ee.logicalAND.binop);var li=this.value;this.next();var os=this.start,Xi=this.startLoc,Ar=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,mn),os,Xi,er,mn),ss=this.buildBinary(ne,it,w,Ar,li,gr||ni);return(gr&&this.type===ee.coalesce||ni&&(this.type===ee.logicalOR||this.type===ee.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(ss,ne,it,kt,mn)}return w},Wt.buildBinary=function(w,ne,it,kt,mn,er){kt.type==="PrivateIdentifier"&&this.raise(kt.start,"Private identifier can only be left side of binary expression");var gr=this.startNodeAt(w,ne);return gr.left=it,gr.operator=mn,gr.right=kt,this.finishNode(gr,er?"LogicalExpression":"BinaryExpression")},Wt.parseMaybeUnary=function(w,ne,it,kt){var mn=this.start,er=this.startLoc,gr;if(this.isContextual("await")&&this.canAwait)gr=this.parseAwait(kt),ne=!0;else if(this.type.prefix){var ni=this.startNode(),li=this.type===ee.incDec;ni.operator=this.value,ni.prefix=!0,this.next(),ni.argument=this.parseMaybeUnary(null,!0,li,kt),this.checkExpressionErrors(w,!0),li?this.checkLValSimple(ni.argument):this.strict&&ni.operator==="delete"&&un(ni.argument)?this.raiseRecoverable(ni.start,"Deleting local variable in strict mode"):ni.operator==="delete"&&fn(ni.argument)?this.raiseRecoverable(ni.start,"Private fields can not be deleted"):ne=!0,gr=this.finishNode(ni,li?"UpdateExpression":"UnaryExpression")}else if(!ne&&this.type===ee.privateId)(kt||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),gr=this.parsePrivateIdent(),this.type!==ee._in&&this.unexpected();else{if(gr=this.parseExprSubscripts(w,kt),this.checkExpressionErrors(w))return gr;for(;this.type.postfix&&!this.canInsertSemicolon();){var os=this.startNodeAt(mn,er);os.operator=this.value,os.prefix=!1,os.argument=gr,this.checkLValSimple(gr),this.next(),gr=this.finishNode(os,"UpdateExpression")}}if(!it&&this.eat(ee.starstar))if(ne)this.unexpected(this.lastTokStart);else return this.buildBinary(mn,er,gr,this.parseMaybeUnary(null,!1,!1,kt),"**",!1);else return gr};function un(w){return w.type==="Identifier"||w.type==="ParenthesizedExpression"&&un(w.expression)}function fn(w){return w.type==="MemberExpression"&&w.property.type==="PrivateIdentifier"||w.type==="ChainExpression"&&fn(w.expression)||w.type==="ParenthesizedExpression"&&fn(w.expression)}Wt.parseExprSubscripts=function(w,ne){var it=this.start,kt=this.startLoc,mn=this.parseExprAtom(w,ne);if(mn.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return mn;var er=this.parseSubscripts(mn,it,kt,!1,ne);return w&&er.type==="MemberExpression"&&(w.parenthesizedAssign>=er.start&&(w.parenthesizedAssign=-1),w.parenthesizedBind>=er.start&&(w.parenthesizedBind=-1),w.trailingComma>=er.start&&(w.trailingComma=-1)),er},Wt.parseSubscripts=function(w,ne,it,kt,mn){for(var er=this.options.ecmaVersion>=8&&w.type==="Identifier"&&w.name==="async"&&this.lastTokEnd===w.end&&!this.canInsertSemicolon()&&w.end-w.start===5&&this.potentialArrowAt===w.start,gr=!1;;){var ni=this.parseSubscript(w,ne,it,kt,er,gr,mn);if(ni.optional&&(gr=!0),ni===w||ni.type==="ArrowFunctionExpression"){if(gr){var li=this.startNodeAt(ne,it);li.expression=ni,ni=this.finishNode(li,"ChainExpression")}return ni}w=ni}},Wt.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(ee.arrow)},Wt.parseSubscriptAsyncArrow=function(w,ne,it,kt){return this.parseArrowExpression(this.startNodeAt(w,ne),it,!0,kt)},Wt.parseSubscript=function(w,ne,it,kt,mn,er,gr){var ni=this.options.ecmaVersion>=11,li=ni&&this.eat(ee.questionDot);kt&&li&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var os=this.eat(ee.bracketL);if(os||li&&this.type!==ee.parenL&&this.type!==ee.backQuote||this.eat(ee.dot)){var Xi=this.startNodeAt(ne,it);Xi.object=w,os?(Xi.property=this.parseExpression(),this.expect(ee.bracketR)):this.type===ee.privateId&&w.type!=="Super"?Xi.property=this.parsePrivateIdent():Xi.property=this.parseIdent(this.options.allowReserved!=="never"),Xi.computed=!!os,ni&&(Xi.optional=li),w=this.finishNode(Xi,"MemberExpression")}else if(!kt&&this.eat(ee.parenL)){var Ar=new Vt,ss=this.yieldPos,Bu=this.awaitPos,eu=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var uf=this.parseExprList(ee.parenR,this.options.ecmaVersion>=8,!1,Ar);if(mn&&!li&&this.shouldParseAsyncArrow())return this.checkPatternErrors(Ar,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=ss,this.awaitPos=Bu,this.awaitIdentPos=eu,this.parseSubscriptAsyncArrow(ne,it,uf,gr);this.checkExpressionErrors(Ar,!0),this.yieldPos=ss||this.yieldPos,this.awaitPos=Bu||this.awaitPos,this.awaitIdentPos=eu||this.awaitIdentPos;var du=this.startNodeAt(ne,it);du.callee=w,du.arguments=uf,ni&&(du.optional=li),w=this.finishNode(du,"CallExpression")}else if(this.type===ee.backQuote){(li||er)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var pu=this.startNodeAt(ne,it);pu.tag=w,pu.quasi=this.parseTemplate({isTagged:!0}),w=this.finishNode(pu,"TaggedTemplateExpression")}return w},Wt.parseExprAtom=function(w,ne,it){this.type===ee.slash&&this.readRegexp();var kt,mn=this.potentialArrowAt===this.start;switch(this.type){case ee._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),kt=this.startNode(),this.next(),this.type===ee.parenL&&!this.allowDirectSuper&&this.raise(kt.start,"super() call outside constructor of a subclass"),this.type!==ee.dot&&this.type!==ee.bracketL&&this.type!==ee.parenL&&this.unexpected(),this.finishNode(kt,"Super");case ee._this:return kt=this.startNode(),this.next(),this.finishNode(kt,"ThisExpression");case ee.name:var er=this.start,gr=this.startLoc,ni=this.containsEsc,li=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!ni&&li.name==="async"&&!this.canInsertSemicolon()&&this.eat(ee._function))return this.overrideContext(Mr.f_expr),this.parseFunction(this.startNodeAt(er,gr),0,!1,!0,ne);if(mn&&!this.canInsertSemicolon()){if(this.eat(ee.arrow))return this.parseArrowExpression(this.startNodeAt(er,gr),[li],!1,ne);if(this.options.ecmaVersion>=8&&li.name==="async"&&this.type===ee.name&&!ni&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return li=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(ee.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(er,gr),[li],!0,ne)}return li;case ee.regexp:var os=this.value;return kt=this.parseLiteral(os.value),kt.regex={pattern:os.pattern,flags:os.flags},kt;case ee.num:case ee.string:return this.parseLiteral(this.value);case ee._null:case ee._true:case ee._false:return kt=this.startNode(),kt.value=this.type===ee._null?null:this.type===ee._true,kt.raw=this.type.keyword,this.next(),this.finishNode(kt,"Literal");case ee.parenL:var Xi=this.start,Ar=this.parseParenAndDistinguishExpression(mn,ne);return w&&(w.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Ar)&&(w.parenthesizedAssign=Xi),w.parenthesizedBind<0&&(w.parenthesizedBind=Xi)),Ar;case ee.bracketL:return kt=this.startNode(),this.next(),kt.elements=this.parseExprList(ee.bracketR,!0,!0,w),this.finishNode(kt,"ArrayExpression");case ee.braceL:return this.overrideContext(Mr.b_expr),this.parseObj(!1,w);case ee._function:return kt=this.startNode(),this.next(),this.parseFunction(kt,0);case ee._class:return this.parseClass(this.startNode(),!1);case ee._new:return this.parseNew();case ee.backQuote:return this.parseTemplate();case ee._import:return this.options.ecmaVersion>=11?this.parseExprImport(it):this.unexpected();default:return this.parseExprAtomDefault()}},Wt.parseExprAtomDefault=function(){this.unexpected()},Wt.parseExprImport=function(w){var ne=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===ee.parenL&&!w)return this.parseDynamicImport(ne);if(this.type===ee.dot){var it=this.startNodeAt(ne.start,ne.loc&&ne.loc.start);return it.name="import",ne.meta=this.finishNode(it,"Identifier"),this.parseImportMeta(ne)}else this.unexpected()},Wt.parseDynamicImport=function(w){if(this.next(),w.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(ee.parenR)?w.options=null:(this.expect(ee.comma),this.afterTrailingComma(ee.parenR)?w.options=null:(w.options=this.parseMaybeAssign(),this.eat(ee.parenR)||(this.expect(ee.comma),this.afterTrailingComma(ee.parenR)||this.unexpected())));else if(!this.eat(ee.parenR)){var ne=this.start;this.eat(ee.comma)&&this.eat(ee.parenR)?this.raiseRecoverable(ne,"Trailing comma is not allowed in import()"):this.unexpected(ne)}return this.finishNode(w,"ImportExpression")},Wt.parseImportMeta=function(w){this.next();var ne=this.containsEsc;return w.property=this.parseIdent(!0),w.property.name!=="meta"&&this.raiseRecoverable(w.property.start,"The only valid meta property for import is 'import.meta'"),ne&&this.raiseRecoverable(w.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(w.start,"Cannot use 'import.meta' outside a module"),this.finishNode(w,"MetaProperty")},Wt.parseLiteral=function(w){var ne=this.startNode();return ne.value=w,ne.raw=this.input.slice(this.start,this.end),ne.raw.charCodeAt(ne.raw.length-1)===110&&(ne.bigint=ne.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(ne,"Literal")},Wt.parseParenExpression=function(){this.expect(ee.parenL);var w=this.parseExpression();return this.expect(ee.parenR),w},Wt.shouldParseArrow=function(w){return!this.canInsertSemicolon()},Wt.parseParenAndDistinguishExpression=function(w,ne){var it=this.start,kt=this.startLoc,mn,er=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var gr=this.start,ni=this.startLoc,li=[],os=!0,Xi=!1,Ar=new Vt,ss=this.yieldPos,Bu=this.awaitPos,eu;for(this.yieldPos=0,this.awaitPos=0;this.type!==ee.parenR;)if(os?os=!1:this.expect(ee.comma),er&&this.afterTrailingComma(ee.parenR,!0)){Xi=!0;break}else if(this.type===ee.ellipsis){eu=this.start,li.push(this.parseParenItem(this.parseRestBinding())),this.type===ee.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else li.push(this.parseMaybeAssign(!1,Ar,this.parseParenItem));var uf=this.lastTokEnd,du=this.lastTokEndLoc;if(this.expect(ee.parenR),w&&this.shouldParseArrow(li)&&this.eat(ee.arrow))return this.checkPatternErrors(Ar,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=ss,this.awaitPos=Bu,this.parseParenArrowList(it,kt,li,ne);(!li.length||Xi)&&this.unexpected(this.lastTokStart),eu&&this.unexpected(eu),this.checkExpressionErrors(Ar,!0),this.yieldPos=ss||this.yieldPos,this.awaitPos=Bu||this.awaitPos,li.length>1?(mn=this.startNodeAt(gr,ni),mn.expressions=li,this.finishNodeAt(mn,"SequenceExpression",uf,du)):mn=li[0]}else mn=this.parseParenExpression();if(this.options.preserveParens){var pu=this.startNodeAt(it,kt);return pu.expression=mn,this.finishNode(pu,"ParenthesizedExpression")}else return mn},Wt.parseParenItem=function(w){return w},Wt.parseParenArrowList=function(w,ne,it,kt){return this.parseArrowExpression(this.startNodeAt(w,ne),it,!1,kt)};var Bn=[];Wt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var w=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===ee.dot){var ne=this.startNodeAt(w.start,w.loc&&w.loc.start);ne.name="new",w.meta=this.finishNode(ne,"Identifier"),this.next();var it=this.containsEsc;return w.property=this.parseIdent(!0),w.property.name!=="target"&&this.raiseRecoverable(w.property.start,"The only valid meta property for new is 'new.target'"),it&&this.raiseRecoverable(w.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(w.start,"'new.target' can only be used in functions and class static block"),this.finishNode(w,"MetaProperty")}var kt=this.start,mn=this.startLoc;return w.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),kt,mn,!0,!1),this.eat(ee.parenL)?w.arguments=this.parseExprList(ee.parenR,this.options.ecmaVersion>=8,!1):w.arguments=Bn,this.finishNode(w,"NewExpression")},Wt.parseTemplateElement=function(w){var ne=w.isTagged,it=this.startNode();return this.type===ee.invalidTemplate?(ne||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),it.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):it.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),it.tail=this.type===ee.backQuote,this.finishNode(it,"TemplateElement")},Wt.parseTemplate=function(w){w===void 0&&(w={});var ne=w.isTagged;ne===void 0&&(ne=!1);var it=this.startNode();this.next(),it.expressions=[];var kt=this.parseTemplateElement({isTagged:ne});for(it.quasis=[kt];!kt.tail;)this.type===ee.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(ee.dollarBraceL),it.expressions.push(this.parseExpression()),this.expect(ee.braceR),it.quasis.push(kt=this.parseTemplateElement({isTagged:ne}));return this.next(),this.finishNode(it,"TemplateLiteral")},Wt.isAsyncProp=function(w){return!w.computed&&w.key.type==="Identifier"&&w.key.name==="async"&&(this.type===ee.name||this.type===ee.num||this.type===ee.string||this.type===ee.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===ee.star)&&!Qe.test(this.input.slice(this.lastTokEnd,this.start))},Wt.parseObj=function(w,ne){var it=this.startNode(),kt=!0,mn={};for(it.properties=[],this.next();!this.eat(ee.braceR);){if(kt)kt=!1;else if(this.expect(ee.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(ee.braceR))break;var er=this.parseProperty(w,ne);w||this.checkPropClash(er,mn,ne),it.properties.push(er)}return this.finishNode(it,w?"ObjectPattern":"ObjectExpression")},Wt.parseProperty=function(w,ne){var it=this.startNode(),kt,mn,er,gr;if(this.options.ecmaVersion>=9&&this.eat(ee.ellipsis))return w?(it.argument=this.parseIdent(!1),this.type===ee.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(it,"RestElement")):(it.argument=this.parseMaybeAssign(!1,ne),this.type===ee.comma&&ne&&ne.trailingComma<0&&(ne.trailingComma=this.start),this.finishNode(it,"SpreadElement"));this.options.ecmaVersion>=6&&(it.method=!1,it.shorthand=!1,(w||ne)&&(er=this.start,gr=this.startLoc),w||(kt=this.eat(ee.star)));var ni=this.containsEsc;return this.parsePropertyName(it),!w&&!ni&&this.options.ecmaVersion>=8&&!kt&&this.isAsyncProp(it)?(mn=!0,kt=this.options.ecmaVersion>=9&&this.eat(ee.star),this.parsePropertyName(it)):mn=!1,this.parsePropertyValue(it,w,kt,mn,er,gr,ne,ni),this.finishNode(it,"Property")},Wt.parseGetterSetter=function(w){var ne=w.key.name;this.parsePropertyName(w),w.value=this.parseMethod(!1),w.kind=ne;var it=w.kind==="get"?0:1;if(w.value.params.length!==it){var kt=w.value.start;w.kind==="get"?this.raiseRecoverable(kt,"getter should have no params"):this.raiseRecoverable(kt,"setter should have exactly one param")}else w.kind==="set"&&w.value.params[0].type==="RestElement"&&this.raiseRecoverable(w.value.params[0].start,"Setter cannot use rest params")},Wt.parsePropertyValue=function(w,ne,it,kt,mn,er,gr,ni){(it||kt)&&this.type===ee.colon&&this.unexpected(),this.eat(ee.colon)?(w.value=ne?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,gr),w.kind="init"):this.options.ecmaVersion>=6&&this.type===ee.parenL?(ne&&this.unexpected(),w.method=!0,w.value=this.parseMethod(it,kt),w.kind="init"):!ne&&!ni&&this.options.ecmaVersion>=5&&!w.computed&&w.key.type==="Identifier"&&(w.key.name==="get"||w.key.name==="set")&&this.type!==ee.comma&&this.type!==ee.braceR&&this.type!==ee.eq?((it||kt)&&this.unexpected(),this.parseGetterSetter(w)):this.options.ecmaVersion>=6&&!w.computed&&w.key.type==="Identifier"?((it||kt)&&this.unexpected(),this.checkUnreserved(w.key),w.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=mn),ne?w.value=this.parseMaybeDefault(mn,er,this.copyNode(w.key)):this.type===ee.eq&&gr?(gr.shorthandAssign<0&&(gr.shorthandAssign=this.start),w.value=this.parseMaybeDefault(mn,er,this.copyNode(w.key))):w.value=this.copyNode(w.key),w.kind="init",w.shorthand=!0):this.unexpected()},Wt.parsePropertyName=function(w){if(this.options.ecmaVersion>=6){if(this.eat(ee.bracketL))return w.computed=!0,w.key=this.parseMaybeAssign(),this.expect(ee.bracketR),w.key;w.computed=!1}return w.key=this.type===ee.num||this.type===ee.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},Wt.initFunction=function(w){w.id=null,this.options.ecmaVersion>=6&&(w.generator=w.expression=!1),this.options.ecmaVersion>=8&&(w.async=!1)},Wt.parseMethod=function(w,ne,it){var kt=this.startNode(),mn=this.yieldPos,er=this.awaitPos,gr=this.awaitIdentPos;return this.initFunction(kt),this.options.ecmaVersion>=6&&(kt.generator=w),this.options.ecmaVersion>=8&&(kt.async=!!ne),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Ye(ne,kt.generator)|U|(it?Q:0)),this.expect(ee.parenL),kt.params=this.parseBindingList(ee.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(kt,!1,!0,!1),this.yieldPos=mn,this.awaitPos=er,this.awaitIdentPos=gr,this.finishNode(kt,"FunctionExpression")},Wt.parseArrowExpression=function(w,ne,it,kt){var mn=this.yieldPos,er=this.awaitPos,gr=this.awaitIdentPos;return this.enterScope(Ye(it,!1)|We),this.initFunction(w),this.options.ecmaVersion>=8&&(w.async=!!it),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,w.params=this.toAssignableList(ne,!0),this.parseFunctionBody(w,!0,!1,kt),this.yieldPos=mn,this.awaitPos=er,this.awaitIdentPos=gr,this.finishNode(w,"ArrowFunctionExpression")},Wt.parseFunctionBody=function(w,ne,it,kt){var mn=ne&&this.type!==ee.braceL,er=this.strict,gr=!1;if(mn)w.body=this.parseMaybeAssign(kt),w.expression=!0,this.checkParams(w,!1);else{var ni=this.options.ecmaVersion>=7&&!this.isSimpleParamList(w.params);(!er||ni)&&(gr=this.strictDirective(this.end),gr&&ni&&this.raiseRecoverable(w.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var li=this.labels;this.labels=[],gr&&(this.strict=!0),this.checkParams(w,!er&&!gr&&!ne&&!it&&this.isSimpleParamList(w.params)),this.strict&&w.id&&this.checkLValSimple(w.id,Pt),w.body=this.parseBlock(!1,void 0,gr&&!er),w.expression=!1,this.adaptDirectivePrologue(w.body.body),this.labels=li}this.exitScope()},Wt.isSimpleParamList=function(w){for(var ne=0,it=w;ne<it.length;ne+=1){var kt=it[ne];if(kt.type!=="Identifier")return!1}return!0},Wt.checkParams=function(w,ne){for(var it=Object.create(null),kt=0,mn=w.params;kt<mn.length;kt+=1){var er=mn[kt];this.checkLValInnerPattern(er,ct,ne?null:it)}},Wt.parseExprList=function(w,ne,it,kt){for(var mn=[],er=!0;!this.eat(w);){if(er)er=!1;else if(this.expect(ee.comma),ne&&this.afterTrailingComma(w))break;var gr=void 0;it&&this.type===ee.comma?gr=null:this.type===ee.ellipsis?(gr=this.parseSpread(kt),kt&&this.type===ee.comma&&kt.trailingComma<0&&(kt.trailingComma=this.start)):gr=this.parseMaybeAssign(!1,kt),mn.push(gr)}return mn},Wt.checkUnreserved=function(w){var ne=w.start,it=w.end,kt=w.name;if(this.inGenerator&&kt==="yield"&&this.raiseRecoverable(ne,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&kt==="await"&&this.raiseRecoverable(ne,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&Ce)&&kt==="arguments"&&this.raiseRecoverable(ne,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(kt==="arguments"||kt==="await")&&this.raise(ne,"Cannot use "+kt+" in class static initialization block"),this.keywords.test(kt)&&this.raise(ne,"Unexpected keyword '"+kt+"'"),!(this.options.ecmaVersion<6&&this.input.slice(ne,it).indexOf("\\")!==-1)){var mn=this.strict?this.reservedWordsStrict:this.reservedWords;mn.test(kt)&&(!this.inAsync&&kt==="await"&&this.raiseRecoverable(ne,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(ne,"The keyword '"+kt+"' is reserved"))}},Wt.parseIdent=function(w){var ne=this.parseIdentNode();return this.next(!!w),this.finishNode(ne,"Identifier"),w||(this.checkUnreserved(ne),ne.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=ne.start)),ne},Wt.parseIdentNode=function(){var w=this.startNode();return this.type===ee.name?w.name=this.value:this.type.keyword?(w.name=this.type.keyword,(w.name==="class"||w.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=ee.name):this.unexpected(),w},Wt.parsePrivateIdent=function(){var w=this.startNode();return this.type===ee.privateId?w.name=this.value:this.unexpected(),this.next(),this.finishNode(w,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(w.start,"Private field '#"+w.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(w)),w},Wt.parseYield=function(w){this.yieldPos||(this.yieldPos=this.start);var ne=this.startNode();return this.next(),this.type===ee.semi||this.canInsertSemicolon()||this.type!==ee.star&&!this.type.startsExpr?(ne.delegate=!1,ne.argument=null):(ne.delegate=this.eat(ee.star),ne.argument=this.parseMaybeAssign(w)),this.finishNode(ne,"YieldExpression")},Wt.parseAwait=function(w){this.awaitPos||(this.awaitPos=this.start);var ne=this.startNode();return this.next(),ne.argument=this.parseMaybeUnary(null,!0,!1,w),this.finishNode(ne,"AwaitExpression")};var Hn=xt.prototype;Hn.raise=function(w,ne){var it=$t(this.input,w);ne+=" ("+it.line+":"+it.column+")",this.sourceFile&&(ne+=" in "+this.sourceFile);var kt=new SyntaxError(ne);throw kt.pos=w,kt.loc=it,kt.raisedAt=this.pos,kt},Hn.raiseRecoverable=Hn.raise,Hn.curPosition=function(){if(this.options.locations)return new Ot(this.curLine,this.pos-this.lineStart)};var yr=xt.prototype,zr=function(ne){this.flags=ne,this.var=[],this.lexical=[],this.functions=[]};yr.enterScope=function(w){this.scopeStack.push(new zr(w))},yr.exitScope=function(){this.scopeStack.pop()},yr.treatFunctionsAsVarInScope=function(w){return w.flags&Mt||!this.inModule&&w.flags&Le},yr.declareName=function(w,ne,it){var kt=!1;if(ne===_t){var mn=this.currentScope();kt=mn.lexical.indexOf(w)>-1||mn.functions.indexOf(w)>-1||mn.var.indexOf(w)>-1,mn.lexical.push(w),this.inModule&&mn.flags&Le&&delete this.undefinedExports[w]}else if(ne===ht){var er=this.currentScope();er.lexical.push(w)}else if(ne===qe){var gr=this.currentScope();this.treatFunctionsAsVar?kt=gr.lexical.indexOf(w)>-1:kt=gr.lexical.indexOf(w)>-1||gr.var.indexOf(w)>-1,gr.functions.push(w)}else for(var ni=this.scopeStack.length-1;ni>=0;--ni){var li=this.scopeStack[ni];if(li.lexical.indexOf(w)>-1&&!(li.flags&C&&li.lexical[0]===w)||!this.treatFunctionsAsVarInScope(li)&&li.functions.indexOf(w)>-1){kt=!0;break}if(li.var.push(w),this.inModule&&li.flags&Le&&delete this.undefinedExports[w],li.flags&Ce)break}kt&&this.raiseRecoverable(it,"Identifier '"+w+"' has already been declared")},yr.checkLocalExport=function(w){this.scopeStack[0].lexical.indexOf(w.name)===-1&&this.scopeStack[0].var.indexOf(w.name)===-1&&(this.undefinedExports[w.name]=w)},yr.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},yr.currentVarScope=function(){for(var w=this.scopeStack.length-1;;w--){var ne=this.scopeStack[w];if(ne.flags&(Ce|de|fe))return ne}},yr.currentThisScope=function(){for(var w=this.scopeStack.length-1;;w--){var ne=this.scopeStack[w];if(ne.flags&(Ce|de|fe)&&!(ne.flags&We))return ne}};var Zr=function(ne,it,kt){this.type="",this.start=it,this.end=0,ne.options.locations&&(this.loc=new rn(ne,kt)),ne.options.directSourceFile&&(this.sourceFile=ne.options.directSourceFile),ne.options.ranges&&(this.range=[it,0])},Ni=xt.prototype;Ni.startNode=function(){return new Zr(this,this.start,this.startLoc)},Ni.startNodeAt=function(w,ne){return new Zr(this,w,ne)};function as(w,ne,it,kt){return w.type=ne,w.end=it,this.options.locations&&(w.loc.end=kt),this.options.ranges&&(w.range[1]=it),w}Ni.finishNode=function(w,ne){return as.call(this,w,ne,this.lastTokEnd,this.lastTokEndLoc)},Ni.finishNodeAt=function(w,ne,it,kt){return as.call(this,w,ne,it,kt)},Ni.copyNode=function(w){var ne=new Zr(this,w.start,this.startLoc);for(var it in w)ne[it]=w[it];return ne};var Ss="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",Os="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",go=Os+" Extended_Pictographic",$u=go,gc=$u+" EBase EComp EMod EPres ExtPict",Xl=gc,Co=Xl,Mu={9:Os,10:go,11:$u,12:gc,13:Xl,14:Co},Ha="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",vh={9:"",10:"",11:"",12:"",13:"",14:Ha},mc="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Vc="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Pu=Vc+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Ou=Pu+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Jo=Ou+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Ku=Jo+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ca=Ku+" "+Ss,Ql={9:Vc,10:Pu,11:Ou,12:Jo,13:Ku,14:ca},Jl={};function qu(w){var ne=Jl[w]={binary:Lt(Mu[w]+" "+mc),binaryOfStrings:Lt(vh[w]),nonBinary:{General_Category:Lt(mc),Script:Lt(Ql[w])}};ne.nonBinary.Script_Extensions=ne.nonBinary.Script,ne.nonBinary.gc=ne.nonBinary.General_Category,ne.nonBinary.sc=ne.nonBinary.Script,ne.nonBinary.scx=ne.nonBinary.Script_Extensions}for(var Xu=0,_h=[9,10,11,12,13,14];Xu<_h.length;Xu+=1){var Sl=_h[Xu];qu(Sl)}var wi=xt.prototype,Ja=function(ne,it){this.parent=ne,this.base=it||this};Ja.prototype.separatedFrom=function(ne){for(var it=this;it;it=it.parent)for(var kt=ne;kt;kt=kt.parent)if(it.base===kt.base&&it!==kt)return!0;return!1},Ja.prototype.sibling=function(){return new Ja(this.parent,this.base)};var fu=function(ne){this.parser=ne,this.validFlags="gim"+(ne.options.ecmaVersion>=6?"uy":"")+(ne.options.ecmaVersion>=9?"s":"")+(ne.options.ecmaVersion>=13?"d":"")+(ne.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Jl[ne.options.ecmaVersion>=14?14:ne.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};fu.prototype.reset=function(ne,it,kt){var mn=kt.indexOf("v")!==-1,er=kt.indexOf("u")!==-1;this.start=ne|0,this.source=it+"",this.flags=kt,mn&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=er&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=er&&this.parser.options.ecmaVersion>=9)},fu.prototype.raise=function(ne){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+ne)},fu.prototype.at=function(ne,it){it===void 0&&(it=!1);var kt=this.source,mn=kt.length;if(ne>=mn)return-1;var er=kt.charCodeAt(ne);if(!(it||this.switchU)||er<=55295||er>=57344||ne+1>=mn)return er;var gr=kt.charCodeAt(ne+1);return gr>=56320&&gr<=57343?(er<<10)+gr-56613888:er},fu.prototype.nextIndex=function(ne,it){it===void 0&&(it=!1);var kt=this.source,mn=kt.length;if(ne>=mn)return mn;var er=kt.charCodeAt(ne),gr;return!(it||this.switchU)||er<=55295||er>=57344||ne+1>=mn||(gr=kt.charCodeAt(ne+1))<56320||gr>57343?ne+1:ne+2},fu.prototype.current=function(ne){return ne===void 0&&(ne=!1),this.at(this.pos,ne)},fu.prototype.lookahead=function(ne){return ne===void 0&&(ne=!1),this.at(this.nextIndex(this.pos,ne),ne)},fu.prototype.advance=function(ne){ne===void 0&&(ne=!1),this.pos=this.nextIndex(this.pos,ne)},fu.prototype.eat=function(ne,it){return it===void 0&&(it=!1),this.current(it)===ne?(this.advance(it),!0):!1},fu.prototype.eatChars=function(ne,it){it===void 0&&(it=!1);for(var kt=this.pos,mn=0,er=ne;mn<er.length;mn+=1){var gr=er[mn],ni=this.at(kt,it);if(ni===-1||ni!==gr)return!1;kt=this.nextIndex(kt,it)}return this.pos=kt,!0},wi.validateRegExpFlags=function(w){for(var ne=w.validFlags,it=w.flags,kt=!1,mn=!1,er=0;er<it.length;er++){var gr=it.charAt(er);ne.indexOf(gr)===-1&&this.raise(w.start,"Invalid regular expression flag"),it.indexOf(gr,er+1)>-1&&this.raise(w.start,"Duplicate regular expression flag"),gr==="u"&&(kt=!0),gr==="v"&&(mn=!0)}this.options.ecmaVersion>=15&&kt&&mn&&this.raise(w.start,"Invalid regular expression flag")};function lo(w){for(var ne in w)return!0;return!1}wi.validateRegExpPattern=function(w){this.regexp_pattern(w),!w.switchN&&this.options.ecmaVersion>=9&&lo(w.groupNames)&&(w.switchN=!0,this.regexp_pattern(w))},wi.regexp_pattern=function(w){w.pos=0,w.lastIntValue=0,w.lastStringValue="",w.lastAssertionIsQuantifiable=!1,w.numCapturingParens=0,w.maxBackReference=0,w.groupNames=Object.create(null),w.backReferenceNames.length=0,w.branchID=null,this.regexp_disjunction(w),w.pos!==w.source.length&&(w.eat(41)&&w.raise("Unmatched ')'"),(w.eat(93)||w.eat(125))&&w.raise("Lone quantifier brackets")),w.maxBackReference>w.numCapturingParens&&w.raise("Invalid escape");for(var ne=0,it=w.backReferenceNames;ne<it.length;ne+=1){var kt=it[ne];w.groupNames[kt]||w.raise("Invalid named capture referenced")}},wi.regexp_disjunction=function(w){var ne=this.options.ecmaVersion>=16;for(ne&&(w.branchID=new Ja(w.branchID,null)),this.regexp_alternative(w);w.eat(124);)ne&&(w.branchID=w.branchID.sibling()),this.regexp_alternative(w);ne&&(w.branchID=w.branchID.parent),this.regexp_eatQuantifier(w,!0)&&w.raise("Nothing to repeat"),w.eat(123)&&w.raise("Lone quantifier brackets")},wi.regexp_alternative=function(w){for(;w.pos<w.source.length&&this.regexp_eatTerm(w););},wi.regexp_eatTerm=function(w){return this.regexp_eatAssertion(w)?(w.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(w)&&w.switchU&&w.raise("Invalid quantifier"),!0):(w.switchU?this.regexp_eatAtom(w):this.regexp_eatExtendedAtom(w))?(this.regexp_eatQuantifier(w),!0):!1},wi.regexp_eatAssertion=function(w){var ne=w.pos;if(w.lastAssertionIsQuantifiable=!1,w.eat(94)||w.eat(36))return!0;if(w.eat(92)){if(w.eat(66)||w.eat(98))return!0;w.pos=ne}if(w.eat(40)&&w.eat(63)){var it=!1;if(this.options.ecmaVersion>=9&&(it=w.eat(60)),w.eat(61)||w.eat(33))return this.regexp_disjunction(w),w.eat(41)||w.raise("Unterminated group"),w.lastAssertionIsQuantifiable=!it,!0}return w.pos=ne,!1},wi.regexp_eatQuantifier=function(w,ne){return ne===void 0&&(ne=!1),this.regexp_eatQuantifierPrefix(w,ne)?(w.eat(63),!0):!1},wi.regexp_eatQuantifierPrefix=function(w,ne){return w.eat(42)||w.eat(43)||w.eat(63)||this.regexp_eatBracedQuantifier(w,ne)},wi.regexp_eatBracedQuantifier=function(w,ne){var it=w.pos;if(w.eat(123)){var kt=0,mn=-1;if(this.regexp_eatDecimalDigits(w)&&(kt=w.lastIntValue,w.eat(44)&&this.regexp_eatDecimalDigits(w)&&(mn=w.lastIntValue),w.eat(125)))return mn!==-1&&mn<kt&&!ne&&w.raise("numbers out of order in {} quantifier"),!0;w.switchU&&!ne&&w.raise("Incomplete quantifier"),w.pos=it}return!1},wi.regexp_eatAtom=function(w){return this.regexp_eatPatternCharacters(w)||w.eat(46)||this.regexp_eatReverseSolidusAtomEscape(w)||this.regexp_eatCharacterClass(w)||this.regexp_eatUncapturingGroup(w)||this.regexp_eatCapturingGroup(w)},wi.regexp_eatReverseSolidusAtomEscape=function(w){var ne=w.pos;if(w.eat(92)){if(this.regexp_eatAtomEscape(w))return!0;w.pos=ne}return!1},wi.regexp_eatUncapturingGroup=function(w){var ne=w.pos;if(w.eat(40)){if(w.eat(63)){if(this.options.ecmaVersion>=16){var it=this.regexp_eatModifiers(w),kt=w.eat(45);if(it||kt){for(var mn=0;mn<it.length;mn++){var er=it.charAt(mn);it.indexOf(er,mn+1)>-1&&w.raise("Duplicate regular expression modifiers")}if(kt){var gr=this.regexp_eatModifiers(w);!it&&!gr&&w.current()===58&&w.raise("Invalid regular expression modifiers");for(var ni=0;ni<gr.length;ni++){var li=gr.charAt(ni);(gr.indexOf(li,ni+1)>-1||it.indexOf(li)>-1)&&w.raise("Duplicate regular expression modifiers")}}}}if(w.eat(58)){if(this.regexp_disjunction(w),w.eat(41))return!0;w.raise("Unterminated group")}}w.pos=ne}return!1},wi.regexp_eatCapturingGroup=function(w){if(w.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(w):w.current()===63&&w.raise("Invalid group"),this.regexp_disjunction(w),w.eat(41))return w.numCapturingParens+=1,!0;w.raise("Unterminated group")}return!1},wi.regexp_eatModifiers=function(w){for(var ne="",it=0;(it=w.current())!==-1&&cp(it);)ne+=Ue(it),w.advance();return ne};function cp(w){return w===105||w===109||w===115}wi.regexp_eatExtendedAtom=function(w){return w.eat(46)||this.regexp_eatReverseSolidusAtomEscape(w)||this.regexp_eatCharacterClass(w)||this.regexp_eatUncapturingGroup(w)||this.regexp_eatCapturingGroup(w)||this.regexp_eatInvalidBracedQuantifier(w)||this.regexp_eatExtendedPatternCharacter(w)},wi.regexp_eatInvalidBracedQuantifier=function(w){return this.regexp_eatBracedQuantifier(w,!0)&&w.raise("Nothing to repeat"),!1},wi.regexp_eatSyntaxCharacter=function(w){var ne=w.current();return Td(ne)?(w.lastIntValue=ne,w.advance(),!0):!1};function Td(w){return w===36||w>=40&&w<=43||w===46||w===63||w>=91&&w<=94||w>=123&&w<=125}wi.regexp_eatPatternCharacters=function(w){for(var ne=w.pos,it=0;(it=w.current())!==-1&&!Td(it);)w.advance();return w.pos!==ne},wi.regexp_eatExtendedPatternCharacter=function(w){var ne=w.current();return ne!==-1&&ne!==36&&!(ne>=40&&ne<=43)&&ne!==46&&ne!==63&&ne!==91&&ne!==94&&ne!==124?(w.advance(),!0):!1},wi.regexp_groupSpecifier=function(w){if(w.eat(63)){this.regexp_eatGroupName(w)||w.raise("Invalid group");var ne=this.options.ecmaVersion>=16,it=w.groupNames[w.lastStringValue];if(it)if(ne)for(var kt=0,mn=it;kt<mn.length;kt+=1){var er=mn[kt];er.separatedFrom(w.branchID)||w.raise("Duplicate capture group name")}else w.raise("Duplicate capture group name");ne?(it||(w.groupNames[w.lastStringValue]=[])).push(w.branchID):w.groupNames[w.lastStringValue]=!0}},wi.regexp_eatGroupName=function(w){if(w.lastStringValue="",w.eat(60)){if(this.regexp_eatRegExpIdentifierName(w)&&w.eat(62))return!0;w.raise("Invalid capture group name")}return!1},wi.regexp_eatRegExpIdentifierName=function(w){if(w.lastStringValue="",this.regexp_eatRegExpIdentifierStart(w)){for(w.lastStringValue+=Ue(w.lastIntValue);this.regexp_eatRegExpIdentifierPart(w);)w.lastStringValue+=Ue(w.lastIntValue);return!0}return!1},wi.regexp_eatRegExpIdentifierStart=function(w){var ne=w.pos,it=this.options.ecmaVersion>=11,kt=w.current(it);return w.advance(it),kt===92&&this.regexp_eatRegExpUnicodeEscapeSequence(w,it)&&(kt=w.lastIntValue),hp(kt)?(w.lastIntValue=kt,!0):(w.pos=ne,!1)};function hp(w){return Be(w,!0)||w===36||w===95}wi.regexp_eatRegExpIdentifierPart=function(w){var ne=w.pos,it=this.options.ecmaVersion>=11,kt=w.current(it);return w.advance(it),kt===92&&this.regexp_eatRegExpUnicodeEscapeSequence(w,it)&&(kt=w.lastIntValue),Hc(kt)?(w.lastIntValue=kt,!0):(w.pos=ne,!1)};function Hc(w){return ce(w,!0)||w===36||w===95||w===8204||w===8205}wi.regexp_eatAtomEscape=function(w){return this.regexp_eatBackReference(w)||this.regexp_eatCharacterClassEscape(w)||this.regexp_eatCharacterEscape(w)||w.switchN&&this.regexp_eatKGroupName(w)?!0:(w.switchU&&(w.current()===99&&w.raise("Invalid unicode escape"),w.raise("Invalid escape")),!1)},wi.regexp_eatBackReference=function(w){var ne=w.pos;if(this.regexp_eatDecimalEscape(w)){var it=w.lastIntValue;if(w.switchU)return it>w.maxBackReference&&(w.maxBackReference=it),!0;if(it<=w.numCapturingParens)return!0;w.pos=ne}return!1},wi.regexp_eatKGroupName=function(w){if(w.eat(107)){if(this.regexp_eatGroupName(w))return w.backReferenceNames.push(w.lastStringValue),!0;w.raise("Invalid named reference")}return!1},wi.regexp_eatCharacterEscape=function(w){return this.regexp_eatControlEscape(w)||this.regexp_eatCControlLetter(w)||this.regexp_eatZero(w)||this.regexp_eatHexEscapeSequence(w)||this.regexp_eatRegExpUnicodeEscapeSequence(w,!1)||!w.switchU&&this.regexp_eatLegacyOctalEscapeSequence(w)||this.regexp_eatIdentityEscape(w)},wi.regexp_eatCControlLetter=function(w){var ne=w.pos;if(w.eat(99)){if(this.regexp_eatControlLetter(w))return!0;w.pos=ne}return!1},wi.regexp_eatZero=function(w){return w.current()===48&&!Vs(w.lookahead())?(w.lastIntValue=0,w.advance(),!0):!1},wi.regexp_eatControlEscape=function(w){var ne=w.current();return ne===116?(w.lastIntValue=9,w.advance(),!0):ne===110?(w.lastIntValue=10,w.advance(),!0):ne===118?(w.lastIntValue=11,w.advance(),!0):ne===102?(w.lastIntValue=12,w.advance(),!0):ne===114?(w.lastIntValue=13,w.advance(),!0):!1},wi.regexp_eatControlLetter=function(w){var ne=w.current();return vc(ne)?(w.lastIntValue=ne%32,w.advance(),!0):!1};function vc(w){return w>=65&&w<=90||w>=97&&w<=122}wi.regexp_eatRegExpUnicodeEscapeSequence=function(w,ne){ne===void 0&&(ne=!1);var it=w.pos,kt=ne||w.switchU;if(w.eat(117)){if(this.regexp_eatFixedHexDigits(w,4)){var mn=w.lastIntValue;if(kt&&mn>=55296&&mn<=56319){var er=w.pos;if(w.eat(92)&&w.eat(117)&&this.regexp_eatFixedHexDigits(w,4)){var gr=w.lastIntValue;if(gr>=56320&&gr<=57343)return w.lastIntValue=(mn-55296)*1024+(gr-56320)+65536,!0}w.pos=er,w.lastIntValue=mn}return!0}if(kt&&w.eat(123)&&this.regexp_eatHexDigits(w)&&w.eat(125)&&_c(w.lastIntValue))return!0;kt&&w.raise("Invalid unicode escape"),w.pos=it}return!1};function _c(w){return w>=0&&w<=1114111}wi.regexp_eatIdentityEscape=function(w){if(w.switchU)return this.regexp_eatSyntaxCharacter(w)?!0:w.eat(47)?(w.lastIntValue=47,!0):!1;var ne=w.current();return ne!==99&&(!w.switchN||ne!==107)?(w.lastIntValue=ne,w.advance(),!0):!1},wi.regexp_eatDecimalEscape=function(w){w.lastIntValue=0;var ne=w.current();if(ne>=49&&ne<=57){do w.lastIntValue=10*w.lastIntValue+(ne-48),w.advance();while((ne=w.current())>=48&&ne<=57);return!0}return!1};var yh=0,ku=1,Vo=2;wi.regexp_eatCharacterClassEscape=function(w){var ne=w.current();if(af(ne))return w.lastIntValue=-1,w.advance(),ku;var it=!1;if(w.switchU&&this.options.ecmaVersion>=9&&((it=ne===80)||ne===112)){w.lastIntValue=-1,w.advance();var kt;if(w.eat(123)&&(kt=this.regexp_eatUnicodePropertyValueExpression(w))&&w.eat(125))return it&&kt===Vo&&w.raise("Invalid property name"),kt;w.raise("Invalid property name")}return yh};function af(w){return w===100||w===68||w===115||w===83||w===119||w===87}wi.regexp_eatUnicodePropertyValueExpression=function(w){var ne=w.pos;if(this.regexp_eatUnicodePropertyName(w)&&w.eat(61)){var it=w.lastStringValue;if(this.regexp_eatUnicodePropertyValue(w)){var kt=w.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(w,it,kt),ku}}if(w.pos=ne,this.regexp_eatLoneUnicodePropertyNameOrValue(w)){var mn=w.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(w,mn)}return yh},wi.regexp_validateUnicodePropertyNameAndValue=function(w,ne,it){Qt(w.unicodeProperties.nonBinary,ne)||w.raise("Invalid property name"),w.unicodeProperties.nonBinary[ne].test(it)||w.raise("Invalid property value")},wi.regexp_validateUnicodePropertyNameOrValue=function(w,ne){if(w.unicodeProperties.binary.test(ne))return ku;if(w.switchV&&w.unicodeProperties.binaryOfStrings.test(ne))return Vo;w.raise("Invalid property name")},wi.regexp_eatUnicodePropertyName=function(w){var ne=0;for(w.lastStringValue="";Wc(ne=w.current());)w.lastStringValue+=Ue(ne),w.advance();return w.lastStringValue!==""};function Wc(w){return vc(w)||w===95}wi.regexp_eatUnicodePropertyValue=function(w){var ne=0;for(w.lastStringValue="";Gc(ne=w.current());)w.lastStringValue+=Ue(ne),w.advance();return w.lastStringValue!==""};function Gc(w){return Wc(w)||Vs(w)}wi.regexp_eatLoneUnicodePropertyNameOrValue=function(w){return this.regexp_eatUnicodePropertyValue(w)},wi.regexp_eatCharacterClass=function(w){if(w.eat(91)){var ne=w.eat(94),it=this.regexp_classContents(w);return w.eat(93)||w.raise("Unterminated character class"),ne&&it===Vo&&w.raise("Negated character class may contain strings"),!0}return!1},wi.regexp_classContents=function(w){return w.current()===93?ku:w.switchV?this.regexp_classSetExpression(w):(this.regexp_nonEmptyClassRanges(w),ku)},wi.regexp_nonEmptyClassRanges=function(w){for(;this.regexp_eatClassAtom(w);){var ne=w.lastIntValue;if(w.eat(45)&&this.regexp_eatClassAtom(w)){var it=w.lastIntValue;w.switchU&&(ne===-1||it===-1)&&w.raise("Invalid character class"),ne!==-1&&it!==-1&&ne>it&&w.raise("Range out of order in character class")}}},wi.regexp_eatClassAtom=function(w){var ne=w.pos;if(w.eat(92)){if(this.regexp_eatClassEscape(w))return!0;if(w.switchU){var it=w.current();(it===99||of(it))&&w.raise("Invalid class escape"),w.raise("Invalid escape")}w.pos=ne}var kt=w.current();return kt!==93?(w.lastIntValue=kt,w.advance(),!0):!1},wi.regexp_eatClassEscape=function(w){var ne=w.pos;if(w.eat(98))return w.lastIntValue=8,!0;if(w.switchU&&w.eat(45))return w.lastIntValue=45,!0;if(!w.switchU&&w.eat(99)){if(this.regexp_eatClassControlLetter(w))return!0;w.pos=ne}return this.regexp_eatCharacterClassEscape(w)||this.regexp_eatCharacterEscape(w)},wi.regexp_classSetExpression=function(w){var ne=ku,it;if(!this.regexp_eatClassSetRange(w))if(it=this.regexp_eatClassSetOperand(w)){it===Vo&&(ne=Vo);for(var kt=w.pos;w.eatChars([38,38]);){if(w.current()!==38&&(it=this.regexp_eatClassSetOperand(w))){it!==Vo&&(ne=ku);continue}w.raise("Invalid character in character class")}if(kt!==w.pos)return ne;for(;w.eatChars([45,45]);)this.regexp_eatClassSetOperand(w)||w.raise("Invalid character in character class");if(kt!==w.pos)return ne}else w.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(w)){if(it=this.regexp_eatClassSetOperand(w),!it)return ne;it===Vo&&(ne=Vo)}},wi.regexp_eatClassSetRange=function(w){var ne=w.pos;if(this.regexp_eatClassSetCharacter(w)){var it=w.lastIntValue;if(w.eat(45)&&this.regexp_eatClassSetCharacter(w)){var kt=w.lastIntValue;return it!==-1&&kt!==-1&&it>kt&&w.raise("Range out of order in character class"),!0}w.pos=ne}return!1},wi.regexp_eatClassSetOperand=function(w){return this.regexp_eatClassSetCharacter(w)?ku:this.regexp_eatClassStringDisjunction(w)||this.regexp_eatNestedClass(w)},wi.regexp_eatNestedClass=function(w){var ne=w.pos;if(w.eat(91)){var it=w.eat(94),kt=this.regexp_classContents(w);if(w.eat(93))return it&&kt===Vo&&w.raise("Negated character class may contain strings"),kt;w.pos=ne}if(w.eat(92)){var mn=this.regexp_eatCharacterClassEscape(w);if(mn)return mn;w.pos=ne}return null},wi.regexp_eatClassStringDisjunction=function(w){var ne=w.pos;if(w.eatChars([92,113])){if(w.eat(123)){var it=this.regexp_classStringDisjunctionContents(w);if(w.eat(125))return it}else w.raise("Invalid escape");w.pos=ne}return null},wi.regexp_classStringDisjunctionContents=function(w){for(var ne=this.regexp_classString(w);w.eat(124);)this.regexp_classString(w)===Vo&&(ne=Vo);return ne},wi.regexp_classString=function(w){for(var ne=0;this.regexp_eatClassSetCharacter(w);)ne++;return ne===1?ku:Vo},wi.regexp_eatClassSetCharacter=function(w){var ne=w.pos;if(w.eat(92))return this.regexp_eatCharacterEscape(w)||this.regexp_eatClassSetReservedPunctuator(w)?!0:w.eat(98)?(w.lastIntValue=8,!0):(w.pos=ne,!1);var it=w.current();return it<0||it===w.lookahead()&&Iu(it)||wh(it)?!1:(w.advance(),w.lastIntValue=it,!0)};function Iu(w){return w===33||w>=35&&w<=38||w>=42&&w<=44||w===46||w>=58&&w<=64||w===94||w===96||w===126}function wh(w){return w===40||w===41||w===45||w===47||w>=91&&w<=93||w>=123&&w<=125}wi.regexp_eatClassSetReservedPunctuator=function(w){var ne=w.current();return Vf(ne)?(w.lastIntValue=ne,w.advance(),!0):!1};function Vf(w){return w===33||w===35||w===37||w===38||w===44||w===45||w>=58&&w<=62||w===64||w===96||w===126}wi.regexp_eatClassControlLetter=function(w){var ne=w.current();return Vs(ne)||ne===95?(w.lastIntValue=ne%32,w.advance(),!0):!1},wi.regexp_eatHexEscapeSequence=function(w){var ne=w.pos;if(w.eat(120)){if(this.regexp_eatFixedHexDigits(w,2))return!0;w.switchU&&w.raise("Invalid escape"),w.pos=ne}return!1},wi.regexp_eatDecimalDigits=function(w){var ne=w.pos,it=0;for(w.lastIntValue=0;Vs(it=w.current());)w.lastIntValue=10*w.lastIntValue+(it-48),w.advance();return w.pos!==ne};function Vs(w){return w>=48&&w<=57}wi.regexp_eatHexDigits=function(w){var ne=w.pos,it=0;for(w.lastIntValue=0;Lu(it=w.current());)w.lastIntValue=16*w.lastIntValue+xh(it),w.advance();return w.pos!==ne};function Lu(w){return w>=48&&w<=57||w>=65&&w<=70||w>=97&&w<=102}function xh(w){return w>=65&&w<=70?10+(w-65):w>=97&&w<=102?10+(w-97):w-48}wi.regexp_eatLegacyOctalEscapeSequence=function(w){if(this.regexp_eatOctalDigit(w)){var ne=w.lastIntValue;if(this.regexp_eatOctalDigit(w)){var it=w.lastIntValue;ne<=3&&this.regexp_eatOctalDigit(w)?w.lastIntValue=ne*64+it*8+w.lastIntValue:w.lastIntValue=ne*8+it}else w.lastIntValue=ne;return!0}return!1},wi.regexp_eatOctalDigit=function(w){var ne=w.current();return of(ne)?(w.lastIntValue=ne-48,w.advance(),!0):(w.lastIntValue=0,!1)};function of(w){return w>=48&&w<=55}wi.regexp_eatFixedHexDigits=function(w,ne){var it=w.pos;w.lastIntValue=0;for(var kt=0;kt<ne;++kt){var mn=w.current();if(!Lu(mn))return w.pos=it,!1;w.lastIntValue=16*w.lastIntValue+xh(mn),w.advance()}return!0};var yc=function(ne){this.type=ne.type,this.value=ne.value,this.start=ne.start,this.end=ne.end,ne.options.locations&&(this.loc=new rn(ne,ne.startLoc,ne.endLoc)),ne.options.ranges&&(this.range=[ne.start,ne.end])},Cs=xt.prototype;Cs.next=function(w){!w&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new yc(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Cs.getToken=function(){return this.next(),new yc(this)},typeof Symbol<"u"&&(Cs[Symbol.iterator]=function(){var w=this;return{next:function(){var ne=w.getToken();return{done:ne.type===ee.eof,value:ne}}}}),Cs.nextToken=function(){var w=this.curContext();if((!w||!w.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(ee.eof);if(w.override)return w.override(this);this.readToken(this.fullCharCodeAtPos())},Cs.readToken=function(w){return Be(w,this.options.ecmaVersion>=6)||w===92?this.readWord():this.getTokenFromCode(w)},Cs.fullCharCodeAtPos=function(){var w=this.input.charCodeAt(this.pos);if(w<=55295||w>=56320)return w;var ne=this.input.charCodeAt(this.pos+1);return ne<=56319||ne>=57344?w:(w<<10)+ne-56613888},Cs.skipBlockComment=function(){var w=this.options.onComment&&this.curPosition(),ne=this.pos,it=this.input.indexOf("*/",this.pos+=2);if(it===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=it+2,this.options.locations)for(var kt=void 0,mn=ne;(kt=at(this.input,mn,this.pos))>-1;)++this.curLine,mn=this.lineStart=kt;this.options.onComment&&this.options.onComment(!0,this.input.slice(ne+2,it),ne,this.pos,w,this.curPosition())},Cs.skipLineComment=function(w){for(var ne=this.pos,it=this.options.onComment&&this.curPosition(),kt=this.input.charCodeAt(this.pos+=w);this.pos<this.input.length&&!Dt(kt);)kt=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(ne+w,this.pos),ne,this.pos,it,this.curPosition())},Cs.skipSpace=function(){e:for(;this.pos<this.input.length;){var w=this.input.charCodeAt(this.pos);switch(w){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(w>8&&w<14||w>=5760&&Ne.test(String.fromCharCode(w)))++this.pos;else break e}}},Cs.finishToken=function(w,ne){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var it=this.type;this.type=w,this.value=ne,this.updateContext(it)},Cs.readToken_dot=function(){var w=this.input.charCodeAt(this.pos+1);if(w>=48&&w<=57)return this.readNumber(!0);var ne=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&w===46&&ne===46?(this.pos+=3,this.finishToken(ee.ellipsis)):(++this.pos,this.finishToken(ee.dot))},Cs.readToken_slash=function(){var w=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):w===61?this.finishOp(ee.assign,2):this.finishOp(ee.slash,1)},Cs.readToken_mult_modulo_exp=function(w){var ne=this.input.charCodeAt(this.pos+1),it=1,kt=w===42?ee.star:ee.modulo;return this.options.ecmaVersion>=7&&w===42&&ne===42&&(++it,kt=ee.starstar,ne=this.input.charCodeAt(this.pos+2)),ne===61?this.finishOp(ee.assign,it+1):this.finishOp(kt,it)},Cs.readToken_pipe_amp=function(w){var ne=this.input.charCodeAt(this.pos+1);if(ne===w){if(this.options.ecmaVersion>=12){var it=this.input.charCodeAt(this.pos+2);if(it===61)return this.finishOp(ee.assign,3)}return this.finishOp(w===124?ee.logicalOR:ee.logicalAND,2)}return ne===61?this.finishOp(ee.assign,2):this.finishOp(w===124?ee.bitwiseOR:ee.bitwiseAND,1)},Cs.readToken_caret=function(){var w=this.input.charCodeAt(this.pos+1);return w===61?this.finishOp(ee.assign,2):this.finishOp(ee.bitwiseXOR,1)},Cs.readToken_plus_min=function(w){var ne=this.input.charCodeAt(this.pos+1);return ne===w?ne===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Qe.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(ee.incDec,2):ne===61?this.finishOp(ee.assign,2):this.finishOp(ee.plusMin,1)},Cs.readToken_lt_gt=function(w){var ne=this.input.charCodeAt(this.pos+1),it=1;return ne===w?(it=w===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+it)===61?this.finishOp(ee.assign,it+1):this.finishOp(ee.bitShift,it)):ne===33&&w===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(ne===61&&(it=2),this.finishOp(ee.relational,it))},Cs.readToken_eq_excl=function(w){var ne=this.input.charCodeAt(this.pos+1);return ne===61?this.finishOp(ee.equality,this.input.charCodeAt(this.pos+2)===61?3:2):w===61&&ne===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(ee.arrow)):this.finishOp(w===61?ee.eq:ee.prefix,1)},Cs.readToken_question=function(){var w=this.options.ecmaVersion;if(w>=11){var ne=this.input.charCodeAt(this.pos+1);if(ne===46){var it=this.input.charCodeAt(this.pos+2);if(it<48||it>57)return this.finishOp(ee.questionDot,2)}if(ne===63){if(w>=12){var kt=this.input.charCodeAt(this.pos+2);if(kt===61)return this.finishOp(ee.assign,3)}return this.finishOp(ee.coalesce,2)}}return this.finishOp(ee.question,1)},Cs.readToken_numberSign=function(){var w=this.options.ecmaVersion,ne=35;if(w>=13&&(++this.pos,ne=this.fullCharCodeAtPos(),Be(ne,!0)||ne===92))return this.finishToken(ee.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Ue(ne)+"'")},Cs.getTokenFromCode=function(w){switch(w){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(ee.parenL);case 41:return++this.pos,this.finishToken(ee.parenR);case 59:return++this.pos,this.finishToken(ee.semi);case 44:return++this.pos,this.finishToken(ee.comma);case 91:return++this.pos,this.finishToken(ee.bracketL);case 93:return++this.pos,this.finishToken(ee.bracketR);case 123:return++this.pos,this.finishToken(ee.braceL);case 125:return++this.pos,this.finishToken(ee.braceR);case 58:return++this.pos,this.finishToken(ee.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(ee.backQuote);case 48:var ne=this.input.charCodeAt(this.pos+1);if(ne===120||ne===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(ne===111||ne===79)return this.readRadixNumber(8);if(ne===98||ne===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(w);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(w);case 124:case 38:return this.readToken_pipe_amp(w);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(w);case 60:case 62:return this.readToken_lt_gt(w);case 61:case 33:return this.readToken_eq_excl(w);case 63:return this.readToken_question();case 126:return this.finishOp(ee.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Ue(w)+"'")},Cs.finishOp=function(w,ne){var it=this.input.slice(this.pos,this.pos+ne);return this.pos+=ne,this.finishToken(w,it)},Cs.readRegexp=function(){for(var w,ne,it=this.pos;;){this.pos>=this.input.length&&this.raise(it,"Unterminated regular expression");var kt=this.input.charAt(this.pos);if(Qe.test(kt)&&this.raise(it,"Unterminated regular expression"),w)w=!1;else{if(kt==="[")ne=!0;else if(kt==="]"&&ne)ne=!1;else if(kt==="/"&&!ne)break;w=kt==="\\"}++this.pos}var mn=this.input.slice(it,this.pos);++this.pos;var er=this.pos,gr=this.readWord1();this.containsEsc&&this.unexpected(er);var ni=this.regexpState||(this.regexpState=new fu(this));ni.reset(it,mn,gr),this.validateRegExpFlags(ni),this.validateRegExpPattern(ni);var li=null;try{li=new RegExp(mn,gr)}catch{}return this.finishToken(ee.regexp,{pattern:mn,flags:gr,value:li})},Cs.readInt=function(w,ne,it){for(var kt=this.options.ecmaVersion>=12&&ne===void 0,mn=it&&this.input.charCodeAt(this.pos)===48,er=this.pos,gr=0,ni=0,li=0,os=ne??1/0;li<os;++li,++this.pos){var Xi=this.input.charCodeAt(this.pos),Ar=void 0;if(kt&&Xi===95){mn&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),ni===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),li===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),ni=Xi;continue}if(Xi>=97?Ar=Xi-97+10:Xi>=65?Ar=Xi-65+10:Xi>=48&&Xi<=57?Ar=Xi-48:Ar=1/0,Ar>=w)break;ni=Xi,gr=gr*w+Ar}return kt&&ni===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===er||ne!=null&&this.pos-er!==ne?null:gr};function Yc(w,ne){return ne?parseInt(w,8):parseFloat(w.replace(/_/g,""))}function lf(w){return typeof BigInt!="function"?null:BigInt(w.replace(/_/g,""))}Cs.readRadixNumber=function(w){var ne=this.pos;this.pos+=2;var it=this.readInt(w);return it==null&&this.raise(this.start+2,"Expected number in radix "+w),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(it=lf(this.input.slice(ne,this.pos)),++this.pos):Be(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ee.num,it)},Cs.readNumber=function(w){var ne=this.pos;!w&&this.readInt(10,void 0,!0)===null&&this.raise(ne,"Invalid number");var it=this.pos-ne>=2&&this.input.charCodeAt(ne)===48;it&&this.strict&&this.raise(ne,"Invalid number");var kt=this.input.charCodeAt(this.pos);if(!it&&!w&&this.options.ecmaVersion>=11&&kt===110){var mn=lf(this.input.slice(ne,this.pos));return++this.pos,Be(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ee.num,mn)}it&&/[89]/.test(this.input.slice(ne,this.pos))&&(it=!1),kt===46&&!it&&(++this.pos,this.readInt(10),kt=this.input.charCodeAt(this.pos)),(kt===69||kt===101)&&!it&&(kt=this.input.charCodeAt(++this.pos),(kt===43||kt===45)&&++this.pos,this.readInt(10)===null&&this.raise(ne,"Invalid number")),Be(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var er=Yc(this.input.slice(ne,this.pos),it);return this.finishToken(ee.num,er)},Cs.readCodePoint=function(){var w=this.input.charCodeAt(this.pos),ne;if(w===123){this.options.ecmaVersion<6&&this.unexpected();var it=++this.pos;ne=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,ne>1114111&&this.invalidStringToken(it,"Code point out of bounds")}else ne=this.readHexChar(4);return ne},Cs.readString=function(w){for(var ne="",it=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var kt=this.input.charCodeAt(this.pos);if(kt===w)break;kt===92?(ne+=this.input.slice(it,this.pos),ne+=this.readEscapedChar(!1),it=this.pos):kt===8232||kt===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Dt(kt)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return ne+=this.input.slice(it,this.pos++),this.finishToken(ee.string,ne)};var wc={};Cs.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(w){if(w===wc)this.readInvalidTemplateToken();else throw w}this.inTemplateElement=!1},Cs.invalidStringToken=function(w,ne){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw wc;this.raise(w,ne)},Cs.readTmplToken=function(){for(var w="",ne=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var it=this.input.charCodeAt(this.pos);if(it===96||it===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===ee.template||this.type===ee.invalidTemplate)?it===36?(this.pos+=2,this.finishToken(ee.dollarBraceL)):(++this.pos,this.finishToken(ee.backQuote)):(w+=this.input.slice(ne,this.pos),this.finishToken(ee.template,w));if(it===92)w+=this.input.slice(ne,this.pos),w+=this.readEscapedChar(!0),ne=this.pos;else if(Dt(it)){switch(w+=this.input.slice(ne,this.pos),++this.pos,it){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:w+=`
`;break;default:w+=String.fromCharCode(it);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),ne=this.pos}else++this.pos}},Cs.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(ee.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Cs.readEscapedChar=function(w){var ne=this.input.charCodeAt(++this.pos);switch(++this.pos,ne){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ue(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),w){var it=this.pos-1;this.invalidStringToken(it,"Invalid escape sequence in template string")}default:if(ne>=48&&ne<=55){var kt=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],mn=parseInt(kt,8);return mn>255&&(kt=kt.slice(0,-1),mn=parseInt(kt,8)),this.pos+=kt.length-1,ne=this.input.charCodeAt(this.pos),(kt!=="0"||ne===56||ne===57)&&(this.strict||w)&&this.invalidStringToken(this.pos-1-kt.length,w?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(mn)}return Dt(ne)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(ne)}},Cs.readHexChar=function(w){var ne=this.pos,it=this.readInt(16,w);return it===null&&this.invalidStringToken(ne,"Bad character escape sequence"),it},Cs.readWord1=function(){this.containsEsc=!1;for(var w="",ne=!0,it=this.pos,kt=this.options.ecmaVersion>=6;this.pos<this.input.length;){var mn=this.fullCharCodeAtPos();if(ce(mn,kt))this.pos+=mn<=65535?1:2;else if(mn===92){this.containsEsc=!0,w+=this.input.slice(it,this.pos);var er=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var gr=this.readCodePoint();(ne?Be:ce)(gr,kt)||this.invalidStringToken(er,"Invalid Unicode escape"),w+=Ue(gr),it=this.pos}else break;ne=!1}return w+this.input.slice(it,this.pos)},Cs.readWord=function(){var w=this.readWord1(),ne=ee.name;return this.keywords.test(w)&&(ne=Pe[w]),this.finishToken(ne,w)};var hl="8.14.1";xt.acorn={Parser:xt,version:hl,defaultOptions:sn,Position:Ot,SourceLocation:rn,getLineInfo:$t,Node:Zr,TokenType:me,tokTypes:ee,keywordTypes:Pe,TokContext:Br,tokContexts:Mr,isIdentifierChar:ce,isIdentifierStart:Be,Token:yc,isNewLine:Dt,lineBreak:Qe,lineBreakG:wt,nonASCIIwhitespace:Ne};function Fl(w,ne){return xt.parse(w,ne)}function mo(w,ne,it){return xt.parseExpressionAt(w,ne,it)}function xc(w,ne){return xt.tokenizer(w,ne)}L.Node=Zr,L.Parser=xt,L.Position=Ot,L.SourceLocation=rn,L.TokContext=Br,L.Token=yc,L.TokenType=me,L.defaultOptions=sn,L.getLineInfo=$t,L.isIdentifierChar=ce,L.isIdentifierStart=Be,L.isNewLine=Dt,L.keywordTypes=Pe,L.lineBreak=Qe,L.lineBreakG=wt,L.nonASCIIwhitespace=Ne,L.parse=Fl,L.parseExpressionAt=mo,L.tokContexts=Mr,L.tokTypes=ee,L.tokenizer=xc,L.version=hl})}(Xv,Xv.exports)),Xv.exports}var _b;function sO(){return _b||(_b=1,function(E,H){(function(le,Te){E.exports=Te(ty(),nO)})(self,(L,le)=>(()=>{var Te={"./node_modules/call-bind/callBound.js":(je,be,K)=>{var se=K("./node_modules/get-intrinsic/index.js"),B=K("./node_modules/call-bind/index.js"),Fe=B(se("String.prototype.indexOf"));je.exports=function(ce,me){var we=se(ce,!!me);return typeof we=="function"&&Fe(ce,".prototype.")>-1?B(we):we}},"./node_modules/call-bind/index.js":(je,be,K)=>{var se=K("./node_modules/function-bind/index.js"),B=K("./node_modules/get-intrinsic/index.js"),Fe=B("%Function.prototype.apply%"),Be=B("%Function.prototype.call%"),ce=B("%Reflect.apply%",!0)||se.call(Be,Fe),me=B("%Object.getOwnPropertyDescriptor%",!0),we=B("%Object.defineProperty%",!0),ae=B("%Math.max%");if(we)try{we({},"a",{value:1})}catch{we=null}je.exports=function(Se){var ee=ce(se,Be,arguments);if(me&&we){var Qe=me(ee,"length");Qe.configurable&&we(ee,"length",{value:1+ae(0,Se.length-(arguments.length-1))})}return ee};var De=function(){return ce(se,Fe,arguments)};we?we(je.exports,"apply",{value:De}):je.exports.apply=De},"./node_modules/function-bind/implementation.js":je=>{var be="Function.prototype.bind called on incompatible ",K=Array.prototype.slice,se=Object.prototype.toString,B="[object Function]";je.exports=function(Be){var ce=this;if(typeof ce!="function"||se.call(ce)!==B)throw new TypeError(be+ce);for(var me=K.call(arguments,1),we,ae=function(){if(this instanceof we){var Qe=ce.apply(this,me.concat(K.call(arguments)));return Object(Qe)===Qe?Qe:this}else return ce.apply(Be,me.concat(K.call(arguments)))},De=Math.max(0,ce.length-me.length),Pe=[],Se=0;Se<De;Se++)Pe.push("$"+Se);if(we=Function("binder","return function ("+Pe.join(",")+"){ return binder.apply(this,arguments); }")(ae),ce.prototype){var ee=function(){};ee.prototype=ce.prototype,we.prototype=new ee,ee.prototype=null}return we}},"./node_modules/function-bind/index.js":(je,be,K)=>{var se=K("./node_modules/function-bind/implementation.js");je.exports=Function.prototype.bind||se},"./node_modules/get-intrinsic/index.js":(je,be,K)=>{var se,B=SyntaxError,Fe=Function,Be=TypeError,ce=function(Ot){try{return Fe('"use strict"; return ('+Ot+").constructor;")()}catch{}},me=Object.getOwnPropertyDescriptor;if(me)try{me({},"")}catch{me=null}var we=function(){throw new Be},ae=me?function(){try{return arguments.callee,we}catch{try{return me(arguments,"callee").get}catch{return we}}}():we,De=K("./node_modules/has-symbols/index.js")(),Pe=Object.getPrototypeOf||function(Ot){return Ot.__proto__},Se={},ee=typeof Uint8Array>"u"?se:Pe(Uint8Array),Qe={"%AggregateError%":typeof AggregateError>"u"?se:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?se:ArrayBuffer,"%ArrayIteratorPrototype%":De?Pe([][Symbol.iterator]()):se,"%AsyncFromSyncIteratorPrototype%":se,"%AsyncFunction%":Se,"%AsyncGenerator%":Se,"%AsyncGeneratorFunction%":Se,"%AsyncIteratorPrototype%":Se,"%Atomics%":typeof Atomics>"u"?se:Atomics,"%BigInt%":typeof BigInt>"u"?se:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?se:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?se:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?se:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?se:Float32Array,"%Float64Array%":typeof Float64Array>"u"?se:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?se:FinalizationRegistry,"%Function%":Fe,"%GeneratorFunction%":Se,"%Int8Array%":typeof Int8Array>"u"?se:Int8Array,"%Int16Array%":typeof Int16Array>"u"?se:Int16Array,"%Int32Array%":typeof Int32Array>"u"?se:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":De?Pe(Pe([][Symbol.iterator]())):se,"%JSON%":typeof JSON=="object"?JSON:se,"%Map%":typeof Map>"u"?se:Map,"%MapIteratorPrototype%":typeof Map>"u"||!De?se:Pe(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?se:Promise,"%Proxy%":typeof Proxy>"u"?se:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?se:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?se:Set,"%SetIteratorPrototype%":typeof Set>"u"||!De?se:Pe(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?se:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":De?Pe(""[Symbol.iterator]()):se,"%Symbol%":De?Symbol:se,"%SyntaxError%":B,"%ThrowTypeError%":ae,"%TypedArray%":ee,"%TypeError%":Be,"%Uint8Array%":typeof Uint8Array>"u"?se:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?se:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?se:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?se:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?se:WeakMap,"%WeakRef%":typeof WeakRef>"u"?se:WeakRef,"%WeakSet%":typeof WeakSet>"u"?se:WeakSet};try{null.error}catch(Ot){var wt=Pe(Pe(Ot));Qe["%Error.prototype%"]=wt}var Dt=function Ot(rn){var $t;if(rn==="%AsyncFunction%")$t=ce("async function () {}");else if(rn==="%GeneratorFunction%")$t=ce("function* () {}");else if(rn==="%AsyncGeneratorFunction%")$t=ce("async function* () {}");else if(rn==="%AsyncGenerator%"){var sn=Ot("%AsyncGeneratorFunction%");sn&&($t=sn.prototype)}else if(rn==="%AsyncIteratorPrototype%"){var lt=Ot("%AsyncGenerator%");lt&&($t=Pe(lt.prototype))}return Qe[rn]=$t,$t},at={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ne=K("./node_modules/function-bind/index.js"),Je=K("./node_modules/has/src/index.js"),pt=Ne.call(Function.call,Array.prototype.concat),ot=Ne.call(Function.apply,Array.prototype.splice),Jt=Ne.call(Function.call,String.prototype.replace),Qt=Ne.call(Function.call,String.prototype.slice),ut=Ne.call(Function.call,RegExp.prototype.exec),St=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Lt=/\\(\\)?/g,Ue=function(rn){var $t=Qt(rn,0,1),sn=Qt(rn,-1);if($t==="%"&&sn!=="%")throw new B("invalid intrinsic syntax, expected closing `%`");if(sn==="%"&&$t!=="%")throw new B("invalid intrinsic syntax, expected opening `%`");var lt=[];return Jt(rn,St,function(Zt,zt,Le,Mt){lt[lt.length]=Le?Jt(Mt,Lt,"$1"):zt||Zt}),lt},Ut=function(rn,$t){var sn=rn,lt;if(Je(at,sn)&&(lt=at[sn],sn="%"+lt[0]+"%"),Je(Qe,sn)){var Zt=Qe[sn];if(Zt===Se&&(Zt=Dt(sn)),typeof Zt>"u"&&!$t)throw new Be("intrinsic "+rn+" exists, but is not available. Please file an issue!");return{alias:lt,name:sn,value:Zt}}throw new B("intrinsic "+rn+" does not exist!")};je.exports=function(rn,$t){if(typeof rn!="string"||rn.length===0)throw new Be("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof $t!="boolean")throw new Be('"allowMissing" argument must be a boolean');if(ut(/^%?[^%]*%?$/,rn)===null)throw new B("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var sn=Ue(rn),lt=sn.length>0?sn[0]:"",Zt=Ut("%"+lt+"%",$t),zt=Zt.name,Le=Zt.value,Mt=!1,Rt=Zt.alias;Rt&&(lt=Rt[0],ot(sn,pt([0,1],Rt)));for(var tt=1,We=!0;tt<sn.length;tt+=1){var C=sn[tt],U=Qt(C,0,1),Q=Qt(C,-1);if((U==='"'||U==="'"||U==="`"||Q==='"'||Q==="'"||Q==="`")&&U!==Q)throw new B("property names with quotes must have matching quotes");if((C==="constructor"||!We)&&(Mt=!0),lt+="."+C,zt="%"+lt+"%",Je(Qe,zt))Le=Qe[zt];else if(Le!=null){if(!(C in Le)){if(!$t)throw new Be("base intrinsic for "+rn+" exists, but the property is not available.");return}if(me&&tt+1>=sn.length){var fe=me(Le,C);We=!!fe,We&&"get"in fe&&!("originalValue"in fe.get)?Le=fe.get:Le=Le[C]}else We=Je(Le,C),Le=Le[C];We&&!Mt&&(Qe[zt]=Le)}}return Le}},"./node_modules/has-symbols/index.js":(je,be,K)=>{var se=typeof Symbol<"u"&&Symbol,B=K("./node_modules/has-symbols/shams.js");je.exports=function(){return typeof se!="function"||typeof Symbol!="function"||typeof se("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:B()}},"./node_modules/has-symbols/shams.js":je=>{je.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var K={},se=Symbol("test"),B=Object(se);if(typeof se=="string"||Object.prototype.toString.call(se)!=="[object Symbol]"||Object.prototype.toString.call(B)!=="[object Symbol]")return!1;var Fe=42;K[se]=Fe;for(se in K)return!1;if(typeof Object.keys=="function"&&Object.keys(K).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(K).length!==0)return!1;var Be=Object.getOwnPropertySymbols(K);if(Be.length!==1||Be[0]!==se||!Object.prototype.propertyIsEnumerable.call(K,se))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var ce=Object.getOwnPropertyDescriptor(K,se);if(ce.value!==Fe||ce.enumerable!==!0)return!1}return!0}},"./node_modules/has/src/index.js":(je,be,K)=>{var se=K("./node_modules/function-bind/index.js");je.exports=se.call(Function.call,Object.prototype.hasOwnProperty)},"./node_modules/lodash/lodash.js":function(je,be,K){je=K.nmd(je);var se;(function(){var B,Fe="4.17.21",Be=200,ce="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",me="Expected a function",we="Invalid `variable` option passed into `_.template`",ae="__lodash_hash_undefined__",De=500,Pe="__lodash_placeholder__",Se=1,ee=2,Qe=4,wt=1,Dt=2,at=1,Ne=2,Je=4,pt=8,ot=16,Jt=32,Qt=64,ut=128,St=256,Lt=512,Ue=30,Ut="...",Ot=800,rn=16,$t=1,sn=2,lt=3,Zt=1/0,zt=9007199254740991,Le=17976931348623157e292,Mt=NaN,Rt=4294967295,tt=Rt-1,We=Rt>>>1,C=[["ary",ut],["bind",at],["bindKey",Ne],["curry",pt],["curryRight",ot],["flip",Lt],["partial",Jt],["partialRight",Qt],["rearg",St]],U="[object Arguments]",Q="[object Array]",fe="[object AsyncFunction]",de="[object Boolean]",Ce="[object Date]",Ye="[object DOMException]",Ke="[object Error]",ct="[object Function]",_t="[object GeneratorFunction]",qe="[object Map]",ht="[object Number]",Pt="[object Null]",xt="[object Object]",Ge="[object Promise]",en="[object Proxy]",bt="[object RegExp]",Vt="[object Set]",_n="[object String]",Yn="[object Symbol]",or="[object Undefined]",lr="[object WeakMap]",Jn="[object WeakSet]",$n="[object ArrayBuffer]",Tn="[object DataView]",Gn="[object Float32Array]",tr="[object Float64Array]",pr="[object Int8Array]",Br="[object Int16Array]",Mr="[object Int32Array]",pn="[object Uint8Array]",Wt="[object Uint8ClampedArray]",un="[object Uint16Array]",fn="[object Uint32Array]",Bn=/\b__p \+= '';/g,Hn=/\b(__p \+=) '' \+/g,yr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zr=/&(?:amp|lt|gt|quot|#39);/g,Zr=/[&<>"']/g,Ni=RegExp(zr.source),as=RegExp(Zr.source),Ss=/<%-([\s\S]+?)%>/g,Os=/<%([\s\S]+?)%>/g,go=/<%=([\s\S]+?)%>/g,$u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gc=/^\w*$/,Xl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Co=/[\\^$.*+?()[\]{}|]/g,Mu=RegExp(Co.source),Ha=/^\s+/,vh=/\s/,mc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Vc=/\{\n\/\* \[wrapped with (.+)\] \*/,Pu=/,? & /,Ou=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Jo=/[()=,{}\[\]\/\s]/,Ku=/\\(\\)?/g,ca=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ql=/\w*$/,Jl=/^[-+]0x[0-9a-f]+$/i,qu=/^0b[01]+$/i,Xu=/^\[object .+?Constructor\]$/,_h=/^0o[0-7]+$/i,Sl=/^(?:0|[1-9]\d*)$/,wi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ja=/($^)/,fu=/['\n\r\u2028\u2029\\]/g,lo="\\ud800-\\udfff",cp="\\u0300-\\u036f",Td="\\ufe20-\\ufe2f",hp="\\u20d0-\\u20ff",Hc=cp+Td+hp,vc="\\u2700-\\u27bf",_c="a-z\\xdf-\\xf6\\xf8-\\xff",yh="\\xac\\xb1\\xd7\\xf7",ku="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Vo="\\u2000-\\u206f",af=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wc="A-Z\\xc0-\\xd6\\xd8-\\xde",Gc="\\ufe0e\\ufe0f",Iu=yh+ku+Vo+af,wh="['’]",Vf="["+lo+"]",Vs="["+Iu+"]",Lu="["+Hc+"]",xh="\\d+",of="["+vc+"]",yc="["+_c+"]",Cs="[^"+lo+Iu+xh+vc+_c+Wc+"]",Yc="\\ud83c[\\udffb-\\udfff]",lf="(?:"+Lu+"|"+Yc+")",wc="[^"+lo+"]",hl="(?:\\ud83c[\\udde6-\\uddff]){2}",Fl="[\\ud800-\\udbff][\\udc00-\\udfff]",mo="["+Wc+"]",xc="\\u200d",w="(?:"+yc+"|"+Cs+")",ne="(?:"+mo+"|"+Cs+")",it="(?:"+wh+"(?:d|ll|m|re|s|t|ve))?",kt="(?:"+wh+"(?:D|LL|M|RE|S|T|VE))?",mn=lf+"?",er="["+Gc+"]?",gr="(?:"+xc+"(?:"+[wc,hl,Fl].join("|")+")"+er+mn+")*",ni="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",li="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",os=er+mn+gr,Xi="(?:"+[of,hl,Fl].join("|")+")"+os,Ar="(?:"+[wc+Lu+"?",Lu,hl,Fl,Vf].join("|")+")",ss=RegExp(wh,"g"),Bu=RegExp(Lu,"g"),eu=RegExp(Yc+"(?="+Yc+")|"+Ar+os,"g"),uf=RegExp([mo+"?"+yc+"+"+it+"(?="+[Vs,mo,"$"].join("|")+")",ne+"+"+kt+"(?="+[Vs,mo+w,"$"].join("|")+")",mo+"?"+w+"+"+it,mo+"+"+kt,li,ni,xh,Xi].join("|"),"g"),du=RegExp("["+xc+lo+Hc+Gc+"]"),pu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Md=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rg=-1,Gi={};Gi[Gn]=Gi[tr]=Gi[pr]=Gi[Br]=Gi[Mr]=Gi[pn]=Gi[Wt]=Gi[un]=Gi[fn]=!0,Gi[U]=Gi[Q]=Gi[$n]=Gi[de]=Gi[Tn]=Gi[Ce]=Gi[Ke]=Gi[ct]=Gi[qe]=Gi[ht]=Gi[xt]=Gi[bt]=Gi[Vt]=Gi[_n]=Gi[lr]=!1;var Yi={};Yi[U]=Yi[Q]=Yi[$n]=Yi[Tn]=Yi[de]=Yi[Ce]=Yi[Gn]=Yi[tr]=Yi[pr]=Yi[Br]=Yi[Mr]=Yi[qe]=Yi[ht]=Yi[xt]=Yi[bt]=Yi[Vt]=Yi[_n]=Yi[Yn]=Yi[pn]=Yi[Wt]=Yi[un]=Yi[fn]=!0,Yi[Ke]=Yi[ct]=Yi[lr]=!1;var Hf={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Pd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Od={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fp=parseFloat,tu=parseInt,bc=typeof K.g=="object"&&K.g&&K.g.Object===Object&&K.g,kd=typeof self=="object"&&self&&self.Object===Object&&self,Ls=bc||kd||Function("return this")(),dp=be&&!be.nodeType&&be,Ru=dp&&!0&&je&&!je.nodeType&&je,Gf=Ru&&Ru.exports===dp,Qu=Gf&&bc.process,La=function(){try{var Xt=Ru&&Ru.require&&Ru.require("util").types;return Xt||Qu&&Qu.binding&&Qu.binding("util")}catch{}}(),Id=La&&La.isArrayBuffer,pp=La&&La.isDate,gu=La&&La.isMap,gp=La&&La.isRegExp,Yf=La&&La.isSet,mp=La&&La.isTypedArray;function Ba(Xt,Dn,vn){switch(vn.length){case 0:return Xt.call(Dn);case 1:return Xt.call(Dn,vn[0]);case 2:return Xt.call(Dn,vn[0],vn[1]);case 3:return Xt.call(Dn,vn[0],vn[1],vn[2])}return Xt.apply(Dn,vn)}function Yg(Xt,Dn,vn,Er){for(var Tr=-1,bi=Xt==null?0:Xt.length;++Tr<bi;){var xs=Xt[Tr];Dn(Er,xs,vn(xs),Xt)}return Er}function Wa(Xt,Dn){for(var vn=-1,Er=Xt==null?0:Xt.length;++vn<Er&&Dn(Xt[vn],vn,Xt)!==!1;);return Xt}function vp(Xt,Dn){for(var vn=Xt==null?0:Xt.length;vn--&&Dn(Xt[vn],vn,Xt)!==!1;);return Xt}function Ld(Xt,Dn){for(var vn=-1,Er=Xt==null?0:Xt.length;++vn<Er;)if(!Dn(Xt[vn],vn,Xt))return!1;return!0}function Cl(Xt,Dn){for(var vn=-1,Er=Xt==null?0:Xt.length,Tr=0,bi=[];++vn<Er;){var xs=Xt[vn];Dn(xs,vn,Xt)&&(bi[Tr++]=xs)}return bi}function Zc(Xt,Dn){var vn=Xt==null?0:Xt.length;return!!vn&&Dl(Xt,Dn,0)>-1}function Sc(Xt,Dn,vn){for(var Er=-1,Tr=Xt==null?0:Xt.length;++Er<Tr;)if(vn(Dn,Xt[Er]))return!0;return!1}function ts(Xt,Dn){for(var vn=-1,Er=Xt==null?0:Xt.length,Tr=Array(Er);++vn<Er;)Tr[vn]=Dn(Xt[vn],vn,Xt);return Tr}function el(Xt,Dn){for(var vn=-1,Er=Dn.length,Tr=Xt.length;++vn<Er;)Xt[Tr+vn]=Dn[vn];return Xt}function Zf(Xt,Dn,vn,Er){var Tr=-1,bi=Xt==null?0:Xt.length;for(Er&&bi&&(vn=Xt[++Tr]);++Tr<bi;)vn=Dn(vn,Xt[Tr],Tr,Xt);return vn}function _p(Xt,Dn,vn,Er){var Tr=Xt==null?0:Xt.length;for(Er&&Tr&&(vn=Xt[--Tr]);Tr--;)vn=Dn(vn,Xt[Tr],Tr,Xt);return vn}function $f(Xt,Dn){for(var vn=-1,Er=Xt==null?0:Xt.length;++vn<Er;)if(Dn(Xt[vn],vn,Xt))return!0;return!1}var ig=Dc("length");function Bd(Xt){return Xt.split("")}function Cc(Xt){return Xt.match(Ou)||[]}function Kf(Xt,Dn,vn){var Er;return vn(Xt,function(Tr,bi,xs){if(Dn(Tr,bi,xs))return Er=bi,!1}),Er}function $c(Xt,Dn,vn,Er){for(var Tr=Xt.length,bi=vn+(Er?1:-1);Er?bi--:++bi<Tr;)if(Dn(Xt[bi],bi,Xt))return bi;return-1}function Dl(Xt,Dn,vn){return Dn===Dn?Kg(Xt,Dn,vn):$c(Xt,yp,vn)}function Zg(Xt,Dn,vn,Er){for(var Tr=vn-1,bi=Xt.length;++Tr<bi;)if(Er(Xt[Tr],Dn))return Tr;return-1}function yp(Xt){return Xt!==Xt}function qf(Xt,Dn){var vn=Xt==null?0:Xt.length;return vn?hf(Xt,Dn)/vn:Mt}function Dc(Xt){return function(Dn){return Dn==null?B:Dn[Xt]}}function cf(Xt){return function(Dn){return Xt==null?B:Xt[Dn]}}function Rd(Xt,Dn,vn,Er,Tr){return Tr(Xt,function(bi,xs,ki){vn=Er?(Er=!1,bi):Dn(vn,bi,xs,ki)}),vn}function sg(Xt,Dn){var vn=Xt.length;for(Xt.sort(Dn);vn--;)Xt[vn]=Xt[vn].value;return Xt}function hf(Xt,Dn){for(var vn,Er=-1,Tr=Xt.length;++Er<Tr;){var bi=Dn(Xt[Er]);bi!==B&&(vn=vn===B?bi:vn+bi)}return vn}function bh(Xt,Dn){for(var vn=-1,Er=Array(Xt);++vn<Xt;)Er[vn]=Dn(vn);return Er}function ag(Xt,Dn){return ts(Dn,function(vn){return[vn,Xt[vn]]})}function Kc(Xt){return Xt&&Xt.slice(0,qc(Xt)+1).replace(Ha,"")}function Aa(Xt){return function(Dn){return Xt(Dn)}}function ff(Xt,Dn){return ts(Dn,function(vn){return Xt[vn]})}function Ac(Xt,Dn){return Xt.has(Dn)}function Xf(Xt,Dn){for(var vn=-1,Er=Xt.length;++vn<Er&&Dl(Dn,Xt[vn],0)>-1;);return vn}function df(Xt,Dn){for(var vn=Xt.length;vn--&&Dl(Dn,Xt[vn],0)>-1;);return vn}function pf(Xt,Dn){for(var vn=Xt.length,Er=0;vn--;)Xt[vn]===Dn&&++Er;return Er}var gf=cf(Hf),mf=cf(Pd);function Qf(Xt){return"\\"+Od[Xt]}function wp(Xt,Dn){return Xt==null?B:Xt[Dn]}function nu(Xt){return du.test(Xt)}function xp(Xt){return pu.test(Xt)}function Jf(Xt){for(var Dn,vn=[];!(Dn=Xt.next()).done;)vn.push(Dn.value);return vn}function ru(Xt){var Dn=-1,vn=Array(Xt.size);return Xt.forEach(function(Er,Tr){vn[++Dn]=[Tr,Er]}),vn}function Sh(Xt,Dn){return function(vn){return Xt(Dn(vn))}}function Ro(Xt,Dn){for(var vn=-1,Er=Xt.length,Tr=0,bi=[];++vn<Er;){var xs=Xt[vn];(xs===Dn||xs===Pe)&&(Xt[vn]=Pe,bi[Tr++]=vn)}return bi}function Ec(Xt){var Dn=-1,vn=Array(Xt.size);return Xt.forEach(function(Er){vn[++Dn]=Er}),vn}function $g(Xt){var Dn=-1,vn=Array(Xt.size);return Xt.forEach(function(Er){vn[++Dn]=[Er,Er]}),vn}function Kg(Xt,Dn,vn){for(var Er=vn-1,Tr=Xt.length;++Er<Tr;)if(Xt[Er]===Dn)return Er;return-1}function qg(Xt,Dn,vn){for(var Er=vn+1;Er--;)if(Xt[Er]===Dn)return Er;return Er}function iu(Xt){return nu(Xt)?bp(Xt):ig(Xt)}function sa(Xt){return nu(Xt)?vf(Xt):Bd(Xt)}function qc(Xt){for(var Dn=Xt.length;Dn--&&vh.test(Xt.charAt(Dn)););return Dn}var vo=cf(Wf);function bp(Xt){for(var Dn=eu.lastIndex=0;eu.test(Xt);)++Dn;return Dn}function vf(Xt){return Xt.match(eu)||[]}function _f(Xt){return Xt.match(uf)||[]}var Nd=function Xt(Dn){Dn=Dn==null?Ls:Ii.defaults(Ls.Object(),Dn,Ii.pick(Ls,Md));var vn=Dn.Array,Er=Dn.Date,Tr=Dn.Error,bi=Dn.Function,xs=Dn.Math,ki=Dn.Object,Ch=Dn.RegExp,og=Dn.String,Sa=Dn.TypeError,su=vn.prototype,lg=bi.prototype,mu=ki.prototype,Ju=Dn["__core-js_shared__"],au=lg.toString,ji=mu.hasOwnProperty,Xc=0,Dh=function(){var r=/[^.]+$/.exec(Ju&&Ju.keys&&Ju.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),vu=mu.toString,Xg=au.call(ki),Qg=Ls._,Ah=Ch("^"+au.call(ji).replace(Co,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_u=Gf?Dn.Buffer:B,fl=Dn.Symbol,Qc=Dn.Uint8Array,va=_u?_u.allocUnsafe:B,Nu=Sh(ki.getPrototypeOf,ki),yf=ki.create,Eh=mu.propertyIsEnumerable,ec=su.splice,wf=fl?fl.isConcatSpreadable:B,ou=fl?fl.iterator:B,dl=fl?fl.toStringTag:B,zl=function(){try{var r=an(ki,"defineProperty");return r({},"",{}),r}catch{}}(),xf=Dn.clearTimeout!==Ls.clearTimeout&&Dn.clearTimeout,Jg=Er&&Er.now!==Ls.Date.now&&Er.now,em=Dn.setTimeout!==Ls.setTimeout&&Dn.setTimeout,tc=xs.ceil,yu=xs.floor,Jc=ki.getOwnPropertySymbols,Sp=_u?_u.isBuffer:B,Th=Dn.isFinite,_a=su.join,ya=Sh(ki.keys,ki),ks=xs.max,Qs=xs.min,ug=Er.now,Fd=Dn.parseInt,bf=xs.random,Tc=su.reverse,Mh=an(Dn,"DataView"),Ul=an(Dn,"Map"),jl=an(Dn,"Promise"),Ho=an(Dn,"Set"),Wo=an(Dn,"WeakMap"),Go=an(ki,"create"),eh=Wo&&new Wo,Fu={},th=ui(Mh),ed=ui(Ul),wu=ui(jl),zd=ui(Ho),Cp=ui(Wo),xu=fl?fl.prototype:B,pl=xu?xu.valueOf:B,Ea=xu?xu.toString:B;function ye(r){if(Ei(r)&&!ri(r)&&!(r instanceof hi)){if(r instanceof Bs)return r;if(ji.call(r,"__wrapped__"))return ar(r)}return new Bs(r)}var Yo=function(){function r(){}return function(a){if(!qr(a))return{};if(yf)return yf(a);r.prototype=a;var g=new r;return r.prototype=B,g}}();function wa(){}function Bs(r,a){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=B}ye.templateSettings={escape:Ss,evaluate:Os,interpolate:go,variable:"",imports:{_:ye}},ye.prototype=wa.prototype,ye.prototype.constructor=ye,Bs.prototype=Yo(wa.prototype),Bs.prototype.constructor=Bs;function hi(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Rt,this.__views__=[]}function Ph(){var r=new hi(this.__wrapped__);return r.__actions__=Js(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Js(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Js(this.__views__),r}function Al(){if(this.__filtered__){var r=new hi(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Oh(){var r=this.__wrapped__.value(),a=this.__dir__,g=ri(r),O=a<0,ue=g?r.length:0,Me=On(0,ue,this.__views__),dt=Me.start,Bt=Me.end,nn=Bt-dt,kn=O?Bt:dt-1,Ln=this.__iteratees__,zn=Ln.length,_r=0,Fr=Qs(nn,this.__takeCount__);if(!g||!O&&ue==nn&&Fr==nn)return cd(r,this.__actions__);var Xr=[];e:for(;nn--&&_r<Fr;){kn+=a;for(var ci=-1,Qr=r[kn];++ci<zn;){var yi=Ln[ci],Ci=yi.iteratee,to=yi.type,ka=Ci(Qr);if(to==sn)Qr=ka;else if(!ka){if(to==$t)continue e;break e}}Xr[_r++]=Qr}return Xr}hi.prototype=Yo(wa.prototype),hi.prototype.constructor=hi;function El(r){var a=-1,g=r==null?0:r.length;for(this.clear();++a<g;){var O=r[a];this.set(O[0],O[1])}}function cg(){this.__data__=Go?Go(null):{},this.size=0}function Sf(r){var a=this.has(r)&&delete this.__data__[r];return this.size-=a?1:0,a}function Dp(r){var a=this.__data__;if(Go){var g=a[r];return g===ae?B:g}return ji.call(a,r)?a[r]:B}function Mc(r){var a=this.__data__;return Go?a[r]!==B:ji.call(a,r)}function Ud(r,a){var g=this.__data__;return this.size+=this.has(r)?0:1,g[r]=Go&&a===B?ae:a,this}El.prototype.clear=cg,El.prototype.delete=Sf,El.prototype.get=Dp,El.prototype.has=Mc,El.prototype.set=Ud;function No(r){var a=-1,g=r==null?0:r.length;for(this.clear();++a<g;){var O=r[a];this.set(O[0],O[1])}}function hg(){this.__data__=[],this.size=0}function Ap(r){var a=this.__data__,g=Su(a,r);if(g<0)return!1;var O=a.length-1;return g==O?a.pop():ec.call(a,g,1),--this.size,!0}function nh(r){var a=this.__data__,g=Su(a,r);return g<0?B:a[g][1]}function Cf(r){return Su(this.__data__,r)>-1}function nc(r,a){var g=this.__data__,O=Su(g,r);return O<0?(++this.size,g.push([r,a])):g[O][1]=a,this}No.prototype.clear=hg,No.prototype.delete=Ap,No.prototype.get=nh,No.prototype.has=Cf,No.prototype.set=nc;function Do(r){var a=-1,g=r==null?0:r.length;for(this.clear();++a<g;){var O=r[a];this.set(O[0],O[1])}}function td(){this.size=0,this.__data__={hash:new El,map:new(Ul||No),string:new El}}function tl(r){var a=Kt(this,r).delete(r);return this.size-=a?1:0,a}function bu(r){return Kt(this,r).get(r)}function rh(r){return Kt(this,r).has(r)}function rc(r,a){var g=Kt(this,r),O=g.size;return g.set(r,a),this.size+=g.size==O?0:1,this}Do.prototype.clear=td,Do.prototype.delete=tl,Do.prototype.get=bu,Do.prototype.has=rh,Do.prototype.set=rc;function uo(r){var a=-1,g=r==null?0:r.length;for(this.__data__=new Do;++a<g;)this.add(r[a])}function ic(r){return this.__data__.set(r,ae),this}function jd(r){return this.__data__.has(r)}uo.prototype.add=uo.prototype.push=ic,uo.prototype.has=jd;function Ga(r){var a=this.__data__=new No(r);this.size=a.size}function Vd(){this.__data__=new No,this.size=0}function Tl(r){var a=this.__data__,g=a.delete(r);return this.size=a.size,g}function Vl(r){return this.__data__.get(r)}function Ys(r){return this.__data__.has(r)}function zu(r,a){var g=this.__data__;if(g instanceof No){var O=g.__data__;if(!Ul||O.length<Be-1)return O.push([r,a]),this.size=++g.size,this;g=this.__data__=new Do(O)}return g.set(r,a),this.size=g.size,this}Ga.prototype.clear=Vd,Ga.prototype.delete=Tl,Ga.prototype.get=Vl,Ga.prototype.has=Ys,Ga.prototype.set=zu;function nd(r,a){var g=ri(r),O=!g&&ps(r),ue=!g&&!O&&ii(r),Me=!g&&!O&&!ue&&la(r),dt=g||O||ue||Me,Bt=dt?bh(r.length,og):[],nn=Bt.length;for(var kn in r)(a||ji.call(r,kn))&&!(dt&&(kn=="length"||ue&&(kn=="offset"||kn=="parent")||Me&&(kn=="buffer"||kn=="byteLength"||kn=="byteOffset")||si(kn,nn)))&&Bt.push(kn);return Bt}function Hd(r){var a=r.length;return a?r[Ko(0,a-1)]:B}function rd(r,a){return Ds(Js(r),Ml(a,0,r.length))}function id(r){return Ds(Js(r))}function Df(r,a,g){(g!==B&&!Li(r[a],g)||g===B&&!(a in r))&&co(r,a,g)}function Hl(r,a,g){var O=r[a];(!(ji.call(r,a)&&Li(O,g))||g===B&&!(a in r))&&co(r,a,g)}function Su(r,a){for(var g=r.length;g--;)if(Li(r[g][0],a))return g;return-1}function kh(r,a,g,O){return _o(r,function(ue,Me,dt){a(O,ue,g(ue),dt)}),O}function Ih(r,a){return r&&ho(a,Ks(a),r)}function fg(r,a){return r&&ho(a,Ua(a),r)}function co(r,a,g){a=="__proto__"&&zl?zl(r,a,{configurable:!0,enumerable:!0,value:g,writable:!0}):r[a]=g}function Pc(r,a){for(var g=-1,O=a.length,ue=vn(O),Me=r==null;++g<O;)ue[g]=Me?B:Lp(r,a[g]);return ue}function Ml(r,a,g){return r===r&&(g!==B&&(r=r<=g?r:g),a!==B&&(r=r>=a?r:a)),r}function eo(r,a,g,O,ue,Me){var dt,Bt=a&Se,nn=a&ee,kn=a&Qe;if(g&&(dt=ue?g(r,O,ue,Me):g(r)),dt!==B)return dt;if(!qr(r))return r;var Ln=ri(r);if(Ln){if(dt=ei(r),!Bt)return Js(r,dt)}else{var zn=Sr(r),_r=zn==ct||zn==_t;if(ii(r))return kc(r,Bt);if(zn==xt||zn==U||_r&&!ue){if(dt=nn||_r?{}:oi(r),!Bt)return nn?If(r,fg(dt,r)):Xd(r,Ih(dt,r))}else{if(!Yi[zn])return ue?r:{};dt=xr(r,zn,Bt)}}Me||(Me=new Ga);var Fr=Me.get(r);if(Fr)return Fr;Me.set(r,dt),Zu(r)?r.forEach(function(Qr){dt.add(eo(Qr,a,g,Qr,r,Me))}):uu(r)&&r.forEach(function(Qr,yi){dt.set(yi,eo(Qr,a,g,yi,r,Me))});var Xr=kn?nn?re:rt:nn?Ua:Ks,ci=Ln?B:Xr(r);return Wa(ci||r,function(Qr,yi){ci&&(yi=Qr,Qr=r[yi]),Hl(dt,yi,eo(Qr,a,g,yi,r,Me))}),dt}function Af(r){var a=Ks(r);return function(g){return Lh(g,r,a)}}function Lh(r,a,g){var O=g.length;if(r==null)return!O;for(r=ki(r);O--;){var ue=g[O],Me=a[ue],dt=r[ue];if(dt===B&&!(ue in r)||!Me(dt))return!1}return!0}function Bh(r,a,g){if(typeof r!="function")throw new Sa(me);return so(function(){r.apply(B,g)},a)}function gl(r,a,g,O){var ue=-1,Me=Zc,dt=!0,Bt=r.length,nn=[],kn=a.length;if(!Bt)return nn;g&&(a=ts(a,Aa(g))),O?(Me=Sc,dt=!1):a.length>=Be&&(Me=Ac,dt=!1,a=new uo(a));e:for(;++ue<Bt;){var Ln=r[ue],zn=g==null?Ln:g(Ln);if(Ln=O||Ln!==0?Ln:0,dt&&zn===zn){for(var _r=kn;_r--;)if(a[_r]===zn)continue e;nn.push(Ln)}else Me(a,zn,O)||nn.push(Ln)}return nn}var _o=Lf(yo),Rh=Lf(Pl,!0);function sd(r,a){var g=!0;return _o(r,function(O,ue,Me){return g=!!a(O,ue,Me),g}),g}function Zo(r,a,g){for(var O=-1,ue=r.length;++O<ue;){var Me=r[O],dt=a(Me);if(dt!=null&&(Bt===B?dt===dt&&!Gs(dt):g(dt,Bt)))var Bt=dt,nn=Me}return nn}function Wd(r,a,g,O){var ue=r.length;for(g=Gt(g),g<0&&(g=-g>ue?0:ue+g),O=O===B||O>ue?ue:Gt(O),O<0&&(O+=ue),O=g>O?0:Nn(O);g<O;)r[g++]=a;return r}function Oc(r,a){var g=[];return _o(r,function(O,ue,Me){a(O,ue,Me)&&g.push(O)}),g}function cs(r,a,g,O,ue){var Me=-1,dt=r.length;for(g||(g=Fn),ue||(ue=[]);++Me<dt;){var Bt=r[Me];a>0&&g(Bt)?a>1?cs(Bt,a-1,g,O,ue):el(ue,Bt):O||(ue[ue.length]=Bt)}return ue}var Cu=Qd(),Ef=Qd(!0);function yo(r,a){return r&&Cu(r,a,Ks)}function Pl(r,a){return r&&Ef(r,a,Ks)}function ml(r,a){return Cl(a,function(g){return Si(r[g])})}function nl(r,a){a=To(a,r);for(var g=0,O=a.length;r!=null&&g<O;)r=r[Ai(a[g++])];return g&&g==O?r:B}function Nh(r,a,g){var O=a(r);return ri(r)?O:el(O,g(r))}function Rs(r){return r==null?r===B?or:Pt:dl&&dl in ki(r)?Cn(r):Fi(r)}function Du(r,a){return r>a}function ad(r,a){return r!=null&&ji.call(r,a)}function dg(r,a){return r!=null&&a in ki(r)}function Gd(r,a,g){return r>=Qs(a,g)&&r<ks(a,g)}function Fh(r,a,g){for(var O=g?Sc:Zc,ue=r[0].length,Me=r.length,dt=Me,Bt=vn(Me),nn=1/0,kn=[];dt--;){var Ln=r[dt];dt&&a&&(Ln=ts(Ln,Aa(a))),nn=Qs(Ln.length,nn),Bt[dt]=!g&&(a||ue>=120&&Ln.length>=120)?new uo(dt&&Ln):B}Ln=r[0];var zn=-1,_r=Bt[0];e:for(;++zn<ue&&kn.length<nn;){var Fr=Ln[zn],Xr=a?a(Fr):Fr;if(Fr=g||Fr!==0?Fr:0,!(_r?Ac(_r,Xr):O(kn,Xr,g))){for(dt=Me;--dt;){var ci=Bt[dt];if(!(ci?Ac(ci,Xr):O(r[dt],Xr,g)))continue e}_r&&_r.push(Xr),kn.push(Fr)}}return kn}function zh(r,a,g,O){return yo(r,function(ue,Me,dt){a(O,g(ue),Me,dt)}),O}function Fo(r,a,g){a=To(a,r),r=wo(r,a);var O=r==null?r:r[Ai(Ee(a))];return O==null?B:Ba(O,r,g)}function Uh(r){return Ei(r)&&Rs(r)==U}function od(r){return Ei(r)&&Rs(r)==$n}function jh(r){return Ei(r)&&Rs(r)==Ce}function Uu(r,a,g,O,ue){return r===a?!0:r==null||a==null||!Ei(r)&&!Ei(a)?r!==r&&a!==a:ju(r,a,g,O,Uu,ue)}function ju(r,a,g,O,ue,Me){var dt=ri(r),Bt=ri(a),nn=dt?Q:Sr(r),kn=Bt?Q:Sr(a);nn=nn==U?xt:nn,kn=kn==U?xt:kn;var Ln=nn==xt,zn=kn==xt,_r=nn==kn;if(_r&&ii(r)){if(!ii(a))return!1;dt=!0,Ln=!1}if(_r&&!Ln)return Me||(Me=new Ga),dt||la(r)?k(r,a,g,O,ue,Me):W(r,a,nn,g,O,ue,Me);if(!(g&wt)){var Fr=Ln&&ji.call(r,"__wrapped__"),Xr=zn&&ji.call(a,"__wrapped__");if(Fr||Xr){var ci=Fr?r.value():r,Qr=Xr?a.value():a;return Me||(Me=new Ga),ue(ci,Qr,g,O,Me)}}return _r?(Me||(Me=new Ga),ve(r,a,g,O,ue,Me)):!1}function Ep(r){return Ei(r)&&Sr(r)==qe}function Vu(r,a,g,O){var ue=g.length,Me=ue,dt=!O;if(r==null)return!Me;for(r=ki(r);ue--;){var Bt=g[ue];if(dt&&Bt[2]?Bt[1]!==r[Bt[0]]:!(Bt[0]in r))return!1}for(;++ue<Me;){Bt=g[ue];var nn=Bt[0],kn=r[nn],Ln=Bt[1];if(dt&&Bt[2]){if(kn===B&&!(nn in r))return!1}else{var zn=new Ga;if(O)var _r=O(kn,Ln,nn,r,a,zn);if(!(_r===B?Uu(Ln,kn,wt|Dt,O,zn):_r))return!1}}return!0}function Or(r){if(!qr(r)||Hs(r))return!1;var a=Si(r)?Ah:Xu;return a.test(ui(r))}function Yd(r){return Ei(r)&&Rs(r)==bt}function Vh(r){return Ei(r)&&Sr(r)==Vt}function Tf(r){return Ei(r)&&Pa(r.length)&&!!Gi[Rs(r)]}function ih(r){return typeof r=="function"?r:r==null?Qa:typeof r=="object"?ri(r)?lu(r[0],r[1]):ha(r):Eg(r)}function sh(r){if(!da(r))return ya(r);var a=[];for(var g in ki(r))ji.call(r,g)&&g!="constructor"&&a.push(g);return a}function sc(r){if(!qr(r))return Ti(r);var a=da(r),g=[];for(var O in r)O=="constructor"&&(a||!ji.call(r,O))||g.push(O);return g}function Ta(r,a){return r<a}function aa(r,a){var g=-1,O=es(r)?vn(r.length):[];return _o(r,function(ue,Me,dt){O[++g]=a(ue,Me,dt)}),O}function ha(r){var a=At(r);return a.length==1&&a[0][2]?fo(a[0][0],a[0][1]):function(g){return g===r||Vu(g,r,a)}}function lu(r,a){return ai(r)&&Zi(a)?fo(Ai(r),a):function(g){var O=Lp(g,r);return O===B&&O===a?cc(g,r):Uu(a,O,wt|Dt)}}function $o(r,a,g,O,ue){r!==a&&Cu(a,function(Me,dt){if(ue||(ue=new Ga),qr(Me))Au(r,a,dt,g,$o,O,ue);else{var Bt=O?O(Fa(r,dt),Me,dt+"",r,a,ue):B;Bt===B&&(Bt=Me),Df(r,dt,Bt)}},Ua)}function Au(r,a,g,O,ue,Me,dt){var Bt=Fa(r,g),nn=Fa(a,g),kn=dt.get(nn);if(kn){Df(r,g,kn);return}var Ln=Me?Me(Bt,nn,g+"",r,a,dt):B,zn=Ln===B;if(zn){var _r=ri(nn),Fr=!_r&&ii(nn),Xr=!_r&&!Fr&&la(nn);Ln=nn,_r||Fr||Xr?ri(Bt)?Ln=Bt:qi(Bt)?Ln=Js(Bt):Fr?(zn=!1,Ln=kc(nn,!0)):Xr?(zn=!1,Ln=qd(nn,!0)):Ln=[]:qa(nn)||ps(nn)?(Ln=Bt,ps(Bt)?Ln=ke(Bt):(!qr(Bt)||Si(Bt))&&(Ln=oi(nn))):zn=!1}zn&&(dt.set(nn,Ln),ue(Ln,nn,O,Me,dt),dt.delete(nn)),Df(r,g,Ln)}function Ao(r,a){var g=r.length;if(g)return a+=a<0?g:0,si(a,g)?r[a]:B}function Eo(r,a,g){a.length?a=ts(a,function(Me){return ri(Me)?function(dt){return nl(dt,Me.length===1?Me[0]:Me)}:Me}):a=[Qa];var O=-1;a=ts(a,Aa(Ie()));var ue=aa(r,function(Me,dt,Bt){var nn=ts(a,function(kn){return kn(Me)});return{criteria:nn,index:++O,value:Me}});return sg(ue,function(Me,dt){return kp(Me,dt,g)})}function ld(r,a){return Hu(r,a,function(g,O){return cc(r,O)})}function Hu(r,a,g){for(var O=-1,ue=a.length,Me={};++O<ue;){var dt=a[O],Bt=nl(r,dt);g(Bt,dt)&&Wu(Me,To(dt,r),Bt)}return Me}function Tp(r){return function(a){return nl(a,r)}}function Ol(r,a,g,O){var ue=O?Zg:Dl,Me=-1,dt=a.length,Bt=r;for(r===a&&(a=Js(a)),g&&(Bt=ts(r,Aa(g)));++Me<dt;)for(var nn=0,kn=a[Me],Ln=g?g(kn):kn;(nn=ue(Bt,Ln,nn,O))>-1;)Bt!==r&&ec.call(Bt,nn,1),ec.call(r,nn,1);return r}function Wl(r,a){for(var g=r?a.length:0,O=g-1;g--;){var ue=a[g];if(g==O||ue!==Me){var Me=ue;si(ue)?ec.call(r,ue,1):Pf(r,ue)}}return r}function Ko(r,a){return r+yu(bf()*(a-r+1))}function vr(r,a,g,O){for(var ue=-1,Me=ks(tc((a-r)/(g||1)),0),dt=vn(Me);Me--;)dt[O?Me:++ue]=r,r+=g;return dt}function ah(r,a){var g="";if(!r||a<1||a>zt)return g;do a%2&&(g+=r),a=yu(a/2),a&&(r+=r);while(a);return g}function fi(r,a){return pa(zi(r,a,Qa),r+"")}function pg(r){return Hd(Fc(r))}function Mp(r,a){var g=Fc(r);return Ds(g,Ml(a,0,g.length))}function Wu(r,a,g,O){if(!qr(r))return r;a=To(a,r);for(var ue=-1,Me=a.length,dt=Me-1,Bt=r;Bt!=null&&++ue<Me;){var nn=Ai(a[ue]),kn=g;if(nn==="__proto__"||nn==="constructor"||nn==="prototype")return r;if(ue!=dt){var Ln=Bt[nn];kn=O?O(Ln,nn,Bt):B,kn===B&&(kn=qr(Ln)?Ln:si(a[ue+1])?[]:{})}Hl(Bt,nn,kn),Bt=Bt[nn]}return r}var Zd=eh?function(r,a){return eh.set(r,a),r}:Qa,ud=zl?function(r,a){return zl(r,"toString",{configurable:!0,enumerable:!1,value:Vp(a),writable:!0})}:Qa;function Pp(r){return Ds(Fc(r))}function Ra(r,a,g){var O=-1,ue=r.length;a<0&&(a=-a>ue?0:ue+a),g=g>ue?ue:g,g<0&&(g+=ue),ue=a>g?0:g-a>>>0,a>>>=0;for(var Me=vn(ue);++O<ue;)Me[O]=r[O+a];return Me}function Mf(r,a){var g;return _o(r,function(O,ue,Me){return g=a(O,ue,Me),!g}),!!g}function ac(r,a,g){var O=0,ue=r==null?O:r.length;if(typeof a=="number"&&a===a&&ue<=We){for(;O<ue;){var Me=O+ue>>>1,dt=r[Me];dt!==null&&!Gs(dt)&&(g?dt<=a:dt<a)?O=Me+1:ue=Me}return ue}return oh(r,a,Qa,g)}function oh(r,a,g,O){var ue=0,Me=r==null?0:r.length;if(Me===0)return 0;a=g(a);for(var dt=a!==a,Bt=a===null,nn=Gs(a),kn=a===B;ue<Me;){var Ln=yu((ue+Me)/2),zn=g(r[Ln]),_r=zn!==B,Fr=zn===null,Xr=zn===zn,ci=Gs(zn);if(dt)var Qr=O||Xr;else kn?Qr=Xr&&(O||_r):Bt?Qr=Xr&&_r&&(O||!Fr):nn?Qr=Xr&&_r&&!Fr&&(O||!ci):Fr||ci?Qr=!1:Qr=O?zn<=a:zn<a;Qr?ue=Ln+1:Me=Ln}return Qs(Me,tt)}function Hh(r,a){for(var g=-1,O=r.length,ue=0,Me=[];++g<O;){var dt=r[g],Bt=a?a(dt):dt;if(!g||!Li(Bt,nn)){var nn=Bt;Me[ue++]=dt===0?0:dt}}return Me}function $d(r){return typeof r=="number"?r:Gs(r)?Mt:+r}function Ma(r){if(typeof r=="string")return r;if(ri(r))return ts(r,Ma)+"";if(Gs(r))return Ea?Ea.call(r):"";var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}function vl(r,a,g){var O=-1,ue=Zc,Me=r.length,dt=!0,Bt=[],nn=Bt;if(g)dt=!1,ue=Sc;else if(Me>=Be){var kn=a?null:n(r);if(kn)return Ec(kn);dt=!1,ue=Ac,nn=new uo}else nn=a?[]:Bt;e:for(;++O<Me;){var Ln=r[O],zn=a?a(Ln):Ln;if(Ln=g||Ln!==0?Ln:0,dt&&zn===zn){for(var _r=nn.length;_r--;)if(nn[_r]===zn)continue e;a&&nn.push(zn),Bt.push(Ln)}else ue(nn,zn,g)||(nn!==Bt&&nn.push(zn),Bt.push(Ln))}return Bt}function Pf(r,a){return a=To(a,r),r=wo(r,a),r==null||delete r[Ai(Ee(a))]}function Kd(r,a,g,O){return Wu(r,a,g(nl(r,a)),O)}function lh(r,a,g,O){for(var ue=r.length,Me=O?ue:-1;(O?Me--:++Me<ue)&&a(r[Me],Me,r););return g?Ra(r,O?0:Me,O?Me+1:ue):Ra(r,O?Me+1:0,O?ue:Me)}function cd(r,a){var g=r;return g instanceof hi&&(g=g.value()),Zf(a,function(O,ue){return ue.func.apply(ue.thisArg,el([O],ue.args))},g)}function Of(r,a,g){var O=r.length;if(O<2)return O?vl(r[0]):[];for(var ue=-1,Me=vn(O);++ue<O;)for(var dt=r[ue],Bt=-1;++Bt<O;)Bt!=ue&&(Me[ue]=gl(Me[ue]||dt,r[Bt],a,g));return vl(cs(Me,1),a,g)}function hd(r,a,g){for(var O=-1,ue=r.length,Me=a.length,dt={};++O<ue;){var Bt=O<Me?a[O]:B;g(dt,r[O],Bt)}return dt}function Wh(r){return qi(r)?r:[]}function kf(r){return typeof r=="function"?r:Qa}function To(r,a){return ri(r)?r:ai(r,a)?[r]:di(Nt(r))}var fd=fi;function zo(r,a,g){var O=r.length;return g=g===B?O:g,!a&&g>=O?r:Ra(r,a,g)}var dd=xf||function(r){return Ls.clearTimeout(r)};function kc(r,a){if(a)return r.slice();var g=r.length,O=va?va(g):new r.constructor(g);return r.copy(O),O}function uh(r){var a=new r.constructor(r.byteLength);return new Qc(a).set(new Qc(r)),a}function pd(r,a){var g=a?uh(r.buffer):r.buffer;return new r.constructor(g,r.byteOffset,r.byteLength)}function Na(r){var a=new r.constructor(r.source,Ql.exec(r));return a.lastIndex=r.lastIndex,a}function Op(r){return pl?ki(pl.call(r)):{}}function qd(r,a){var g=a?uh(r.buffer):r.buffer;return new r.constructor(g,r.byteOffset,r.length)}function kl(r,a){if(r!==a){var g=r!==B,O=r===null,ue=r===r,Me=Gs(r),dt=a!==B,Bt=a===null,nn=a===a,kn=Gs(a);if(!Bt&&!kn&&!Me&&r>a||Me&&dt&&nn&&!Bt&&!kn||O&&dt&&nn||!g&&nn||!ue)return 1;if(!O&&!Me&&!kn&&r<a||kn&&g&&ue&&!O&&!Me||Bt&&g&&ue||!dt&&ue||!nn)return-1}return 0}function kp(r,a,g){for(var O=-1,ue=r.criteria,Me=a.criteria,dt=ue.length,Bt=g.length;++O<dt;){var nn=kl(ue[O],Me[O]);if(nn){if(O>=Bt)return nn;var kn=g[O];return nn*(kn=="desc"?-1:1)}}return r.index-a.index}function Gh(r,a,g,O){for(var ue=-1,Me=r.length,dt=g.length,Bt=-1,nn=a.length,kn=ks(Me-dt,0),Ln=vn(nn+kn),zn=!O;++Bt<nn;)Ln[Bt]=a[Bt];for(;++ue<dt;)(zn||ue<Me)&&(Ln[g[ue]]=r[ue]);for(;kn--;)Ln[Bt++]=r[ue++];return Ln}function ch(r,a,g,O){for(var ue=-1,Me=r.length,dt=-1,Bt=g.length,nn=-1,kn=a.length,Ln=ks(Me-Bt,0),zn=vn(Ln+kn),_r=!O;++ue<Ln;)zn[ue]=r[ue];for(var Fr=ue;++nn<kn;)zn[Fr+nn]=a[nn];for(;++dt<Bt;)(_r||ue<Me)&&(zn[Fr+g[dt]]=r[ue++]);return zn}function Js(r,a){var g=-1,O=r.length;for(a||(a=vn(O));++g<O;)a[g]=r[g];return a}function ho(r,a,g,O){var ue=!g;g||(g={});for(var Me=-1,dt=a.length;++Me<dt;){var Bt=a[Me],nn=O?O(g[Bt],r[Bt],Bt,g,r):B;nn===B&&(nn=r[Bt]),ue?co(g,Bt,nn):Hl(g,Bt,nn)}return g}function Xd(r,a){return ho(r,He(r),a)}function If(r,a){return ho(r,_e(r),a)}function Ic(r,a){return function(g,O){var ue=ri(g)?Yg:kh,Me=a?a():{};return ue(g,r,Ie(O,2),Me)}}function Il(r){return fi(function(a,g){var O=-1,ue=g.length,Me=ue>1?g[ue-1]:B,dt=ue>2?g[2]:B;for(Me=r.length>3&&typeof Me=="function"?(ue--,Me):B,dt&&Pi(g[0],g[1],dt)&&(Me=ue<3?B:Me,ue=1),a=ki(a);++O<ue;){var Bt=g[O];Bt&&r(a,Bt,O,Me)}return a})}function Lf(r,a){return function(g,O){if(g==null)return g;if(!es(g))return r(g,O);for(var ue=g.length,Me=a?ue:-1,dt=ki(g);(a?Me--:++Me<ue)&&O(dt[Me],Me,dt)!==!1;);return g}}function Qd(r){return function(a,g,O){for(var ue=-1,Me=ki(a),dt=O(a),Bt=dt.length;Bt--;){var nn=dt[r?Bt:++ue];if(g(Me[nn],nn,Me)===!1)break}return a}}function Ip(r,a,g){var O=a&at,ue=oc(r);function Me(){var dt=this&&this!==Ls&&this instanceof Me?ue:r;return dt.apply(O?g:this,arguments)}return Me}function Jd(r){return function(a){a=Nt(a);var g=nu(a)?sa(a):B,O=g?g[0]:a.charAt(0),ue=g?zo(g,1).join(""):a.slice(1);return O[r]()+ue}}function Gl(r){return function(a){return Zf(zc(Bf(a).replace(ss,"")),r,"")}}function oc(r){return function(){var a=arguments;switch(a.length){case 0:return new r;case 1:return new r(a[0]);case 2:return new r(a[0],a[1]);case 3:return new r(a[0],a[1],a[2]);case 4:return new r(a[0],a[1],a[2],a[3]);case 5:return new r(a[0],a[1],a[2],a[3],a[4]);case 6:return new r(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new r(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var g=Yo(r.prototype),O=r.apply(g,a);return qr(O)?O:g}}function tm(r,a,g){var O=oc(r);function ue(){for(var Me=arguments.length,dt=vn(Me),Bt=Me,nn=tn(ue);Bt--;)dt[Bt]=arguments[Bt];var kn=Me<3&&dt[0]!==nn&&dt[Me-1]!==nn?[]:Ro(dt,nn);if(Me-=kn.length,Me<g)return y(r,a,Lc,ue.placeholder,B,dt,kn,B,B,g-Me);var Ln=this&&this!==Ls&&this instanceof ue?O:r;return Ba(Ln,this,dt)}return ue}function rl(r){return function(a,g,O){var ue=ki(a);if(!es(a)){var Me=Ie(g,3);a=Ks(a),g=function(Bt){return Me(ue[Bt],Bt,ue)}}var dt=r(a,g,O);return dt>-1?ue[Me?a[dt]:dt]:B}}function Mo(r){return Ae(function(a){var g=a.length,O=g,ue=Bs.prototype.thru;for(r&&a.reverse();O--;){var Me=a[O];if(typeof Me!="function")throw new Sa(me);if(ue&&!dt&&nt(Me)=="wrapper")var dt=new Bs([],!0)}for(O=dt?O:g;++O<g;){Me=a[O];var Bt=nt(Me),nn=Bt=="wrapper"?mt(Me):B;nn&&fa(nn[0])&&nn[1]==(ut|pt|Jt|St)&&!nn[4].length&&nn[9]==1?dt=dt[nt(nn[0])].apply(dt,nn[3]):dt=Me.length==1&&fa(Me)?dt[Bt]():dt.thru(Me)}return function(){var kn=arguments,Ln=kn[0];if(dt&&kn.length==1&&ri(Ln))return dt.plant(Ln).value();for(var zn=0,_r=g?a[zn].apply(this,kn):Ln;++zn<g;)_r=a[zn].call(this,_r);return _r}})}function Lc(r,a,g,O,ue,Me,dt,Bt,nn,kn){var Ln=a&ut,zn=a&at,_r=a&Ne,Fr=a&(pt|ot),Xr=a&Lt,ci=_r?B:oc(r);function Qr(){for(var yi=arguments.length,Ci=vn(yi),to=yi;to--;)Ci[to]=arguments[to];if(Fr)var ka=tn(Qr),oo=pf(Ci,ka);if(O&&(Ci=Gh(Ci,O,ue,Fr)),Me&&(Ci=ch(Ci,Me,dt,Fr)),yi-=oo,Fr&&yi<kn){var Ps=Ro(Ci,ka);return y(r,a,Lc,Qr.placeholder,g,Ci,Ps,Bt,nn,kn-yi)}var Bo=zn?g:this,ul=_r?Bo[r]:r;return yi=Ci.length,Bt?Ci=xo(Ci,Bt):Xr&&yi>1&&Ci.reverse(),Ln&&nn<yi&&(Ci.length=nn),this&&this!==Ls&&this instanceof Qr&&(ul=ci||oc(ul)),ul.apply(Bo,Ci)}return Qr}function gd(r,a){return function(g,O){return zh(g,r,a(O),{})}}function Bc(r,a){return function(g,O){var ue;if(g===B&&O===B)return a;if(g!==B&&(ue=g),O!==B){if(ue===B)return O;typeof g=="string"||typeof O=="string"?(g=Ma(g),O=Ma(O)):(g=$d(g),O=$d(O)),ue=r(g,O)}return ue}}function Yh(r){return Ae(function(a){return a=ts(a,Aa(Ie())),fi(function(g){var O=this;return r(a,function(ue){return Ba(ue,O,g)})})})}function Rc(r,a){a=a===B?" ":Ma(a);var g=a.length;if(g<2)return g?ah(a,r):a;var O=ah(a,tc(r/iu(a)));return nu(a)?zo(sa(O),0,r).join(""):O.slice(0,r)}function md(r,a,g,O){var ue=a&at,Me=oc(r);function dt(){for(var Bt=-1,nn=arguments.length,kn=-1,Ln=O.length,zn=vn(Ln+nn),_r=this&&this!==Ls&&this instanceof dt?Me:r;++kn<Ln;)zn[kn]=O[kn];for(;nn--;)zn[kn++]=arguments[++Bt];return Ba(_r,ue?g:this,zn)}return dt}function ep(r){return function(a,g,O){return O&&typeof O!="number"&&Pi(a,g,O)&&(g=O=B),a=sr(a),g===B?(g=a,a=0):g=sr(g),O=O===B?a<g?1:-1:sr(O),vr(a,g,O,r)}}function Nc(r){return function(a,g){return typeof a=="string"&&typeof g=="string"||(a=En(a),g=En(g)),r(a,g)}}function y(r,a,g,O,ue,Me,dt,Bt,nn,kn){var Ln=a&pt,zn=Ln?dt:B,_r=Ln?B:dt,Fr=Ln?Me:B,Xr=Ln?B:Me;a|=Ln?Jt:Qt,a&=~(Ln?Qt:Jt),a&Je||(a&=-4);var ci=[r,a,ue,Fr,zn,Xr,_r,Bt,nn,kn],Qr=g.apply(B,ci);return fa(r)&&Uo(Qr,ci),Qr.placeholder=O,ea(Qr,r,a)}function e(r){var a=xs[r];return function(g,O){if(g=En(g),O=O==null?0:Qs(Gt(O),292),O&&Th(g)){var ue=(Nt(g)+"e").split("e"),Me=a(ue[0]+"e"+(+ue[1]+O));return ue=(Nt(Me)+"e").split("e"),+(ue[0]+"e"+(+ue[1]-O))}return a(g)}}var n=Ho&&1/Ec(new Ho([,-0]))[1]==Zt?function(r){return new Ho(r)}:Wp;function s(r){return function(a){var g=Sr(a);return g==qe?ru(a):g==Vt?$g(a):ag(a,r(a))}}function c(r,a,g,O,ue,Me,dt,Bt){var nn=a&Ne;if(!nn&&typeof r!="function")throw new Sa(me);var kn=O?O.length:0;if(kn||(a&=-97,O=ue=B),dt=dt===B?dt:ks(Gt(dt),0),Bt=Bt===B?Bt:Gt(Bt),kn-=ue?ue.length:0,a&Qt){var Ln=O,zn=ue;O=ue=B}var _r=nn?B:mt(r),Fr=[r,a,g,O,ue,Ln,zn,Me,dt,Bt];if(_r&&qo(Fr,_r),r=Fr[0],a=Fr[1],g=Fr[2],O=Fr[3],ue=Fr[4],Bt=Fr[9]=Fr[9]===B?nn?0:r.length:ks(Fr[9]-kn,0),!Bt&&a&(pt|ot)&&(a&=-25),!a||a==at)var Xr=Ip(r,a,g);else a==pt||a==ot?Xr=tm(r,a,Bt):(a==Jt||a==(at|Jt))&&!ue.length?Xr=md(r,a,g,O):Xr=Lc.apply(B,Fr);var ci=_r?Zd:Uo;return ea(ci(Xr,Fr),r,a)}function u(r,a,g,O){return r===B||Li(r,mu[g])&&!ji.call(O,g)?a:r}function m(r,a,g,O,ue,Me){return qr(r)&&qr(a)&&(Me.set(a,r),$o(r,a,B,m,Me),Me.delete(a)),r}function b(r){return qa(r)?B:r}function k(r,a,g,O,ue,Me){var dt=g&wt,Bt=r.length,nn=a.length;if(Bt!=nn&&!(dt&&nn>Bt))return!1;var kn=Me.get(r),Ln=Me.get(a);if(kn&&Ln)return kn==a&&Ln==r;var zn=-1,_r=!0,Fr=g&Dt?new uo:B;for(Me.set(r,a),Me.set(a,r);++zn<Bt;){var Xr=r[zn],ci=a[zn];if(O)var Qr=dt?O(ci,Xr,zn,a,r,Me):O(Xr,ci,zn,r,a,Me);if(Qr!==B){if(Qr)continue;_r=!1;break}if(Fr){if(!$f(a,function(yi,Ci){if(!Ac(Fr,Ci)&&(Xr===yi||ue(Xr,yi,g,O,Me)))return Fr.push(Ci)})){_r=!1;break}}else if(!(Xr===ci||ue(Xr,ci,g,O,Me))){_r=!1;break}}return Me.delete(r),Me.delete(a),_r}function W(r,a,g,O,ue,Me,dt){switch(g){case Tn:if(r.byteLength!=a.byteLength||r.byteOffset!=a.byteOffset)return!1;r=r.buffer,a=a.buffer;case $n:return!(r.byteLength!=a.byteLength||!Me(new Qc(r),new Qc(a)));case de:case Ce:case ht:return Li(+r,+a);case Ke:return r.name==a.name&&r.message==a.message;case bt:case _n:return r==a+"";case qe:var Bt=ru;case Vt:var nn=O&wt;if(Bt||(Bt=Ec),r.size!=a.size&&!nn)return!1;var kn=dt.get(r);if(kn)return kn==a;O|=Dt,dt.set(r,a);var Ln=k(Bt(r),Bt(a),O,ue,Me,dt);return dt.delete(r),Ln;case Yn:if(pl)return pl.call(r)==pl.call(a)}return!1}function ve(r,a,g,O,ue,Me){var dt=g&wt,Bt=rt(r),nn=Bt.length,kn=rt(a),Ln=kn.length;if(nn!=Ln&&!dt)return!1;for(var zn=nn;zn--;){var _r=Bt[zn];if(!(dt?_r in a:ji.call(a,_r)))return!1}var Fr=Me.get(r),Xr=Me.get(a);if(Fr&&Xr)return Fr==a&&Xr==r;var ci=!0;Me.set(r,a),Me.set(a,r);for(var Qr=dt;++zn<nn;){_r=Bt[zn];var yi=r[_r],Ci=a[_r];if(O)var to=dt?O(Ci,yi,_r,a,r,Me):O(yi,Ci,_r,r,a,Me);if(!(to===B?yi===Ci||ue(yi,Ci,g,O,Me):to)){ci=!1;break}Qr||(Qr=_r=="constructor")}if(ci&&!Qr){var ka=r.constructor,oo=a.constructor;ka!=oo&&"constructor"in r&&"constructor"in a&&!(typeof ka=="function"&&ka instanceof ka&&typeof oo=="function"&&oo instanceof oo)&&(ci=!1)}return Me.delete(r),Me.delete(a),ci}function Ae(r){return pa(zi(r,B,R),r+"")}function rt(r){return Nh(r,Ks,He)}function re(r){return Nh(r,Ua,_e)}var mt=eh?function(r){return eh.get(r)}:Wp;function nt(r){for(var a=r.name+"",g=Fu[a],O=ji.call(Fu,a)?g.length:0;O--;){var ue=g[O],Me=ue.func;if(Me==null||Me==r)return ue.name}return a}function tn(r){var a=ji.call(ye,"placeholder")?ye:r;return a.placeholder}function Ie(){var r=ye.iteratee||Hp;return r=r===Hp?ih:r,arguments.length?r(arguments[0],arguments[1]):r}function Kt(r,a){var g=r.__data__;return hs(a)?g[typeof a=="string"?"string":"hash"]:g.map}function At(r){for(var a=Ks(r),g=a.length;g--;){var O=a[g],ue=r[O];a[g]=[O,ue,Zi(ue)]}return a}function an(r,a){var g=wp(r,a);return Or(g)?g:B}function Cn(r){var a=ji.call(r,dl),g=r[dl];try{r[dl]=B;var O=!0}catch{}var ue=vu.call(r);return O&&(a?r[dl]=g:delete r[dl]),ue}var He=Jc?function(r){return r==null?[]:(r=ki(r),Cl(Jc(r),function(a){return Eh.call(r,a)}))}:qh,_e=Jc?function(r){for(var a=[];r;)el(a,He(r)),r=Nu(r);return a}:qh,Sr=Rs;(Mh&&Sr(new Mh(new ArrayBuffer(1)))!=Tn||Ul&&Sr(new Ul)!=qe||jl&&Sr(jl.resolve())!=Ge||Ho&&Sr(new Ho)!=Vt||Wo&&Sr(new Wo)!=lr)&&(Sr=function(r){var a=Rs(r),g=a==xt?r.constructor:B,O=g?ui(g):"";if(O)switch(O){case th:return Tn;case ed:return qe;case wu:return Ge;case zd:return Vt;case Cp:return lr}return a});function On(r,a,g){for(var O=-1,ue=g.length;++O<ue;){var Me=g[O],dt=Me.size;switch(Me.type){case"drop":r+=dt;break;case"dropRight":a-=dt;break;case"take":a=Qs(a,r+dt);break;case"takeRight":r=ks(r,a-dt);break}}return{start:r,end:a}}function Kr(r){var a=r.match(Vc);return a?a[1].split(Pu):[]}function Mi(r,a,g){a=To(a,r);for(var O=-1,ue=a.length,Me=!1;++O<ue;){var dt=Ai(a[O]);if(!(Me=r!=null&&g(r,dt)))break;r=r[dt]}return Me||++O!=ue?Me:(ue=r==null?0:r.length,!!ue&&Pa(ue)&&si(dt,ue)&&(ri(r)||ps(r)))}function ei(r){var a=r.length,g=new r.constructor(a);return a&&typeof r[0]=="string"&&ji.call(r,"index")&&(g.index=r.index,g.input=r.input),g}function oi(r){return typeof r.constructor=="function"&&!da(r)?Yo(Nu(r)):{}}function xr(r,a,g){var O=r.constructor;switch(a){case $n:return uh(r);case de:case Ce:return new O(+r);case Tn:return pd(r,g);case Gn:case tr:case pr:case Br:case Mr:case pn:case Wt:case un:case fn:return qd(r,g);case qe:return new O;case ht:case _n:return new O(r);case bt:return Na(r);case Vt:return new O;case Yn:return Op(r)}}function Ts(r,a){var g=a.length;if(!g)return r;var O=g-1;return a[O]=(g>1?"& ":"")+a[O],a=a.join(g>2?", ":" "),r.replace(mc,`{
/* [wrapped with `+a+`] */
`)}function Fn(r){return ri(r)||ps(r)||!!(wf&&r&&r[wf])}function si(r,a){var g=typeof r;return a=a??zt,!!a&&(g=="number"||g!="symbol"&&Sl.test(r))&&r>-1&&r%1==0&&r<a}function Pi(r,a,g){if(!qr(g))return!1;var O=typeof a;return(O=="number"?es(g)&&si(a,g.length):O=="string"&&a in g)?Li(g[a],r):!1}function ai(r,a){if(ri(r))return!1;var g=typeof r;return g=="number"||g=="symbol"||g=="boolean"||r==null||Gs(r)?!0:gc.test(r)||!$u.test(r)||a!=null&&r in ki(a)}function hs(r){var a=typeof r;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?r!=="__proto__":r===null}function fa(r){var a=nt(r),g=ye[a];if(typeof g!="function"||!(a in hi.prototype))return!1;if(r===g)return!0;var O=mt(g);return!!O&&r===O[0]}function Hs(r){return!!Dh&&Dh in r}var Ns=Ju?Si:Rf;function da(r){var a=r&&r.constructor,g=typeof a=="function"&&a.prototype||mu;return r===g}function Zi(r){return r===r&&!qr(r)}function fo(r,a){return function(g){return g==null?!1:g[r]===a&&(a!==B||r in ki(g))}}function io(r){var a=Re(r,function(O){return g.size===De&&g.clear(),O}),g=a.cache;return a}function qo(r,a){var g=r[1],O=a[1],ue=g|O,Me=ue<(at|Ne|ut),dt=O==ut&&g==pt||O==ut&&g==St&&r[7].length<=a[8]||O==(ut|St)&&a[7].length<=a[8]&&g==pt;if(!(Me||dt))return r;O&at&&(r[2]=a[2],ue|=g&at?0:Je);var Bt=a[3];if(Bt){var nn=r[3];r[3]=nn?Gh(nn,Bt,a[4]):Bt,r[4]=nn?Ro(r[3],Pe):a[4]}return Bt=a[5],Bt&&(nn=r[5],r[5]=nn?ch(nn,Bt,a[6]):Bt,r[6]=nn?Ro(r[5],Pe):a[6]),Bt=a[7],Bt&&(r[7]=Bt),O&ut&&(r[8]=r[8]==null?a[8]:Qs(r[8],a[8])),r[9]==null&&(r[9]=a[9]),r[0]=a[0],r[1]=ue,r}function Ti(r){var a=[];if(r!=null)for(var g in ki(r))a.push(g);return a}function Fi(r){return vu.call(r)}function zi(r,a,g){return a=ks(a===B?r.length-1:a,0),function(){for(var O=arguments,ue=-1,Me=ks(O.length-a,0),dt=vn(Me);++ue<Me;)dt[ue]=O[a+ue];ue=-1;for(var Bt=vn(a+1);++ue<a;)Bt[ue]=O[ue];return Bt[a]=g(dt),Ba(r,this,Bt)}}function wo(r,a){return a.length<2?r:nl(r,Ra(a,0,-1))}function xo(r,a){for(var g=r.length,O=Qs(a.length,g),ue=Js(r);O--;){var Me=a[O];r[O]=si(Me,g)?ue[Me]:B}return r}function Fa(r,a){if(!(a==="constructor"&&typeof r[a]=="function")&&a!="__proto__")return r[a]}var Uo=fs(Zd),so=em||function(r,a){return Ls.setTimeout(r,a)},pa=fs(ud);function ea(r,a,g){var O=a+"";return pa(r,Ts(O,bo(Kr(O),g)))}function fs(r){var a=0,g=0;return function(){var O=ug(),ue=rn-(O-g);if(g=O,ue>0){if(++a>=Ot)return arguments[0]}else a=0;return r.apply(B,arguments)}}function Ds(r,a){var g=-1,O=r.length,ue=O-1;for(a=a===B?O:a;++g<a;){var Me=Ko(g,ue),dt=r[Me];r[Me]=r[g],r[g]=dt}return r.length=a,r}var di=io(function(r){var a=[];return r.charCodeAt(0)===46&&a.push(""),r.replace(Xl,function(g,O,ue,Me){a.push(ue?Me.replace(Ku,"$1"):O||g)}),a});function Ai(r){if(typeof r=="string"||Gs(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}function ui(r){if(r!=null){try{return au.call(r)}catch{}try{return r+""}catch{}}return""}function bo(r,a){return Wa(C,function(g){var O="_."+g[0];a&g[1]&&!Zc(r,O)&&r.push(O)}),r.sort()}function ar(r){if(r instanceof hi)return r.clone();var a=new Bs(r.__wrapped__,r.__chain__);return a.__actions__=Js(r.__actions__),a.__index__=r.__index__,a.__values__=r.__values__,a}function t(r,a,g){(g?Pi(r,a,g):a===B)?a=1:a=ks(Gt(a),0);var O=r==null?0:r.length;if(!O||a<1)return[];for(var ue=0,Me=0,dt=vn(tc(O/a));ue<O;)dt[Me++]=Ra(r,ue,ue+=a);return dt}function i(r){for(var a=-1,g=r==null?0:r.length,O=0,ue=[];++a<g;){var Me=r[a];Me&&(ue[O++]=Me)}return ue}function o(){var r=arguments.length;if(!r)return[];for(var a=vn(r-1),g=arguments[0],O=r;O--;)a[O-1]=arguments[O];return el(ri(g)?Js(g):[g],cs(a,1))}var h=fi(function(r,a){return qi(r)?gl(r,cs(a,1,qi,!0)):[]}),d=fi(function(r,a){var g=Ee(a);return qi(g)&&(g=B),qi(r)?gl(r,cs(a,1,qi,!0),Ie(g,2)):[]}),v=fi(function(r,a){var g=Ee(a);return qi(g)&&(g=B),qi(r)?gl(r,cs(a,1,qi,!0),B,g):[]});function D(r,a,g){var O=r==null?0:r.length;return O?(a=g||a===B?1:Gt(a),Ra(r,a<0?0:a,O)):[]}function A(r,a,g){var O=r==null?0:r.length;return O?(a=g||a===B?1:Gt(a),a=O-a,Ra(r,0,a<0?0:a)):[]}function T(r,a){return r&&r.length?lh(r,Ie(a,3),!0,!0):[]}function P(r,a){return r&&r.length?lh(r,Ie(a,3),!0):[]}function F(r,a,g,O){var ue=r==null?0:r.length;return ue?(g&&typeof g!="number"&&Pi(r,a,g)&&(g=0,O=ue),Wd(r,a,g,O)):[]}function V(r,a,g){var O=r==null?0:r.length;if(!O)return-1;var ue=g==null?0:Gt(g);return ue<0&&(ue=ks(O+ue,0)),$c(r,Ie(a,3),ue)}function z(r,a,g){var O=r==null?0:r.length;if(!O)return-1;var ue=O-1;return g!==B&&(ue=Gt(g),ue=g<0?ks(O+ue,0):Qs(ue,O-1)),$c(r,Ie(a,3),ue,!0)}function R(r){var a=r==null?0:r.length;return a?cs(r,1):[]}function J(r){var a=r==null?0:r.length;return a?cs(r,Zt):[]}function Y(r,a){var g=r==null?0:r.length;return g?(a=a===B?1:Gt(a),cs(r,a)):[]}function ie(r){for(var a=-1,g=r==null?0:r.length,O={};++a<g;){var ue=r[a];O[ue[0]]=ue[1]}return O}function j(r){return r&&r.length?r[0]:B}function X(r,a,g){var O=r==null?0:r.length;if(!O)return-1;var ue=g==null?0:Gt(g);return ue<0&&(ue=ks(O+ue,0)),Dl(r,a,ue)}function I(r){var a=r==null?0:r.length;return a?Ra(r,0,-1):[]}var G=fi(function(r){var a=ts(r,Wh);return a.length&&a[0]===r[0]?Fh(a):[]}),te=fi(function(r){var a=Ee(r),g=ts(r,Wh);return a===Ee(g)?a=B:g.pop(),g.length&&g[0]===r[0]?Fh(g,Ie(a,2)):[]}),pe=fi(function(r){var a=Ee(r),g=ts(r,Wh);return a=typeof a=="function"?a:B,a&&g.pop(),g.length&&g[0]===r[0]?Fh(g,B,a):[]});function oe(r,a){return r==null?"":_a.call(r,a)}function Ee(r){var a=r==null?0:r.length;return a?r[a-1]:B}function $e(r,a,g){var O=r==null?0:r.length;if(!O)return-1;var ue=O;return g!==B&&(ue=Gt(g),ue=ue<0?ks(O+ue,0):Qs(ue,O-1)),a===a?qg(r,a,ue):$c(r,yp,ue,!0)}function Xe(r,a){return r&&r.length?Ao(r,Gt(a)):B}var ft=fi(Ze);function Ze(r,a){return r&&r.length&&a&&a.length?Ol(r,a):r}function yt(r,a,g){return r&&r.length&&a&&a.length?Ol(r,a,Ie(g,2)):r}function Et(r,a,g){return r&&r.length&&a&&a.length?Ol(r,a,B,g):r}var Yt=Ae(function(r,a){var g=r==null?0:r.length,O=Pc(r,a);return Wl(r,ts(a,function(ue){return si(ue,g)?+ue:ue}).sort(kl)),O});function qt(r,a){var g=[];if(!(r&&r.length))return g;var O=-1,ue=[],Me=r.length;for(a=Ie(a,3);++O<Me;){var dt=r[O];a(dt,O,r)&&(g.push(dt),ue.push(O))}return Wl(r,ue),g}function ln(r){return r==null?r:Tc.call(r)}function In(r,a,g){var O=r==null?0:r.length;return O?(g&&typeof g!="number"&&Pi(r,a,g)?(a=0,g=O):(a=a==null?0:Gt(a),g=g===B?O:Gt(g)),Ra(r,a,g)):[]}function Zn(r,a){return ac(r,a)}function Kn(r,a,g){return oh(r,a,Ie(g,2))}function ur(r,a){var g=r==null?0:r.length;if(g){var O=ac(r,a);if(O<g&&Li(r[O],a))return O}return-1}function yn(r,a){return ac(r,a,!0)}function An(r,a,g){return oh(r,a,Ie(g,2),!0)}function qn(r,a){var g=r==null?0:r.length;if(g){var O=ac(r,a,!0)-1;if(Li(r[O],a))return O}return-1}function cr(r){return r&&r.length?Hh(r):[]}function mr(r,a){return r&&r.length?Hh(r,Ie(a,2)):[]}function Rr(r){var a=r==null?0:r.length;return a?Ra(r,1,a):[]}function Lr(r,a,g){return r&&r.length?(a=g||a===B?1:Gt(a),Ra(r,0,a<0?0:a)):[]}function Ir(r,a,g){var O=r==null?0:r.length;return O?(a=g||a===B?1:Gt(a),a=O-a,Ra(r,a<0?0:a,O)):[]}function ti(r,a){return r&&r.length?lh(r,Ie(a,3),!1,!0):[]}function Wr(r,a){return r&&r.length?lh(r,Ie(a,3)):[]}var ls=fi(function(r){return vl(cs(r,1,qi,!0))}),Vr=fi(function(r){var a=Ee(r);return qi(a)&&(a=B),vl(cs(r,1,qi,!0),Ie(a,2))}),$i=fi(function(r){var a=Ee(r);return a=typeof a=="function"?a:B,vl(cs(r,1,qi,!0),B,a)});function Qi(r){return r&&r.length?vl(r):[]}function Oi(r,a){return r&&r.length?vl(r,Ie(a,2)):[]}function Bi(r,a){return a=typeof a=="function"?a:B,r&&r.length?vl(r,B,a):[]}function ys(r){if(!(r&&r.length))return[];var a=0;return r=Cl(r,function(g){if(qi(g))return a=ks(g.length,a),!0}),bh(a,function(g){return ts(r,Dc(g))})}function ns(r,a){if(!(r&&r.length))return[];var g=ys(r);return a==null?g:ts(g,function(O){return Ba(a,B,O)})}var As=fi(function(r,a){return qi(r)?gl(r,a):[]}),rs=fi(function(r){return Of(Cl(r,qi))}),Ji=fi(function(r){var a=Ee(r);return qi(a)&&(a=B),Of(Cl(r,qi),Ie(a,2))}),Fs=fi(function(r){var a=Ee(r);return a=typeof a=="function"?a:B,Of(Cl(r,qi),B,a)}),Is=fi(ys);function Ws(r,a){return hd(r||[],a||[],Hl)}function Ca(r,a){return hd(r||[],a||[],Wu)}var ta=fi(function(r){var a=r.length,g=a>1?r[a-1]:B;return g=typeof g=="function"?(r.pop(),g):B,ns(r,g)});function Po(r){var a=ye(r);return a.__chain__=!0,a}function il(r,a){return a(r),r}function Oo(r,a){return a(r)}var sl=Ae(function(r){var a=r.length,g=a?r[0]:0,O=this.__wrapped__,ue=function(Me){return Pc(Me,r)};return a>1||this.__actions__.length||!(O instanceof hi)||!si(g)?this.thru(ue):(O=O.slice(g,+g+(a?1:0)),O.__actions__.push({func:Oo,args:[ue],thisArg:B}),new Bs(O,this.__chain__).thru(function(Me){return a&&!Me.length&&Me.push(B),Me}))});function Ya(){return Po(this)}function al(){return new Bs(this.value(),this.__chain__)}function Vi(){this.__values__===B&&(this.__values__=fr(this.value()));var r=this.__index__>=this.__values__.length,a=r?B:this.__values__[this.__index__++];return{done:r,value:a}}function Ll(){return this}function po(r){for(var a,g=this;g instanceof wa;){var O=ar(g);O.__index__=0,O.__values__=B,a?ue.__wrapped__=O:a=O;var ue=O;g=g.__wrapped__}return ue.__wrapped__=r,a}function Za(){var r=this.__wrapped__;if(r instanceof hi){var a=r;return this.__actions__.length&&(a=new hi(this)),a=a.reverse(),a.__actions__.push({func:Oo,args:[ln],thisArg:B}),new Bs(a,this.__chain__)}return this.thru(ln)}function ga(){return cd(this.__wrapped__,this.__actions__)}var $a=Ic(function(r,a,g){ji.call(r,g)?++r[g]:co(r,g,1)});function oa(r,a,g){var O=ri(r)?Ld:sd;return g&&Pi(r,a,g)&&(a=B),O(r,Ie(a,3))}function Zs(r,a){var g=ri(r)?Cl:Oc;return g(r,Ie(a,3))}var _=rl(V),he=rl(z);function gt(r,a){return cs(Oe(r,a),1)}function jt(r,a){return cs(Oe(r,a),Zt)}function wn(r,a,g){return g=g===B?1:Gt(g),cs(Oe(r,a),g)}function nr(r,a){var g=ri(r)?Wa:_o;return g(r,Ie(a,3))}function l(r,a){var g=ri(r)?vp:Rh;return g(r,Ie(a,3))}var f=Ic(function(r,a,g){ji.call(r,g)?r[g].push(a):co(r,g,[a])});function x(r,a,g,O){r=es(r)?r:Fc(r),g=g&&!O?Gt(g):0;var ue=r.length;return g<0&&(g=ks(ue+g,0)),Zl(r)?g<=ue&&r.indexOf(a,g)>-1:!!ue&&Dl(r,a,g)>-1}var N=fi(function(r,a,g){var O=-1,ue=typeof a=="function",Me=es(r)?vn(r.length):[];return _o(r,function(dt){Me[++O]=ue?Ba(a,dt,g):Fo(dt,a,g)}),Me}),ge=Ic(function(r,a,g){co(r,g,a)});function Oe(r,a){var g=ri(r)?ts:aa;return g(r,Ie(a,3))}function Ht(r,a,g,O){return r==null?[]:(ri(a)||(a=a==null?[]:[a]),g=O?B:g,ri(g)||(g=g==null?[]:[g]),Eo(r,a,g))}var Sn=Ic(function(r,a,g){r[g?0:1].push(a)},function(){return[[],[]]});function Rn(r,a,g){var O=ri(r)?Zf:Rd,ue=arguments.length<3;return O(r,Ie(a,4),g,ue,_o)}function dr(r,a,g){var O=ri(r)?_p:Rd,ue=arguments.length<3;return O(r,Ie(a,4),g,ue,Rh)}function Dr(r,a){var g=ri(r)?Cl:Oc;return g(r,vt(Ie(a,3)))}function Pr(r){var a=ri(r)?Hd:pg;return a(r)}function Ur(r,a,g){(g?Pi(r,a,g):a===B)?a=1:a=Gt(a);var O=ri(r)?rd:Mp;return O(r,a)}function pi(r){var a=ri(r)?id:Pp;return a(r)}function mi(r){if(r==null)return 0;if(es(r))return Zl(r)?iu(r):r.length;var a=Sr(r);return a==qe||a==Vt?r.size:sh(r).length}function gi(r,a,g){var O=ri(r)?$f:Mf;return g&&Pi(r,a,g)&&(a=B),O(r,Ie(a,3))}var xa=fi(function(r,a){if(r==null)return[];var g=a.length;return g>1&&Pi(r,a[0],a[1])?a=[]:g>2&&Pi(a[0],a[1],a[2])&&(a=[a[0]]),Eo(r,cs(a,1),[])}),Xn=Jg||function(){return Ls.Date.now()};function Un(r,a){if(typeof a!="function")throw new Sa(me);return r=Gt(r),function(){if(--r<1)return a.apply(this,arguments)}}function rr(r,a,g){return a=g?B:a,a=r&&a==null?r.length:a,c(r,ut,B,B,B,B,a)}function Nr(r,a){var g;if(typeof a!="function")throw new Sa(me);return r=Gt(r),function(){return--r>0&&(g=a.apply(this,arguments)),r<=1&&(a=B),g}}var vi=fi(function(r,a,g){var O=at;if(g.length){var ue=Ro(g,tn(vi));O|=Jt}return c(r,O,a,g,ue)}),xi=fi(function(r,a,g){var O=at|Ne;if(g.length){var ue=Ro(g,tn(xi));O|=Jt}return c(a,O,r,g,ue)});function Ri(r,a,g){a=g?B:a;var O=c(r,pt,B,B,B,B,B,a);return O.placeholder=Ri.placeholder,O}function Ui(r,a,g){a=g?B:a;var O=c(r,ot,B,B,B,B,B,a);return O.placeholder=Ui.placeholder,O}function zs(r,a,g){var O,ue,Me,dt,Bt,nn,kn=0,Ln=!1,zn=!1,_r=!0;if(typeof r!="function")throw new Sa(me);a=En(a)||0,qr(g)&&(Ln=!!g.leading,zn="maxWait"in g,Me=zn?ks(En(g.maxWait)||0,a):Me,_r="trailing"in g?!!g.trailing:_r);function Fr(Ps){var Bo=O,ul=ue;return O=ue=B,kn=Ps,dt=r.apply(ul,Bo),dt}function Xr(Ps){return kn=Ps,Bt=so(yi,a),Ln?Fr(Ps):dt}function ci(Ps){var Bo=Ps-nn,ul=Ps-kn,cm=a-Bo;return zn?Qs(cm,Me-ul):cm}function Qr(Ps){var Bo=Ps-nn,ul=Ps-kn;return nn===B||Bo>=a||Bo<0||zn&&ul>=Me}function yi(){var Ps=Xn();if(Qr(Ps))return Ci(Ps);Bt=so(yi,ci(Ps))}function Ci(Ps){return Bt=B,_r&&O?Fr(Ps):(O=ue=B,dt)}function to(){Bt!==B&&dd(Bt),kn=0,O=nn=ue=Bt=B}function ka(){return Bt===B?dt:Ci(Xn())}function oo(){var Ps=Xn(),Bo=Qr(Ps);if(O=arguments,ue=this,nn=Ps,Bo){if(Bt===B)return Xr(nn);if(zn)return dd(Bt),Bt=so(yi,a),Fr(nn)}return Bt===B&&(Bt=so(yi,a)),dt}return oo.cancel=to,oo.flush=ka,oo}var M=fi(function(r,a){return Bh(r,1,a)}),Z=fi(function(r,a,g){return Bh(r,En(a)||0,g)});function xe(r){return c(r,Lt)}function Re(r,a){if(typeof r!="function"||a!=null&&typeof a!="function")throw new Sa(me);var g=function(){var O=arguments,ue=a?a.apply(this,O):O[0],Me=g.cache;if(Me.has(ue))return Me.get(ue);var dt=r.apply(this,O);return g.cache=Me.set(ue,dt)||Me,dt};return g.cache=new(Re.Cache||Do),g}Re.Cache=Do;function vt(r){if(typeof r!="function")throw new Sa(me);return function(){var a=arguments;switch(a.length){case 0:return!r.call(this);case 1:return!r.call(this,a[0]);case 2:return!r.call(this,a[0],a[1]);case 3:return!r.call(this,a[0],a[1],a[2])}return!r.apply(this,a)}}function Ct(r){return Nr(2,r)}var It=fd(function(r,a){a=a.length==1&&ri(a[0])?ts(a[0],Aa(Ie())):ts(cs(a,1),Aa(Ie()));var g=a.length;return fi(function(O){for(var ue=-1,Me=Qs(O.length,g);++ue<Me;)O[ue]=a[ue].call(this,O[ue]);return Ba(r,this,O)})}),Pn=fi(function(r,a){var g=Ro(a,tn(Pn));return c(r,Jt,B,a,g)}),xn=fi(function(r,a){var g=Ro(a,tn(xn));return c(r,Qt,B,a,g)}),Wn=Ae(function(r,a){return c(r,St,B,B,B,a)});function Cr(r,a){if(typeof r!="function")throw new Sa(me);return a=a===B?a:Gt(a),fi(r,a)}function kr(r,a){if(typeof r!="function")throw new Sa(me);return a=a==null?0:ks(Gt(a),0),fi(function(g){var O=g[a],ue=zo(g,0,a);return O&&el(ue,O),Ba(r,this,ue)})}function hr(r,a,g){var O=!0,ue=!0;if(typeof r!="function")throw new Sa(me);return qr(g)&&(O="leading"in g?!!g.leading:O,ue="trailing"in g?!!g.trailing:ue),zs(r,a,{leading:O,maxWait:a,trailing:ue})}function Gr(r){return rr(r,1)}function _i(r,a){return Pn(kf(a),r)}function ds(){if(!arguments.length)return[];var r=arguments[0];return ri(r)?r:[r]}function us(r){return eo(r,Qe)}function So(r,a){return a=typeof a=="function"?a:B,eo(r,Qe,a)}function Ka(r){return eo(r,Se|Qe)}function za(r,a){return a=typeof a=="function"?a:B,eo(r,Se|Qe,a)}function is(r,a){return a==null||Lh(r,a,Ks(a))}function Li(r,a){return r===a||r!==r&&a!==a}var ko=Nc(Du),Ms=Nc(function(r,a){return r>=a}),ps=Uh(function(){return arguments}())?Uh:function(r){return Ei(r)&&ji.call(r,"callee")&&!Eh.call(r,"callee")},ri=vn.isArray,Yl=Id?Aa(Id):od;function es(r){return r!=null&&Pa(r.length)&&!Si(r)}function qi(r){return Ei(r)&&es(r)}function Xo(r){return r===!0||r===!1||Ei(r)&&Rs(r)==de}var ii=Sp||Rf,_l=pp?Aa(pp):jh;function Io(r){return Ei(r)&&r.nodeType===1&&!qa(r)}function Gu(r){if(r==null)return!0;if(es(r)&&(ri(r)||typeof r=="string"||typeof r.splice=="function"||ii(r)||la(r)||ps(r)))return!r.length;var a=Sr(r);if(a==qe||a==Vt)return!r.size;if(da(r))return!sh(r).length;for(var g in r)if(ji.call(r,g))return!1;return!0}function gs(r,a){return Uu(r,a)}function Da(r,a,g){g=typeof g=="function"?g:B;var O=g?g(r,a):B;return O===B?Uu(r,a,B,g):!!O}function $r(r){if(!Ei(r))return!1;var a=Rs(r);return a==Ke||a==Ye||typeof r.message=="string"&&typeof r.name=="string"&&!qa(r)}function Yu(r){return typeof r=="number"&&Th(r)}function Si(r){if(!qr(r))return!1;var a=Rs(r);return a==ct||a==_t||a==fe||a==en}function bs(r){return typeof r=="number"&&r==Gt(r)}function Pa(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=zt}function qr(r){var a=typeof r;return r!=null&&(a=="object"||a=="function")}function Ei(r){return r!=null&&typeof r=="object"}var uu=gu?Aa(gu):Ep;function vd(r,a){return r===a||Vu(r,a,At(a))}function lc(r,a,g){return g=typeof g=="function"?g:B,Vu(r,a,At(a),g)}function yl(r){return xl(r)&&r!=+r}function Oa(r){if(Ns(r))throw new Tr(ce);return Or(r)}function Lo(r){return r===null}function wl(r){return r==null}function xl(r){return typeof r=="number"||Ei(r)&&Rs(r)==ht}function qa(r){if(!Ei(r)||Rs(r)!=xt)return!1;var a=Nu(r);if(a===null)return!0;var g=ji.call(a,"constructor")&&a.constructor;return typeof g=="function"&&g instanceof g&&au.call(g)==Xg}var ol=gp?Aa(gp):Yd;function Us(r){return bs(r)&&r>=-9007199254740991&&r<=zt}var Zu=Yf?Aa(Yf):Vh;function Zl(r){return typeof r=="string"||!ri(r)&&Ei(r)&&Rs(r)==_n}function Gs(r){return typeof r=="symbol"||Ei(r)&&Rs(r)==Yn}var la=mp?Aa(mp):Tf;function uc(r){return r===B}function Zh(r){return Ei(r)&&Sr(r)==lr}function $l(r){return Ei(r)&&Rs(r)==Jn}var gn=Nc(Ta),jn=Nc(function(r,a){return r<=a});function fr(r){if(!r)return[];if(es(r))return Zl(r)?sa(r):Js(r);if(ou&&r[ou])return Jf(r[ou]());var a=Sr(r),g=a==qe?ru:a==Vt?Ec:Fc;return g(r)}function sr(r){if(!r)return r===0?r:0;if(r=En(r),r===Zt||r===-1/0){var a=r<0?-1:1;return a*Le}return r===r?r:0}function Gt(r){var a=sr(r),g=a%1;return a===a?g?a-g:a:0}function Nn(r){return r?Ml(Gt(r),0,Rt):0}function En(r){if(typeof r=="number")return r;if(Gs(r))return Mt;if(qr(r)){var a=typeof r.valueOf=="function"?r.valueOf():r;r=qr(a)?a+"":a}if(typeof r!="string")return r===0?r:+r;r=Kc(r);var g=qu.test(r);return g||_h.test(r)?tu(r.slice(2),g?2:8):Jl.test(r)?Mt:+r}function ke(r){return ho(r,Ua(r))}function et(r){return r?Ml(Gt(r),-9007199254740991,zt):r===0?r:0}function Nt(r){return r==null?"":Ma(r)}var dn=Il(function(r,a){if(da(a)||es(a)){ho(a,Ks(a),r);return}for(var g in a)ji.call(a,g)&&Hl(r,g,a[g])}),Qn=Il(function(r,a){ho(a,Ua(a),r)}),br=Il(function(r,a,g,O){ho(a,Ua(a),r,O)}),wr=Il(function(r,a,g,O){ho(a,Ks(a),r,O)}),Yr=Ae(Pc);function Es(r,a){var g=Yo(r);return a==null?g:Ih(g,a)}var ra=fi(function(r,a){r=ki(r);var g=-1,O=a.length,ue=O>2?a[2]:B;for(ue&&Pi(a[0],a[1],ue)&&(O=1);++g<O;)for(var Me=a[g],dt=Ua(Me),Bt=-1,nn=dt.length;++Bt<nn;){var kn=dt[Bt],Ln=r[kn];(Ln===B||Li(Ln,mu[kn])&&!ji.call(r,kn))&&(r[kn]=Me[kn])}return r}),Xa=fi(function(r){return r.push(B,m),Ba($h,B,r)});function ao(r,a){return Kf(r,Ie(a,3),yo)}function cu(r,a){return Kf(r,Ie(a,3),Pl)}function ws(r,a){return r==null?r:Cu(r,Ie(a,3),Ua)}function sv(r,a){return r==null?r:Ef(r,Ie(a,3),Ua)}function Sm(r,a){return r&&yo(r,Ie(a,3))}function gg(r,a){return r&&Pl(r,Ie(a,3))}function av(r){return r==null?[]:ml(r,Ks(r))}function ov(r){return r==null?[]:ml(r,Ua(r))}function Lp(r,a,g){var O=r==null?B:nl(r,a);return O===B?g:O}function mg(r,a){return r!=null&&Mi(r,a,ad)}function cc(r,a){return r!=null&&Mi(r,a,dg)}var vg=gd(function(r,a,g){a!=null&&typeof a.toString!="function"&&(a=vu.call(a)),r[a]=g},Vp(Qa)),Cm=gd(function(r,a,g){a!=null&&typeof a.toString!="function"&&(a=vu.call(a)),ji.call(r,a)?r[a].push(g):r[a]=[g]},Ie),_g=fi(Fo);function Ks(r){return es(r)?nd(r):sh(r)}function Ua(r){return es(r)?nd(r,!0):sc(r)}function yg(r,a){var g={};return a=Ie(a,3),yo(r,function(O,ue,Me){co(g,a(O,ue,Me),O)}),g}function Dm(r,a){var g={};return a=Ie(a,3),yo(r,function(O,ue,Me){co(g,ue,a(O,ue,Me))}),g}var Bp=Il(function(r,a,g){$o(r,a,g)}),$h=Il(function(r,a,g,O){$o(r,a,g,O)}),wg=Ae(function(r,a){var g={};if(r==null)return g;var O=!1;a=ts(a,function(Me){return Me=To(Me,r),O||(O=Me.length>1),Me}),ho(r,re(r),g),O&&(g=eo(g,Se|ee|Qe,b));for(var ue=a.length;ue--;)Pf(g,a[ue]);return g});function lv(r,a){return nm(r,vt(Ie(a)))}var uv=Ae(function(r,a){return r==null?{}:ld(r,a)});function nm(r,a){if(r==null)return{};var g=ts(re(r),function(O){return[O]});return a=Ie(a),Hu(r,g,function(O,ue){return a(O,ue[0])})}function xg(r,a,g){a=To(a,r);var O=-1,ue=a.length;for(ue||(ue=1,r=B);++O<ue;){var Me=r==null?B:r[Ai(a[O])];Me===B&&(O=ue,Me=g),r=Si(Me)?Me.call(r):Me}return r}function bg(r,a,g){return r==null?r:Wu(r,a,g)}function rm(r,a,g,O){return O=typeof O=="function"?O:B,r==null?r:Wu(r,a,g,O)}var im=s(Ks),Sg=s(Ua);function cv(r,a,g){var O=ri(r),ue=O||ii(r)||la(r);if(a=Ie(a,4),g==null){var Me=r&&r.constructor;ue?g=O?new Me:[]:qr(r)?g=Si(Me)?Yo(Nu(r)):{}:g={}}return(ue?Wa:yo)(r,function(dt,Bt,nn){return a(g,dt,Bt,nn)}),g}function hv(r,a){return r==null?!0:Pf(r,a)}function ll(r,a,g){return r==null?r:Kd(r,a,kf(g))}function Kl(r,a,g,O){return O=typeof O=="function"?O:B,r==null?r:Kd(r,a,kf(g),O)}function Fc(r){return r==null?[]:ff(r,Ks(r))}function fv(r){return r==null?[]:ff(r,Ua(r))}function Am(r,a,g){return g===B&&(g=a,a=B),g!==B&&(g=En(g),g=g===g?g:0),a!==B&&(a=En(a),a=a===a?a:0),Ml(En(r),a,g)}function dv(r,a,g){return a=sr(a),g===B?(g=a,a=0):g=sr(g),r=En(r),Gd(r,a,g)}function sm(r,a,g){if(g&&typeof g!="boolean"&&Pi(r,a,g)&&(a=g=B),g===B&&(typeof a=="boolean"?(g=a,a=B):typeof r=="boolean"&&(g=r,r=B)),r===B&&a===B?(r=0,a=1):(r=sr(r),a===B?(a=r,r=0):a=sr(a)),r>a){var O=r;r=a,a=O}if(g||r%1||a%1){var ue=bf();return Qs(r+ue*(a-r+fp("1e-"+((ue+"").length-1))),a)}return Ko(r,a)}var Rp=Gl(function(r,a,g){return a=a.toLowerCase(),r+(g?Np(a):a)});function Np(r){return jp(Nt(r).toLowerCase())}function Bf(r){return r=Nt(r),r&&r.replace(wi,gf).replace(Bu,"")}function Fp(r,a,g){r=Nt(r),a=Ma(a);var O=r.length;g=g===B?O:Ml(Gt(g),0,O);var ue=g;return g-=a.length,g>=0&&r.slice(g,ue)==a}function zp(r){return r=Nt(r),r&&as.test(r)?r.replace(Zr,mf):r}function Cg(r){return r=Nt(r),r&&Mu.test(r)?r.replace(Co,"\\$&"):r}var tp=Gl(function(r,a,g){return r+(g?"-":"")+a.toLowerCase()}),pv=Gl(function(r,a,g){return r+(g?" ":"")+a.toLowerCase()}),gv=Jd("toLowerCase");function mv(r,a,g){r=Nt(r),a=Gt(a);var O=a?iu(r):0;if(!a||O>=a)return r;var ue=(a-O)/2;return Rc(yu(ue),g)+r+Rc(tc(ue),g)}function vv(r,a,g){r=Nt(r),a=Gt(a);var O=a?iu(r):0;return a&&O<a?r+Rc(a-O,g):r}function _v(r,a,g){r=Nt(r),a=Gt(a);var O=a?iu(r):0;return a&&O<a?Rc(a-O,g)+r:r}function Dg(r,a,g){return g||a==null?a=0:a&&(a=+a),Fd(Nt(r).replace(Ha,""),a||0)}function Up(r,a,g){return(g?Pi(r,a,g):a===B)?a=1:a=Gt(a),ah(Nt(r),a)}function Em(){var r=arguments,a=Nt(r[0]);return r.length<3?a:a.replace(r[1],r[2])}var on=Gl(function(r,a,g){return r+(g?"_":"")+a.toLowerCase()});function np(r,a,g){return g&&typeof g!="number"&&Pi(r,a,g)&&(a=g=B),g=g===B?Rt:g>>>0,g?(r=Nt(r),r&&(typeof a=="string"||a!=null&&!ol(a))&&(a=Ma(a),!a&&nu(r))?zo(sa(r),0,g):r.split(a,g)):[]}var Ag=Gl(function(r,a,g){return r+(g?" ":"")+jp(a)});function hc(r,a,g){return r=Nt(r),g=g==null?0:Ml(Gt(g),0,r.length),a=Ma(a),r.slice(g,g+a.length)==a}function qs(r,a,g){var O=ye.templateSettings;g&&Pi(r,a,g)&&(a=B),r=Nt(r),a=br({},a,O,u);var ue=br({},a.imports,O.imports,u),Me=Ks(ue),dt=ff(ue,Me),Bt,nn,kn=0,Ln=a.interpolate||Ja,zn="__p += '",_r=Ch((a.escape||Ja).source+"|"+Ln.source+"|"+(Ln===go?ca:Ja).source+"|"+(a.evaluate||Ja).source+"|$","g"),Fr="//# sourceURL="+(ji.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rg+"]")+`
`;r.replace(_r,function(Qr,yi,Ci,to,ka,oo){return Ci||(Ci=to),zn+=r.slice(kn,oo).replace(fu,Qf),yi&&(Bt=!0,zn+=`' +
__e(`+yi+`) +
'`),ka&&(nn=!0,zn+=`';
`+ka+`;
__p += '`),Ci&&(zn+=`' +
((__t = (`+Ci+`)) == null ? '' : __t) +
'`),kn=oo+Qr.length,Qr}),zn+=`';
`;var Xr=ji.call(a,"variable")&&a.variable;if(!Xr)zn=`with (obj) {
`+zn+`
}
`;else if(Jo.test(Xr))throw new Tr(we);zn=(nn?zn.replace(Bn,""):zn).replace(Hn,"$1").replace(yr,"$1;"),zn="function("+(Xr||"obj")+`) {
`+(Xr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Bt?", __e = _.escape":"")+(nn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+zn+`return __p
}`;var ci=am(function(){return bi(Me,Fr+"return "+zn).apply(B,dt)});if(ci.source=zn,$r(ci))throw ci;return ci}function yv(r){return Nt(r).toLowerCase()}function wv(r){return Nt(r).toUpperCase()}function xv(r,a,g){if(r=Nt(r),r&&(g||a===B))return Kc(r);if(!r||!(a=Ma(a)))return r;var O=sa(r),ue=sa(a),Me=Xf(O,ue),dt=df(O,ue)+1;return zo(O,Me,dt).join("")}function _d(r,a,g){if(r=Nt(r),r&&(g||a===B))return r.slice(0,qc(r)+1);if(!r||!(a=Ma(a)))return r;var O=sa(r),ue=df(O,sa(a))+1;return zo(O,0,ue).join("")}function bv(r,a,g){if(r=Nt(r),r&&(g||a===B))return r.replace(Ha,"");if(!r||!(a=Ma(a)))return r;var O=sa(r),ue=Xf(O,sa(a));return zo(O,ue).join("")}function Sv(r,a){var g=Ue,O=Ut;if(qr(a)){var ue="separator"in a?a.separator:ue;g="length"in a?Gt(a.length):g,O="omission"in a?Ma(a.omission):O}r=Nt(r);var Me=r.length;if(nu(r)){var dt=sa(r);Me=dt.length}if(g>=Me)return r;var Bt=g-iu(O);if(Bt<1)return O;var nn=dt?zo(dt,0,Bt).join(""):r.slice(0,Bt);if(ue===B)return nn+O;if(dt&&(Bt+=nn.length-Bt),ol(ue)){if(r.slice(Bt).search(ue)){var kn,Ln=nn;for(ue.global||(ue=Ch(ue.source,Nt(Ql.exec(ue))+"g")),ue.lastIndex=0;kn=ue.exec(Ln);)var zn=kn.index;nn=nn.slice(0,zn===B?Bt:zn)}}else if(r.indexOf(Ma(ue),Bt)!=Bt){var _r=nn.lastIndexOf(ue);_r>-1&&(nn=nn.slice(0,_r))}return nn+O}function Cv(r){return r=Nt(r),r&&Ni.test(r)?r.replace(zr,vo):r}var Dv=Gl(function(r,a,g){return r+(g?" ":"")+a.toUpperCase()}),jp=Jd("toUpperCase");function zc(r,a,g){return r=Nt(r),a=g?B:a,a===B?xp(r)?_f(r):Cc(r):r.match(a)||[]}var am=fi(function(r,a){try{return Ba(r,B,a)}catch(g){return $r(g)?g:new Tr(g)}}),Av=Ae(function(r,a){return Wa(a,function(g){g=Ai(g),co(r,g,vi(r[g],r))}),r});function Ev(r){var a=r==null?0:r.length,g=Ie();return r=a?ts(r,function(O){if(typeof O[1]!="function")throw new Sa(me);return[g(O[0]),O[1]]}):[],fi(function(O){for(var ue=-1;++ue<a;){var Me=r[ue];if(Ba(Me[0],this,O))return Ba(Me[1],this,O)}})}function Tv(r){return Af(eo(r,Se))}function Vp(r){return function(){return r}}function Kh(r,a){return r==null||r!==r?a:r}var Mv=Mo(),Pv=Mo(!0);function Qa(r){return r}function Hp(r){return ih(typeof r=="function"?r:eo(r,Se))}function Ov(r){return ha(eo(r,Se))}function yd(r,a){return lu(r,eo(a,Se))}var kv=fi(function(r,a){return function(g){return Fo(g,r,a)}}),Iv=fi(function(r,a){return function(g){return Fo(r,g,a)}});function hu(r,a,g){var O=Ks(a),ue=ml(a,O);g==null&&!(qr(a)&&(ue.length||!O.length))&&(g=a,a=r,r=this,ue=ml(a,Ks(a)));var Me=!(qr(g)&&"chain"in g)||!!g.chain,dt=Si(r);return Wa(ue,function(Bt){var nn=a[Bt];r[Bt]=nn,dt&&(r.prototype[Bt]=function(){var kn=this.__chain__;if(Me||kn){var Ln=r(this.__wrapped__),zn=Ln.__actions__=Js(this.__actions__);return zn.push({func:nn,args:arguments,thisArg:r}),Ln.__chain__=kn,Ln}return nn.apply(r,el([this.value()],arguments))})}),r}function Lv(){return Ls._===this&&(Ls._=Qg),this}function Wp(){}function Bv(r){return r=Gt(r),fi(function(a){return Ao(a,r)})}var Rv=Yh(ts),Nv=Yh(Ld),Tm=Yh($f);function Eg(r){return ai(r)?Dc(Ai(r)):Tp(r)}function Fv(r){return function(a){return r==null?B:nl(r,a)}}var zv=ep(),om=ep(!0);function qh(){return[]}function Rf(){return!1}function Uv(){return{}}function Mm(){return""}function jv(){return!0}function Xh(r,a){if(r=Gt(r),r<1||r>zt)return[];var g=Rt,O=Qs(r,Rt);a=Ie(a),r-=Rt;for(var ue=bh(O,a);++g<r;)a(g);return ue}function lm(r){return ri(r)?ts(r,Ai):Gs(r)?[r]:Js(di(Nt(r)))}function wd(r){var a=++Xc;return Nt(r)+a}var fc=Bc(function(r,a){return r+a},0),Vv=e("ceil"),Pm=Bc(function(r,a){return r/a},1),Om=e("floor");function Gp(r){return r&&r.length?Zo(r,Qa,Du):B}function Nf(r,a){return r&&r.length?Zo(r,Ie(a,2),Du):B}function km(r){return qf(r,Qa)}function Hv(r,a){return qf(r,Ie(a,2))}function Tg(r){return r&&r.length?Zo(r,Qa,Ta):B}function Wv(r,a){return r&&r.length?Zo(r,Ie(a,2),Ta):B}var Im=Bc(function(r,a){return r*a},1),Bl=e("round"),um=Bc(function(r,a){return r-a},0);function Lm(r){return r&&r.length?hf(r,Qa):0}function hh(r,a){return r&&r.length?hf(r,Ie(a,2)):0}return ye.after=Un,ye.ary=rr,ye.assign=dn,ye.assignIn=Qn,ye.assignInWith=br,ye.assignWith=wr,ye.at=Yr,ye.before=Nr,ye.bind=vi,ye.bindAll=Av,ye.bindKey=xi,ye.castArray=ds,ye.chain=Po,ye.chunk=t,ye.compact=i,ye.concat=o,ye.cond=Ev,ye.conforms=Tv,ye.constant=Vp,ye.countBy=$a,ye.create=Es,ye.curry=Ri,ye.curryRight=Ui,ye.debounce=zs,ye.defaults=ra,ye.defaultsDeep=Xa,ye.defer=M,ye.delay=Z,ye.difference=h,ye.differenceBy=d,ye.differenceWith=v,ye.drop=D,ye.dropRight=A,ye.dropRightWhile=T,ye.dropWhile=P,ye.fill=F,ye.filter=Zs,ye.flatMap=gt,ye.flatMapDeep=jt,ye.flatMapDepth=wn,ye.flatten=R,ye.flattenDeep=J,ye.flattenDepth=Y,ye.flip=xe,ye.flow=Mv,ye.flowRight=Pv,ye.fromPairs=ie,ye.functions=av,ye.functionsIn=ov,ye.groupBy=f,ye.initial=I,ye.intersection=G,ye.intersectionBy=te,ye.intersectionWith=pe,ye.invert=vg,ye.invertBy=Cm,ye.invokeMap=N,ye.iteratee=Hp,ye.keyBy=ge,ye.keys=Ks,ye.keysIn=Ua,ye.map=Oe,ye.mapKeys=yg,ye.mapValues=Dm,ye.matches=Ov,ye.matchesProperty=yd,ye.memoize=Re,ye.merge=Bp,ye.mergeWith=$h,ye.method=kv,ye.methodOf=Iv,ye.mixin=hu,ye.negate=vt,ye.nthArg=Bv,ye.omit=wg,ye.omitBy=lv,ye.once=Ct,ye.orderBy=Ht,ye.over=Rv,ye.overArgs=It,ye.overEvery=Nv,ye.overSome=Tm,ye.partial=Pn,ye.partialRight=xn,ye.partition=Sn,ye.pick=uv,ye.pickBy=nm,ye.property=Eg,ye.propertyOf=Fv,ye.pull=ft,ye.pullAll=Ze,ye.pullAllBy=yt,ye.pullAllWith=Et,ye.pullAt=Yt,ye.range=zv,ye.rangeRight=om,ye.rearg=Wn,ye.reject=Dr,ye.remove=qt,ye.rest=Cr,ye.reverse=ln,ye.sampleSize=Ur,ye.set=bg,ye.setWith=rm,ye.shuffle=pi,ye.slice=In,ye.sortBy=xa,ye.sortedUniq=cr,ye.sortedUniqBy=mr,ye.split=np,ye.spread=kr,ye.tail=Rr,ye.take=Lr,ye.takeRight=Ir,ye.takeRightWhile=ti,ye.takeWhile=Wr,ye.tap=il,ye.throttle=hr,ye.thru=Oo,ye.toArray=fr,ye.toPairs=im,ye.toPairsIn=Sg,ye.toPath=lm,ye.toPlainObject=ke,ye.transform=cv,ye.unary=Gr,ye.union=ls,ye.unionBy=Vr,ye.unionWith=$i,ye.uniq=Qi,ye.uniqBy=Oi,ye.uniqWith=Bi,ye.unset=hv,ye.unzip=ys,ye.unzipWith=ns,ye.update=ll,ye.updateWith=Kl,ye.values=Fc,ye.valuesIn=fv,ye.without=As,ye.words=zc,ye.wrap=_i,ye.xor=rs,ye.xorBy=Ji,ye.xorWith=Fs,ye.zip=Is,ye.zipObject=Ws,ye.zipObjectDeep=Ca,ye.zipWith=ta,ye.entries=im,ye.entriesIn=Sg,ye.extend=Qn,ye.extendWith=br,hu(ye,ye),ye.add=fc,ye.attempt=am,ye.camelCase=Rp,ye.capitalize=Np,ye.ceil=Vv,ye.clamp=Am,ye.clone=us,ye.cloneDeep=Ka,ye.cloneDeepWith=za,ye.cloneWith=So,ye.conformsTo=is,ye.deburr=Bf,ye.defaultTo=Kh,ye.divide=Pm,ye.endsWith=Fp,ye.eq=Li,ye.escape=zp,ye.escapeRegExp=Cg,ye.every=oa,ye.find=_,ye.findIndex=V,ye.findKey=ao,ye.findLast=he,ye.findLastIndex=z,ye.findLastKey=cu,ye.floor=Om,ye.forEach=nr,ye.forEachRight=l,ye.forIn=ws,ye.forInRight=sv,ye.forOwn=Sm,ye.forOwnRight=gg,ye.get=Lp,ye.gt=ko,ye.gte=Ms,ye.has=mg,ye.hasIn=cc,ye.head=j,ye.identity=Qa,ye.includes=x,ye.indexOf=X,ye.inRange=dv,ye.invoke=_g,ye.isArguments=ps,ye.isArray=ri,ye.isArrayBuffer=Yl,ye.isArrayLike=es,ye.isArrayLikeObject=qi,ye.isBoolean=Xo,ye.isBuffer=ii,ye.isDate=_l,ye.isElement=Io,ye.isEmpty=Gu,ye.isEqual=gs,ye.isEqualWith=Da,ye.isError=$r,ye.isFinite=Yu,ye.isFunction=Si,ye.isInteger=bs,ye.isLength=Pa,ye.isMap=uu,ye.isMatch=vd,ye.isMatchWith=lc,ye.isNaN=yl,ye.isNative=Oa,ye.isNil=wl,ye.isNull=Lo,ye.isNumber=xl,ye.isObject=qr,ye.isObjectLike=Ei,ye.isPlainObject=qa,ye.isRegExp=ol,ye.isSafeInteger=Us,ye.isSet=Zu,ye.isString=Zl,ye.isSymbol=Gs,ye.isTypedArray=la,ye.isUndefined=uc,ye.isWeakMap=Zh,ye.isWeakSet=$l,ye.join=oe,ye.kebabCase=tp,ye.last=Ee,ye.lastIndexOf=$e,ye.lowerCase=pv,ye.lowerFirst=gv,ye.lt=gn,ye.lte=jn,ye.max=Gp,ye.maxBy=Nf,ye.mean=km,ye.meanBy=Hv,ye.min=Tg,ye.minBy=Wv,ye.stubArray=qh,ye.stubFalse=Rf,ye.stubObject=Uv,ye.stubString=Mm,ye.stubTrue=jv,ye.multiply=Im,ye.nth=Xe,ye.noConflict=Lv,ye.noop=Wp,ye.now=Xn,ye.pad=mv,ye.padEnd=vv,ye.padStart=_v,ye.parseInt=Dg,ye.random=sm,ye.reduce=Rn,ye.reduceRight=dr,ye.repeat=Up,ye.replace=Em,ye.result=xg,ye.round=Bl,ye.runInContext=Xt,ye.sample=Pr,ye.size=mi,ye.snakeCase=on,ye.some=gi,ye.sortedIndex=Zn,ye.sortedIndexBy=Kn,ye.sortedIndexOf=ur,ye.sortedLastIndex=yn,ye.sortedLastIndexBy=An,ye.sortedLastIndexOf=qn,ye.startCase=Ag,ye.startsWith=hc,ye.subtract=um,ye.sum=Lm,ye.sumBy=hh,ye.template=qs,ye.times=Xh,ye.toFinite=sr,ye.toInteger=Gt,ye.toLength=Nn,ye.toLower=yv,ye.toNumber=En,ye.toSafeInteger=et,ye.toString=Nt,ye.toUpper=wv,ye.trim=xv,ye.trimEnd=_d,ye.trimStart=bv,ye.truncate=Sv,ye.unescape=Cv,ye.uniqueId=wd,ye.upperCase=Dv,ye.upperFirst=jp,ye.each=nr,ye.eachRight=l,ye.first=j,hu(ye,function(){var r={};return yo(ye,function(a,g){ji.call(ye.prototype,g)||(r[g]=a)}),r}(),{chain:!1}),ye.VERSION=Fe,Wa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){ye[r].placeholder=ye}),Wa(["drop","take"],function(r,a){hi.prototype[r]=function(g){g=g===B?1:ks(Gt(g),0);var O=this.__filtered__&&!a?new hi(this):this.clone();return O.__filtered__?O.__takeCount__=Qs(g,O.__takeCount__):O.__views__.push({size:Qs(g,Rt),type:r+(O.__dir__<0?"Right":"")}),O},hi.prototype[r+"Right"]=function(g){return this.reverse()[r](g).reverse()}}),Wa(["filter","map","takeWhile"],function(r,a){var g=a+1,O=g==$t||g==lt;hi.prototype[r]=function(ue){var Me=this.clone();return Me.__iteratees__.push({iteratee:Ie(ue,3),type:g}),Me.__filtered__=Me.__filtered__||O,Me}}),Wa(["head","last"],function(r,a){var g="take"+(a?"Right":"");hi.prototype[r]=function(){return this[g](1).value()[0]}}),Wa(["initial","tail"],function(r,a){var g="drop"+(a?"":"Right");hi.prototype[r]=function(){return this.__filtered__?new hi(this):this[g](1)}}),hi.prototype.compact=function(){return this.filter(Qa)},hi.prototype.find=function(r){return this.filter(r).head()},hi.prototype.findLast=function(r){return this.reverse().find(r)},hi.prototype.invokeMap=fi(function(r,a){return typeof r=="function"?new hi(this):this.map(function(g){return Fo(g,r,a)})}),hi.prototype.reject=function(r){return this.filter(vt(Ie(r)))},hi.prototype.slice=function(r,a){r=Gt(r);var g=this;return g.__filtered__&&(r>0||a<0)?new hi(g):(r<0?g=g.takeRight(-r):r&&(g=g.drop(r)),a!==B&&(a=Gt(a),g=a<0?g.dropRight(-a):g.take(a-r)),g)},hi.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},hi.prototype.toArray=function(){return this.take(Rt)},yo(hi.prototype,function(r,a){var g=/^(?:filter|find|map|reject)|While$/.test(a),O=/^(?:head|last)$/.test(a),ue=ye[O?"take"+(a=="last"?"Right":""):a],Me=O||/^find/.test(a);ue&&(ye.prototype[a]=function(){var dt=this.__wrapped__,Bt=O?[1]:arguments,nn=dt instanceof hi,kn=Bt[0],Ln=nn||ri(dt),zn=function(yi){var Ci=ue.apply(ye,el([yi],Bt));return O&&_r?Ci[0]:Ci};Ln&&g&&typeof kn=="function"&&kn.length!=1&&(nn=Ln=!1);var _r=this.__chain__,Fr=!!this.__actions__.length,Xr=Me&&!_r,ci=nn&&!Fr;if(!Me&&Ln){dt=ci?dt:new hi(this);var Qr=r.apply(dt,Bt);return Qr.__actions__.push({func:Oo,args:[zn],thisArg:B}),new Bs(Qr,_r)}return Xr&&ci?r.apply(this,Bt):(Qr=this.thru(zn),Xr?O?Qr.value()[0]:Qr.value():Qr)})}),Wa(["pop","push","shift","sort","splice","unshift"],function(r){var a=su[r],g=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",O=/^(?:pop|shift)$/.test(r);ye.prototype[r]=function(){var ue=arguments;if(O&&!this.__chain__){var Me=this.value();return a.apply(ri(Me)?Me:[],ue)}return this[g](function(dt){return a.apply(ri(dt)?dt:[],ue)})}}),yo(hi.prototype,function(r,a){var g=ye[a];if(g){var O=g.name+"";ji.call(Fu,O)||(Fu[O]=[]),Fu[O].push({name:a,func:g})}}),Fu[Lc(B,Ne).name]=[{name:"wrapper",func:B}],hi.prototype.clone=Ph,hi.prototype.reverse=Al,hi.prototype.value=Oh,ye.prototype.at=sl,ye.prototype.chain=Ya,ye.prototype.commit=al,ye.prototype.next=Vi,ye.prototype.plant=po,ye.prototype.reverse=Za,ye.prototype.toJSON=ye.prototype.valueOf=ye.prototype.value=ga,ye.prototype.first=ye.prototype.head,ou&&(ye.prototype[ou]=Ll),ye},Ii=Nd();Ls._=Ii,se=(function(){return Ii}).call(be,K,be,je),se!==B&&(je.exports=se)}).call(this)},"./node_modules/object-assign/index.js":je=>{/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var be=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;function B(Be){if(Be==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Be)}function Fe(){try{if(!Object.assign)return!1;var Be=new String("abc");if(Be[5]="de",Object.getOwnPropertyNames(Be)[0]==="5")return!1;for(var ce={},me=0;me<10;me++)ce["_"+String.fromCharCode(me)]=me;var we=Object.getOwnPropertyNames(ce).map(function(De){return ce[De]});if(we.join("")!=="0123456789")return!1;var ae={};return"abcdefghijklmnopqrst".split("").forEach(function(De){ae[De]=De}),Object.keys(Object.assign({},ae)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}je.exports=Fe()?Object.assign:function(Be,ce){for(var me,we=B(Be),ae,De=1;De<arguments.length;De++){me=Object(arguments[De]);for(var Pe in me)K.call(me,Pe)&&(we[Pe]=me[Pe]);if(be){ae=be(me);for(var Se=0;Se<ae.length;Se++)se.call(me,ae[Se])&&(we[ae[Se]]=me[ae[Se]])}}return we}},"./node_modules/object-inspect/index.js":(je,be,K)=>{var se=typeof Map=="function"&&Map.prototype,B=Object.getOwnPropertyDescriptor&&se?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Fe=se&&B&&typeof B.get=="function"?B.get:null,Be=se&&Map.prototype.forEach,ce=typeof Set=="function"&&Set.prototype,me=Object.getOwnPropertyDescriptor&&ce?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,we=ce&&me&&typeof me.get=="function"?me.get:null,ae=ce&&Set.prototype.forEach,De=typeof WeakMap=="function"&&WeakMap.prototype,Pe=De?WeakMap.prototype.has:null,Se=typeof WeakSet=="function"&&WeakSet.prototype,ee=Se?WeakSet.prototype.has:null,Qe=typeof WeakRef=="function"&&WeakRef.prototype,wt=Qe?WeakRef.prototype.deref:null,Dt=Boolean.prototype.valueOf,at=Object.prototype.toString,Ne=Function.prototype.toString,Je=String.prototype.match,pt=String.prototype.slice,ot=String.prototype.replace,Jt=String.prototype.toUpperCase,Qt=String.prototype.toLowerCase,ut=RegExp.prototype.test,St=Array.prototype.concat,Lt=Array.prototype.join,Ue=Array.prototype.slice,Ut=Math.floor,Ot=typeof BigInt=="function"?BigInt.prototype.valueOf:null,rn=Object.getOwnPropertySymbols,$t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,sn=typeof Symbol=="function"&&typeof Symbol.iterator=="object",lt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===sn||!0)?Symbol.toStringTag:null,Zt=Object.prototype.propertyIsEnumerable,zt=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(pn){return pn.__proto__}:null);function Le(pn,Wt){if(pn===1/0||pn===-1/0||pn!==pn||pn&&pn>-1e3&&pn<1e3||ut.call(/e/,Wt))return Wt;var un=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof pn=="number"){var fn=pn<0?-Ut(-pn):Ut(pn);if(fn!==pn){var Bn=String(fn),Hn=pt.call(Wt,Bn.length+1);return ot.call(Bn,un,"$&_")+"."+ot.call(ot.call(Hn,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ot.call(Wt,un,"$&_")}var Mt=K("?4f7e"),Rt=Mt.custom,tt=ct(Rt)?Rt:null;je.exports=function pn(Wt,un,fn,Bn){var Hn=un||{};if(ht(Hn,"quoteStyle")&&Hn.quoteStyle!=="single"&&Hn.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ht(Hn,"maxStringLength")&&(typeof Hn.maxStringLength=="number"?Hn.maxStringLength<0&&Hn.maxStringLength!==1/0:Hn.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var yr=ht(Hn,"customInspect")?Hn.customInspect:!0;if(typeof yr!="boolean"&&yr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ht(Hn,"indent")&&Hn.indent!==null&&Hn.indent!=="	"&&!(parseInt(Hn.indent,10)===Hn.indent&&Hn.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ht(Hn,"numericSeparator")&&typeof Hn.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var zr=Hn.numericSeparator;if(typeof Wt>"u")return"undefined";if(Wt===null)return"null";if(typeof Wt=="boolean")return Wt?"true":"false";if(typeof Wt=="string")return lr(Wt,Hn);if(typeof Wt=="number"){if(Wt===0)return 1/0/Wt>0?"0":"-0";var Zr=String(Wt);return zr?Le(Wt,Zr):Zr}if(typeof Wt=="bigint"){var Ni=String(Wt)+"n";return zr?Le(Wt,Ni):Ni}var as=typeof Hn.depth>"u"?5:Hn.depth;if(typeof fn>"u"&&(fn=0),fn>=as&&as>0&&typeof Wt=="object")return U(Wt)?"[Array]":"[Object]";var Ss=pr(Hn,fn);if(typeof Bn>"u")Bn=[];else if(Ge(Bn,Wt)>=0)return"[Circular]";function Os(Jl,qu,Xu){if(qu&&(Bn=Ue.call(Bn),Bn.push(qu)),Xu){var _h={depth:Hn.depth};return ht(Hn,"quoteStyle")&&(_h.quoteStyle=Hn.quoteStyle),pn(Jl,_h,fn+1,Bn)}return pn(Jl,Hn,fn+1,Bn)}if(typeof Wt=="function"&&!fe(Wt)){var go=xt(Wt),$u=Mr(Wt,Os);return"[Function"+(go?": "+go:" (anonymous)")+"]"+($u.length>0?" { "+Lt.call($u,", ")+" }":"")}if(ct(Wt)){var gc=sn?ot.call(String(Wt),/^(Symbol\(.*\))_[^)]*$/,"$1"):$t.call(Wt);return typeof Wt=="object"&&!sn?$n(gc):gc}if(or(Wt)){for(var Xl="<"+Qt.call(String(Wt.nodeName)),Co=Wt.attributes||[],Mu=0;Mu<Co.length;Mu++)Xl+=" "+Co[Mu].name+"="+We(C(Co[Mu].value),"double",Hn);return Xl+=">",Wt.childNodes&&Wt.childNodes.length&&(Xl+="..."),Xl+="</"+Qt.call(String(Wt.nodeName))+">",Xl}if(U(Wt)){if(Wt.length===0)return"[]";var Ha=Mr(Wt,Os);return Ss&&!tr(Ha)?"["+Br(Ha,Ss)+"]":"[ "+Lt.call(Ha,", ")+" ]"}if(de(Wt)){var vh=Mr(Wt,Os);return!("cause"in Error.prototype)&&"cause"in Wt&&!Zt.call(Wt,"cause")?"{ ["+String(Wt)+"] "+Lt.call(St.call("[cause]: "+Os(Wt.cause),vh),", ")+" }":vh.length===0?"["+String(Wt)+"]":"{ ["+String(Wt)+"] "+Lt.call(vh,", ")+" }"}if(typeof Wt=="object"&&yr){if(tt&&typeof Wt[tt]=="function"&&Mt)return Mt(Wt,{depth:as-fn});if(yr!=="symbol"&&typeof Wt.inspect=="function")return Wt.inspect()}if(en(Wt)){var mc=[];return Be&&Be.call(Wt,function(Jl,qu){mc.push(Os(qu,Wt,!0)+" => "+Os(Jl,Wt))}),Gn("Map",Fe.call(Wt),mc,Ss)}if(_n(Wt)){var Vc=[];return ae&&ae.call(Wt,function(Jl){Vc.push(Os(Jl,Wt))}),Gn("Set",we.call(Wt),Vc,Ss)}if(bt(Wt))return Tn("WeakMap");if(Yn(Wt))return Tn("WeakSet");if(Vt(Wt))return Tn("WeakRef");if(Ye(Wt))return $n(Os(Number(Wt)));if(_t(Wt))return $n(Os(Ot.call(Wt)));if(Ke(Wt))return $n(Dt.call(Wt));if(Ce(Wt))return $n(Os(String(Wt)));if(!Q(Wt)&&!fe(Wt)){var Pu=Mr(Wt,Os),Ou=zt?zt(Wt)===Object.prototype:Wt instanceof Object||Wt.constructor===Object,Jo=Wt instanceof Object?"":"null prototype",Ku=!Ou&&lt&&Object(Wt)===Wt&&lt in Wt?pt.call(Pt(Wt),8,-1):Jo?"Object":"",ca=Ou||typeof Wt.constructor!="function"?"":Wt.constructor.name?Wt.constructor.name+" ":"",Ql=ca+(Ku||Jo?"["+Lt.call(St.call([],Ku||[],Jo||[]),": ")+"] ":"");return Pu.length===0?Ql+"{}":Ss?Ql+"{"+Br(Pu,Ss)+"}":Ql+"{ "+Lt.call(Pu,", ")+" }"}return String(Wt)};function We(pn,Wt,un){var fn=(un.quoteStyle||Wt)==="double"?'"':"'";return fn+pn+fn}function C(pn){return ot.call(String(pn),/"/g,"&quot;")}function U(pn){return Pt(pn)==="[object Array]"&&(!lt||!(typeof pn=="object"&&lt in pn))}function Q(pn){return Pt(pn)==="[object Date]"&&(!lt||!(typeof pn=="object"&&lt in pn))}function fe(pn){return Pt(pn)==="[object RegExp]"&&(!lt||!(typeof pn=="object"&&lt in pn))}function de(pn){return Pt(pn)==="[object Error]"&&(!lt||!(typeof pn=="object"&&lt in pn))}function Ce(pn){return Pt(pn)==="[object String]"&&(!lt||!(typeof pn=="object"&&lt in pn))}function Ye(pn){return Pt(pn)==="[object Number]"&&(!lt||!(typeof pn=="object"&&lt in pn))}function Ke(pn){return Pt(pn)==="[object Boolean]"&&(!lt||!(typeof pn=="object"&&lt in pn))}function ct(pn){if(sn)return pn&&typeof pn=="object"&&pn instanceof Symbol;if(typeof pn=="symbol")return!0;if(!pn||typeof pn!="object"||!$t)return!1;try{return $t.call(pn),!0}catch{}return!1}function _t(pn){if(!pn||typeof pn!="object"||!Ot)return!1;try{return Ot.call(pn),!0}catch{}return!1}var qe=Object.prototype.hasOwnProperty||function(pn){return pn in this};function ht(pn,Wt){return qe.call(pn,Wt)}function Pt(pn){return at.call(pn)}function xt(pn){if(pn.name)return pn.name;var Wt=Je.call(Ne.call(pn),/^function\s*([\w$]+)/);return Wt?Wt[1]:null}function Ge(pn,Wt){if(pn.indexOf)return pn.indexOf(Wt);for(var un=0,fn=pn.length;un<fn;un++)if(pn[un]===Wt)return un;return-1}function en(pn){if(!Fe||!pn||typeof pn!="object")return!1;try{Fe.call(pn);try{we.call(pn)}catch{return!0}return pn instanceof Map}catch{}return!1}function bt(pn){if(!Pe||!pn||typeof pn!="object")return!1;try{Pe.call(pn,Pe);try{ee.call(pn,ee)}catch{return!0}return pn instanceof WeakMap}catch{}return!1}function Vt(pn){if(!wt||!pn||typeof pn!="object")return!1;try{return wt.call(pn),!0}catch{}return!1}function _n(pn){if(!we||!pn||typeof pn!="object")return!1;try{we.call(pn);try{Fe.call(pn)}catch{return!0}return pn instanceof Set}catch{}return!1}function Yn(pn){if(!ee||!pn||typeof pn!="object")return!1;try{ee.call(pn,ee);try{Pe.call(pn,Pe)}catch{return!0}return pn instanceof WeakSet}catch{}return!1}function or(pn){return!pn||typeof pn!="object"?!1:typeof HTMLElement<"u"&&pn instanceof HTMLElement?!0:typeof pn.nodeName=="string"&&typeof pn.getAttribute=="function"}function lr(pn,Wt){if(pn.length>Wt.maxStringLength){var un=pn.length-Wt.maxStringLength,fn="... "+un+" more character"+(un>1?"s":"");return lr(pt.call(pn,0,Wt.maxStringLength),Wt)+fn}var Bn=ot.call(ot.call(pn,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Jn);return We(Bn,"single",Wt)}function Jn(pn){var Wt=pn.charCodeAt(0),un={8:"b",9:"t",10:"n",12:"f",13:"r"}[Wt];return un?"\\"+un:"\\x"+(Wt<16?"0":"")+Jt.call(Wt.toString(16))}function $n(pn){return"Object("+pn+")"}function Tn(pn){return pn+" { ? }"}function Gn(pn,Wt,un,fn){var Bn=fn?Br(un,fn):Lt.call(un,", ");return pn+" ("+Wt+") {"+Bn+"}"}function tr(pn){for(var Wt=0;Wt<pn.length;Wt++)if(Ge(pn[Wt],`
`)>=0)return!1;return!0}function pr(pn,Wt){var un;if(pn.indent==="	")un="	";else if(typeof pn.indent=="number"&&pn.indent>0)un=Lt.call(Array(pn.indent+1)," ");else return null;return{base:un,prev:Lt.call(Array(Wt+1),un)}}function Br(pn,Wt){if(pn.length===0)return"";var un=`
`+Wt.prev+Wt.base;return un+Lt.call(pn,","+un)+`
`+Wt.prev}function Mr(pn,Wt){var un=U(pn),fn=[];if(un){fn.length=pn.length;for(var Bn=0;Bn<pn.length;Bn++)fn[Bn]=ht(pn,Bn)?Wt(pn[Bn],pn):""}var Hn=typeof rn=="function"?rn(pn):[],yr;if(sn){yr={};for(var zr=0;zr<Hn.length;zr++)yr["$"+Hn[zr]]=Hn[zr]}for(var Zr in pn)ht(pn,Zr)&&(un&&String(Number(Zr))===Zr&&Zr<pn.length||sn&&yr["$"+Zr]instanceof Symbol||(ut.call(/[^\w$]/,Zr)?fn.push(Wt(Zr,pn)+": "+Wt(pn[Zr],pn)):fn.push(Zr+": "+Wt(pn[Zr],pn))));if(typeof rn=="function")for(var Ni=0;Ni<Hn.length;Ni++)Zt.call(pn,Hn[Ni])&&fn.push("["+Wt(Hn[Ni])+"]: "+Wt(pn[Hn[Ni]],pn));return fn}},"./node_modules/prop-types/checkPropTypes.js":(je,be,K)=>{var se=function(){};{var B=K("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),Fe={},Be=K("./node_modules/prop-types/lib/has.js");se=function(me){var we="Warning: "+me;typeof console<"u"&&console.error(we);try{throw new Error(we)}catch{}}}function ce(me,we,ae,De,Pe){for(var Se in me)if(Be(me,Se)){var ee;try{if(typeof me[Se]!="function"){var Qe=Error((De||"React class")+": "+ae+" type `"+Se+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof me[Se]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Qe.name="Invariant Violation",Qe}ee=me[Se](we,Se,De,ae,null,B)}catch(Dt){ee=Dt}if(ee&&!(ee instanceof Error)&&se((De||"React class")+": type specification of "+ae+" `"+Se+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof ee+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),ee instanceof Error&&!(ee.message in Fe)){Fe[ee.message]=!0;var wt=Pe?Pe():"";se("Failed "+ae+" type: "+ee.message+(wt??""))}}}ce.resetWarningCache=function(){Fe={}},je.exports=ce},"./node_modules/prop-types/factoryWithTypeCheckers.js":(je,be,K)=>{var se=K("./node_modules/prop-types/node_modules/react-is/index.js"),B=K("./node_modules/object-assign/index.js"),Fe=K("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),Be=K("./node_modules/prop-types/lib/has.js"),ce=K("./node_modules/prop-types/checkPropTypes.js"),me=function(){};me=function(ae){var De="Warning: "+ae;typeof console<"u"&&console.error(De);try{throw new Error(De)}catch{}};function we(){return null}je.exports=function(ae,De){var Pe=typeof Symbol=="function"&&Symbol.iterator,Se="@@iterator";function ee(Rt){var tt=Rt&&(Pe&&Rt[Pe]||Rt[Se]);if(typeof tt=="function")return tt}var Qe="<<anonymous>>",wt={array:Je("array"),bigint:Je("bigint"),bool:Je("boolean"),func:Je("function"),number:Je("number"),object:Je("object"),string:Je("string"),symbol:Je("symbol"),any:pt(),arrayOf:ot,element:Jt(),elementType:Qt(),instanceOf:ut,node:Ut(),objectOf:Lt,oneOf:St,oneOfType:Ue,shape:rn,exact:$t};function Dt(Rt,tt){return Rt===tt?Rt!==0||1/Rt===1/tt:Rt!==Rt&&tt!==tt}function at(Rt,tt){this.message=Rt,this.data=tt&&typeof tt=="object"?tt:{},this.stack=""}at.prototype=Error.prototype;function Ne(Rt){var tt={},We=0;function C(Q,fe,de,Ce,Ye,Ke,ct){if(Ce=Ce||Qe,Ke=Ke||de,ct!==Fe){if(De){var _t=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw _t.name="Invariant Violation",_t}else if(typeof console<"u"){var qe=Ce+":"+de;!tt[qe]&&We<3&&(me("You are manually calling a React.PropTypes validation function for the `"+Ke+"` prop on `"+Ce+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),tt[qe]=!0,We++)}}return fe[de]==null?Q?fe[de]===null?new at("The "+Ye+" `"+Ke+"` is marked as required "+("in `"+Ce+"`, but its value is `null`.")):new at("The "+Ye+" `"+Ke+"` is marked as required in "+("`"+Ce+"`, but its value is `undefined`.")):null:Rt(fe,de,Ce,Ye,Ke)}var U=C.bind(null,!1);return U.isRequired=C.bind(null,!0),U}function Je(Rt){function tt(We,C,U,Q,fe,de){var Ce=We[C],Ye=Zt(Ce);if(Ye!==Rt){var Ke=zt(Ce);return new at("Invalid "+Q+" `"+fe+"` of type "+("`"+Ke+"` supplied to `"+U+"`, expected ")+("`"+Rt+"`."),{expectedType:Rt})}return null}return Ne(tt)}function pt(){return Ne(we)}function ot(Rt){function tt(We,C,U,Q,fe){if(typeof Rt!="function")return new at("Property `"+fe+"` of component `"+U+"` has invalid PropType notation inside arrayOf.");var de=We[C];if(!Array.isArray(de)){var Ce=Zt(de);return new at("Invalid "+Q+" `"+fe+"` of type "+("`"+Ce+"` supplied to `"+U+"`, expected an array."))}for(var Ye=0;Ye<de.length;Ye++){var Ke=Rt(de,Ye,U,Q,fe+"["+Ye+"]",Fe);if(Ke instanceof Error)return Ke}return null}return Ne(tt)}function Jt(){function Rt(tt,We,C,U,Q){var fe=tt[We];if(!ae(fe)){var de=Zt(fe);return new at("Invalid "+U+" `"+Q+"` of type "+("`"+de+"` supplied to `"+C+"`, expected a single ReactElement."))}return null}return Ne(Rt)}function Qt(){function Rt(tt,We,C,U,Q){var fe=tt[We];if(!se.isValidElementType(fe)){var de=Zt(fe);return new at("Invalid "+U+" `"+Q+"` of type "+("`"+de+"` supplied to `"+C+"`, expected a single ReactElement type."))}return null}return Ne(Rt)}function ut(Rt){function tt(We,C,U,Q,fe){if(!(We[C]instanceof Rt)){var de=Rt.name||Qe,Ce=Mt(We[C]);return new at("Invalid "+Q+" `"+fe+"` of type "+("`"+Ce+"` supplied to `"+U+"`, expected ")+("instance of `"+de+"`."))}return null}return Ne(tt)}function St(Rt){if(!Array.isArray(Rt))return arguments.length>1?me("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):me("Invalid argument supplied to oneOf, expected an array."),we;function tt(We,C,U,Q,fe){for(var de=We[C],Ce=0;Ce<Rt.length;Ce++)if(Dt(de,Rt[Ce]))return null;var Ye=JSON.stringify(Rt,function(ct,_t){var qe=zt(_t);return qe==="symbol"?String(_t):_t});return new at("Invalid "+Q+" `"+fe+"` of value `"+String(de)+"` "+("supplied to `"+U+"`, expected one of "+Ye+"."))}return Ne(tt)}function Lt(Rt){function tt(We,C,U,Q,fe){if(typeof Rt!="function")return new at("Property `"+fe+"` of component `"+U+"` has invalid PropType notation inside objectOf.");var de=We[C],Ce=Zt(de);if(Ce!=="object")return new at("Invalid "+Q+" `"+fe+"` of type "+("`"+Ce+"` supplied to `"+U+"`, expected an object."));for(var Ye in de)if(Be(de,Ye)){var Ke=Rt(de,Ye,U,Q,fe+"."+Ye,Fe);if(Ke instanceof Error)return Ke}return null}return Ne(tt)}function Ue(Rt){if(!Array.isArray(Rt))return me("Invalid argument supplied to oneOfType, expected an instance of array."),we;for(var tt=0;tt<Rt.length;tt++){var We=Rt[tt];if(typeof We!="function")return me("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+Le(We)+" at index "+tt+"."),we}function C(U,Q,fe,de,Ce){for(var Ye=[],Ke=0;Ke<Rt.length;Ke++){var ct=Rt[Ke],_t=ct(U,Q,fe,de,Ce,Fe);if(_t==null)return null;_t.data&&Be(_t.data,"expectedType")&&Ye.push(_t.data.expectedType)}var qe=Ye.length>0?", expected one of type ["+Ye.join(", ")+"]":"";return new at("Invalid "+de+" `"+Ce+"` supplied to "+("`"+fe+"`"+qe+"."))}return Ne(C)}function Ut(){function Rt(tt,We,C,U,Q){return sn(tt[We])?null:new at("Invalid "+U+" `"+Q+"` supplied to "+("`"+C+"`, expected a ReactNode."))}return Ne(Rt)}function Ot(Rt,tt,We,C,U){return new at((Rt||"React class")+": "+tt+" type `"+We+"."+C+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+U+"`.")}function rn(Rt){function tt(We,C,U,Q,fe){var de=We[C],Ce=Zt(de);if(Ce!=="object")return new at("Invalid "+Q+" `"+fe+"` of type `"+Ce+"` "+("supplied to `"+U+"`, expected `object`."));for(var Ye in Rt){var Ke=Rt[Ye];if(typeof Ke!="function")return Ot(U,Q,fe,Ye,zt(Ke));var ct=Ke(de,Ye,U,Q,fe+"."+Ye,Fe);if(ct)return ct}return null}return Ne(tt)}function $t(Rt){function tt(We,C,U,Q,fe){var de=We[C],Ce=Zt(de);if(Ce!=="object")return new at("Invalid "+Q+" `"+fe+"` of type `"+Ce+"` "+("supplied to `"+U+"`, expected `object`."));var Ye=B({},We[C],Rt);for(var Ke in Ye){var ct=Rt[Ke];if(Be(Rt,Ke)&&typeof ct!="function")return Ot(U,Q,fe,Ke,zt(ct));if(!ct)return new at("Invalid "+Q+" `"+fe+"` key `"+Ke+"` supplied to `"+U+"`.\nBad object: "+JSON.stringify(We[C],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(Rt),null,"  "));var _t=ct(de,Ke,U,Q,fe+"."+Ke,Fe);if(_t)return _t}return null}return Ne(tt)}function sn(Rt){switch(typeof Rt){case"number":case"string":case"undefined":return!0;case"boolean":return!Rt;case"object":if(Array.isArray(Rt))return Rt.every(sn);if(Rt===null||ae(Rt))return!0;var tt=ee(Rt);if(tt){var We=tt.call(Rt),C;if(tt!==Rt.entries){for(;!(C=We.next()).done;)if(!sn(C.value))return!1}else for(;!(C=We.next()).done;){var U=C.value;if(U&&!sn(U[1]))return!1}}else return!1;return!0;default:return!1}}function lt(Rt,tt){return Rt==="symbol"?!0:tt?tt["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&tt instanceof Symbol:!1}function Zt(Rt){var tt=typeof Rt;return Array.isArray(Rt)?"array":Rt instanceof RegExp?"object":lt(tt,Rt)?"symbol":tt}function zt(Rt){if(typeof Rt>"u"||Rt===null)return""+Rt;var tt=Zt(Rt);if(tt==="object"){if(Rt instanceof Date)return"date";if(Rt instanceof RegExp)return"regexp"}return tt}function Le(Rt){var tt=zt(Rt);switch(tt){case"array":case"object":return"an "+tt;case"boolean":case"date":case"regexp":return"a "+tt;default:return tt}}function Mt(Rt){return!Rt.constructor||!Rt.constructor.name?Qe:Rt.constructor.name}return wt.checkPropTypes=ce,wt.resetWarningCache=ce.resetWarningCache,wt.PropTypes=wt,wt}},"./node_modules/prop-types/index.js":(je,be,K)=>{{var se=K("./node_modules/prop-types/node_modules/react-is/index.js"),B=!0;je.exports=K("./node_modules/prop-types/factoryWithTypeCheckers.js")(se.isElement,B)}},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":je=>{var be="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";je.exports=be},"./node_modules/prop-types/lib/has.js":je=>{je.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/prop-types/node_modules/react-is/cjs/react-is.development.js":(je,be)=>{/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var K=typeof Symbol=="function"&&Symbol.for,se=K?Symbol.for("react.element"):60103,B=K?Symbol.for("react.portal"):60106,Fe=K?Symbol.for("react.fragment"):60107,Be=K?Symbol.for("react.strict_mode"):60108,ce=K?Symbol.for("react.profiler"):60114,me=K?Symbol.for("react.provider"):60109,we=K?Symbol.for("react.context"):60110,ae=K?Symbol.for("react.async_mode"):60111,De=K?Symbol.for("react.concurrent_mode"):60111,Pe=K?Symbol.for("react.forward_ref"):60112,Se=K?Symbol.for("react.suspense"):60113,ee=K?Symbol.for("react.suspense_list"):60120,Qe=K?Symbol.for("react.memo"):60115,wt=K?Symbol.for("react.lazy"):60116,Dt=K?Symbol.for("react.block"):60121,at=K?Symbol.for("react.fundamental"):60117,Ne=K?Symbol.for("react.responder"):60118,Je=K?Symbol.for("react.scope"):60119;function pt(ct){return typeof ct=="string"||typeof ct=="function"||ct===Fe||ct===De||ct===ce||ct===Be||ct===Se||ct===ee||typeof ct=="object"&&ct!==null&&(ct.$$typeof===wt||ct.$$typeof===Qe||ct.$$typeof===me||ct.$$typeof===we||ct.$$typeof===Pe||ct.$$typeof===at||ct.$$typeof===Ne||ct.$$typeof===Je||ct.$$typeof===Dt)}function ot(ct){if(typeof ct=="object"&&ct!==null){var _t=ct.$$typeof;switch(_t){case se:var qe=ct.type;switch(qe){case ae:case De:case Fe:case ce:case Be:case Se:return qe;default:var ht=qe&&qe.$$typeof;switch(ht){case we:case Pe:case wt:case Qe:case me:return ht;default:return _t}}case B:return _t}}}var Jt=ae,Qt=De,ut=we,St=me,Lt=se,Ue=Pe,Ut=Fe,Ot=wt,rn=Qe,$t=B,sn=ce,lt=Be,Zt=Se,zt=!1;function Le(ct){return zt||(zt=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),Mt(ct)||ot(ct)===ae}function Mt(ct){return ot(ct)===De}function Rt(ct){return ot(ct)===we}function tt(ct){return ot(ct)===me}function We(ct){return typeof ct=="object"&&ct!==null&&ct.$$typeof===se}function C(ct){return ot(ct)===Pe}function U(ct){return ot(ct)===Fe}function Q(ct){return ot(ct)===wt}function fe(ct){return ot(ct)===Qe}function de(ct){return ot(ct)===B}function Ce(ct){return ot(ct)===ce}function Ye(ct){return ot(ct)===Be}function Ke(ct){return ot(ct)===Se}be.AsyncMode=Jt,be.ConcurrentMode=Qt,be.ContextConsumer=ut,be.ContextProvider=St,be.Element=Lt,be.ForwardRef=Ue,be.Fragment=Ut,be.Lazy=Ot,be.Memo=rn,be.Portal=$t,be.Profiler=sn,be.StrictMode=lt,be.Suspense=Zt,be.isAsyncMode=Le,be.isConcurrentMode=Mt,be.isContextConsumer=Rt,be.isContextProvider=tt,be.isElement=We,be.isForwardRef=C,be.isFragment=U,be.isLazy=Q,be.isMemo=fe,be.isPortal=de,be.isProfiler=Ce,be.isStrictMode=Ye,be.isSuspense=Ke,be.isValidElementType=pt,be.typeOf=ot})()},"./node_modules/prop-types/node_modules/react-is/index.js":(je,be,K)=>{je.exports=K("./node_modules/prop-types/node_modules/react-is/cjs/react-is.development.js")},"./node_modules/qr.js/lib/8BitByte.js":(je,be,K)=>{var se=K("./node_modules/qr.js/lib/mode.js");function B(Fe){this.mode=se.MODE_8BIT_BYTE,this.data=Fe}B.prototype={getLength:function(Fe){return this.data.length},write:function(Fe){for(var Be=0;Be<this.data.length;Be++)Fe.put(this.data.charCodeAt(Be),8)}},je.exports=B},"./node_modules/qr.js/lib/BitBuffer.js":je=>{function be(){this.buffer=new Array,this.length=0}be.prototype={get:function(K){var se=Math.floor(K/8);return(this.buffer[se]>>>7-K%8&1)==1},put:function(K,se){for(var B=0;B<se;B++)this.putBit((K>>>se-B-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(K){var se=Math.floor(this.length/8);this.buffer.length<=se&&this.buffer.push(0),K&&(this.buffer[se]|=128>>>this.length%8),this.length++}},je.exports=be},"./node_modules/qr.js/lib/ErrorCorrectLevel.js":je=>{je.exports={L:1,M:0,Q:3,H:2}},"./node_modules/qr.js/lib/Polynomial.js":(je,be,K)=>{var se=K("./node_modules/qr.js/lib/math.js");function B(Fe,Be){if(Fe.length==null)throw new Error(Fe.length+"/"+Be);for(var ce=0;ce<Fe.length&&Fe[ce]==0;)ce++;this.num=new Array(Fe.length-ce+Be);for(var me=0;me<Fe.length-ce;me++)this.num[me]=Fe[me+ce]}B.prototype={get:function(Fe){return this.num[Fe]},getLength:function(){return this.num.length},multiply:function(Fe){for(var Be=new Array(this.getLength()+Fe.getLength()-1),ce=0;ce<this.getLength();ce++)for(var me=0;me<Fe.getLength();me++)Be[ce+me]^=se.gexp(se.glog(this.get(ce))+se.glog(Fe.get(me)));return new B(Be,0)},mod:function(Fe){if(this.getLength()-Fe.getLength()<0)return this;for(var Be=se.glog(this.get(0))-se.glog(Fe.get(0)),ce=new Array(this.getLength()),me=0;me<this.getLength();me++)ce[me]=this.get(me);for(var me=0;me<Fe.getLength();me++)ce[me]^=se.gexp(se.glog(Fe.get(me))+Be);return new B(ce,0).mod(Fe)}},je.exports=B},"./node_modules/qr.js/lib/QRCode.js":(je,be,K)=>{var se=K("./node_modules/qr.js/lib/8BitByte.js"),B=K("./node_modules/qr.js/lib/RSBlock.js"),Fe=K("./node_modules/qr.js/lib/BitBuffer.js"),Be=K("./node_modules/qr.js/lib/util.js"),ce=K("./node_modules/qr.js/lib/Polynomial.js");function me(ae,De){this.typeNumber=ae,this.errorCorrectLevel=De,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var we=me.prototype;we.addData=function(ae){var De=new se(ae);this.dataList.push(De),this.dataCache=null},we.isDark=function(ae,De){if(ae<0||this.moduleCount<=ae||De<0||this.moduleCount<=De)throw new Error(ae+","+De);return this.modules[ae][De]},we.getModuleCount=function(){return this.moduleCount},we.make=function(){if(this.typeNumber<1){var ae=1;for(ae=1;ae<40;ae++){for(var De=B.getRSBlocks(ae,this.errorCorrectLevel),Pe=new Fe,Se=0,ee=0;ee<De.length;ee++)Se+=De[ee].dataCount;for(var ee=0;ee<this.dataList.length;ee++){var Qe=this.dataList[ee];Pe.put(Qe.mode,4),Pe.put(Qe.getLength(),Be.getLengthInBits(Qe.mode,ae)),Qe.write(Pe)}if(Pe.getLengthInBits()<=Se*8)break}this.typeNumber=ae}this.makeImpl(!1,this.getBestMaskPattern())},we.makeImpl=function(ae,De){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var Pe=0;Pe<this.moduleCount;Pe++){this.modules[Pe]=new Array(this.moduleCount);for(var Se=0;Se<this.moduleCount;Se++)this.modules[Pe][Se]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(ae,De),this.typeNumber>=7&&this.setupTypeNumber(ae),this.dataCache==null&&(this.dataCache=me.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,De)},we.setupPositionProbePattern=function(ae,De){for(var Pe=-1;Pe<=7;Pe++)if(!(ae+Pe<=-1||this.moduleCount<=ae+Pe))for(var Se=-1;Se<=7;Se++)De+Se<=-1||this.moduleCount<=De+Se||(0<=Pe&&Pe<=6&&(Se==0||Se==6)||0<=Se&&Se<=6&&(Pe==0||Pe==6)||2<=Pe&&Pe<=4&&2<=Se&&Se<=4?this.modules[ae+Pe][De+Se]=!0:this.modules[ae+Pe][De+Se]=!1)},we.getBestMaskPattern=function(){for(var ae=0,De=0,Pe=0;Pe<8;Pe++){this.makeImpl(!0,Pe);var Se=Be.getLostPoint(this);(Pe==0||ae>Se)&&(ae=Se,De=Pe)}return De},we.createMovieClip=function(ae,De,Pe){var Se=ae.createEmptyMovieClip(De,Pe),ee=1;this.make();for(var Qe=0;Qe<this.modules.length;Qe++)for(var wt=Qe*ee,Dt=0;Dt<this.modules[Qe].length;Dt++){var at=Dt*ee,Ne=this.modules[Qe][Dt];Ne&&(Se.beginFill(0,100),Se.moveTo(at,wt),Se.lineTo(at+ee,wt),Se.lineTo(at+ee,wt+ee),Se.lineTo(at,wt+ee),Se.endFill())}return Se},we.setupTimingPattern=function(){for(var ae=8;ae<this.moduleCount-8;ae++)this.modules[ae][6]==null&&(this.modules[ae][6]=ae%2==0);for(var De=8;De<this.moduleCount-8;De++)this.modules[6][De]==null&&(this.modules[6][De]=De%2==0)},we.setupPositionAdjustPattern=function(){for(var ae=Be.getPatternPosition(this.typeNumber),De=0;De<ae.length;De++)for(var Pe=0;Pe<ae.length;Pe++){var Se=ae[De],ee=ae[Pe];if(this.modules[Se][ee]==null)for(var Qe=-2;Qe<=2;Qe++)for(var wt=-2;wt<=2;wt++)Qe==-2||Qe==2||wt==-2||wt==2||Qe==0&&wt==0?this.modules[Se+Qe][ee+wt]=!0:this.modules[Se+Qe][ee+wt]=!1}},we.setupTypeNumber=function(ae){for(var De=Be.getBCHTypeNumber(this.typeNumber),Pe=0;Pe<18;Pe++){var Se=!ae&&(De>>Pe&1)==1;this.modules[Math.floor(Pe/3)][Pe%3+this.moduleCount-8-3]=Se}for(var Pe=0;Pe<18;Pe++){var Se=!ae&&(De>>Pe&1)==1;this.modules[Pe%3+this.moduleCount-8-3][Math.floor(Pe/3)]=Se}},we.setupTypeInfo=function(ae,De){for(var Pe=this.errorCorrectLevel<<3|De,Se=Be.getBCHTypeInfo(Pe),ee=0;ee<15;ee++){var Qe=!ae&&(Se>>ee&1)==1;ee<6?this.modules[ee][8]=Qe:ee<8?this.modules[ee+1][8]=Qe:this.modules[this.moduleCount-15+ee][8]=Qe}for(var ee=0;ee<15;ee++){var Qe=!ae&&(Se>>ee&1)==1;ee<8?this.modules[8][this.moduleCount-ee-1]=Qe:ee<9?this.modules[8][15-ee-1+1]=Qe:this.modules[8][15-ee-1]=Qe}this.modules[this.moduleCount-8][8]=!ae},we.mapData=function(ae,De){for(var Pe=-1,Se=this.moduleCount-1,ee=7,Qe=0,wt=this.moduleCount-1;wt>0;wt-=2)for(wt==6&&wt--;;){for(var Dt=0;Dt<2;Dt++)if(this.modules[Se][wt-Dt]==null){var at=!1;Qe<ae.length&&(at=(ae[Qe]>>>ee&1)==1);var Ne=Be.getMask(De,Se,wt-Dt);Ne&&(at=!at),this.modules[Se][wt-Dt]=at,ee--,ee==-1&&(Qe++,ee=7)}if(Se+=Pe,Se<0||this.moduleCount<=Se){Se-=Pe,Pe=-Pe;break}}},me.PAD0=236,me.PAD1=17,me.createData=function(ae,De,Pe){for(var Se=B.getRSBlocks(ae,De),ee=new Fe,Qe=0;Qe<Pe.length;Qe++){var wt=Pe[Qe];ee.put(wt.mode,4),ee.put(wt.getLength(),Be.getLengthInBits(wt.mode,ae)),wt.write(ee)}for(var Dt=0,Qe=0;Qe<Se.length;Qe++)Dt+=Se[Qe].dataCount;if(ee.getLengthInBits()>Dt*8)throw new Error("code length overflow. ("+ee.getLengthInBits()+">"+Dt*8+")");for(ee.getLengthInBits()+4<=Dt*8&&ee.put(0,4);ee.getLengthInBits()%8!=0;)ee.putBit(!1);for(;!(ee.getLengthInBits()>=Dt*8||(ee.put(me.PAD0,8),ee.getLengthInBits()>=Dt*8));)ee.put(me.PAD1,8);return me.createBytes(ee,Se)},me.createBytes=function(ae,De){for(var Pe=0,Se=0,ee=0,Qe=new Array(De.length),wt=new Array(De.length),Dt=0;Dt<De.length;Dt++){var at=De[Dt].dataCount,Ne=De[Dt].totalCount-at;Se=Math.max(Se,at),ee=Math.max(ee,Ne),Qe[Dt]=new Array(at);for(var Je=0;Je<Qe[Dt].length;Je++)Qe[Dt][Je]=255&ae.buffer[Je+Pe];Pe+=at;var pt=Be.getErrorCorrectPolynomial(Ne),ot=new ce(Qe[Dt],pt.getLength()-1),Jt=ot.mod(pt);wt[Dt]=new Array(pt.getLength()-1);for(var Je=0;Je<wt[Dt].length;Je++){var Qt=Je+Jt.getLength()-wt[Dt].length;wt[Dt][Je]=Qt>=0?Jt.get(Qt):0}}for(var ut=0,Je=0;Je<De.length;Je++)ut+=De[Je].totalCount;for(var St=new Array(ut),Lt=0,Je=0;Je<Se;Je++)for(var Dt=0;Dt<De.length;Dt++)Je<Qe[Dt].length&&(St[Lt++]=Qe[Dt][Je]);for(var Je=0;Je<ee;Je++)for(var Dt=0;Dt<De.length;Dt++)Je<wt[Dt].length&&(St[Lt++]=wt[Dt][Je]);return St},je.exports=me},"./node_modules/qr.js/lib/RSBlock.js":(je,be,K)=>{var se=K("./node_modules/qr.js/lib/ErrorCorrectLevel.js");function B(Fe,Be){this.totalCount=Fe,this.dataCount=Be}B.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],B.getRSBlocks=function(Fe,Be){var ce=B.getRsBlockTable(Fe,Be);if(ce==null)throw new Error("bad rs block @ typeNumber:"+Fe+"/errorCorrectLevel:"+Be);for(var me=ce.length/3,we=new Array,ae=0;ae<me;ae++)for(var De=ce[ae*3+0],Pe=ce[ae*3+1],Se=ce[ae*3+2],ee=0;ee<De;ee++)we.push(new B(Pe,Se));return we},B.getRsBlockTable=function(Fe,Be){switch(Be){case se.L:return B.RS_BLOCK_TABLE[(Fe-1)*4+0];case se.M:return B.RS_BLOCK_TABLE[(Fe-1)*4+1];case se.Q:return B.RS_BLOCK_TABLE[(Fe-1)*4+2];case se.H:return B.RS_BLOCK_TABLE[(Fe-1)*4+3];default:return}},je.exports=B},"./node_modules/qr.js/lib/math.js":je=>{for(var be={glog:function(se){if(se<1)throw new Error("glog("+se+")");return be.LOG_TABLE[se]},gexp:function(se){for(;se<0;)se+=255;for(;se>=256;)se-=255;return be.EXP_TABLE[se]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},K=0;K<8;K++)be.EXP_TABLE[K]=1<<K;for(var K=8;K<256;K++)be.EXP_TABLE[K]=be.EXP_TABLE[K-4]^be.EXP_TABLE[K-5]^be.EXP_TABLE[K-6]^be.EXP_TABLE[K-8];for(var K=0;K<255;K++)be.LOG_TABLE[be.EXP_TABLE[K]]=K;je.exports=be},"./node_modules/qr.js/lib/mode.js":je=>{je.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},"./node_modules/qr.js/lib/util.js":(je,be,K)=>{var se=K("./node_modules/qr.js/lib/mode.js"),B=K("./node_modules/qr.js/lib/Polynomial.js"),Fe=K("./node_modules/qr.js/lib/math.js"),Be={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},ce={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(me){for(var we=me<<10;ce.getBCHDigit(we)-ce.getBCHDigit(ce.G15)>=0;)we^=ce.G15<<ce.getBCHDigit(we)-ce.getBCHDigit(ce.G15);return(me<<10|we)^ce.G15_MASK},getBCHTypeNumber:function(me){for(var we=me<<12;ce.getBCHDigit(we)-ce.getBCHDigit(ce.G18)>=0;)we^=ce.G18<<ce.getBCHDigit(we)-ce.getBCHDigit(ce.G18);return me<<12|we},getBCHDigit:function(me){for(var we=0;me!=0;)we++,me>>>=1;return we},getPatternPosition:function(me){return ce.PATTERN_POSITION_TABLE[me-1]},getMask:function(me,we,ae){switch(me){case Be.PATTERN000:return(we+ae)%2==0;case Be.PATTERN001:return we%2==0;case Be.PATTERN010:return ae%3==0;case Be.PATTERN011:return(we+ae)%3==0;case Be.PATTERN100:return(Math.floor(we/2)+Math.floor(ae/3))%2==0;case Be.PATTERN101:return we*ae%2+we*ae%3==0;case Be.PATTERN110:return(we*ae%2+we*ae%3)%2==0;case Be.PATTERN111:return(we*ae%3+(we+ae)%2)%2==0;default:throw new Error("bad maskPattern:"+me)}},getErrorCorrectPolynomial:function(me){for(var we=new B([1],0),ae=0;ae<me;ae++)we=we.multiply(new B([1,Fe.gexp(ae)],0));return we},getLengthInBits:function(me,we){if(1<=we&&we<10)switch(me){case se.MODE_NUMBER:return 10;case se.MODE_ALPHA_NUM:return 9;case se.MODE_8BIT_BYTE:return 8;case se.MODE_KANJI:return 8;default:throw new Error("mode:"+me)}else if(we<27)switch(me){case se.MODE_NUMBER:return 12;case se.MODE_ALPHA_NUM:return 11;case se.MODE_8BIT_BYTE:return 16;case se.MODE_KANJI:return 10;default:throw new Error("mode:"+me)}else if(we<41)switch(me){case se.MODE_NUMBER:return 14;case se.MODE_ALPHA_NUM:return 13;case se.MODE_8BIT_BYTE:return 16;case se.MODE_KANJI:return 12;default:throw new Error("mode:"+me)}else throw new Error("type:"+we)},getLostPoint:function(me){for(var we=me.getModuleCount(),ae=0,De=0;De<we;De++)for(var Pe=0;Pe<we;Pe++){for(var Se=0,ee=me.isDark(De,Pe),Qe=-1;Qe<=1;Qe++)if(!(De+Qe<0||we<=De+Qe))for(var wt=-1;wt<=1;wt++)Pe+wt<0||we<=Pe+wt||Qe==0&&wt==0||ee==me.isDark(De+Qe,Pe+wt)&&Se++;Se>5&&(ae+=3+Se-5)}for(var De=0;De<we-1;De++)for(var Pe=0;Pe<we-1;Pe++){var Dt=0;me.isDark(De,Pe)&&Dt++,me.isDark(De+1,Pe)&&Dt++,me.isDark(De,Pe+1)&&Dt++,me.isDark(De+1,Pe+1)&&Dt++,(Dt==0||Dt==4)&&(ae+=3)}for(var De=0;De<we;De++)for(var Pe=0;Pe<we-6;Pe++)me.isDark(De,Pe)&&!me.isDark(De,Pe+1)&&me.isDark(De,Pe+2)&&me.isDark(De,Pe+3)&&me.isDark(De,Pe+4)&&!me.isDark(De,Pe+5)&&me.isDark(De,Pe+6)&&(ae+=40);for(var Pe=0;Pe<we;Pe++)for(var De=0;De<we-6;De++)me.isDark(De,Pe)&&!me.isDark(De+1,Pe)&&me.isDark(De+2,Pe)&&me.isDark(De+3,Pe)&&me.isDark(De+4,Pe)&&!me.isDark(De+5,Pe)&&me.isDark(De+6,Pe)&&(ae+=40);for(var at=0,Pe=0;Pe<we;Pe++)for(var De=0;De<we;De++)me.isDark(De,Pe)&&at++;var Ne=Math.abs(100*at/we/we-50)/5;return ae+=Ne*10,ae}};je.exports=ce},"./node_modules/qs/lib/formats.js":je=>{var be=String.prototype.replace,K=/%20/g,se={RFC1738:"RFC1738",RFC3986:"RFC3986"};je.exports={default:se.RFC3986,formatters:{RFC1738:function(B){return be.call(B,K,"+")},RFC3986:function(B){return String(B)}},RFC1738:se.RFC1738,RFC3986:se.RFC3986}},"./node_modules/qs/lib/index.js":(je,be,K)=>{var se=K("./node_modules/qs/lib/stringify.js"),B=K("./node_modules/qs/lib/parse.js"),Fe=K("./node_modules/qs/lib/formats.js");je.exports={formats:Fe,parse:B,stringify:se}},"./node_modules/qs/lib/parse.js":(je,be,K)=>{var se=K("./node_modules/qs/lib/utils.js"),B=Object.prototype.hasOwnProperty,Fe=Array.isArray,Be={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:se.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},ce=function(Qe){return Qe.replace(/&#(\d+);/g,function(wt,Dt){return String.fromCharCode(parseInt(Dt,10))})},me=function(Qe,wt){return Qe&&typeof Qe=="string"&&wt.comma&&Qe.indexOf(",")>-1?Qe.split(","):Qe},we="utf8=%26%2310003%3B",ae="utf8=%E2%9C%93",De=function(wt,Dt){var at={},Ne=Dt.ignoreQueryPrefix?wt.replace(/^\?/,""):wt,Je=Dt.parameterLimit===1/0?void 0:Dt.parameterLimit,pt=Ne.split(Dt.delimiter,Je),ot=-1,Jt,Qt=Dt.charset;if(Dt.charsetSentinel)for(Jt=0;Jt<pt.length;++Jt)pt[Jt].indexOf("utf8=")===0&&(pt[Jt]===ae?Qt="utf-8":pt[Jt]===we&&(Qt="iso-8859-1"),ot=Jt,Jt=pt.length);for(Jt=0;Jt<pt.length;++Jt)if(Jt!==ot){var ut=pt[Jt],St=ut.indexOf("]="),Lt=St===-1?ut.indexOf("="):St+1,Ue,Ut;Lt===-1?(Ue=Dt.decoder(ut,Be.decoder,Qt,"key"),Ut=Dt.strictNullHandling?null:""):(Ue=Dt.decoder(ut.slice(0,Lt),Be.decoder,Qt,"key"),Ut=se.maybeMap(me(ut.slice(Lt+1),Dt),function(Ot){return Dt.decoder(Ot,Be.decoder,Qt,"value")})),Ut&&Dt.interpretNumericEntities&&Qt==="iso-8859-1"&&(Ut=ce(Ut)),ut.indexOf("[]=")>-1&&(Ut=Fe(Ut)?[Ut]:Ut),B.call(at,Ue)?at[Ue]=se.combine(at[Ue],Ut):at[Ue]=Ut}return at},Pe=function(Qe,wt,Dt,at){for(var Ne=at?wt:me(wt,Dt),Je=Qe.length-1;Je>=0;--Je){var pt,ot=Qe[Je];if(ot==="[]"&&Dt.parseArrays)pt=[].concat(Ne);else{pt=Dt.plainObjects?Object.create(null):{};var Jt=ot.charAt(0)==="["&&ot.charAt(ot.length-1)==="]"?ot.slice(1,-1):ot,Qt=parseInt(Jt,10);!Dt.parseArrays&&Jt===""?pt={0:Ne}:!isNaN(Qt)&&ot!==Jt&&String(Qt)===Jt&&Qt>=0&&Dt.parseArrays&&Qt<=Dt.arrayLimit?(pt=[],pt[Qt]=Ne):Jt!=="__proto__"&&(pt[Jt]=Ne)}Ne=pt}return Ne},Se=function(wt,Dt,at,Ne){if(wt){var Je=at.allowDots?wt.replace(/\.([^.[]+)/g,"[$1]"):wt,pt=/(\[[^[\]]*])/,ot=/(\[[^[\]]*])/g,Jt=at.depth>0&&pt.exec(Je),Qt=Jt?Je.slice(0,Jt.index):Je,ut=[];if(Qt){if(!at.plainObjects&&B.call(Object.prototype,Qt)&&!at.allowPrototypes)return;ut.push(Qt)}for(var St=0;at.depth>0&&(Jt=ot.exec(Je))!==null&&St<at.depth;){if(St+=1,!at.plainObjects&&B.call(Object.prototype,Jt[1].slice(1,-1))&&!at.allowPrototypes)return;ut.push(Jt[1])}return Jt&&ut.push("["+Je.slice(Jt.index)+"]"),Pe(ut,Dt,at,Ne)}},ee=function(wt){if(!wt)return Be;if(wt.decoder!==null&&wt.decoder!==void 0&&typeof wt.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof wt.charset<"u"&&wt.charset!=="utf-8"&&wt.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Dt=typeof wt.charset>"u"?Be.charset:wt.charset;return{allowDots:typeof wt.allowDots>"u"?Be.allowDots:!!wt.allowDots,allowPrototypes:typeof wt.allowPrototypes=="boolean"?wt.allowPrototypes:Be.allowPrototypes,allowSparse:typeof wt.allowSparse=="boolean"?wt.allowSparse:Be.allowSparse,arrayLimit:typeof wt.arrayLimit=="number"?wt.arrayLimit:Be.arrayLimit,charset:Dt,charsetSentinel:typeof wt.charsetSentinel=="boolean"?wt.charsetSentinel:Be.charsetSentinel,comma:typeof wt.comma=="boolean"?wt.comma:Be.comma,decoder:typeof wt.decoder=="function"?wt.decoder:Be.decoder,delimiter:typeof wt.delimiter=="string"||se.isRegExp(wt.delimiter)?wt.delimiter:Be.delimiter,depth:typeof wt.depth=="number"||wt.depth===!1?+wt.depth:Be.depth,ignoreQueryPrefix:wt.ignoreQueryPrefix===!0,interpretNumericEntities:typeof wt.interpretNumericEntities=="boolean"?wt.interpretNumericEntities:Be.interpretNumericEntities,parameterLimit:typeof wt.parameterLimit=="number"?wt.parameterLimit:Be.parameterLimit,parseArrays:wt.parseArrays!==!1,plainObjects:typeof wt.plainObjects=="boolean"?wt.plainObjects:Be.plainObjects,strictNullHandling:typeof wt.strictNullHandling=="boolean"?wt.strictNullHandling:Be.strictNullHandling}};je.exports=function(Qe,wt){var Dt=ee(wt);if(Qe===""||Qe===null||typeof Qe>"u")return Dt.plainObjects?Object.create(null):{};for(var at=typeof Qe=="string"?De(Qe,Dt):Qe,Ne=Dt.plainObjects?Object.create(null):{},Je=Object.keys(at),pt=0;pt<Je.length;++pt){var ot=Je[pt],Jt=Se(ot,at[ot],Dt,typeof Qe=="string");Ne=se.merge(Ne,Jt,Dt)}return Dt.allowSparse===!0?Ne:se.compact(Ne)}},"./node_modules/qs/lib/stringify.js":(je,be,K)=>{var se=K("./node_modules/side-channel/index.js"),B=K("./node_modules/qs/lib/utils.js"),Fe=K("./node_modules/qs/lib/formats.js"),Be=Object.prototype.hasOwnProperty,ce={brackets:function(Ne){return Ne+"[]"},comma:"comma",indices:function(Ne,Je){return Ne+"["+Je+"]"},repeat:function(Ne){return Ne}},me=Array.isArray,we=Array.prototype.push,ae=function(at,Ne){we.apply(at,me(Ne)?Ne:[Ne])},De=Date.prototype.toISOString,Pe=Fe.default,Se={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:B.encode,encodeValuesOnly:!1,format:Pe,formatter:Fe.formatters[Pe],indices:!1,serializeDate:function(Ne){return De.call(Ne)},skipNulls:!1,strictNullHandling:!1},ee=function(Ne){return typeof Ne=="string"||typeof Ne=="number"||typeof Ne=="boolean"||typeof Ne=="symbol"||typeof Ne=="bigint"},Qe={},wt=function at(Ne,Je,pt,ot,Jt,Qt,ut,St,Lt,Ue,Ut,Ot,rn,$t,sn,lt){for(var Zt=Ne,zt=lt,Le=0,Mt=!1;(zt=zt.get(Qe))!==void 0&&!Mt;){var Rt=zt.get(Ne);if(Le+=1,typeof Rt<"u"){if(Rt===Le)throw new RangeError("Cyclic object value");Mt=!0}typeof zt.get(Qe)>"u"&&(Le=0)}if(typeof St=="function"?Zt=St(Je,Zt):Zt instanceof Date?Zt=Ut(Zt):pt==="comma"&&me(Zt)&&(Zt=B.maybeMap(Zt,function(ct){return ct instanceof Date?Ut(ct):ct})),Zt===null){if(Jt)return ut&&!$t?ut(Je,Se.encoder,sn,"key",Ot):Je;Zt=""}if(ee(Zt)||B.isBuffer(Zt)){if(ut){var tt=$t?Je:ut(Je,Se.encoder,sn,"key",Ot);return[rn(tt)+"="+rn(ut(Zt,Se.encoder,sn,"value",Ot))]}return[rn(Je)+"="+rn(String(Zt))]}var We=[];if(typeof Zt>"u")return We;var C;if(pt==="comma"&&me(Zt))$t&&ut&&(Zt=B.maybeMap(Zt,ut)),C=[{value:Zt.length>0?Zt.join(",")||null:void 0}];else if(me(St))C=St;else{var U=Object.keys(Zt);C=Lt?U.sort(Lt):U}for(var Q=ot&&me(Zt)&&Zt.length===1?Je+"[]":Je,fe=0;fe<C.length;++fe){var de=C[fe],Ce=typeof de=="object"&&typeof de.value<"u"?de.value:Zt[de];if(!(Qt&&Ce===null)){var Ye=me(Zt)?typeof pt=="function"?pt(Q,de):Q:Q+(Ue?"."+de:"["+de+"]");lt.set(Ne,Le);var Ke=se();Ke.set(Qe,lt),ae(We,at(Ce,Ye,pt,ot,Jt,Qt,pt==="comma"&&$t&&me(Zt)?null:ut,St,Lt,Ue,Ut,Ot,rn,$t,sn,Ke))}}return We},Dt=function(Ne){if(!Ne)return Se;if(Ne.encoder!==null&&typeof Ne.encoder<"u"&&typeof Ne.encoder!="function")throw new TypeError("Encoder has to be a function.");var Je=Ne.charset||Se.charset;if(typeof Ne.charset<"u"&&Ne.charset!=="utf-8"&&Ne.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var pt=Fe.default;if(typeof Ne.format<"u"){if(!Be.call(Fe.formatters,Ne.format))throw new TypeError("Unknown format option provided.");pt=Ne.format}var ot=Fe.formatters[pt],Jt=Se.filter;return(typeof Ne.filter=="function"||me(Ne.filter))&&(Jt=Ne.filter),{addQueryPrefix:typeof Ne.addQueryPrefix=="boolean"?Ne.addQueryPrefix:Se.addQueryPrefix,allowDots:typeof Ne.allowDots>"u"?Se.allowDots:!!Ne.allowDots,charset:Je,charsetSentinel:typeof Ne.charsetSentinel=="boolean"?Ne.charsetSentinel:Se.charsetSentinel,delimiter:typeof Ne.delimiter>"u"?Se.delimiter:Ne.delimiter,encode:typeof Ne.encode=="boolean"?Ne.encode:Se.encode,encoder:typeof Ne.encoder=="function"?Ne.encoder:Se.encoder,encodeValuesOnly:typeof Ne.encodeValuesOnly=="boolean"?Ne.encodeValuesOnly:Se.encodeValuesOnly,filter:Jt,format:pt,formatter:ot,serializeDate:typeof Ne.serializeDate=="function"?Ne.serializeDate:Se.serializeDate,skipNulls:typeof Ne.skipNulls=="boolean"?Ne.skipNulls:Se.skipNulls,sort:typeof Ne.sort=="function"?Ne.sort:null,strictNullHandling:typeof Ne.strictNullHandling=="boolean"?Ne.strictNullHandling:Se.strictNullHandling}};je.exports=function(at,Ne){var Je=at,pt=Dt(Ne),ot,Jt;typeof pt.filter=="function"?(Jt=pt.filter,Je=Jt("",Je)):me(pt.filter)&&(Jt=pt.filter,ot=Jt);var Qt=[];if(typeof Je!="object"||Je===null)return"";var ut;Ne&&Ne.arrayFormat in ce?ut=Ne.arrayFormat:Ne&&"indices"in Ne?ut=Ne.indices?"indices":"repeat":ut="indices";var St=ce[ut];if(Ne&&"commaRoundTrip"in Ne&&typeof Ne.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var Lt=St==="comma"&&Ne&&Ne.commaRoundTrip;ot||(ot=Object.keys(Je)),pt.sort&&ot.sort(pt.sort);for(var Ue=se(),Ut=0;Ut<ot.length;++Ut){var Ot=ot[Ut];pt.skipNulls&&Je[Ot]===null||ae(Qt,wt(Je[Ot],Ot,St,Lt,pt.strictNullHandling,pt.skipNulls,pt.encode?pt.encoder:null,pt.filter,pt.sort,pt.allowDots,pt.serializeDate,pt.format,pt.formatter,pt.encodeValuesOnly,pt.charset,Ue))}var rn=Qt.join(pt.delimiter),$t=pt.addQueryPrefix===!0?"?":"";return pt.charsetSentinel&&(pt.charset==="iso-8859-1"?$t+="utf8=%26%2310003%3B&":$t+="utf8=%E2%9C%93&"),rn.length>0?$t+rn:""}},"./node_modules/qs/lib/utils.js":(je,be,K)=>{var se=K("./node_modules/qs/lib/formats.js"),B=Object.prototype.hasOwnProperty,Fe=Array.isArray,Be=function(){for(var at=[],Ne=0;Ne<256;++Ne)at.push("%"+((Ne<16?"0":"")+Ne.toString(16)).toUpperCase());return at}(),ce=function(Ne){for(;Ne.length>1;){var Je=Ne.pop(),pt=Je.obj[Je.prop];if(Fe(pt)){for(var ot=[],Jt=0;Jt<pt.length;++Jt)typeof pt[Jt]<"u"&&ot.push(pt[Jt]);Je.obj[Je.prop]=ot}}},me=function(Ne,Je){for(var pt=Je&&Je.plainObjects?Object.create(null):{},ot=0;ot<Ne.length;++ot)typeof Ne[ot]<"u"&&(pt[ot]=Ne[ot]);return pt},we=function at(Ne,Je,pt){if(!Je)return Ne;if(typeof Je!="object"){if(Fe(Ne))Ne.push(Je);else if(Ne&&typeof Ne=="object")(pt&&(pt.plainObjects||pt.allowPrototypes)||!B.call(Object.prototype,Je))&&(Ne[Je]=!0);else return[Ne,Je];return Ne}if(!Ne||typeof Ne!="object")return[Ne].concat(Je);var ot=Ne;return Fe(Ne)&&!Fe(Je)&&(ot=me(Ne,pt)),Fe(Ne)&&Fe(Je)?(Je.forEach(function(Jt,Qt){if(B.call(Ne,Qt)){var ut=Ne[Qt];ut&&typeof ut=="object"&&Jt&&typeof Jt=="object"?Ne[Qt]=at(ut,Jt,pt):Ne.push(Jt)}else Ne[Qt]=Jt}),Ne):Object.keys(Je).reduce(function(Jt,Qt){var ut=Je[Qt];return B.call(Jt,Qt)?Jt[Qt]=at(Jt[Qt],ut,pt):Jt[Qt]=ut,Jt},ot)},ae=function(Ne,Je){return Object.keys(Je).reduce(function(pt,ot){return pt[ot]=Je[ot],pt},Ne)},De=function(at,Ne,Je){var pt=at.replace(/\+/g," ");if(Je==="iso-8859-1")return pt.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(pt)}catch{return pt}},Pe=function(Ne,Je,pt,ot,Jt){if(Ne.length===0)return Ne;var Qt=Ne;if(typeof Ne=="symbol"?Qt=Symbol.prototype.toString.call(Ne):typeof Ne!="string"&&(Qt=String(Ne)),pt==="iso-8859-1")return escape(Qt).replace(/%u[0-9a-f]{4}/gi,function(Ue){return"%26%23"+parseInt(Ue.slice(2),16)+"%3B"});for(var ut="",St=0;St<Qt.length;++St){var Lt=Qt.charCodeAt(St);if(Lt===45||Lt===46||Lt===95||Lt===126||Lt>=48&&Lt<=57||Lt>=65&&Lt<=90||Lt>=97&&Lt<=122||Jt===se.RFC1738&&(Lt===40||Lt===41)){ut+=Qt.charAt(St);continue}if(Lt<128){ut=ut+Be[Lt];continue}if(Lt<2048){ut=ut+(Be[192|Lt>>6]+Be[128|Lt&63]);continue}if(Lt<55296||Lt>=57344){ut=ut+(Be[224|Lt>>12]+Be[128|Lt>>6&63]+Be[128|Lt&63]);continue}St+=1,Lt=65536+((Lt&1023)<<10|Qt.charCodeAt(St)&1023),ut+=Be[240|Lt>>18]+Be[128|Lt>>12&63]+Be[128|Lt>>6&63]+Be[128|Lt&63]}return ut},Se=function(Ne){for(var Je=[{obj:{o:Ne},prop:"o"}],pt=[],ot=0;ot<Je.length;++ot)for(var Jt=Je[ot],Qt=Jt.obj[Jt.prop],ut=Object.keys(Qt),St=0;St<ut.length;++St){var Lt=ut[St],Ue=Qt[Lt];typeof Ue=="object"&&Ue!==null&&pt.indexOf(Ue)===-1&&(Je.push({obj:Qt,prop:Lt}),pt.push(Ue))}return ce(Je),Ne},ee=function(Ne){return Object.prototype.toString.call(Ne)==="[object RegExp]"},Qe=function(Ne){return!Ne||typeof Ne!="object"?!1:!!(Ne.constructor&&Ne.constructor.isBuffer&&Ne.constructor.isBuffer(Ne))},wt=function(Ne,Je){return[].concat(Ne,Je)},Dt=function(Ne,Je){if(Fe(Ne)){for(var pt=[],ot=0;ot<Ne.length;ot+=1)pt.push(Je(Ne[ot]));return pt}return Je(Ne)};je.exports={arrayToObject:me,assign:ae,combine:wt,compact:Se,decode:De,encode:Pe,isBuffer:Qe,isRegExp:ee,maybeMap:Dt,merge:we}},"./node_modules/react-qr-code/lib/QRCodeSvg/index.js":(je,be,K)=>{Object.defineProperty(be,"__esModule",{value:!0});var se=Object.assign||function(Pe){for(var Se=1;Se<arguments.length;Se++){var ee=arguments[Se];for(var Qe in ee)Object.prototype.hasOwnProperty.call(ee,Qe)&&(Pe[Qe]=ee[Qe])}return Pe},B=K("./node_modules/prop-types/index.js"),Fe=me(B),Be=K("react"),ce=me(Be);function me(Pe){return Pe&&Pe.__esModule?Pe:{default:Pe}}function we(Pe,Se){var ee={};for(var Qe in Pe)Se.indexOf(Qe)>=0||Object.prototype.hasOwnProperty.call(Pe,Qe)&&(ee[Qe]=Pe[Qe]);return ee}var ae={bgColor:Fe.default.oneOfType([Fe.default.object,Fe.default.string]).isRequired,bgD:Fe.default.string.isRequired,fgColor:Fe.default.oneOfType([Fe.default.object,Fe.default.string]).isRequired,fgD:Fe.default.string.isRequired,size:Fe.default.number.isRequired,title:Fe.default.string,viewBoxSize:Fe.default.number.isRequired,xmlns:Fe.default.string},De=(0,Be.forwardRef)(function(Pe,Se){var ee=Pe.bgColor,Qe=Pe.bgD,wt=Pe.fgD,Dt=Pe.fgColor,at=Pe.size,Ne=Pe.title,Je=Pe.viewBoxSize,pt=Pe.xmlns,ot=pt===void 0?"http://www.w3.org/2000/svg":pt,Jt=we(Pe,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return ce.default.createElement("svg",se({},Jt,{height:at,ref:Se,viewBox:"0 0 "+Je+" "+Je,width:at,xmlns:ot}),Ne?ce.default.createElement("title",null,Ne):null,ce.default.createElement("path",{d:Qe,fill:ee}),ce.default.createElement("path",{d:wt,fill:Dt}))});De.displayName="QRCodeSvg",De.propTypes=ae,be.default=De},"./node_modules/react-qr-code/lib/index.js":(je,be,K)=>{Object.defineProperty(be,"__esModule",{value:!0}),be.QRCode=void 0;var se=Object.assign||function(at){for(var Ne=1;Ne<arguments.length;Ne++){var Je=arguments[Ne];for(var pt in Je)Object.prototype.hasOwnProperty.call(Je,pt)&&(at[pt]=Je[pt])}return at},B=K("./node_modules/prop-types/index.js"),Fe=ee(B),Be=K("./node_modules/qr.js/lib/ErrorCorrectLevel.js"),ce=ee(Be),me=K("./node_modules/qr.js/lib/QRCode.js"),we=ee(me),ae=K("react"),De=ee(ae),Pe=K("./node_modules/react-qr-code/lib/QRCodeSvg/index.js"),Se=ee(Pe);function ee(at){return at&&at.__esModule?at:{default:at}}function Qe(at,Ne){var Je={};for(var pt in at)Ne.indexOf(pt)>=0||Object.prototype.hasOwnProperty.call(at,pt)&&(Je[pt]=at[pt]);return Je}var wt={bgColor:Fe.default.oneOfType([Fe.default.object,Fe.default.string]),fgColor:Fe.default.oneOfType([Fe.default.object,Fe.default.string]),level:Fe.default.string,size:Fe.default.number,value:Fe.default.string.isRequired},Dt=(0,ae.forwardRef)(function(at,Ne){var Je=at.bgColor,pt=Je===void 0?"#FFFFFF":Je,ot=at.fgColor,Jt=ot===void 0?"#000000":ot,Qt=at.level,ut=Qt===void 0?"L":Qt,St=at.size,Lt=St===void 0?256:St,Ue=at.value,Ut=Qe(at,["bgColor","fgColor","level","size","value"]),Ot=new we.default(-1,ce.default[ut]);Ot.addData(Ue),Ot.make();var rn=Ot.modules;return De.default.createElement(Se.default,se({},Ut,{bgColor:pt,bgD:rn.map(function($t,sn){return $t.map(function(lt,Zt){return lt?"":"M "+Zt+" "+sn+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:Jt,fgD:rn.map(function($t,sn){return $t.map(function(lt,Zt){return lt?"M "+Zt+" "+sn+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:Ne,size:Lt,viewBoxSize:rn.length}))});be.QRCode=Dt,Dt.displayName="QRCode",Dt.propTypes=wt,be.default=Dt},"./node_modules/side-channel/index.js":(je,be,K)=>{var se=K("./node_modules/get-intrinsic/index.js"),B=K("./node_modules/call-bind/callBound.js"),Fe=K("./node_modules/object-inspect/index.js"),Be=se("%TypeError%"),ce=se("%WeakMap%",!0),me=se("%Map%",!0),we=B("WeakMap.prototype.get",!0),ae=B("WeakMap.prototype.set",!0),De=B("WeakMap.prototype.has",!0),Pe=B("Map.prototype.get",!0),Se=B("Map.prototype.set",!0),ee=B("Map.prototype.has",!0),Qe=function(Ne,Je){for(var pt=Ne,ot;(ot=pt.next)!==null;pt=ot)if(ot.key===Je)return pt.next=ot.next,ot.next=Ne.next,Ne.next=ot,ot},wt=function(Ne,Je){var pt=Qe(Ne,Je);return pt&&pt.value},Dt=function(Ne,Je,pt){var ot=Qe(Ne,Je);ot?ot.value=pt:Ne.next={key:Je,next:Ne.next,value:pt}},at=function(Ne,Je){return!!Qe(Ne,Je)};je.exports=function(){var Je,pt,ot,Jt={assert:function(Qt){if(!Jt.has(Qt))throw new Be("Side channel does not contain "+Fe(Qt))},get:function(Qt){if(ce&&Qt&&(typeof Qt=="object"||typeof Qt=="function")){if(Je)return we(Je,Qt)}else if(me){if(pt)return Pe(pt,Qt)}else if(ot)return wt(ot,Qt)},has:function(Qt){if(ce&&Qt&&(typeof Qt=="object"||typeof Qt=="function")){if(Je)return De(Je,Qt)}else if(me){if(pt)return ee(pt,Qt)}else if(ot)return at(ot,Qt);return!1},set:function(Qt,ut){ce&&Qt&&(typeof Qt=="object"||typeof Qt=="function")?(Je||(Je=new ce),ae(Je,Qt,ut)):me?(pt||(pt=new me),Se(pt,Qt,ut)):(ot||(ot={key:{},next:null}),Dt(ot,Qt,ut))}};return Jt}},"../../../node_modules/axios/index.js":(je,be,K)=>{je.exports=K("../../../node_modules/axios/lib/axios.js")},"../../../node_modules/axios/lib/adapters/xhr.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/utils.js"),B=K("../../../node_modules/axios/lib/core/settle.js"),Fe=K("../../../node_modules/axios/lib/helpers/buildURL.js"),Be=K("../../../node_modules/axios/lib/helpers/parseHeaders.js"),ce=K("../../../node_modules/axios/lib/helpers/isURLSameOrigin.js"),me=K("../../../node_modules/axios/lib/core/createError.js");je.exports=function(ae){return new Promise(function(Pe,Se){var ee=ae.data,Qe=ae.headers;se.isFormData(ee)&&delete Qe["Content-Type"];var wt=new XMLHttpRequest;if(ae.auth){var Dt=ae.auth.username||"",at=ae.auth.password||"";Qe.Authorization="Basic "+btoa(Dt+":"+at)}if(wt.open(ae.method.toUpperCase(),Fe(ae.url,ae.params,ae.paramsSerializer),!0),wt.timeout=ae.timeout,wt.onreadystatechange=function(){if(!(!wt||wt.readyState!==4)&&!(wt.status===0&&!(wt.responseURL&&wt.responseURL.indexOf("file:")===0))){var ot="getAllResponseHeaders"in wt?Be(wt.getAllResponseHeaders()):null,Jt=!ae.responseType||ae.responseType==="text"?wt.responseText:wt.response,Qt={data:Jt,status:wt.status,statusText:wt.statusText,headers:ot,config:ae,request:wt};B(Pe,Se,Qt),wt=null}},wt.onerror=function(){Se(me("Network Error",ae,null,wt)),wt=null},wt.ontimeout=function(){Se(me("timeout of "+ae.timeout+"ms exceeded",ae,"ECONNABORTED",wt)),wt=null},se.isStandardBrowserEnv()){var Ne=K("../../../node_modules/axios/lib/helpers/cookies.js"),Je=(ae.withCredentials||ce(ae.url))&&ae.xsrfCookieName?Ne.read(ae.xsrfCookieName):void 0;Je&&(Qe[ae.xsrfHeaderName]=Je)}if("setRequestHeader"in wt&&se.forEach(Qe,function(ot,Jt){typeof ee>"u"&&Jt.toLowerCase()==="content-type"?delete Qe[Jt]:wt.setRequestHeader(Jt,ot)}),ae.withCredentials&&(wt.withCredentials=!0),ae.responseType)try{wt.responseType=ae.responseType}catch(pt){if(ae.responseType!=="json")throw pt}typeof ae.onDownloadProgress=="function"&&wt.addEventListener("progress",ae.onDownloadProgress),typeof ae.onUploadProgress=="function"&&wt.upload&&wt.upload.addEventListener("progress",ae.onUploadProgress),ae.cancelToken&&ae.cancelToken.promise.then(function(ot){wt&&(wt.abort(),Se(ot),wt=null)}),ee===void 0&&(ee=null),wt.send(ee)})}},"../../../node_modules/axios/lib/axios.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/utils.js"),B=K("../../../node_modules/axios/lib/helpers/bind.js"),Fe=K("../../../node_modules/axios/lib/core/Axios.js"),Be=K("../../../node_modules/axios/lib/defaults.js");function ce(we){var ae=new Fe(we),De=B(Fe.prototype.request,ae);return se.extend(De,Fe.prototype,ae),se.extend(De,ae),De}var me=ce(Be);me.Axios=Fe,me.create=function(ae){return ce(se.merge(Be,ae))},me.Cancel=K("../../../node_modules/axios/lib/cancel/Cancel.js"),me.CancelToken=K("../../../node_modules/axios/lib/cancel/CancelToken.js"),me.isCancel=K("../../../node_modules/axios/lib/cancel/isCancel.js"),me.all=function(ae){return Promise.all(ae)},me.spread=K("../../../node_modules/axios/lib/helpers/spread.js"),je.exports=me,je.exports.default=me},"../../../node_modules/axios/lib/cancel/Cancel.js":je=>{function be(K){this.message=K}be.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},be.prototype.__CANCEL__=!0,je.exports=be},"../../../node_modules/axios/lib/cancel/CancelToken.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/cancel/Cancel.js");function B(Fe){if(typeof Fe!="function")throw new TypeError("executor must be a function.");var Be;this.promise=new Promise(function(we){Be=we});var ce=this;Fe(function(we){ce.reason||(ce.reason=new se(we),Be(ce.reason))})}B.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},B.source=function(){var Be,ce=new B(function(we){Be=we});return{token:ce,cancel:Be}},je.exports=B},"../../../node_modules/axios/lib/cancel/isCancel.js":je=>{je.exports=function(K){return!!(K&&K.__CANCEL__)}},"../../../node_modules/axios/lib/core/Axios.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/defaults.js"),B=K("../../../node_modules/axios/lib/utils.js"),Fe=K("../../../node_modules/axios/lib/core/InterceptorManager.js"),Be=K("../../../node_modules/axios/lib/core/dispatchRequest.js");function ce(me){this.defaults=me,this.interceptors={request:new Fe,response:new Fe}}ce.prototype.request=function(we){typeof we=="string"&&(we=B.merge({url:arguments[0]},arguments[1])),we=B.merge(se,{method:"get"},this.defaults,we),we.method=we.method.toLowerCase();var ae=[Be,void 0],De=Promise.resolve(we);for(this.interceptors.request.forEach(function(Se){ae.unshift(Se.fulfilled,Se.rejected)}),this.interceptors.response.forEach(function(Se){ae.push(Se.fulfilled,Se.rejected)});ae.length;)De=De.then(ae.shift(),ae.shift());return De},B.forEach(["delete","get","head","options"],function(we){ce.prototype[we]=function(ae,De){return this.request(B.merge(De||{},{method:we,url:ae}))}}),B.forEach(["post","put","patch"],function(we){ce.prototype[we]=function(ae,De,Pe){return this.request(B.merge(Pe||{},{method:we,url:ae,data:De}))}}),je.exports=ce},"../../../node_modules/axios/lib/core/InterceptorManager.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/utils.js");function B(){this.handlers=[]}B.prototype.use=function(Be,ce){return this.handlers.push({fulfilled:Be,rejected:ce}),this.handlers.length-1},B.prototype.eject=function(Be){this.handlers[Be]&&(this.handlers[Be]=null)},B.prototype.forEach=function(Be){se.forEach(this.handlers,function(me){me!==null&&Be(me)})},je.exports=B},"../../../node_modules/axios/lib/core/createError.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/core/enhanceError.js");je.exports=function(Fe,Be,ce,me,we){var ae=new Error(Fe);return se(ae,Be,ce,me,we)}},"../../../node_modules/axios/lib/core/dispatchRequest.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/utils.js"),B=K("../../../node_modules/axios/lib/core/transformData.js"),Fe=K("../../../node_modules/axios/lib/cancel/isCancel.js"),Be=K("../../../node_modules/axios/lib/defaults.js"),ce=K("../../../node_modules/axios/lib/helpers/isAbsoluteURL.js"),me=K("../../../node_modules/axios/lib/helpers/combineURLs.js");function we(ae){ae.cancelToken&&ae.cancelToken.throwIfRequested()}je.exports=function(De){we(De),De.baseURL&&!ce(De.url)&&(De.url=me(De.baseURL,De.url)),De.headers=De.headers||{},De.data=B(De.data,De.headers,De.transformRequest),De.headers=se.merge(De.headers.common||{},De.headers[De.method]||{},De.headers||{}),se.forEach(["delete","get","head","post","put","patch","common"],function(ee){delete De.headers[ee]});var Pe=De.adapter||Be.adapter;return Pe(De).then(function(ee){return we(De),ee.data=B(ee.data,ee.headers,De.transformResponse),ee},function(ee){return Fe(ee)||(we(De),ee&&ee.response&&(ee.response.data=B(ee.response.data,ee.response.headers,De.transformResponse))),Promise.reject(ee)})}},"../../../node_modules/axios/lib/core/enhanceError.js":je=>{je.exports=function(K,se,B,Fe,Be){return K.config=se,B&&(K.code=B),K.request=Fe,K.response=Be,K}},"../../../node_modules/axios/lib/core/settle.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/core/createError.js");je.exports=function(Fe,Be,ce){var me=ce.config.validateStatus;!ce.status||!me||me(ce.status)?Fe(ce):Be(se("Request failed with status code "+ce.status,ce.config,null,ce.request,ce))}},"../../../node_modules/axios/lib/core/transformData.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/utils.js");je.exports=function(Fe,Be,ce){return se.forEach(ce,function(we){Fe=we(Fe,Be)}),Fe}},"../../../node_modules/axios/lib/defaults.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/utils.js"),B=K("../../../node_modules/axios/lib/helpers/normalizeHeaderName.js"),Fe={"Content-Type":"application/x-www-form-urlencoded"};function Be(we,ae){!se.isUndefined(we)&&se.isUndefined(we["Content-Type"])&&(we["Content-Type"]=ae)}function ce(){var we;return(typeof XMLHttpRequest<"u"||typeof process<"u")&&(we=K("../../../node_modules/axios/lib/adapters/xhr.js")),we}var me={adapter:ce(),transformRequest:[function(ae,De){return B(De,"Content-Type"),se.isFormData(ae)||se.isArrayBuffer(ae)||se.isBuffer(ae)||se.isStream(ae)||se.isFile(ae)||se.isBlob(ae)?ae:se.isArrayBufferView(ae)?ae.buffer:se.isURLSearchParams(ae)?(Be(De,"application/x-www-form-urlencoded;charset=utf-8"),ae.toString()):se.isObject(ae)?(Be(De,"application/json;charset=utf-8"),JSON.stringify(ae)):ae}],transformResponse:[function(ae){if(typeof ae=="string")try{ae=JSON.parse(ae)}catch{}return ae}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(ae){return ae>=200&&ae<300}};me.headers={common:{Accept:"application/json, text/plain, */*"}},se.forEach(["delete","get","head"],function(ae){me.headers[ae]={}}),se.forEach(["post","put","patch"],function(ae){me.headers[ae]=se.merge(Fe)}),je.exports=me},"../../../node_modules/axios/lib/helpers/bind.js":je=>{je.exports=function(K,se){return function(){for(var Fe=new Array(arguments.length),Be=0;Be<Fe.length;Be++)Fe[Be]=arguments[Be];return K.apply(se,Fe)}}},"../../../node_modules/axios/lib/helpers/buildURL.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/utils.js");function B(Fe){return encodeURIComponent(Fe).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}je.exports=function(Be,ce,me){if(!ce)return Be;var we;if(me)we=me(ce);else if(se.isURLSearchParams(ce))we=ce.toString();else{var ae=[];se.forEach(ce,function(Pe,Se){Pe===null||typeof Pe>"u"||(se.isArray(Pe)?Se=Se+"[]":Pe=[Pe],se.forEach(Pe,function(Qe){se.isDate(Qe)?Qe=Qe.toISOString():se.isObject(Qe)&&(Qe=JSON.stringify(Qe)),ae.push(B(Se)+"="+B(Qe))}))}),we=ae.join("&")}return we&&(Be+=(Be.indexOf("?")===-1?"?":"&")+we),Be}},"../../../node_modules/axios/lib/helpers/combineURLs.js":je=>{je.exports=function(K,se){return se?K.replace(/\/+$/,"")+"/"+se.replace(/^\/+/,""):K}},"../../../node_modules/axios/lib/helpers/cookies.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/utils.js");je.exports=se.isStandardBrowserEnv()?function(){return{write:function(Be,ce,me,we,ae,De){var Pe=[];Pe.push(Be+"="+encodeURIComponent(ce)),se.isNumber(me)&&Pe.push("expires="+new Date(me).toGMTString()),se.isString(we)&&Pe.push("path="+we),se.isString(ae)&&Pe.push("domain="+ae),De===!0&&Pe.push("secure"),document.cookie=Pe.join("; ")},read:function(Be){var ce=document.cookie.match(new RegExp("(^|;\\s*)("+Be+")=([^;]*)"));return ce?decodeURIComponent(ce[3]):null},remove:function(Be){this.write(Be,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"../../../node_modules/axios/lib/helpers/isAbsoluteURL.js":je=>{je.exports=function(K){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(K)}},"../../../node_modules/axios/lib/helpers/isURLSameOrigin.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/utils.js");je.exports=se.isStandardBrowserEnv()?function(){var Fe=/(msie|trident)/i.test(navigator.userAgent),Be=document.createElement("a"),ce;function me(we){var ae=we;return Fe&&(Be.setAttribute("href",ae),ae=Be.href),Be.setAttribute("href",ae),{href:Be.href,protocol:Be.protocol?Be.protocol.replace(/:$/,""):"",host:Be.host,search:Be.search?Be.search.replace(/^\?/,""):"",hash:Be.hash?Be.hash.replace(/^#/,""):"",hostname:Be.hostname,port:Be.port,pathname:Be.pathname.charAt(0)==="/"?Be.pathname:"/"+Be.pathname}}return ce=me(window.location.href),function(ae){var De=se.isString(ae)?me(ae):ae;return De.protocol===ce.protocol&&De.host===ce.host}}():function(){return function(){return!0}}()},"../../../node_modules/axios/lib/helpers/normalizeHeaderName.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/utils.js");je.exports=function(Fe,Be){se.forEach(Fe,function(me,we){we!==Be&&we.toUpperCase()===Be.toUpperCase()&&(Fe[Be]=me,delete Fe[we])})}},"../../../node_modules/axios/lib/helpers/parseHeaders.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/utils.js"),B=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];je.exports=function(Be){var ce={},me,we,ae;return Be&&se.forEach(Be.split(`
`),function(Pe){if(ae=Pe.indexOf(":"),me=se.trim(Pe.substr(0,ae)).toLowerCase(),we=se.trim(Pe.substr(ae+1)),me){if(ce[me]&&B.indexOf(me)>=0)return;me==="set-cookie"?ce[me]=(ce[me]?ce[me]:[]).concat([we]):ce[me]=ce[me]?ce[me]+", "+we:we}}),ce}},"../../../node_modules/axios/lib/helpers/spread.js":je=>{je.exports=function(K){return function(B){return K.apply(null,B)}}},"../../../node_modules/axios/lib/utils.js":(je,be,K)=>{var se=K("../../../node_modules/axios/lib/helpers/bind.js"),B=K("../../../node_modules/is-buffer/index.js"),Fe=Object.prototype.toString;function Be(ut){return Fe.call(ut)==="[object Array]"}function ce(ut){return Fe.call(ut)==="[object ArrayBuffer]"}function me(ut){return typeof FormData<"u"&&ut instanceof FormData}function we(ut){var St;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?St=ArrayBuffer.isView(ut):St=ut&&ut.buffer&&ut.buffer instanceof ArrayBuffer,St}function ae(ut){return typeof ut=="string"}function De(ut){return typeof ut=="number"}function Pe(ut){return typeof ut>"u"}function Se(ut){return ut!==null&&typeof ut=="object"}function ee(ut){return Fe.call(ut)==="[object Date]"}function Qe(ut){return Fe.call(ut)==="[object File]"}function wt(ut){return Fe.call(ut)==="[object Blob]"}function Dt(ut){return Fe.call(ut)==="[object Function]"}function at(ut){return Se(ut)&&Dt(ut.pipe)}function Ne(ut){return typeof URLSearchParams<"u"&&ut instanceof URLSearchParams}function Je(ut){return ut.replace(/^\s*/,"").replace(/\s*$/,"")}function pt(){return typeof navigator<"u"&&navigator.product==="ReactNative"?!1:typeof window<"u"&&typeof document<"u"}function ot(ut,St){if(!(ut===null||typeof ut>"u"))if(typeof ut!="object"&&(ut=[ut]),Be(ut))for(var Lt=0,Ue=ut.length;Lt<Ue;Lt++)St.call(null,ut[Lt],Lt,ut);else for(var Ut in ut)Object.prototype.hasOwnProperty.call(ut,Ut)&&St.call(null,ut[Ut],Ut,ut)}function Jt(){var ut={};function St(Ut,Ot){typeof ut[Ot]=="object"&&typeof Ut=="object"?ut[Ot]=Jt(ut[Ot],Ut):ut[Ot]=Ut}for(var Lt=0,Ue=arguments.length;Lt<Ue;Lt++)ot(arguments[Lt],St);return ut}function Qt(ut,St,Lt){return ot(St,function(Ut,Ot){Lt&&typeof Ut=="function"?ut[Ot]=se(Ut,Lt):ut[Ot]=Ut}),ut}je.exports={isArray:Be,isArrayBuffer:ce,isBuffer:B,isFormData:me,isArrayBufferView:we,isString:ae,isNumber:De,isObject:Se,isUndefined:Pe,isDate:ee,isFile:Qe,isBlob:wt,isFunction:Dt,isStream:at,isURLSearchParams:Ne,isStandardBrowserEnv:pt,forEach:ot,merge:Jt,extend:Qt,trim:Je}},"./src/api.ts":(je,be,K)=>{K.r(be),K.d(be,{axiosApi:()=>ce,setupApi:()=>me});var se=K("./node_modules/axios/lib/axios.js"),B=K("./node_modules/lodash/lodash.js"),Fe=K.n(B),Be=K("./src/helpers.tsx"),ce;function me(we,ae){console.log(Zakeke.config),ce=se.default.create({baseURL:Zakeke.config.cloudFlareApiUrl||Zakeke.config.baseApiUrl,timeout:12e4,withCredentials:!0,headers:{Authorization:"Bearer "+ae,"Accept-Language":we}}),$.ajaxSetup({xhrFields:{withCredentials:!0},headers:{Authorization:"Bearer "+ae,"Accept-Language":we}}),ce.interceptors.response.use(function(De){return De.data&&(Fe().isObject(De.data)||Fe().isArray(De.data))&&(De.data=Be.StringHelper.pascalToCamel(De.data)),De},function(De){return De.response&&De.response.data&&(De.response.data=Be.StringHelper.pascalToCamel(De.response.data)),Promise.reject(De)})}},"./src/components/customizer.tsx":(je,be,K)=>{K.r(be),K.d(be,{ZakekeDesigner:()=>at});var se=K("react"),B=K("styled-components"),Fe=K.n(B),Be=K("./src/helpers.tsx"),ce=K("./src/hooks/useZakeke.ts"),me=K("./src/state/provider.tsx"),we;function ae(Ne,Je){return Qe(Ne)||ee(Ne,Je)||Pe(Ne,Je)||De()}function De(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pe(Ne,Je){if(Ne){if(typeof Ne=="string")return Se(Ne,Je);var pt={}.toString.call(Ne).slice(8,-1);return pt==="Object"&&Ne.constructor&&(pt=Ne.constructor.name),pt==="Map"||pt==="Set"?Array.from(Ne):pt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pt)?Se(Ne,Je):void 0}}function Se(Ne,Je){(Je==null||Je>Ne.length)&&(Je=Ne.length);for(var pt=0,ot=Array(Je);pt<Je;pt++)ot[pt]=Ne[pt];return ot}function ee(Ne,Je){var pt=Ne==null?null:typeof Symbol<"u"&&Ne[Symbol.iterator]||Ne["@@iterator"];if(pt!=null){var ot,Jt,Qt,ut,St=[],Lt=!0,Ue=!1;try{if(Qt=(pt=pt.call(Ne)).next,Je===0){if(Object(pt)!==pt)return;Lt=!1}else for(;!(Lt=(ot=Qt.call(pt)).done)&&(St.push(ot.value),St.length!==Je);Lt=!0);}catch(Ut){Ue=!0,Jt=Ut}finally{try{if(!Lt&&pt.return!=null&&(ut=pt.return(),Object(ut)!==ut))return}finally{if(Ue)throw Jt}}return St}}function Qe(Ne){if(Array.isArray(Ne))return Ne}function wt(Ne,Je){return Je||(Je=Ne.slice(0)),Object.freeze(Object.defineProperties(Ne,{raw:{value:Object.freeze(Je)}}))}var Dt=Fe().div(we||(we=wt([`
	width: 100%;
	height: 100%;
	position: relative;
	outline: none !important;

	canvas {
		outline: none !important;
	}
`]))),at=se.forwardRef(function(Ne,Je){var pt=(0,me.useInternalState)(),ot=(0,se.useRef)(pt);ot.current=pt;var Jt=ot.current.state.environment,Qt=(0,ce.useZakeke)(),ut=Qt.designUpdate,St=se.useState((0,Be.uuid)()),Lt=ae(St,1),Ue=Lt[0],Ut=se.useState(null),Ot=ae(Ut,2),rn=Ot[0],$t=Ot[1];(0,se.useEffect)(function(){var Le=document.getElementById("zakeke-designer-container-"+Ue),Mt=new MPlaza.Customizer(!1,!1,null,!0);Mt.showSideImage=!1,Mt.addItemChangedListener(sn),Mt.addItemRemovedListener(lt),Mt.setCustomizedMessages([{Description:"",EventID:MPlaza.EventMessages.DPIWarning,Visible:!1}]),Mt.appendTo(Le),$t(Mt)},[]),(0,se.useEffect)(function(){if(Jt.internalProduct){var Le=Jt.internalProduct.get("colors").at(0).get("sides").find(function(Mt){return Mt.get("sideID")==Ne.areaId});Le&&rn&&Jt.internalCurrentTemplate&&(rn.model=Jt.internalProduct,rn.setDesign(Jt.internalCurrentTemplate),rn.setSide(Le).then(function(){rn.adaptZoomToSideAreas(!1)}))}},[Ne.areaId,Jt.currentTemplate,!!rn]);var sn=function(){ut()},lt=function(){ut()},Zt=function(){rn&&rn.zoomIn()},zt=function(){rn&&rn.zoomOut()};return(0,se.useImperativeHandle)(Je,function(){return{zoomIn:Zt,zoomOut:zt}},[]),se.createElement(Dt,{id:"zakeke-designer-container-"+Ue})})},"./src/components/debugs/debugPanel.tsx":(je,be,K)=>{K.r(be),K.d(be,{DebugPanel:()=>sn});var se=K("react"),B=K("styled-components"),Fe=K.n(B),Be=K("./src/state/provider.tsx");function ce(lt){"@babel/helpers - typeof";return ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Zt){return typeof Zt}:function(Zt){return Zt&&typeof Symbol=="function"&&Zt.constructor===Symbol&&Zt!==Symbol.prototype?"symbol":typeof Zt},ce(lt)}var me,we,ae,De,Pe,Se,ee;function Qe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Qe=function(){return Zt};var lt,Zt={},zt=Object.prototype,Le=zt.hasOwnProperty,Mt=Object.defineProperty||function(Tn,Gn,tr){Tn[Gn]=tr.value},Rt=typeof Symbol=="function"?Symbol:{},tt=Rt.iterator||"@@iterator",We=Rt.asyncIterator||"@@asyncIterator",C=Rt.toStringTag||"@@toStringTag";function U(Tn,Gn,tr){return Object.defineProperty(Tn,Gn,{value:tr,enumerable:!0,configurable:!0,writable:!0}),Tn[Gn]}try{U({},"")}catch{U=function(tr,pr,Br){return tr[pr]=Br}}function Q(Tn,Gn,tr,pr){var Br=Gn&&Gn.prototype instanceof _t?Gn:_t,Mr=Object.create(Br.prototype),pn=new Jn(pr||[]);return Mt(Mr,"_invoke",{value:_n(Tn,tr,pn)}),Mr}function fe(Tn,Gn,tr){try{return{type:"normal",arg:Tn.call(Gn,tr)}}catch(pr){return{type:"throw",arg:pr}}}Zt.wrap=Q;var de="suspendedStart",Ce="suspendedYield",Ye="executing",Ke="completed",ct={};function _t(){}function qe(){}function ht(){}var Pt={};U(Pt,tt,function(){return this});var xt=Object.getPrototypeOf,Ge=xt&&xt(xt($n([])));Ge&&Ge!==zt&&Le.call(Ge,tt)&&(Pt=Ge);var en=ht.prototype=_t.prototype=Object.create(Pt);function bt(Tn){["next","throw","return"].forEach(function(Gn){U(Tn,Gn,function(tr){return this._invoke(Gn,tr)})})}function Vt(Tn,Gn){function tr(Br,Mr,pn,Wt){var un=fe(Tn[Br],Tn,Mr);if(un.type!=="throw"){var fn=un.arg,Bn=fn.value;return Bn&&ce(Bn)=="object"&&Le.call(Bn,"__await")?Gn.resolve(Bn.__await).then(function(Hn){tr("next",Hn,pn,Wt)},function(Hn){tr("throw",Hn,pn,Wt)}):Gn.resolve(Bn).then(function(Hn){fn.value=Hn,pn(fn)},function(Hn){return tr("throw",Hn,pn,Wt)})}Wt(un.arg)}var pr;Mt(this,"_invoke",{value:function(Mr,pn){function Wt(){return new Gn(function(un,fn){tr(Mr,pn,un,fn)})}return pr=pr?pr.then(Wt,Wt):Wt()}})}function _n(Tn,Gn,tr){var pr=de;return function(Br,Mr){if(pr===Ye)throw Error("Generator is already running");if(pr===Ke){if(Br==="throw")throw Mr;return{value:lt,done:!0}}for(tr.method=Br,tr.arg=Mr;;){var pn=tr.delegate;if(pn){var Wt=Yn(pn,tr);if(Wt){if(Wt===ct)continue;return Wt}}if(tr.method==="next")tr.sent=tr._sent=tr.arg;else if(tr.method==="throw"){if(pr===de)throw pr=Ke,tr.arg;tr.dispatchException(tr.arg)}else tr.method==="return"&&tr.abrupt("return",tr.arg);pr=Ye;var un=fe(Tn,Gn,tr);if(un.type==="normal"){if(pr=tr.done?Ke:Ce,un.arg===ct)continue;return{value:un.arg,done:tr.done}}un.type==="throw"&&(pr=Ke,tr.method="throw",tr.arg=un.arg)}}}function Yn(Tn,Gn){var tr=Gn.method,pr=Tn.iterator[tr];if(pr===lt)return Gn.delegate=null,tr==="throw"&&Tn.iterator.return&&(Gn.method="return",Gn.arg=lt,Yn(Tn,Gn),Gn.method==="throw")||tr!=="return"&&(Gn.method="throw",Gn.arg=new TypeError("The iterator does not provide a '"+tr+"' method")),ct;var Br=fe(pr,Tn.iterator,Gn.arg);if(Br.type==="throw")return Gn.method="throw",Gn.arg=Br.arg,Gn.delegate=null,ct;var Mr=Br.arg;return Mr?Mr.done?(Gn[Tn.resultName]=Mr.value,Gn.next=Tn.nextLoc,Gn.method!=="return"&&(Gn.method="next",Gn.arg=lt),Gn.delegate=null,ct):Mr:(Gn.method="throw",Gn.arg=new TypeError("iterator result is not an object"),Gn.delegate=null,ct)}function or(Tn){var Gn={tryLoc:Tn[0]};1 in Tn&&(Gn.catchLoc=Tn[1]),2 in Tn&&(Gn.finallyLoc=Tn[2],Gn.afterLoc=Tn[3]),this.tryEntries.push(Gn)}function lr(Tn){var Gn=Tn.completion||{};Gn.type="normal",delete Gn.arg,Tn.completion=Gn}function Jn(Tn){this.tryEntries=[{tryLoc:"root"}],Tn.forEach(or,this),this.reset(!0)}function $n(Tn){if(Tn||Tn===""){var Gn=Tn[tt];if(Gn)return Gn.call(Tn);if(typeof Tn.next=="function")return Tn;if(!isNaN(Tn.length)){var tr=-1,pr=function Br(){for(;++tr<Tn.length;)if(Le.call(Tn,tr))return Br.value=Tn[tr],Br.done=!1,Br;return Br.value=lt,Br.done=!0,Br};return pr.next=pr}}throw new TypeError(ce(Tn)+" is not iterable")}return qe.prototype=ht,Mt(en,"constructor",{value:ht,configurable:!0}),Mt(ht,"constructor",{value:qe,configurable:!0}),qe.displayName=U(ht,C,"GeneratorFunction"),Zt.isGeneratorFunction=function(Tn){var Gn=typeof Tn=="function"&&Tn.constructor;return!!Gn&&(Gn===qe||(Gn.displayName||Gn.name)==="GeneratorFunction")},Zt.mark=function(Tn){return Object.setPrototypeOf?Object.setPrototypeOf(Tn,ht):(Tn.__proto__=ht,U(Tn,C,"GeneratorFunction")),Tn.prototype=Object.create(en),Tn},Zt.awrap=function(Tn){return{__await:Tn}},bt(Vt.prototype),U(Vt.prototype,We,function(){return this}),Zt.AsyncIterator=Vt,Zt.async=function(Tn,Gn,tr,pr,Br){Br===void 0&&(Br=Promise);var Mr=new Vt(Q(Tn,Gn,tr,pr),Br);return Zt.isGeneratorFunction(Gn)?Mr:Mr.next().then(function(pn){return pn.done?pn.value:Mr.next()})},bt(en),U(en,C,"Generator"),U(en,tt,function(){return this}),U(en,"toString",function(){return"[object Generator]"}),Zt.keys=function(Tn){var Gn=Object(Tn),tr=[];for(var pr in Gn)tr.push(pr);return tr.reverse(),function Br(){for(;tr.length;){var Mr=tr.pop();if(Mr in Gn)return Br.value=Mr,Br.done=!1,Br}return Br.done=!0,Br}},Zt.values=$n,Jn.prototype={constructor:Jn,reset:function(Gn){if(this.prev=0,this.next=0,this.sent=this._sent=lt,this.done=!1,this.delegate=null,this.method="next",this.arg=lt,this.tryEntries.forEach(lr),!Gn)for(var tr in this)tr.charAt(0)==="t"&&Le.call(this,tr)&&!isNaN(+tr.slice(1))&&(this[tr]=lt)},stop:function(){this.done=!0;var Gn=this.tryEntries[0].completion;if(Gn.type==="throw")throw Gn.arg;return this.rval},dispatchException:function(Gn){if(this.done)throw Gn;var tr=this;function pr(fn,Bn){return pn.type="throw",pn.arg=Gn,tr.next=fn,Bn&&(tr.method="next",tr.arg=lt),!!Bn}for(var Br=this.tryEntries.length-1;Br>=0;--Br){var Mr=this.tryEntries[Br],pn=Mr.completion;if(Mr.tryLoc==="root")return pr("end");if(Mr.tryLoc<=this.prev){var Wt=Le.call(Mr,"catchLoc"),un=Le.call(Mr,"finallyLoc");if(Wt&&un){if(this.prev<Mr.catchLoc)return pr(Mr.catchLoc,!0);if(this.prev<Mr.finallyLoc)return pr(Mr.finallyLoc)}else if(Wt){if(this.prev<Mr.catchLoc)return pr(Mr.catchLoc,!0)}else{if(!un)throw Error("try statement without catch or finally");if(this.prev<Mr.finallyLoc)return pr(Mr.finallyLoc)}}}},abrupt:function(Gn,tr){for(var pr=this.tryEntries.length-1;pr>=0;--pr){var Br=this.tryEntries[pr];if(Br.tryLoc<=this.prev&&Le.call(Br,"finallyLoc")&&this.prev<Br.finallyLoc){var Mr=Br;break}}Mr&&(Gn==="break"||Gn==="continue")&&Mr.tryLoc<=tr&&tr<=Mr.finallyLoc&&(Mr=null);var pn=Mr?Mr.completion:{};return pn.type=Gn,pn.arg=tr,Mr?(this.method="next",this.next=Mr.finallyLoc,ct):this.complete(pn)},complete:function(Gn,tr){if(Gn.type==="throw")throw Gn.arg;return Gn.type==="break"||Gn.type==="continue"?this.next=Gn.arg:Gn.type==="return"?(this.rval=this.arg=Gn.arg,this.method="return",this.next="end"):Gn.type==="normal"&&tr&&(this.next=tr),ct},finish:function(Gn){for(var tr=this.tryEntries.length-1;tr>=0;--tr){var pr=this.tryEntries[tr];if(pr.finallyLoc===Gn)return this.complete(pr.completion,pr.afterLoc),lr(pr),ct}},catch:function(Gn){for(var tr=this.tryEntries.length-1;tr>=0;--tr){var pr=this.tryEntries[tr];if(pr.tryLoc===Gn){var Br=pr.completion;if(Br.type==="throw"){var Mr=Br.arg;lr(pr)}return Mr}}throw Error("illegal catch attempt")},delegateYield:function(Gn,tr,pr){return this.delegate={iterator:$n(Gn),resultName:tr,nextLoc:pr},this.method==="next"&&(this.arg=lt),ct}},Zt}function wt(lt,Zt,zt,Le,Mt,Rt,tt){try{var We=lt[Rt](tt),C=We.value}catch(U){return void zt(U)}We.done?Zt(C):Promise.resolve(C).then(Le,Mt)}function Dt(lt){return function(){var Zt=this,zt=arguments;return new Promise(function(Le,Mt){var Rt=lt.apply(Zt,zt);function tt(C){wt(Rt,Le,Mt,tt,We,"next",C)}function We(C){wt(Rt,Le,Mt,tt,We,"throw",C)}tt(void 0)})}}function at(lt,Zt){return Jt(lt)||ot(lt,Zt)||Je(lt,Zt)||Ne()}function Ne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Je(lt,Zt){if(lt){if(typeof lt=="string")return pt(lt,Zt);var zt={}.toString.call(lt).slice(8,-1);return zt==="Object"&&lt.constructor&&(zt=lt.constructor.name),zt==="Map"||zt==="Set"?Array.from(lt):zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(zt)?pt(lt,Zt):void 0}}function pt(lt,Zt){(Zt==null||Zt>lt.length)&&(Zt=lt.length);for(var zt=0,Le=Array(Zt);zt<Zt;zt++)Le[zt]=lt[zt];return Le}function ot(lt,Zt){var zt=lt==null?null:typeof Symbol<"u"&&lt[Symbol.iterator]||lt["@@iterator"];if(zt!=null){var Le,Mt,Rt,tt,We=[],C=!0,U=!1;try{if(Rt=(zt=zt.call(lt)).next,Zt!==0)for(;!(C=(Le=Rt.call(zt)).done)&&(We.push(Le.value),We.length!==Zt);C=!0);}catch(Q){U=!0,Mt=Q}finally{try{if(!C&&zt.return!=null&&(tt=zt.return(),Object(tt)!==tt))return}finally{if(U)throw Mt}}return We}}function Jt(lt){if(Array.isArray(lt))return lt}function Qt(lt){if(lt==null)throw new TypeError("Cannot destructure "+lt)}function ut(lt,Zt){return Zt||(Zt=lt.slice(0)),Object.freeze(Object.defineProperties(lt,{raw:{value:Object.freeze(Zt)}}))}var St=Fe().div(me||(me=ut([`
	position: fixed;
	min-width: 120px;
	bottom: 0;
	right: 0;
	background: #fff;
	padding: 10px 20px;
	border: 1px solid #ccc;
	z-index: 10000;
	cursor: `,`;
`])),function(lt){return lt.$hideCursor?"auto":"pointer"}),Lt=Fe().div(we||(we=ut([`
	position: relative;
	padding: 25px 10px 10px;
	display: flex;
	flex-direction: column;
	gap: 10px;
`]))),Ue=Fe().h3(ae||(ae=ut([`
	position: absolute;
	top: 5px;
	left: 10px;
	margin: 0;
`]))),Ut=Fe().button(De||(De=ut([`
	position: absolute;
	top: 5px;
	right: 10px;
	margin: 0;
	padding: 0;
	background: none;
	border: none;
	cursor: pointer;
	z-index: 10002;
`]))),Ot=Fe().h4(Pe||(Pe=ut([`
	margin: 0;
`]))),rn=Fe().ul(Se||(Se=ut([`
	list-style: none;
	padding: 0;
	overflow: auto;
	max-height: 200px;
`]))),$t=Fe().textarea(ee||(ee=ut([`
	min-width: 400px;
	height: 200px;
`]))),sn=function(Zt){var zt;Qt(Zt);var Le=se.useState(!1),Mt=at(Le,2),Rt=Mt[0],tt=Mt[1],We=(0,Be.useInternalState)(),C=se.useRef(We),U=C.current.state.environment,Q=C.current.state.sceneViewer,fe=se.useState(""),de=at(fe,2),Ce=de[0],Ye=de[1],Ke=function(){tt(!Rt)},ct=function(){Rt||tt(!0)},_t=function(xt,Ge){var en=window.URL.createObjectURL(xt),bt=document.createElement("a");bt.href=en,bt.download=Ge,bt.click()},qe=function(){var Pt=Dt(Qe().mark(function xt(){var Ge;return Qe().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return console.log("Download Scene"),bt.next=3,U.exportSceneToGlb();case 3:Ge=bt.sent,_t(Ge,"scene.glb"),console.log("Scene downloaded");case 6:case"end":return bt.stop()}},xt)}));return function(){return Pt.apply(this,arguments)}}(),ht=function(){var Pt=Dt(Qe().mark(function xt(){var Ge;return Qe().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return console.log("Download TryOn GLB"),bt.next=3,U.exportTryOnMeshToGlb();case 3:Ge=bt.sent,_t(Ge,"tryon.glb"),console.log("TryOn GLB downloaded");case 6:case"end":return bt.stop()}},xt)}));return function(){return Pt.apply(this,arguments)}}();return se.useEffect(function(){var Pt,xt,Ge=Q==null||(Pt=Q.zkScene)===null||Pt===void 0||(xt=Pt.getSceneConfig())===null||xt===void 0?void 0:xt.toJSON();Ge&&Ye(JSON.stringify(Ge,null,2))},[Q]),se.createElement(St,{$hideCursor:Rt,onClick:ct},se.createElement(Ue,null,"Debug Panel"),Rt&&se.createElement(Ut,{onClick:Ke},"X"),Rt&&se.createElement(Lt,null,se.createElement("button",{onClick:qe},"Download Scene"),se.createElement("button",{onClick:ht},"Download TryOn GLB"),se.createElement(Lt,null,se.createElement(Ot,null,"Mesh list"),se.createElement(rn,null,Q==null||(zt=Q.scene)===null||zt===void 0?void 0:zt.meshes.map(function(Pt){return se.createElement("li",{key:Pt.id},se.createElement("button",{onClick:function(){Pt.visibility=1}},"Show"),se.createElement("button",{onClick:function(){Pt.visibility=0}},"Hide"),se.createElement("span",null,Pt.name))})),se.createElement("button",{onClick:function(){var xt;console.log(Q==null||(xt=Q.scene)===null||xt===void 0?void 0:xt.meshes)}},"Log Meshes"),se.createElement("button",{onClick:function(){var xt;console.log(Q==null||(xt=Q.scene)===null||xt===void 0?void 0:xt.materials)}},"Log Materials"),se.createElement("button",{onClick:function(){var xt;console.log(Q==null||(xt=Q.scene)===null||xt===void 0?void 0:xt.textures)}},"Log Textures")),se.createElement(Lt,null,se.createElement(Ot,null,"Scene config"),se.createElement($t,{value:Ce,onChange:function(xt){return Ye(xt.target.value)}}),se.createElement("button",{onClick:function(){var xt,Ge;console.log(Q==null||(xt=Q.zkScene)===null||xt===void 0||(Ge=xt.getSceneConfig())===null||Ge===void 0?void 0:Ge.toJSON())}},"Log Scene Config"),se.createElement("button",{onClick:function(){Q==null||Q.loadSceneConfig(JSON.parse(Ce)),Q==null||Q.setRenderingNeeded(),Q==null||Q.refreshRendering()}},"Apply Scene Config"))))}},"./src/components/sceneViewer.tsx":(je,be,K)=>{K.r(be),K.d(be,{ZakekeViewer:()=>Ne});var se=K("react"),B=K("styled-components"),Fe=K.n(B),Be=K("./src/helpers.tsx"),ce=K("./src/hooks/useZakeke.ts"),me=K("./src/state/provider.tsx"),we=K("./src/components/debugs/debugPanel.tsx"),ae;function De(Je,pt){return wt(Je)||Qe(Je,pt)||Se(Je,pt)||Pe()}function Pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Se(Je,pt){if(Je){if(typeof Je=="string")return ee(Je,pt);var ot={}.toString.call(Je).slice(8,-1);return ot==="Object"&&Je.constructor&&(ot=Je.constructor.name),ot==="Map"||ot==="Set"?Array.from(Je):ot==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ot)?ee(Je,pt):void 0}}function ee(Je,pt){(pt==null||pt>Je.length)&&(pt=Je.length);for(var ot=0,Jt=Array(pt);ot<pt;ot++)Jt[ot]=Je[ot];return Jt}function Qe(Je,pt){var ot=Je==null?null:typeof Symbol<"u"&&Je[Symbol.iterator]||Je["@@iterator"];if(ot!=null){var Jt,Qt,ut,St,Lt=[],Ue=!0,Ut=!1;try{if(ut=(ot=ot.call(Je)).next,pt===0){if(Object(ot)!==ot)return;Ue=!1}else for(;!(Ue=(Jt=ut.call(ot)).done)&&(Lt.push(Jt.value),Lt.length!==pt);Ue=!0);}catch(Ot){Ut=!0,Qt=Ot}finally{try{if(!Ue&&ot.return!=null&&(St=ot.return(),Object(St)!==St))return}finally{if(Ut)throw Qt}}return Lt}}function wt(Je){if(Array.isArray(Je))return Je}function Dt(Je,pt){return pt||(pt=Je.slice(0)),Object.freeze(Object.defineProperties(Je,{raw:{value:Object.freeze(pt)}}))}var at=Fe().div(ae||(ae=Dt([`
	width: 100%;
	height: 100%;
	position: relative;
	outline: none !important;

	canvas {
		outline: none !important;
		background-color: `,`;
	}
`])),function(Je){return Je.backgroundColor?Je.backgroundColor:"transparent"}),Ne=function(pt){var ot=pt.className,Jt=pt.bgColor,Qt=se.useState((0,Be.uuid)()),ut=De(Qt,1),St=ut[0],Lt=(0,ce.useZakeke)(),Ue=Lt.isViewerReady,Ut=Lt.internalAppendViewer;Lt.backgroundColor,Lt.removeBackground;var Ot=(0,me.useInternalState)(),rn=se.useRef(Ot),$t=function(){var Mt=!!document.fullscreenElement,Rt=rn.current.state.environment.removeBackground,tt=rn.current.state.environment.backgroundColor;return!Mt&&Rt?null:!Mt&&tt?tt:Jt??"#f2f2f2"},sn=se.useState($t()),lt=De(sn,2),Zt=lt[0],zt=lt[1];return(0,se.useEffect)(function(){Ue&&Ut(document.getElementById("zakeke-viewer-container-"+St))},[Ue]),(0,se.useEffect)(function(){zt($t());var Le=function(){zt($t())};return document.addEventListener("fullscreenchange",Le),function(){document.removeEventListener("fullscreenchange",Le)}},[]),se.createElement(at,{backgroundColor:Zt,id:"zakeke-viewer-container-"+St,className:"zakeke-viewer-container ".concat(ot)},(rn==null?void 0:rn.current.state.isDebug)&&se.createElement(we.DebugPanel,null))}},"./src/components/tryon/deepARQrCode.tsx":(je,be,K)=>{K.r(be),K.d(be,{default:()=>wt});var se=K("react"),B=K.n(se),Fe=K("./node_modules/react-qr-code/lib/index.js"),Be=K("styled-components"),ce=K.n(Be),me,we,ae;function De(Dt,at){return at||(at=Dt.slice(0)),Object.freeze(Object.defineProperties(Dt,{raw:{value:Object.freeze(at)}}))}var Pe=ce().div(me||(me=De([`
	display: flex;
	flex-direction: column;
	align-items: left;
	justify-content: center;
	padding: 20px;
	text-align: center;
	span {
		margin-top: 20px;
	}
`]))),Se=ce().span(we||(we=De([`
	font-size: 24px;
	color: black;
	font-weight: bold;
	margin: 0 0 20px 0;
`]))),ee=ce().div(ae||(ae=De([`
	display: flex;
	justify-content: center;
	align-items: center;
`]))),Qe=function(at){var Ne=at.url;return B().createElement(Pe,null,B().createElement(Se,null,"Scan the QR code to virtually ",B().createElement("br",null)," try your shoes"),B().createElement(ee,null,B().createElement(Fe.default,{value:Ne,size:256})),B().createElement("span",null,"iOS 15+, iPad OS 15+ or Android with ARCore 1.9+ required"))};const wt=Qe},"./src/components/tryon/tryOnFrame.tsx":(je,be,K)=>{K.r(be),K.d(be,{TryOnFrame:()=>wt});var se=K("react"),B=K.n(se),Fe=K("styled-components"),Be=K.n(Fe),ce;function me(Dt,at){return Se(Dt)||Pe(Dt,at)||ae(Dt,at)||we()}function we(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(Dt,at){if(Dt){if(typeof Dt=="string")return De(Dt,at);var Ne={}.toString.call(Dt).slice(8,-1);return Ne==="Object"&&Dt.constructor&&(Ne=Dt.constructor.name),Ne==="Map"||Ne==="Set"?Array.from(Dt):Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne)?De(Dt,at):void 0}}function De(Dt,at){(at==null||at>Dt.length)&&(at=Dt.length);for(var Ne=0,Je=Array(at);Ne<at;Ne++)Je[Ne]=Dt[Ne];return Je}function Pe(Dt,at){var Ne=Dt==null?null:typeof Symbol<"u"&&Dt[Symbol.iterator]||Dt["@@iterator"];if(Ne!=null){var Je,pt,ot,Jt,Qt=[],ut=!0,St=!1;try{if(ot=(Ne=Ne.call(Dt)).next,at!==0)for(;!(ut=(Je=ot.call(Ne)).done)&&(Qt.push(Je.value),Qt.length!==at);ut=!0);}catch(Lt){St=!0,pt=Lt}finally{try{if(!ut&&Ne.return!=null&&(Jt=Ne.return(),Object(Jt)!==Jt))return}finally{if(St)throw pt}}return Qt}}function Se(Dt){if(Array.isArray(Dt))return Dt}function ee(Dt,at){return at||(at=Dt.slice(0)),Object.freeze(Object.defineProperties(Dt,{raw:{value:Object.freeze(at)}}))}var Qe=Be().iframe(ce||(ce=ee([`
	width: 100%;
	height: 100%;
	border: none;
	outline: none;
`]))),wt=function(at){var Ne=(0,se.useRef)(null),Je=(0,se.useState)(!1),pt=me(Je,2),ot=pt[0],Jt=pt[1],Qt=(0,se.useState)(null),ut=me(Qt,2),St=ut[0],Lt=ut[1],Ue=(0,se.useState)(!1),Ut=me(Ue,2);Ut[0];var Ot=Ut[1],rn=Ne==null?void 0:Ne.current,$t=rn==null?void 0:rn.contentWindow,sn=function(){St&&clearTimeout(St),Ot(!0),rn==null||rn.setAttribute("src","about:blank"),Lt(setTimeout(function(){Ot(!1),rn==null||rn.setAttribute("src",at.providerUrl)},1500))};return(0,se.useEffect)(function(){rn&&$t&&(at.onReady&&at.onReady($t),sn())},[$t]),(0,se.useEffect)(function(){return ot||(Jt(!0),window.addEventListener("message",at.outMessageHandler)),function(){ot&&(window.removeEventListener("message",at.outMessageHandler),Jt(!1))}},[]),B().createElement(Qe,{ref:Ne,className:at.className?at.className:" tryon-"+at.providerTitle+"-frame",src:"about:blank",scrolling:"no",allowFullScreen:!0,allow:"accelerometer; magnetometer; autoplay; encrypted-media; gyroscope; picture-in-picture; camera *; xr-spatial-tracking;"})}},"./src/components/tryon/tryOnModels.ts":(je,be,K)=>{K.r(be),K.d(be,{PupillaryDistanceBaseProviderReceivedMessage:()=>Be,PupillaryDistanceBaseProviderResponseMessage:()=>ce,TryOnBaseProviderReceivedMessage:()=>B,TryOnBaseProviderResponseMessage:()=>Fe,TryOnMode:()=>se,parseJSON:()=>me});var se=function(we){return we[we.TryOn=1]="TryOn",we[we.PDTool=2]="PDTool",we}({}),B={Start:"",WaitingAuthentication:"WAITING_AUTH",AuthSuccessful:"AUTH_SUCCESS",AuthError:"AUTH_ERROR",WebcamError:"WEBCAM_ERROR"},Fe={},Be={Start:"",WaitingAuthentication:"WAITING_AUTH",AuthSuccessful:"AUTH_SUCCESS",AuthError:"AUTH_ERROR"},ce={};function me(we){try{return JSON.parse(we)}catch{return null}}},"./src/components/tryon/tryOnProviders/tryOnBanuba.tsx":(je,be,K)=>{K.r(be),K.d(be,{BanubaTryOn:()=>$t,BanubaTryOnReceivedMessage:()=>Lt,BanubaTryOnResponseMessage:()=>Ot});var se=K("react"),B=K.n(se),Fe=K("styled-components"),Be=K.n(Fe),ce=K("./src/components/tryon/tryOnModels.ts"),me=K("./src/hooks/tryonContext.ts"),we=K("./src/components/tryon/tryOnFrame.tsx"),ae=K("./src/state/provider.tsx"),De,Pe=void 0;function Se(sn){"@babel/helpers - typeof";return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},Se(sn)}function ee(sn,lt){return Ne(sn)||at(sn,lt)||wt(sn,lt)||Qe()}function Qe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wt(sn,lt){if(sn){if(typeof sn=="string")return Dt(sn,lt);var Zt={}.toString.call(sn).slice(8,-1);return Zt==="Object"&&sn.constructor&&(Zt=sn.constructor.name),Zt==="Map"||Zt==="Set"?Array.from(sn):Zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Zt)?Dt(sn,lt):void 0}}function Dt(sn,lt){(lt==null||lt>sn.length)&&(lt=sn.length);for(var Zt=0,zt=Array(lt);Zt<lt;Zt++)zt[Zt]=sn[Zt];return zt}function at(sn,lt){var Zt=sn==null?null:typeof Symbol<"u"&&sn[Symbol.iterator]||sn["@@iterator"];if(Zt!=null){var zt,Le,Mt,Rt,tt=[],We=!0,C=!1;try{if(Mt=(Zt=Zt.call(sn)).next,lt!==0)for(;!(We=(zt=Mt.call(Zt)).done)&&(tt.push(zt.value),tt.length!==lt);We=!0);}catch(U){C=!0,Le=U}finally{try{if(!We&&Zt.return!=null&&(Rt=Zt.return(),Object(Rt)!==Rt))return}finally{if(C)throw Le}}return tt}}function Ne(sn){if(Array.isArray(sn))return sn}function Je(sn,lt){return lt||(lt=sn.slice(0)),Object.freeze(Object.defineProperties(sn,{raw:{value:Object.freeze(lt)}}))}function pt(sn,lt){var Zt=Object.keys(sn);if(Object.getOwnPropertySymbols){var zt=Object.getOwnPropertySymbols(sn);lt&&(zt=zt.filter(function(Le){return Object.getOwnPropertyDescriptor(sn,Le).enumerable})),Zt.push.apply(Zt,zt)}return Zt}function ot(sn){for(var lt=1;lt<arguments.length;lt++){var Zt=arguments[lt]!=null?arguments[lt]:{};lt%2?pt(Object(Zt),!0).forEach(function(zt){Jt(sn,zt,Zt[zt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(sn,Object.getOwnPropertyDescriptors(Zt)):pt(Object(Zt)).forEach(function(zt){Object.defineProperty(sn,zt,Object.getOwnPropertyDescriptor(Zt,zt))})}return sn}function Jt(sn,lt,Zt){return(lt=Qt(lt))in sn?Object.defineProperty(sn,lt,{value:Zt,enumerable:!0,configurable:!0,writable:!0}):sn[lt]=Zt,sn}function Qt(sn){var lt=ut(sn,"string");return Se(lt)=="symbol"?lt:lt+""}function ut(sn,lt){if(Se(sn)!="object"||!sn)return sn;var Zt=sn[Symbol.toPrimitive];if(Zt!==void 0){var zt=Zt.call(sn,lt);if(Se(zt)!="object")return zt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(lt==="string"?String:Number)(sn)}var St={WaitingAuthentication:"WAITING_AUTH",TryOnLoaded:"MODEL_LOADED",ScreenShotTaken:"SCREENSHOT_TAKEN",WebcamStopped:"WEBCAM_STOPPED"},Lt=ot(ot({},ce.TryOnBaseProviderReceivedMessage),St),Ue={StartAuthenticationTryOn:"AUTH",LoadTryOn:"LOAD_MODEL",LoadHands:"LOAD_HANDS",TakeScreenshot:"TAKE_SCREENSHOT",StopWebcam:"STOP_WEBCAM"},Ut=[],Ot=ot(ot({},ce.TryOnBaseProviderResponseMessage),Ue),rn=Be().div(De||(De=Je([`
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-color: white;
	display: flex;
	& .tryon-banuba-frame {
		width: 77%;
		height: 100%;
		border: none;
		outline: none;
		margin: auto;
	}
`]))),$t=function(lt){var Zt=(0,ae.useInternalState)(),zt=(0,se.useRef)(Zt);zt.current=Zt,zt.current.state.environment;var Le=(0,se.useState)({}),Mt=ee(Le,2),Rt=Mt[0],tt=Mt[1],We=(0,me.useZakekeTryOn)(),C=We.tryon,U=We.setTryon,Q=(0,se.useState)(null),fe=ee(Q,2),de=fe[0],Ce=fe[1],Ye=(0,se.useRef)();Ye.current=de,(0,se.useEffect)(function(){U(ot(ot({},C),{},{closeFrame:function(){var qe;return C==null||(qe=C.setVisible)===null||qe===void 0?void 0:qe.call(C,!1)},takeScreenshot:function(){return Ke(Ye.current,Ot.TakeScreenshot,null)},switchToPDTool:function(){console.log("switchToPDTool")},switchToTryOn:function(){console.log("switchToTryOn")},startPupillaryDistance:function(qe){console.log("startPupillaryDistance")}}))},[]),(0,se.useEffect)(function(){var _t,qe;switch(Rt.type){case Lt.Start:break;case Lt.WaitingAuthentication:Ke(de,Ot.StartAuthenticationTryOn,{token:Zakeke.config.banubaSettings.token});break;case Lt.AuthSuccessful:if(Ut.includes(lt.product.typeID)){Ke(de,Ot.LoadHands,null),setTimeout(function(){Ke(de,Ot.LoadTryOn,{glb:lt.obj,settings:lt.fineTuningSettings})},1500);return}Ke(de,Ot.LoadTryOn,{glb:lt.obj,settings:lt.fineTuningSettings});break;case Lt.TryOnLoaded:(_t=lt.onLoaded)===null||_t===void 0||_t.call(lt);break;case Lt.WebcamError:lt.onWebcamError();break;case Lt.WebcamStopped:(qe=lt.onClose)===null||qe===void 0||qe.call(lt);break}},[Rt]);var Ke=function(qe,ht,Pt){qe.postMessage(ot({type:ht},Pt),"*")},ct=function(qe){tt(qe.data)};return B().createElement(rn,{className:"Banuba-tryon ".concat(lt.className?lt.className:"")},B().createElement(we.TryOnFrame,{providerTitle:"banuba",providerUrl:Zakeke.config.banubaSettings.url,onReady:function(qe){var ht;Ce(qe),(ht=lt.onReady)===null||ht===void 0||ht.call(lt)},outMessageHandler:ct.bind(Pe)}))}},"./src/components/tryon/tryOnProviders/tryOnDeepAR.tsx":(je,be,K)=>{K.r(be),K.d(be,{DeepARTryOn:()=>We,DeepARTryOnReceivedMessage:()=>lt,DeepARTryOnResponseMessage:()=>zt});var se=K("react"),B=K.n(se),Fe=K("styled-components"),Be=K.n(Fe),ce=K("./src/hooks/tryonContext.ts"),me=K("./src/components/tryon/tryOnModels.ts"),we=K("./src/state/provider.tsx"),ae=K("./src/components/tryon/deepARQrCode.tsx"),De=K("./src/components/tryon/tryOnFrame.tsx"),Pe,Se,ee,Qe,wt=void 0;function Dt(C){"@babel/helpers - typeof";return Dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},Dt(C)}function at(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */at=function(){return U};var C,U={},Q=Object.prototype,fe=Q.hasOwnProperty,de=Object.defineProperty||function(un,fn,Bn){un[fn]=Bn.value},Ce=typeof Symbol=="function"?Symbol:{},Ye=Ce.iterator||"@@iterator",Ke=Ce.asyncIterator||"@@asyncIterator",ct=Ce.toStringTag||"@@toStringTag";function _t(un,fn,Bn){return Object.defineProperty(un,fn,{value:Bn,enumerable:!0,configurable:!0,writable:!0}),un[fn]}try{_t({},"")}catch{_t=function(Bn,Hn,yr){return Bn[Hn]=yr}}function qe(un,fn,Bn,Hn){var yr=fn&&fn.prototype instanceof Vt?fn:Vt,zr=Object.create(yr.prototype),Zr=new pn(Hn||[]);return de(zr,"_invoke",{value:tr(un,Bn,Zr)}),zr}function ht(un,fn,Bn){try{return{type:"normal",arg:un.call(fn,Bn)}}catch(Hn){return{type:"throw",arg:Hn}}}U.wrap=qe;var Pt="suspendedStart",xt="suspendedYield",Ge="executing",en="completed",bt={};function Vt(){}function _n(){}function Yn(){}var or={};_t(or,Ye,function(){return this});var lr=Object.getPrototypeOf,Jn=lr&&lr(lr(Wt([])));Jn&&Jn!==Q&&fe.call(Jn,Ye)&&(or=Jn);var $n=Yn.prototype=Vt.prototype=Object.create(or);function Tn(un){["next","throw","return"].forEach(function(fn){_t(un,fn,function(Bn){return this._invoke(fn,Bn)})})}function Gn(un,fn){function Bn(yr,zr,Zr,Ni){var as=ht(un[yr],un,zr);if(as.type!=="throw"){var Ss=as.arg,Os=Ss.value;return Os&&Dt(Os)=="object"&&fe.call(Os,"__await")?fn.resolve(Os.__await).then(function(go){Bn("next",go,Zr,Ni)},function(go){Bn("throw",go,Zr,Ni)}):fn.resolve(Os).then(function(go){Ss.value=go,Zr(Ss)},function(go){return Bn("throw",go,Zr,Ni)})}Ni(as.arg)}var Hn;de(this,"_invoke",{value:function(zr,Zr){function Ni(){return new fn(function(as,Ss){Bn(zr,Zr,as,Ss)})}return Hn=Hn?Hn.then(Ni,Ni):Ni()}})}function tr(un,fn,Bn){var Hn=Pt;return function(yr,zr){if(Hn===Ge)throw Error("Generator is already running");if(Hn===en){if(yr==="throw")throw zr;return{value:C,done:!0}}for(Bn.method=yr,Bn.arg=zr;;){var Zr=Bn.delegate;if(Zr){var Ni=pr(Zr,Bn);if(Ni){if(Ni===bt)continue;return Ni}}if(Bn.method==="next")Bn.sent=Bn._sent=Bn.arg;else if(Bn.method==="throw"){if(Hn===Pt)throw Hn=en,Bn.arg;Bn.dispatchException(Bn.arg)}else Bn.method==="return"&&Bn.abrupt("return",Bn.arg);Hn=Ge;var as=ht(un,fn,Bn);if(as.type==="normal"){if(Hn=Bn.done?en:xt,as.arg===bt)continue;return{value:as.arg,done:Bn.done}}as.type==="throw"&&(Hn=en,Bn.method="throw",Bn.arg=as.arg)}}}function pr(un,fn){var Bn=fn.method,Hn=un.iterator[Bn];if(Hn===C)return fn.delegate=null,Bn==="throw"&&un.iterator.return&&(fn.method="return",fn.arg=C,pr(un,fn),fn.method==="throw")||Bn!=="return"&&(fn.method="throw",fn.arg=new TypeError("The iterator does not provide a '"+Bn+"' method")),bt;var yr=ht(Hn,un.iterator,fn.arg);if(yr.type==="throw")return fn.method="throw",fn.arg=yr.arg,fn.delegate=null,bt;var zr=yr.arg;return zr?zr.done?(fn[un.resultName]=zr.value,fn.next=un.nextLoc,fn.method!=="return"&&(fn.method="next",fn.arg=C),fn.delegate=null,bt):zr:(fn.method="throw",fn.arg=new TypeError("iterator result is not an object"),fn.delegate=null,bt)}function Br(un){var fn={tryLoc:un[0]};1 in un&&(fn.catchLoc=un[1]),2 in un&&(fn.finallyLoc=un[2],fn.afterLoc=un[3]),this.tryEntries.push(fn)}function Mr(un){var fn=un.completion||{};fn.type="normal",delete fn.arg,un.completion=fn}function pn(un){this.tryEntries=[{tryLoc:"root"}],un.forEach(Br,this),this.reset(!0)}function Wt(un){if(un||un===""){var fn=un[Ye];if(fn)return fn.call(un);if(typeof un.next=="function")return un;if(!isNaN(un.length)){var Bn=-1,Hn=function yr(){for(;++Bn<un.length;)if(fe.call(un,Bn))return yr.value=un[Bn],yr.done=!1,yr;return yr.value=C,yr.done=!0,yr};return Hn.next=Hn}}throw new TypeError(Dt(un)+" is not iterable")}return _n.prototype=Yn,de($n,"constructor",{value:Yn,configurable:!0}),de(Yn,"constructor",{value:_n,configurable:!0}),_n.displayName=_t(Yn,ct,"GeneratorFunction"),U.isGeneratorFunction=function(un){var fn=typeof un=="function"&&un.constructor;return!!fn&&(fn===_n||(fn.displayName||fn.name)==="GeneratorFunction")},U.mark=function(un){return Object.setPrototypeOf?Object.setPrototypeOf(un,Yn):(un.__proto__=Yn,_t(un,ct,"GeneratorFunction")),un.prototype=Object.create($n),un},U.awrap=function(un){return{__await:un}},Tn(Gn.prototype),_t(Gn.prototype,Ke,function(){return this}),U.AsyncIterator=Gn,U.async=function(un,fn,Bn,Hn,yr){yr===void 0&&(yr=Promise);var zr=new Gn(qe(un,fn,Bn,Hn),yr);return U.isGeneratorFunction(fn)?zr:zr.next().then(function(Zr){return Zr.done?Zr.value:zr.next()})},Tn($n),_t($n,ct,"Generator"),_t($n,Ye,function(){return this}),_t($n,"toString",function(){return"[object Generator]"}),U.keys=function(un){var fn=Object(un),Bn=[];for(var Hn in fn)Bn.push(Hn);return Bn.reverse(),function yr(){for(;Bn.length;){var zr=Bn.pop();if(zr in fn)return yr.value=zr,yr.done=!1,yr}return yr.done=!0,yr}},U.values=Wt,pn.prototype={constructor:pn,reset:function(fn){if(this.prev=0,this.next=0,this.sent=this._sent=C,this.done=!1,this.delegate=null,this.method="next",this.arg=C,this.tryEntries.forEach(Mr),!fn)for(var Bn in this)Bn.charAt(0)==="t"&&fe.call(this,Bn)&&!isNaN(+Bn.slice(1))&&(this[Bn]=C)},stop:function(){this.done=!0;var fn=this.tryEntries[0].completion;if(fn.type==="throw")throw fn.arg;return this.rval},dispatchException:function(fn){if(this.done)throw fn;var Bn=this;function Hn(Ss,Os){return Zr.type="throw",Zr.arg=fn,Bn.next=Ss,Os&&(Bn.method="next",Bn.arg=C),!!Os}for(var yr=this.tryEntries.length-1;yr>=0;--yr){var zr=this.tryEntries[yr],Zr=zr.completion;if(zr.tryLoc==="root")return Hn("end");if(zr.tryLoc<=this.prev){var Ni=fe.call(zr,"catchLoc"),as=fe.call(zr,"finallyLoc");if(Ni&&as){if(this.prev<zr.catchLoc)return Hn(zr.catchLoc,!0);if(this.prev<zr.finallyLoc)return Hn(zr.finallyLoc)}else if(Ni){if(this.prev<zr.catchLoc)return Hn(zr.catchLoc,!0)}else{if(!as)throw Error("try statement without catch or finally");if(this.prev<zr.finallyLoc)return Hn(zr.finallyLoc)}}}},abrupt:function(fn,Bn){for(var Hn=this.tryEntries.length-1;Hn>=0;--Hn){var yr=this.tryEntries[Hn];if(yr.tryLoc<=this.prev&&fe.call(yr,"finallyLoc")&&this.prev<yr.finallyLoc){var zr=yr;break}}zr&&(fn==="break"||fn==="continue")&&zr.tryLoc<=Bn&&Bn<=zr.finallyLoc&&(zr=null);var Zr=zr?zr.completion:{};return Zr.type=fn,Zr.arg=Bn,zr?(this.method="next",this.next=zr.finallyLoc,bt):this.complete(Zr)},complete:function(fn,Bn){if(fn.type==="throw")throw fn.arg;return fn.type==="break"||fn.type==="continue"?this.next=fn.arg:fn.type==="return"?(this.rval=this.arg=fn.arg,this.method="return",this.next="end"):fn.type==="normal"&&Bn&&(this.next=Bn),bt},finish:function(fn){for(var Bn=this.tryEntries.length-1;Bn>=0;--Bn){var Hn=this.tryEntries[Bn];if(Hn.finallyLoc===fn)return this.complete(Hn.completion,Hn.afterLoc),Mr(Hn),bt}},catch:function(fn){for(var Bn=this.tryEntries.length-1;Bn>=0;--Bn){var Hn=this.tryEntries[Bn];if(Hn.tryLoc===fn){var yr=Hn.completion;if(yr.type==="throw"){var zr=yr.arg;Mr(Hn)}return zr}}throw Error("illegal catch attempt")},delegateYield:function(fn,Bn,Hn){return this.delegate={iterator:Wt(fn),resultName:Bn,nextLoc:Hn},this.method==="next"&&(this.arg=C),bt}},U}function Ne(C,U,Q,fe,de,Ce,Ye){try{var Ke=C[Ce](Ye),ct=Ke.value}catch(_t){return void Q(_t)}Ke.done?U(ct):Promise.resolve(ct).then(fe,de)}function Je(C){return function(){var U=this,Q=arguments;return new Promise(function(fe,de){var Ce=C.apply(U,Q);function Ye(ct){Ne(Ce,fe,de,Ye,Ke,"next",ct)}function Ke(ct){Ne(Ce,fe,de,Ye,Ke,"throw",ct)}Ye(void 0)})}}function pt(C,U){return St(C)||ut(C,U)||Jt(C,U)||ot()}function ot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jt(C,U){if(C){if(typeof C=="string")return Qt(C,U);var Q={}.toString.call(C).slice(8,-1);return Q==="Object"&&C.constructor&&(Q=C.constructor.name),Q==="Map"||Q==="Set"?Array.from(C):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?Qt(C,U):void 0}}function Qt(C,U){(U==null||U>C.length)&&(U=C.length);for(var Q=0,fe=Array(U);Q<U;Q++)fe[Q]=C[Q];return fe}function ut(C,U){var Q=C==null?null:typeof Symbol<"u"&&C[Symbol.iterator]||C["@@iterator"];if(Q!=null){var fe,de,Ce,Ye,Ke=[],ct=!0,_t=!1;try{if(Ce=(Q=Q.call(C)).next,U!==0)for(;!(ct=(fe=Ce.call(Q)).done)&&(Ke.push(fe.value),Ke.length!==U);ct=!0);}catch(qe){_t=!0,de=qe}finally{try{if(!ct&&Q.return!=null&&(Ye=Q.return(),Object(Ye)!==Ye))return}finally{if(_t)throw de}}return Ke}}function St(C){if(Array.isArray(C))return C}function Lt(C,U){return U||(U=C.slice(0)),Object.freeze(Object.defineProperties(C,{raw:{value:Object.freeze(U)}}))}function Ue(C,U){var Q=Object.keys(C);if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(C);U&&(fe=fe.filter(function(de){return Object.getOwnPropertyDescriptor(C,de).enumerable})),Q.push.apply(Q,fe)}return Q}function Ut(C){for(var U=1;U<arguments.length;U++){var Q=arguments[U]!=null?arguments[U]:{};U%2?Ue(Object(Q),!0).forEach(function(fe){Ot(C,fe,Q[fe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(Q)):Ue(Object(Q)).forEach(function(fe){Object.defineProperty(C,fe,Object.getOwnPropertyDescriptor(Q,fe))})}return C}function Ot(C,U,Q){return(U=rn(U))in C?Object.defineProperty(C,U,{value:Q,enumerable:!0,configurable:!0,writable:!0}):C[U]=Q,C}function rn(C){var U=$t(C,"string");return Dt(U)=="symbol"?U:U+""}function $t(C,U){if(Dt(C)!="object"||!C)return C;var Q=C[Symbol.toPrimitive];if(Q!==void 0){var fe=Q.call(C,U);if(Dt(fe)!="object")return fe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(C)}var sn={WaitingAuthentication:"WAITING_AUTH",TryOnLoaded:"MODEL_LOADED",ScreenShotTaken:"SCREENSHOT_TAKEN",WebcamStopped:"WEBCAM_STOPPED"},lt=Ut(Ut({},me.TryOnBaseProviderReceivedMessage),sn),Zt={StartAuthenticationTryOn:"AUTH",LoadTryOn:"LOAD_MODEL",LoadHands:"LOAD_HANDS",TakeScreenshot:"TAKE_SCREENSHOT",StopWebcam:"STOP_WEBCAM"},zt=Ut(Ut({},me.TryOnBaseProviderResponseMessage),Zt),Le=Be().div(Pe||(Pe=Lt([`
	position: fixed;
	background-color: rgba(0, 0, 0, 0.7);
	left: 0px;
	top: 0px;
	width: 100%;
	height: 100dvh;
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;
	overflow: auto;
	z-index: 12;
	border-radius: 10px;
`]))),Mt=Be().div(Se||(Se=Lt([`
	display: grid;
	position: relative;
	width: 550px;
	background-color: white;
	border-radius: 10px;
	overflow: hidden;
`]))),Rt=Be().div(ee||(ee=Lt([`
	position: fixed;
	background-color: rgba(0, 0, 0, 0.7);
	left: 0px;
	top: 0px;
	width: 100%;
	height: 100%;
	display: flex;
	flex-direction: row;
	justify-content: center;
	align-items: center;
	overflow: auto;
	z-index: 12;
	border-radius: 10px;
`]))),tt=Be().button(Qe||(Qe=Lt([`
	position: absolute;
	top: 10px;
	right: 10px;
	background-color: transparent;
	border: none;
	color: black;
	font-size: 20px;
	cursor: pointer;
`]))),We=function(U){console.log("DeepAR props.fineTuningSettings",U.fineTuningSettings);var Q=(0,we.useInternalState)(),fe=(0,se.useRef)(Q);fe.current=Q,fe.current.state.environment;var de=(0,se.useState)({}),Ce=pt(de,2),Ye=Ce[0],Ke=Ce[1],ct=(0,ce.useZakekeTryOn)(),_t=ct.tryon,qe=ct.setTryon,ht=(0,se.useState)(null),Pt=pt(ht,2),xt=Pt[0],Ge=Pt[1],en=(0,se.useRef)();en.current=xt;var bt=B().useState(""),Vt=pt(bt,2),_n=Vt[0],Yn=Vt[1],or=window.innerWidth<=768;(0,se.useEffect)(function(){qe(Ut(Ut({},_t),{},{closeFrame:function(){var Gn;return _t==null||(Gn=_t.setVisible)===null||Gn===void 0?void 0:Gn.call(_t,!1)},takeScreenshot:function(){return lr(en.current,zt.TakeScreenshot,null)},switchToPDTool:function(){console.log("switchToPDTool")},switchToTryOn:function(){console.log("switchToTryOn")},startPupillaryDistance:function(Gn){console.log("startPupillaryDistance")}}))},[]),(0,se.useEffect)(function(){var Tn,Gn;switch(Ye.type){case lt.Start:break;case lt.WaitingAuthentication:lr(xt,zt.StartAuthenticationTryOn,{token:Zakeke.config.deepARSettings.token});break;case lt.AuthSuccessful:lr(xt,zt.LoadTryOn,{glb:U.obj,settings:U.fineTuningSettings});break;case lt.TryOnLoaded:(Tn=U.onLoaded)===null||Tn===void 0||Tn.call(U);break;case lt.WebcamError:U.onWebcamError();break;case lt.WebcamStopped:(Gn=U.onClose)===null||Gn===void 0||Gn.call(U);break}},[Ye]);var lr=function(Gn,tr,pr){Gn.postMessage(Ut({type:tr},pr),"*")},Jn=function(Gn){Ke(Gn.data)},$n=function(){var Tn=Je(at().mark(function Gn(){var tr,pr,Br,Mr,pn,Wt,un,fn,Bn,Hn,yr;return at().wrap(function(Zr){for(;;)switch(Zr.prev=Zr.next){case 0:return tr=new FormData,Zr.next=3,U.obj.arrayBuffer();case 3:return pr=Zr.sent,Br=Math.random().toString(36).substring(7),tr.append("blob",new Blob([pr]),"model_".concat(Br,".glb")),Zr.prev=6,Zr.next=9,fetch(Zakeke.config.baseApiUrl+"tryonassetupload/asset-upload",{method:"POST",body:tr,headers:{Accept:"application/json",Authorization:"Bearer "+window.token}});case 9:if(Mr=Zr.sent,!Mr.ok){Zr.next=22;break}return Zr.next=13,Mr.json();case 13:fn=Zr.sent,Bn=fn,Hn=new URLSearchParams({positionX:(pn=U.fineTuningSettings.position)===null||pn===void 0?void 0:pn.x.toString(),positionY:(Wt=U.fineTuningSettings.position)===null||Wt===void 0?void 0:Wt.y.toString(),positionZ:(un=U.fineTuningSettings.position)===null||un===void 0?void 0:un.z.toString(),rotationX:U.fineTuningSettings.rotation.x.toString(),rotationY:U.fineTuningSettings.rotation.y.toString(),rotationZ:U.fineTuningSettings.rotation.z.toString(),scale:U.fineTuningSettings.scale.toString(),environment:U.fineTuningSettings.environment.toString()}),yr="".concat(Bn,"&").concat(Hn.toString()),or||(yr+="&isDesktopDeepARUrl=true"),console.log(">>>>>>>>> finalUrl",yr),Yn(yr),Zr.next=23;break;case 22:console.error("Error uploading model",Mr);case 23:Zr.next=28;break;case 25:Zr.prev=25,Zr.t0=Zr.catch(6),console.error("Error uploading model",Zr.t0);case 28:case"end":return Zr.stop()}},Gn,null,[[6,25]])}));return function(){return Tn.apply(this,arguments)}}();return(0,se.useEffect)(function(){_n===""&&!or&&$n()},[_n]),B().createElement(B().Fragment,null,or?B().createElement(Rt,null,B().createElement(De.TryOnFrame,{providerTitle:"deepAR",providerUrl:Zakeke.config.deepARSettings.url,onReady:function(Gn){var tr;Ge(Gn),(tr=U.onReady)===null||tr===void 0||tr.call(U)},outMessageHandler:Jn.bind(wt)})):B().createElement(Le,{className:"DeepAR-tryon ".concat(U.className?U.className:"")},B().createElement(Mt,null,B().createElement(tt,{onClick:U.onClose},"X"),_n!==""&&B().createElement(ae.default,{url:_n}))))}},"./src/components/tryon/tryOnProviders/tryOnMazing.tsx":(je,be,K)=>{K.r(be),K.d(be,{MazingPupillaryDistance:()=>zt,MazingPupillaryDistanceResponseMessage:()=>sn,MazingPupillaryDistanceStateReceivedMessage:()=>rn,MazingTryOn:()=>Zt,MazingTryOnReceivedMessage:()=>Lt,MazingTryOnResponseMessage:()=>Ut});var se=K("react"),B=K.n(se),Fe=K("styled-components"),Be=K.n(Fe),ce=K("./src/components/tryon/tryOnModels.ts"),me=K("./src/hooks/tryonContext.ts"),we=K("./src/components/tryon/tryOnFrame.tsx"),ae=K("./src/state/provider.tsx"),De,Pe=void 0;function Se(Le){"@babel/helpers - typeof";return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Mt){return typeof Mt}:function(Mt){return Mt&&typeof Symbol=="function"&&Mt.constructor===Symbol&&Mt!==Symbol.prototype?"symbol":typeof Mt},Se(Le)}function ee(Le,Mt){return Ne(Le)||at(Le,Mt)||wt(Le,Mt)||Qe()}function Qe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wt(Le,Mt){if(Le){if(typeof Le=="string")return Dt(Le,Mt);var Rt={}.toString.call(Le).slice(8,-1);return Rt==="Object"&&Le.constructor&&(Rt=Le.constructor.name),Rt==="Map"||Rt==="Set"?Array.from(Le):Rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Rt)?Dt(Le,Mt):void 0}}function Dt(Le,Mt){(Mt==null||Mt>Le.length)&&(Mt=Le.length);for(var Rt=0,tt=Array(Mt);Rt<Mt;Rt++)tt[Rt]=Le[Rt];return tt}function at(Le,Mt){var Rt=Le==null?null:typeof Symbol<"u"&&Le[Symbol.iterator]||Le["@@iterator"];if(Rt!=null){var tt,We,C,U,Q=[],fe=!0,de=!1;try{if(C=(Rt=Rt.call(Le)).next,Mt!==0)for(;!(fe=(tt=C.call(Rt)).done)&&(Q.push(tt.value),Q.length!==Mt);fe=!0);}catch(Ce){de=!0,We=Ce}finally{try{if(!fe&&Rt.return!=null&&(U=Rt.return(),Object(U)!==U))return}finally{if(de)throw We}}return Q}}function Ne(Le){if(Array.isArray(Le))return Le}function Je(Le,Mt){return Mt||(Mt=Le.slice(0)),Object.freeze(Object.defineProperties(Le,{raw:{value:Object.freeze(Mt)}}))}function pt(Le,Mt){var Rt=Object.keys(Le);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(Le);Mt&&(tt=tt.filter(function(We){return Object.getOwnPropertyDescriptor(Le,We).enumerable})),Rt.push.apply(Rt,tt)}return Rt}function ot(Le){for(var Mt=1;Mt<arguments.length;Mt++){var Rt=arguments[Mt]!=null?arguments[Mt]:{};Mt%2?pt(Object(Rt),!0).forEach(function(tt){Jt(Le,tt,Rt[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Le,Object.getOwnPropertyDescriptors(Rt)):pt(Object(Rt)).forEach(function(tt){Object.defineProperty(Le,tt,Object.getOwnPropertyDescriptor(Rt,tt))})}return Le}function Jt(Le,Mt,Rt){return(Mt=Qt(Mt))in Le?Object.defineProperty(Le,Mt,{value:Rt,enumerable:!0,configurable:!0,writable:!0}):Le[Mt]=Rt,Le}function Qt(Le){var Mt=ut(Le,"string");return Se(Mt)=="symbol"?Mt:Mt+""}function ut(Le,Mt){if(Se(Le)!="object"||!Le)return Le;var Rt=Le[Symbol.toPrimitive];if(Rt!==void 0){var tt=Rt.call(Le,Mt);if(Se(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Mt==="string"?String:Number)(Le)}var St={WaitingAuthentication:"WAITING_AUTH",TryOnLoaded:"MODEL_LOADED",ScreenShotTaken:"SCREENSHOT_TAKEN",WebcamStopped:"WEBCAM_STOPPED"},Lt=ot(ot({},ce.TryOnBaseProviderReceivedMessage),St),Ue={StartAuthenticationTryOn:"AUTH_TRY_ON",LoadTryOn:"LOAD_MODEL",TakeScreenshot:"TAKE_SCREENSHOT",StopWebcam:"STOP_WEBCAM"},Ut=ot(ot({},ce.TryOnBaseProviderResponseMessage),Ue),Ot={PDLoaded:"PD_LOADED",PDUpdated:"NEW_PD",PDDataNotFoundError:"PD_ERROR",WebcamError:"WEBCAM_ERROR",PDCountdown:"PD_COUNTDOWN",WebcamStopped:"WEBCAM_STOPPED"},rn=ot(ot({},ce.PupillaryDistanceBaseProviderReceivedMessage),Ot),$t={StartAuthenticationPD:"AUTH_TRY_ON",LoadPD:"LOAD_PD",StartPD:"START_PD",StopWebcam:"STOP_WEBCAM"},sn=ot(ot({},ce.PupillaryDistanceBaseProviderResponseMessage),$t),lt=Be().div(De||(De=Je([`
	position: absolute;
	background-color: white;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	display: flex;
`]))),Zt=function(Mt){var Rt=(0,ae.useInternalState)(),tt=(0,se.useRef)(Rt);tt.current=Rt;var We=tt.current.state.environment,C=(0,se.useState)({}),U=ee(C,2),Q=U[0],fe=U[1],de=(0,me.useZakekeTryOn)(),Ce=de.tryon,Ye=de.setTryon;de.tryOnPickedMode,de.setTryOnPickedMode;var Ke=(0,se.useState)(null),ct=ee(Ke,2),_t=ct[0],qe=ct[1],ht=(0,se.useRef)();ht.current=_t;var Pt=(0,ce.parseJSON)(Mt.customer.settings).uid,xt=(0,ce.parseJSON)(Mt.product.settings).uid,Ge=(0,se.useState)(!1),en=ee(Ge,2);en[0];var bt=en[1];(0,se.useEffect)(function(){Ye(ot(ot({},Ce),{},{closeFrame:function(){return Vt(ht.current,Ut.StopWebcam,null)},takeScreenshot:function(){return Vt(ht.current,Ut.TakeScreenshot,null)},switchToPDTool:function(){var or;bt(!0),Vt(ht.current,sn.LoadPD,null),(or=Ce.changeMode)===null||or===void 0||or.call(Ce,ce.TryOnMode.PDTool)},switchToTryOn:function(){var or;bt(!1),Vt(ht.current,Ut.LoadTryOn,{glb:Mt.obj,settings:Mt.fineTuningSettings}),(or=Ce.changeMode)===null||or===void 0||or.call(Ce,ce.TryOnMode.TryOn)},startPupillaryDistance:function(or){Vt(ht.current,sn.StartPD,{seconds:or})}}))},[]),(0,se.useEffect)(function(){var Yn,or,lr,Jn,$n,Tn;switch(Q.type){case Lt.Start:break;case Lt.WaitingAuthentication:Vt(_t,Ut.StartAuthenticationTryOn,{customer_uid:Pt,product_uid:xt});break;case Lt.AuthSuccessful:Vt(_t,Ut.LoadTryOn,{glb:Mt.obj,settings:Mt.fineTuningSettings});break;case Lt.TryOnLoaded:(Yn=Mt.onLoaded)===null||Yn===void 0||Yn.call(Mt);break;case rn.PDLoaded:(or=Mt.onLoaded)===null||or===void 0||or.call(Mt);break;case rn.PDUpdated:We.setPDDistance((lr=Q.value)===null||lr===void 0?void 0:lr.pd),(Jn=Mt.onPDUpdated)===null||Jn===void 0||Jn.call(Mt,($n=Q.value)===null||$n===void 0?void 0:$n.pd);break;case rn.PDDataNotFoundError:break;case Lt.WebcamError:Mt.onWebcamError();break;case Lt.WebcamStopped:(Tn=Mt.onClose)===null||Tn===void 0||Tn.call(Mt);break}},[Q]);var Vt=function(or,lr,Jn){or.postMessage({type:lr,value:Jn},"*")},_n=function(or){fe(or.data)};return B().createElement(lt,{className:"mazing-tryon ".concat(Mt.className?Mt.className:"")},B().createElement(we.TryOnFrame,{providerTitle:"Mazing",providerUrl:Zakeke.config.mazingSettings.url,onReady:function(or){var lr;qe(or),(lr=Mt.onReady)===null||lr===void 0||lr.call(Mt)},outMessageHandler:_n.bind(Pe)}))},zt=function(Mt){var Rt=(0,se.useState)({}),tt=ee(Rt,2),We=tt[0],C=tt[1],U=(0,me.useZakekeTryOn)(),Q=U.tryon,fe=U.setTryon,de=(0,ae.useInternalState)(),Ce=(0,se.useRef)(de);Ce.current=de;var Ye=Ce.current.state.environment,Ke=(0,se.useState)(null),ct=ee(Ke,2),_t=ct[0],qe=ct[1],ht=(0,se.useRef)();ht.current=_t;var Pt=(0,ce.parseJSON)(Mt.customer.settings).uid,xt=(0,ce.parseJSON)(Mt.product.settings).uid;(0,se.useEffect)(function(){fe(ot(ot({},Q),{},{closeFrame:function(){return Ge(ht.current,sn.StopWebcam,null)},switchToPDTool:function(){console.log("switchToPDTool not active")},switchToTryOn:function(){console.log("switchToTryOn not active")},takeScreenshot:function(){return console.log("takeScreenshot not active")},startPupillaryDistance:function(Vt){return Ge(ht.current,sn.StartPD,{seconds:Vt})}}))},[]),(0,se.useEffect)(function(){var bt,Vt,_n;switch(We.type){case rn.Start:break;case rn.WaitingAuthentication:Ge(_t,sn.StartAuthenticationPD,{customer_uid:Pt,product_uid:xt});break;case rn.AuthSuccessful:Ge(_t,sn.LoadPD,{});break;case rn.PDLoaded:(bt=Mt.onLoaded)===null||bt===void 0||bt.call(Mt);break;case rn.PDUpdated:Ye.setPDDistance(We.value.pd),(Vt=Mt.onPDUpdated)===null||Vt===void 0||Vt.call(Mt,We.value.pd);break;case rn.PDDataNotFoundError:break;case rn.WebcamError:Mt.onWebcamError();break;case rn.WebcamStopped:(_n=Mt.onClose)===null||_n===void 0||_n.call(Mt);break}},[We]);var Ge=function(Vt,_n,Yn){Vt.postMessage({type:_n,value:Yn},"*")},en=function(Vt){var _n;(_n=Vt.data)!==null&&_n!==void 0&&_n.type&&C(Vt.data)};return B().createElement(lt,{className:"mazing-pd ".concat(Mt.className?Mt.className:"")},B().createElement(we.TryOnFrame,{providerTitle:"mazing",providerUrl:Zakeke.config.mazingSettings.url,onReady:function(Vt){var _n;qe(Vt),(_n=Mt.onReady)===null||_n===void 0||_n.call(Mt)},outMessageHandler:en.bind(Pe)}))}},"./src/components/tryon/tryOnViewer.tsx":(je,be,K)=>{K.r(be),K.d(be,{PupillaryDistanceView:()=>Zt,TryOnView:()=>lt,ZakekeTryOnViewer:()=>sn});var se=K("react"),B=K.n(se),Fe=K("styled-components"),Be=K.n(Fe),ce=K("./src/hooks/tryonContext.ts"),me=K("./src/models.ts"),we=K("./src/state/provider.tsx"),ae=K("./src/components/tryon/tryOnModels.ts"),De=K("./src/components/tryon/tryOnProviders/tryOnBanuba.tsx"),Pe=K("./src/components/tryon/tryOnProviders/tryOnDeepAR.tsx"),Se=K("./src/components/tryon/tryOnProviders/tryOnMazing.tsx");function ee(zt){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Le){return typeof Le}:function(Le){return Le&&typeof Symbol=="function"&&Le.constructor===Symbol&&Le!==Symbol.prototype?"symbol":typeof Le},ee(zt)}var Qe,wt,Dt;function at(zt,Le){var Mt=Object.keys(zt);if(Object.getOwnPropertySymbols){var Rt=Object.getOwnPropertySymbols(zt);Le&&(Rt=Rt.filter(function(tt){return Object.getOwnPropertyDescriptor(zt,tt).enumerable})),Mt.push.apply(Mt,Rt)}return Mt}function Ne(zt){for(var Le=1;Le<arguments.length;Le++){var Mt=arguments[Le]!=null?arguments[Le]:{};Le%2?at(Object(Mt),!0).forEach(function(Rt){Je(zt,Rt,Mt[Rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(zt,Object.getOwnPropertyDescriptors(Mt)):at(Object(Mt)).forEach(function(Rt){Object.defineProperty(zt,Rt,Object.getOwnPropertyDescriptor(Mt,Rt))})}return zt}function Je(zt,Le,Mt){return(Le=pt(Le))in zt?Object.defineProperty(zt,Le,{value:Mt,enumerable:!0,configurable:!0,writable:!0}):zt[Le]=Mt,zt}function pt(zt){var Le=ot(zt,"string");return ee(Le)=="symbol"?Le:Le+""}function ot(zt,Le){if(ee(zt)!="object"||!zt)return zt;var Mt=zt[Symbol.toPrimitive];if(Mt!==void 0){var Rt=Mt.call(zt,Le);if(ee(Rt)!="object")return Rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Le==="string"?String:Number)(zt)}function Jt(zt,Le){return Ue(zt)||Lt(zt,Le)||ut(zt,Le)||Qt()}function Qt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ut(zt,Le){if(zt){if(typeof zt=="string")return St(zt,Le);var Mt={}.toString.call(zt).slice(8,-1);return Mt==="Object"&&zt.constructor&&(Mt=zt.constructor.name),Mt==="Map"||Mt==="Set"?Array.from(zt):Mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mt)?St(zt,Le):void 0}}function St(zt,Le){(Le==null||Le>zt.length)&&(Le=zt.length);for(var Mt=0,Rt=Array(Le);Mt<Le;Mt++)Rt[Mt]=zt[Mt];return Rt}function Lt(zt,Le){var Mt=zt==null?null:typeof Symbol<"u"&&zt[Symbol.iterator]||zt["@@iterator"];if(Mt!=null){var Rt,tt,We,C,U=[],Q=!0,fe=!1;try{if(We=(Mt=Mt.call(zt)).next,Le!==0)for(;!(Q=(Rt=We.call(Mt)).done)&&(U.push(Rt.value),U.length!==Le);Q=!0);}catch(de){fe=!0,tt=de}finally{try{if(!Q&&Mt.return!=null&&(C=Mt.return(),Object(C)!==C))return}finally{if(fe)throw tt}}return U}}function Ue(zt){if(Array.isArray(zt))return zt}function Ut(zt,Le){return Le||(Le=zt.slice(0)),Object.freeze(Object.defineProperties(zt,{raw:{value:Object.freeze(Le)}}))}var Ot=Be().div(Qe||(Qe=Ut([`
	position: absolute;
	width: 100%;
	height: 100%;
	background-color: black;
	opacity: 0.5;
	left: 0;
	top: 0;
	z-index: 3;
`]))),rn=Be().div(wt||(wt=Ut([`
	width: 100%;
	height: 100%;
	position: fixed;
	z-index: 6;
	left: 0%;
	top: 0%;
`]))),$t=Be().div(Dt||(Dt=Ut([`
	width: 100%;
	height: 100%;
	position: fixed;
	background-color: white;
	z-index: 6;
	left: 0%;
	top: 0%;
`]))),sn=(0,se.forwardRef)(function(zt,Le){var Mt;console.log("props ZakekeTryonviewer",zt);var Rt=(0,we.useInternalState)(),tt=(0,se.useRef)(Rt);tt.current=Rt;var We=(Mt=tt.current)===null||Mt===void 0?void 0:Mt.state.environment,C=(0,se.useState)({}),U=Jt(C,2),Q=U[0],fe=U[1],de=(0,se.useState)(ae.TryOnMode.TryOn),Ce=Jt(de,2),Ye=Ce[0],Ke=Ce[1],ct=(0,se.useState)(!1),_t=Jt(ct,2),qe=_t[0],ht=_t[1],Pt={tryon:Q,setTryon:fe,tryOnPickedMode:Ye,setTryOnPickedMode:Ke,tryOnVisibility:qe,setTryOnVisibility:ht},xt=(0,se.useState)({}),Ge=Jt(xt,2),en=Ge[0],bt=Ge[1],Vt=(0,se.useState)(!1),_n=Jt(Vt,2),Yn=_n[0],or=_n[1],lr=(0,se.useState)(!1),Jn=Jt(lr,2),$n=Jn[0],Tn=Jn[1],Gn=function(pr,Br){var Mr;We.tryOnCountView(pr,Br,Ye),(Mr=zt.onReady)===null||Mr===void 0||Mr.call(zt)};return(0,se.useEffect)(function(){fe(Ne(Ne({},Q),{},{mode:Ye,changeMode:function(pr){Ke(pr)},visible:qe,setVisible:function(pr){ht(pr)}}))},[]),(0,se.useEffect)(function(){or(!!zt.switchable)},[zt.switchable]),(0,se.useMemo)(function(){fe(Ne(Ne({},Q),{},{mode:Ye}))},[Ye]),(0,se.useEffect)(function(){qe&&($n&&!Yn&&Tn(!1),console.log("fetching data"),We.exportTryOnMeshToGlb().then(function(tr){if(We.tryOnSellerSettings){var pr=We.tryOnProductSettings,Br=We.tryOnSellerSettings;bt({product:pr,customer:Br,provider:pr.providerID,mode:Ye,obj:tr,settings:We.tryOnMeshVisibleSettings}),setTimeout(function(){Tn(!0)},500)}}))},[Ye,qe]),(0,se.useImperativeHandle)(Le,function(){return{closeFrame:Q.closeFrame,takeScreenshot:Q.takeScreenshot,switchToPDTool:Q.switchToPDTool,switchToTryOn:Q.switchToTryOn,startPupillaryDistance:Q.startPupillaryDistance,mode:Q.mode,changeMode:Q.changeMode,visible:Q.visible,setVisible:Q.setVisible}},[Q]),B().createElement(ce.TryOnContext.Provider,{value:Pt},qe&&B().createElement(B().Fragment,null,$n&&Ye===ae.TryOnMode.PDTool&&!Yn&&B().createElement(Zt,{className:"tryon-pd-tool"+(zt.className?" "+zt.className:""),provider:en.provider,product:en.product,customer:en.customer,onReady:function(){return Gn(en.customer.sellerID,en.product.providerID)},onLoaded:zt.onLoaded,onPDUpdated:zt.onPDUpdated,onClose:zt.onClose,onWebcamError:zt.onWebcamError}),$n&&(Ye===ae.TryOnMode.TryOn||Yn)&&B().createElement(lt,{className:"tryon-view-tool"+(zt.className?" "+zt.className:""),provider:en.product.providerID,type:en.product.typeID,obj:en.obj,settings:We.tryOnMeshVisibleSettings,product:en.product,customer:en.customer,onPDUpdated:zt.onPDUpdated,onReady:function(){return Gn(en.customer.sellerID,en.product.providerID)},onLoaded:zt.onLoaded,onClose:zt.onClose,onWebcamError:zt.onWebcamError}),zt.children,B().createElement(Ot,null)))}),lt=function(Le){var Mt;console.log(JSON.stringify(Le,null,2)+" tryonview");var Rt=(0,we.useInternalState)(),tt=(0,se.useRef)(Rt);tt.current=Rt;var We=(Mt=tt.current)===null||Mt===void 0?void 0:Mt.state.environment,C=function(){var Q,fe=(Q=We.tryOnProvidersSettings)!==null&&Q!==void 0?Q:{list:{}},de=me.TryOnProvider.NotSelected;switch(console.log("currentProvider",de),fe&&fe.list&&Le.type.toString()in fe.list&&(de=fe.list[Le.type.toString()]),de){case me.TryOnProvider.Mazing:return B().createElement(Se.MazingTryOn,{obj:Le.obj,className:Le.className,product:Le.product,customer:Le.customer,fineTuningSettings:Le.settings?Le.settings:me.DefaultMazingFineTuningSettings,onReady:Le.onReady,onLoaded:Le.onLoaded,onClose:Le.onClose,onPDUpdated:Le.onPDUpdated,onWebcamError:Le.onWebcamError});case me.TryOnProvider.Banuba:return B().createElement(De.BanubaTryOn,{obj:Le.obj,className:Le.className,product:Le.product,customer:Le.customer,fineTuningSettings:Le.settings?Le.settings:me.DefaultBanubaFineTuningSettings,onReady:Le.onReady,onLoaded:Le.onLoaded,onClose:Le.onClose,onPDUpdated:Le.onPDUpdated,onWebcamError:Le.onWebcamError});case me.TryOnProvider.DeepAR:return B().createElement(Pe.DeepARTryOn,{obj:Le.obj,className:Le.className,product:Le.product,customer:Le.customer,fineTuningSettings:Le.settings?Le.settings:me.DefaultDeepARFineTuningSettings,onReady:Le.onReady,onLoaded:Le.onLoaded,onClose:Le.onClose,onPDUpdated:Le.onPDUpdated,onWebcamError:Le.onWebcamError});default:return B().createElement("div",null,"Unsupported Type")}};return B().createElement(rn,{className:Le.className?Le.className:" tryon-viewer"},C())},Zt=function(Le){var Mt=function(){switch(Le.provider){case me.TryOnProvider.Mazing:return B().createElement(Se.MazingPupillaryDistance,{product:Le.product,customer:Le.customer,onPDUpdated:Le.onPDUpdated,onReady:Le.onReady,onLoaded:Le.onLoaded,className:Le.className,onClose:Le.onClose,onWebcamError:Le.onWebcamError});default:return B().createElement("div",null,"Unsupported Provider")}};return B().createElement($t,{className:Le.className},Mt())}},"./src/environment.tsx":(je,be,K)=>{K.r(be),K.d(be,{ZakekeEnvironment:()=>tt});var se=K("./node_modules/@zakeke/zakeke-3d-core/dist/index.js"),B=K("./node_modules/lodash/lodash.js"),Fe=K.n(B),Be=K("./src/index.tsx"),ce=K("../../libs/pricingRuleBase/DesignPriceCalculatorRuleBased.tsx"),me=K("./src/api.ts"),we=K("./src/exceptions.tsx"),ae=K("./src/fontsManager.ts"),De=K("./src/helpers.tsx"),Pe=K("./src/imageUploadTask.ts"),Se=K("./src/integrations/Integration.ts"),ee=K("./src/integrations/helpers.ts"),Qe=K("./src/models.ts"),wt=K("./node_modules/axios/lib/axios.js");function Dt(We,C){var U=Object.keys(We);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(We);C&&(Q=Q.filter(function(fe){return Object.getOwnPropertyDescriptor(We,fe).enumerable})),U.push.apply(U,Q)}return U}function at(We){for(var C=1;C<arguments.length;C++){var U=arguments[C]!=null?arguments[C]:{};C%2?Dt(Object(U),!0).forEach(function(Q){Le(We,Q,U[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(We,Object.getOwnPropertyDescriptors(U)):Dt(Object(U)).forEach(function(Q){Object.defineProperty(We,Q,Object.getOwnPropertyDescriptor(U,Q))})}return We}function Ne(We){return ot(We)||pt(We)||$t(We)||Je()}function Je(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pt(We){if(typeof Symbol<"u"&&We[Symbol.iterator]!=null||We["@@iterator"]!=null)return Array.from(We)}function ot(We){if(Array.isArray(We))return sn(We)}function Jt(We){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},Jt(We)}function Qt(We,C){return Lt(We)||St(We,C)||$t(We,C)||ut()}function ut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function St(We,C){var U=We==null?null:typeof Symbol<"u"&&We[Symbol.iterator]||We["@@iterator"];if(U!=null){var Q,fe,de,Ce,Ye=[],Ke=!0,ct=!1;try{if(de=(U=U.call(We)).next,C===0){if(Object(U)!==U)return;Ke=!1}else for(;!(Ke=(Q=de.call(U)).done)&&(Ye.push(Q.value),Ye.length!==C);Ke=!0);}catch(_t){ct=!0,fe=_t}finally{try{if(!Ke&&U.return!=null&&(Ce=U.return(),Object(Ce)!==Ce))return}finally{if(ct)throw fe}}return Ye}}function Lt(We){if(Array.isArray(We))return We}function Ue(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ue=function(){return C};var We,C={},U=Object.prototype,Q=U.hasOwnProperty,fe=Object.defineProperty||function(Wt,un,fn){Wt[un]=fn.value},de=typeof Symbol=="function"?Symbol:{},Ce=de.iterator||"@@iterator",Ye=de.asyncIterator||"@@asyncIterator",Ke=de.toStringTag||"@@toStringTag";function ct(Wt,un,fn){return Object.defineProperty(Wt,un,{value:fn,enumerable:!0,configurable:!0,writable:!0}),Wt[un]}try{ct({},"")}catch{ct=function(fn,Bn,Hn){return fn[Bn]=Hn}}function _t(Wt,un,fn,Bn){var Hn=un&&un.prototype instanceof bt?un:bt,yr=Object.create(Hn.prototype),zr=new Mr(Bn||[]);return fe(yr,"_invoke",{value:Gn(Wt,fn,zr)}),yr}function qe(Wt,un,fn){try{return{type:"normal",arg:Wt.call(un,fn)}}catch(Bn){return{type:"throw",arg:Bn}}}C.wrap=_t;var ht="suspendedStart",Pt="suspendedYield",xt="executing",Ge="completed",en={};function bt(){}function Vt(){}function _n(){}var Yn={};ct(Yn,Ce,function(){return this});var or=Object.getPrototypeOf,lr=or&&or(or(pn([])));lr&&lr!==U&&Q.call(lr,Ce)&&(Yn=lr);var Jn=_n.prototype=bt.prototype=Object.create(Yn);function $n(Wt){["next","throw","return"].forEach(function(un){ct(Wt,un,function(fn){return this._invoke(un,fn)})})}function Tn(Wt,un){function fn(Hn,yr,zr,Zr){var Ni=qe(Wt[Hn],Wt,yr);if(Ni.type!=="throw"){var as=Ni.arg,Ss=as.value;return Ss&&Jt(Ss)=="object"&&Q.call(Ss,"__await")?un.resolve(Ss.__await).then(function(Os){fn("next",Os,zr,Zr)},function(Os){fn("throw",Os,zr,Zr)}):un.resolve(Ss).then(function(Os){as.value=Os,zr(as)},function(Os){return fn("throw",Os,zr,Zr)})}Zr(Ni.arg)}var Bn;fe(this,"_invoke",{value:function(yr,zr){function Zr(){return new un(function(Ni,as){fn(yr,zr,Ni,as)})}return Bn=Bn?Bn.then(Zr,Zr):Zr()}})}function Gn(Wt,un,fn){var Bn=ht;return function(Hn,yr){if(Bn===xt)throw Error("Generator is already running");if(Bn===Ge){if(Hn==="throw")throw yr;return{value:We,done:!0}}for(fn.method=Hn,fn.arg=yr;;){var zr=fn.delegate;if(zr){var Zr=tr(zr,fn);if(Zr){if(Zr===en)continue;return Zr}}if(fn.method==="next")fn.sent=fn._sent=fn.arg;else if(fn.method==="throw"){if(Bn===ht)throw Bn=Ge,fn.arg;fn.dispatchException(fn.arg)}else fn.method==="return"&&fn.abrupt("return",fn.arg);Bn=xt;var Ni=qe(Wt,un,fn);if(Ni.type==="normal"){if(Bn=fn.done?Ge:Pt,Ni.arg===en)continue;return{value:Ni.arg,done:fn.done}}Ni.type==="throw"&&(Bn=Ge,fn.method="throw",fn.arg=Ni.arg)}}}function tr(Wt,un){var fn=un.method,Bn=Wt.iterator[fn];if(Bn===We)return un.delegate=null,fn==="throw"&&Wt.iterator.return&&(un.method="return",un.arg=We,tr(Wt,un),un.method==="throw")||fn!=="return"&&(un.method="throw",un.arg=new TypeError("The iterator does not provide a '"+fn+"' method")),en;var Hn=qe(Bn,Wt.iterator,un.arg);if(Hn.type==="throw")return un.method="throw",un.arg=Hn.arg,un.delegate=null,en;var yr=Hn.arg;return yr?yr.done?(un[Wt.resultName]=yr.value,un.next=Wt.nextLoc,un.method!=="return"&&(un.method="next",un.arg=We),un.delegate=null,en):yr:(un.method="throw",un.arg=new TypeError("iterator result is not an object"),un.delegate=null,en)}function pr(Wt){var un={tryLoc:Wt[0]};1 in Wt&&(un.catchLoc=Wt[1]),2 in Wt&&(un.finallyLoc=Wt[2],un.afterLoc=Wt[3]),this.tryEntries.push(un)}function Br(Wt){var un=Wt.completion||{};un.type="normal",delete un.arg,Wt.completion=un}function Mr(Wt){this.tryEntries=[{tryLoc:"root"}],Wt.forEach(pr,this),this.reset(!0)}function pn(Wt){if(Wt||Wt===""){var un=Wt[Ce];if(un)return un.call(Wt);if(typeof Wt.next=="function")return Wt;if(!isNaN(Wt.length)){var fn=-1,Bn=function Hn(){for(;++fn<Wt.length;)if(Q.call(Wt,fn))return Hn.value=Wt[fn],Hn.done=!1,Hn;return Hn.value=We,Hn.done=!0,Hn};return Bn.next=Bn}}throw new TypeError(Jt(Wt)+" is not iterable")}return Vt.prototype=_n,fe(Jn,"constructor",{value:_n,configurable:!0}),fe(_n,"constructor",{value:Vt,configurable:!0}),Vt.displayName=ct(_n,Ke,"GeneratorFunction"),C.isGeneratorFunction=function(Wt){var un=typeof Wt=="function"&&Wt.constructor;return!!un&&(un===Vt||(un.displayName||un.name)==="GeneratorFunction")},C.mark=function(Wt){return Object.setPrototypeOf?Object.setPrototypeOf(Wt,_n):(Wt.__proto__=_n,ct(Wt,Ke,"GeneratorFunction")),Wt.prototype=Object.create(Jn),Wt},C.awrap=function(Wt){return{__await:Wt}},$n(Tn.prototype),ct(Tn.prototype,Ye,function(){return this}),C.AsyncIterator=Tn,C.async=function(Wt,un,fn,Bn,Hn){Hn===void 0&&(Hn=Promise);var yr=new Tn(_t(Wt,un,fn,Bn),Hn);return C.isGeneratorFunction(un)?yr:yr.next().then(function(zr){return zr.done?zr.value:yr.next()})},$n(Jn),ct(Jn,Ke,"Generator"),ct(Jn,Ce,function(){return this}),ct(Jn,"toString",function(){return"[object Generator]"}),C.keys=function(Wt){var un=Object(Wt),fn=[];for(var Bn in un)fn.push(Bn);return fn.reverse(),function Hn(){for(;fn.length;){var yr=fn.pop();if(yr in un)return Hn.value=yr,Hn.done=!1,Hn}return Hn.done=!0,Hn}},C.values=pn,Mr.prototype={constructor:Mr,reset:function(un){if(this.prev=0,this.next=0,this.sent=this._sent=We,this.done=!1,this.delegate=null,this.method="next",this.arg=We,this.tryEntries.forEach(Br),!un)for(var fn in this)fn.charAt(0)==="t"&&Q.call(this,fn)&&!isNaN(+fn.slice(1))&&(this[fn]=We)},stop:function(){this.done=!0;var un=this.tryEntries[0].completion;if(un.type==="throw")throw un.arg;return this.rval},dispatchException:function(un){if(this.done)throw un;var fn=this;function Bn(as,Ss){return zr.type="throw",zr.arg=un,fn.next=as,Ss&&(fn.method="next",fn.arg=We),!!Ss}for(var Hn=this.tryEntries.length-1;Hn>=0;--Hn){var yr=this.tryEntries[Hn],zr=yr.completion;if(yr.tryLoc==="root")return Bn("end");if(yr.tryLoc<=this.prev){var Zr=Q.call(yr,"catchLoc"),Ni=Q.call(yr,"finallyLoc");if(Zr&&Ni){if(this.prev<yr.catchLoc)return Bn(yr.catchLoc,!0);if(this.prev<yr.finallyLoc)return Bn(yr.finallyLoc)}else if(Zr){if(this.prev<yr.catchLoc)return Bn(yr.catchLoc,!0)}else{if(!Ni)throw Error("try statement without catch or finally");if(this.prev<yr.finallyLoc)return Bn(yr.finallyLoc)}}}},abrupt:function(un,fn){for(var Bn=this.tryEntries.length-1;Bn>=0;--Bn){var Hn=this.tryEntries[Bn];if(Hn.tryLoc<=this.prev&&Q.call(Hn,"finallyLoc")&&this.prev<Hn.finallyLoc){var yr=Hn;break}}yr&&(un==="break"||un==="continue")&&yr.tryLoc<=fn&&fn<=yr.finallyLoc&&(yr=null);var zr=yr?yr.completion:{};return zr.type=un,zr.arg=fn,yr?(this.method="next",this.next=yr.finallyLoc,en):this.complete(zr)},complete:function(un,fn){if(un.type==="throw")throw un.arg;return un.type==="break"||un.type==="continue"?this.next=un.arg:un.type==="return"?(this.rval=this.arg=un.arg,this.method="return",this.next="end"):un.type==="normal"&&fn&&(this.next=fn),en},finish:function(un){for(var fn=this.tryEntries.length-1;fn>=0;--fn){var Bn=this.tryEntries[fn];if(Bn.finallyLoc===un)return this.complete(Bn.completion,Bn.afterLoc),Br(Bn),en}},catch:function(un){for(var fn=this.tryEntries.length-1;fn>=0;--fn){var Bn=this.tryEntries[fn];if(Bn.tryLoc===un){var Hn=Bn.completion;if(Hn.type==="throw"){var yr=Hn.arg;Br(Bn)}return yr}}throw Error("illegal catch attempt")},delegateYield:function(un,fn,Bn){return this.delegate={iterator:pn(un),resultName:fn,nextLoc:Bn},this.method==="next"&&(this.arg=We),en}},C}function Ut(We,C,U,Q,fe,de,Ce){try{var Ye=We[de](Ce),Ke=Ye.value}catch(ct){return void U(ct)}Ye.done?C(Ke):Promise.resolve(Ke).then(Q,fe)}function Ot(We){return function(){var C=this,U=arguments;return new Promise(function(Q,fe){var de=We.apply(C,U);function Ce(Ke){Ut(de,Q,fe,Ce,Ye,"next",Ke)}function Ye(Ke){Ut(de,Q,fe,Ce,Ye,"throw",Ke)}Ce(void 0)})}}function rn(We,C){var U=typeof Symbol<"u"&&We[Symbol.iterator]||We["@@iterator"];if(!U){if(Array.isArray(We)||(U=$t(We))||C){U&&(We=U);var Q=0,fe=function(){};return{s:fe,n:function(){return Q>=We.length?{done:!0}:{done:!1,value:We[Q++]}},e:function(ct){throw ct},f:fe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var de,Ce=!0,Ye=!1;return{s:function(){U=U.call(We)},n:function(){var ct=U.next();return Ce=ct.done,ct},e:function(ct){Ye=!0,de=ct},f:function(){try{Ce||U.return==null||U.return()}finally{if(Ye)throw de}}}}function $t(We,C){if(We){if(typeof We=="string")return sn(We,C);var U={}.toString.call(We).slice(8,-1);return U==="Object"&&We.constructor&&(U=We.constructor.name),U==="Map"||U==="Set"?Array.from(We):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?sn(We,C):void 0}}function sn(We,C){(C==null||C>We.length)&&(C=We.length);for(var U=0,Q=Array(C);U<C;U++)Q[U]=We[U];return Q}function lt(We,C){if(!(We instanceof C))throw new TypeError("Cannot call a class as a function")}function Zt(We,C){for(var U=0;U<C.length;U++){var Q=C[U];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(We,Mt(Q.key),Q)}}function zt(We,C,U){return C&&Zt(We.prototype,C),Object.defineProperty(We,"prototype",{writable:!1}),We}function Le(We,C,U){return(C=Mt(C))in We?Object.defineProperty(We,C,{value:U,enumerable:!0,configurable:!0,writable:!0}):We[C]=U,We}function Mt(We){var C=Rt(We,"string");return Jt(C)=="symbol"?C:C+""}function Rt(We,C){if(Jt(We)!="object"||!We)return We;var U=We[Symbol.toPrimitive];if(U!==void 0){var Q=U.call(We,C);if(Jt(Q)!="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(We)}var tt=function(){function We(){var C=this;lt(this,We),Le(this,"booted",!1),Le(this,"platformAttributesSelection",[]),Le(this,"previewWidth",1024),Le(this,"previewHeight",1024),Le(this,"clientPreviewWidth",1024),Le(this,"clientPreviewHeight",1024),Le(this,"shareUrlPrefix",null),Le(this,"events",[]),Le(this,"zkProduct",null),Le(this,"zkScene",null),Le(this,"zkCurrentTemplate",null),Le(this,"zkTemplates",[]),Le(this,"internalIsFullscreen",!1),Le(this,"highlightSettings",null),Le(this,"previousMeshesVisibleStates",{}),Le(this,"lastCameraLocation",null),Le(this,"enableShareCompositionUrl",!1),Le(this,"sharedCompositionDocId",null),Le(this,"templateId",null),Le(this,"deepARsceneGLBUrl",""),Le(this,"loadedComposition",null),Le(this,"savedCompositions",null),Le(this,"isDraftEditor",!1),Le(this,"isViewerMode",!1),Le(this,"isDAMViewer",!1),Le(this,"isTemplateEditor",!1),Le(this,"debugMode",!1),Le(this,"draftCompositionDocId",null),Le(this,"undoStack",[]),Le(this,"redoStack",[]),Le(this,"currentAttributesSelection",null),Le(this,"currentCompositionInfo",null),Le(this,"copyrightMessageLocalStorageKey",""),Le(this,"isPupillaryDistanceMandatory",!1),Le(this,"isAIEnabled",!1),Le(this,"sellerSettings",null),Le(this,"themeCompositions",null),Le(this,"currency","EUR"),Le(this,"groups",[]),Le(this,"fonts",[]),Le(this,"quantity",1),Le(this,"quantityRule",null),Le(this,"culture","en-US"),Le(this,"price",0),Le(this,"isOutOfStock",!1),Le(this,"compositionId",null),Le(this,"templates",[]),Le(this,"currentTemplate",null),Le(this,"product",null),Le(this,"templateMacroCategories",null),Le(this,"selectedTemplateCategory",null),Le(this,"cameras",[]),Le(this,"isExplodedMode",!1),Le(this,"isAssetsLoading",!1),Le(this,"additionalCustomProperties",[]),Le(this,"nftSettings",null),Le(this,"eventMessages",null),Le(this,"personalizedMessages",null),Le(this,"visibleEventMessages",[]),Le(this,"tryOnProvidersSettings",null),Le(this,"tryOnProductSettings",null),Le(this,"tryOnSellerSettings",null),Le(this,"pdSettings",-1),Le(this,"isInfoPointContentVisible",!1),Le(this,"internalTranslations",{statics:[],dynamics:[]}),Le(this,"integrationVersion",1),Le(this,"translations",null),Le(this,"useLegacyScreenshot",!1),Le(this,"uiConfig",null),Le(this,"backgroundColor",null),Le(this,"removeBackground",!1),Le(this,"parseParameters",function(U){console.info("Parameters",U);var Q=function($n){return decodeURIComponent($n.toString().replaceAll("%","").replace(/\+/g,"%20"))},fe=function($n,Tn){var Gn;if(Tn)switch($n){case"name":C.productName=Q(Tn);break;case"ecommerce":C.platform=decodeURIComponent(Tn);break;case"qty":C.quantity=parseFloat(decodeURIComponent(Tn));break;case"culture":C.culture=decodeURIComponent(Tn);break;case"currency":C.currency=decodeURIComponent(Tn);break;case"token":C.token=decodeURIComponent(Tn);break;case"compositionId":C.compositionId=decodeURIComponent(Tn);break;case"modelCode":C.productCode=Q(Tn);break;case"previewWidth":C.previewWidth=parseInt(Q(Tn));break;case"previewHeight":C.previewHeight=parseInt(Q(Tn));break;case"shareUrlPrefix":C.shareUrlPrefix=Q(Tn);break;case"sharedCompositionDocId":C.sharedCompositionDocId=Q(Tn);break;case"templateId":C.templateId=Q(Tn);break;case"isDraftEditor":C.isDraftEditor=!0;break;case"enableShareCompositionUrl":C.enableShareCompositionUrl=!0;break;case"draftCompositionDocId":C.draftCompositionDocId=Tn;break;case"viewerMode":C.isViewerMode=!0;break;case"isTemplateEditor":C.isTemplateEditor=!0;break;case"selectedTemplateCategory":C.selectedTemplateCategory=Q(Tn);break;case"legacyScreenshot":C.useLegacyScreenshot=Tn=="1";break;case"integrationVersion":C.integrationVersion=(Gn=parseInt(Tn))!==null&&Gn!==void 0?Gn:1;break;case"dam":C.isDAMViewer=Tn=="1"||Tn=="true";break;case"debugMode":C.debugMode=Tn=="1"||Tn=="true";break}};if(U)for(var de in U){var Ce=U[de];if(fe(de,Ce),de.indexOf("attributes")==0){var Ye=rn(Ce),Ke;try{for(Ye.s();!(Ke=Ye.n()).done;){var ct=Ke.value;ct[0].id===""||ct[1].id===""||C.platformAttributesSelection.push(new Se.PlatformAttributeSelection(JSON.stringify(ct[0]),JSON.stringify(ct[1]),"","",!0,!0))}}catch(Jn){Ye.e(Jn)}finally{Ye.f()}}}else for(var _t=window.location.href.substring(window.location.href.lastIndexOf("?")+1),qe=_t.split("&"),ht=0;ht<qe.length;ht++){var Pt=qe[ht].indexOf("=");if(Pt==-1)throw new we.ParametersParseFailException(qe[ht]);var xt=decodeURIComponent(qe[ht].substring(0,Pt)),Ge=qe[ht].substring(Pt+1);if(fe(xt,Ge),xt.indexOf("attributes")==0){var en=decodeURIComponent(Ge.replace(/\+/g,"%20"));if(en&&en!=""){var bt=JSON.parse(en),Vt=rn(bt),_n;try{for(Vt.s();!(_n=Vt.n()).done;){var Yn=_n.value;Yn[0].id===""||Yn[1].id===""||C.platformAttributesSelection.push(new Se.PlatformAttributeSelection(JSON.stringify(Yn[0]),JSON.stringify(Yn[1]),"","",!0,!0))}}catch(Jn){Vt.e(Jn)}finally{Vt.f()}}}}var or={"culture (in xx_XX format)":C.culture,currency:C.currency,"name (product name)":C.productName,ecommerce:C.platform,"qty (product quantity)":C.quantity,token:C.token,modelCode:C.productCode};for(var lr in or)if(!or[lr])throw new we.Exception("Missing parameter: "+lr);return window.token=C.token,window.isOwin=!0,!0}),Le(this,"getProduct",Ot(Ue().mark(function U(){return Ue().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!(!C.productCode||C.productCode=="")){fe.next=2;break}throw new we.Exception("Loading product but no SKU found");case 2:return fe.abrupt("return",new Promise(function(de,Ce){var Ye=new MPlaza.Model;Ye.set("modelID",1),Ye.fetch({success:function(){de(Ye)},error:function(){Ce(new we.Exception("Failed loading product"))},data:{c:C.productCode}})}));case 3:case"end":return fe.stop()}},U)}))),Le(this,"getScene",function(){var U=Ot(Ue().mark(function Q(fe){var de;return Ue().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(fe){Ye.next=2;break}throw new we.Exception("Loading scene but no product found");case 2:if(fe.get("scenes").length!=0){Ye.next=4;break}throw new we.Exception("The product don't have any scene configured");case 4:return de=new Zakeke.Scene,de.set("sceneID",fe.get("scenes").at(0).get("sceneID")),Ye.abrupt("return",new Promise(function(Ke,ct){de.fetch({success:function(qe){Ke(qe)},error:function(){ct(new we.Exception("Failed loading scene"))}})}));case 7:case"end":return Ye.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"getComposerModels",Ot(Ue().mark(function U(){return Ue().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!(!C.productCode||C.productCode=="")){fe.next=2;break}throw new we.Exception("Loading product but no SKU found");case 2:return fe.abrupt("return",new Promise(function(de,Ce){var Ye=new Zakeke.ComposerModels;Ye.set("modelID",1),Ye.fetch({success:function(){de(Ye)},error:function(){Ce(new we.Exception("Failed loading product"))},data:{c:C.productCode}})}));case 3:case"end":return fe.stop()}},U)}))),Le(this,"getFonts",Ot(Ue().mark(function U(){var Q,fe,de,Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.next=2,me.axiosApi.get("fontfamilies/");case 2:return de=Ke.sent.data,Ce=(Q=(fe=C.zkProduct)===null||fe===void 0?void 0:fe.get("printTypes").at(0).get("fonts").map(function(ct){return ct.get("fontFamilyID")}))!==null&&Q!==void 0?Q:[],Ce.length>0&&(de=de.filter(function(ct){return Ce.indexOf(ct.fontFamilyID)!=-1})),Ke.abrupt("return",de);case 6:case"end":return Ke.stop()}},U)}))),Le(this,"getSettings",Ot(Ue().mark(function U(){var Q;return Ue().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,me.axiosApi.get("customizerinfo/");case 2:return Q=de.sent.data,de.abrupt("return",Q);case 4:case"end":return de.stop()}},U)}))),Le(this,"getSellerSetting",Ot(Ue().mark(function U(){return Ue().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.abrupt("return",new Promise(function(){var de=Ot(Ue().mark(function Ce(Ye,Ke){var ct;return Ue().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=2,me.axiosApi.get("sellerSetting/");case 2:ct=qe.sent.data,Ye(ct);case 4:case"end":return qe.stop()}},Ce)}));return function(Ce,Ye){return de.apply(this,arguments)}}()));case 1:case"end":return fe.stop()}},U)}))),Le(this,"createQuote",function(){var U=Ot(Ue().mark(function Q(fe){var de,Ce,Ye;return Ue().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return Ce=new Qe.Quote,Ce.formData=JSON.stringify(fe),Ce.quantity=C.quantity,Ce.compositionDocID=C.composition.get("docID"),ct.next=6,C.getPrice();case 6:return Ce.modelPrice=ct.sent.price,Ce.variantName=(de=C.product.name)!==null&&de!==void 0?de:"",ct.next=10,me.axiosApi.post(Zakeke.config.baseApiUrl+"quotes",Ce);case 10:return Ye=ct.sent.data,ct.abrupt("return",Ye);case 12:case"end":return ct.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"getPrice",Ot(Ue().mark(function U(){var Q,fe,de,Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Q=0,fe=!1,console.log("Get price from store (integration version "+C.integrationVersion+")..."),Ke.next=5,C.integration.getPrice(C.composition,C.zkCurrentTemplate,C.zkProduct,C.platformAttributesSelection,C.composition.getPrice(C.zkProduct,C.quantity),C.settings.additionalFeatures.prices3dConfigurator,C.settings.isPricingAdvancedEnabled,C.quantity,0);case 5:return de=Ke.sent,C.integrationVersion===1?Q=de:C.integrationVersion===2&&(Ce=de,Q=Ce.price,fe=Ce.isOutOfStock),console.log("Price from store: "+Q),Ke.abrupt("return",{price:Q,isOutOfStock:fe});case 9:case"end":return Ke.stop()}},U)}))),Le(this,"getTranslations",Ot(Ue().mark(function U(){var Q;return Ue().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.prev=0,de.next=3,me.axiosApi.get("sellerLocalizations/customizer-localizations");case 3:if(Q=de.sent,!Q){de.next=8;break}return de.abrupt("return",Q.data);case 8:console.log("getTranslations response is empty");case 9:de.next=14;break;case 11:de.prev=11,de.t0=de.catch(0),console.error(de.t0);case 14:case"end":return de.stop()}},U,null,[[0,11]])}))),Le(this,"loadLocalization",Ot(Ue().mark(function U(){var Q;return Ue().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return Q=C.culture,Zakeke.config.avaibleLanguages.indexOf(Q)==-1&&(Q=C.culture.substring(0,2)),Zakeke.config.avaibleLanguages.lastIndexOf(Q)==-1&&(Q="en"),de.next=5,C.loadScript(Zakeke.config.baseUrl+"Scripts/localizations/".concat(Q.toLowerCase(),"/composer.js"));case 5:case"end":return de.stop()}},U)}))),Le(this,"getTemplateMacroCategories",Ot(Ue().mark(function U(){var Q,fe;return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,me.axiosApi.get("compositionmacrocategories");case 2:return Q=Ce.sent,fe=Q.data.map(function(Ye){var Ke=Ye.category.map(function(ct){return{categoryName:ct.name,categoryID:ct.categoryID}});return{macroCategoryName:Ye.name,macroCategoryID:Ye.macroCategoryID,categories:Ke}}),Ce.abrupt("return",fe);case 5:case"end":return Ce.stop()}},U)}))),Le(this,"loadScript",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",new Promise(function(Ye,Ke){var ct=document.createElement("script");ct.onload=Ye,ct.src=fe,document.body.appendChild(ct)}));case 1:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"validationNFTEmail",function(U){var Q=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return Q.test(U)}),Le(this,"validationNFTWalletAddress",function(U){var Q=/^0x[a-fA-F0-9]{40}$/;return Q.test(U)}),Le(this,"saveCustomerWalletInfo",function(){var U=Ot(Ue().mark(function Q(fe,de,Ce){return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.next=2,me.axiosApi.post(Zakeke.config.baseApiUrl+"customerwalletdocs",{email:de,walletAddress:Ce,zakekeEnvironment:2,compositionDocID:fe});case 2:case"end":return Ke.stop()}},Q)}));return function(Q,fe,de){return U.apply(this,arguments)}}()),Le(this,"setCopyrightMessageAccepted",function(U){try{U?window.localStorage.setItem(C.copyrightMessageLocalStorageKey,U.toString()):window.localStorage.removeItem(C.copyrightMessageLocalStorageKey)}catch{}}),Le(this,"getCopyrightMessageAccepted",function(){var U=!1;try{U=!!window.localStorage.getItem(C.copyrightMessageLocalStorageKey)}catch{}return U}),Le(this,"boot",function(){var U=Ot(Ue().mark(function Q(fe){var de,Ce,Ye,Ke,ct,_t,qe,ht,Pt,xt,Ge,en,bt,Vt,_n,Yn,or,lr,Jn,$n,Tn,Gn,tr,pr,Br,Mr,pn,Wt;return Ue().wrap(function(fn){for(;;)switch(fn.prev=fn.next){case 0:if(!C.booted){fn.next=2;break}return fn.abrupt("return");case 2:return C.booted=!0,C.parseParameters(fe),(0,me.setupApi)(C.culture,C.token),fn.next=7,C.loadLocalization();case 7:return fn.next=9,C.getSettings();case 9:return C.settings=fn.sent,C.copyrightMessageLocalStorageKey=C.settings.userID+"_copyright_accepted",C.eventMessages=C.settings.eventMessages.map(function(Bn){return Be.EventMessage.fromMessage(Bn)}),console.log(C.eventMessages,"eventMessages"),C.nftSettings=C.settings.nftSettings,C.isAIEnabled=C.settings.additionalFeatures.aiPoweredTools,C.trigger("change"),fn.next=18,C.getTranslations();case 18:return C.internalTranslations=fn.sent,Ce=new Map(C.internalTranslations.statics.map(function(Bn){return[Bn.original,Bn.localization]})),Ye=new Map(C.internalTranslations.dynamics.map(function(Bn){return[Bn.original,Bn.localization]})),C.translations={statics:Ce,dynamics:Ye},De.T.translations=C.translations,C.trigger("change"),fn.next=26,C.getComposerModels();case 26:if(Ke=fn.sent,Ke.get("scene").get("config")||Ke.set("config",Ke.get("model").get("sceneConfig")),C.zkScene=Ke.get("scene"),C.zkProduct=Ke.get("model"),ct=(de=C.zkProduct)===null||de===void 0?void 0:de.get("statusID"),console.log("sono prima del customEvent",ct),!(ct===2&&C.zkScene&&C.zkScene.get("url")&&C.zkScene.get("url").endsWith(".glb")||ct===2&&!C.isShoppingPreview)){fn.next=38;break}console.log("Product unpublished, triggering event"),_t=new CustomEvent("productUnpublished",{detail:{statusID:ct}}),window.dispatchEvent(_t),fn.next=79;break;case 38:return(qe=C.zkScene)!==null&&qe!==void 0&&qe.get("config")&&(ht=C.zkScene)!==null&&ht!==void 0&&(Pt=ht.get("config"))!==null&&Pt!==void 0&&Pt.get("uiConfig")&&(C.uiConfig={urlLoader:(xt=(Ge=C.zkScene.get("config"))===null||Ge===void 0||(en=Ge.get("uiConfig"))===null||en===void 0?void 0:en.get("urlLoader"))!==null&&xt!==void 0?xt:"",urlARIcon:(bt=(Vt=C.zkScene.get("config"))===null||Vt===void 0?void 0:Vt.get("uiConfig").get("urlARIcon"))!==null&&bt!==void 0?bt:""}),C.backgroundColor=(_n=(Yn=C.zkScene)===null||Yn===void 0||(or=Yn.get("config"))===null||or===void 0||(lr=or.get("general"))===null||lr===void 0?void 0:lr.get("backgroundColor"))!==null&&_n!==void 0?_n:null,C.removeBackground=(Jn=($n=C.zkScene)===null||$n===void 0||(Tn=$n.get("config"))===null||Tn===void 0||(Gn=Tn.get("general"))===null||Gn===void 0?void 0:Gn.get("removeDefaultBackground"))!==null&&Jn!==void 0?Jn:!1,(tr=C.zkScene)!==null&&tr!==void 0&&tr.get("config")&&(C.product=Qe.Product.fromProduct(C.zkProduct)),C.quantityRule=C.zkProduct.get("quantityRule")?Qe.ProductQuantityRule.fromQuantityRule(C.zkProduct.get("quantityRule")):null,pn=[C.getSettings(),C.getTranslations(),(0,ee.integrationFor)(C.platform),C.getSellerSetting(),C.getTemplateMacroCategories(),ce.DesignPriceCalculatorRuleFactory.create(C.zkProduct,Zakeke.config.baseApiUrl,C.token,!0,Zakeke.config.cloudFlareApiUrl),C.getFonts(),C.getTemplates(),C.getMessagesByProductCode(C.productCode),C.getTryOnProvidersList(),C.getTryOnProductInfo()],fn.next=46,Promise.all(pn).then(function(Bn){var Hn,yr,zr=Qt(Bn,9),Zr=zr[0],Ni=zr[1],as=zr[2],Ss=zr[3],Os=zr[4],go=zr[5],$u=zr[6],gc=zr[7],Xl=zr[8];C.settings=Zr,C.copyrightMessageLocalStorageKey=C.settings.userID+"_copyright_accepted",C.eventMessages=C.settings.eventMessages.map(function(Ha){return Be.EventMessage.fromMessage(Ha)}),C.nftSettings=C.settings.nftSettings,C.internalTranslations=Ni,console.log(Xl,"personalizedMessages"),C.personalizedMessages=Xl;var Co=new Map(C.internalTranslations.statics.map(function(Ha){return[Ha.original,Ha.localization]})),Mu=new Map(C.internalTranslations.dynamics.map(function(Ha){return[Ha.original,Ha.localization]}));C.translations={statics:Co,dynamics:Mu},De.T.translations=C.translations,C.integration=as,C.sellerSettings=Ss?Qe.SellerSettings.fromSellerSettings(Ss):null,C.templateMacroCategories=Os,C.pricingCalculator=go,C.zkProduct.get("colors").length>0&&(C.pricingCalculator.colorID=C.zkProduct.get("colors").at(0).get("colorID")),C.integration.setPricingCalculator(C.pricingCalculator),C.fonts=$u,C.zkTemplates=gc,C.templates=C.zkTemplates.map(function(Ha){return Qe.Template.fromTemplate(Ha)}),C.cameras=(Hn=(yr=C.zkScene)===null||yr===void 0?void 0:yr.get("cameraLocations").map(function(Ha){return Qe.Camera.fromZkCamera(Ha)}))!==null&&Hn!==void 0?Hn:[],C.tryOnProductSettings&&C.getTryOnSellerInfo(C.tryOnProductSettings.typeID,C.tryOnProductSettings.providerID)});case 46:if(C.zkScene){fn.next=48;break}throw new Error("Product has no 3D scene.");case 48:return C.debugMode&&C.trigger("debugMode"),C.trigger("change"),fn.next=52,se.SceneViewer.createSceneViewerAsync({isViewer:C.isDAMViewer});case 52:return C.viewer=fn.sent,C.trigger("viewer",C.viewer),C.viewer.isHologramSource=!0,C.viewer.addInfoPointPickedListener(function(){C.isInfoPointContentVisible=!0,C.trigger("change")}),C.viewer.addInfoPointContentHiddenListener(function(){C.isInfoPointContentVisible=!1,C.trigger("change")}),C.viewer.addBeginAssetsLoadingListener(function(){C.isAssetsLoading=!0,C.trigger("change")}),C.viewer.addEndAssetsLoadingListener(function(){C.isAssetsLoading=!1,C.trigger("change")}),C.highlightSettings&&(C.viewer.highlightColor=C.highlightSettings.color,C.viewer.highlightSize=C.highlightSettings.size),C.viewer.setLoadingScreen({displayLoadingUI:function(){return null},hideLoadingUI:function(){return null},loadingUIBackgroundColor:"black",loadingUIText:"black"}),C.viewer.infoPointsManagerStyle={imagePanelStyle:{backgroundColor:"white",loadingTextColor:"#cccccc",buttonsBorderColor:"#dddddd",buttonsBorderHighlightColor:"#eeeeee",buttonsColor:"#888888",buttonsHighlightColor:"#555555",buttonsIconColor:"white"}},fn.next=64,ce.DesignPriceCalculatorRuleFactory.create(C.zkProduct,Zakeke.config.baseApiUrl,C.token,!0,Zakeke.config.cloudFlareApiUrl);case 64:if(C.pricingCalculator=fn.sent,C.zkProduct.get("colors").length>0&&(C.pricingCalculator.colorID=C.zkProduct.get("colors").at(0).get("colorID"),C.integration.setPricingCalculator(C.pricingCalculator)),!(C.zkScene&&C.zkScene.get("url")&&C.zkScene.get("url").endsWith(".glb"))){fn.next=71;break}return fn.next=69,C.loadSceneFromGlbUrl(C.zkScene.get("url"),C.zkScene.get("config"));case 69:fn.next=73;break;case 71:return fn.next=73,C.viewer.loadSceneFromModelAsync(C.zkProduct,C.zkScene);case 73:return C.settings.brand&&C.viewer.createBrandLogoButton(),Wt=(pr=C.zkScene)===null||pr===void 0||(Br=pr.getTryOnSettings)===null||Br===void 0?void 0:Br.call(pr),Wt!=null&&(Mr=Wt.typeSettings)!==null&&Mr!==void 0&&Mr.mandatoryPD&&(C.isPupillaryDistanceMandatory=!0),C.trigger("change"),fn.next=79,C.handleSceneLoaded();case 79:case"end":return fn.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"buildDeepARSceneGLBUrl",function(U){var Q=Zakeke.config.deepARSettings.url+"?fileUrl="+encodeURIComponent(C.zkScene.get("url")),fe=C.tryOnMeshVisibleSettings||Be.DefaultDeepARFineTuningSettings,de=U.model,Ce=new URLSearchParams({positionX:fe.position.x.toString(),positionY:fe.position.y.toString(),positionZ:fe.position.z.toString(),rotationX:U.model.rotation.x.toString(),rotationY:U.model.rotation.y.toString(),rotationZ:U.model.rotation.z.toString(),scale:fe.scale.toString(),environment:fe.environment.toString(),modelPositionX:de.position.x.toString(),modelPositionY:de.position.y.toString(),modelPositionZ:de.position.z.toString(),modelScale:de.scale.x.toString()});return console.log("buildDeepARSceneGLBUrl con nuovi param model ",de.position.x,de.position.y,de.position.z,de.scale.x),Q="".concat(Q,"&").concat(Ce.toString(),"&isDesktopDeepARUrl=true"),console.log("sono finalUrl",Q),Q}),Le(this,"loadSceneFromGlbUrl",function(){var U=Ot(Ue().mark(function Q(fe,de){var Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ce=de.toJSON(),console.log(Ce,"config scena"),C.deepARsceneGLBUrl=C.buildDeepARSceneGLBUrl(Ce),Ke.next=5,C.viewer.loadFromGlbUrl(fe,Ce);case 5:C.isDAMViewer&&C.makeDAMAnalyticsView(Qe.DAMViewerAnalyticsEventType.ViewProduct);case 6:case"end":return Ke.stop()}},Q)}));return function(Q,fe){return U.apply(this,arguments)}}()),Le(this,"appendViewer",function(U){C.viewer&&C.viewer.appendTo(U),C.viewer.updateView(!0,!0)}),Le(this,"setHighlightSettings",function(U){C.highlightSettings=U,C.viewer&&(C.viewer.highlightColor=U.color,C.viewer.highlightSize=U.size)}),Le(this,"renderDesign",Ot(Ue().mark(function U(){return Ue().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!(C.viewer&&C.zkCurrentTemplate)){fe.next=4;break}return fe.next=3,C.viewer.renderDesignAsync(C.zkCurrentTemplate);case 3:C.debouncedChange();case 4:case"end":return fe.stop()}},U)}))),Le(this,"debouncedChange",(0,B.debounce)(function(){return C.trigger("change")},300)),Le(this,"restoreLastCameraLocation",function(){C.viewer&&(C.lastCameraLocation&&C.lastCameraLocation!==Zakeke.getEmptyUUID()?(console.log("Restoring last camera location "+C.lastCameraLocation+" ..."),C.setCamera(C.lastCameraLocation,!1,!1)):C.viewer.adjustCamera(!1))}),Le(this,"buildRecapProps",Fe().debounce(function(U){if(!(!C.sellerSettings||!C.sellerSettings.isCompositionRecapEnabled)){var Q=C.zkProduct.get("attributes"),fe=C.zkProduct.get("attributeGroups"),de=C.zkProduct.get("attributeSteps"),Ce={};U.forEach(function(Ye){var Ke,ct=Q.find(function(xt){return xt.get("attributeID")==Ye.attributeID}),_t=ct.get("options").find(function(xt){return xt.get("optionID")==Ye.optionID}),qe=fe.find(function(xt){return xt.get("groupID")==ct.get("groupID")}),ht=de.find(function(xt){return xt.get("stepID")==ct.get("stepID")}),Pt="";(Ke=C.selection)===null||Ke===void 0||Ke.get("groups").each(function(xt){xt.get("attributes").each(function(Ge){var en=Ge.get("options").find(function(or){return or.get("optionID")==_t.get("optionID")});if(en&&Ge.get("enabled")){var bt,Vt,_n,Yn;C.isOptionEnabled(_t.get("optionID")),Pt=xt.get("groupID")!==-1?De.T._d(xt.get("name"))+" "+De.T._d(ct.get("name")):De.T._d(ct.get("name")),Ce["".concat(Pt)]={groupDisplayOrder:(bt=qe==null?void 0:qe.get("displayOrder"))!==null&&bt!==void 0?bt:0,stepDisplayOrder:(Vt=ht==null?void 0:ht.get("displayOrder"))!==null&&Vt!==void 0?Vt:0,attributeDisplayOrder:(_n=ct==null?void 0:ct.get("displayOrder"))!==null&&_n!==void 0?_n:0,optionDisplayOrder:(Yn=_t==null?void 0:_t.get("displayOrder"))!==null&&Yn!==void 0?Yn:0,value:De.T._d(_t.get("name"))}}})})}),C.currentAttributesSelection=Ce}},200)),Le(this,"updateRecapAndExtensionField",function(){var U,Q=[];(U=C.selection)===null||U===void 0||U.getAllAttributeSelections().forEach(function(fe){fe.get("options").forEach(function(de){de.get("selected")&&Q.push({attributeID:de.get("attributeID"),optionID:de.get("optionID")})})}),C.getCurrentExtensionFields(Q),C.buildRecapProps(Q),C.trigger("change")}),Le(this,"getCurrentExtensionFields",function(U){var Q=[],fe={},de=C.zkProduct.get("attributes");U.forEach(function(Ye){var Ke=de.find(function(_t){return _t.get("attributeID")==Ye.attributeID}),ct=Ke.get("options").find(function(_t){return _t.get("optionID")==Ye.optionID});ct.get("extensionFields").length&&ct.get("extensionFields").forEach(function(_t){(Q.length===0||Q.indexOf(_t.name)==-1)&&(Q.push(_t.name),fe[_t.name]={value:0,label:_t.label,formatString:_t.formatString});var qe;_t.dataTypeID===Qe.ExtensionFieldDataType.Integer?qe=parseInt(_t.value):qe=parseFloat(_t.value),fe[_t.name].value+=qe})});var Ce=Object.keys(fe).map(function(Ye){return fe[Ye]});C.additionalCustomProperties=Ce}),Le(this,"handleSceneLoaded",Ot(Ue().mark(function U(){var Q,fe,de,Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return console.log("Scene loaded"),C.selection=Zakeke.ComposerSelection.CreateComposerSelection(C.zkProduct),Q=C.templateId||C.draftCompositionDocId||C.sharedCompositionDocId||C.compositionId,C.initialSelection==null&&(C.initialSelection=C.cloneSelection(C.selection)),Ke.next=6,C.internalLoadComposition(Q);case 6:if(C.trigger("change"),C.buildStructure(),C.setQuantity(C.quantity),C.renderDesign(),C.viewer.addNotifyMessageListener(function(ct,_t,qe,ht,Pt,xt,Ge,en,bt){C.visibleEventMessages.push({areaID:ct,itemGuid:_t,type:qe,title:ht,message:Pt,closabled:xt,requiredWidth:Ge,requiredHeight:en,addToCartDisabledIfVisible:bt}),C.trigger("change")}),C.viewer.addRemoveMessageListener(function(ct,_t){C.visibleEventMessages=C.visibleEventMessages.filter(function(qe){return qe.areaID!==ct&&qe.itemGuid!==_t}),C.trigger("change")}),C.viewer.setEventMessages(C.settings.eventMessages.map(function(ct){return{AddToCartDisabledIfVisible:ct.addToCartDisabledIfVisible,AdditionalData:ct.additionalData,Closeable:ct.closeable,Description:ct.description,EnableCheckForSellerImages:ct.enableCheckForSellerImages,EventID:ct.eventID,Visible:ct.visible}})),C.sellerSettings&&(C.addHotjarScript((fe=C.sellerSettings)===null||fe===void 0?void 0:fe.hotjarSiteID),console.log((de=C.sellerSettings)===null||de===void 0?void 0:de.googleTagManagerID,"googleTagManagerID"),C.addGoogleTagManagerID((Ce=C.sellerSettings)===null||Ce===void 0?void 0:Ce.googleTagManagerID)),C.sharedCompositionDocId&&(C.composition.set("docID",null),C.composition.set("designDocID",null)),C.registerView(),C.isTemplateEditor){Ke.next=19;break}return Ke.next=19,C.updateSavedCompositions();case 19:setTimeout(function(){return C.updateRecapAndExtensionField()},1e3);case 20:case"end":return Ke.stop()}},U)}))),Le(this,"getComposition",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",new Promise(function(Ye,Ke){var ct=new MPlaza.Composition;ct.set("docID",fe),ct.fetch({success:function(qe){Ye(qe)},error:function(){Ke()},data:{frombackoffice:!!C.isDraftEditor}})}));case 1:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"getDesign",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",new Promise(function(Ye,Ke){var ct=new MPlaza.Design;ct.set("docID",fe),ct.fetch({success:function(qe){Ye(qe)},error:function(){Ke()},data:{frombackoffice:!!C.isDraftEditor}}),ct.addEventListener("change",C.updatePrice)}));case 1:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"internalLoadDesign",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,C.getDesign(C.composition.get("designDocID"));case 2:return C.zkCurrentTemplate=Ce.sent,Ce.next=5,(0,ae.downloadFontsOfDesign)(C.zkCurrentTemplate,C.fonts);case 5:C.renderDesign();case 6:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"loadComposition",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,C.internalLoadComposition(fe);case 2:C.buildStructure();case 3:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"internalLoadComposition",function(){var U=Ot(Ue().mark(function Q(fe){var de,Ce,Ye;return Ue().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(!fe){ct.next=16;break}return ct.next=3,C.getComposition(fe);case 3:if(C.composition=ct.sent,C.templateId&&(C.loadedComposition={templateName:C.composition.get("name"),attributesOptions:C.composition.get("compositionItems").map(function(_t){return{attributeID:_t.get("attributeID"),optionID:_t.get("selectedOptionID")}}),selectedCategoryID:C.composition.get("categories").length>0?C.composition.get("categories").at(0).get("categoryID"):null}),C.selection.setupOnComposition(C.composition),!C.composition.get("designDocID")){ct.next=11;break}return ct.next=9,C.internalLoadDesign(C.composition.get("designDocID"));case 9:ct.next=14;break;case 11:if(!(C.templates.length>0)){ct.next=14;break}return ct.next=14,C.setTemplate(C.templates[0].id);case 14:ct.next=36;break;case 16:C.composition=C.selection.buildComposition(),de=rn(C.platformAttributesSelection),ct.prev=18,Ye=Ue().mark(function _t(){var qe;return Ue().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:qe=Ce.value,C.zkProduct.get("attributes").each(function(xt){if((0,De.isPlatformCode)(xt.get("attributeCode")))try{if((0,De.compare)(JSON.parse(xt.get("attributeCode")),JSON.parse(qe.attributeCode))){var Ge=xt.get("options").find(function(en){return(0,De.compare)(JSON.parse(en.get("optionCode")),JSON.parse(qe.optionCode))});Ge&&(C.selection.selectAttributeValue(xt.get("attributeID"),Ge.get("optionID").toString()),qe.attributeLabel=xt.get("name"),qe.optionLabel=Ge.get("name"))}}catch(en){console.error("Failed parsing attribute from data:",qe),console.error(en)}});case 2:case"end":return Pt.stop()}},_t)}),de.s();case 21:if((Ce=de.n()).done){ct.next=25;break}return ct.delegateYield(Ye(),"t0",23);case 23:ct.next=21;break;case 25:ct.next=30;break;case 27:ct.prev=27,ct.t1=ct.catch(18),de.e(ct.t1);case 30:return ct.prev=30,de.f(),ct.finish(30);case 33:if(!(C.templates.length>0)){ct.next=36;break}return ct.next=36,C.setTemplate(C.templates[0].id);case 36:return ct.next=38,C.sync3DAndPlatformSelectionWithCurrentSelection();case 38:C.updateComposition(),C.updateRecapAndExtensionField();case 40:case"end":return ct.stop()}},Q,null,[[18,27,30,33]])}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"sync3DAndPlatformSelectionWithCurrentSelection",Ot(Ue().mark(function U(){var Q;return Ue().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return C.selection.get("groups").each(function(Ce){Ce.get("attributes").each(function(Ye){var Ke=C.platformAttributesSelection.find(function(_t){return(0,De.matchCodes)(_t.attributeCode,Ye.get("attributeCode"))});if(!Ke){var ct=Ye.get("options").findWhere({selected:!0});ct&&C.platformAttributesSelection.push(new Se.PlatformAttributeSelection(Ye.get("attributeCode"),ct.get("optionCode"),Ye.get("name"),ct.get("name"),Ye.get("enabled"),ct.get("enabled")))}})}),Q=C.selection.getAllAttributeTransformationScript(),C.viewer.adjustCamera(!1),de.next=5,C.viewer.executeScriptAsync(Q);case 5:C.selection.on("attributeSelectionChanged",function(Ce){C.handleAttributeSelectionChanged(Ce)}),C.selection.on("attributeEnabled",function(Ce){C.handleAttributeEnabled(Ce.attributeID)}),C.selection.on("attributeDisabled",function(Ce){C.handleAttributeDisabled(Ce.attributeID)}),C.selection.on("attributeOptionEnabled",function(Ce){C.handleAttributeOptionEnabled(Ce.attributeID,Ce.optionID)}),C.selection.on("attributeOptionDisabled",function(Ce){C.handleAttributeOptionDisabled(Ce.attributeID,Ce.optionID)});case 10:case"end":return de.stop()}},U)}))),Le(this,"cloneSelection",function(U){var Q=new Zakeke.ComposerSelection;Q.set("zkModel",C.zkProduct),Q.set("attributeDependencies",U.get("attributeDependencies")),Q.set("optionDependencies",U.get("optionDependencies")),Q.get("groups").reset(),U.get("groups").each(function(de){var Ce=new Zakeke.AttributeGroupSelection;for(var Ye in de.attributes)Ce.set(Ye,de.attributes[Ye]);Q.get("groups").add(Ce)});var fe=0;return Q.get("groups").each(function(de){de.set("attributes",U.get("groups").at(fe).get("attributes").clone()),de.get("attributes").reset(),U.get("groups").at(fe).get("attributes").each(function(Ye){var Ke=new Zakeke.AttributeSelection;for(var ct in Ye.attributes)Ke.set(ct,Ye.attributes[ct]);de.get("attributes").add(Ke)});var Ce=0;de.get("attributes").each(function(Ye){Ye.set("options",U.get("groups").at(fe).get("attributes").at(Ce).get("options").clone()),Ye.get("options").reset(),U.get("groups").at(fe).get("attributes").at(Ce).get("options").each(function(Ke){var ct=new Zakeke.OptionSelection;for(var _t in Ke.attributes)ct.set(_t,Ke.attributes[_t]);Ye.get("options").add(ct)}),Ce++}),fe++}),Q}),Le(this,"undo",Ot(Ue().mark(function U(){var Q,fe;return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(Q=C.undoStack&&C.undoStack.length>0?C.undoStack.pop():null,Q){Ce.next=3;break}return Ce.abrupt("return");case 3:return C.redoStack.push(C.selection),C.selection=Q,C.selection.on("attributeSelectionChanged",function(Ye){C.handleAttributeSelectionChanged(Ye)}),C.selection.on("attributeEnabled",function(Ye){C.handleAttributeEnabled(Ye.attributeID)}),C.selection.on("attributeDisabled",function(Ye){C.handleAttributeDisabled(Ye.attributeID)}),C.selection.on("attributeOptionEnabled",function(Ye){C.handleAttributeOptionEnabled(Ye.attributeID,Ye.optionID)}),C.selection.on("attributeOptionDisabled",function(Ye){C.handleAttributeOptionDisabled(Ye.attributeID,Ye.optionID)}),C.selection.attachEvents(),fe=C.selection.getAllAttributeTransformationScript(),Ce.next=14,C.viewer.executeScriptAsync(fe);case 14:C.buildStructure(),C.resetPlatformAttributesSelection(),C.updateComposition(),C.updateRecapAndExtensionField();case 18:case"end":return Ce.stop()}},U)}))),Le(this,"redo",Ot(Ue().mark(function U(){var Q,fe;return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(Q=C.redoStack&&C.redoStack.length>0?C.redoStack.pop():null,Q){Ce.next=3;break}return Ce.abrupt("return");case 3:return C.undoStack.push(C.selection),C.selection=Q,C.selection.on("attributeSelectionChanged",function(Ye){C.handleAttributeSelectionChanged(Ye)}),C.selection.on("attributeEnabled",function(Ye){C.handleAttributeEnabled(Ye.attributeID)}),C.selection.on("attributeDisabled",function(Ye){C.handleAttributeDisabled(Ye.attributeID)}),C.selection.on("attributeOptionEnabled",function(Ye){C.handleAttributeOptionEnabled(Ye.attributeID,Ye.optionID)}),C.selection.on("attributeOptionDisabled",function(Ye){C.handleAttributeOptionDisabled(Ye.attributeID,Ye.optionID)}),C.selection.attachEvents(),fe=C.selection.getAllAttributeTransformationScript(),Ce.next=14,C.viewer.executeScriptAsync(fe);case 14:C.buildStructure(),C.resetPlatformAttributesSelection(),C.updateComposition(),C.updateRecapAndExtensionField();case 18:case"end":return Ce.stop()}},U)}))),Le(this,"resetPlatformAttributesSelection",function(){C.selection.get("groups").each(function(U){U.get("attributes").each(function(Q){var fe=C.platformAttributesSelection.find(function(Ce){return(0,De.matchCodes)(Ce.attributeCode,Q.get("attributeCode"))});if(fe){var de=Q.get("options").findWhere({selected:!0});fe.attributeCode=Q.get("attributeCode"),fe.attributeIsEnabled=Q.get("enabled"),fe.attributeLabel=Q.get("name"),fe.optionCode=de.get("optionCode"),fe.optionLabel=de.get("name"),fe.optionIsEnabled=de.get("enabled")}})})}),Le(this,"reset",Ot(Ue().mark(function U(){var Q;return Ue().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(C.initialSelection){de.next=2;break}return de.abrupt("return");case 2:return C.undoStack=[],C.redoStack=[],C.selection=C.cloneSelection(C.initialSelection),C.selection.attachEvents(),C.selection.on("attributeSelectionChanged",function(Ce){C.handleAttributeSelectionChanged(Ce)}),C.selection.on("attributeEnabled",function(Ce){C.handleAttributeEnabled(Ce.attributeID)}),C.selection.on("attributeDisabled",function(Ce){C.handleAttributeDisabled(Ce.attributeID)}),C.selection.on("attributeOptionEnabled",function(Ce){C.handleAttributeOptionEnabled(Ce.attributeID,Ce.optionID)}),C.selection.on("attributeOptionDisabled",function(Ce){C.handleAttributeOptionDisabled(Ce.attributeID,Ce.optionID)}),Q=C.selection.getAllAttributeTransformationScript(),de.next=14,C.viewer.executeScriptAsync(Q);case 14:C.buildStructure(),C.resetPlatformAttributesSelection(),C.updateComposition(),C.updateRecapAndExtensionField();case 18:case"end":return de.stop()}},U)}))),Le(this,"handleAttributeSelectionChanged",function(){var U=Ot(Ue().mark(function Q(fe){var de,Ce,Ye;return Ue().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return ct.next=2,C.viewer.executeActionsAsync(fe.attributeID,fe.selectedValue,fe.actions);case 2:C.updateComposition(),de=C.zkProduct.get("attributes").find(function(_t){return _t.get("attributeID")==fe.attributeID}),de&&(Ce=de.get("options").find(function(_t){return _t.get("optionID")==fe.selectedValue}),Ce&&(Ye=C.platformAttributesSelection.find(function(_t){return(0,De.matchCodes)(_t.attributeCode,de.get("attributeCode"))}),Ye&&(Ye.optionCode=Ce.get("optionCode"),Ye.optionLabel=Ce.get("name")),C.setOptionSelectionEnabled(de.get("attributeID"),Ce.get("optionID"),C.isOptionEnabled(Ce.get("optionID"))))),C.buildStructure(),C.renderDesign();case 7:case"end":return ct.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"handleAttributeEnabled",function(U){C.updateComposition(),C.setAttributeSelectionEnabled(U,!0),C.buildStructure(),C.renderDesign()}),Le(this,"handleAttributeDisabled",function(U){C.updateComposition(),C.setAttributeSelectionEnabled(U,!1),C.buildStructure(),C.renderDesign()}),Le(this,"handleAttributeOptionEnabled",function(U,Q){C.updateComposition(),C.setOptionSelectionEnabled(U,Q,!0),C.buildStructure(),C.renderDesign()}),Le(this,"handleAttributeOptionDisabled",function(U,Q){C.updateComposition(),C.setOptionSelectionEnabled(U,Q,!1),C.buildStructure(),C.renderDesign()}),Le(this,"setAttributeSelectionEnabled",function(U,Q){var fe=C.zkProduct.get("attributes").find(function(Ce){return Ce.get("attributeID")==U});if(fe){var de=C.platformAttributesSelection.find(function(Ce){return(0,De.matchCodes)(Ce.attributeCode,fe.get("attributeCode"))});de&&(de.attributeIsEnabled=Q),fe.get("options").each(function(Ce){C.setOptionSelectionEnabled(U,Ce.get("optionID"),Q)})}}),Le(this,"setOptionSelectionEnabled",function(U,Q,fe){var de=C.zkProduct.get("attributes").find(function(Ke){return Ke.get("attributeID")==U});if(de){var Ce=de.get("options").find(function(Ke){return Ke.get("optionID")==Q});if(Ce){var Ye=C.platformAttributesSelection.find(function(Ke){return(0,De.matchCodes)(Ke.attributeCode,de.get("attributeCode"))});Ye&&(0,De.matchCodes)(Ye.optionCode,Ce.get("optionCode"))&&(Ye.optionIsEnabled=fe)}}C.updateRecapAndExtensionField()}),Le(this,"isOptionEnabled",function(U){var Q=!1;return C.selection.get("groups").each(function(fe){fe.get("attributes").each(function(de){var Ce=de.get("options").find(function(Ye){return Ye.get("optionID")==U});Ce&&(Q=Ce.get("enabled"))})}),Q}),Le(this,"updateComposition",function(){C.selection.updateComposition(C.composition),C.updatePrice()}),Le(this,"_updatePrice",Ot(Ue().mark(function U(){var Q,fe,de;return Ue().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(Q=0,fe=!1,!(C.composition&&C.zkProduct)){Ye.next=8;break}return Ye.next=5,C.getPrice();case 5:de=Ye.sent,Q=de.price,fe=de.isOutOfStock;case 8:C.price=Q,C.isOutOfStock=fe,C.trigger("change");case 11:case"end":return Ye.stop()}},U)}))),Le(this,"updatePrice",Fe().debounce(this._updatePrice,300)),Le(this,"buildStructure",function(){var U=[];if(C.selection){for(var Q=0;Q<C.selection.get("groups").length;Q++){var fe=C.selection.get("groups").at(Q),de=C.createGroupFromSelection(fe);U.push(de)}U.sort(function(Ce,Ye){return Ce.displayOrder-Ye.displayOrder})}C.groups=U,C.trigger("change")}),Le(this,"createGroupFromSelection",function(U){var Q=C.zkProduct.get("attributeGroups").get(U.get("groupID")),fe=Q?Q.get("imageUrl"):null,de=new Qe.Group;de.id=Q?Q.get("groupID"):-1,de.guid=Q?Q.get("groupGuid"):"-1",de.name=Q?Q.get("name"):"Other",de.imageUrl=fe,de.enabled=!0,de.cameraLocationId=Q?Q.get("sceneCameraLocationID"):null,de.steps=C.zkProduct.get("attributeSteps").filter(function(qe){return qe.get("groupID")==de.id}).map(function(qe){return C.createStep(qe,U)}),Q&&(de.displayOrder=Q.get("displayOrder"),de.direction=Q.get("direction"),de.attributesAlwaysOpened=Q.get("attributesAlwaysOpened"));for(var Ce=function(){var ht=U.get("attributes").at(Ye),Pt=C.zkProduct.get("attributes").find(function(Ge){return Ge.get("attributeID")==ht.get("attributeID")});if(Pt.get("stepID")==-1){var xt=C.createAttributeFromSelection(ht);de.attributes.push(xt)}},Ye=0;Ye<U.get("attributes").length;Ye++)Ce();de.attributes.sort(function(qe,ht){return qe.displayOrder-ht.displayOrder});var Ke=U==null?void 0:U.get("templateGroups");if(Ke)for(var ct=function(){var ht=C.zkProduct.get("templateGroups").at(_t),Pt=Ke.find(function(Ge){return Ge.get("templateGroupID")==ht.get("templateGroupID")});if(Pt&&ht.get("stepID")==null){var xt=C.createTemplateGroupFromSelection(Pt);de.templateGroups.push(xt)}},_t=0;_t<C.zkProduct.get("templateGroups").length;_t++)ct();return de.templateGroups.sort(function(qe,ht){return qe.displayOrder-ht.displayOrder}),de}),Le(this,"createAttributeFromSelection",function(U){var Q=C.zkProduct.get("attributes").get(U.get("attributeID")),fe=new Qe.Attribute;fe.id=Q.get("attributeID"),fe.guid=Q.get("attributeGuid"),fe.code=Q.get("attributeCode"),fe.name=Q.get("name")||"",fe.description=Q.get("description")||"",fe.optionShapeType=Q.get("optionPreviewShapeID")==1?Qe.AttributeOptionShapeType.Round:Qe.AttributeOptionShapeType.Square,fe.displayOrder=Q.get("displayOrder"),fe.enabled=U.get("enabled"),fe.groupId=Q.get("groupID"),fe.stepId=Q.get("stepID"),fe.hideOptionsLabel=Q.get("hideOptionsLabel"),fe.cameraLocationId=Q?Q.get("sceneCameraLocationID"):null;for(var de=0;de<U.get("options").length;de++){var Ce=U.get("options").at(de),Ye=C.createOptionFromSelection(Ce);Ye.attribute=fe,fe.options.push(Ye)}return U.get("attributeTypeID")==MPlaza.AttributeType.Options?fe.type=Qe.AttributeType.Select:U.get("attributeTypeID")==MPlaza.AttributeType.Color?(fe.type=Qe.AttributeType.Colorpicker,fe.value=U.get("selectedValue")):(U.get("attributeTypeID")==MPlaza.AttributeType.Number||U.get("attributeTypeID")==MPlaza.AttributeType.String)&&(fe.type=Qe.AttributeType.Colorpicker,fe.value=U.get("selectedValue"),fe.numberFormat=""),fe.options.sort(function(Ke,ct){return Ke.displayOrder-ct.displayOrder}),fe}),Le(this,"createOptionFromSelection",function(U){var Q=C.zkProduct.get("attributes").get(U.get("attributeID")).get("options").get(U.get("optionID")),fe=new Qe.Option,de=C.zkProduct.get("attributes").get(U.get("attributeID")).get("pricings");if(de.length>0){var Ce,Ye=(Ce=de.find(function(Ke){return Ke.get("selectedOptionID")===U.get("optionID")}))===null||Ce===void 0?void 0:Ce.get("price");Ye&&(fe.pricings=[{fromQuantity:0,price:Ye}])}return fe.id=Q.get("optionID"),fe.guid=Q.get("optionGuid"),fe.code=Q.get("optionCode"),fe.name=Q.get("name")||"",fe.description=Q.get("description")||"",fe.imageUrl=Q.get("imageUrl"),fe.displayOrder=Q.get("displayOrder"),fe.selected=U.get("selected"),fe.enabled=U.get("enabled"),fe}),Le(this,"createTemplateGroupFromSelection",function(U){var Q,fe=C.zkProduct.get("templateGroups").find(function(qe){return qe.get("templateGroupID")===U.get("templateGroupID")});if(!fe)return new Be.ThemeTemplateGroup;var de=new Be.ThemeTemplateGroup;de.templateGroupID=fe.get("templateGroupID"),de.name=(Q=fe.get("name"))!==null&&Q!==void 0?Q:"",de.groupID=fe.get("groupID"),de.stepID=fe.get("stepID"),de.displayOrder=fe.get("displayOrder");for(var Ce=function(){var ht=U.get("macrocategory").at(Ye),Pt=fe.get("macrocategory").find(function(bt){return bt.get("macroCategoryID")===ht.get("macroCategoryID")});if(!Pt)return{v:de};var xt=new Be.ThemeMacroCategory;xt.id=Pt.get("macroCategoryID"),xt.name=Pt.get("name");var Ge=function(){var Vt=ht.get("category").at(Ke),_n=Pt.get("category").find(function(Jn){return Jn.get("categoryID")===Vt.get("categoryID")});if(!_n)return{v:{v:de}};var Yn=new Be.ThemeCategory;Yn.id=_n.get("categoryID"),Yn.name=_n.get("name");var or=function(){var $n=Vt.get("composition").at(ct),Tn=_n.get("composition").find(function(tr){return tr.get("compositionID")===$n.get("compositionID")});if(!Tn)return{v:{v:{v:de}}};var Gn=new Be.TemplateComposition;Gn.name=Tn.get("name"),Gn.previewImageUrl=Tn.get("previewImageUrl"),Gn.compositionID=Tn.get("compositionID"),Yn.composition.push(Gn)};for(ct=0;ct<Vt.get("composition").length;ct++){var lr=or();if(Jt(lr)==="object")return lr.v}xt.category.push(Yn)};for(Ke=0;Ke<ht.get("category").length;Ke++){var en=Ge();if(Jt(en)==="object")return en.v}de.macroCategory.push(xt)},Ye=0;Ye<U.get("macrocategory").length;Ye++){var Ke,ct,_t=Ce();if(Jt(_t)==="object")return _t.v}return de}),Le(this,"saveDesignBackbone",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",new Promise(function(Ye,Ke){var ct=C.zkCurrentTemplate;if(!ct){Ye();return}ct.save(null,{success:function(qe){C.composition.set("designDocID",qe.get("docID")),Ye()},error:function(){Ke()},headers:{fromBackOffice:!!C.isDraftEditor,isSharing:!!fe}})}));case 1:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"saveCompositionBackbone",Ot(Ue().mark(function U(){return Ue().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.abrupt("return",new Promise(function(de,Ce){C.composition.save(null,{success:function(){de()},error:function(){Ce()},headers:{fromBackOffice:!!C.isDraftEditor}})}));case 1:case"end":return fe.stop()}},U)}))),Le(this,"trigger",function(U){for(var Q=arguments.length,fe=new Array(Q>1?Q-1:0),de=1;de<Q;de++)fe[de-1]=arguments[de];var Ce=rn(C.events.filter(function(ct){return ct.event==U})),Ye;try{for(Ce.s();!(Ye=Ce.n()).done;){var Ke=Ye.value;Ke.callback?Ke.callback.apply(C,fe):console.error("Event handler can't be null or undefined")}}catch(ct){Ce.e(ct)}finally{Ce.f()}}),Le(this,"on",function(U,Q){C.events.push(new Qe.ZakekeEvent(U,Q))}),Le(this,"off",function(U,Q){C.events=C.events.filter(function(fe){return fe.event==U&&fe.callback==Q})}),Le(this,"setTemplate",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return C.zkCurrentTemplate=C.zkTemplates.find(function(Ye){return Ye.get("templateDesignID")==fe}),C.currentTemplate=C.templates.find(function(Ye){return Ye.id==fe})||null,Ce.next=4,(0,ae.downloadFontsOfDesign)(C.zkCurrentTemplate,C.fonts);case 4:C.renderDesign();case 5:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"getTemplateUploadRestrictictions",function(U,Q){var fe,de,Ce,Ye,Ke,ct,_t,qe,ht,Pt=C.zkTemplates.find(function(Vt){return Vt.get("templateDesignID")==U});if(!Pt)throw"Template does not exists with id "+U;var xt=Pt.getDesignSide(C.zkProduct.get("colors").at(0).get("sides").get(Q)),Ge=function(_n){var Yn,or;if(xt&&xt.get("uploadRestrictions"))return(Yn=xt.get("uploadRestrictions"))===null||Yn===void 0?void 0:Yn[_n];if(Pt.get("uploadRestrictions"))(or=Pt.get("uploadRestrictions"))===null||or===void 0||or[_n];else return null},en=(fe=C.settings.addons.find(function(Vt){return Vt.addonName==="PDF"||Vt.addonName==="PDF_EPS"})||C.settings.isPdfEpsEnabled)!==null&&fe!==void 0?fe:!1,bt=(de=C.settings.addons.find(function(Vt){return Vt.addonName==="EPS"||Vt.addonName==="PDF_EPS"})||C.settings.isPdfEpsEnabled)!==null&&de!==void 0?de:!1;return{isUserImageAllowed:(Ce=Ge("isUserImageAllowed"))!==null&&Ce!==void 0?Ce:!0,isJpgAllowed:(Ye=Ge("isJpgAllowed"))!==null&&Ye!==void 0?Ye:!0,isPngAllowed:(Ke=Ge("isPngAllowed"))!==null&&Ke!==void 0?Ke:!0,isSvgAllowed:(ct=Ge("isSvgAllowed"))!==null&&ct!==void 0?ct:!0,isPdfAllowed:((_t=Ge("isPdfAllowed"))!==null&&_t!==void 0?_t:!0)&&!!en,isEpsAllowed:((qe=Ge("isEpsAllowed"))!==null&&qe!==void 0?qe:!0)&&!!bt,isPdfWithRasterAllowed:((ht=Ge("isPdfWithRasterAllowed"))!==null&&ht!==void 0?ht:!0)&&!!en}}),Le(this,"getTemplates",Ot(Ue().mark(function U(){return Ue().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.abrupt("return",new Promise(function(){var de=Ot(Ue().mark(function Ce(Ye,Ke){var ct,_t,qe,ht,Pt,xt;return Ue().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:return en.next=2,me.axiosApi.get("designs/templates/"+C.zkProduct.get("modelID"));case 2:if(ct=en.sent.data,_t=[],!(ct.length>0)){en.next=24;break}qe=rn(ct[0].categories[0].templates),en.prev=6,qe.s();case 8:if((ht=qe.n()).done){en.next=16;break}return Pt=ht.value,en.next=12,C.getTemplate(Pt.designID);case 12:xt=en.sent,_t.push(xt);case 14:en.next=8;break;case 16:en.next=21;break;case 18:en.prev=18,en.t0=en.catch(6),qe.e(en.t0);case 21:return en.prev=21,qe.f(),en.finish(21);case 24:Ye(_t);case 25:case"end":return en.stop()}},Ce,null,[[6,18,21,24]])}));return function(Ce,Ye){return de.apply(this,arguments)}}()));case 1:case"end":return fe.stop()}},U)}))),Le(this,"saveProduct",Ot(Ue().mark(function U(){return Ue().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.abrupt("return",new Promise(function(de,Ce){C.zkProduct&&C.zkProduct.save(null,{success:function(Ke,ct,_t){de()},error:function(Ke,ct,_t){Ce(ct)}})}));case 1:case"end":return fe.stop()}},U)}))),Le(this,"getTemplate",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",new Promise(function(Ye,Ke){var ct=new MPlaza.Design;ct.set("docID",fe),ct.fetch({success:function(){var _t=Ot(Ue().mark(function ht(){return Ue().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:Ye(ct);case 1:case"end":return xt.stop()}},ht)}));function qe(){return _t.apply(this,arguments)}return qe}(),error:function(){return null},data:{template:!0}}),ct.addEventListener("change",C.updatePrice)}));case 1:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"updateView",function(){C.viewer.updateView()}),Le(this,"selectOption",function(U){var Q=C.cloneSelection(C.selection);C.undoStack.push(Q);var fe,de;if(C.zkProduct.get("attributes").each(function(Ce){var Ye=Ce.get("options").find(function(Ke){return Ke.get("optionID")==U});Ye&&(fe=Ye,de=Ce)}),fe){if(fe.selected)return;C.selection.selectAttributeValue(de.get("attributeID"),U.toString())}else throw new we.Exception("Invalid option with id "+U)}),Le(this,"focusGroup",function(U){var Q=C.groups.find(function(fe){return fe.id==U});Q&&Q.cameraLocationId&&(C.viewer.setCameraLocation(Q.cameraLocationId),C.lastCameraLocation=Q.cameraLocationId)}),Le(this,"focusAttribute",function(){var U=Ot(Ue().mark(function Q(fe){var de,Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return de=C.selection.getAttributeUnselectedOptionsSceneActions(fe),Ke.next=3,C.viewer.prefetchDataForUnselectedOptionsAsync(de);case 3:Ce=C.zkProduct.get("attributes").find(function(ct){return ct.get("attributeID")==fe}),Ce&&Ce.get("sceneCameraLocationID")&&Ce.get("sceneCameraLocationID")!=Zakeke.getEmptyUUID()&&(C.viewer.setCameraLocation(Ce.get("sceneCameraLocationID")),C.lastCameraLocation=Ce.get("sceneCameraLocationID"));case 5:case"end":return Ke.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"base64StringToFile",function(U,Q){for(var fe,de,Ce,Ye=U.split(","),Ke=(fe=(de=Ye[0])===null||de===void 0||(Ce=de.match(/:(.*?);/))===null||Ce===void 0?void 0:Ce[1])!==null&&fe!==void 0?fe:"",ct=atob(Ye[1]),_t=ct.length,qe=new Uint8Array(_t);_t--;)qe[_t]=ct.charCodeAt(_t);return new File([qe],Q,{type:Ke})}),Le(this,"saveTemplate",function(){var U=Ot(Ue().mark(function Q(fe,de,Ce){var Ye,Ke,ct,_t,qe,ht,Pt,xt,Ge,en;return Ue().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:if(Ye=Array.from(Ce.keys()),Ke=C.composition.get("compositionItems"),Ke.toArray().forEach(function(_n){Ye.includes(_n.get("attributeID"))||Ke.remove(_n)}),C.composition.set("name",fe),C.composition.set("compositionItems",Ke),C.composition.set("isTemplate",!0),ct=new MPlaza.CompositionCategoriesMapping,de)_t=new MPlaza.CompositionCategoryMapping,_t.set("categoryID",de),_t.set("name"," "),ct.add(_t);else if(C.selectedTemplateCategory)try{qe=new MPlaza.CompositionCategoryMapping,ht=C.selectedTemplateCategory.split(";"),qe.set("categoryID",Number.parseInt(ht[0])),qe.set("name",ht[1]),ct.add(qe)}catch(_n){console.error("Error while parsing associated category for template",_n,C.selectedTemplateCategory)}if(C.composition.set("categories",ct),C.zkProduct.get("templateGroups").length!==0){Vt.next=16;break}return Pt=new MPlaza.TemplateGroup,Pt.set("name","Pre-set configurations"),C.zkProduct.get("attributeGroups").length>0?(xt=new MPlaza.AttributeGroup,xt.set("name","Pre-set configurations"),xt.set("displayOrder",C.zkProduct.get("attributeGroups").at(0).get("displayOrder")-1),C.zkProduct.get("attributeGroups").unshift(xt),Pt.set("groupGuid",xt.get("groupGuid"))):C.zkProduct.get("attributeSteps")&&C.zkProduct.get("attributeSteps").length>0?(Ge=new MPlaza.AttributeStep,Ge.set("name","Pre-set configurations"),Ge.set("groupGuid",Zakeke.generateUUID()),Ge.set("displayOrder",C.zkProduct.get("attributeSteps").at(0).get("displayOrder")-1),C.zkProduct.get("attributeSteps").unshift(Ge),Pt.set("stepGuid",Ge.get("stepGuid"))):(en=C.zkProduct.get("attributes").filter(function(_n){return _n.get("groupID")===-1}).sort((0,De.ascComparator)(function(_n){return _n.get("displayOrder")})),en.length>0&&Pt.set("displayOrder",en[0].get("displayOrder")-1)),C.zkProduct.get("templateGroups").add(Pt),Vt.next=16,C.saveProduct();case 16:return Vt.next=18,C.addToCart([],void 0,void 0,void 0);case 18:return Vt.next=20,C.reset();case 20:case"end":return Vt.stop()}},Q)}));return function(Q,fe,de){return U.apply(this,arguments)}}()),Le(this,"addToCart",function(){var U=Ot(Ue().mark(function Q(fe,de,Ce,Ye){var Ke,ct,_t,qe,ht,Pt,xt,Ge,en,bt,Vt,_n,Yn;return Ue().wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return lr.next=2,C.setExplodedMode(!1);case 2:if(C.pdSettings&&C.composition.set("pdSettings",C.pdSettings),C.composition.set("compositionClientPreviews",[]),ct=[],_t=[],qe=[],ht=(Ke=C.zkScene)===null||Ke===void 0?void 0:Ke.get("cameraLocations").filter(function(Jn){var $n;return(($n=Jn.get("name"))===null||$n===void 0?void 0:$n.toLowerCase().indexOf("buy_screenshot_camera_"))!==-1}),ht&&(_t=(0,B.sortBy)(ht,function(Jn){return Jn.get("name")})),!(_t&&_t.length>0)){lr.next=42;break}Pt=rn(_t),lr.prev=11,Pt.s();case 13:if((xt=Pt.n()).done){lr.next=33;break}return Ge=xt.value,lr.next=17,C.viewer.getSceneContentScreenshotAsync(C.clientPreviewWidth,C.clientPreviewHeight,0,C.zkCurrentTemplate,Ce,Ge);case 17:if(en=lr.sent,bt=new FormData,en){lr.next=21;break}return lr.abrupt("return");case 21:return Vt=C.base64StringToFile(en,Ge+".png"),bt.set("file",Vt),lr.next=25,me.axiosApi.post(Zakeke.config.baseApiUrl+"compositions/upload-client-preview",bt);case 25:return _n=lr.sent.data,ct.push({fileObjectID:_n.id,cameraName:Ge.get("name"),url:_n.url}),Yn={url:_n.url,cameraName:Ge.get("name")},qe.push(Yn),lr.next=31,(0,De.sleep)(1);case 31:lr.next=13;break;case 33:lr.next=38;break;case 35:lr.prev=35,lr.t0=lr.catch(11),Pt.e(lr.t0);case 38:return lr.prev=38,Pt.f(),lr.finish(38);case 41:C.composition.set("compositionClientPreviews",ct);case 42:return C.composition.get("isDraft")&&!C.isDraftEditor&&(C.composition.set("docID",null),C.composition.set("designDocID",null),C.composition.set("isDraft",!1),C.zkCurrentTemplate&&C.zkCurrentTemplate.set("docID",null)),console.log("previewFiles",qe),lr.next=46,C.saveComposition(void 0,Ce);case 46:if(!Ye){lr.next=49;break}return lr.next=49,C.saveCustomerWalletInfo(C.composition.get("docID"),Ye.email,Ye.walletAddress);case 49:if(!de){lr.next=53;break}return lr.next=52,de({composition:C.composition.id,preview:C.composition.get("previewImageUrl"),attributes:C.platformAttributesSelection,designItems:C.getDesignItemsInfo(),quantity:C.quantity,previewFiles:qe,additionalProperties:fe});case 52:fe=lr.sent;case 53:C.integration.addToCart(C.composition,C.zkCurrentTemplate,C.zkProduct,C.platformAttributesSelection,C.getDesignItemsInfo(),C.quantity,fe,Ye&&C.settings.ecommerceID===3&&C.nftSettings?C.nftSettings.priceToAdd:0);case 54:case"end":return lr.stop()}},Q,null,[[11,35,38,41]])}));return function(Q,fe,de,Ce){return U.apply(this,arguments)}}()),Le(this,"zoomIn",function(){C.viewer&&C.viewer.zoomIn()}),Le(this,"zoomOut",function(){C.viewer&&C.viewer.zoomOut()}),Le(this,"isFullscreenEnabled",function(){return!De.iOS}),Le(this,"switchFullscreen",function(){var U=null;C.viewer.switchFullScreen(document.querySelector(".zakeke-viewer-container")),U||(U=setInterval(function(){C.isFullscreenMode&&C.internalIsFullscreen==!1&&setTimeout(function(){C.viewer.updateView(),C.viewer.updateView(),C.internalIsFullscreen=!0,console.info("Fullscreen enabled")},10),!C.isFullscreenMode&&C.internalIsFullscreen==!0&&(clearInterval(U),U=null,setTimeout(Ot(Ue().mark(function Q(){return Ue().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return C.internalIsFullscreen=!1,de.next=3,C.extendedUpdate();case 3:C.viewer.updateView(),C.viewer.updateView(),console.info("Fullscreen disabled");case 6:case"end":return de.stop()}},Q)})),10))},100))}),Le(this,"openSecondScreen",function(){var U=Zakeke.config.baseUrl+"en/SecondScreen?token="+C.token+"&modelID="+C.zkProduct.get("modelID");window.open(U)}),Le(this,"extendedUpdate",Ot(Ue().mark(function U(){return Ue().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.abrupt("return",new Promise(function(de,Ce){var Ye=0,Ke=setInterval(function(){C.viewer.updateView(),++Ye>20&&(clearInterval(Ke),de())},100)}));case 1:case"end":return fe.stop()}},U)}))),Le(this,"exportSceneToUsdz",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(!(C.viewer&&C.viewer.zkScene)){Ce.next=2;break}return Ce.abrupt("return",C.viewer.exportSceneToUsdzAsync(C.viewer.zkScene.get("sceneID"),fe));case 2:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"exportSceneToGlb",Ot(Ue().mark(function U(){return Ue().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.abrupt("return",C.viewer.exportSceneToLocalGLBAsync());case 1:case"end":return fe.stop()}},U)}))),Le(this,"setExplodedMode",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(!C.viewer){Ce.next=8;break}if(!fe){Ce.next=6;break}return Ce.next=4,C.viewer.explodeMeshes();case 4:Ce.next=8;break;case 6:return Ce.next=8,C.viewer.collapseMeshes();case 8:C.isExplodedMode=fe;case 9:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"hasExplodedMode",function(){var U=C.zkScene;return U?!!U.getFirstExplodedMeshLocation():!1}),Le(this,"setBackgroundColor",function(U,Q){var fe=C.zkScene;if(U.indexOf("rgb")==0){var de=U.replace("rgb(","").replace(")","").split(",");U=(0,De.rgb2hex)(de[0],de[1],de[2])}C.viewer&&fe&&(fe.getOrCreateEnvironmentConfig().set("mainColor",U),fe.getOrCreateGeneralConfig().set("backgroundColor",U),fe.getOrCreateGeneralConfig().set("backgroundAlpha",Q),C.viewer.refreshEnvironment())}),Le(this,"getCurrentSelection",function(){return Fe().cloneDeep(C.platformAttributesSelection)}),Le(this,"getScreenshot",Ot(Ue().mark(function U(){var Q,fe,de,Ce,Ye,Ke,ct,_t=arguments;return Ue().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return Q=_t.length>0&&_t[0]!==void 0?_t[0]:1024,fe=_t.length>1&&_t[1]!==void 0?_t[1]:1024,de=_t.length>2?_t[2]:void 0,Ce=_t.length>3&&_t[3]!==void 0?_t[3]:null,Ye=_t.length>4&&_t[4]!==void 0?_t[4]:0,Ke=_t.length>5&&_t[5]!==void 0?_t[5]:null,ht.next=8,C.viewer.getSceneContentScreenshotAsync(Q,fe,Ye,C.zkCurrentTemplate,de,Ke);case 8:if(ct=ht.sent,ct){ht.next=11;break}throw new Error("Failed generating screenshot");case 11:if(!Ce){ht.next=14;break}return ht.next=14,new Promise(function(Pt){var xt=new Image;xt.onload=function(){var Ge=document.createElement("canvas");Ge.width=xt.width,Ge.height=xt.height;var en=Ge.getContext("2d");en&&(en.fillStyle=Ce,en.fillRect(0,0,xt.width,xt.height),en.drawImage(xt,0,0),ct=Ge.toDataURL(),Pt())},xt.src=ct});case 14:return ht.abrupt("return",ct);case 15:case"end":return ht.stop()}},U)}))),Le(this,"fireItemsChange",function(){C.trigger("change")}),Le(this,"removeItem",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",new Promise(function(Ye,Ke){C.viewer?(C.viewer.removeDesignItem(fe),C.fireItemsChange(),Ye()):Ke("Called remove item but no viewer or viewer not ready")}));case 1:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"setItemText",function(U,Q){if(C.viewer)C.viewer.setDesignItemText(U,Q);else throw"Called set item text but no viewer or viewer not ready"}),Le(this,"setItemItalic",function(U,Q){if(C.viewer)C.viewer.setDesignItemItalic(U,Q);else throw"Called set item italic but no viewer or viewer not ready"}),Le(this,"setItemBold",function(U,Q){if(C.viewer)C.viewer.setDesignItemBold(U,Q);else throw"Called set item bold but no viewer or viewer not ready"}),Le(this,"setItemColor",function(U,Q){if(C.viewer)C.viewer.setDesignItemColor(U,Q);else throw"Called set item color but no viewer or viewer not ready"}),Le(this,"setItemFontFamily",function(){var U=Ot(Ue().mark(function Q(fe,de){var Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(!C.viewer){Ke.next=12;break}if(Ce=C.fonts.find(function(ct){return ct.name===de}),!Ce){Ke.next=9;break}return Ke.next=5,(0,ae.loadFonts)([Ce]).catch(function(ct){console.error("Error loading font",ct,Ce)});case 5:C.viewer.setDesignItemFontFamily(fe,de),C.fireItemsChange(),Ke.next=10;break;case 9:console.warn("No font found for ".concat(de));case 10:Ke.next=13;break;case 12:throw"Called set item font family but no viewer or viewer not ready";case 13:case"end":return Ke.stop()}},Q)}));return function(Q,fe){return U.apply(this,arguments)}}()),Le(this,"setItemTextOnPath",function(U,Q,fe){if(C.viewer)C.viewer.setItemTextOnPath(U,Q,fe),C.fireItemsChange();else throw"Called toggleItemTextOnPath but no viewer or viewer not ready"}),Le(this,"sanitizeString",function(U,Q){var fe,de=(fe=U.faces[0])!==null&&fe!==void 0?fe:null;return de?(0,ae.sanitizeString)(de,Q):Q}),Le(this,"getSanitationText",function(U,Q){var fe,de=(fe=U.faces[0])!==null&&fe!==void 0?fe:null;return de?(0,ae.sanitizeText)(de,Q):{dirtyChars:[],sanitizedText:Q}}),Le(this,"createImage",function(){var U=Ot(Ue().mark(function Q(fe,de){var Ce,Ye,Ke,ct,_t;return Ue().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(!C.viewer){ht.next=11;break}return Ye=new Pe.default(C.culture,C.token),Ke=(Ce=C.zkProduct)===null||Ce===void 0?void 0:Ce.get("printTypes"),Ye.addPrintingOptions(Ke),ht.next=6,Ye.upload(fe,de);case 6:return ct=ht.sent,_t=ct?ct[0]:null,ht.abrupt("return",_t);case 11:throw"Called create image but no viewer or viewer not ready";case 12:case"end":return ht.stop()}},Q)}));return function(Q,fe){return U.apply(this,arguments)}}()),Le(this,"createImageFromUrl",function(){var U=Ot(Ue().mark(function Q(fe){var de;return Ue().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(!C.viewer){Ye.next=7;break}return Ye.next=3,me.axiosApi.post(Zakeke.config.baseApiUrl+"images/import/url",{url:fe});case 3:return de=Ye.sent.data,Ye.abrupt("return",de);case 7:throw"Called create image from url but no viewer or viewer not ready";case 8:case"end":return Ye.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"addItemImage",function(){var U=Ot(Ue().mark(function Q(fe,de){return Ue().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(!C.viewer){Ye.next=8;break}return Ye.next=3,C.viewer.addDesignItemImage(fe,de);case 3:return Ye.next=5,C.renderDesign();case 5:C.fireItemsChange(),Ye.next=9;break;case 8:throw"Called add item text but no viewer or viewer not ready";case 9:case"end":return Ye.stop()}},Q)}));return function(Q,fe){return U.apply(this,arguments)}}()),Le(this,"setItemImageFromFile",function(){var U=Ot(Ue().mark(function Q(fe,de,Ce){var Ye;return Ue().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(!C.viewer){ct.next=9;break}return ct.next=3,C.createImage(de,Ce);case 3:return Ye=ct.sent,ct.next=6,C.setItemImage(fe,Ye.imageID);case 6:C.fireItemsChange(),ct.next=10;break;case 9:throw"Called set item image but no viewer or viewer not ready";case 10:case"end":return ct.stop()}},Q)}));return function(Q,fe,de){return U.apply(this,arguments)}}()),Le(this,"setItemImageFromBase64",function(){var U=Ot(Ue().mark(function Q(fe,de){var Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(!C.viewer){Ke.next=9;break}return Ce=new MPlaza.Image,Ce.set("imageID",-1),Ce.set("previewUrl",de),Ke.next=6,C.viewer.setDesignItemImage(fe,Ce);case 6:C.fireItemsChange(),Ke.next=10;break;case 9:throw"Called set item image but no viewer or viewer not ready";case 10:case"end":return Ke.stop()}},Q)}));return function(Q,fe){return U.apply(this,arguments)}}()),Le(this,"setItemImage",function(){var U=Ot(Ue().mark(function Q(fe,de){return Ue().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.abrupt("return",new Promise(function(){var Ke=Ot(Ue().mark(function ct(_t,qe){var ht;return Ue().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:if(!C.viewer){xt.next=6;break}ht=new MPlaza.Image,ht.set("imageID",de),ht.fetch({success:function(){var Ge=Ot(Ue().mark(function bt(Vt,_n,Yn){return Ue().wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return lr.next=2,C.viewer.setDesignItemImage(fe,ht);case 2:C.fireItemsChange(),_t();case 4:case"end":return lr.stop()}},bt)}));function en(bt,Vt,_n){return Ge.apply(this,arguments)}return en}(),error:function(en,bt,Vt){return null}}),xt.next=7;break;case 6:throw"Called set item image but no viewer or viewer not ready";case 7:case"end":return xt.stop()}},ct)}));return function(ct,_t){return Ke.apply(this,arguments)}}()));case 1:case"end":return Ye.stop()}},Q)}));return function(Q,fe){return U.apply(this,arguments)}}()),Le(this,"getMacroCategories",Ot(Ue().mark(function U(){var Q,fe,de,Ce,Ye;return Ue().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return ct.next=2,me.axiosApi.get("imagemacrocategories/",{params:{productID:(Q=C.product)===null||Q===void 0?void 0:Q.id}});case 2:fe=ct.sent.data,fe=fe.filter(function(_t){return _t.hasImages}),de=rn(fe);try{for(de.s();!(Ce=de.n()).done;)Ye=Ce.value,Ye.categories=Ye.categories.filter(function(_t){return _t.hasImages})}catch(_t){de.e(_t)}finally{de.f()}return ct.abrupt("return",fe);case 7:case"end":return ct.stop()}},U)}))),Le(this,"getImages",function(){var U=Ot(Ue().mark(function Q(fe){var de,Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.next=2,me.axiosApi.get("images/",{params:{type:"lib",c:fe,productID:(de=C.product)===null||de===void 0?void 0:de.id}});case 2:return Ce=Ke.sent.data,Ke.abrupt("return",Ce);case 4:case"end":return Ke.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"getPDF",Ot(Ue().mark(function U(){var Q,fe,de,Ce,Ye,Ke,ct,_t,qe;return Ue().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return de=(Q=C.zkScene)===null||Q===void 0?void 0:Q.get("cameraLocations").find(function(xt){var Ge;return((Ge=xt.get("name"))===null||Ge===void 0?void 0:Ge.toLowerCase())==="pdf_screenshot_camera"}),Pt.next=3,C.getScreenshot(2048,2048,!1,null,0,de);case 3:return Ce=Pt.sent,Ye=C.getDesignItemsInfo(),Ke=(fe=C.product)===null||fe===void 0?void 0:fe.areas.filter(function(xt){return C.isAreaVisible(xt.id)}).map(function(xt){return{name:xt.name,textItems:Ye.filter(function(Ge){return Ge.areaId==xt.id&&Ge.type===Be.ItemType.Text})}}).filter(function(xt){return xt.textItems.length>0}),ct=C.platformAttributesSelection.filter(function(xt){return xt.attributeIsEnabled&&xt.attributeIsEnabled}).map(function(xt){var Ge=xt.attributeLabel,en=xt.attributeCode,bt=xt.optionCode,Vt=xt.optionLabel;return{attributeLabel:Ge,attributeCode:(0,De.isPlatformCode)(en)?"":en,optionLabel:Vt,optionCode:(0,De.isPlatformCode)(bt)?"":bt}}),_t={environment:2,productName:C.zkProduct.get("name"),previewImage:Ce,sides:[],areas:Ke,selectedOptions:ct},Pt.next=10,me.axiosApi.post(Zakeke.config.baseApiUrl+"previewdesigns/pdf",_t,{transformResponse:function(Ge){return Ge},responseType:"text"});case 10:return qe=Pt.sent.data.replace(/"/g,""),Pt.abrupt("return",qe);case 12:case"end":return Pt.stop()}},U)}))),Le(this,"rewriteShareUrl",function(U){var Q=U.split("/SharedPreview")[1];if(C.shareUrlPrefix)return C.shareUrlPrefix+Q;if(!C.isShoppingPreview&&document.referrer&&C.settings.referrerID===2){var fe=/(apps\/configurator\/)([\s\S]*)/gm,de=document.referrer.replace(fe,"$1");return de.endsWith("/")||(de+="/"),de+Q}return U}),Le(this,"getShareCompositionUrl",Ot(Ue().mark(function U(){var Q,fe,de,Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return fe=(Q=C.composition.get("isDraft"))!==null&&Q!==void 0?Q:!1,C.composition.set("isDraft",!1),Ke.next=4,C.saveCompositionCopy(!0);case 4:return de=Ke.sent,C.composition.set("isDraft",fe),Ke.next=8,C.integration.getSharedCompositionUrl(de);case 8:return Ce=Ke.sent,Ke.abrupt("return",Ce.url);case 10:case"end":return Ke.stop()}},U)}))),Le(this,"saveCompositionCopy",function(){var U=Ot(Ue().mark(function Q(fe){var de,Ce,Ye,Ke;return Ue().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return de=null,Ce=null,Ye=C.zkCurrentTemplate,Ye&&(Ce=Ye.get("docID"),Ye.set("docID",null)),de=C.composition.get("docID"),C.composition.set("docID",null),C.composition.set("designDocID",null),_t.next=9,C.saveComposition(void 0,void 0,fe);case 9:return Ke=C.composition.get("docID"),C.composition.set("docID",de),C.composition.set("designDocID",Ce),Ye&&Ye.set("docID",Ce),_t.abrupt("return",Ke);case 14:case"end":return _t.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"getOnlineScreenshot",function(){var U=Ot(Ue().mark(function Q(fe,de,Ce,Ye){var Ke,ct,_t,qe,ht=arguments;return Ue().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:return Ke=ht.length>4&&ht[4]!==void 0?ht[4]:30,xt.next=3,C.getScreenshot(fe,de,Ce,Ye,Ke);case 3:return ct=xt.sent,xt.next=6,me.axiosApi.post(Zakeke.config.baseApiUrl+"designs/save-share-preview",{preview:ct});case 6:return _t=xt.sent.data.url,qe=C.rewriteShareUrl(_t),xt.abrupt("return",{originalUrl:_t,rewrittenUrl:qe});case 9:case"end":return xt.stop()}},Q)}));return function(Q,fe,de,Ce){return U.apply(this,arguments)}}()),Le(this,"isSceneArOnTheFly",function(){var U;return C.viewer?(U=C.zkScene)===null||U===void 0?void 0:U.getAROnTheFly():!1}),Le(this,"isArDeviceCompliant",function(){return De.IS_AR_DEVICE_COMPLIANT}),Le(this,"isAndroidOrIOS",function(){return De.IS_ANDROID||De.IS_IOS}),Le(this,"isAndroid",De.IS_ANDROID),Le(this,"isIOS",De.IS_IOS),Le(this,"buildModelViewerUrl",function(U){var Q,fe=Zakeke.config.baseUrl+"ModelViewer",de=new URL(fe),Ce="",Ye=rn(U),Ke;try{for(Ye.s();!(Ke=Ye.n()).done;){var ct=Ke.value;if(ct.format&&ct.arFileUrl){var _t=encodeURIComponent(ct.arFileUrl),qe="";switch(ct.format){case"gltf":case"glb":qe="gltf="+_t;break;case"usdz":qe="usdz="+_t;break;case"png":qe="poster="+_t;break}qe&&(Ce+=(Ce?"&":"")+qe)}}}catch(Pt){Ye.e(Pt)}finally{Ye.f()}Ce+="&arScale="+(C.zkScene.getARScale()?1:0),Ce+="&arAnchor="+((Q=C.zkScene.getARAnchor())!==null&&Q!==void 0?Q:""),de.search+=Ce;var ht=de.toString();return ht}),Le(this,"isSceneArEnabled",function(){return C.zkScene&&C.zkScene.getAREnabled()||!1}),Le(this,"getPregeneratedARUrl",function(U){var Q,fe,de;return(Q=C.zkScene)===null||Q===void 0||(fe=Q.get("arFiles"))===null||fe===void 0||(de=fe.find(function(Ce){return Ce.get("fileType")==U}))===null||de===void 0?void 0:de.get("url")}),Le(this,"getQrCodeArUrl",function(){var U=Ot(Ue().mark(function Q(fe){var de,Ce,Ye,Ke,ct,_t,qe;return Ue().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(Ye=[],Ke=C.isDAMViewer?(de=(Ce=C.zkProduct)===null||Ce===void 0?void 0:Ce.get("code"))!==null&&de!==void 0?de:void 0:C.selection.getCompositionHashCode(),fe!="Android"){Pt.next=12;break}if(Pt.t0=C.getPregeneratedARUrl("glb"),Pt.t0){Pt.next=8;break}return Pt.next=7,C.viewer.exportSceneToRemoteGLBAsync(C.zkScene.get("sceneID"),Ke,!1);case 7:Pt.t0=Pt.sent;case 8:ct=Pt.t0,ct&&(Ye=[{format:"gltf",arFileUrl:ct}]),Pt.next=21;break;case 12:if(_t=C.getPregeneratedARUrl("glb"),qe=C.getPregeneratedARUrl("usdz"),!(_t&&qe)){Pt.next=18;break}Ye=[{format:"glb",arFileUrl:_t},{format:"usdz",arFileUrl:qe}],Pt.next=21;break;case 18:return Pt.next=20,C.viewer.exportSceneToARAsync(C.zkScene.get("sceneID"),Ke);case 20:Ye=Pt.sent;case 21:if(Ye.length!=0){Pt.next=23;break}return Pt.abrupt("return","");case 23:return C.isDAMViewer&&C.makeDAMAnalyticsView(Qe.DAMViewerAnalyticsEventType.ViewArProdutc),Pt.abrupt("return",C.buildModelViewerUrl(Ye));case 25:case"end":return Pt.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"getMobileArUrl",Ot(Ue().mark(function U(){var Q,fe,de,Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return de=C.isDAMViewer?(Q=(fe=C.zkProduct)===null||fe===void 0?void 0:fe.get("code"))!==null&&Q!==void 0?Q:void 0:C.selection.getCompositionHashCode(),Ce=null,Ke.prev=2,Ke.next=5,document.requestStorageAccess();case 5:Ke.next=10;break;case 7:Ke.prev=7,Ke.t0=Ke.catch(2),console.error("Storage access denied");case 10:if(!C.isSceneArOnTheFly()){Ke.next=16;break}return Ke.next=13,C.getMobileLocalArUrl();case 13:return Ke.abrupt("return",Ce=Ke.sent);case 16:if(!De.IS_IOS){Ke.next=25;break}if(Ke.t1=C.getPregeneratedARUrl("usdz"),Ke.t1){Ke.next=22;break}return Ke.next=21,C.viewer.exportSceneToUsdzAsync(C.zkScene.get("sceneID"),de,!1);case 21:Ke.t1=Ke.sent;case 22:Ce=Ke.t1,Ke.next=31;break;case 25:if(Ke.t2=C.getPregeneratedARUrl("glb"),Ke.t2){Ke.next=30;break}return Ke.next=29,C.viewer.exportSceneToRemoteGLBAsync(C.zkScene.get("sceneID"),de,!1);case 29:Ke.t2=Ke.sent;case 30:Ce=Ke.t2;case 31:return C.isDAMViewer&&C.makeDAMAnalyticsView(Qe.DAMViewerAnalyticsEventType.ViewArProdutc),Ke.abrupt("return",Ce);case 33:case"end":return Ke.stop()}},U,null,[[2,7]])}))),Le(this,"getMobileLocalArUrl",function(){return new Promise(function(U,Q){if(C.zkScene&&C.viewer){var fe=C.zkScene.getSceneID();if(!fe){Q("Scene ID is missing.");return}C.viewer.getSceneRootUrl().then(function(){var de=Ot(Ue().mark(function Ce(Ye){var Ke;return Ue().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(Ye){_t.next=3;break}return Q("Root URL is missing."),_t.abrupt("return");case 3:if(!De.IS_IOS){_t.next=10;break}return _t.next=6,C.viewer.exportSceneToLocalUSDZAsync().catch(function(qe){return console.error("Failed exporting scene to usdz",qe),null});case 6:Ke=_t.sent,Ke?U(Ke):Q("Failed to export scene to USDZ."),_t.next=11;break;case 10:C.viewer.saveGlbOnDatabaseAsync(fe).then(function(qe){var ht="https://files.zakeke.com/files/ar-viewer/ar.html",Pt=new URL(ht),xt="?uploadedModelUrl=".concat(qe);xt+="&rootUrl=".concat(encodeURIComponent(Ye)),xt+="&productId=".concat(C.product.id),xt+="&environment=".concat(C.product.environment),xt+="&token=".concat(C.token),C.zkScene.getARAnchor()&&(xt+="&arAnchor=".concat(C.zkScene.getARAnchor())),Pt.search+=xt;var Ge=Pt.toString();U(Ge)}).catch(function(qe){console.error("Failed saving glb on database",qe),Q(qe)});case 11:case"end":return _t.stop()}},Ce)}));return function(Ce){return de.apply(this,arguments)}}()).catch(function(de){console.error("Failed to get scene root URL",de),Q(de)})}else Q("Viewer or Scene is missing.")})}),Le(this,"openArMobile",function(U){if(C.viewer&&C.zkScene)if(C.isSceneArOnTheFly()&&De.IS_ANDROID)console.log("sono openArMobile e sono su android",U),window.open(U,"_blank");else if(De.IS_IOS){U&&!C.zkScene.getARScale()&&(U+="#allowsContentScaling=0");var Q=document.createElement("a");Q.setAttribute("rel","ar"),Q.setAttribute("href",U),Q.appendChild(document.createElement("img")),Q.click()}else De.IS_ANDROID&&se.AndroidAR.openSceneViewer(U,function(){alert("Device not supported.")},C.zkScene.getARScale(),C.zkScene.getARAnchor())}),Le(this,"registerView",Ot(Ue().mark(function U(){return Ue().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!(!C.zkProduct||C.isShoppingPreview)){fe.next=2;break}return fe.abrupt("return");case 2:return fe.prev=2,fe.next=5,me.axiosApi.post(Zakeke.config.baseApiUrl+"viewscount/addview",{productID:C.zkProduct.get("modelID"),environment:C.zkProduct.get("environment"),ecommerceID:C.settings.ecommerceID});case 5:fe.next=10;break;case 7:fe.prev=7,fe.t0=fe.catch(2),console.error("Failed registering view",fe.t0);case 10:case"end":return fe.stop()}},U,null,[[2,7]])}))),Le(this,"getMeshIDbyName",function(U){var Q,fe;return(Q=C.viewer)===null||Q===void 0||(fe=Q.getMeshByName(U))===null||fe===void 0?void 0:fe.id}),Le(this,"hideMeshAndSaveState",function(U){if(C.viewer.scene){var Q=C.viewer.getMeshByID(U);if(Q){var fe=[Q].concat(Ne(Q.getChildMeshes())),de=rn(fe),Ce;try{for(de.s();!(Ce=de.n()).done;){var Ye=Ce.value;C.previousMeshesVisibleStates[Ye.id]=Ye.isVisible,Ye.isVisible=!1}}catch(Ke){de.e(Ke)}finally{de.f()}C.viewer.setRenderingNeeded()}}}),Le(this,"restoreMeshVisibility",function(U){if(C.viewer.scene){var Q=C.viewer.getMeshByID(U);if(Q&&C.previousMeshesVisibleStates[Q.id]!==void 0){var fe=[Q].concat(Ne(Q.getChildMeshes())),de=rn(fe),Ce;try{for(de.s();!(Ce=de.n()).done;){var Ye=Ce.value;Ye.isVisible=C.previousMeshesVisibleStates[Ye.id],delete C.previousMeshesVisibleStates[Ye.id]}}catch(Ke){de.e(Ke)}finally{de.f()}C.viewer.setRenderingNeeded()}}}),Le(this,"setMeshDesignVisibility",function(U,Q){C.viewer&&(C.viewer.setDesignVisibility(U,Q),C.viewer.setRenderingNeeded())}),Le(this,"addFocusAttributesListener",function(U){C.viewer&&C.viewer.addFocusAttributesListener(U)}),Le(this,"clearListeners",function(){C.viewer&&C.viewer.clearListeners()}),Le(this,"setCameraLocked",function(U){return C.viewer.setCameraLocked(U)}),Le(this,"isSceneTryOnEnabled",function(){var U;return C.viewer&&C.zkScene&&console.log(C.zkScene.getTryOnEnabled()),C.viewer&&C.zkScene&&(U=C.zkScene.getTryOnEnabled())!==null&&U!==void 0?U:!1}),Le(this,"getTryOnUrl",function(U){return new Promise(function(Q){if(C.zkScene&&C.viewer){var fe=C.zkScene.getSceneID();C.viewer.getSceneRootUrl().then(function(de){if(de){var Ce="noseBridge";C.viewer.saveVisibleMeshesOnDatabaseAsync(fe).then(function(){var Ye=U??"https://zakekecdn.blob.core.windows.net/cdn/c/tryon/index.html",Ke=new URL(Ye),ct="id="+fe;ct+="&rootUrl="+encodeURIComponent(de),ct+="&attachmentPoint="+Ce,ct+="&productId="+C.zkProduct.get("modelID"),ct+="&environment="+C.zkProduct.get("environment"),ct+="&token="+C.token,Ke.search+=ct;var _t=Ke.toString();Q(_t)})}})}})}),Le(this,"saveComposition",function(){var U=Ot(Ue().mark(function Q(fe,de,Ce){var Ye,Ke,ct,_t,qe,ht,Pt,xt,Ge;return Ue().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return console.log("Saving..."),_t=(Ye=C.zkScene)===null||Ye===void 0?void 0:Ye.get("cameraLocations").find(function(Vt){var _n;return((_n=Vt.get("name"))===null||_n===void 0?void 0:_n.toLowerCase())==="buy_screenshot_camera"}),_t||C.viewer.restoreCameraState(),bt.next=5,(0,De.sleep)(1);case 5:return bt.next=7,C.viewer.getSceneContentScreenshotAsync((Ke=fe==null?void 0:fe.customCartPreviewHeight)!==null&&Ke!==void 0?Ke:C.previewWidth,(ct=fe==null?void 0:fe.customCartPreviewWidth)!==null&&ct!==void 0?ct:C.previewHeight,0,C.zkCurrentTemplate,de,_t);case 7:if(qe=bt.sent,C.pdSettings&&C.composition.set("pdSettings",C.pdSettings),C.composition.set("previewImageData",qe),!(!C.composition.get("isTemplate")&&C.zkCurrentTemplate)){bt.next=24;break}if(ht=C.zkCurrentTemplate,Pt=ht.get("designItems"),xt=Pt.filter(function(Vt){return!JSON.parse(Vt.get("json"))[1].data.isTemplateElement}),xt.forEach(function(Vt){Vt.get("areas").length>0&&!C.isAreaVisible(Vt.get("areas").at(0).get("sideID"))&&Pt.remove(Vt)}),Ge=Pt==null?void 0:Pt.toArray().map(function(Vt){return!Vt.get("constraints")||Vt.get("constraints").get("canResize")||Vt.get("constraints").get("canMove")||Vt.get("constraints").get("canDelete")||Vt.get("constraints").get("canRotate")||Vt.get("constraints").get("canEdit")||Vt.get("constraints").get("isPrintable")}).filter(function(Vt){return Vt}).length,!(Ge>0)){bt.next=21;break}return bt.next=19,C.saveDesignBackbone(Ce);case 19:bt.next=22;break;case 21:C.composition.set("designDocID",null);case 22:bt.next=25;break;case 24:C.composition.set("designDocID",null);case 25:return bt.next=27,C.saveCompositionBackbone();case 27:console.log("Composition saved!");case 28:case"end":return bt.stop()}},Q)}));return function(Q,fe,de){return U.apply(this,arguments)}}()),Le(this,"bootstrapComposition",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return C.selection=Zakeke.ComposerSelection.CreateComposerSelection(C.zkProduct),C.composition=fe,Ce.next=4,C.internalLoadComposition(C.composition.id);case 4:C.currentCompositionInfo||(C.currentCompositionInfo={compositionId:"",compositionName:"",compositionTags:[]}),C.currentCompositionInfo.compositionId=C.compositionId,C.currentCompositionInfo.compositionName=C.composition.get("name"),C.currentCompositionInfo.compositionTags=C.composition.get("tags");case 8:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"loadSavedComposition",function(){var U=Ot(Ue().mark(function Q(fe){var de,Ce,Ye;return Ue().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(Ce=(de=C.savedCompositions)===null||de===void 0?void 0:de.find(function(_t){return _t.docID==fe}),Ye=new MPlaza.Composition(Ce),!Ce){ct.next=5;break}return ct.next=5,C.bootstrapComposition(new MPlaza.Composition(Ce));case 5:return C.selection.setupOnComposition(Ye),ct.next=8,C.sync3DAndPlatformSelectionWithCurrentSelection();case 8:C.buildStructure(),C.updatePrice(),C.selection.getAllAttributeSelections().forEach(function(_t){var qe=_t.get("options").find(function(Pt){return Pt.get("selected")}),ht=C.platformAttributesSelection.find(function(Pt){return(0,De.matchCodes)(Pt.attributeCode,_t.get("attributeCode"))});ht&&qe&&(ht.optionCode=qe.get("optionCode"),ht.optionLabel=qe.get("name")),console.log({platformSelection:ht})});case 11:case"end":return ct.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"updateSavedCompositions",Ot(Ue().mark(function U(){var Q,fe;return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,me.axiosApi.get(Zakeke.config.baseApiUrl+"compositiondocs/product/".concat(C.zkProduct.get("modelID")),{params:{draft:!0}});case 2:Q=Ce.sent.data,C.savedCompositions=Q,Q&&(fe=C.themeCompositionsFromSavedCompositions(Q),C.themeCompositions=fe),C.trigger("change");case 6:case"end":return Ce.stop()}},U)}))),Le(this,"themeCompositionsFromSavedCompositions",function(U){var Q=U.map(function(fe){return{name:fe.name,docID:fe.docID,previewImageUrl:fe.previewImageUrl,tags:fe.tags}});return Q}),Le(this,"saveDraftsComposition",function(){var U=Ot(Ue().mark(function Q(fe,de,Ce){return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(C.composition.set("name",fe),C.composition.set("tags",de),C.composition.set("isDraft",!0),!Ce){Ke.next=8;break}return Ke.next=6,C.saveCompositionCopy();case 6:Ke.next=10;break;case 8:return Ke.next=10,C.saveComposition(void 0);case 10:return Ke.abrupt("return",C.updateSavedCompositions());case 11:case"end":return Ke.stop()}},Q)}));return function(Q,fe,de){return U.apply(this,arguments)}}()),Le(this,"deleteSavedComposition",function(){var U=Ot(Ue().mark(function Q(fe){return Ue().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,me.axiosApi.delete(Zakeke.config.baseApiUrl+"compositiondocs/".concat(fe));case 2:C.updateSavedCompositions();case 3:case"end":return Ce.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"applyTemplate",function(){var U=Ot(Ue().mark(function Q(fe){var de,Ce,Ye,Ke;return Ue().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return _t.prev=0,_t.next=3,me.axiosApi.get("proxycompositions/"+fe,{params:{template:!0}});case 3:return _t.next=5,_t.sent.data;case 5:return de=_t.sent,Ce=C.composition.get("compositionItems"),Ye=new MPlaza.CompositionItems(de.compositionItems),Ke=new MPlaza.CompositionItems,Ce.toArray().forEach(function(qe){var ht=Ye.find(function(Pt){return Pt.get("attributeID")===qe.get("attributeID")});Ke.add(ht??qe)}),C.composition.set("compositionItems",Ke),C.selection.setupOnComposition(C.composition),_t.next=14,C.sync3DAndPlatformSelectionWithCurrentSelection();case 14:C.buildStructure(),C.updatePrice(),C.selection.getAllAttributeSelections().forEach(function(qe){var ht=qe.get("options").find(function(xt){return xt.get("selected")}),Pt=C.platformAttributesSelection.find(function(xt){return(0,De.matchCodes)(xt.attributeCode,qe.get("attributeCode"))});Pt&&ht&&(Pt.optionCode=ht.get("optionCode"),Pt.optionLabel=ht.get("name")),console.log({platformSelection:Pt})}),_t.next=22;break;case 19:_t.prev=19,_t.t0=_t.catch(0),console.error(_t.t0);case 22:case"end":return _t.stop()}},Q,null,[[0,19]])}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"configureByAI",function(){var U=Ot(Ue().mark(function Q(fe){var de,Ce,Ye,Ke;return Ue().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return _t.prev=0,_t.next=3,me.axiosApi.get("ai/configuration-by-prompt",{params:{productId:C.zkProduct.get("modelID"),prompt:fe}});case 3:de=_t.sent.data,Ce=rn(de),_t.prev=5,Ke=Ue().mark(function qe(){var ht,Pt,xt;return Ue().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:ht=Ye.value,Pt=C.zkProduct.get("attributes").find(function(bt){return bt.get("name")==ht.attributeName}),Pt&&(xt=Pt.get("options").find(function(bt){return bt.get("name")==ht.optionName}),xt&&C.selectOption(xt.get("optionID")));case 3:case"end":return en.stop()}},qe)}),Ce.s();case 8:if((Ye=Ce.n()).done){_t.next=12;break}return _t.delegateYield(Ke(),"t0",10);case 10:_t.next=8;break;case 12:_t.next=17;break;case 14:_t.prev=14,_t.t1=_t.catch(5),Ce.e(_t.t1);case 17:return _t.prev=17,Ce.f(),_t.finish(17);case 20:_t.next=25;break;case 22:_t.prev=22,_t.t2=_t.catch(0),console.error(_t.t2);case 25:case"end":return _t.stop()}},Q,null,[[0,22],[5,14,17,20]])}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"getTryOnProvidersList",Ot(Ue().mark(function U(){var Q;return Ue().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(!C.tryOnProvidersSettings){de.next=2;break}return de.abrupt("return",C.tryOnProvidersSettings);case 2:return de.next=4,me.axiosApi.get(Zakeke.config.tryOnApiUrl+"tryonprovider/list");case 4:return Q=de.sent,de.abrupt("return",C.tryOnProvidersSettings=Q.data);case 6:case"end":return de.stop()}},U)}))),Le(this,"getTryOnProductInfo",Ot(Ue().mark(function U(){var Q;return Ue().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(C.zkProduct){de.next=2;break}return de.abrupt("return",null);case 2:if(!C.tryOnProductSettings){de.next=4;break}return de.abrupt("return",C.tryOnProductSettings);case 4:return de.next=6,me.axiosApi.get(Zakeke.config.tryOnApiUrl+"tryonproduct/".concat(C.internalProduct.get("modelID")));case 6:return Q=de.sent,C.tryOnProductSettings=Q.data,de.abrupt("return",C.tryOnProductSettings);case 9:case"end":return de.stop()}},U)}))),Le(this,"getMessagesByProductCode",function(){var U=Ot(Ue().mark(function Q(fe){var de,Ce,Ye;return Ue().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return console.log("query",fe),de={name:"messagesByProduct",query:`query getEventMessagesByProduct($productGlobalCode: String!){
							messagesByProduct(productGlobalCode: $productGlobalCode){
								id
								eventGlobalID
								messageId
								messageText
								eventName
								eventId
								closeable
								visible
								addToCartDisabledValue
								enableCheckForSellerImagesValue
								enableAdditionalMessage
								additionalMessage
								eventMessageId
								title
								titleSingleMessage
								infoLink
								defaultMessage
								visibleOnlyOnApi
								addToCartLabel
								visibleLowQualityInfoText
								defaultAdditionalMessageText
								warningText
								onDeleteWarningText
								isDefault
							}
						}`,variables:{productGlobalCode:"guid://Zakeke/Model/"+fe}},ct.next=4,me.axiosApi.post(Zakeke.config.baseApiUrl+"graphql",de);case 4:return Ce=ct.sent,Ye=null,Ce&&Ce.data&&Ce.data.data.messagesByProduct&&(Ye=Ce.data.data.messagesByProduct.map(function(_t){return{eventID:_t.eventId,description:_t.messageText,closeable:_t.closeable,visible:_t.visible,addToCartDisabledIfVisible:_t.addToCartDisabledValue,additionalData:_t.additionalMessage,enableCheckForSellerImages:_t.enableCheckForSellerImagesValue,isDefault:_t.isDefault}}).map(function(_t){return Be.EventMessage.fromMessage(_t)})),ct.abrupt("return",Ye);case 8:case"end":return ct.stop()}},Q)}));return function(Q){return U.apply(this,arguments)}}()),Le(this,"getTryOnSellerInfo",function(){var U=Ot(Ue().mark(function Q(fe,de){var Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(C.settings){Ke.next=2;break}return Ke.abrupt("return",null);case 2:if(!C.tryOnSellerSettings){Ke.next=4;break}return Ke.abrupt("return",C.tryOnSellerSettings);case 4:return Ke.next=6,me.axiosApi.get(Zakeke.config.tryOnApiUrl+"tryoncustomer/?typeID="+fe.toString()+"&providerID="+de.toString());case 6:return Ce=Ke.sent,C.tryOnSellerSettings=Ce.data,Ke.abrupt("return",C.tryOnSellerSettings);case 9:case"end":return Ke.stop()}},Q)}));return function(Q,fe){return U.apply(this,arguments)}}()),Le(this,"setPDDistance",function(U){C.pdSettings=U}),Le(this,"pdDistance",function(){return C.pdSettings}),Le(this,"exportTryOnMeshToGlb",Ot(Ue().mark(function U(){var Q;return Ue().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(C.zkScene){de.next=2;break}return de.abrupt("return",null);case 2:if(C.viewer){de.next=4;break}return de.abrupt("return",null);case 4:if(Q=C.viewer.getTryOnMeshVisible(),Q){de.next=7;break}return de.abrupt("return",null);case 7:return de.abrupt("return",C.viewer.exportMeshToGLBBlob(Q.id));case 8:case"end":return de.stop()}},U)}))),Le(this,"getTryOnSettings",function(){if(C.zkScene)return C.zkScene.getTryOnSettings()}),Le(this,"getDeepARDesktopIframeUrl",Ot(Ue().mark(function U(){var Q,fe,de,Ce,Ye,Ke,ct,_t,qe,ht;return Ue().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:return Q="",xt.prev=1,xt.next=4,C.exportTryOnMeshToGlb();case 4:return fe=xt.sent,de=new FormData,xt.next=8,fe.arrayBuffer();case 8:return Ce=xt.sent,Ye=Math.random().toString(36).substring(7),de.append("blob",new Blob([Ce]),"model_".concat(Ye,".glb")),xt.next=13,fetch(Zakeke.config.baseApiUrl+"tryonassetupload/asset-upload",{method:"POST",body:de,headers:{Accept:"application/json",Authorization:"Bearer "+window.token}});case 13:if(Ke=xt.sent,!Ke.ok){xt.next=26;break}return xt.next=17,Ke.json();case 17:ct=xt.sent,_t=ct,qe=C.tryOnMeshVisibleSettings||Be.DefaultDeepARFineTuningSettings,console.log("settings da getDeepARUrl ",qe),ht=new URLSearchParams({positionX:qe.position.x.toString(),positionY:qe.position.y.toString(),positionZ:qe.position.z.toString(),scale:qe.scale.toString(),environment:qe.environment.toString()}),Q="".concat(_t,"&").concat(ht.toString(),"&isDesktopDeepARUrl=true"),console.log(">>>>>>>>> finalUrl2",Q),xt.next=27;break;case 26:console.error("Error uploading model",Ke);case 27:xt.next=32;break;case 29:xt.prev=29,xt.t0=xt.catch(1),console.error("Error uploading model",xt.t0);case 32:return xt.abrupt("return",Q);case 33:case"end":return xt.stop()}},U,null,[[1,29]])}))),Le(this,"tryOnCountView",function(){var U=Ot(Ue().mark(function Q(fe,de,Ce){return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.next=2,me.axiosApi.post(Zakeke.config.tryOnApiUrl+"tryoncount/view",{sellerID:fe,providerID:de,mode:Ce});case 2:case"end":return Ke.stop()}},Q)}));return function(Q,fe,de){return U.apply(this,arguments)}}()),Le(this,"getPrintingMethodsRestrictions",function(){var U={colorCode:"#000000",isDefault:!0},Q={allowedBold:!0,allowedItalic:!0,allowedCurved:!0,disableTextColors:!1,textColors:[U],defaultColor:"#000000",isPDFPreviewEnabled:!0};if(C.zkProduct&&C.zkProduct.get("printTypes").length>0){var fe=C.zkProduct.get("printTypes").at(0),de=fe.get("printTypeRestrictions");if(de){var Ce,Ye,Ke,ct,_t,qe,ht,Pt;U=at(at({},U),{},{colorCode:(Ce=de.get("defaultColor"))!==null&&Ce!==void 0?Ce:"#000000"});var xt=(Ye=de.get("textColors"))!==null&&Ye!==void 0?Ye:[];xt.find(function(Ge){return Ge.colorCode===U.colorCode})||xt.push(U),Q={allowedBold:(Ke=de.get("allowBold"))!==null&&Ke!==void 0?Ke:!0,allowedItalic:(ct=de.get("allowItalic"))!==null&&ct!==void 0?ct:!0,allowedCurved:(_t=de.get("curvedText"))!==null&&_t!==void 0?_t:!0,disableTextColors:(qe=de.get("disableTextColors"))!==null&&qe!==void 0?qe:!1,textColors:xt,defaultColor:(ht=de.get("defaultColor"))!==null&&ht!==void 0?ht:"#000000",isPDFPreviewEnabled:(Pt=de.get("canPreviewDesignsPDF"))!==null&&Pt!==void 0?Pt:!0}}}return Q}),Le(this,"setMouseWheelZoomEnabled",function(U){C.viewer.setMouseWheelInputEnabled(U)}),Le(this,"setCameraPinchingZoom",function(U){C.viewer.setCameraPinchingZoom(U)}),De.IS_IOS&&(this.previewHeight=512,this.previewWidth=512)}return zt(We,[{key:"internalProduct",get:function(){return this.zkProduct}},{key:"internalScene",get:function(){return this.zkScene}},{key:"internalCurrentTemplate",get:function(){return this.zkCurrentTemplate}},{key:"isFullscreenMode",get:function(){var U=document;return!!(U.fullscreenElement||U.webkitFullscreenElement||U.mozFullScreenElement||U.msFullscreenElement)}},{key:"isViewerReady",get:function(){return!!this.viewer}},{key:"isShoppingPreview",get:function(){return this.isViewerMode||this.platform.toLowerCase()=="preview"}},{key:"makeDAMAnalyticsView",value:function(){var C=Ot(Ue().mark(function Q(fe){var de,Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ce={modelCode:this.productCode||"",userId:((de=this.settings)===null||de===void 0?void 0:de.userID)||0,eventType:fe},Ke.abrupt("return",wt.default.post(Zakeke.config.damSettings.analyticsUrl,Ce));case 2:case"end":return Ke.stop()}},Q,this)}));function U(Q){return C.apply(this,arguments)}return U}()},{key:"addHotjarScript",value:function(U){if(U&&U.length>0&&this.platform&&this.platform.toLowerCase()!=="preview"){var Q=document.createElement("script");Q.type="text/javascript",Q.innerHTML=`(function(h,o,t,j,a,r){
                    h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
                    h._hjSettings={hjid:`.concat(U,`,hjsv:6};
                    a=o.getElementsByTagName('head')[0];
                    r=o.createElement('script');r.async=1;
                    r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
                    a.appendChild(r);
                })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');`),document.getElementsByTagName("head")[0].appendChild(Q)}}},{key:"addGoogleTagManagerID",value:function(U){if(U&&U.length>0&&this.platform&&this.platform.toLowerCase()!=="preview"){var Q=document.querySelector("head");if(Q){var fe=document.createElement("script");fe.textContent=`(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','`.concat(U,"');"),Q.appendChild(fe)}var de=document.createElement("iframe");de.src="https://www.googletagmanager.com/ns.html?id=".concat(U),de.height="0",de.width="0",de.style.cssText="display:none;visibility:hidden"}}},{key:"setQuantity",value:function(U){var Q=this.zkProduct.get("quantityRule");if(Q){var fe=Q.get("minQuantity"),de=Q.get("maxQuantity"),Ce=Q.get("step");fe&&U<fe&&(U=fe),de&&U>de&&(U=de),Ce&&(U=Math.round(U/Ce)*Ce,U<Ce&&(U=Ce))}this.quantity=U,this.trigger("change"),this.updatePrice()}},{key:"createStep",value:function(U,Q){var fe,de,Ce=this,Ye=new Qe.Step;Ye.id=U.get("stepID"),Ye.guid=U.get("stepGuid"),Ye.name=(fe=U.get("name"))!==null&&fe!==void 0?fe:"",Ye.cameraLocationID=(de=U.get("cameraLocationID"))!==null&&de!==void 0?de:null,Ye.displayOrder=U.get("displayOrder");for(var Ke=function(){var Pt=Ce.zkProduct.get("attributes").at(ct),xt=Q.get("attributes").find(function(en){return en.get("attributeID")==Pt.get("attributeID")});if(xt&&Pt.get("stepID")==U.get("stepID")){var Ge=Ce.createAttributeFromSelection(xt);Ye.attributes.push(Ge)}},ct=0;ct<this.zkProduct.get("attributes").length;ct++)Ke();Ye.attributes.sort(function(ht,Pt){return ht.displayOrder-Pt.displayOrder});for(var _t=function(){var Pt=Ce.zkProduct.get("templateGroups").at(qe),xt=Q.get("templateGroups").find(function(en){return en.get("templateGroupID")==Pt.get("templateGroupID")});if(xt&&Pt.get("stepID")==U.get("stepID")){var Ge=Ce.createTemplateGroupFromSelection(xt);Ye.templateGroups.push(Ge)}},qe=0;qe<this.zkProduct.get("templateGroups").length;qe++)_t();return Ye.templateGroups.sort(function(ht,Pt){return ht.displayOrder-Pt.displayOrder}),Ye}},{key:"selectOptionsbyPrompt",value:function(){var C=Ot(Ue().mark(function Q(fe){var de,Ce=this,Ye,Ke,ct,_t;return Ue().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(fe){ht.next=2;break}throw new Error("Invalid prompt");case 2:return ht.next=4,me.axiosApi.get(Zakeke.config.baseApiUrl+"ai/configuration-by-prompt",{params:{productId:(de=this.product)===null||de===void 0?void 0:de.id}});case 4:Ye=ht.sent.data,Ke=rn(Ye),ht.prev=6,_t=Ue().mark(function Pt(){var xt,Ge,en,bt,Vt;return Ue().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:Ge=Qt(ct.value,2),en=Ge[0],bt=Ge[1],Vt=(xt=Ce.groups.flatMap(function(or){return or.attributes}).find(function(or){return or.name===en}))===null||xt===void 0?void 0:xt.options.find(function(or){return or.name===bt}),Vt&&Ce.selectOption(Vt.id);case 3:case"end":return Yn.stop()}},Pt)}),Ke.s();case 9:if((ct=Ke.n()).done){ht.next=13;break}return ht.delegateYield(_t(),"t0",11);case 11:ht.next=9;break;case 13:ht.next=18;break;case 15:ht.prev=15,ht.t1=ht.catch(6),Ke.e(ht.t1);case 18:return ht.prev=18,Ke.f(),ht.finish(18);case 21:case"end":return ht.stop()}},Q,this,[[6,15,18,21]])}));function U(Q){return C.apply(this,arguments)}return U}()},{key:"setCamera",value:function(U,Q,fe){this.viewer.setCameraLocation(U,Q,fe),this.lastCameraLocation=U}},{key:"getCameraByName",value:function(U){var Q,fe=(Q=this.zkScene)===null||Q===void 0?void 0:Q.get("cameraLocations").find(function(de){return de.get("name")==U});return fe}},{key:"setCameraLocation",value:function(U){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,fe=this.getCameraByName(U);if(!fe)throw new Error("Camera with name ".concat(U," does not exists."));this.viewer.setCameraLocation(fe.get("locationID"),!1,Q),this.lastCameraLocation=fe.get("locationID")}},{key:"getDesignItemsInfo",value:function(){var U=[];if(this.viewer){var Q,fe;U=(Q=(fe=this.viewer.getDesignItemsInfo())===null||fe===void 0?void 0:fe.map(function(de){return de instanceof MPlaza.ImageItemInfo?new Qe.ImageItem(de):new Qe.TextItem(de)}))!==null&&Q!==void 0?Q:[]}return U}},{key:"isAreaVisible",value:function(U){var Q=this.zkProduct.get("scenes").at(0).get("meshSides").filter(function(ct){return ct.get("sideID")==U}),fe=rn(Q),de;try{for(fe.s();!(de=fe.n()).done;){var Ce=de.value,Ye=Ce.get("meshID");if(Ye){var Ke=this.viewer.scene.getMeshByID(Ye);if(Ke&&Ke.isVisible)return!0}}}catch(ct){fe.e(ct)}finally{fe.f()}return!1}},{key:"addItemText",value:function(){var C=Ot(Ue().mark(function Q(fe,de){var Ce;return Ue().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(!this.viewer){Ke.next=12;break}if(Ce=this.fonts.find(function(ct){return ct.name===fe.fontFamily}),!Ce){Ke.next=9;break}return Ke.next=5,(0,ae.loadFonts)([Ce]).catch(function(ct){console.error("Error loading font",ct,Ce)});case 5:this.viewer.addDesignItemText(at(at({},fe),{},{content:fe.text}),de),this.renderDesign(),Ke.next=10;break;case 9:console.warn("No font found for ".concat(fe.fontFamily));case 10:Ke.next=13;break;case 12:throw"Called add item text but no viewer or viewer not ready";case 13:case"end":return Ke.stop()}},Q,this)}));function U(Q,fe){return C.apply(this,arguments)}return U}()},{key:"fullyLoadFont",value:function(){var C=Ot(Ue().mark(function Q(fe){var de;return Ue().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(typeof fe!="string"){Ye.next=12;break}if(de=this.fonts.find(function(Ke){return Ke.name===fe}),!de){Ye.next=9;break}if(de.fullLoaded){Ye.next=6;break}return Ye.next=6,(0,ae.loadFonts)([de]);case 6:return Ye.abrupt("return",de);case 9:return Ye.abrupt("return",this.fonts[0]);case 10:Ye.next=16;break;case 12:if(fe.fullLoaded){Ye.next=15;break}return Ye.next=15,(0,ae.loadFonts)([fe]);case 15:return Ye.abrupt("return",fe);case 16:case"end":return Ye.stop()}},Q,this)}));function U(Q){return C.apply(this,arguments)}return U}()},{key:"setCameraPivot",value:function(U){this.viewer.setCameraPivot(U)}},{key:"resetCameraPivot",value:function(){this.viewer.setCameraPivot(null)}},{key:"setCameraZoomEnabled",value:function(U){this.viewer.setCameraZoomEnabled(U)}},{key:"setCameraByName",value:function(U,Q,fe){if(this.zkScene){var de=this.zkScene.get("cameraLocations").find(function(Ce){return Ce.get("name")==U});de&&this.viewer.setCameraLocation(de.get("locationID"),Q,fe)}}},{key:"findObjectByName",value:function(U){return this.viewer&&this.viewer.scene?this.viewer.scene.meshes.find(function(Q){return Q.name==U}):null}},{key:"hightlightGroup",value:function(U){var Q;(Q=this.viewer)===null||Q===void 0||Q.highlightGroupByID(U)}},{key:"highlightAttribute",value:function(U){var Q;(Q=this.viewer)===null||Q===void 0||Q.highlightAttributeByID(U)}},{key:"hasVTryOnEnabled",get:function(){if(!this.zkScene||!this.tryOnSellerSettings||this.tryOnSellerSettings.vtoState===Be.SellerTryOnState.NotActive||!this.tryOnProductSettings)return!1;var U=JSON.parse(this.tryOnProductSettings.settings);return!(!U.active||!this.zkScene.getTryOnEnabled()||!this.zkScene.getTryOnSettings()||!this.zkScene.getTryOnSettings().typeSettings.active)}},{key:"canUseTryOn",get:function(){if(!this.tryOnSellerSettings||this.tryOnSellerSettings.vtoState===Be.SellerTryOnState.NotActive||!this.tryOnProductSettings)return!1;var U=JSON.parse(this.tryOnProductSettings.settings);return!(!U.try_on||!this.tryOnSellerSettings||this.zkScene.getTryOnSettings()&&this.zkScene.getTryOnSettings().typeSettings.try_on)}},{key:"canUsePD",get:function(){if(!this.tryOnSellerSettings||this.tryOnSellerSettings.vtoState===Be.SellerTryOnState.NotActive||!this.tryOnProductSettings)return!1;var U=JSON.parse(this.tryOnProductSettings.settings);return!(!U.pd||!this.tryOnSellerSettings||this.zkScene.getTryOnSettings().typeSettings.pd)}},{key:"isVisibleMeshShownForTryOn",get:function(){var U;return(U=this.viewer)===null||U===void 0?void 0:U.isTryOnMeshVisibleEnabledToShow()}},{key:"isMandatoryPD",get:function(){return this.isPupillaryDistanceMandatory}},{key:"isTryOnMeshVisible",get:function(){var U;return((U=this.viewer)===null||U===void 0?void 0:U.getTryOnMeshVisible())!=null}},{key:"tryOnMeshVisibleSettings",get:function(){if(this.isTryOnMeshVisible){var U;try{var Q,fe=(this===null||this===void 0||(Q=this.viewer)===null||Q===void 0?void 0:Q.getDAMFineTuningData())||void 0;if(fe)return fe}catch(Ce){console.error("Error parsing DAM fine tuning data",Ce)}var de=this===null||this===void 0||(U=this.viewer)===null||U===void 0?void 0:U.getTryOnFineTuningMeshVisible();if(de)return this.viewer.getMeshFineTuningData(de)||void 0}}}]),We}()},"./src/exceptions.tsx":(je,be,K)=>{K.r(be),K.d(be,{Exception:()=>Se,NonSquarePixelException:()=>Dt,ParametersParseFailException:()=>ee,UnsupportedPlatformException:()=>Qe,UploadFailedExpection:()=>wt});function se(at){"@babel/helpers - typeof";return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ne){return typeof Ne}:function(Ne){return Ne&&typeof Symbol=="function"&&Ne.constructor===Symbol&&Ne!==Symbol.prototype?"symbol":typeof Ne},se(at)}function B(at,Ne){if(typeof Ne!="function"&&Ne!==null)throw new TypeError("Super expression must either be null or a function");at.prototype=Object.create(Ne&&Ne.prototype,{constructor:{value:at,writable:!0,configurable:!0}}),Object.defineProperty(at,"prototype",{writable:!1}),Ne&&Fe(at,Ne)}function Fe(at,Ne){return Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Je,pt){return Je.__proto__=pt,Je},Fe(at,Ne)}function Be(at){var Ne=we();return function(){var Je,pt=ae(at);if(Ne){var ot=ae(this).constructor;Je=Reflect.construct(pt,arguments,ot)}else Je=pt.apply(this,arguments);return ce(this,Je)}}function ce(at,Ne){if(Ne&&(se(Ne)=="object"||typeof Ne=="function"))return Ne;if(Ne!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return me(at)}function me(at){if(at===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return at}function we(){try{var at=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(we=function(){return!!at})()}function ae(at){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Ne){return Ne.__proto__||Object.getPrototypeOf(Ne)},ae(at)}function De(at,Ne,Je){return Object.defineProperty(at,"prototype",{writable:!1}),at}function Pe(at,Ne){if(!(at instanceof Ne))throw new TypeError("Cannot call a class as a function")}var Se=De(function at(Ne){Pe(this,at),this.message=Ne}),ee=function(at){B(Je,at);var Ne=Be(Je);function Je(pt){var ot;return Pe(this,Je),ot=Ne.call(this,"Failed parsing parameters: "+pt),ot.parameter=pt,ot}return De(Je)}(Se),Qe=function(at){B(Je,at);var Ne=Be(Je);function Je(pt){var ot;return Pe(this,Je),ot=Ne.call(this,"Platform "+pt.toString()+" not supported."),ot.platform=pt,ot}return De(Je)}(Se),wt=function(at){B(Je,at);var Ne=Be(Je);function Je(){return Pe(this,Je),Ne.call(this,"Upload failed.")}return De(Je)}(Se),Dt=function(at){B(Je,at);var Ne=Be(Je);function Je(){return Pe(this,Je),Ne.call(this,"The image is not supported (non-square pixels)")}return De(Je)}(Se)},"./src/fontsManager.ts":(je,be,K)=>{K.r(be),K.d(be,{downloadFontsOfDesign:()=>Pe,getParsedFileFromFont:()=>at,loadFonts:()=>ae,removeEmojisFromText:()=>pt,removeInvalidCharacters:()=>Dt,removeInvalidCharactersFromText:()=>ee,removeTextualEmojisFromText:()=>Je,removeUnsupportedCharacters:()=>Ne,sanitizeString:()=>Qe,sanitizeText:()=>wt});function se(ot){"@babel/helpers - typeof";return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Jt){return typeof Jt}:function(Jt){return Jt&&typeof Symbol=="function"&&Jt.constructor===Symbol&&Jt!==Symbol.prototype?"symbol":typeof Jt},se(ot)}function B(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */B=function(){return Jt};var ot,Jt={},Qt=Object.prototype,ut=Qt.hasOwnProperty,St=Object.defineProperty||function(Pt,xt,Ge){Pt[xt]=Ge.value},Lt=typeof Symbol=="function"?Symbol:{},Ue=Lt.iterator||"@@iterator",Ut=Lt.asyncIterator||"@@asyncIterator",Ot=Lt.toStringTag||"@@toStringTag";function rn(Pt,xt,Ge){return Object.defineProperty(Pt,xt,{value:Ge,enumerable:!0,configurable:!0,writable:!0}),Pt[xt]}try{rn({},"")}catch{rn=function(Ge,en,bt){return Ge[en]=bt}}function $t(Pt,xt,Ge,en){var bt=xt&&xt.prototype instanceof Rt?xt:Rt,Vt=Object.create(bt.prototype),_n=new qe(en||[]);return St(Vt,"_invoke",{value:Ye(Pt,Ge,_n)}),Vt}function sn(Pt,xt,Ge){try{return{type:"normal",arg:Pt.call(xt,Ge)}}catch(en){return{type:"throw",arg:en}}}Jt.wrap=$t;var lt="suspendedStart",Zt="suspendedYield",zt="executing",Le="completed",Mt={};function Rt(){}function tt(){}function We(){}var C={};rn(C,Ue,function(){return this});var U=Object.getPrototypeOf,Q=U&&U(U(ht([])));Q&&Q!==Qt&&ut.call(Q,Ue)&&(C=Q);var fe=We.prototype=Rt.prototype=Object.create(C);function de(Pt){["next","throw","return"].forEach(function(xt){rn(Pt,xt,function(Ge){return this._invoke(xt,Ge)})})}function Ce(Pt,xt){function Ge(bt,Vt,_n,Yn){var or=sn(Pt[bt],Pt,Vt);if(or.type!=="throw"){var lr=or.arg,Jn=lr.value;return Jn&&se(Jn)=="object"&&ut.call(Jn,"__await")?xt.resolve(Jn.__await).then(function($n){Ge("next",$n,_n,Yn)},function($n){Ge("throw",$n,_n,Yn)}):xt.resolve(Jn).then(function($n){lr.value=$n,_n(lr)},function($n){return Ge("throw",$n,_n,Yn)})}Yn(or.arg)}var en;St(this,"_invoke",{value:function(Vt,_n){function Yn(){return new xt(function(or,lr){Ge(Vt,_n,or,lr)})}return en=en?en.then(Yn,Yn):Yn()}})}function Ye(Pt,xt,Ge){var en=lt;return function(bt,Vt){if(en===zt)throw Error("Generator is already running");if(en===Le){if(bt==="throw")throw Vt;return{value:ot,done:!0}}for(Ge.method=bt,Ge.arg=Vt;;){var _n=Ge.delegate;if(_n){var Yn=Ke(_n,Ge);if(Yn){if(Yn===Mt)continue;return Yn}}if(Ge.method==="next")Ge.sent=Ge._sent=Ge.arg;else if(Ge.method==="throw"){if(en===lt)throw en=Le,Ge.arg;Ge.dispatchException(Ge.arg)}else Ge.method==="return"&&Ge.abrupt("return",Ge.arg);en=zt;var or=sn(Pt,xt,Ge);if(or.type==="normal"){if(en=Ge.done?Le:Zt,or.arg===Mt)continue;return{value:or.arg,done:Ge.done}}or.type==="throw"&&(en=Le,Ge.method="throw",Ge.arg=or.arg)}}}function Ke(Pt,xt){var Ge=xt.method,en=Pt.iterator[Ge];if(en===ot)return xt.delegate=null,Ge==="throw"&&Pt.iterator.return&&(xt.method="return",xt.arg=ot,Ke(Pt,xt),xt.method==="throw")||Ge!=="return"&&(xt.method="throw",xt.arg=new TypeError("The iterator does not provide a '"+Ge+"' method")),Mt;var bt=sn(en,Pt.iterator,xt.arg);if(bt.type==="throw")return xt.method="throw",xt.arg=bt.arg,xt.delegate=null,Mt;var Vt=bt.arg;return Vt?Vt.done?(xt[Pt.resultName]=Vt.value,xt.next=Pt.nextLoc,xt.method!=="return"&&(xt.method="next",xt.arg=ot),xt.delegate=null,Mt):Vt:(xt.method="throw",xt.arg=new TypeError("iterator result is not an object"),xt.delegate=null,Mt)}function ct(Pt){var xt={tryLoc:Pt[0]};1 in Pt&&(xt.catchLoc=Pt[1]),2 in Pt&&(xt.finallyLoc=Pt[2],xt.afterLoc=Pt[3]),this.tryEntries.push(xt)}function _t(Pt){var xt=Pt.completion||{};xt.type="normal",delete xt.arg,Pt.completion=xt}function qe(Pt){this.tryEntries=[{tryLoc:"root"}],Pt.forEach(ct,this),this.reset(!0)}function ht(Pt){if(Pt||Pt===""){var xt=Pt[Ue];if(xt)return xt.call(Pt);if(typeof Pt.next=="function")return Pt;if(!isNaN(Pt.length)){var Ge=-1,en=function bt(){for(;++Ge<Pt.length;)if(ut.call(Pt,Ge))return bt.value=Pt[Ge],bt.done=!1,bt;return bt.value=ot,bt.done=!0,bt};return en.next=en}}throw new TypeError(se(Pt)+" is not iterable")}return tt.prototype=We,St(fe,"constructor",{value:We,configurable:!0}),St(We,"constructor",{value:tt,configurable:!0}),tt.displayName=rn(We,Ot,"GeneratorFunction"),Jt.isGeneratorFunction=function(Pt){var xt=typeof Pt=="function"&&Pt.constructor;return!!xt&&(xt===tt||(xt.displayName||xt.name)==="GeneratorFunction")},Jt.mark=function(Pt){return Object.setPrototypeOf?Object.setPrototypeOf(Pt,We):(Pt.__proto__=We,rn(Pt,Ot,"GeneratorFunction")),Pt.prototype=Object.create(fe),Pt},Jt.awrap=function(Pt){return{__await:Pt}},de(Ce.prototype),rn(Ce.prototype,Ut,function(){return this}),Jt.AsyncIterator=Ce,Jt.async=function(Pt,xt,Ge,en,bt){bt===void 0&&(bt=Promise);var Vt=new Ce($t(Pt,xt,Ge,en),bt);return Jt.isGeneratorFunction(xt)?Vt:Vt.next().then(function(_n){return _n.done?_n.value:Vt.next()})},de(fe),rn(fe,Ot,"Generator"),rn(fe,Ue,function(){return this}),rn(fe,"toString",function(){return"[object Generator]"}),Jt.keys=function(Pt){var xt=Object(Pt),Ge=[];for(var en in xt)Ge.push(en);return Ge.reverse(),function bt(){for(;Ge.length;){var Vt=Ge.pop();if(Vt in xt)return bt.value=Vt,bt.done=!1,bt}return bt.done=!0,bt}},Jt.values=ht,qe.prototype={constructor:qe,reset:function(xt){if(this.prev=0,this.next=0,this.sent=this._sent=ot,this.done=!1,this.delegate=null,this.method="next",this.arg=ot,this.tryEntries.forEach(_t),!xt)for(var Ge in this)Ge.charAt(0)==="t"&&ut.call(this,Ge)&&!isNaN(+Ge.slice(1))&&(this[Ge]=ot)},stop:function(){this.done=!0;var xt=this.tryEntries[0].completion;if(xt.type==="throw")throw xt.arg;return this.rval},dispatchException:function(xt){if(this.done)throw xt;var Ge=this;function en(lr,Jn){return _n.type="throw",_n.arg=xt,Ge.next=lr,Jn&&(Ge.method="next",Ge.arg=ot),!!Jn}for(var bt=this.tryEntries.length-1;bt>=0;--bt){var Vt=this.tryEntries[bt],_n=Vt.completion;if(Vt.tryLoc==="root")return en("end");if(Vt.tryLoc<=this.prev){var Yn=ut.call(Vt,"catchLoc"),or=ut.call(Vt,"finallyLoc");if(Yn&&or){if(this.prev<Vt.catchLoc)return en(Vt.catchLoc,!0);if(this.prev<Vt.finallyLoc)return en(Vt.finallyLoc)}else if(Yn){if(this.prev<Vt.catchLoc)return en(Vt.catchLoc,!0)}else{if(!or)throw Error("try statement without catch or finally");if(this.prev<Vt.finallyLoc)return en(Vt.finallyLoc)}}}},abrupt:function(xt,Ge){for(var en=this.tryEntries.length-1;en>=0;--en){var bt=this.tryEntries[en];if(bt.tryLoc<=this.prev&&ut.call(bt,"finallyLoc")&&this.prev<bt.finallyLoc){var Vt=bt;break}}Vt&&(xt==="break"||xt==="continue")&&Vt.tryLoc<=Ge&&Ge<=Vt.finallyLoc&&(Vt=null);var _n=Vt?Vt.completion:{};return _n.type=xt,_n.arg=Ge,Vt?(this.method="next",this.next=Vt.finallyLoc,Mt):this.complete(_n)},complete:function(xt,Ge){if(xt.type==="throw")throw xt.arg;return xt.type==="break"||xt.type==="continue"?this.next=xt.arg:xt.type==="return"?(this.rval=this.arg=xt.arg,this.method="return",this.next="end"):xt.type==="normal"&&Ge&&(this.next=Ge),Mt},finish:function(xt){for(var Ge=this.tryEntries.length-1;Ge>=0;--Ge){var en=this.tryEntries[Ge];if(en.finallyLoc===xt)return this.complete(en.completion,en.afterLoc),_t(en),Mt}},catch:function(xt){for(var Ge=this.tryEntries.length-1;Ge>=0;--Ge){var en=this.tryEntries[Ge];if(en.tryLoc===xt){var bt=en.completion;if(bt.type==="throw"){var Vt=bt.arg;_t(en)}return Vt}}throw Error("illegal catch attempt")},delegateYield:function(xt,Ge,en){return this.delegate={iterator:ht(xt),resultName:Ge,nextLoc:en},this.method==="next"&&(this.arg=ot),Mt}},Jt}function Fe(ot,Jt){var Qt=typeof Symbol<"u"&&ot[Symbol.iterator]||ot["@@iterator"];if(!Qt){if(Array.isArray(ot)||(Qt=Be(ot))||Jt){Qt&&(ot=Qt);var ut=0,St=function(){};return{s:St,n:function(){return ut>=ot.length?{done:!0}:{done:!1,value:ot[ut++]}},e:function(rn){throw rn},f:St}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lt,Ue=!0,Ut=!1;return{s:function(){Qt=Qt.call(ot)},n:function(){var rn=Qt.next();return Ue=rn.done,rn},e:function(rn){Ut=!0,Lt=rn},f:function(){try{Ue||Qt.return==null||Qt.return()}finally{if(Ut)throw Lt}}}}function Be(ot,Jt){if(ot){if(typeof ot=="string")return ce(ot,Jt);var Qt={}.toString.call(ot).slice(8,-1);return Qt==="Object"&&ot.constructor&&(Qt=ot.constructor.name),Qt==="Map"||Qt==="Set"?Array.from(ot):Qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qt)?ce(ot,Jt):void 0}}function ce(ot,Jt){(Jt==null||Jt>ot.length)&&(Jt=ot.length);for(var Qt=0,ut=Array(Jt);Qt<Jt;Qt++)ut[Qt]=ot[Qt];return ut}function me(ot,Jt,Qt,ut,St,Lt,Ue){try{var Ut=ot[Lt](Ue),Ot=Ut.value}catch(rn){return void Qt(rn)}Ut.done?Jt(Ot):Promise.resolve(Ot).then(ut,St)}function we(ot){return function(){var Jt=this,Qt=arguments;return new Promise(function(ut,St){var Lt=ot.apply(Jt,Qt);function Ue(Ot){me(Lt,ut,St,Ue,Ut,"next",Ot)}function Ut(Ot){me(Lt,ut,St,Ue,Ut,"throw",Ot)}Ue(void 0)})}}function ae(ot){return De.apply(this,arguments)}function De(){return De=we(B().mark(function ot(Jt){return B().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:return ut.abrupt("return",new Promise(function(St,Lt){WebFont.load({timeout:2e5,custom:{families:Jt.map(function(Ue){return Ue.name+(Ue.variations&&Ue.variations!=""?":"+Ue.variations:"")}),urls:Jt.map(function(Ue){return Ue.cssUrl})},active:function(){var Ue=we(B().mark(function Ot(){var rn,$t,sn,lt,Zt,zt,Le,Mt;return B().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:rn=Fe(Jt),tt.prev=1,rn.s();case 3:if(($t=rn.n()).done){tt.next=30;break}sn=$t.value,lt=[],Zt=Fe(sn.faces),tt.prev=7,Le=B().mark(function We(){var C,U,Q,fe;return B().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(C=zt.value,!C.parsedFiles){Ce.next=3;break}return Ce.abrupt("return","continue");case 3:U=Fe(C.filesUrls),Ce.prev=4,fe=B().mark(function Ye(){var Ke;return B().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:Ke=Q.value,(Ke.toLowerCase().endsWith(".ttf")||Ke.toLowerCase().endsWith(".otf"))&&(C.parsedFiles=C.parsedFiles||[],lt.push(opentype.load(Ke).then(function(qe){C.parsedFiles.push({url:Ke,file:qe})})));case 2:case"end":return _t.stop()}},Ye)}),U.s();case 7:if((Q=U.n()).done){Ce.next=11;break}return Ce.delegateYield(fe(),"t0",9);case 9:Ce.next=7;break;case 11:Ce.next=16;break;case 13:Ce.prev=13,Ce.t1=Ce.catch(4),U.e(Ce.t1);case 16:return Ce.prev=16,U.f(),Ce.finish(16);case 19:case"end":return Ce.stop()}},We,null,[[4,13,16,19]])}),Zt.s();case 10:if((zt=Zt.n()).done){tt.next=17;break}return tt.delegateYield(Le(),"t0",12);case 12:if(Mt=tt.t0,Mt!=="continue"){tt.next=15;break}return tt.abrupt("continue",15);case 15:tt.next=10;break;case 17:tt.next=22;break;case 19:tt.prev=19,tt.t1=tt.catch(7),Zt.e(tt.t1);case 22:return tt.prev=22,Zt.f(),tt.finish(22);case 25:return tt.next=27,Promise.allSettled(lt);case 27:sn.fullLoaded=!0;case 28:tt.next=3;break;case 30:tt.next=35;break;case 32:tt.prev=32,tt.t2=tt.catch(1),rn.e(tt.t2);case 35:return tt.prev=35,rn.f(),tt.finish(35);case 38:St();case 39:case"end":return tt.stop()}},Ot,null,[[1,32,35,38],[7,19,22,25]])}));function Ut(){return Ue.apply(this,arguments)}return Ut}(),inactive:function(){Lt()}})}));case 1:case"end":return ut.stop()}},ot)})),De.apply(this,arguments)}function Pe(ot,Jt){return Se.apply(this,arguments)}function Se(){return Se=we(B().mark(function ot(Jt,Qt){var ut,St,Lt,Ue,Ut,Ot,rn,$t;return B().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:ut=[],St=Fe(Jt.get("designItems").models);try{for(St.s();!(Lt=St.n()).done;)Ue=Lt.value,Ut=JSON.parse(Ue.get("json")),Ot=Ut[1],rn=Ot.fontFamily||(Ot.children&&Ot.children.length>0&&Ot.children[0].length>1?Ot.children[0][1].fontFamily:null),rn&&ut.push(rn.replace(/"/g,""))}catch(Zt){St.e(Zt)}finally{St.f()}if($t=ut.map(function(Zt){return Qt.find(function(zt){return zt.name==Zt})||null}).filter(function(Zt){return Zt!=null}),!($t.length>0)){lt.next=7;break}return lt.next=7,ae($t).catch(function(Zt){console.error("Error loading fonts",Zt,$t)});case 7:case"end":return lt.stop()}},ot)})),Se.apply(this,arguments)}function ee(ot){var Jt=/\x08|\u0000/g;return ot.replace(Jt,"")}function Qe(ot,Jt){return Ne(pt(Je(ee(Jt))),ot)}function wt(ot,Jt){for(var Qt=[],ut=Qe(ot,Jt),St=0;St<Jt.length;St++)Jt[St]!==ut[St]&&Qt.push(Jt[St]);return{sanitizedText:ut,dirtyChars:Qt}}function Dt(ot,Jt){return ot.split("").filter(function(Qt){return Qt.match(/\s/)||Jt.charToGlyph(Qt).unicode}).join("")}function at(ot){return ot.parsedFiles.find(function(Jt){return Jt.url.toLowerCase().endsWith(".ttf")||Jt.url.toLowerCase().endsWith(".otf")})}function Ne(ot,Jt){if(!ot||!Jt.parsedFiles)return ot;var Qt=at(Jt);return!Qt||!Qt.file?ot:Dt(ot,Qt.file)}function Je(ot){var Jt=/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F?|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g,Qt=ot;return(ot.match(Jt)||[]).forEach(function(ut){/[0-9*#]/.test(ut)||(Qt=Qt.replace(ut,""))}),Qt}function pt(ot){var Jt=/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g,Qt=ot;return(ot.match(Jt)||[]).forEach(function(ut){/[0-9*#]/.test(ut)||(Qt=Qt.replace(ut,""))}),Qt}},"./src/helpers.tsx":(je,be,K)=>{K.r(be),K.d(be,{Browser:()=>wt,IS_ANDROID:()=>$t,IS_AR_DEVICE_COMPLIANT:()=>lt,IS_IOS:()=>sn,Pagination:()=>Dt,StringHelper:()=>Qe,T:()=>Se,ascComparator:()=>Mt,compare:()=>Lt,copy:()=>St,dataURLtoFile:()=>ee,getNavigatorQueryParams:()=>Rt,getPlatformSettings:()=>rn,hex2rgb:()=>at,hslToRgb:()=>pt,hsvToRgb:()=>Qt,hue2rgb:()=>ot,iOS:()=>ut,isPlatformCode:()=>Ut,isValidJSON:()=>Ue,matchCodes:()=>Ot,rgb2hex:()=>Ne,rgbToHsl:()=>Je,rgbToHsv:()=>Jt,sleep:()=>zt,uuid:()=>Zt});function se(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */se=function(){return We};var tt,We={},C=Object.prototype,U=C.hasOwnProperty,Q=Object.defineProperty||function(pn,Wt,un){pn[Wt]=un.value},fe=typeof Symbol=="function"?Symbol:{},de=fe.iterator||"@@iterator",Ce=fe.asyncIterator||"@@asyncIterator",Ye=fe.toStringTag||"@@toStringTag";function Ke(pn,Wt,un){return Object.defineProperty(pn,Wt,{value:un,enumerable:!0,configurable:!0,writable:!0}),pn[Wt]}try{Ke({},"")}catch{Ke=function(un,fn,Bn){return un[fn]=Bn}}function ct(pn,Wt,un,fn){var Bn=Wt&&Wt.prototype instanceof en?Wt:en,Hn=Object.create(Bn.prototype),yr=new Br(fn||[]);return Q(Hn,"_invoke",{value:Tn(pn,un,yr)}),Hn}function _t(pn,Wt,un){try{return{type:"normal",arg:pn.call(Wt,un)}}catch(fn){return{type:"throw",arg:fn}}}We.wrap=ct;var qe="suspendedStart",ht="suspendedYield",Pt="executing",xt="completed",Ge={};function en(){}function bt(){}function Vt(){}var _n={};Ke(_n,de,function(){return this});var Yn=Object.getPrototypeOf,or=Yn&&Yn(Yn(Mr([])));or&&or!==C&&U.call(or,de)&&(_n=or);var lr=Vt.prototype=en.prototype=Object.create(_n);function Jn(pn){["next","throw","return"].forEach(function(Wt){Ke(pn,Wt,function(un){return this._invoke(Wt,un)})})}function $n(pn,Wt){function un(Bn,Hn,yr,zr){var Zr=_t(pn[Bn],pn,Hn);if(Zr.type!=="throw"){var Ni=Zr.arg,as=Ni.value;return as&&Be(as)=="object"&&U.call(as,"__await")?Wt.resolve(as.__await).then(function(Ss){un("next",Ss,yr,zr)},function(Ss){un("throw",Ss,yr,zr)}):Wt.resolve(as).then(function(Ss){Ni.value=Ss,yr(Ni)},function(Ss){return un("throw",Ss,yr,zr)})}zr(Zr.arg)}var fn;Q(this,"_invoke",{value:function(Hn,yr){function zr(){return new Wt(function(Zr,Ni){un(Hn,yr,Zr,Ni)})}return fn=fn?fn.then(zr,zr):zr()}})}function Tn(pn,Wt,un){var fn=qe;return function(Bn,Hn){if(fn===Pt)throw Error("Generator is already running");if(fn===xt){if(Bn==="throw")throw Hn;return{value:tt,done:!0}}for(un.method=Bn,un.arg=Hn;;){var yr=un.delegate;if(yr){var zr=Gn(yr,un);if(zr){if(zr===Ge)continue;return zr}}if(un.method==="next")un.sent=un._sent=un.arg;else if(un.method==="throw"){if(fn===qe)throw fn=xt,un.arg;un.dispatchException(un.arg)}else un.method==="return"&&un.abrupt("return",un.arg);fn=Pt;var Zr=_t(pn,Wt,un);if(Zr.type==="normal"){if(fn=un.done?xt:ht,Zr.arg===Ge)continue;return{value:Zr.arg,done:un.done}}Zr.type==="throw"&&(fn=xt,un.method="throw",un.arg=Zr.arg)}}}function Gn(pn,Wt){var un=Wt.method,fn=pn.iterator[un];if(fn===tt)return Wt.delegate=null,un==="throw"&&pn.iterator.return&&(Wt.method="return",Wt.arg=tt,Gn(pn,Wt),Wt.method==="throw")||un!=="return"&&(Wt.method="throw",Wt.arg=new TypeError("The iterator does not provide a '"+un+"' method")),Ge;var Bn=_t(fn,pn.iterator,Wt.arg);if(Bn.type==="throw")return Wt.method="throw",Wt.arg=Bn.arg,Wt.delegate=null,Ge;var Hn=Bn.arg;return Hn?Hn.done?(Wt[pn.resultName]=Hn.value,Wt.next=pn.nextLoc,Wt.method!=="return"&&(Wt.method="next",Wt.arg=tt),Wt.delegate=null,Ge):Hn:(Wt.method="throw",Wt.arg=new TypeError("iterator result is not an object"),Wt.delegate=null,Ge)}function tr(pn){var Wt={tryLoc:pn[0]};1 in pn&&(Wt.catchLoc=pn[1]),2 in pn&&(Wt.finallyLoc=pn[2],Wt.afterLoc=pn[3]),this.tryEntries.push(Wt)}function pr(pn){var Wt=pn.completion||{};Wt.type="normal",delete Wt.arg,pn.completion=Wt}function Br(pn){this.tryEntries=[{tryLoc:"root"}],pn.forEach(tr,this),this.reset(!0)}function Mr(pn){if(pn||pn===""){var Wt=pn[de];if(Wt)return Wt.call(pn);if(typeof pn.next=="function")return pn;if(!isNaN(pn.length)){var un=-1,fn=function Bn(){for(;++un<pn.length;)if(U.call(pn,un))return Bn.value=pn[un],Bn.done=!1,Bn;return Bn.value=tt,Bn.done=!0,Bn};return fn.next=fn}}throw new TypeError(Be(pn)+" is not iterable")}return bt.prototype=Vt,Q(lr,"constructor",{value:Vt,configurable:!0}),Q(Vt,"constructor",{value:bt,configurable:!0}),bt.displayName=Ke(Vt,Ye,"GeneratorFunction"),We.isGeneratorFunction=function(pn){var Wt=typeof pn=="function"&&pn.constructor;return!!Wt&&(Wt===bt||(Wt.displayName||Wt.name)==="GeneratorFunction")},We.mark=function(pn){return Object.setPrototypeOf?Object.setPrototypeOf(pn,Vt):(pn.__proto__=Vt,Ke(pn,Ye,"GeneratorFunction")),pn.prototype=Object.create(lr),pn},We.awrap=function(pn){return{__await:pn}},Jn($n.prototype),Ke($n.prototype,Ce,function(){return this}),We.AsyncIterator=$n,We.async=function(pn,Wt,un,fn,Bn){Bn===void 0&&(Bn=Promise);var Hn=new $n(ct(pn,Wt,un,fn),Bn);return We.isGeneratorFunction(Wt)?Hn:Hn.next().then(function(yr){return yr.done?yr.value:Hn.next()})},Jn(lr),Ke(lr,Ye,"Generator"),Ke(lr,de,function(){return this}),Ke(lr,"toString",function(){return"[object Generator]"}),We.keys=function(pn){var Wt=Object(pn),un=[];for(var fn in Wt)un.push(fn);return un.reverse(),function Bn(){for(;un.length;){var Hn=un.pop();if(Hn in Wt)return Bn.value=Hn,Bn.done=!1,Bn}return Bn.done=!0,Bn}},We.values=Mr,Br.prototype={constructor:Br,reset:function(Wt){if(this.prev=0,this.next=0,this.sent=this._sent=tt,this.done=!1,this.delegate=null,this.method="next",this.arg=tt,this.tryEntries.forEach(pr),!Wt)for(var un in this)un.charAt(0)==="t"&&U.call(this,un)&&!isNaN(+un.slice(1))&&(this[un]=tt)},stop:function(){this.done=!0;var Wt=this.tryEntries[0].completion;if(Wt.type==="throw")throw Wt.arg;return this.rval},dispatchException:function(Wt){if(this.done)throw Wt;var un=this;function fn(Ni,as){return yr.type="throw",yr.arg=Wt,un.next=Ni,as&&(un.method="next",un.arg=tt),!!as}for(var Bn=this.tryEntries.length-1;Bn>=0;--Bn){var Hn=this.tryEntries[Bn],yr=Hn.completion;if(Hn.tryLoc==="root")return fn("end");if(Hn.tryLoc<=this.prev){var zr=U.call(Hn,"catchLoc"),Zr=U.call(Hn,"finallyLoc");if(zr&&Zr){if(this.prev<Hn.catchLoc)return fn(Hn.catchLoc,!0);if(this.prev<Hn.finallyLoc)return fn(Hn.finallyLoc)}else if(zr){if(this.prev<Hn.catchLoc)return fn(Hn.catchLoc,!0)}else{if(!Zr)throw Error("try statement without catch or finally");if(this.prev<Hn.finallyLoc)return fn(Hn.finallyLoc)}}}},abrupt:function(Wt,un){for(var fn=this.tryEntries.length-1;fn>=0;--fn){var Bn=this.tryEntries[fn];if(Bn.tryLoc<=this.prev&&U.call(Bn,"finallyLoc")&&this.prev<Bn.finallyLoc){var Hn=Bn;break}}Hn&&(Wt==="break"||Wt==="continue")&&Hn.tryLoc<=un&&un<=Hn.finallyLoc&&(Hn=null);var yr=Hn?Hn.completion:{};return yr.type=Wt,yr.arg=un,Hn?(this.method="next",this.next=Hn.finallyLoc,Ge):this.complete(yr)},complete:function(Wt,un){if(Wt.type==="throw")throw Wt.arg;return Wt.type==="break"||Wt.type==="continue"?this.next=Wt.arg:Wt.type==="return"?(this.rval=this.arg=Wt.arg,this.method="return",this.next="end"):Wt.type==="normal"&&un&&(this.next=un),Ge},finish:function(Wt){for(var un=this.tryEntries.length-1;un>=0;--un){var fn=this.tryEntries[un];if(fn.finallyLoc===Wt)return this.complete(fn.completion,fn.afterLoc),pr(fn),Ge}},catch:function(Wt){for(var un=this.tryEntries.length-1;un>=0;--un){var fn=this.tryEntries[un];if(fn.tryLoc===Wt){var Bn=fn.completion;if(Bn.type==="throw"){var Hn=Bn.arg;pr(fn)}return Hn}}throw Error("illegal catch attempt")},delegateYield:function(Wt,un,fn){return this.delegate={iterator:Mr(Wt),resultName:un,nextLoc:fn},this.method==="next"&&(this.arg=tt),Ge}},We}function B(tt,We,C,U,Q,fe,de){try{var Ce=tt[fe](de),Ye=Ce.value}catch(Ke){return void C(Ke)}Ce.done?We(Ye):Promise.resolve(Ye).then(U,Q)}function Fe(tt){return function(){var We=this,C=arguments;return new Promise(function(U,Q){var fe=tt.apply(We,C);function de(Ye){B(fe,U,Q,de,Ce,"next",Ye)}function Ce(Ye){B(fe,U,Q,de,Ce,"throw",Ye)}de(void 0)})}}function Be(tt){"@babel/helpers - typeof";return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(We){return typeof We}:function(We){return We&&typeof Symbol=="function"&&We.constructor===Symbol&&We!==Symbol.prototype?"symbol":typeof We},Be(tt)}function ce(tt,We){if(!(tt instanceof We))throw new TypeError("Cannot call a class as a function")}function me(tt,We){for(var C=0;C<We.length;C++){var U=We[C];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(tt,De(U.key),U)}}function we(tt,We,C){return C&&me(tt,C),Object.defineProperty(tt,"prototype",{writable:!1}),tt}function ae(tt,We,C){return(We=De(We))in tt?Object.defineProperty(tt,We,{value:C,enumerable:!0,configurable:!0,writable:!0}):tt[We]=C,tt}function De(tt){var We=Pe(tt,"string");return Be(We)=="symbol"?We:We+""}function Pe(tt,We){if(Be(tt)!="object"||!tt)return tt;var C=tt[Symbol.toPrimitive];if(C!==void 0){var U=C.call(tt,We);if(Be(U)!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(We==="string"?String:Number)(tt)}var Se=function(){function tt(){ce(this,tt)}return we(tt,null,[{key:"_",value:function(C,U){var Q;if((Q=this.translations)!==null&&Q!==void 0&&Q.statics)for(var fe,de=Array.from((fe=this.translations)===null||fe===void 0?void 0:fe.statics.keys()),Ce=0,Ye=de;Ce<Ye.length;Ce++){var Ke=Ye[Ce];if(Ke.toLowerCase()===C.toLowerCase())return this.translations.statics.get(Ke)}var ct=window.gt;return ct?ct.dgettext(U,C):C}},{key:"_d",value:function(C){var U,Q=C;if((U=this.translations)!==null&&U!==void 0&&U.dynamics)for(var fe,de=Array.from((fe=this.translations)===null||fe===void 0?void 0:fe.dynamics.keys()),Ce=0,Ye=de;Ce<Ye.length;Ce++){var Ke=Ye[Ce];Ke.toLowerCase()===C.toLowerCase()&&this.translations.dynamics.get(Ke)&&(Q=this.translations.dynamics.get(Ke))}return Q}}]),tt}();ae(Se,"translations",null);function ee(tt,We){for(var C=tt.split(","),U=C[0].match(/:(.*?);/)[1],Q=atob(C[1]),fe=Q.length,de=new Uint8Array(fe);fe--;)de[fe]=Q.charCodeAt(fe);return new File([de],We,{type:U})}var Qe=function(){function tt(){ce(this,tt)}return we(tt,null,[{key:"padLeft",value:function(C,U,Q){for(var fe=C.toString(),de=0;de<U-fe.length;de++)fe=Q+fe;return fe}},{key:"padRight",value:function(C,U,Q){for(var fe=C.toString(),de=0;de<U-fe.length;de++)fe=fe+Q;return fe}},{key:"format",value:function(C){for(var U=arguments.length,Q=new Array(U>1?U-1:0),fe=1;fe<U;fe++)Q[fe-1]=arguments[fe];return Q.reduce(function(de,Ce,Ye){return de.replace("{".concat(Ye,"}"),Ce)},C)}},{key:"camelToSnake",value:function(C){var U={},Q,fe,de;if(C instanceof Array){U=[];for(Q in C)de=C[Q],Be(de)==="object"&&(de=tt.camelToSnake(de)),U.push(de)}else{U={};for(Q in C)C.hasOwnProperty(Q)&&(fe=Q.replace(/\.?([A-Z]+)/g,function(Ce,Ye){return"_"+Ye.toLowerCase()}).replace(/^_/,""),de=C[Q],de&&(de&&de instanceof Array||de!==null&&de.constructor===Object)&&(de=tt.camelToSnake(de)),U[fe]=de)}return U}},{key:"pascalToCamel",value:function(C){var U={},Q,fe,de;if(C instanceof Array){U=[];for(Q in C)de=C[Q],Be(de)==="object"&&(de=tt.pascalToCamel(de)),U.push(de)}else{U={};for(Q in C)C.hasOwnProperty(Q)&&(fe=Q.replace(/^([A-Z])/g,function(Ce,Ye){return Ye.toLowerCase()}),de=C[Q],de&&(de&&de instanceof Array||de!==null&&de.constructor===Object)&&(de=tt.pascalToCamel(de)),U[fe]=de)}return U}}]),tt}(),wt=function(){function tt(){ce(this,tt)}return we(tt,null,[{key:"openWindow",value:function(C,U,Q){return window.open(C,"width="+U+",height="+Q+";menubar=no,location=no,status=no,toolbar=no")}}]),tt}(),Dt=function(){function tt(){ce(this,tt)}return we(tt,null,[{key:"nextPage",value:function(C){var U=/.*<(.*)>; rel="next".*/.exec(C);return U?U[1]:null}}]),tt}();function at(We){var We=We.substring(1),C=parseInt(We,16),U=C>>16&255,Q=C>>8&255,fe=C>>0&255;return{r:U,g:Q,b:fe}}function Ne(tt,We,C){return"#"+("0"+parseInt(tt).toString(16)).slice(-2)+("0"+parseInt(We).toString(16)).slice(-2)+("0"+parseInt(C).toString(16)).slice(-2)}function Je(tt,We,C){tt/=255,We/=255,C/=255;var U=Math.max(tt,We,C),Q=Math.min(tt,We,C),fe,de,Ce=(U+Q)/2;if(U==Q)fe=de=0;else{var Ye=U-Q;switch(de=Ce>.5?Ye/(2-U-Q):Ye/(U+Q),U){case tt:fe=(We-C)/Ye+(We<C?6:0);break;case We:fe=(C-tt)/Ye+2;break;case C:fe=(tt-We)/Ye+4;break}fe/=6}return[fe,de,Ce]}function pt(tt,We,C){var U,Q,fe;if(We==0)U=Q=fe=C;else{var de=C<.5?C*(1+We):C+We-C*We,Ce=2*C-de;U=ot(Ce,de,tt+.3333333333333333),Q=ot(Ce,de,tt),fe=ot(Ce,de,tt-.3333333333333333)}return[U*255,Q*255,fe*255]}function ot(tt,We,C){return C<0&&(C+=1),C>1&&(C-=1),C<.16666666666666666?tt+(We-tt)*6*C:C<.5?We:C<.6666666666666666?tt+(We-tt)*(.6666666666666666-C)*6:tt}function Jt(tt,We,C){tt/=255,We/=255,C/=255;var U=Math.max(tt,We,C),Q=Math.min(tt,We,C),fe,de,Ce=U,Ye=U-Q;if(de=U==0?0:Ye/U,U==Q)fe=0;else{switch(U){case tt:fe=(We-C)/Ye+(We<C?6:0);break;case We:fe=(C-tt)/Ye+2;break;case C:fe=(tt-We)/Ye+4;break}fe/=6}return[fe,de,Ce]}function Qt(tt,We,C){var U,Q,fe,de=Math.floor(tt*6),Ce=tt*6-de,Ye=C*(1-We),Ke=C*(1-Ce*We),ct=C*(1-(1-Ce)*We);switch(de%6){case 0:U=C,Q=ct,fe=Ye;break;case 1:U=Ke,Q=C,fe=Ye;break;case 2:U=Ye,Q=C,fe=ct;break;case 3:U=Ye,Q=Ke,fe=C;break;case 4:U=ct,Q=Ye,fe=C;break;case 5:U=C,Q=Ye,fe=Ke;break}return[U*255,Q*255,fe*255]}var ut=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);function St(tt){if(!tt)return tt;var We,C,U;We=Array.isArray(tt)?[]:{};for(U in tt)C=tt[U],We[U]=Be(C)==="object"?St(C):C;return We}function Lt(tt,We){if(!tt||!We)return!1;var C=St(tt),U=St(We);try{var Q=JSON.parse(C.id);Be(Q)==="object"&&Q.id&&(C=Q,console.log("Code is a valid json with Id for obj1, use json instead",C,U));var fe=JSON.parse(U.id);Be(fe)==="object"&&fe.id&&(U=fe,console.log("Code is a valid json with Id for obj2, use json instead",C,U))}catch{}if(delete C.zakekePlatform,delete U.zakekePlatform,delete C.label,delete U.label,delete C.isGlobal,delete U.isGlobal,Object.keys(C).length!=Object.keys(U).length)return!1;var de,Ce,Ye=!0;for(Ce in C){if(de=C[Ce],typeof U[Ce]>"u"&&(Ye=!1),de!=U[Ce]&&(Ye=!1),Be(de)==="object"&&Be(U[Ce])==="object"&&(Ye=Lt(de,U[Ce])),Ue(de)||Ue(U[Ce]))try{var Ke=Be(de)==="object"?de:JSON.parse(de),ct=Be(U[Ce])==="object"?U[Ce]:JSON.parse(U[Ce]);Be(Ke)=="object"&&Be(ct)=="object"&&(Ye=Lt(Ke,ct))}catch{}if(!Ye)break}return Ye}function Ue(tt){try{return JSON.parse(tt),!0}catch{}return!1}function Ut(tt){var We=null;try{return We=JSON.parse(tt),We.zakekePlatform}catch{}return!1}function Ot(tt,We){return Ut(tt)&&Ut(We)?Lt(JSON.parse(tt),JSON.parse(We)):tt==We}function rn(){return CURRENT_REDUX_STORE.getState().platformSettings}var $t=/android/i.test(navigator.userAgent),sn=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,lt=function(){var tt=document.createElement("a");return!!(tt.relList&&tt.relList.supports&&tt.relList.supports("ar"))}();function Zt(){var tt=new Date().getTime(),We="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(C){var U=(tt+Math.random()*16)%16|0;return tt=Math.floor(tt/16),(C==="x"?U:U&7|8).toString(16)});return We}function zt(tt){return Le.apply(this,arguments)}function Le(){return Le=Fe(se().mark(function tt(We){return se().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",new Promise(function(Q){return setTimeout(Q,We)}));case 1:case"end":return U.stop()}},tt)})),Le.apply(this,arguments)}function Mt(tt){return function(We,C){var U=tt(We),Q=tt(C);return U<Q?-1:Q<U?1:0}}function Rt(){var tt=new URL(window.location.href),We=new URLSearchParams(tt.search);return We}},"./src/hooks/tryonContext.ts":(je,be,K)=>{K.r(be),K.d(be,{TryOnContext:()=>Fe,useZakekeTryOn:()=>Be});var se=K("react"),B=K("./src/components/tryon/tryOnModels.ts"),Fe=(0,se.createContext)({tryon:{},setTryon:function(me){},tryOnPickedMode:B.TryOnMode.TryOn,setTryOnPickedMode:function(me){},tryOnVisibility:!1,setTryOnVisibility:function(me){}}),Be=function(){var me=(0,se.useContext)(Fe);if(!me)throw new Error("Invalid Zakeke TryOn state. Ensure you have wrapped your component with the ZakekeProvider component and you are not calling useZakekeTryOn outside of it.");return me}},"./src/hooks/useZakeke.ts":(je,be,K)=>{K.r(be),K.d(be,{useZakeke:()=>Fe});var se=K("react"),B=K("./src/state/provider.tsx"),Fe=function(){var ce=(0,se.useContext)(B.context);if(!ce)throw new Error("Invalid Zakeke state. Ensure you have wrapped your component with the ZakekeProvider component and you are not calling useZakeke outside of it.");return ce}},"./src/imageUploadTask.ts":(je,be,K)=>{K.r(be),K.d(be,{default:()=>at});var se=K("./src/api.ts"),B=K("./src/exceptions.tsx");function Fe(Ne){"@babel/helpers - typeof";return Fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Je){return typeof Je}:function(Je){return Je&&typeof Symbol=="function"&&Je.constructor===Symbol&&Je!==Symbol.prototype?"symbol":typeof Je},Fe(Ne)}function Be(Ne,Je){var pt=typeof Symbol<"u"&&Ne[Symbol.iterator]||Ne["@@iterator"];if(!pt){if(Array.isArray(Ne)||(pt=ce(Ne))||Je){pt&&(Ne=pt);var ot=0,Jt=function(){};return{s:Jt,n:function(){return ot>=Ne.length?{done:!0}:{done:!1,value:Ne[ot++]}},e:function(Ue){throw Ue},f:Jt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Qt,ut=!0,St=!1;return{s:function(){pt=pt.call(Ne)},n:function(){var Ue=pt.next();return ut=Ue.done,Ue},e:function(Ue){St=!0,Qt=Ue},f:function(){try{ut||pt.return==null||pt.return()}finally{if(St)throw Qt}}}}function ce(Ne,Je){if(Ne){if(typeof Ne=="string")return me(Ne,Je);var pt={}.toString.call(Ne).slice(8,-1);return pt==="Object"&&Ne.constructor&&(pt=Ne.constructor.name),pt==="Map"||pt==="Set"?Array.from(Ne):pt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pt)?me(Ne,Je):void 0}}function me(Ne,Je){(Je==null||Je>Ne.length)&&(Je=Ne.length);for(var pt=0,ot=Array(Je);pt<Je;pt++)ot[pt]=Ne[pt];return ot}function we(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */we=function(){return Je};var Ne,Je={},pt=Object.prototype,ot=pt.hasOwnProperty,Jt=Object.defineProperty||function(_t,qe,ht){_t[qe]=ht.value},Qt=typeof Symbol=="function"?Symbol:{},ut=Qt.iterator||"@@iterator",St=Qt.asyncIterator||"@@asyncIterator",Lt=Qt.toStringTag||"@@toStringTag";function Ue(_t,qe,ht){return Object.defineProperty(_t,qe,{value:ht,enumerable:!0,configurable:!0,writable:!0}),_t[qe]}try{Ue({},"")}catch{Ue=function(ht,Pt,xt){return ht[Pt]=xt}}function Ut(_t,qe,ht,Pt){var xt=qe&&qe.prototype instanceof zt?qe:zt,Ge=Object.create(xt.prototype),en=new Ke(Pt||[]);return Jt(Ge,"_invoke",{value:fe(_t,ht,en)}),Ge}function Ot(_t,qe,ht){try{return{type:"normal",arg:_t.call(qe,ht)}}catch(Pt){return{type:"throw",arg:Pt}}}Je.wrap=Ut;var rn="suspendedStart",$t="suspendedYield",sn="executing",lt="completed",Zt={};function zt(){}function Le(){}function Mt(){}var Rt={};Ue(Rt,ut,function(){return this});var tt=Object.getPrototypeOf,We=tt&&tt(tt(ct([])));We&&We!==pt&&ot.call(We,ut)&&(Rt=We);var C=Mt.prototype=zt.prototype=Object.create(Rt);function U(_t){["next","throw","return"].forEach(function(qe){Ue(_t,qe,function(ht){return this._invoke(qe,ht)})})}function Q(_t,qe){function ht(xt,Ge,en,bt){var Vt=Ot(_t[xt],_t,Ge);if(Vt.type!=="throw"){var _n=Vt.arg,Yn=_n.value;return Yn&&Fe(Yn)=="object"&&ot.call(Yn,"__await")?qe.resolve(Yn.__await).then(function(or){ht("next",or,en,bt)},function(or){ht("throw",or,en,bt)}):qe.resolve(Yn).then(function(or){_n.value=or,en(_n)},function(or){return ht("throw",or,en,bt)})}bt(Vt.arg)}var Pt;Jt(this,"_invoke",{value:function(Ge,en){function bt(){return new qe(function(Vt,_n){ht(Ge,en,Vt,_n)})}return Pt=Pt?Pt.then(bt,bt):bt()}})}function fe(_t,qe,ht){var Pt=rn;return function(xt,Ge){if(Pt===sn)throw Error("Generator is already running");if(Pt===lt){if(xt==="throw")throw Ge;return{value:Ne,done:!0}}for(ht.method=xt,ht.arg=Ge;;){var en=ht.delegate;if(en){var bt=de(en,ht);if(bt){if(bt===Zt)continue;return bt}}if(ht.method==="next")ht.sent=ht._sent=ht.arg;else if(ht.method==="throw"){if(Pt===rn)throw Pt=lt,ht.arg;ht.dispatchException(ht.arg)}else ht.method==="return"&&ht.abrupt("return",ht.arg);Pt=sn;var Vt=Ot(_t,qe,ht);if(Vt.type==="normal"){if(Pt=ht.done?lt:$t,Vt.arg===Zt)continue;return{value:Vt.arg,done:ht.done}}Vt.type==="throw"&&(Pt=lt,ht.method="throw",ht.arg=Vt.arg)}}}function de(_t,qe){var ht=qe.method,Pt=_t.iterator[ht];if(Pt===Ne)return qe.delegate=null,ht==="throw"&&_t.iterator.return&&(qe.method="return",qe.arg=Ne,de(_t,qe),qe.method==="throw")||ht!=="return"&&(qe.method="throw",qe.arg=new TypeError("The iterator does not provide a '"+ht+"' method")),Zt;var xt=Ot(Pt,_t.iterator,qe.arg);if(xt.type==="throw")return qe.method="throw",qe.arg=xt.arg,qe.delegate=null,Zt;var Ge=xt.arg;return Ge?Ge.done?(qe[_t.resultName]=Ge.value,qe.next=_t.nextLoc,qe.method!=="return"&&(qe.method="next",qe.arg=Ne),qe.delegate=null,Zt):Ge:(qe.method="throw",qe.arg=new TypeError("iterator result is not an object"),qe.delegate=null,Zt)}function Ce(_t){var qe={tryLoc:_t[0]};1 in _t&&(qe.catchLoc=_t[1]),2 in _t&&(qe.finallyLoc=_t[2],qe.afterLoc=_t[3]),this.tryEntries.push(qe)}function Ye(_t){var qe=_t.completion||{};qe.type="normal",delete qe.arg,_t.completion=qe}function Ke(_t){this.tryEntries=[{tryLoc:"root"}],_t.forEach(Ce,this),this.reset(!0)}function ct(_t){if(_t||_t===""){var qe=_t[ut];if(qe)return qe.call(_t);if(typeof _t.next=="function")return _t;if(!isNaN(_t.length)){var ht=-1,Pt=function xt(){for(;++ht<_t.length;)if(ot.call(_t,ht))return xt.value=_t[ht],xt.done=!1,xt;return xt.value=Ne,xt.done=!0,xt};return Pt.next=Pt}}throw new TypeError(Fe(_t)+" is not iterable")}return Le.prototype=Mt,Jt(C,"constructor",{value:Mt,configurable:!0}),Jt(Mt,"constructor",{value:Le,configurable:!0}),Le.displayName=Ue(Mt,Lt,"GeneratorFunction"),Je.isGeneratorFunction=function(_t){var qe=typeof _t=="function"&&_t.constructor;return!!qe&&(qe===Le||(qe.displayName||qe.name)==="GeneratorFunction")},Je.mark=function(_t){return Object.setPrototypeOf?Object.setPrototypeOf(_t,Mt):(_t.__proto__=Mt,Ue(_t,Lt,"GeneratorFunction")),_t.prototype=Object.create(C),_t},Je.awrap=function(_t){return{__await:_t}},U(Q.prototype),Ue(Q.prototype,St,function(){return this}),Je.AsyncIterator=Q,Je.async=function(_t,qe,ht,Pt,xt){xt===void 0&&(xt=Promise);var Ge=new Q(Ut(_t,qe,ht,Pt),xt);return Je.isGeneratorFunction(qe)?Ge:Ge.next().then(function(en){return en.done?en.value:Ge.next()})},U(C),Ue(C,Lt,"Generator"),Ue(C,ut,function(){return this}),Ue(C,"toString",function(){return"[object Generator]"}),Je.keys=function(_t){var qe=Object(_t),ht=[];for(var Pt in qe)ht.push(Pt);return ht.reverse(),function xt(){for(;ht.length;){var Ge=ht.pop();if(Ge in qe)return xt.value=Ge,xt.done=!1,xt}return xt.done=!0,xt}},Je.values=ct,Ke.prototype={constructor:Ke,reset:function(qe){if(this.prev=0,this.next=0,this.sent=this._sent=Ne,this.done=!1,this.delegate=null,this.method="next",this.arg=Ne,this.tryEntries.forEach(Ye),!qe)for(var ht in this)ht.charAt(0)==="t"&&ot.call(this,ht)&&!isNaN(+ht.slice(1))&&(this[ht]=Ne)},stop:function(){this.done=!0;var qe=this.tryEntries[0].completion;if(qe.type==="throw")throw qe.arg;return this.rval},dispatchException:function(qe){if(this.done)throw qe;var ht=this;function Pt(_n,Yn){return en.type="throw",en.arg=qe,ht.next=_n,Yn&&(ht.method="next",ht.arg=Ne),!!Yn}for(var xt=this.tryEntries.length-1;xt>=0;--xt){var Ge=this.tryEntries[xt],en=Ge.completion;if(Ge.tryLoc==="root")return Pt("end");if(Ge.tryLoc<=this.prev){var bt=ot.call(Ge,"catchLoc"),Vt=ot.call(Ge,"finallyLoc");if(bt&&Vt){if(this.prev<Ge.catchLoc)return Pt(Ge.catchLoc,!0);if(this.prev<Ge.finallyLoc)return Pt(Ge.finallyLoc)}else if(bt){if(this.prev<Ge.catchLoc)return Pt(Ge.catchLoc,!0)}else{if(!Vt)throw Error("try statement without catch or finally");if(this.prev<Ge.finallyLoc)return Pt(Ge.finallyLoc)}}}},abrupt:function(qe,ht){for(var Pt=this.tryEntries.length-1;Pt>=0;--Pt){var xt=this.tryEntries[Pt];if(xt.tryLoc<=this.prev&&ot.call(xt,"finallyLoc")&&this.prev<xt.finallyLoc){var Ge=xt;break}}Ge&&(qe==="break"||qe==="continue")&&Ge.tryLoc<=ht&&ht<=Ge.finallyLoc&&(Ge=null);var en=Ge?Ge.completion:{};return en.type=qe,en.arg=ht,Ge?(this.method="next",this.next=Ge.finallyLoc,Zt):this.complete(en)},complete:function(qe,ht){if(qe.type==="throw")throw qe.arg;return qe.type==="break"||qe.type==="continue"?this.next=qe.arg:qe.type==="return"?(this.rval=this.arg=qe.arg,this.method="return",this.next="end"):qe.type==="normal"&&ht&&(this.next=ht),Zt},finish:function(qe){for(var ht=this.tryEntries.length-1;ht>=0;--ht){var Pt=this.tryEntries[ht];if(Pt.finallyLoc===qe)return this.complete(Pt.completion,Pt.afterLoc),Ye(Pt),Zt}},catch:function(qe){for(var ht=this.tryEntries.length-1;ht>=0;--ht){var Pt=this.tryEntries[ht];if(Pt.tryLoc===qe){var xt=Pt.completion;if(xt.type==="throw"){var Ge=xt.arg;Ye(Pt)}return Ge}}throw Error("illegal catch attempt")},delegateYield:function(qe,ht,Pt){return this.delegate={iterator:ct(qe),resultName:ht,nextLoc:Pt},this.method==="next"&&(this.arg=Ne),Zt}},Je}function ae(Ne,Je,pt,ot,Jt,Qt,ut){try{var St=Ne[Qt](ut),Lt=St.value}catch(Ue){return void pt(Ue)}St.done?Je(Lt):Promise.resolve(Lt).then(ot,Jt)}function De(Ne){return function(){var Je=this,pt=arguments;return new Promise(function(ot,Jt){var Qt=Ne.apply(Je,pt);function ut(Lt){ae(Qt,ot,Jt,ut,St,"next",Lt)}function St(Lt){ae(Qt,ot,Jt,ut,St,"throw",Lt)}ut(void 0)})}}function Pe(Ne,Je,pt){return Object.defineProperty(Ne,"prototype",{writable:!1}),Ne}function Se(Ne,Je){if(!(Ne instanceof Je))throw new TypeError("Cannot call a class as a function")}function ee(Ne,Je,pt){return(Je=Qe(Je))in Ne?Object.defineProperty(Ne,Je,{value:pt,enumerable:!0,configurable:!0,writable:!0}):Ne[Je]=pt,Ne}function Qe(Ne){var Je=wt(Ne,"string");return Fe(Je)=="symbol"?Je:Je+""}function wt(Ne,Je){if(Fe(Ne)!="object"||!Ne)return Ne;var pt=Ne[Symbol.toPrimitive];if(pt!==void 0){var ot=pt.call(Ne,Je);if(Fe(ot)!="object")return ot;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Je==="string"?String:Number)(Ne)}var Dt={convertEpsToSvg:!1,convertPdfToSvg:!1,convertAiToSvg:!1,IsPdfWithRasterAllowed:!1},at=Pe(function Ne(Je,pt){var ot=this,Jt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Dt;Se(this,Ne),ee(this,"upload",function(){var Qt=De(we().mark(function ut(St,Lt){return we().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return Ut.next=2,ot.uploadFileChunked(St,St.type,Zakeke.generateUUID(),ot.options,Lt);case 2:return Ut.abrupt("return",Ut.sent);case 3:case"end":return Ut.stop()}},ut)}));return function(ut,St){return Qt.apply(this,arguments)}}()),ee(this,"addPrintingOptions",function(Qt){var ut=ot.options;if(Qt){var St=Be(Qt.toArray()),Lt;try{for(St.s();!(Lt=St.n()).done;){var Ue=Lt.value;ot.options.convertEpsToSvg=Ue.get("convertEpsToSvg")!==!1,ot.options.convertPdfToSvg=Ue.get("convertPdfToSvg")!==!1,ot.options.convertAiToSvg=Ue.get("convertAiToSvg")!==!1,ot.options.IsPdfWithRasterAllowed=Ue.get("isPdfWithRasterAllowed")!==!1}}catch(Ut){St.e(Ut)}finally{St.f()}ot.options=ut}}),ee(this,"uploadFileChunked",function(){var Qt=De(we().mark(function ut(St,Lt,Ue,Ut,Ot){var rn,$t,sn;return we().wrap(function(Zt){for(;;)switch(Zt.prev=Zt.next){case 0:return Zt.next=2,ot.resumableUpload(St,Lt,Ue,Ot);case 2:if(rn=Zt.sent,rn!=="OK"){Zt.next=21;break}return Zt.next=6,ot.createImageTask(Ue,Ut);case 6:if($t=Zt.sent,$t===-1){Zt.next=20;break}return Zt.next=10,ot.getImageFromTask($t);case 10:if(sn=Zt.sent,!Ut.IsPreview){Zt.next=16;break}if(!sn){Zt.next=14;break}return Zt.abrupt("return",sn.previewUrls);case 14:Zt.next=18;break;case 16:if(!(sn&&sn.images)){Zt.next=18;break}return Zt.abrupt("return",sn.images);case 18:Zt.next=21;break;case 20:throw new B.UploadFailedExpection;case 21:return Zt.abrupt("return",null);case 22:case"end":return Zt.stop()}},ut)}));return function(ut,St,Lt,Ue,Ut){return Qt.apply(this,arguments)}}()),ee(this,"resumableUpload",function(){var Qt=De(we().mark(function ut(St,Lt,Ue,Ut){return we().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return rn.abrupt("return",new Promise(function($t,sn){var lt={Authorization:"Bearer "+ot.token,"Accept-Language":ot.culture},Zt=new Resumable({target:Zakeke.config.baseImagesUploadApiUrl+"filechunks/upload",generateUniqueIdentifier:function(){return Ue},maxFiles:1,testChunks:!1,headers:lt,query:{resumableType:Lt},simultaneousUploads:3});Zt.addFile(St),Zt.on("fileError",function(zt,Le){$t("KO"),console.error("fileError",zt,Le)}),Zt.on("error",function(zt,Le){$t("KO"),console.error("error",zt,Le)}),Zt.on("progress",function(){var zt=Zt.progress()*100;Ut&&Ut(zt)}),Zt.on("fileAdded",function(zt,Le){Zt.upload()}),Zt.on("complete",function(){$t("OK")})}));case 1:case"end":return rn.stop()}},ut)}));return function(ut,St,Lt,Ue){return Qt.apply(this,arguments)}}()),ee(this,"createImageTask",function(){var Qt=De(we().mark(function ut(St,Lt){var Ue,Ut;return we().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return Ue={fileID:St,options:Lt},rn.next=3,se.axiosApi.post(Zakeke.config.baseImagesUploadApiUrl+"imagetasks",Ue);case 3:return Ut=rn.sent,rn.abrupt("return",Ut?Ut.data.taskID:-1);case 5:case"end":return rn.stop()}},ut)}));return function(ut,St){return Qt.apply(this,arguments)}}()),ee(this,"getImageFromTask",function(){var Qt=De(we().mark(function ut(St){var Lt,Ue,Ut;return we().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:Lt=0;case 1:return rn.prev=1,rn.next=4,se.axiosApi.get(Zakeke.config.baseImagesUploadApiUrl+"imagetasks/results/"+St);case 4:if(Ue=rn.sent,!(Ue&&Ue.data.state===2)){rn.next=9;break}return rn.abrupt("return",Ue.data);case 9:if(!(Ue&&Ue.data.state===3)){rn.next=11;break}return rn.abrupt("return",null);case 11:rn.next=20;break;case 13:if(rn.prev=13,rn.t0=rn.catch(1),((Ut=rn.t0.response)===null||Ut===void 0?void 0:Ut.status)!=406){rn.next=19;break}throw new B.NonSquarePixelException;case 19:return rn.abrupt("return",null);case 20:if(Lt++,!(Lt>100)){rn.next=23;break}return rn.abrupt("return",null);case 23:return rn.next=25,new Promise(function($t){return setTimeout($t,1e3)});case 25:rn.next=1;break;case 27:case"end":return rn.stop()}},ut,null,[[1,13]])}));return function(ut){return Qt.apply(this,arguments)}}()),this.culture=Je,this.token=pt,this.options=Jt})},"./src/index.tsx":(je,be,K)=>{K.r(be),K.d(be,{Attribute:()=>ae.Attribute,AttributeOptionShapeType:()=>ae.AttributeOptionShapeType,AttributeType:()=>ae.AttributeType,Camera:()=>ae.Camera,Composition:()=>ae.Composition,CompositionItem:()=>ae.CompositionItem,DAMViewerAnalyticsEventType:()=>ae.DAMViewerAnalyticsEventType,DefaultBanubaFineTuningSettings:()=>ae.DefaultBanubaFineTuningSettings,DefaultDeepARFineTuningSettings:()=>ae.DefaultDeepARFineTuningSettings,DefaultMazingFineTuningSettings:()=>ae.DefaultMazingFineTuningSettings,EventMessage:()=>ae.EventMessage,EventMessageType:()=>ae.EventMessageType,ExtensionFieldDataType:()=>ae.ExtensionFieldDataType,Group:()=>ae.Group,ImageItem:()=>ae.ImageItem,ItemType:()=>ae.ItemType,Option:()=>ae.Option,Platform:()=>ae.Platform,PlatformPriceType:()=>ae.PlatformPriceType,PlatformSettings:()=>ae.PlatformSettings,Product:()=>ae.Product,ProductArea:()=>ae.ProductArea,ProductQuantityRule:()=>ae.ProductQuantityRule,PupillaryDistanceBaseProviderReceivedMessage:()=>Fe.PupillaryDistanceBaseProviderReceivedMessage,PupillaryDistanceBaseProviderResponseMessage:()=>Fe.PupillaryDistanceBaseProviderResponseMessage,PupillaryDistanceView:()=>Be.PupillaryDistanceView,Quote:()=>ae.Quote,QuoteRule:()=>ae.QuoteRule,SellerSettings:()=>ae.SellerSettings,SellerTryOnState:()=>ae.SellerTryOnState,Step:()=>ae.Step,Template:()=>ae.Template,TemplateArea:()=>ae.TemplateArea,TemplateComposition:()=>ae.TemplateComposition,TemplateConstraints:()=>ae.TemplateConstraints,TextItem:()=>ae.TextItem,ThemeCategory:()=>ae.ThemeCategory,ThemeMacroCategory:()=>ae.ThemeMacroCategory,ThemeTemplateGroup:()=>ae.ThemeTemplateGroup,TryOnBaseProviderReceivedMessage:()=>Fe.TryOnBaseProviderReceivedMessage,TryOnBaseProviderResponseMessage:()=>Fe.TryOnBaseProviderResponseMessage,TryOnContext:()=>we.TryOnContext,TryOnFineTuningMazingEnvironment:()=>ae.TryOnFineTuningMazingEnvironment,TryOnMode:()=>Fe.TryOnMode,TryOnProvider:()=>ae.TryOnProvider,TryOnSettingsType:()=>ae.TryOnSettingsType,TryOnType:()=>ae.TryOnType,TryOnView:()=>Be.TryOnView,User:()=>ae.User,Variant:()=>ae.Variant,ZakekeDesigner:()=>se.ZakekeDesigner,ZakekeEnvironment:()=>ce.ZakekeEnvironment,ZakekeEvent:()=>ae.ZakekeEvent,ZakekeProvider:()=>De.ZakekeProvider,ZakekeTryOnViewer:()=>Be.ZakekeTryOnViewer,ZakekeViewer:()=>B.ZakekeViewer,context:()=>De.context,parseJSON:()=>Fe.parseJSON,useInternalState:()=>De.useInternalState,useZakeke:()=>me.useZakeke,useZakekeTryOn:()=>we.useZakekeTryOn});var se=K("./src/components/customizer.tsx"),B=K("./src/components/sceneViewer.tsx"),Fe=K("./src/components/tryon/tryOnModels.ts"),Be=K("./src/components/tryon/tryOnViewer.tsx"),ce=K("./src/environment.tsx"),me=K("./src/hooks/useZakeke.ts"),we=K("./src/hooks/tryonContext.ts"),ae=K("./src/models.ts"),De=K("./src/state/provider.tsx")},"./src/integrations/Integration.ts":(je,be,K)=>{K.r(be),K.d(be,{PlatformAttributeSelection:()=>Fe});function se(Be,ce,me){return Object.defineProperty(Be,"prototype",{writable:!1}),Be}function B(Be,ce){if(!(Be instanceof ce))throw new TypeError("Cannot call a class as a function")}var Fe=se(function Be(ce,me,we,ae,De,Pe){B(this,Be),this.attributeCode=ce,this.optionCode=me,this.attributeLabel=we,this.optionLabel=ae,this.attributeIsEnabled=De,this.optionIsEnabled=Pe})},"./src/integrations/generic.ts":(je,be,K)=>{K.r(be),K.d(be,{default:()=>De});function se(Pe){"@babel/helpers - typeof";return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Se){return typeof Se}:function(Se){return Se&&typeof Symbol=="function"&&Se.constructor===Symbol&&Se!==Symbol.prototype?"symbol":typeof Se},se(Pe)}function B(Pe,Se){if(!(Pe instanceof Se))throw new TypeError("Cannot call a class as a function")}function Fe(Pe,Se){for(var ee=0;ee<Se.length;ee++){var Qe=Se[ee];Qe.enumerable=Qe.enumerable||!1,Qe.configurable=!0,"value"in Qe&&(Qe.writable=!0),Object.defineProperty(Pe,me(Qe.key),Qe)}}function Be(Pe,Se,ee){return Se&&Fe(Pe.prototype,Se),Object.defineProperty(Pe,"prototype",{writable:!1}),Pe}function ce(Pe,Se,ee){return(Se=me(Se))in Pe?Object.defineProperty(Pe,Se,{value:ee,enumerable:!0,configurable:!0,writable:!0}):Pe[Se]=ee,Pe}function me(Pe){var Se=we(Pe,"string");return se(Se)=="symbol"?Se:Se+""}function we(Pe,Se){if(se(Pe)!="object"||!Pe)return Pe;var ee=Pe[Symbol.toPrimitive];if(ee!==void 0){var Qe=ee.call(Pe,Se);if(se(Qe)!="object")return Qe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Se==="string"?String:Number)(Pe)}var ae=function(Pe){return Pe.AddToCart="AddToCart",Pe.Price="Price",Pe.Close="Close",Pe.SharedComposition="SharedComposition",Pe}(ae||{}),De=function(){function Pe(){var Se=this;B(this,Pe),ce(this,"callbacks",new Map),ce(this,"messageIds",0),ce(this,"pricingCalculator",null),window.addEventListener("message",function(ee){var Qe=ee.data.zakekeMessageType;if(Qe===ae.Price||Qe===ae.SharedComposition){var wt=ee.data.messageId;if(!Se.callbacks.has(wt))return;var Dt=Se.callbacks.get(wt);Se.callbacks.delete(wt),Dt(ee.data.message)}})}return Be(Pe,[{key:"addToCart",value:function(ee,Qe,wt,Dt,at,Ne,Je,pt){var ot=this.pricingCalculator&&Qe?this.pricingCalculator.calculate(Qe,Ne):0;ot!==0&&Ne>1&&(ot=ot/Ne),ot+=pt,window.parent.postMessage({zakekeMessageType:ae.AddToCart,message:{composition:ee.id,design:Qe==null?void 0:Qe.id,preview:ee.get("previewImageUrl"),designPrice:ot,attributes:Dt,designItems:at,quantity:Ne,additionalProperties:Je}},"*")}},{key:"getPrice",value:function(ee,Qe,wt,Dt,at,Ne,Je,pt){var ot=this;return new Promise(function(Jt,Qt){var ut=ot.messageIds++;ot.callbacks.set(ut,Jt),console.log("Calculating price...");var St=ot.pricingCalculator&&Qe?ot.pricingCalculator.calculate(Qe,pt):0,Lt=ot.pricingCalculator&&Qe?ot.pricingCalculator.getMatchedConditions(Qe,pt,!0):[];Je||(St=0,Lt=[]),Ne||(at=0),console.log("Calculated Zakeke price:"),console.log("- Composition price: "+at),at!==0&&pt>1&&(at=at/pt),St!==0&&pt>1&&(St=St/pt),console.log("- Design price: "+St),window.parent.postMessage({zakekeMessageType:ae.Price,messageId:ut,message:{attributes:Dt,compositionPrice:at+St,designPrice:St,conditions:Lt,quantity:pt}},"*")})}},{key:"getSharedCompositionUrl",value:function(ee){var Qe=this;return new Promise(function(wt,Dt){var at=Qe.messageIds++;Qe.callbacks.set(at,wt),window.parent.postMessage({zakekeMessageType:ae.SharedComposition,messageId:at,message:{compositionDocID:ee}},"*")})}},{key:"close",value:function(){window.parent.postMessage({zakekeMessageType:ae.Close},"*")}},{key:"setPricingCalculator",value:function(ee){this.pricingCalculator=ee}}]),Pe}()},"./src/integrations/helpers.ts":(je,be,K)=>{K.r(be),K.d(be,{integrationFor:()=>Fe});var se=K("./src/integrations/preview.ts"),B=K("./src/integrations/generic.ts");function Fe(Be){return new Promise(function(ce,me){switch(Be){case"preview":ce(new se.default);break;default:ce(new B.default)}})}},"./src/integrations/preview.ts":(je,be,K)=>{K.r(be),K.d(be,{default:()=>ae});function se(De){"@babel/helpers - typeof";return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pe){return typeof Pe}:function(Pe){return Pe&&typeof Symbol=="function"&&Pe.constructor===Symbol&&Pe!==Symbol.prototype?"symbol":typeof Pe},se(De)}function B(De,Pe){if(!(De instanceof Pe))throw new TypeError("Cannot call a class as a function")}function Fe(De,Pe){for(var Se=0;Se<Pe.length;Se++){var ee=Pe[Se];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(De,ce(ee.key),ee)}}function Be(De,Pe,Se){return Pe&&Fe(De.prototype,Pe),Object.defineProperty(De,"prototype",{writable:!1}),De}function ce(De){var Pe=me(De,"string");return se(Pe)=="symbol"?Pe:Pe+""}function me(De,Pe){if(se(De)!="object"||!De)return De;var Se=De[Symbol.toPrimitive];if(Se!==void 0){var ee=Se.call(De,Pe);if(se(ee)!="object")return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(De)}var we=function(De){return De.Close="Close",De}(we||{}),ae=function(){function De(){B(this,De)}return Be(De,[{key:"addToCart",value:function(Se,ee,Qe,wt,Dt,at,Ne){}},{key:"getPrice",value:function(Se,ee,Qe,wt,Dt,at,Ne,Je){return new Promise(function(pt,ot){pt({price:at?Dt:0,isOutOfStock:!1})})}},{key:"getSharedCompositionUrl",value:function(Se){return new Promise(function(ee,Qe){})}},{key:"setPricingCalculator",value:function(Se){}},{key:"close",value:function(){window.parent.postMessage({zakekeMessageType:we.Close},"*")}}]),De}()},"./src/models.ts":(je,be,K)=>{K.r(be),K.d(be,{Attribute:()=>fe,AttributeOptionShapeType:()=>Q,AttributeType:()=>U,Camera:()=>tt,Composition:()=>ht,CompositionItem:()=>qe,DAMViewerAnalyticsEventType:()=>xt,DefaultBanubaFineTuningSettings:()=>ot,DefaultDeepARFineTuningSettings:()=>Jt,DefaultMazingFineTuningSettings:()=>pt,EventMessage:()=>Mt,EventMessageType:()=>Rt,ExtensionFieldDataType:()=>Pt,Group:()=>We,ImageItem:()=>zt,ItemType:()=>lt,Option:()=>de,Platform:()=>Se,PlatformPriceType:()=>ee,PlatformSettings:()=>Le,Product:()=>Qt,ProductArea:()=>Lt,ProductQuantityRule:()=>Ue,Quote:()=>St,QuoteRule:()=>ut,SellerSettings:()=>_t,SellerTryOnState:()=>Dt,Step:()=>C,Template:()=>sn,TemplateArea:()=>$t,TemplateComposition:()=>Ce,TemplateConstraints:()=>rn,TextItem:()=>Zt,ThemeCategory:()=>Ye,ThemeMacroCategory:()=>Ke,ThemeTemplateGroup:()=>ct,TryOnFineTuningMazingEnvironment:()=>Je,TryOnProvider:()=>at,TryOnSettingsType:()=>Ne,TryOnType:()=>wt,User:()=>Qe,Variant:()=>Ut,ZakekeEvent:()=>Ot});var se=K("./node_modules/lodash/lodash.js"),B=K.n(se),Fe=K("./src/exceptions.tsx");function Be(Ge){"@babel/helpers - typeof";return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(en){return typeof en}:function(en){return en&&typeof Symbol=="function"&&en.constructor===Symbol&&en!==Symbol.prototype?"symbol":typeof en},Be(Ge)}function ce(Ge,en,bt){return(en=ae(en))in Ge?Object.defineProperty(Ge,en,{value:bt,enumerable:!0,configurable:!0,writable:!0}):Ge[en]=bt,Ge}function me(Ge,en){for(var bt=0;bt<en.length;bt++){var Vt=en[bt];Vt.enumerable=Vt.enumerable||!1,Vt.configurable=!0,"value"in Vt&&(Vt.writable=!0),Object.defineProperty(Ge,ae(Vt.key),Vt)}}function we(Ge,en,bt){return en&&me(Ge.prototype,en),bt&&me(Ge,bt),Object.defineProperty(Ge,"prototype",{writable:!1}),Ge}function ae(Ge){var en=De(Ge,"string");return Be(en)=="symbol"?en:en+""}function De(Ge,en){if(Be(Ge)!="object"||!Ge)return Ge;var bt=Ge[Symbol.toPrimitive];if(bt!==void 0){var Vt=bt.call(Ge,en);if(Be(Vt)!="object")return Vt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(en==="string"?String:Number)(Ge)}function Pe(Ge,en){if(!(Ge instanceof en))throw new TypeError("Cannot call a class as a function")}var Se=function(Ge){return Ge[Ge.Magento1=5]="Magento1",Ge[Ge.Magento2=1]="Magento2",Ge[Ge.Shopify=3]="Shopify",Ge[Ge.WooCommerce=2]="WooCommerce",Ge}({}),ee=function(Ge){return Ge[Ge.Standard=0]="Standard",Ge[Ge.Inline=1]="Inline",Ge}({}),Qe=we(function Ge(en,bt,Vt){Pe(this,Ge),this.id=en,this.username=bt,this.name=Vt}),wt=function(Ge){return Ge[Ge.NotSelected=0]="NotSelected",Ge[Ge.Eyewear=1]="Eyewear",Ge[Ge.Scarves=2]="Scarves",Ge[Ge.Earrings=3]="Earrings",Ge[Ge.Headwear=4]="Headwear",Ge[Ge.Necklace=5]="Necklace",Ge[Ge.Shoes=6]="Shoes",Ge[Ge.Watches=7]="Watches",Ge[Ge.Bracelet=8]="Bracelet",Ge}({}),Dt=function(Ge){return Ge[Ge.NotActive=0]="NotActive",Ge[Ge.Active=1]="Active",Ge}({}),at=function(Ge){return Ge[Ge.NotSelected=0]="NotSelected",Ge[Ge.Mazing=1]="Mazing",Ge[Ge.Banuba=2]="Banuba",Ge[Ge.DeepAR=3]="DeepAR",Ge}({}),Ne=function(Ge){return Ge.VirtualTryOn="try_on",Ge.GlassPupillaryDistanceTool="pd",Ge.StyleButton="styleButton",Ge}({}),Je=function(Ge){return Ge.Neutral="neutral.hdr",Ge.Light="light.hdr",Ge.Bright="bright.hdr",Ge.Studio="studio.hdr",Ge.Court="court.hdr",Ge.Blurred_Studio="startup.hdr",Ge}({}),pt={temple:!1,environment:Je.Neutral,position:{x:0,y:0,z:0},scale:0},ot={rotation:{x:0,y:0,z:0},position:{x:0,y:0,z:0},scale:1},Jt={rotation:{x:0,y:0,z:0},position:{x:0,y:0,z:0},scale:1,environment:"https://zakekecdn.blob.core.windows.net/cdn/3d/assets/environments/deepAR_HDRs/Warehouse-with-lights_(intermediate)_new.hdr"},Qt=function(){function Ge(){Pe(this,Ge),ce(this,"areas",[]),ce(this,"quantityRule",null),ce(this,"quoteRule",null),ce(this,"environment",null),ce(this,"isShowSecondScreenEnabled",!1),ce(this,"isAiConfigurationEnabled",!1),ce(this,"isOldViewer",!1)}return we(Ge,null,[{key:"fromProduct",value:function(bt){var Vt=new Ge;return Vt.id=bt.id,Vt.sku=bt.get("code"),Vt.name=bt.get("name"),Vt.previewUrl=bt.get("largeImageUrl"),Vt.quantityRule=bt.get("quantityRule")?Ue.fromQuantityRule(bt.get("quantityRule")):null,Vt.areas=bt.get("colors").length>0?bt.get("colors").at(0).get("sides").map(function(_n){return Lt.fromSide(_n)}):[],Vt.quoteRule=bt.get("quoteRule")?new ut(bt.get("quoteRule")):null,Vt.environment=bt.get("environment"),Vt.isShowSecondScreenEnabled=bt.get("isShowSecondScreenEnabled"),Vt.isAiConfigurationEnabled=bt.get("isAiConfigurationEnabled"),Vt.isOldViewer=bt.get("isOldViewer"),Vt}}]),Ge}(),ut=we(function Ge(en){Pe(this,Ge),this.quoteRuleID=en.quoteRuleID,this.name=en.name,this.sellerID=en.sellerID,this.formControlsData=en.formControlsData,this.isValidForAllProducts=en.isValidForAllProducts,this.allowAddToCart=en.allowAddToCart,this.products=en.products}),St=we(function Ge(){Pe(this,Ge),ce(this,"statusID",1),ce(this,"quantity",1),ce(this,"modelPrice",0)}),Lt=function(){function Ge(){Pe(this,Ge)}return we(Ge,null,[{key:"fromSide",value:function(bt){var Vt=new Ge;return Vt.id=bt.id,Vt.name=bt.get("name"),Vt.cameraLocationID=bt.get("cameraLocationID"),Vt}}]),Ge}(),Ue=function(){function Ge(){Pe(this,Ge),ce(this,"minQuantity",null),ce(this,"maxQuantity",null),ce(this,"step",null)}return we(Ge,null,[{key:"fromQuantityRule",value:function(bt){if(!bt)throw"Invalid quantity rule";var Vt=new Ge;return Vt.minQuantity=bt.get("minQuantity"),Vt.maxQuantity=bt.get("maxQuantity"),Vt.step=bt.get("step"),Vt}}]),Ge}(),Ut=we(function Ge(en,bt,Vt,_n,Yn){Pe(this,Ge),this.id=en,this.sku=bt,this.name=Vt,this.price=_n,this.metadata=Yn}),Ot=we(function Ge(en,bt){Pe(this,Ge),this.event=en,this.callback=bt}),rn=we(function Ge(){Pe(this,Ge),ce(this,"isUserImageAllowed",!0)}),$t=function(){function Ge(){Pe(this,Ge),ce(this,"id",-1),ce(this,"uploadRestrictions",new rn),ce(this,"disableSellerImages",!1),ce(this,"canAddImage",!0),ce(this,"canAddText",!0)}return we(Ge,null,[{key:"fromTemplateArea",value:function(bt){var Vt=new Ge;return Vt.id=bt.get("sideID"),Vt.disableSellerImages=bt.get("disableSellerImages"),Vt.canAddImage=bt.get("canAddImage"),Vt.canAddText=bt.get("canAddText"),bt.get("uploadRestrictions")&&(Vt.uploadRestrictions=B().mergeWith(new rn,bt.get("uploadRestrictions"),function(_n,Yn){return Yn??_n})),Vt}}]),Ge}(),sn=function(){function Ge(){Pe(this,Ge),ce(this,"id",-1),ce(this,"name",""),ce(this,"areas",[])}return we(Ge,null,[{key:"fromTemplate",value:function(bt){var Vt=new Ge;return Vt.id=bt.get("templateDesignID"),Vt.name=bt.get("name"),Vt.areas=bt.get("sides").map(function(_n){return $t.fromTemplateArea(_n)}),Vt}}]),Ge}(),lt=function(Ge){return Ge[Ge.Text=0]="Text",Ge[Ge.Image=1]="Image",Ge}({}),Zt=we(function Ge(en){var bt;Pe(this,Ge),ce(this,"constraints",null),ce(this,"index",0),this.type=lt.Text,this.areaId=en.sideID,this.guid=en.itemGuid,this.name=en.designItem.get("name"),this.text=en.text,this.strokeColor=en.strokeColor,this.strokeWidth=en.strokeWidth,this.fillColor=en.fillColor,this.fontFamily=en.fontFamily,this.fontSize=en.fontSize,this.fontWeight=en.fontWeight,this.fontStyle=en.fontStyle,this.fontStretch=en.fontStretch,this.justification=en.justification,this.isTextOnPath=en.isTextOnPath,this.isTemplateElement=(bt=en.item.data.isTemplateElement)!==null&&bt!==void 0?bt:!1,this.constraints=en.constraints,this.index=en.designItem.get("index")}),zt=we(function Ge(en){Pe(this,Ge),ce(this,"constraints",null),ce(this,"index",0),this.type=lt.Image,this.imageID=en.imageID,this.areaId=en.sideID,this.guid=en.itemGuid,this.name=en.designItem.get("name"),this.url=en.url,this.deleted=!en.visible,this.constraints=en.constraints,this.index=en.designItem.get("index")}),Le=function(){function Ge(en,bt,Vt,_n,Yn,or,lr,Jn,$n,Tn){Pe(this,Ge),this.ecommerceId=en,this.currencyId=bt,this.apiKey=Vt,this.apiSecret=_n,this.accessKey=Yn,this.accessSecret=or,this.remoteUrl=lr,this.username=Jn,this.password=$n,this.adminPath=Tn}return we(Ge,[{key:"platform",get:function(){return this.ecommerceId}}],[{key:"fromData",value:function(bt){if(!bt)throw new Fe.Exception("Cannot create platform settings from null");return new Ge(bt.ecommerceId,bt.currencyId,bt.apiKey,bt.accessSecret,bt.accessKey,bt.accessSecret,bt.remoteUrl,bt.username,bt.password,bt.adminPath)}}]),Ge}();ce(Le,"Empty",new Le(-1,-1,"","","","","","","",""));var Mt=function(){function Ge(){Pe(this,Ge),ce(this,"eventID",-1),ce(this,"description",""),ce(this,"closeable",!1),ce(this,"visible",!1),ce(this,"addToCartDisabledIfVisible",!1),ce(this,"enableCheckForSellerImages",!1),ce(this,"isDefault",!1)}return we(Ge,null,[{key:"fromMessage",value:function(bt){var Vt=new Ge;return Vt.eventID=bt.eventID,Vt.description=bt.description,Vt.closeable=bt.closeable,Vt.visible=bt.visible,Vt.addToCartDisabledIfVisible=bt.addToCartDisabledIfVisible,Vt.additionalData=bt.additionalData!==""&&bt.additionalData!==null?JSON.parse(bt.additionalData):"",Vt.enableCheckForSellerImages=bt.enableCheckForSellerImages,Vt.isDefault=bt.isDefault,Vt}}]),Ge}(),Rt=function(Ge){return Ge[Ge.Undefined=-1]="Undefined",Ge[Ge.ImageQualityWarning=1]="ImageQualityWarning",Ge[Ge.Welcome=3]="Welcome",Ge[Ge.AddToCart=4]="AddToCart",Ge[Ge.Copyright=8]="Copyright",Ge}({}),tt=function(){function Ge(){Pe(this,Ge),ce(this,"id",""),ce(this,"name","")}return we(Ge,null,[{key:"fromZkCamera",value:function(bt){var Vt=new Ge;return Vt.id=bt.get("locationID"),Vt.name=bt.get("name"),Vt}}]),Ge}(),We=we(function Ge(){Pe(this,Ge),ce(this,"id",-1),ce(this,"guid",""),ce(this,"name","Group"),ce(this,"enabled",!1),ce(this,"imageUrl",null),ce(this,"icon",null),ce(this,"attributes",[]),ce(this,"steps",[]),ce(this,"templateGroups",[]),ce(this,"cameraLocationId",null),ce(this,"displayOrder",1),ce(this,"direction",0),ce(this,"attributesAlwaysOpened",!1)}),C=we(function Ge(){Pe(this,Ge),ce(this,"id",-1),ce(this,"guid",""),ce(this,"name","Step"),ce(this,"cameraLocationID",null),ce(this,"displayOrder",1),ce(this,"attributes",[]),ce(this,"templateGroups",[])}),U=function(Ge){return Ge[Ge.Select=0]="Select",Ge[Ge.Input=1]="Input",Ge[Ge.Colorpicker=2]="Colorpicker",Ge}({}),Q=function(Ge){return Ge[Ge.Round=1]="Round",Ge[Ge.Square=2]="Square",Ge}({}),fe=we(function Ge(){Pe(this,Ge),ce(this,"id",-1),ce(this,"guid",""),ce(this,"code",""),ce(this,"name","Attribute"),ce(this,"description",""),ce(this,"enabled",!1),ce(this,"imageUrl",null),ce(this,"groupId",-1),ce(this,"stepId",-1),ce(this,"options",[]),ce(this,"value",null),ce(this,"numberFormat",""),ce(this,"type",U.Select),ce(this,"optionShapeType",Q.Round),ce(this,"displayOrder",1),ce(this,"hideOptionsLabel",!1),ce(this,"cameraLocationId",null)}),de=we(function Ge(){Pe(this,Ge),ce(this,"id",-1),ce(this,"guid",""),ce(this,"code",""),ce(this,"name","Option"),ce(this,"description",""),ce(this,"enabled",!1),ce(this,"selected",!1),ce(this,"imageUrl",null),ce(this,"displayOrder",1),ce(this,"pricings",[])}),Ce=we(function Ge(){Pe(this,Ge),ce(this,"compositionID",-1),ce(this,"name",""),ce(this,"previewImageUrl","")}),Ye=we(function Ge(){Pe(this,Ge),ce(this,"id",-1),ce(this,"name",""),ce(this,"composition",[])}),Ke=we(function Ge(){Pe(this,Ge),ce(this,"id",-1),ce(this,"name",""),ce(this,"category",[])}),ct=we(function Ge(){Pe(this,Ge),ce(this,"templateGroupID",-1),ce(this,"name",""),ce(this,"groupID",-1),ce(this,"stepID",-1),ce(this,"displayOrder",-1),ce(this,"macroCategory",[])}),_t=function(){function Ge(){Pe(this,Ge),ce(this,"customizeButtonLabel",""),ce(this,"customizeButtonIconUrl",""),ce(this,"isCompositionRecapEnabled",!1),ce(this,"isCompositionRecapVisibleFromStart",!1),ce(this,"canUserCloseCompositionRecap",!0),ce(this,"minimumFractionDigits",1),ce(this,"priceInfoText",""),ce(this,"hidePrice",!1),ce(this,"hotjarSiteID",null),ce(this,"googleTagManagerID",null),ce(this,"canSaveDraftComposition",!1),ce(this,"canUndoRedo",!1),ce(this,"shareType",null)}return we(Ge,null,[{key:"fromSellerSettings",value:function(bt){var Vt=new Ge;return Vt.customizeButtonLabel=bt.customizeButtonLabel,Vt.customizeButtonIconUrl=bt.customizeButtonIconUrl,Vt.isCompositionRecapEnabled=bt.isCompositionRecapEnabled,Vt.isCompositionRecapVisibleFromStart=bt.isCompositionRecapVisibleFromStart,Vt.canUserCloseCompositionRecap=bt.canUserCloseCompositionRecap,Vt.minimumFractionDigits=bt.minimumFractionDigits,Vt.priceInfoText=bt.priceInfoText,Vt.hidePrice=bt.hidePrice,Vt.hotjarSiteID=bt.hotjarSiteID,Vt.googleTagManagerID=bt.googleTagManagerID,Vt.canSaveDraftComposition=bt.canSaveDraftComposition,Vt.canUndoRedo=bt.canUndoRedo,Vt.shareType=bt.shareType,Vt}}]),Ge}(),qe=we(function Ge(){Pe(this,Ge),ce(this,"attributeID",-1),ce(this,"attributeName",""),ce(this,"attributeCode",""),ce(this,"selectedOptionName",""),ce(this,"selectedOptionCode","")}),ht=function(){function Ge(){Pe(this,Ge),ce(this,"name",""),ce(this,"docID",""),ce(this,"compositionID",-1),ce(this,"compositionItems",[]),ce(this,"previewImageUrl",""),ce(this,"designID",null),ce(this,"pdSettings",null),ce(this,"tags",[])}return we(Ge,null,[{key:"fromJSON",value:function(bt){var Vt=new Ge;return B().assign(Vt,bt),Vt}}]),Ge}(),Pt=function(Ge){return Ge[Ge.Money=1]="Money",Ge[Ge.Integer=2]="Integer",Ge[Ge.Decimal=3]="Decimal",Ge}({}),xt=function(Ge){return Ge.ViewProduct="VIEW_PRODUCT",Ge.ViewArProdutc="VIEW_AR_PRODUCT",Ge}({})},"./src/state/boot.tsx":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Ne});var se=K("./node_modules/qs/lib/index.js"),B=K.n(se),Fe=K("react"),Be=K.n(Fe),ce=K("./src/index.tsx");function me(Je){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pt){return typeof pt}:function(pt){return pt&&typeof Symbol=="function"&&pt.constructor===Symbol&&pt!==Symbol.prototype?"symbol":typeof pt},me(Je)}function we(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */we=function(){return pt};var Je,pt={},ot=Object.prototype,Jt=ot.hasOwnProperty,Qt=Object.defineProperty||function(qe,ht,Pt){qe[ht]=Pt.value},ut=typeof Symbol=="function"?Symbol:{},St=ut.iterator||"@@iterator",Lt=ut.asyncIterator||"@@asyncIterator",Ue=ut.toStringTag||"@@toStringTag";function Ut(qe,ht,Pt){return Object.defineProperty(qe,ht,{value:Pt,enumerable:!0,configurable:!0,writable:!0}),qe[ht]}try{Ut({},"")}catch{Ut=function(Pt,xt,Ge){return Pt[xt]=Ge}}function Ot(qe,ht,Pt,xt){var Ge=ht&&ht.prototype instanceof Le?ht:Le,en=Object.create(Ge.prototype),bt=new ct(xt||[]);return Qt(en,"_invoke",{value:de(qe,Pt,bt)}),en}function rn(qe,ht,Pt){try{return{type:"normal",arg:qe.call(ht,Pt)}}catch(xt){return{type:"throw",arg:xt}}}pt.wrap=Ot;var $t="suspendedStart",sn="suspendedYield",lt="executing",Zt="completed",zt={};function Le(){}function Mt(){}function Rt(){}var tt={};Ut(tt,St,function(){return this});var We=Object.getPrototypeOf,C=We&&We(We(_t([])));C&&C!==ot&&Jt.call(C,St)&&(tt=C);var U=Rt.prototype=Le.prototype=Object.create(tt);function Q(qe){["next","throw","return"].forEach(function(ht){Ut(qe,ht,function(Pt){return this._invoke(ht,Pt)})})}function fe(qe,ht){function Pt(Ge,en,bt,Vt){var _n=rn(qe[Ge],qe,en);if(_n.type!=="throw"){var Yn=_n.arg,or=Yn.value;return or&&me(or)=="object"&&Jt.call(or,"__await")?ht.resolve(or.__await).then(function(lr){Pt("next",lr,bt,Vt)},function(lr){Pt("throw",lr,bt,Vt)}):ht.resolve(or).then(function(lr){Yn.value=lr,bt(Yn)},function(lr){return Pt("throw",lr,bt,Vt)})}Vt(_n.arg)}var xt;Qt(this,"_invoke",{value:function(en,bt){function Vt(){return new ht(function(_n,Yn){Pt(en,bt,_n,Yn)})}return xt=xt?xt.then(Vt,Vt):Vt()}})}function de(qe,ht,Pt){var xt=$t;return function(Ge,en){if(xt===lt)throw Error("Generator is already running");if(xt===Zt){if(Ge==="throw")throw en;return{value:Je,done:!0}}for(Pt.method=Ge,Pt.arg=en;;){var bt=Pt.delegate;if(bt){var Vt=Ce(bt,Pt);if(Vt){if(Vt===zt)continue;return Vt}}if(Pt.method==="next")Pt.sent=Pt._sent=Pt.arg;else if(Pt.method==="throw"){if(xt===$t)throw xt=Zt,Pt.arg;Pt.dispatchException(Pt.arg)}else Pt.method==="return"&&Pt.abrupt("return",Pt.arg);xt=lt;var _n=rn(qe,ht,Pt);if(_n.type==="normal"){if(xt=Pt.done?Zt:sn,_n.arg===zt)continue;return{value:_n.arg,done:Pt.done}}_n.type==="throw"&&(xt=Zt,Pt.method="throw",Pt.arg=_n.arg)}}}function Ce(qe,ht){var Pt=ht.method,xt=qe.iterator[Pt];if(xt===Je)return ht.delegate=null,Pt==="throw"&&qe.iterator.return&&(ht.method="return",ht.arg=Je,Ce(qe,ht),ht.method==="throw")||Pt!=="return"&&(ht.method="throw",ht.arg=new TypeError("The iterator does not provide a '"+Pt+"' method")),zt;var Ge=rn(xt,qe.iterator,ht.arg);if(Ge.type==="throw")return ht.method="throw",ht.arg=Ge.arg,ht.delegate=null,zt;var en=Ge.arg;return en?en.done?(ht[qe.resultName]=en.value,ht.next=qe.nextLoc,ht.method!=="return"&&(ht.method="next",ht.arg=Je),ht.delegate=null,zt):en:(ht.method="throw",ht.arg=new TypeError("iterator result is not an object"),ht.delegate=null,zt)}function Ye(qe){var ht={tryLoc:qe[0]};1 in qe&&(ht.catchLoc=qe[1]),2 in qe&&(ht.finallyLoc=qe[2],ht.afterLoc=qe[3]),this.tryEntries.push(ht)}function Ke(qe){var ht=qe.completion||{};ht.type="normal",delete ht.arg,qe.completion=ht}function ct(qe){this.tryEntries=[{tryLoc:"root"}],qe.forEach(Ye,this),this.reset(!0)}function _t(qe){if(qe||qe===""){var ht=qe[St];if(ht)return ht.call(qe);if(typeof qe.next=="function")return qe;if(!isNaN(qe.length)){var Pt=-1,xt=function Ge(){for(;++Pt<qe.length;)if(Jt.call(qe,Pt))return Ge.value=qe[Pt],Ge.done=!1,Ge;return Ge.value=Je,Ge.done=!0,Ge};return xt.next=xt}}throw new TypeError(me(qe)+" is not iterable")}return Mt.prototype=Rt,Qt(U,"constructor",{value:Rt,configurable:!0}),Qt(Rt,"constructor",{value:Mt,configurable:!0}),Mt.displayName=Ut(Rt,Ue,"GeneratorFunction"),pt.isGeneratorFunction=function(qe){var ht=typeof qe=="function"&&qe.constructor;return!!ht&&(ht===Mt||(ht.displayName||ht.name)==="GeneratorFunction")},pt.mark=function(qe){return Object.setPrototypeOf?Object.setPrototypeOf(qe,Rt):(qe.__proto__=Rt,Ut(qe,Ue,"GeneratorFunction")),qe.prototype=Object.create(U),qe},pt.awrap=function(qe){return{__await:qe}},Q(fe.prototype),Ut(fe.prototype,Lt,function(){return this}),pt.AsyncIterator=fe,pt.async=function(qe,ht,Pt,xt,Ge){Ge===void 0&&(Ge=Promise);var en=new fe(Ot(qe,ht,Pt,xt),Ge);return pt.isGeneratorFunction(ht)?en:en.next().then(function(bt){return bt.done?bt.value:en.next()})},Q(U),Ut(U,Ue,"Generator"),Ut(U,St,function(){return this}),Ut(U,"toString",function(){return"[object Generator]"}),pt.keys=function(qe){var ht=Object(qe),Pt=[];for(var xt in ht)Pt.push(xt);return Pt.reverse(),function Ge(){for(;Pt.length;){var en=Pt.pop();if(en in ht)return Ge.value=en,Ge.done=!1,Ge}return Ge.done=!0,Ge}},pt.values=_t,ct.prototype={constructor:ct,reset:function(ht){if(this.prev=0,this.next=0,this.sent=this._sent=Je,this.done=!1,this.delegate=null,this.method="next",this.arg=Je,this.tryEntries.forEach(Ke),!ht)for(var Pt in this)Pt.charAt(0)==="t"&&Jt.call(this,Pt)&&!isNaN(+Pt.slice(1))&&(this[Pt]=Je)},stop:function(){this.done=!0;var ht=this.tryEntries[0].completion;if(ht.type==="throw")throw ht.arg;return this.rval},dispatchException:function(ht){if(this.done)throw ht;var Pt=this;function xt(Yn,or){return bt.type="throw",bt.arg=ht,Pt.next=Yn,or&&(Pt.method="next",Pt.arg=Je),!!or}for(var Ge=this.tryEntries.length-1;Ge>=0;--Ge){var en=this.tryEntries[Ge],bt=en.completion;if(en.tryLoc==="root")return xt("end");if(en.tryLoc<=this.prev){var Vt=Jt.call(en,"catchLoc"),_n=Jt.call(en,"finallyLoc");if(Vt&&_n){if(this.prev<en.catchLoc)return xt(en.catchLoc,!0);if(this.prev<en.finallyLoc)return xt(en.finallyLoc)}else if(Vt){if(this.prev<en.catchLoc)return xt(en.catchLoc,!0)}else{if(!_n)throw Error("try statement without catch or finally");if(this.prev<en.finallyLoc)return xt(en.finallyLoc)}}}},abrupt:function(ht,Pt){for(var xt=this.tryEntries.length-1;xt>=0;--xt){var Ge=this.tryEntries[xt];if(Ge.tryLoc<=this.prev&&Jt.call(Ge,"finallyLoc")&&this.prev<Ge.finallyLoc){var en=Ge;break}}en&&(ht==="break"||ht==="continue")&&en.tryLoc<=Pt&&Pt<=en.finallyLoc&&(en=null);var bt=en?en.completion:{};return bt.type=ht,bt.arg=Pt,en?(this.method="next",this.next=en.finallyLoc,zt):this.complete(bt)},complete:function(ht,Pt){if(ht.type==="throw")throw ht.arg;return ht.type==="break"||ht.type==="continue"?this.next=ht.arg:ht.type==="return"?(this.rval=this.arg=ht.arg,this.method="return",this.next="end"):ht.type==="normal"&&Pt&&(this.next=Pt),zt},finish:function(ht){for(var Pt=this.tryEntries.length-1;Pt>=0;--Pt){var xt=this.tryEntries[Pt];if(xt.finallyLoc===ht)return this.complete(xt.completion,xt.afterLoc),Ke(xt),zt}},catch:function(ht){for(var Pt=this.tryEntries.length-1;Pt>=0;--Pt){var xt=this.tryEntries[Pt];if(xt.tryLoc===ht){var Ge=xt.completion;if(Ge.type==="throw"){var en=Ge.arg;Ke(xt)}return en}}throw Error("illegal catch attempt")},delegateYield:function(ht,Pt,xt){return this.delegate={iterator:_t(ht),resultName:Pt,nextLoc:xt},this.method==="next"&&(this.arg=Je),zt}},pt}function ae(Je,pt,ot,Jt,Qt,ut,St){try{var Lt=Je[ut](St),Ue=Lt.value}catch(Ut){return void ot(Ut)}Lt.done?pt(Ue):Promise.resolve(Ue).then(Jt,Qt)}function De(Je){return function(){var pt=this,ot=arguments;return new Promise(function(Jt,Qt){var ut=Je.apply(pt,ot);function St(Ue){ae(ut,Jt,Qt,St,Lt,"next",Ue)}function Lt(Ue){ae(ut,Jt,Qt,St,Lt,"throw",Ue)}St(void 0)})}}function Pe(Je,pt){return Dt(Je)||wt(Je,pt)||ee(Je,pt)||Se()}function Se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(Je,pt){if(Je){if(typeof Je=="string")return Qe(Je,pt);var ot={}.toString.call(Je).slice(8,-1);return ot==="Object"&&Je.constructor&&(ot=Je.constructor.name),ot==="Map"||ot==="Set"?Array.from(Je):ot==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ot)?Qe(Je,pt):void 0}}function Qe(Je,pt){(pt==null||pt>Je.length)&&(pt=Je.length);for(var ot=0,Jt=Array(pt);ot<pt;ot++)Jt[ot]=Je[ot];return Jt}function wt(Je,pt){var ot=Je==null?null:typeof Symbol<"u"&&Je[Symbol.iterator]||Je["@@iterator"];if(ot!=null){var Jt,Qt,ut,St,Lt=[],Ue=!0,Ut=!1;try{if(ut=(ot=ot.call(Je)).next,pt!==0)for(;!(Ue=(Jt=ut.call(ot)).done)&&(Lt.push(Jt.value),Lt.length!==pt);Ue=!0);}catch(Ot){Ut=!0,Qt=Ot}finally{try{if(!Ue&&ot.return!=null&&(St=ot.return(),Object(St)!==St))return}finally{if(Ut)throw Qt}}return Lt}}function Dt(Je){if(Array.isArray(Je))return Je}var at=function(pt){var ot=pt.parameters,Jt=pt.children,Qt=(0,ce.useInternalState)(),ut=(0,Fe.useRef)(Qt);ut.current=Qt;var St=Be().useState(!1),Lt=Pe(St,2);Lt[0],Lt[1];var Ue=(0,Fe.useCallback)(function(){var Ot=De(we().mark(function rn($t){var sn,lt,Zt,zt,Le,Mt;return we().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return(sn=ut.current)===null||sn===void 0||sn.dispatch({type:"IS_SCENE_LOADING",isLoading:!0}),(lt=ut.current)===null||lt===void 0||lt.state.environment.on("change",function(){var We;return(We=ut.current)===null||We===void 0?void 0:We.dispatch({type:"UPDATE"})}),(Zt=ut.current)===null||Zt===void 0||Zt.state.environment.on("debugMode",function(){var We;return(We=ut.current)===null||We===void 0?void 0:We.dispatch({type:"DEBUG_MODE"})}),(zt=ut.current)===null||zt===void 0||zt.state.environment.on("viewer",function(We){var C;return(C=ut.current)===null||C===void 0?void 0:C.dispatch({type:"VIEWER",value:We})}),tt.next=6,(Le=ut.current)===null||Le===void 0?void 0:Le.state.environment.boot($t);case 6:(Mt=ut.current)===null||Mt===void 0||Mt.dispatch({type:"IS_SCENE_LOADING",isLoading:!1});case 7:case"end":return tt.stop()}},rn)}));return function(rn){return Ot.apply(this,arguments)}}(),[]),Ut=(0,Fe.useCallback)(function(){var Ot=De(we().mark(function rn($t){var sn,lt;return we().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:$t.data.type=="load"&&!((sn=ut.current)!==null&&sn!==void 0&&sn.state.parametersReceived)&&((lt=ut.current)===null||lt===void 0||lt.dispatch({type:"PARAMETERS_RECEIVED"}),Ue($t.data.parameters),window.parent.postMessage({zakekeType:"loaded",message:{integrationVersion:2}},"*"));case 1:case"end":return zt.stop()}},rn)}));return function(rn){return Ot.apply(this,arguments)}}(),[]);return(0,Fe.useEffect)(function(){var Ot=B().parse(window.location.search);return ot?(console.log("Loading parameters from boot parameters prop..."),Ue(ot)):Ot&&Ot.ecommerce&&Ot.ecommerce=="preview"?(console.log("Loading parameters from query string..."),Ue(null)):(console.log("Loading parameters from post message..."),window.addEventListener("message",Ut)),function(){return window.removeEventListener("message",Ut)}},[]),Be().createElement(Be().Fragment,null,Jt)};const Ne=at},"./src/state/createProviderValue.ts":(je,be,K)=>{K.r(be),K.d(be,{createProviderValue:()=>me});var se=K("./src/helpers.tsx");function B(we){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},B(we)}function Fe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Fe=function(){return ae};var we,ae={},De=Object.prototype,Pe=De.hasOwnProperty,Se=Object.defineProperty||function(We,C,U){We[C]=U.value},ee=typeof Symbol=="function"?Symbol:{},Qe=ee.iterator||"@@iterator",wt=ee.asyncIterator||"@@asyncIterator",Dt=ee.toStringTag||"@@toStringTag";function at(We,C,U){return Object.defineProperty(We,C,{value:U,enumerable:!0,configurable:!0,writable:!0}),We[C]}try{at({},"")}catch{at=function(U,Q,fe){return U[Q]=fe}}function Ne(We,C,U,Q){var fe=C&&C.prototype instanceof St?C:St,de=Object.create(fe.prototype),Ce=new Rt(Q||[]);return Se(de,"_invoke",{value:Zt(We,U,Ce)}),de}function Je(We,C,U){try{return{type:"normal",arg:We.call(C,U)}}catch(Q){return{type:"throw",arg:Q}}}ae.wrap=Ne;var pt="suspendedStart",ot="suspendedYield",Jt="executing",Qt="completed",ut={};function St(){}function Lt(){}function Ue(){}var Ut={};at(Ut,Qe,function(){return this});var Ot=Object.getPrototypeOf,rn=Ot&&Ot(Ot(tt([])));rn&&rn!==De&&Pe.call(rn,Qe)&&(Ut=rn);var $t=Ue.prototype=St.prototype=Object.create(Ut);function sn(We){["next","throw","return"].forEach(function(C){at(We,C,function(U){return this._invoke(C,U)})})}function lt(We,C){function U(fe,de,Ce,Ye){var Ke=Je(We[fe],We,de);if(Ke.type!=="throw"){var ct=Ke.arg,_t=ct.value;return _t&&B(_t)=="object"&&Pe.call(_t,"__await")?C.resolve(_t.__await).then(function(qe){U("next",qe,Ce,Ye)},function(qe){U("throw",qe,Ce,Ye)}):C.resolve(_t).then(function(qe){ct.value=qe,Ce(ct)},function(qe){return U("throw",qe,Ce,Ye)})}Ye(Ke.arg)}var Q;Se(this,"_invoke",{value:function(de,Ce){function Ye(){return new C(function(Ke,ct){U(de,Ce,Ke,ct)})}return Q=Q?Q.then(Ye,Ye):Ye()}})}function Zt(We,C,U){var Q=pt;return function(fe,de){if(Q===Jt)throw Error("Generator is already running");if(Q===Qt){if(fe==="throw")throw de;return{value:we,done:!0}}for(U.method=fe,U.arg=de;;){var Ce=U.delegate;if(Ce){var Ye=zt(Ce,U);if(Ye){if(Ye===ut)continue;return Ye}}if(U.method==="next")U.sent=U._sent=U.arg;else if(U.method==="throw"){if(Q===pt)throw Q=Qt,U.arg;U.dispatchException(U.arg)}else U.method==="return"&&U.abrupt("return",U.arg);Q=Jt;var Ke=Je(We,C,U);if(Ke.type==="normal"){if(Q=U.done?Qt:ot,Ke.arg===ut)continue;return{value:Ke.arg,done:U.done}}Ke.type==="throw"&&(Q=Qt,U.method="throw",U.arg=Ke.arg)}}}function zt(We,C){var U=C.method,Q=We.iterator[U];if(Q===we)return C.delegate=null,U==="throw"&&We.iterator.return&&(C.method="return",C.arg=we,zt(We,C),C.method==="throw")||U!=="return"&&(C.method="throw",C.arg=new TypeError("The iterator does not provide a '"+U+"' method")),ut;var fe=Je(Q,We.iterator,C.arg);if(fe.type==="throw")return C.method="throw",C.arg=fe.arg,C.delegate=null,ut;var de=fe.arg;return de?de.done?(C[We.resultName]=de.value,C.next=We.nextLoc,C.method!=="return"&&(C.method="next",C.arg=we),C.delegate=null,ut):de:(C.method="throw",C.arg=new TypeError("iterator result is not an object"),C.delegate=null,ut)}function Le(We){var C={tryLoc:We[0]};1 in We&&(C.catchLoc=We[1]),2 in We&&(C.finallyLoc=We[2],C.afterLoc=We[3]),this.tryEntries.push(C)}function Mt(We){var C=We.completion||{};C.type="normal",delete C.arg,We.completion=C}function Rt(We){this.tryEntries=[{tryLoc:"root"}],We.forEach(Le,this),this.reset(!0)}function tt(We){if(We||We===""){var C=We[Qe];if(C)return C.call(We);if(typeof We.next=="function")return We;if(!isNaN(We.length)){var U=-1,Q=function fe(){for(;++U<We.length;)if(Pe.call(We,U))return fe.value=We[U],fe.done=!1,fe;return fe.value=we,fe.done=!0,fe};return Q.next=Q}}throw new TypeError(B(We)+" is not iterable")}return Lt.prototype=Ue,Se($t,"constructor",{value:Ue,configurable:!0}),Se(Ue,"constructor",{value:Lt,configurable:!0}),Lt.displayName=at(Ue,Dt,"GeneratorFunction"),ae.isGeneratorFunction=function(We){var C=typeof We=="function"&&We.constructor;return!!C&&(C===Lt||(C.displayName||C.name)==="GeneratorFunction")},ae.mark=function(We){return Object.setPrototypeOf?Object.setPrototypeOf(We,Ue):(We.__proto__=Ue,at(We,Dt,"GeneratorFunction")),We.prototype=Object.create($t),We},ae.awrap=function(We){return{__await:We}},sn(lt.prototype),at(lt.prototype,wt,function(){return this}),ae.AsyncIterator=lt,ae.async=function(We,C,U,Q,fe){fe===void 0&&(fe=Promise);var de=new lt(Ne(We,C,U,Q),fe);return ae.isGeneratorFunction(C)?de:de.next().then(function(Ce){return Ce.done?Ce.value:de.next()})},sn($t),at($t,Dt,"Generator"),at($t,Qe,function(){return this}),at($t,"toString",function(){return"[object Generator]"}),ae.keys=function(We){var C=Object(We),U=[];for(var Q in C)U.push(Q);return U.reverse(),function fe(){for(;U.length;){var de=U.pop();if(de in C)return fe.value=de,fe.done=!1,fe}return fe.done=!0,fe}},ae.values=tt,Rt.prototype={constructor:Rt,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=we,this.done=!1,this.delegate=null,this.method="next",this.arg=we,this.tryEntries.forEach(Mt),!C)for(var U in this)U.charAt(0)==="t"&&Pe.call(this,U)&&!isNaN(+U.slice(1))&&(this[U]=we)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var U=this;function Q(ct,_t){return Ce.type="throw",Ce.arg=C,U.next=ct,_t&&(U.method="next",U.arg=we),!!_t}for(var fe=this.tryEntries.length-1;fe>=0;--fe){var de=this.tryEntries[fe],Ce=de.completion;if(de.tryLoc==="root")return Q("end");if(de.tryLoc<=this.prev){var Ye=Pe.call(de,"catchLoc"),Ke=Pe.call(de,"finallyLoc");if(Ye&&Ke){if(this.prev<de.catchLoc)return Q(de.catchLoc,!0);if(this.prev<de.finallyLoc)return Q(de.finallyLoc)}else if(Ye){if(this.prev<de.catchLoc)return Q(de.catchLoc,!0)}else{if(!Ke)throw Error("try statement without catch or finally");if(this.prev<de.finallyLoc)return Q(de.finallyLoc)}}}},abrupt:function(C,U){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var fe=this.tryEntries[Q];if(fe.tryLoc<=this.prev&&Pe.call(fe,"finallyLoc")&&this.prev<fe.finallyLoc){var de=fe;break}}de&&(C==="break"||C==="continue")&&de.tryLoc<=U&&U<=de.finallyLoc&&(de=null);var Ce=de?de.completion:{};return Ce.type=C,Ce.arg=U,de?(this.method="next",this.next=de.finallyLoc,ut):this.complete(Ce)},complete:function(C,U){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&U&&(this.next=U),ut},finish:function(C){for(var U=this.tryEntries.length-1;U>=0;--U){var Q=this.tryEntries[U];if(Q.finallyLoc===C)return this.complete(Q.completion,Q.afterLoc),Mt(Q),ut}},catch:function(C){for(var U=this.tryEntries.length-1;U>=0;--U){var Q=this.tryEntries[U];if(Q.tryLoc===C){var fe=Q.completion;if(fe.type==="throw"){var de=fe.arg;Mt(Q)}return de}}throw Error("illegal catch attempt")},delegateYield:function(C,U,Q){return this.delegate={iterator:tt(C),resultName:U,nextLoc:Q},this.method==="next"&&(this.arg=we),ut}},ae}function Be(we,ae,De,Pe,Se,ee,Qe){try{var wt=we[ee](Qe),Dt=wt.value}catch(at){return void De(at)}wt.done?ae(Dt):Promise.resolve(Dt).then(Pe,Se)}function ce(we){return function(){var ae=this,De=arguments;return new Promise(function(Pe,Se){var ee=we.apply(ae,De);function Qe(Dt){Be(ee,Pe,Se,Qe,wt,"next",Dt)}function wt(Dt){Be(ee,Pe,Se,Qe,wt,"throw",Dt)}Qe(void 0)})}}var me=function(ae,De){if(!ae.environment)throw new Error("Invalid Zakeke environment.");return{price:ae.environment.price,isOutOfStock:ae.environment.isOutOfStock,currency:ae.environment.currency,culture:ae.environment.culture,quantity:ae.environment.quantity,quantityRule:ae.environment.quantityRule,internalProduct:ae.environment.internalProduct,internalScene:ae.environment.internalScene,internalCurrentTemplate:ae.environment.internalCurrentTemplate,draftCompositions:ae.environment.themeCompositions,currentAttributesSelection:ae.environment.currentAttributesSelection,isSceneLoading:ae.isSceneLoading,isAddToCartLoading:ae.isAddToCartLoading,isInfoPointContentVisible:ae.environment.isInfoPointContentVisible,fonts:ae.environment.fonts,groups:ae.environment.groups,templates:ae.environment.templates,loadedComposition:ae.environment.loadedComposition,currentTemplate:ae.environment.currentTemplate,isViewerReady:ae.environment.isViewerReady,translations:ae.environment.translations,items:ae.environment.getDesignItemsInfo(),productName:ae.environment.productName,productCode:ae.environment.productCode,product:ae.environment.product,cameras:ae.environment.cameras,sellerSettings:ae.environment.sellerSettings,eventMessages:ae.environment.eventMessages,personalizedMessages:ae.environment.personalizedMessages,visibleEventMessages:ae.environment.visibleEventMessages,isAssetsLoading:ae.environment.isAssetsLoading,additionalCustomProperties:ae.environment.additionalCustomProperties,currentCompositionInfo:ae.environment.currentCompositionInfo,nftSettings:ae.environment.nftSettings,isAIEnabled:ae.environment.isAIEnabled,useLegacyScreenshot:ae.environment.useLegacyScreenshot,uiConfig:ae.environment.uiConfig,backgroundColor:ae.environment.backgroundColor||"#f2f2f2",removeBackground:ae.environment.removeBackground,deepARsceneGLBUrl:ae.environment.deepARsceneGLBUrl,setMouseWheelZoomEnabled:ae.environment.setMouseWheelZoomEnabled.bind(ae.environment),setCameraPinchingZoom:ae.environment.setCameraPinchingZoom.bind(ae.environment),saveComposition:ae.environment.saveComposition,loadComposition:ae.environment.loadComposition,getPDF:ae.environment.getPDF.bind(ae.environment),fullyLoadFont:ae.environment.fullyLoadFont.bind(ae.environment),sanitizeString:ae.environment.sanitizeString.bind(ae.environment),getSanitationText:ae.environment.getSanitationText.bind(ae.environment),getOnlineScreenshot:ae.environment.getOnlineScreenshot.bind(ae.environment),reset:ae.environment.reset.bind(ae.environment),undo:ae.environment.undo.bind(ae.environment),redo:ae.environment.redo.bind(ae.environment),setCamera:ae.environment.setCamera.bind(ae.environment),setCameraByName:ae.environment.setCameraByName.bind(ae.environment),setCameraZoomEnabled:ae.environment.setCameraZoomEnabled.bind(ae.environment),resetCameraPivot:ae.environment.resetCameraPivot.bind(ae.environment),setCameraPivot:ae.environment.setCameraPivot.bind(ae.environment),setQuantity:ae.environment.setQuantity.bind(ae.environment),getImages:ae.environment.getImages.bind(ae.environment),openSecondScreen:ae.environment.openSecondScreen.bind(ae.environment),getMacroCategories:ae.environment.getMacroCategories.bind(ae.environment),createQuote:ae.environment.createQuote,previewOnly__setItemImageFromBase64:function(){var Pe=ce(Fe().mark(function ee(Qe,wt){return Fe().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.abrupt("return",De({type:"SET_ITEM_IMAGE_FROM_BASE64",guid:Qe,base64:wt}));case 1:case"end":return at.stop()}},ee)}));function Se(ee,Qe){return Pe.apply(this,arguments)}return Se}(),setItemImageFromFile:function(){var Pe=ce(Fe().mark(function ee(Qe,wt){return Fe().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.abrupt("return",De({type:"SET_ITEM_IMAGE_FROM_FILE",guid:Qe,file:wt}));case 1:case"end":return at.stop()}},ee)}));function Se(ee,Qe){return Pe.apply(this,arguments)}return Se}(),addItemImage:function(){var Pe=ce(Fe().mark(function ee(Qe,wt){return Fe().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.abrupt("return",De({type:"ADD_ITEM_IMAGE",imageId:Qe,areaId:wt}));case 1:case"end":return at.stop()}},ee)}));function Se(ee,Qe){return Pe.apply(this,arguments)}return Se}(),createImage:ae.environment.createImage.bind(ae.environment),createImageFromUrl:ae.environment.createImageFromUrl.bind(ae.environment),setItemImage:function(){var Pe=ce(Fe().mark(function ee(Qe,wt){return Fe().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.abrupt("return",De({type:"SET_ITEM_IMAGE",guid:Qe,imageId:wt}));case 1:case"end":return at.stop()}},ee)}));function Se(ee,Qe){return Pe.apply(this,arguments)}return Se}(),setItemFontFamily:function(Se,ee){return De({type:"SET_ITEM_FONT_FAMILY",guid:Se,fontFamily:ee})},setItemColor:function(Se,ee){return De({type:"SET_ITEM_COLOR",guid:Se,color:ee})},setItemBold:function(Se,ee){return De({type:"SET_ITEM_BOLD",guid:Se,bold:ee})},setItemItalic:function(Se,ee){return De({type:"SET_ITEM_ITALIC",guid:Se,italic:ee})},setItemTextOnPath:function(Se,ee,Qe){return De({type:"SET_ITEM_TEXT_PATH",guid:Se,areaId:ee,value:Qe})},setItemText:function(Se,ee){return De({type:"SET_ITEM_TEXT",guid:Se,text:ee})},addItemText:function(){var Pe=ce(Fe().mark(function ee(Qe,wt){return Fe().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.abrupt("return",De({type:"ADD_ITEM_TEXT",settings:Qe,areaId:wt}));case 1:case"end":return at.stop()}},ee)}));function Se(ee,Qe){return Pe.apply(this,arguments)}return Se}(),removeItem:function(){var Pe=ce(Fe().mark(function ee(Qe){return Fe().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.abrupt("return",De({type:"REMOVE_ITEM",guid:Qe}));case 1:case"end":return Dt.stop()}},ee)}));function Se(ee){return Pe.apply(this,arguments)}return Se}(),isFullscreenMode:ae.environment.isFullscreenMode,switchFullscreen:function(){return De({type:"SWITCH_FULLSCREEN"})},zoomIn:function(){return De({type:"ZOOM_IN"})},zoomOut:function(){return De({type:"ZOOM_OUT"})},setHighlightSettings:function(Se){return De({type:"SET_HIGHLIGHT_SETTINGS",settings:Se})},updateView:function(Se){return De({type:"UPDATE_VIEW",adjustCamera:Se})},hasExplodedMode:ae.environment.hasExplodedMode,isExplodedMode:ae.environment.isExplodedMode,setExplodedMode:function(Se){return De({type:"SET_EXPLODED_MODE",exploded:Se})},internalAppendViewer:function(Se){return De({type:"APPEND_VIEWER",container:Se})},getPrintingMethodsRestrictions:ae.environment.getPrintingMethodsRestrictions.bind(ae.environment),designUpdate:function(){return De({type:"DESIGN_UPDATE"})},selectOption:function(Se){return De({type:"SELECT_OPTION",optionId:Se})},isAreaVisible:ae.environment.isAreaVisible.bind(ae.environment),setTemplate:function(){var Pe=ce(Fe().mark(function ee(Qe){return Fe().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.abrupt("return",De({type:"SET_TEMPLATE",templateId:Qe}));case 1:case"end":return Dt.stop()}},ee)}));function Se(ee){return Pe.apply(this,arguments)}return Se}(),saveTemplate:ae.environment.saveTemplate,addToCart:function(){var Pe=ce(Fe().mark(function ee(){var Qe,wt=arguments;return Fe().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return De({type:"IS_ADD_TO_CART_LOADING",isLoading:!0}),at.next=3,(Qe=ae.environment).addToCart.apply(Qe,wt);case 3:case"end":return at.stop()}},ee)}));function Se(){return Pe.apply(this,arguments)}return Se}(),loadSavedComposition:ae.environment.loadSavedComposition,saveDraftsComposition:ae.environment.saveDraftsComposition,deleteSavedComposition:ae.environment.deleteSavedComposition,getMeshIDbyName:ae.environment.getMeshIDbyName.bind(ae.environment),hideMeshAndSaveState:ae.environment.hideMeshAndSaveState.bind(ae.environment),restoreMeshVisibility:ae.environment.restoreMeshVisibility.bind(ae.environment),setMeshDesignVisibility:ae.environment.setMeshDesignVisibility.bind(ae.environment),exportSceneToGlb:ae.environment.exportSceneToGlb,clearListeners:ae.environment.clearListeners,addFocusAttributesListener:ae.environment.addFocusAttributesListener,focusAttribute:ae.environment.focusAttribute,highlightGroup:ae.environment.hightlightGroup.bind(ae.environment),highlightAttribute:ae.environment.highlightAttribute.bind(ae.environment),getQrCodeArUrl:ae.environment.getQrCodeArUrl,getMobileArUrl:ae.environment.getMobileArUrl,openArMobile:ae.environment.openArMobile,isSceneArEnabled:ae.environment.isSceneArEnabled,isArDeviceCompliant:ae.environment.isArDeviceCompliant,IS_ANDROID:se.IS_ANDROID,IS_IOS:se.IS_IOS,setBackgroundColor:ae.environment.setBackgroundColor.bind(ae.environment),getTryOnUrl:ae.environment.getTryOnUrl.bind(ae.environment),isSceneTryOnEnabled:ae.environment.isSceneTryOnEnabled.bind(ae.environment),isVisibleMeshShownForTryOn:ae.environment.isVisibleMeshShownForTryOn,hasVTryOnEnabled:ae.environment.hasVTryOnEnabled,canUseTryOn:ae.environment.canUseTryOn,canUsePD:ae.environment.canUsePD,isTryOnMeshVisible:ae.environment.isTryOnMeshVisible,isMandatoryPD:ae.environment.isMandatoryPD,getTryOnSettings:ae.environment.getTryOnSettings.bind(ae.environment),setPDDistance:ae.environment.setPDDistance.bind(ae.environment),pdDistance:ae.environment.pdDistance,exportTryOnMeshToGlb:ae.environment.exportTryOnMeshToGlb.bind(ae.environment),setCameraLocked:ae.environment.setCameraLocked.bind(ae.environment),getTemplateUploadRestrictictions:ae.environment.getTemplateUploadRestrictictions.bind(ae.environment),getShareCompositionUrl:ae.environment.getShareCompositionUrl.bind(ae.environment),getCopyrightMessageAccepted:ae.environment.getCopyrightMessageAccepted.bind(ae.environment),setCopyrightMessageAccepted:ae.environment.setCopyrightMessageAccepted.bind(ae.environment),validationNFTEmail:ae.environment.validationNFTEmail.bind(ae.environment),validationNFTWalletAddress:ae.environment.validationNFTWalletAddress.bind(ae.environment),configureByAI:ae.environment.configureByAI.bind(ae.environment),templateMacroCategories:ae.environment.templateMacroCategories,applyTemplate:ae.environment.applyTemplate.bind(ae.environment),getDeepARDesktopIframeUrl:ae.environment.getDeepARDesktopIframeUrl.bind(ae.environment)}}},"./src/state/provider.tsx":(je,be,K)=>{K.r(be),K.d(be,{ZakekeProvider:()=>Dt,context:()=>ee,useInternalState:()=>wt});var se=K("react"),B=K.n(se),Fe=K("./src/state/boot.tsx"),Be=K("./src/state/createProviderValue.ts"),ce=K("./src/state/reducer.ts");function me(at,Ne){return Se(at)||Pe(at,Ne)||ae(at,Ne)||we()}function we(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(at,Ne){if(at){if(typeof at=="string")return De(at,Ne);var Je={}.toString.call(at).slice(8,-1);return Je==="Object"&&at.constructor&&(Je=at.constructor.name),Je==="Map"||Je==="Set"?Array.from(at):Je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Je)?De(at,Ne):void 0}}function De(at,Ne){(Ne==null||Ne>at.length)&&(Ne=at.length);for(var Je=0,pt=Array(Ne);Je<Ne;Je++)pt[Je]=at[Je];return pt}function Pe(at,Ne){var Je=at==null?null:typeof Symbol<"u"&&at[Symbol.iterator]||at["@@iterator"];if(Je!=null){var pt,ot,Jt,Qt,ut=[],St=!0,Lt=!1;try{if(Jt=(Je=Je.call(at)).next,Ne!==0)for(;!(St=(pt=Jt.call(Je)).done)&&(ut.push(pt.value),ut.length!==Ne);St=!0);}catch(Ue){Lt=!0,ot=Ue}finally{try{if(!St&&Je.return!=null&&(Qt=Je.return(),Object(Qt)!==Qt))return}finally{if(Lt)throw ot}}return ut}}function Se(at){if(Array.isArray(at))return at}var ee=B().createContext(null),Qe=B().createContext(null),wt=function(){var Ne=(0,se.useContext)(Qe);if(!Ne)throw"Corrupted Zakeke state";return Ne},Dt=function(Ne){var Je=Ne.environment,pt=Ne.parameters,ot=Ne.children,Jt=(0,se.useReducer)(ce.reducer,{environment:Je,sceneViewer:null,isAddToCartLoading:!1,isSceneLoading:!1,parametersReceived:!1,isDebug:!1}),Qt=me(Jt,2),ut=Qt[0],St=Qt[1],Lt=(0,Be.createProviderValue)(ut,St);return B().createElement(ee.Provider,{value:Lt},B().createElement(Qe.Provider,{value:{state:ut,dispatch:St}},B().createElement(Fe.default,{parameters:pt},ot)))}},"./src/state/reducer.ts":(je,be,K)=>{K.r(be),K.d(be,{reducer:()=>Fe});var se=K("./node_modules/lodash/lodash.js"),B=K.n(se);function Fe(Be,ce){var me=B().clone(Be);switch(ce.type){case"BOOT_COMPLETED":case"UPDATE":break;case"DESIGN_UPDATE":me.environment.renderDesign();break;case"PARAMETERS_RECEIVED":me.parametersReceived=!0;break;case"UPDATE_VIEW":me.environment.updateView();break;case"SWITCH_FULLSCREEN":me.environment.switchFullscreen();break;case"SELECT_OPTION":me.environment.selectOption(ce.optionId);break;case"APPEND_VIEWER":me.environment.appendViewer(ce.container);break;case"SET_HIGHLIGHT_SETTINGS":me.environment.setHighlightSettings(ce.settings);case"IS_SCENE_LOADING":me.isSceneLoading=ce.isLoading;break;case"IS_ADD_TO_CART_LOADING":me.isAddToCartLoading=ce.isLoading;break;case"SET_TEMPLATE":me.environment.setTemplate(ce.templateId);break;case"SET_ITEM_IMAGE_FROM_BASE64":me.environment.setItemImageFromBase64(ce.guid,ce.base64);break;case"SET_ITEM_IMAGE_FROM_FILE":me.environment.setItemImageFromFile(ce.guid,ce.file);break;case"ADD_ITEM_IMAGE":me.environment.addItemImage(ce.imageId,ce.areaId);break;case"SET_ITEM_IMAGE":me.environment.setItemImage(ce.guid,ce.imageId);break;case"SET_ITEM_FONT_FAMILY":me.environment.setItemFontFamily(ce.guid,ce.fontFamily);break;case"SET_ITEM_COLOR":me.environment.setItemColor(ce.guid,ce.color);break;case"SET_ITEM_BOLD":me.environment.setItemBold(ce.guid,ce.bold);break;case"SET_ITEM_ITALIC":me.environment.setItemItalic(ce.guid,ce.italic);break;case"SET_ITEM_TEXT_PATH":me.environment.setItemTextOnPath(ce.guid,ce.areaId,ce.value);break;case"SET_ITEM_TEXT":me.environment.setItemText(ce.guid,ce.text);break;case"ADD_ITEM_TEXT":me.environment.addItemText(ce.settings,ce.areaId);break;case"REMOVE_ITEM":me.environment.removeItem(ce.guid);break;case"ZOOM_IN":me.environment.zoomIn();break;case"ZOOM_OUT":me.environment.zoomOut();break;case"SET_EXPLODED_MODE":me.environment.setExplodedMode(ce.exploded);break;case"DEBUG_MODE":console.log("Debug mode ",me.isDebug?"disabled":"enabled"),me.isDebug=!me.isDebug;break;case"VIEWER":console.log(ce),me.sceneViewer=ce.value;break;default:throw new Error("Invalid reducer action ".concat(ce.type,"."))}return me}},"../../libs/pricingRuleBase/DesignPriceCalculatorRuleBased.tsx":(je,be,K)=>{K.r(be),K.d(be,{DesignPriceCalculatorRuleBased:()=>rn,DesignPriceCalculatorRuleFactory:()=>Ot});var se=K("../../../node_modules/axios/index.js"),B=K.n(se),Fe=K("../../../node_modules/lodash/lodash.js"),Be=K.n(Fe),ce=K("../../utils/rectangle.ts");function me($t){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},me($t)}function we($t,sn){var lt=typeof Symbol<"u"&&$t[Symbol.iterator]||$t["@@iterator"];if(!lt){if(Array.isArray($t)||(lt=wt($t))||sn){lt&&($t=lt);var Zt=0,zt=function(){};return{s:zt,n:function(){return Zt>=$t.length?{done:!0}:{done:!1,value:$t[Zt++]}},e:function(We){throw We},f:zt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Le,Mt=!0,Rt=!1;return{s:function(){lt=lt.call($t)},n:function(){var We=lt.next();return Mt=We.done,We},e:function(We){Rt=!0,Le=We},f:function(){try{Mt||lt.return==null||lt.return()}finally{if(Rt)throw Le}}}}function ae($t){return Se($t)||Pe($t)||wt($t)||De()}function De(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pe($t){if(typeof Symbol<"u"&&$t[Symbol.iterator]!=null||$t["@@iterator"]!=null)return Array.from($t)}function Se($t){if(Array.isArray($t))return Dt($t)}function ee($t,sn){return Ne($t)||at($t,sn)||wt($t,sn)||Qe()}function Qe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wt($t,sn){if($t){if(typeof $t=="string")return Dt($t,sn);var lt={}.toString.call($t).slice(8,-1);return lt==="Object"&&$t.constructor&&(lt=$t.constructor.name),lt==="Map"||lt==="Set"?Array.from($t):lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lt)?Dt($t,sn):void 0}}function Dt($t,sn){(sn==null||sn>$t.length)&&(sn=$t.length);for(var lt=0,Zt=Array(sn);lt<sn;lt++)Zt[lt]=$t[lt];return Zt}function at($t,sn){var lt=$t==null?null:typeof Symbol<"u"&&$t[Symbol.iterator]||$t["@@iterator"];if(lt!=null){var Zt,zt,Le,Mt,Rt=[],tt=!0,We=!1;try{if(Le=(lt=lt.call($t)).next,sn!==0)for(;!(tt=(Zt=Le.call(lt)).done)&&(Rt.push(Zt.value),Rt.length!==sn);tt=!0);}catch(C){We=!0,zt=C}finally{try{if(!tt&&lt.return!=null&&(Mt=lt.return(),Object(Mt)!==Mt))return}finally{if(We)throw zt}}return Rt}}function Ne($t){if(Array.isArray($t))return $t}function Je(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Je=function(){return sn};var $t,sn={},lt=Object.prototype,Zt=lt.hasOwnProperty,zt=Object.defineProperty||function(Jn,$n,Tn){Jn[$n]=Tn.value},Le=typeof Symbol=="function"?Symbol:{},Mt=Le.iterator||"@@iterator",Rt=Le.asyncIterator||"@@asyncIterator",tt=Le.toStringTag||"@@toStringTag";function We(Jn,$n,Tn){return Object.defineProperty(Jn,$n,{value:Tn,enumerable:!0,configurable:!0,writable:!0}),Jn[$n]}try{We({},"")}catch{We=function(Tn,Gn,tr){return Tn[Gn]=tr}}function C(Jn,$n,Tn,Gn){var tr=$n&&$n.prototype instanceof Ke?$n:Ke,pr=Object.create(tr.prototype),Br=new or(Gn||[]);return zt(pr,"_invoke",{value:bt(Jn,Tn,Br)}),pr}function U(Jn,$n,Tn){try{return{type:"normal",arg:Jn.call($n,Tn)}}catch(Gn){return{type:"throw",arg:Gn}}}sn.wrap=C;var Q="suspendedStart",fe="suspendedYield",de="executing",Ce="completed",Ye={};function Ke(){}function ct(){}function _t(){}var qe={};We(qe,Mt,function(){return this});var ht=Object.getPrototypeOf,Pt=ht&&ht(ht(lr([])));Pt&&Pt!==lt&&Zt.call(Pt,Mt)&&(qe=Pt);var xt=_t.prototype=Ke.prototype=Object.create(qe);function Ge(Jn){["next","throw","return"].forEach(function($n){We(Jn,$n,function(Tn){return this._invoke($n,Tn)})})}function en(Jn,$n){function Tn(tr,pr,Br,Mr){var pn=U(Jn[tr],Jn,pr);if(pn.type!=="throw"){var Wt=pn.arg,un=Wt.value;return un&&me(un)=="object"&&Zt.call(un,"__await")?$n.resolve(un.__await).then(function(fn){Tn("next",fn,Br,Mr)},function(fn){Tn("throw",fn,Br,Mr)}):$n.resolve(un).then(function(fn){Wt.value=fn,Br(Wt)},function(fn){return Tn("throw",fn,Br,Mr)})}Mr(pn.arg)}var Gn;zt(this,"_invoke",{value:function(pr,Br){function Mr(){return new $n(function(pn,Wt){Tn(pr,Br,pn,Wt)})}return Gn=Gn?Gn.then(Mr,Mr):Mr()}})}function bt(Jn,$n,Tn){var Gn=Q;return function(tr,pr){if(Gn===de)throw Error("Generator is already running");if(Gn===Ce){if(tr==="throw")throw pr;return{value:$t,done:!0}}for(Tn.method=tr,Tn.arg=pr;;){var Br=Tn.delegate;if(Br){var Mr=Vt(Br,Tn);if(Mr){if(Mr===Ye)continue;return Mr}}if(Tn.method==="next")Tn.sent=Tn._sent=Tn.arg;else if(Tn.method==="throw"){if(Gn===Q)throw Gn=Ce,Tn.arg;Tn.dispatchException(Tn.arg)}else Tn.method==="return"&&Tn.abrupt("return",Tn.arg);Gn=de;var pn=U(Jn,$n,Tn);if(pn.type==="normal"){if(Gn=Tn.done?Ce:fe,pn.arg===Ye)continue;return{value:pn.arg,done:Tn.done}}pn.type==="throw"&&(Gn=Ce,Tn.method="throw",Tn.arg=pn.arg)}}}function Vt(Jn,$n){var Tn=$n.method,Gn=Jn.iterator[Tn];if(Gn===$t)return $n.delegate=null,Tn==="throw"&&Jn.iterator.return&&($n.method="return",$n.arg=$t,Vt(Jn,$n),$n.method==="throw")||Tn!=="return"&&($n.method="throw",$n.arg=new TypeError("The iterator does not provide a '"+Tn+"' method")),Ye;var tr=U(Gn,Jn.iterator,$n.arg);if(tr.type==="throw")return $n.method="throw",$n.arg=tr.arg,$n.delegate=null,Ye;var pr=tr.arg;return pr?pr.done?($n[Jn.resultName]=pr.value,$n.next=Jn.nextLoc,$n.method!=="return"&&($n.method="next",$n.arg=$t),$n.delegate=null,Ye):pr:($n.method="throw",$n.arg=new TypeError("iterator result is not an object"),$n.delegate=null,Ye)}function _n(Jn){var $n={tryLoc:Jn[0]};1 in Jn&&($n.catchLoc=Jn[1]),2 in Jn&&($n.finallyLoc=Jn[2],$n.afterLoc=Jn[3]),this.tryEntries.push($n)}function Yn(Jn){var $n=Jn.completion||{};$n.type="normal",delete $n.arg,Jn.completion=$n}function or(Jn){this.tryEntries=[{tryLoc:"root"}],Jn.forEach(_n,this),this.reset(!0)}function lr(Jn){if(Jn||Jn===""){var $n=Jn[Mt];if($n)return $n.call(Jn);if(typeof Jn.next=="function")return Jn;if(!isNaN(Jn.length)){var Tn=-1,Gn=function tr(){for(;++Tn<Jn.length;)if(Zt.call(Jn,Tn))return tr.value=Jn[Tn],tr.done=!1,tr;return tr.value=$t,tr.done=!0,tr};return Gn.next=Gn}}throw new TypeError(me(Jn)+" is not iterable")}return ct.prototype=_t,zt(xt,"constructor",{value:_t,configurable:!0}),zt(_t,"constructor",{value:ct,configurable:!0}),ct.displayName=We(_t,tt,"GeneratorFunction"),sn.isGeneratorFunction=function(Jn){var $n=typeof Jn=="function"&&Jn.constructor;return!!$n&&($n===ct||($n.displayName||$n.name)==="GeneratorFunction")},sn.mark=function(Jn){return Object.setPrototypeOf?Object.setPrototypeOf(Jn,_t):(Jn.__proto__=_t,We(Jn,tt,"GeneratorFunction")),Jn.prototype=Object.create(xt),Jn},sn.awrap=function(Jn){return{__await:Jn}},Ge(en.prototype),We(en.prototype,Rt,function(){return this}),sn.AsyncIterator=en,sn.async=function(Jn,$n,Tn,Gn,tr){tr===void 0&&(tr=Promise);var pr=new en(C(Jn,$n,Tn,Gn),tr);return sn.isGeneratorFunction($n)?pr:pr.next().then(function(Br){return Br.done?Br.value:pr.next()})},Ge(xt),We(xt,tt,"Generator"),We(xt,Mt,function(){return this}),We(xt,"toString",function(){return"[object Generator]"}),sn.keys=function(Jn){var $n=Object(Jn),Tn=[];for(var Gn in $n)Tn.push(Gn);return Tn.reverse(),function tr(){for(;Tn.length;){var pr=Tn.pop();if(pr in $n)return tr.value=pr,tr.done=!1,tr}return tr.done=!0,tr}},sn.values=lr,or.prototype={constructor:or,reset:function($n){if(this.prev=0,this.next=0,this.sent=this._sent=$t,this.done=!1,this.delegate=null,this.method="next",this.arg=$t,this.tryEntries.forEach(Yn),!$n)for(var Tn in this)Tn.charAt(0)==="t"&&Zt.call(this,Tn)&&!isNaN(+Tn.slice(1))&&(this[Tn]=$t)},stop:function(){this.done=!0;var $n=this.tryEntries[0].completion;if($n.type==="throw")throw $n.arg;return this.rval},dispatchException:function($n){if(this.done)throw $n;var Tn=this;function Gn(Wt,un){return Br.type="throw",Br.arg=$n,Tn.next=Wt,un&&(Tn.method="next",Tn.arg=$t),!!un}for(var tr=this.tryEntries.length-1;tr>=0;--tr){var pr=this.tryEntries[tr],Br=pr.completion;if(pr.tryLoc==="root")return Gn("end");if(pr.tryLoc<=this.prev){var Mr=Zt.call(pr,"catchLoc"),pn=Zt.call(pr,"finallyLoc");if(Mr&&pn){if(this.prev<pr.catchLoc)return Gn(pr.catchLoc,!0);if(this.prev<pr.finallyLoc)return Gn(pr.finallyLoc)}else if(Mr){if(this.prev<pr.catchLoc)return Gn(pr.catchLoc,!0)}else{if(!pn)throw Error("try statement without catch or finally");if(this.prev<pr.finallyLoc)return Gn(pr.finallyLoc)}}}},abrupt:function($n,Tn){for(var Gn=this.tryEntries.length-1;Gn>=0;--Gn){var tr=this.tryEntries[Gn];if(tr.tryLoc<=this.prev&&Zt.call(tr,"finallyLoc")&&this.prev<tr.finallyLoc){var pr=tr;break}}pr&&($n==="break"||$n==="continue")&&pr.tryLoc<=Tn&&Tn<=pr.finallyLoc&&(pr=null);var Br=pr?pr.completion:{};return Br.type=$n,Br.arg=Tn,pr?(this.method="next",this.next=pr.finallyLoc,Ye):this.complete(Br)},complete:function($n,Tn){if($n.type==="throw")throw $n.arg;return $n.type==="break"||$n.type==="continue"?this.next=$n.arg:$n.type==="return"?(this.rval=this.arg=$n.arg,this.method="return",this.next="end"):$n.type==="normal"&&Tn&&(this.next=Tn),Ye},finish:function($n){for(var Tn=this.tryEntries.length-1;Tn>=0;--Tn){var Gn=this.tryEntries[Tn];if(Gn.finallyLoc===$n)return this.complete(Gn.completion,Gn.afterLoc),Yn(Gn),Ye}},catch:function($n){for(var Tn=this.tryEntries.length-1;Tn>=0;--Tn){var Gn=this.tryEntries[Tn];if(Gn.tryLoc===$n){var tr=Gn.completion;if(tr.type==="throw"){var pr=tr.arg;Yn(Gn)}return pr}}throw Error("illegal catch attempt")},delegateYield:function($n,Tn,Gn){return this.delegate={iterator:lr($n),resultName:Tn,nextLoc:Gn},this.method==="next"&&(this.arg=$t),Ye}},sn}function pt($t,sn,lt,Zt,zt,Le,Mt){try{var Rt=$t[Le](Mt),tt=Rt.value}catch(We){return void lt(We)}Rt.done?sn(tt):Promise.resolve(tt).then(Zt,zt)}function ot($t){return function(){var sn=this,lt=arguments;return new Promise(function(Zt,zt){var Le=$t.apply(sn,lt);function Mt(tt){pt(Le,Zt,zt,Mt,Rt,"next",tt)}function Rt(tt){pt(Le,Zt,zt,Mt,Rt,"throw",tt)}Mt(void 0)})}}function Jt($t,sn,lt){return Object.defineProperty($t,"prototype",{writable:!1}),$t}function Qt($t,sn){if(!($t instanceof sn))throw new TypeError("Cannot call a class as a function")}function ut($t,sn,lt){return(sn=St(sn))in $t?Object.defineProperty($t,sn,{value:lt,enumerable:!0,configurable:!0,writable:!0}):$t[sn]=lt,$t}function St($t){var sn=Lt($t,"string");return me(sn)=="symbol"?sn:sn+""}function Lt($t,sn){if(me($t)!="object"||!$t)return $t;var lt=$t[Symbol.toPrimitive];if(lt!==void 0){var Zt=lt.call($t,sn);if(me(Zt)!="object")return Zt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(sn==="string"?String:Number)($t)}var Ue=function($t){return $t[$t.Tutti=1]="Tutti",$t[$t.AllElementsNoTemplateItems=18]="AllElementsNoTemplateItems",$t[$t.AllTexts=8]="AllTexts",$t[$t.AllCustomText=9]="AllCustomText",$t[$t.SingleElement=10]="SingleElement",$t[$t.AllImages=11]="AllImages",$t[$t.UploadedImages=12]="UploadedImages",$t[$t.AllTextArt=13]="AllTextArt",$t[$t.AllCustomTextArt=14]="AllCustomTextArt",$t[$t.AllCustomElements=15]="AllCustomElements",$t[$t.ClipartImages=16]="ClipartImages",$t[$t.TemplatesImages=17]="TemplatesImages",$t[$t.OnlyVectorImages=19]="OnlyVectorImages",$t[$t.OnlyRasterImages=20]="OnlyRasterImages",$t}(Ue||{}),Ut=function(sn){var lt,Zt=(lt=[{operator:">",func:function(Le,Mt){return Le>Mt}},{operator:"<",func:function(Le,Mt){return Le<Mt}},{operator:"=",func:function(Le,Mt){return Le==Mt}},{operator:">=",func:function(Le,Mt){return Le>=Mt}},{operator:"<=",func:function(Le,Mt){return Le<=Mt}},{operator:"!=",func:function(Le,Mt){return Le!=Mt}}].find(function(zt){return zt.operator==sn}))===null||lt===void 0?void 0:lt.func;if(Zt==null)throw new Error("Function  for operator ".concat(sn," not found"));return Zt},Ot=Jt(function $t(){Qt(this,$t)});ut(Ot,"create",function(){var $t=ot(Je().mark(function sn(lt,Zt,zt,Le,Mt,Rt){var tt;return Je().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return tt=new rn(Zt,zt,Le,Mt,Rt),C.next=3,tt.init(lt).catch(function(U){return console.log(U)});case 3:return C.abrupt("return",tt);case 4:case"end":return C.stop()}},sn)}));return function(sn,lt,Zt,zt,Le,Mt){return $t.apply(this,arguments)}}());var rn=Jt(function $t(sn,lt,Zt,zt,Le){var Mt=this;Qt(this,$t),ut(this,"colorID",-1),ut(this,"config",{isOwin:!0,apiUrl:"https://test-api.zakeke.com/api/graphql",cloudFlareApiUrl:null,token:"Gw6IL2Q7e66r3osC16_T6XSlsrnuUAHmw59Y3-qJv2LaPPV-nuzDkC0eOGAU8ef_i94HLlu8vDVXpk9MAWBtwrXWN7_XizPAeIfKXArfol19Ek7wmZMR3zRQWwHChqPmYDJMrI3WeCIQGRJxsR7q8hh5xywTqdOwVi6LT7_8-qP9jkc_tdBUPiMUrT6HI1i1ygnEGEk6Eoa97zvbVGRE3NRt-W5nXKGv4_INB_VBdpOihHVXIzl7PtchqPyBr7AaW5Hdrbh_KoFwEhLTcTixXpxfzOcjecbyqFHw20fNFlg2ny6Cb375i7hpnFWD7Q4lj9xI3R6jbkpFHsQEFfBK-UF1f9vli0liCWQ3WdAYGQEmUYx7QjCy240GuR_cK6c28JHoabSGQdW91K7KEAug4o19nokKfzbWoZM7WD4T4RVXNB_ob_gjeYKsK7EJIt6qGiPpnJEbSeFCjz1EhE31Jw6MO-oawNSASxgYk1D6Z3XkLw1G",clientLang:null}),ut(this,"init",function(Rt){return Mt.product=Rt,new Promise(function(tt,We){try{Mt.getPricings(Rt,function(C,U){Mt.pricings=C,Mt.properties=U,tt()})}catch(C){We(C)}})}),ut(this,"getPricings",function(){var Rt=ot(Je().mark(function tt(We,C){var U,Q,fe,de,Ce;return Je().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(!Mt.pricings){Ke.next=4;break}C(Mt.pricings,Mt.properties),Ke.next=30;break;case 4:if(U={name:"pricingsConfigurationQuery",query:`query pricingsQuery($first: Int!, $productID: Long!, $languageCulture: String) {
                                    pricingProperties { propertyID functionName }
                                    pricingsDetailed(first: $first, productID: $productID, isForFrontEnd: true, languageCulture: $languageCulture) {
                                        edges {
                                            node {
                                                id
                                                description
                                                infoPricingText
                                                priceDescriptionEnabled
                                                priceStructure
                                                products {
                                                    productID
                                                }
                                                printTypes {
                                                    printTypeID
                                                }
                                                rules {
                                                    ruleID
                                                    propertyID
                                                    allMatchType
                                                    elementID
                                                    elementTitle
                                                    isSetupPrice
                                                    priceType
                                                    targets {
                                                        area
                                                        color
                                                        side
                                                        targetID
                                                    }
                                                    conditions {
                                                        conditionID
                                                        formula
                                                        position
                                                        priceToAdd
                                                        quantity
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }`,variables:{first:50,productID:We.get("modelID"),languageCulture:Mt.config.clientLang}},Q={headers:{"Content-Type":"application/json",Accept:"application/json"}},Mt.config.isOwin?Q.headers.Authorization="Bearer "+Mt.config.token:Q.headers["X-Auth-Token"]=Mt.config.token,fe={type:"POST",url:Mt.config.apiUrl,data:JSON.stringify(U),contentType:"application/json",dataType:"json"},Mt.config.isOwin?fe.Authorization="Bearer "+Mt.config.token:fe["X-Auth-Token"]=Mt.config.token,Ke.prev=9,!(typeof Mt.config.cloudFlareApiUrl<"u"&&Mt.config.cloudFlareApiUrl!==null&&Mt.config.cloudFlareApiUrl!=="")){Ke.next=16;break}return Ke.next=13,B().post(Mt.config.cloudFlareApiUrl,U,Q);case 13:return de=Ke.sent,C(de.data.data.pricingsDetailed.edges.map(function(ct){return ct.node}),de.data.data.pricingProperties),Ke.abrupt("return");case 16:Ke.next=20;break;case 18:Ke.prev=18,Ke.t0=Ke.catch(9);case 20:return Ke.prev=20,Ke.next=23,B().post(Mt.config.apiUrl,U,Q);case 23:Ce=Ke.sent,C(Ce.data.data.pricingsDetailed.edges.map(function(ct){return ct.node}),Ce.data.data.pricingProperties),Ke.next=30;break;case 27:Ke.prev=27,Ke.t1=Ke.catch(20),console.log(Ke.t1);case 30:case"end":return Ke.stop()}},tt,null,[[9,18],[20,27]])}));return function(tt,We){return Rt.apply(this,arguments)}}()),ut(this,"getPricing",function(Rt){if(Mt.pricings){var tt,We=Mt.pricings.find(function(Ce){return Ce.products.find(function(Ye){return Ye.productID==Mt.product.get("modelID")})});if(We&&Mt.colorID!==-1){var C=Mt.product.get("colors").find(function(Ce){return Ce.get("colorID")===Mt.colorID}).get("sides").map(function(Ce){return Ce.get("sideID")});tt=[[We,C]]}if(!We&&Mt.colorID!==-1){var U=Mt.product.get("colors").find(function(Ce){return Ce.get("colorID")===Mt.colorID}).get("sides").map(function(Ce){return Ce.get("sideID")}),Q=U.map(function(Ce){var Ye=Rt.get("sidesPrintTypes").find(function(Ke){return Ke.get("sideID")===Ce});return[Ce,Ye?Ye.get("printTypeID"):Rt.get("printTypeID")]}),fe=new Map,de=[Q.map(function(Ce){var Ye;return[Ce[0],((Ye=Mt.pricings)===null||Ye===void 0?void 0:Ye.find(function(Ke){return Ke.printTypes.find(function(ct){return ct.printTypeID===Ce[1]})}))||null]})];de[0].forEach(function(Ce){var Ye=ee(Ce,2),Ke=Ye[0],ct=Ye[1];if(!fe.get(ct))fe.set(ct,[Ke]);else{var _t=fe.get(ct);_t.push(Ke),fe.set(ct,_t)}}),tt=Array.from(fe)}return tt}}),ut(this,"distinct",function(Rt,tt,We){return We.indexOf(Rt)===tt}),ut(this,"ElementSizeFunction",function(Rt,tt){var We={result:!1,multiplier:0,items:Rt.items};if(!tt.values||tt.values.length==0)throw"values missing in formula";if(tt.values==null||tt.values.length==0)throw"ElementSize invalid value";return Rt.items.forEach(function(C){var U=JSON.parse(C.get("json"))[1],Q=U.data.transformsData.dimensions.width,fe=U.data.transformsData.dimensions.height,de=C.get("areas").at(0).get("sideID"),Ce=Rt.sides.find(function(_t){return _t.get("sideID")==de});if(Q!=null&&fe!=null&&Ce!=null&&Ce.get("ppcm")>0){var Ye=Q/Ce.get("ppcm"),Ke=fe/Ce.get("ppcm"),ct=Ke*Ye;Ut(tt.operator)(ct,tt.values[0])&&(We.result=!0,We.multiplier+=1,We.items=We.items.filter(function(_t){return _t!=C}))}}),We}),ut(this,"NumberOfElementsSimplifiedFunction",function(Rt,tt){return{result:Rt.items.length>0,multiplier:Rt.items.length,items:Rt.items}}),ut(this,"LinesLengthFunction",function(Rt,tt){var We={result:!1,multiplier:0};if(!tt.values||tt.values.length==0)throw"values missing in formula";return Rt.items.forEach(function(C){var U=JSON.parse(C.get("json"))[1],Q=U.data.isText,fe=U.data.isTextArea,de=U.data.isTextOnPath,Ce=U.data.isTextArt,Ye="";if(Q!=null&&Q?Ye=U.content.toString():(fe!=null&&fe||de!=null&&de)&&(Ye=U.data.text.toString()),Ce!=null&&Ce&&(Ye=C.get("textArt").get("text")),!(0,Fe.isEmpty)(Ye)){var Ke=Ye.split(`
`).length;Ut(tt.operator)(Ke,tt.values[0])&&(We.result=!0,We.multiplier+=1)}}),We}),ut(this,"AmountOfElementsFunction",function(Rt,tt){var We={result:!1,multiplier:0};if(!tt.values||tt.values.length==0)throw"values missing in formula";return Ut(tt.operator)(Rt.items.length,tt.values[0])&&(We.result=!0,We.multiplier=1),We}),ut(this,"AmountOfUsedColorsFunction",function(Rt,tt){var We={result:!1,multiplier:0};if(!tt.values||tt.values.length==0)throw"values missing in formula";var C=(0,Fe.uniq)(Rt.items.filter(function(U){return U.get("itemColors")&&!(0,Fe.isEmpty)(U.get("itemColors"))}).flatMap(function(U){return U.get("itemColors")}));return Ut(tt.operator)(C.filter(Mt.distinct).length,tt.values[0])&&(We.result=!0,We.multiplier=1),We}),ut(this,"CanvasSizeFunction",function(Rt,tt){var We={result:!1,multiplier:0};if(!tt.values||tt.values.length==0)throw"values missing in formula";if(Rt.sides&&!(0,Fe.isEmpty)(Rt.sides)){var C=Rt.sides.flatMap(function(Q){return Q.get("areas").models}),U=[];C.forEach(function(Q){Rt.items.filter(function(fe){return fe.get("areas").filter(function(de){return de.get("colorID")==Q.getColorID()&&de.get("sideID")==Q.getSideID()&&de.get("areaID")==Q.get("areaID")}).length>0}).length>0&&(U=[].concat(ae(U),[Q]))}),U.forEach(function(Q){var fe,de,Ce=Q.get("boundsWidth"),Ye=Q.get("boundsHeight"),Ke=(fe=Rt.design)===null||fe===void 0||(de=fe.get("options"))===null||de===void 0?void 0:de.find(function(Pt){return Pt.get("colorID")==Q.getColorID()&&(Pt.get("sideID")===Q.getSideID()||Pt.get("sideID")===null)});Ke&&Ke.get("width")&&Ke.get("height")&&(Ce=Ke.get("width"),Ye=Ke.get("height"));var ct=Rt.sides.find(function(Pt){return Pt.get("sideID")==Q.getSideID()});if(ct!=null&&ct.get("ppcm")>0){var _t=Ce/ct.get("ppcm"),qe=Ye/ct.get("ppcm");_t=Math.round(_t*100)/100,qe=Math.round(qe*100)/100;var ht=_t*qe;Ut(tt.operator)(ht,tt.values[0])&&(We.result=!0,We.multiplier+=1)}})}return We}),ut(this,"DesignSizeFunction",function(Rt,tt){var We={result:!1,multiplier:0},C=0;if(!tt.values||tt.values.length==0)throw"values missing in formula";if(Rt.sides&&!(0,Fe.isEmpty)(Rt.sides)){var U=Rt.sides.flatMap(function(Q){return Q.get("areas").models});U.forEach(function(Q){var fe=Rt.items.filter(function(Ye){return Ye.get("areas").filter(function(Ke){return Ke.get("colorID")==Q.getColorID()&&Ke.get("sideID")==Q.getSideID()&&Ke.get("areaID")==Q.get("areaID")}).length>0}),de=Rt.sides.find(function(Ye){return Ye.get("sideID")==Q.getSideID()});if(de!=null&&de.get("ppcm")>0){var Ce=fe.map(function(Ye){var Ke=JSON.parse(Ye.get("json"))[1],ct=Ke.data.transformsData.dimensions.width,_t=Ke.data.transformsData.dimensions.height,qe=Ke.data.transformsData.position.x,ht=Ke.data.transformsData.position.y;return new ce.Rectangle(ct,_t,qe-ct/2,ht-_t/2)});C=C+(0,ce.rectanglesDistinctArea)(Ce,de.get("ppcm")),console.log("itemsArea",C)}})}return C>0&&Ut(tt.operator)(C,tt.values[0])&&(We.result=!0,We.multiplier+=1),We}),ut(this,"DesignTextLengthFunction",function(Rt,tt){var We={result:!1,multiplier:0};if(!tt.values||tt.values.length==0)throw"values missing in formula";var C=0;return Rt.items.forEach(function(U){var Q=JSON.parse(U.get("json"))[1],fe=Q.data.isText,de=Q.data.isTextArea,Ce=Q.data.isTextOnPath,Ye=Q.data.isTextArt,Ke="";fe!=null&&fe?Ke=Q.content.toString():de!=null&&de||Ce!=null&&Ce?Ke=Q.data.text.toString():Ye!=null&&Ye&&(Ke=U.get("textArt").get("text")),(0,Fe.isEmpty)(Ke)||(C+=Ke.trim().split(" ").join("").replace(/(\r\n|\n|\r)/gm,"").length)}),Ut(tt.operator)(C,tt.values[0])&&(We.result=!0,We.multiplier=1),We}),ut(this,"CustomizedSidesFunction",function(Rt,tt){var We={result:!1,multiplier:0};if(!tt.values||tt.values.length==0)throw"values missing in formula";var C=0;return Rt.sides.forEach(function(U){Rt.items.filter(function(Q){return Q.get("areas").filter(function(fe){return fe.get("sideID")==U.get("sideID")}).length>0}).length>0&&C++}),Rt.sides.length>0&&Ut(tt.operator)(C,tt.values[0])&&(We.result=!0,We.multiplier=1),We}),ut(this,"TextLengthFunction",function(Rt,tt){var We={result:!1,multiplier:0};if(!tt.values||tt.values.length==0)throw"values missing in formula";return Rt.items.forEach(function(C){var U=JSON.parse(C.get("json"))[1],Q=U.data.isText,fe=U.data.isTextArea,de=U.data.isTextOnPath,Ce=U.data.isTextArt,Ye="";Q!=null&&Q?Ye=U.content.toString():fe!=null&&fe||de!=null&&de?Ye=U.data.text.toString():Ce!=null&&Ce&&(Ye=C.get("textArt").get("text")),!(0,Fe.isEmpty)(Ye)&&Ut(tt.operator)(Ye.trim().split(" ").join("").length,tt.values[0])&&(We.result=!0,We.multiplier+=1)}),We}),ut(this,"conditionsToConditionsGroupByFormula",function(Rt){var tt=Be().groupBy(Rt,function(We){return We!=null&&We.formula?We==null?void 0:We.formula:""});return Object.keys(tt).map(function(We){var C;return{formula:We,position:(C=tt[We][0])===null||C===void 0?void 0:C.position,conditions:tt[We]}})}),ut(this,"getFunctionName",function(Rt,tt){try{return Rt==null?void 0:Rt.filter(function(We){return We.propertyID==tt.propertyID}).map(function(We){return We.functionName})[0]}catch{throw"function or operator don't exist in dictionaries"}}),ut(this,"GetContextForRule",function(Rt,tt,We,C){var U=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,Q={sides:[],items:[],design:We},fe=We.get("designItems").toArray(),de=[],Ce="",Ye=U?tt.get("colors").find(function(qe){return qe.get("colorID")==U}):null,Ke=tt.get("colors").find(function(qe){return qe.get("colorID")==Mt.colorID});if(Ke==null||Ke==null)return Q;Ce=Ye?Ye.get("name"):Ke.get("name");var ct=Ke.get("sides");Q.sides=[],Rt.targets.length==0?(de=fe,Q.sides=ct.toArray()):Rt.targets.forEach(function(qe){var ht=!1,Pt=null,xt=fe;if(!(0,Fe.isEmpty)(qe.color)&&qe.color.toLowerCase()!=Ce.toLowerCase())ht=!0;else{var Ge=we(ct.toArray()),en;try{for(Ge.s();!(en=Ge.n()).done;){var bt=en.value;Q.sides.indexOf(bt)===-1&&Q.sides.push(bt)}}catch(lr){Ge.e(lr)}finally{Ge.f()}}if(!(0,Fe.isEmpty)(qe.side))if(Pt=ct.find(function(lr){return lr.get("name").toLowerCase()==qe.side.toLowerCase()}),Pt==null||!Pt.get("areas"))ht=!0;else{var Vt=[],_n=function(Jn,$n){return Jn.get("areas").filter(function(Tn){return Tn.get("modelID")==tt.get("modelID")&&Tn.get("colorID")==$n.getSide().getColor().get("colorID")&&Tn.get("sideID")==$n.getSide().get("sideID")&&Tn.get("areaID")==$n.get("areaID")}).length>0};Pt.get("areas").forEach(function(lr){Vt=Vt.concat(fe.filter(function(Jn){return _n(Jn,lr)}))}),xt=Vt}if(!(0,Fe.isEmpty)(qe.area)){var Yn=[],or=[];ct.forEach(function(lr){or=or.concat(lr.get("areas").filter(function(Jn){return Jn.get("name").toLowerCase()==qe.area.toLowerCase()}))}),or.forEach(function(lr){Yn=ae(xt.filter(function(Jn){return Jn.get("areas").filter(function($n){return $n.get("modelID")==tt.get("modelID")&&$n.get("colorID")==lr.getSide().getColor().get("colorID")&&$n.get("sideID")==lr.getSide().get("sideID")&&$n.get("areaID")==lr.get("areaID")}).length>0}))}),xt=Yn}ht||(de=[].concat(ae(de),ae(xt)))}),Rt.elementID==Ue.AllTexts?de=de.filter(function(qe){var ht=JSON.parse(qe.get("json"))[1];return ht.data.isText!=null&&ht.data.isText||ht.data.isTextArea!=null&&ht.data.isTextArea||ht.data.isTextOnPath!=null&&ht.data.isTextOnPath||ht.data.isTextArt!=null&&ht.data.isTextArt}):Rt.elementID==Ue.AllElementsNoTemplateItems?de=de.filter(function(qe){var ht=JSON.parse(qe.get("json"))[1];return!ht.data.isTemplateElement}):Rt.elementID==Ue.AllCustomText?de=de.filter(function(qe){var ht=JSON.parse(qe.get("json"))[1];return ht.data.isTemplateElement!=null&&!ht.data.isTemplateElement&&(ht.data.isText!=null&&ht.data.isText||ht.data.isTextArea!=null&&ht.data.isTextArea||ht.data.isTextOnPath!=null&&ht.data.isTextOnPath||ht.data.isTextArt!=null&&ht.data.isTextArt)||ht.data.isTemplateElement==null&&(ht.data.isText!=null&&ht.data.isText||ht.data.isTextArea!=null&&ht.data.isTextArea||ht.data.isTextOnPath!=null&&ht.data.isTextOnPath||ht.data.isTextArt!=null&&ht.data.isTextArt)}):Rt.elementID==Ue.AllImages?de=de.filter(function(qe){return qe.get("imageID")>0}).filter(function(qe){var ht=JSON.parse(qe.get("json"))[1];return!ht.data.isTemplateElement}):Rt.elementID==Ue.UploadedImages?de=de.filter(function(qe){return!!(qe.get("imageID")>0&&(qe.get("imageVisitorCode")||qe.get("imageCustomerCode")||qe.get("imageVisitorID")>0||qe.get("imageCustomerID")>0))}).filter(function(qe){var ht=JSON.parse(qe.get("json"))[1];return!ht.data.isTemplateElement}):Rt.elementID==Ue.ClipartImages?de=de.filter(function(qe){return qe.get("imageID")>0?!(qe.get("imageVisitorCode")||qe.get("imageCustomerCode")||qe.get("imageVisitorID")>0||qe.get("imageCustomerID")>0):!1}).filter(function(qe){var ht=JSON.parse(qe.get("json"))[1];return!ht.data.isTemplateElement}):Rt.elementID==Ue.TemplatesImages?de=de.filter(function(qe){return qe.get("imageID")>0}).filter(function(qe){var ht=JSON.parse(qe.get("json"))[1];return ht.data.isTemplateElement}):Rt.elementID==Ue.SingleElement?de=de.filter(function(qe){return qe.get("name").toLowerCase()==Rt.elementTitle.toLowerCase()}):Rt.elementID==Ue.AllTextArt?de=de.filter(function(qe){var ht=JSON.parse(qe.get("json"))[1];return ht.data.isTextArt!=null&&ht.data.isTextArt}):Rt.elementID==Ue.AllCustomTextArt||(Rt.elementID==Ue.AllCustomElements?de=de.filter(function(qe){var ht=JSON.parse(qe.get("json"))[1];return qe.get("imageID")>0&&!ht.data.isTemplateElement&&(qe.get("imageVisitorCode")||qe.get("imageCustomerCode")||qe.get("imageVisitorID")>0||qe.get("imageCustomerID")>0)||ht.data.isTemplateElement!=null&&!ht.data.isTemplateElement&&(ht.data.isText!=null&&ht.data.isText||ht.data.isTextArea!=null&&ht.data.isTextArea||ht.data.isTextOnPath!=null&&ht.data.isTextOnPath||ht.data.isTextArt!=null&&ht.data.isTextArt)||ht.data.isTemplateElement==null&&(ht.data.isText!=null&&ht.data.isText||ht.data.isTextArea!=null&&ht.data.isTextArea||ht.data.isTextOnPath!=null&&ht.data.isTextOnPath||ht.data.isTextArt!=null&&ht.data.isTextArt)}):Rt.elementID==Ue.UploadedImages?de=de.filter(function(qe){return!!(qe.get("imageID")>0&&(qe.get("imageVisitorCode")||qe.get("imageCustomerCode")||qe.get("imageVisitorID")>0||qe.get("imageCustomerID")>0))}):Rt.elementID===Ue.OnlyVectorImages?de=de.filter(function(qe){return qe.get("imageID")>0&&qe.get("imageType")==="Vector"}):Rt.elementID===Ue.OnlyRasterImages&&(de=de.filter(function(qe){return qe.get("imageID")>0&&qe.get("imageType")==="Raster"||qe.get("imageType")==="Vector+Raster"})));var _t=Be().groupBy(de,function(qe){return qe.get("itemGuid")});return Q.items=Object.keys(_t).map(function(qe){return _t[qe][0]}),Q.items=Q.items.filter(function(qe){if(qe.get("areas").length===0)return!1;var ht=qe.get("areas").at(0).get("sideID");return C.includes(ht)}),Q}),ut(this,"isUsingAmountOfColors",function(Rt){if(Mt.pricings){var tt=Mt.pricings.find(function(C){return C.products.find(function(U){return U.productID==Mt.product.get("modelID")})});if(tt)return tt.rules.find(function(C){return C.propertyID==10})!=null;var We=Mt.pricings.find(function(C){return C.printTypes.find(function(U){return U.printTypeID===Rt})});if(We)return We.rules.find(function(C){return C.propertyID==10})!=null}return!1}),ut(this,"getPremiumPhotosPrice",function(Rt,tt){for(var We=[],C=0,U=function(){var de,Ce=Rt.get("designItems").at(Q);if(Ce.get("imageID")>0&&Ce.get("imagePrice")>0&&Ce.get("providerImageID")!=null&&((de=Ce.get("providerImageID"))===null||de===void 0?void 0:de.length)>0&&!We.find(function(Ke){return Ke.get("providerImageID")===Ce.get("providerImageID")})){We.push(Ce);var Ye=Ce.get("imagePrice");Mt.product.get("hasAdditionalFeeOnImagesProvider")?Ye=Ce.get("imagePrice")*tt:Ye=Ce.get("applyImagePriceForQuantity")===null||Ce.get("applyImagePriceForQuantity")?Ce.get("imagePrice")*tt:Ce.get("imagePrice"),C+=Ye}},Q=0;Q<Rt.get("designItems").length;Q++)U();return Logger.info("Premium photo price: ",C),C}),ut(this,"getImagePrice",function(Rt,tt){for(var We=0,C=0;C<Rt.get("designItems").length;C++){var U=Rt.get("designItems").at(C);if(U.get("imageID")>0&&U.get("imagePrice")>0&&!U.get("providerImageID")){var Q=U.get("imagePrice");Q=U.get("imagePrice")*tt,We+=Q}}return Logger.info("Image price: ",We),We}),ut(this,"getMatchedConditions",function(Rt,tt,We){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,U=Mt.getPricing(Rt);if(!U)return[];var Q=[];return U.forEach(function(fe){if(fe[0]){var de=fe[1];fe[0].rules.forEach(function(Ce){if(!(!We&&Ce.priceType==1)){var Ye=Mt.GetContextForRule(Ce,Mt.product,Rt,de,C);if(Ye.sides.length!==0){var Ke=Mt.conditionsToConditionsGroupByFormula(Ce.conditions),ct={};try{Ke.sort(function(_t,qe){return _t&&qe&&_t.position>qe.position?1:-1}).forEach(function(_t){var qe=JSON.parse(_t.formula);if(!qe.operator)throw"operator missing in formula";var ht=Mt.getFunctionName(Mt.properties,Ce)+"Function",Pt=Mt[ht](Ye,qe);if(Pt.result){var xt=_t.conditions.filter(function(Yn){return Yn.quantity<=tt}).sort(function(Yn,or){return or.quantity-Yn.quantity})[0];if(xt!=null){var Ge=xt.priceToAdd,en=Ce.isSetupPrice,bt=Pt.multiplier,Vt=Ce.priceType;Q.push({priceToAdd:Ge,isSetupPrice:en,multiplier:bt,priceType:Vt});var _n=!Pt.items||Pt.items.length==0;if(!Ce.allMatchType&&Pt.items&&(Ye.items=Pt.items),!Ce.allMatchType&&_n)throw ct}}})}catch(_t){if(_t!==ct)throw _t}}}})}}),Q}),ut(this,"calculate",function(Rt,tt){var We=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,U=[],Q=Mt.getPremiumPhotosPrice(Rt,tt);return Q+=Mt.getImagePrice(Rt,tt),C&&(U=Mt.getMatchedConditions(Rt,tt,!1,We),U.forEach(function(fe){var de=fe.priceToAdd*fe.multiplier;fe.isSetupPrice||(de*=tt),Q+=de})),Logger.info("Total custom price: ",Q),Q}),ut(this,"getPricingAdditionalInfo",function(Rt){var tt;if(Mt.pricings&&(tt=Mt.pricings.find(function(We){return We.products.find(function(C){return C.productID==Mt.product.get("modelID")})}),tt||(tt=Mt.pricings.find(function(We){return We.printTypes.find(function(C){return C.printTypeID===Rt})}))),!!tt)return{description:tt.description,priceDescriptionEnabled:tt.priceDescriptionEnabled,infoPricingText:tt.infoPricingText,priceStructure:tt.priceStructure}}),sn!==void 0&&(this.config.apiUrl=sn+"graphql"),lt!==void 0&&(this.config.token=lt),Zt!==void 0&&(this.config.isOwin=Zt),zt&&(this.config.cloudFlareApiUrl=zt+"graphql"),Le&&(this.config.clientLang=Le)})},"../../utils/rectangle.ts":(je,be,K)=>{K.r(be),K.d(be,{Rectangle:()=>Qe,rectangleArea:()=>Dt,rectanglesDistinctArea:()=>Qt});function se(ut){"@babel/helpers - typeof";return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(St){return typeof St}:function(St){return St&&typeof Symbol=="function"&&St.constructor===Symbol&&St!==Symbol.prototype?"symbol":typeof St},se(ut)}function B(ut){return me(ut)||ce(ut)||Be(ut)||Fe()}function Fe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Be(ut,St){if(ut){if(typeof ut=="string")return we(ut,St);var Lt={}.toString.call(ut).slice(8,-1);return Lt==="Object"&&ut.constructor&&(Lt=ut.constructor.name),Lt==="Map"||Lt==="Set"?Array.from(ut):Lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Lt)?we(ut,St):void 0}}function ce(ut){if(typeof Symbol<"u"&&ut[Symbol.iterator]!=null||ut["@@iterator"]!=null)return Array.from(ut)}function me(ut){if(Array.isArray(ut))return we(ut)}function we(ut,St){(St==null||St>ut.length)&&(St=ut.length);for(var Lt=0,Ue=Array(St);Lt<St;Lt++)Ue[Lt]=ut[Lt];return Ue}function ae(ut,St,Lt){return Object.defineProperty(ut,"prototype",{writable:!1}),ut}function De(ut,St){if(!(ut instanceof St))throw new TypeError("Cannot call a class as a function")}function Pe(ut,St,Lt){return(St=Se(St))in ut?Object.defineProperty(ut,St,{value:Lt,enumerable:!0,configurable:!0,writable:!0}):ut[St]=Lt,ut}function Se(ut){var St=ee(ut,"string");return se(St)=="symbol"?St:St+""}function ee(ut,St){if(se(ut)!="object"||!ut)return ut;var Lt=ut[Symbol.toPrimitive];if(Lt!==void 0){var Ue=Lt.call(ut,St);if(se(Ue)!="object")return Ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(St==="string"?String:Number)(ut)}var Qe=ae(function ut(St,Lt,Ue,Ut){var Ot=this;De(this,ut),Pe(this,"maxX",function(){return Ot.x+Ot.width}),Pe(this,"maxY",function(){return Ot.y+Ot.height}),Pe(this,"area",function(){return Ot.width*Ot.height}),Pe(this,"areaPPCM",function(rn){return Ot.width/rn*(Ot.height/rn)}),Pe(this,"equals",function(rn){return Ot.width.toFixed(4)==rn.width.toFixed(4)&&Ot.height.toFixed(4)==rn.height.toFixed(4)&&Ot.x==rn.x&&Ot.y==rn.y}),this.width=St,this.height=Lt,this.x=Ue,this.y=Ut}),wt=function(St,Lt,Ue){return Ue.indexOf(St)===Lt},Dt=function(St){return St.width*St.height},at=function(St,Lt){if(Lt<=St.x||Lt>=St.x+St.width)return[St];var Ue=new Qe(Lt-St.x,St.height,St.x,St.y),Ut=new Qe(St.maxX()-Lt,St.height,Lt,St.y);return[Ue,Ut]},Ne=function(St,Lt){if(Lt<=St.y||Lt>=St.y+St.height)return[St];var Ue=new Qe(St.width,Lt-St.y,St.x,St.y),Ut=new Qe(St.width,St.maxY()-Lt,St.x,Lt);return[Ue,Ut]},Je=function(St,Lt){return St.x<Lt&&St.maxX()>Lt},pt=function(St,Lt){return St.y<Lt&&St.maxY()>Lt},ot=function(St,Lt){return St.x>=Lt||St.maxX()<=Lt},Jt=function(St,Lt){return St.y>=Lt||St.maxY()<=Lt},Qt=function(St,Lt){var Ue=St.reduce(function($t,sn){return[].concat(B($t),[sn.x,sn.maxX()])},[]).filter(wt).sort(function($t,sn){return $t-sn}),Ut=B(St);Ue.forEach(function($t){var sn=Ut.filter(function(zt){return Je(zt,$t)}),lt=Ut.filter(function(zt){return ot(zt,$t)}),Zt=sn.map(function(zt){return at(zt,$t)}).reduce(function(zt,Le){return zt.concat(Le)},[]);Ut=[].concat(B(lt),B(Zt))});var Ot=Ut.reduce(function($t,sn){return[].concat(B($t),[sn.y,sn.maxY()])},[]).filter(wt).sort(function($t,sn){return $t-sn}),rn=B(Ut);return Ot.forEach(function($t){var sn=rn.filter(function(zt){return pt(zt,$t)}),lt=rn.filter(function(zt){return Jt(zt,$t)}),Zt=sn.map(function(zt){return Ne(zt,$t)}).reduce(function(zt,Le){return zt.concat(Le)},[]);rn=[].concat(B(lt),B(Zt))}),rn.filter(function($t,sn,lt){return lt.findIndex(function(Zt){return Zt.equals($t)})==sn}).reduce(function($t,sn){return Lt?$t+sn.areaPPCM(Lt):$t+sn.area()},0)}},"../../../node_modules/is-buffer/index.js":je=>{/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */je.exports=function(K){return K!=null&&K.constructor!=null&&typeof K.constructor.isBuffer=="function"&&K.constructor.isBuffer(K)}},"../../../node_modules/lodash/lodash.js":function(je,be,K){je=K.nmd(je);var se;(function(){var B,Fe="4.17.21",Be=200,ce="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",me="Expected a function",we="Invalid `variable` option passed into `_.template`",ae="__lodash_hash_undefined__",De=500,Pe="__lodash_placeholder__",Se=1,ee=2,Qe=4,wt=1,Dt=2,at=1,Ne=2,Je=4,pt=8,ot=16,Jt=32,Qt=64,ut=128,St=256,Lt=512,Ue=30,Ut="...",Ot=800,rn=16,$t=1,sn=2,lt=3,Zt=1/0,zt=9007199254740991,Le=17976931348623157e292,Mt=NaN,Rt=4294967295,tt=Rt-1,We=Rt>>>1,C=[["ary",ut],["bind",at],["bindKey",Ne],["curry",pt],["curryRight",ot],["flip",Lt],["partial",Jt],["partialRight",Qt],["rearg",St]],U="[object Arguments]",Q="[object Array]",fe="[object AsyncFunction]",de="[object Boolean]",Ce="[object Date]",Ye="[object DOMException]",Ke="[object Error]",ct="[object Function]",_t="[object GeneratorFunction]",qe="[object Map]",ht="[object Number]",Pt="[object Null]",xt="[object Object]",Ge="[object Promise]",en="[object Proxy]",bt="[object RegExp]",Vt="[object Set]",_n="[object String]",Yn="[object Symbol]",or="[object Undefined]",lr="[object WeakMap]",Jn="[object WeakSet]",$n="[object ArrayBuffer]",Tn="[object DataView]",Gn="[object Float32Array]",tr="[object Float64Array]",pr="[object Int8Array]",Br="[object Int16Array]",Mr="[object Int32Array]",pn="[object Uint8Array]",Wt="[object Uint8ClampedArray]",un="[object Uint16Array]",fn="[object Uint32Array]",Bn=/\b__p \+= '';/g,Hn=/\b(__p \+=) '' \+/g,yr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zr=/&(?:amp|lt|gt|quot|#39);/g,Zr=/[&<>"']/g,Ni=RegExp(zr.source),as=RegExp(Zr.source),Ss=/<%-([\s\S]+?)%>/g,Os=/<%([\s\S]+?)%>/g,go=/<%=([\s\S]+?)%>/g,$u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gc=/^\w*$/,Xl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Co=/[\\^$.*+?()[\]{}|]/g,Mu=RegExp(Co.source),Ha=/^\s+/,vh=/\s/,mc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Vc=/\{\n\/\* \[wrapped with (.+)\] \*/,Pu=/,? & /,Ou=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Jo=/[()=,{}\[\]\/\s]/,Ku=/\\(\\)?/g,ca=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ql=/\w*$/,Jl=/^[-+]0x[0-9a-f]+$/i,qu=/^0b[01]+$/i,Xu=/^\[object .+?Constructor\]$/,_h=/^0o[0-7]+$/i,Sl=/^(?:0|[1-9]\d*)$/,wi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ja=/($^)/,fu=/['\n\r\u2028\u2029\\]/g,lo="\\ud800-\\udfff",cp="\\u0300-\\u036f",Td="\\ufe20-\\ufe2f",hp="\\u20d0-\\u20ff",Hc=cp+Td+hp,vc="\\u2700-\\u27bf",_c="a-z\\xdf-\\xf6\\xf8-\\xff",yh="\\xac\\xb1\\xd7\\xf7",ku="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Vo="\\u2000-\\u206f",af=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wc="A-Z\\xc0-\\xd6\\xd8-\\xde",Gc="\\ufe0e\\ufe0f",Iu=yh+ku+Vo+af,wh="['’]",Vf="["+lo+"]",Vs="["+Iu+"]",Lu="["+Hc+"]",xh="\\d+",of="["+vc+"]",yc="["+_c+"]",Cs="[^"+lo+Iu+xh+vc+_c+Wc+"]",Yc="\\ud83c[\\udffb-\\udfff]",lf="(?:"+Lu+"|"+Yc+")",wc="[^"+lo+"]",hl="(?:\\ud83c[\\udde6-\\uddff]){2}",Fl="[\\ud800-\\udbff][\\udc00-\\udfff]",mo="["+Wc+"]",xc="\\u200d",w="(?:"+yc+"|"+Cs+")",ne="(?:"+mo+"|"+Cs+")",it="(?:"+wh+"(?:d|ll|m|re|s|t|ve))?",kt="(?:"+wh+"(?:D|LL|M|RE|S|T|VE))?",mn=lf+"?",er="["+Gc+"]?",gr="(?:"+xc+"(?:"+[wc,hl,Fl].join("|")+")"+er+mn+")*",ni="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",li="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",os=er+mn+gr,Xi="(?:"+[of,hl,Fl].join("|")+")"+os,Ar="(?:"+[wc+Lu+"?",Lu,hl,Fl,Vf].join("|")+")",ss=RegExp(wh,"g"),Bu=RegExp(Lu,"g"),eu=RegExp(Yc+"(?="+Yc+")|"+Ar+os,"g"),uf=RegExp([mo+"?"+yc+"+"+it+"(?="+[Vs,mo,"$"].join("|")+")",ne+"+"+kt+"(?="+[Vs,mo+w,"$"].join("|")+")",mo+"?"+w+"+"+it,mo+"+"+kt,li,ni,xh,Xi].join("|"),"g"),du=RegExp("["+xc+lo+Hc+Gc+"]"),pu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Md=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rg=-1,Gi={};Gi[Gn]=Gi[tr]=Gi[pr]=Gi[Br]=Gi[Mr]=Gi[pn]=Gi[Wt]=Gi[un]=Gi[fn]=!0,Gi[U]=Gi[Q]=Gi[$n]=Gi[de]=Gi[Tn]=Gi[Ce]=Gi[Ke]=Gi[ct]=Gi[qe]=Gi[ht]=Gi[xt]=Gi[bt]=Gi[Vt]=Gi[_n]=Gi[lr]=!1;var Yi={};Yi[U]=Yi[Q]=Yi[$n]=Yi[Tn]=Yi[de]=Yi[Ce]=Yi[Gn]=Yi[tr]=Yi[pr]=Yi[Br]=Yi[Mr]=Yi[qe]=Yi[ht]=Yi[xt]=Yi[bt]=Yi[Vt]=Yi[_n]=Yi[Yn]=Yi[pn]=Yi[Wt]=Yi[un]=Yi[fn]=!0,Yi[Ke]=Yi[ct]=Yi[lr]=!1;var Hf={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Pd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Od={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fp=parseFloat,tu=parseInt,bc=typeof K.g=="object"&&K.g&&K.g.Object===Object&&K.g,kd=typeof self=="object"&&self&&self.Object===Object&&self,Ls=bc||kd||Function("return this")(),dp=be&&!be.nodeType&&be,Ru=dp&&!0&&je&&!je.nodeType&&je,Gf=Ru&&Ru.exports===dp,Qu=Gf&&bc.process,La=function(){try{var Xt=Ru&&Ru.require&&Ru.require("util").types;return Xt||Qu&&Qu.binding&&Qu.binding("util")}catch{}}(),Id=La&&La.isArrayBuffer,pp=La&&La.isDate,gu=La&&La.isMap,gp=La&&La.isRegExp,Yf=La&&La.isSet,mp=La&&La.isTypedArray;function Ba(Xt,Dn,vn){switch(vn.length){case 0:return Xt.call(Dn);case 1:return Xt.call(Dn,vn[0]);case 2:return Xt.call(Dn,vn[0],vn[1]);case 3:return Xt.call(Dn,vn[0],vn[1],vn[2])}return Xt.apply(Dn,vn)}function Yg(Xt,Dn,vn,Er){for(var Tr=-1,bi=Xt==null?0:Xt.length;++Tr<bi;){var xs=Xt[Tr];Dn(Er,xs,vn(xs),Xt)}return Er}function Wa(Xt,Dn){for(var vn=-1,Er=Xt==null?0:Xt.length;++vn<Er&&Dn(Xt[vn],vn,Xt)!==!1;);return Xt}function vp(Xt,Dn){for(var vn=Xt==null?0:Xt.length;vn--&&Dn(Xt[vn],vn,Xt)!==!1;);return Xt}function Ld(Xt,Dn){for(var vn=-1,Er=Xt==null?0:Xt.length;++vn<Er;)if(!Dn(Xt[vn],vn,Xt))return!1;return!0}function Cl(Xt,Dn){for(var vn=-1,Er=Xt==null?0:Xt.length,Tr=0,bi=[];++vn<Er;){var xs=Xt[vn];Dn(xs,vn,Xt)&&(bi[Tr++]=xs)}return bi}function Zc(Xt,Dn){var vn=Xt==null?0:Xt.length;return!!vn&&Dl(Xt,Dn,0)>-1}function Sc(Xt,Dn,vn){for(var Er=-1,Tr=Xt==null?0:Xt.length;++Er<Tr;)if(vn(Dn,Xt[Er]))return!0;return!1}function ts(Xt,Dn){for(var vn=-1,Er=Xt==null?0:Xt.length,Tr=Array(Er);++vn<Er;)Tr[vn]=Dn(Xt[vn],vn,Xt);return Tr}function el(Xt,Dn){for(var vn=-1,Er=Dn.length,Tr=Xt.length;++vn<Er;)Xt[Tr+vn]=Dn[vn];return Xt}function Zf(Xt,Dn,vn,Er){var Tr=-1,bi=Xt==null?0:Xt.length;for(Er&&bi&&(vn=Xt[++Tr]);++Tr<bi;)vn=Dn(vn,Xt[Tr],Tr,Xt);return vn}function _p(Xt,Dn,vn,Er){var Tr=Xt==null?0:Xt.length;for(Er&&Tr&&(vn=Xt[--Tr]);Tr--;)vn=Dn(vn,Xt[Tr],Tr,Xt);return vn}function $f(Xt,Dn){for(var vn=-1,Er=Xt==null?0:Xt.length;++vn<Er;)if(Dn(Xt[vn],vn,Xt))return!0;return!1}var ig=Dc("length");function Bd(Xt){return Xt.split("")}function Cc(Xt){return Xt.match(Ou)||[]}function Kf(Xt,Dn,vn){var Er;return vn(Xt,function(Tr,bi,xs){if(Dn(Tr,bi,xs))return Er=bi,!1}),Er}function $c(Xt,Dn,vn,Er){for(var Tr=Xt.length,bi=vn+(Er?1:-1);Er?bi--:++bi<Tr;)if(Dn(Xt[bi],bi,Xt))return bi;return-1}function Dl(Xt,Dn,vn){return Dn===Dn?Kg(Xt,Dn,vn):$c(Xt,yp,vn)}function Zg(Xt,Dn,vn,Er){for(var Tr=vn-1,bi=Xt.length;++Tr<bi;)if(Er(Xt[Tr],Dn))return Tr;return-1}function yp(Xt){return Xt!==Xt}function qf(Xt,Dn){var vn=Xt==null?0:Xt.length;return vn?hf(Xt,Dn)/vn:Mt}function Dc(Xt){return function(Dn){return Dn==null?B:Dn[Xt]}}function cf(Xt){return function(Dn){return Xt==null?B:Xt[Dn]}}function Rd(Xt,Dn,vn,Er,Tr){return Tr(Xt,function(bi,xs,ki){vn=Er?(Er=!1,bi):Dn(vn,bi,xs,ki)}),vn}function sg(Xt,Dn){var vn=Xt.length;for(Xt.sort(Dn);vn--;)Xt[vn]=Xt[vn].value;return Xt}function hf(Xt,Dn){for(var vn,Er=-1,Tr=Xt.length;++Er<Tr;){var bi=Dn(Xt[Er]);bi!==B&&(vn=vn===B?bi:vn+bi)}return vn}function bh(Xt,Dn){for(var vn=-1,Er=Array(Xt);++vn<Xt;)Er[vn]=Dn(vn);return Er}function ag(Xt,Dn){return ts(Dn,function(vn){return[vn,Xt[vn]]})}function Kc(Xt){return Xt&&Xt.slice(0,qc(Xt)+1).replace(Ha,"")}function Aa(Xt){return function(Dn){return Xt(Dn)}}function ff(Xt,Dn){return ts(Dn,function(vn){return Xt[vn]})}function Ac(Xt,Dn){return Xt.has(Dn)}function Xf(Xt,Dn){for(var vn=-1,Er=Xt.length;++vn<Er&&Dl(Dn,Xt[vn],0)>-1;);return vn}function df(Xt,Dn){for(var vn=Xt.length;vn--&&Dl(Dn,Xt[vn],0)>-1;);return vn}function pf(Xt,Dn){for(var vn=Xt.length,Er=0;vn--;)Xt[vn]===Dn&&++Er;return Er}var gf=cf(Hf),mf=cf(Pd);function Qf(Xt){return"\\"+Od[Xt]}function wp(Xt,Dn){return Xt==null?B:Xt[Dn]}function nu(Xt){return du.test(Xt)}function xp(Xt){return pu.test(Xt)}function Jf(Xt){for(var Dn,vn=[];!(Dn=Xt.next()).done;)vn.push(Dn.value);return vn}function ru(Xt){var Dn=-1,vn=Array(Xt.size);return Xt.forEach(function(Er,Tr){vn[++Dn]=[Tr,Er]}),vn}function Sh(Xt,Dn){return function(vn){return Xt(Dn(vn))}}function Ro(Xt,Dn){for(var vn=-1,Er=Xt.length,Tr=0,bi=[];++vn<Er;){var xs=Xt[vn];(xs===Dn||xs===Pe)&&(Xt[vn]=Pe,bi[Tr++]=vn)}return bi}function Ec(Xt){var Dn=-1,vn=Array(Xt.size);return Xt.forEach(function(Er){vn[++Dn]=Er}),vn}function $g(Xt){var Dn=-1,vn=Array(Xt.size);return Xt.forEach(function(Er){vn[++Dn]=[Er,Er]}),vn}function Kg(Xt,Dn,vn){for(var Er=vn-1,Tr=Xt.length;++Er<Tr;)if(Xt[Er]===Dn)return Er;return-1}function qg(Xt,Dn,vn){for(var Er=vn+1;Er--;)if(Xt[Er]===Dn)return Er;return Er}function iu(Xt){return nu(Xt)?bp(Xt):ig(Xt)}function sa(Xt){return nu(Xt)?vf(Xt):Bd(Xt)}function qc(Xt){for(var Dn=Xt.length;Dn--&&vh.test(Xt.charAt(Dn)););return Dn}var vo=cf(Wf);function bp(Xt){for(var Dn=eu.lastIndex=0;eu.test(Xt);)++Dn;return Dn}function vf(Xt){return Xt.match(eu)||[]}function _f(Xt){return Xt.match(uf)||[]}var Nd=function Xt(Dn){Dn=Dn==null?Ls:Ii.defaults(Ls.Object(),Dn,Ii.pick(Ls,Md));var vn=Dn.Array,Er=Dn.Date,Tr=Dn.Error,bi=Dn.Function,xs=Dn.Math,ki=Dn.Object,Ch=Dn.RegExp,og=Dn.String,Sa=Dn.TypeError,su=vn.prototype,lg=bi.prototype,mu=ki.prototype,Ju=Dn["__core-js_shared__"],au=lg.toString,ji=mu.hasOwnProperty,Xc=0,Dh=function(){var r=/[^.]+$/.exec(Ju&&Ju.keys&&Ju.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),vu=mu.toString,Xg=au.call(ki),Qg=Ls._,Ah=Ch("^"+au.call(ji).replace(Co,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_u=Gf?Dn.Buffer:B,fl=Dn.Symbol,Qc=Dn.Uint8Array,va=_u?_u.allocUnsafe:B,Nu=Sh(ki.getPrototypeOf,ki),yf=ki.create,Eh=mu.propertyIsEnumerable,ec=su.splice,wf=fl?fl.isConcatSpreadable:B,ou=fl?fl.iterator:B,dl=fl?fl.toStringTag:B,zl=function(){try{var r=an(ki,"defineProperty");return r({},"",{}),r}catch{}}(),xf=Dn.clearTimeout!==Ls.clearTimeout&&Dn.clearTimeout,Jg=Er&&Er.now!==Ls.Date.now&&Er.now,em=Dn.setTimeout!==Ls.setTimeout&&Dn.setTimeout,tc=xs.ceil,yu=xs.floor,Jc=ki.getOwnPropertySymbols,Sp=_u?_u.isBuffer:B,Th=Dn.isFinite,_a=su.join,ya=Sh(ki.keys,ki),ks=xs.max,Qs=xs.min,ug=Er.now,Fd=Dn.parseInt,bf=xs.random,Tc=su.reverse,Mh=an(Dn,"DataView"),Ul=an(Dn,"Map"),jl=an(Dn,"Promise"),Ho=an(Dn,"Set"),Wo=an(Dn,"WeakMap"),Go=an(ki,"create"),eh=Wo&&new Wo,Fu={},th=ui(Mh),ed=ui(Ul),wu=ui(jl),zd=ui(Ho),Cp=ui(Wo),xu=fl?fl.prototype:B,pl=xu?xu.valueOf:B,Ea=xu?xu.toString:B;function ye(r){if(Ei(r)&&!ri(r)&&!(r instanceof hi)){if(r instanceof Bs)return r;if(ji.call(r,"__wrapped__"))return ar(r)}return new Bs(r)}var Yo=function(){function r(){}return function(a){if(!qr(a))return{};if(yf)return yf(a);r.prototype=a;var g=new r;return r.prototype=B,g}}();function wa(){}function Bs(r,a){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=B}ye.templateSettings={escape:Ss,evaluate:Os,interpolate:go,variable:"",imports:{_:ye}},ye.prototype=wa.prototype,ye.prototype.constructor=ye,Bs.prototype=Yo(wa.prototype),Bs.prototype.constructor=Bs;function hi(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Rt,this.__views__=[]}function Ph(){var r=new hi(this.__wrapped__);return r.__actions__=Js(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Js(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Js(this.__views__),r}function Al(){if(this.__filtered__){var r=new hi(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Oh(){var r=this.__wrapped__.value(),a=this.__dir__,g=ri(r),O=a<0,ue=g?r.length:0,Me=On(0,ue,this.__views__),dt=Me.start,Bt=Me.end,nn=Bt-dt,kn=O?Bt:dt-1,Ln=this.__iteratees__,zn=Ln.length,_r=0,Fr=Qs(nn,this.__takeCount__);if(!g||!O&&ue==nn&&Fr==nn)return cd(r,this.__actions__);var Xr=[];e:for(;nn--&&_r<Fr;){kn+=a;for(var ci=-1,Qr=r[kn];++ci<zn;){var yi=Ln[ci],Ci=yi.iteratee,to=yi.type,ka=Ci(Qr);if(to==sn)Qr=ka;else if(!ka){if(to==$t)continue e;break e}}Xr[_r++]=Qr}return Xr}hi.prototype=Yo(wa.prototype),hi.prototype.constructor=hi;function El(r){var a=-1,g=r==null?0:r.length;for(this.clear();++a<g;){var O=r[a];this.set(O[0],O[1])}}function cg(){this.__data__=Go?Go(null):{},this.size=0}function Sf(r){var a=this.has(r)&&delete this.__data__[r];return this.size-=a?1:0,a}function Dp(r){var a=this.__data__;if(Go){var g=a[r];return g===ae?B:g}return ji.call(a,r)?a[r]:B}function Mc(r){var a=this.__data__;return Go?a[r]!==B:ji.call(a,r)}function Ud(r,a){var g=this.__data__;return this.size+=this.has(r)?0:1,g[r]=Go&&a===B?ae:a,this}El.prototype.clear=cg,El.prototype.delete=Sf,El.prototype.get=Dp,El.prototype.has=Mc,El.prototype.set=Ud;function No(r){var a=-1,g=r==null?0:r.length;for(this.clear();++a<g;){var O=r[a];this.set(O[0],O[1])}}function hg(){this.__data__=[],this.size=0}function Ap(r){var a=this.__data__,g=Su(a,r);if(g<0)return!1;var O=a.length-1;return g==O?a.pop():ec.call(a,g,1),--this.size,!0}function nh(r){var a=this.__data__,g=Su(a,r);return g<0?B:a[g][1]}function Cf(r){return Su(this.__data__,r)>-1}function nc(r,a){var g=this.__data__,O=Su(g,r);return O<0?(++this.size,g.push([r,a])):g[O][1]=a,this}No.prototype.clear=hg,No.prototype.delete=Ap,No.prototype.get=nh,No.prototype.has=Cf,No.prototype.set=nc;function Do(r){var a=-1,g=r==null?0:r.length;for(this.clear();++a<g;){var O=r[a];this.set(O[0],O[1])}}function td(){this.size=0,this.__data__={hash:new El,map:new(Ul||No),string:new El}}function tl(r){var a=Kt(this,r).delete(r);return this.size-=a?1:0,a}function bu(r){return Kt(this,r).get(r)}function rh(r){return Kt(this,r).has(r)}function rc(r,a){var g=Kt(this,r),O=g.size;return g.set(r,a),this.size+=g.size==O?0:1,this}Do.prototype.clear=td,Do.prototype.delete=tl,Do.prototype.get=bu,Do.prototype.has=rh,Do.prototype.set=rc;function uo(r){var a=-1,g=r==null?0:r.length;for(this.__data__=new Do;++a<g;)this.add(r[a])}function ic(r){return this.__data__.set(r,ae),this}function jd(r){return this.__data__.has(r)}uo.prototype.add=uo.prototype.push=ic,uo.prototype.has=jd;function Ga(r){var a=this.__data__=new No(r);this.size=a.size}function Vd(){this.__data__=new No,this.size=0}function Tl(r){var a=this.__data__,g=a.delete(r);return this.size=a.size,g}function Vl(r){return this.__data__.get(r)}function Ys(r){return this.__data__.has(r)}function zu(r,a){var g=this.__data__;if(g instanceof No){var O=g.__data__;if(!Ul||O.length<Be-1)return O.push([r,a]),this.size=++g.size,this;g=this.__data__=new Do(O)}return g.set(r,a),this.size=g.size,this}Ga.prototype.clear=Vd,Ga.prototype.delete=Tl,Ga.prototype.get=Vl,Ga.prototype.has=Ys,Ga.prototype.set=zu;function nd(r,a){var g=ri(r),O=!g&&ps(r),ue=!g&&!O&&ii(r),Me=!g&&!O&&!ue&&la(r),dt=g||O||ue||Me,Bt=dt?bh(r.length,og):[],nn=Bt.length;for(var kn in r)(a||ji.call(r,kn))&&!(dt&&(kn=="length"||ue&&(kn=="offset"||kn=="parent")||Me&&(kn=="buffer"||kn=="byteLength"||kn=="byteOffset")||si(kn,nn)))&&Bt.push(kn);return Bt}function Hd(r){var a=r.length;return a?r[Ko(0,a-1)]:B}function rd(r,a){return Ds(Js(r),Ml(a,0,r.length))}function id(r){return Ds(Js(r))}function Df(r,a,g){(g!==B&&!Li(r[a],g)||g===B&&!(a in r))&&co(r,a,g)}function Hl(r,a,g){var O=r[a];(!(ji.call(r,a)&&Li(O,g))||g===B&&!(a in r))&&co(r,a,g)}function Su(r,a){for(var g=r.length;g--;)if(Li(r[g][0],a))return g;return-1}function kh(r,a,g,O){return _o(r,function(ue,Me,dt){a(O,ue,g(ue),dt)}),O}function Ih(r,a){return r&&ho(a,Ks(a),r)}function fg(r,a){return r&&ho(a,Ua(a),r)}function co(r,a,g){a=="__proto__"&&zl?zl(r,a,{configurable:!0,enumerable:!0,value:g,writable:!0}):r[a]=g}function Pc(r,a){for(var g=-1,O=a.length,ue=vn(O),Me=r==null;++g<O;)ue[g]=Me?B:Lp(r,a[g]);return ue}function Ml(r,a,g){return r===r&&(g!==B&&(r=r<=g?r:g),a!==B&&(r=r>=a?r:a)),r}function eo(r,a,g,O,ue,Me){var dt,Bt=a&Se,nn=a&ee,kn=a&Qe;if(g&&(dt=ue?g(r,O,ue,Me):g(r)),dt!==B)return dt;if(!qr(r))return r;var Ln=ri(r);if(Ln){if(dt=ei(r),!Bt)return Js(r,dt)}else{var zn=Sr(r),_r=zn==ct||zn==_t;if(ii(r))return kc(r,Bt);if(zn==xt||zn==U||_r&&!ue){if(dt=nn||_r?{}:oi(r),!Bt)return nn?If(r,fg(dt,r)):Xd(r,Ih(dt,r))}else{if(!Yi[zn])return ue?r:{};dt=xr(r,zn,Bt)}}Me||(Me=new Ga);var Fr=Me.get(r);if(Fr)return Fr;Me.set(r,dt),Zu(r)?r.forEach(function(Qr){dt.add(eo(Qr,a,g,Qr,r,Me))}):uu(r)&&r.forEach(function(Qr,yi){dt.set(yi,eo(Qr,a,g,yi,r,Me))});var Xr=kn?nn?re:rt:nn?Ua:Ks,ci=Ln?B:Xr(r);return Wa(ci||r,function(Qr,yi){ci&&(yi=Qr,Qr=r[yi]),Hl(dt,yi,eo(Qr,a,g,yi,r,Me))}),dt}function Af(r){var a=Ks(r);return function(g){return Lh(g,r,a)}}function Lh(r,a,g){var O=g.length;if(r==null)return!O;for(r=ki(r);O--;){var ue=g[O],Me=a[ue],dt=r[ue];if(dt===B&&!(ue in r)||!Me(dt))return!1}return!0}function Bh(r,a,g){if(typeof r!="function")throw new Sa(me);return so(function(){r.apply(B,g)},a)}function gl(r,a,g,O){var ue=-1,Me=Zc,dt=!0,Bt=r.length,nn=[],kn=a.length;if(!Bt)return nn;g&&(a=ts(a,Aa(g))),O?(Me=Sc,dt=!1):a.length>=Be&&(Me=Ac,dt=!1,a=new uo(a));e:for(;++ue<Bt;){var Ln=r[ue],zn=g==null?Ln:g(Ln);if(Ln=O||Ln!==0?Ln:0,dt&&zn===zn){for(var _r=kn;_r--;)if(a[_r]===zn)continue e;nn.push(Ln)}else Me(a,zn,O)||nn.push(Ln)}return nn}var _o=Lf(yo),Rh=Lf(Pl,!0);function sd(r,a){var g=!0;return _o(r,function(O,ue,Me){return g=!!a(O,ue,Me),g}),g}function Zo(r,a,g){for(var O=-1,ue=r.length;++O<ue;){var Me=r[O],dt=a(Me);if(dt!=null&&(Bt===B?dt===dt&&!Gs(dt):g(dt,Bt)))var Bt=dt,nn=Me}return nn}function Wd(r,a,g,O){var ue=r.length;for(g=Gt(g),g<0&&(g=-g>ue?0:ue+g),O=O===B||O>ue?ue:Gt(O),O<0&&(O+=ue),O=g>O?0:Nn(O);g<O;)r[g++]=a;return r}function Oc(r,a){var g=[];return _o(r,function(O,ue,Me){a(O,ue,Me)&&g.push(O)}),g}function cs(r,a,g,O,ue){var Me=-1,dt=r.length;for(g||(g=Fn),ue||(ue=[]);++Me<dt;){var Bt=r[Me];a>0&&g(Bt)?a>1?cs(Bt,a-1,g,O,ue):el(ue,Bt):O||(ue[ue.length]=Bt)}return ue}var Cu=Qd(),Ef=Qd(!0);function yo(r,a){return r&&Cu(r,a,Ks)}function Pl(r,a){return r&&Ef(r,a,Ks)}function ml(r,a){return Cl(a,function(g){return Si(r[g])})}function nl(r,a){a=To(a,r);for(var g=0,O=a.length;r!=null&&g<O;)r=r[Ai(a[g++])];return g&&g==O?r:B}function Nh(r,a,g){var O=a(r);return ri(r)?O:el(O,g(r))}function Rs(r){return r==null?r===B?or:Pt:dl&&dl in ki(r)?Cn(r):Fi(r)}function Du(r,a){return r>a}function ad(r,a){return r!=null&&ji.call(r,a)}function dg(r,a){return r!=null&&a in ki(r)}function Gd(r,a,g){return r>=Qs(a,g)&&r<ks(a,g)}function Fh(r,a,g){for(var O=g?Sc:Zc,ue=r[0].length,Me=r.length,dt=Me,Bt=vn(Me),nn=1/0,kn=[];dt--;){var Ln=r[dt];dt&&a&&(Ln=ts(Ln,Aa(a))),nn=Qs(Ln.length,nn),Bt[dt]=!g&&(a||ue>=120&&Ln.length>=120)?new uo(dt&&Ln):B}Ln=r[0];var zn=-1,_r=Bt[0];e:for(;++zn<ue&&kn.length<nn;){var Fr=Ln[zn],Xr=a?a(Fr):Fr;if(Fr=g||Fr!==0?Fr:0,!(_r?Ac(_r,Xr):O(kn,Xr,g))){for(dt=Me;--dt;){var ci=Bt[dt];if(!(ci?Ac(ci,Xr):O(r[dt],Xr,g)))continue e}_r&&_r.push(Xr),kn.push(Fr)}}return kn}function zh(r,a,g,O){return yo(r,function(ue,Me,dt){a(O,g(ue),Me,dt)}),O}function Fo(r,a,g){a=To(a,r),r=wo(r,a);var O=r==null?r:r[Ai(Ee(a))];return O==null?B:Ba(O,r,g)}function Uh(r){return Ei(r)&&Rs(r)==U}function od(r){return Ei(r)&&Rs(r)==$n}function jh(r){return Ei(r)&&Rs(r)==Ce}function Uu(r,a,g,O,ue){return r===a?!0:r==null||a==null||!Ei(r)&&!Ei(a)?r!==r&&a!==a:ju(r,a,g,O,Uu,ue)}function ju(r,a,g,O,ue,Me){var dt=ri(r),Bt=ri(a),nn=dt?Q:Sr(r),kn=Bt?Q:Sr(a);nn=nn==U?xt:nn,kn=kn==U?xt:kn;var Ln=nn==xt,zn=kn==xt,_r=nn==kn;if(_r&&ii(r)){if(!ii(a))return!1;dt=!0,Ln=!1}if(_r&&!Ln)return Me||(Me=new Ga),dt||la(r)?k(r,a,g,O,ue,Me):W(r,a,nn,g,O,ue,Me);if(!(g&wt)){var Fr=Ln&&ji.call(r,"__wrapped__"),Xr=zn&&ji.call(a,"__wrapped__");if(Fr||Xr){var ci=Fr?r.value():r,Qr=Xr?a.value():a;return Me||(Me=new Ga),ue(ci,Qr,g,O,Me)}}return _r?(Me||(Me=new Ga),ve(r,a,g,O,ue,Me)):!1}function Ep(r){return Ei(r)&&Sr(r)==qe}function Vu(r,a,g,O){var ue=g.length,Me=ue,dt=!O;if(r==null)return!Me;for(r=ki(r);ue--;){var Bt=g[ue];if(dt&&Bt[2]?Bt[1]!==r[Bt[0]]:!(Bt[0]in r))return!1}for(;++ue<Me;){Bt=g[ue];var nn=Bt[0],kn=r[nn],Ln=Bt[1];if(dt&&Bt[2]){if(kn===B&&!(nn in r))return!1}else{var zn=new Ga;if(O)var _r=O(kn,Ln,nn,r,a,zn);if(!(_r===B?Uu(Ln,kn,wt|Dt,O,zn):_r))return!1}}return!0}function Or(r){if(!qr(r)||Hs(r))return!1;var a=Si(r)?Ah:Xu;return a.test(ui(r))}function Yd(r){return Ei(r)&&Rs(r)==bt}function Vh(r){return Ei(r)&&Sr(r)==Vt}function Tf(r){return Ei(r)&&Pa(r.length)&&!!Gi[Rs(r)]}function ih(r){return typeof r=="function"?r:r==null?Qa:typeof r=="object"?ri(r)?lu(r[0],r[1]):ha(r):Eg(r)}function sh(r){if(!da(r))return ya(r);var a=[];for(var g in ki(r))ji.call(r,g)&&g!="constructor"&&a.push(g);return a}function sc(r){if(!qr(r))return Ti(r);var a=da(r),g=[];for(var O in r)O=="constructor"&&(a||!ji.call(r,O))||g.push(O);return g}function Ta(r,a){return r<a}function aa(r,a){var g=-1,O=es(r)?vn(r.length):[];return _o(r,function(ue,Me,dt){O[++g]=a(ue,Me,dt)}),O}function ha(r){var a=At(r);return a.length==1&&a[0][2]?fo(a[0][0],a[0][1]):function(g){return g===r||Vu(g,r,a)}}function lu(r,a){return ai(r)&&Zi(a)?fo(Ai(r),a):function(g){var O=Lp(g,r);return O===B&&O===a?cc(g,r):Uu(a,O,wt|Dt)}}function $o(r,a,g,O,ue){r!==a&&Cu(a,function(Me,dt){if(ue||(ue=new Ga),qr(Me))Au(r,a,dt,g,$o,O,ue);else{var Bt=O?O(Fa(r,dt),Me,dt+"",r,a,ue):B;Bt===B&&(Bt=Me),Df(r,dt,Bt)}},Ua)}function Au(r,a,g,O,ue,Me,dt){var Bt=Fa(r,g),nn=Fa(a,g),kn=dt.get(nn);if(kn){Df(r,g,kn);return}var Ln=Me?Me(Bt,nn,g+"",r,a,dt):B,zn=Ln===B;if(zn){var _r=ri(nn),Fr=!_r&&ii(nn),Xr=!_r&&!Fr&&la(nn);Ln=nn,_r||Fr||Xr?ri(Bt)?Ln=Bt:qi(Bt)?Ln=Js(Bt):Fr?(zn=!1,Ln=kc(nn,!0)):Xr?(zn=!1,Ln=qd(nn,!0)):Ln=[]:qa(nn)||ps(nn)?(Ln=Bt,ps(Bt)?Ln=ke(Bt):(!qr(Bt)||Si(Bt))&&(Ln=oi(nn))):zn=!1}zn&&(dt.set(nn,Ln),ue(Ln,nn,O,Me,dt),dt.delete(nn)),Df(r,g,Ln)}function Ao(r,a){var g=r.length;if(g)return a+=a<0?g:0,si(a,g)?r[a]:B}function Eo(r,a,g){a.length?a=ts(a,function(Me){return ri(Me)?function(dt){return nl(dt,Me.length===1?Me[0]:Me)}:Me}):a=[Qa];var O=-1;a=ts(a,Aa(Ie()));var ue=aa(r,function(Me,dt,Bt){var nn=ts(a,function(kn){return kn(Me)});return{criteria:nn,index:++O,value:Me}});return sg(ue,function(Me,dt){return kp(Me,dt,g)})}function ld(r,a){return Hu(r,a,function(g,O){return cc(r,O)})}function Hu(r,a,g){for(var O=-1,ue=a.length,Me={};++O<ue;){var dt=a[O],Bt=nl(r,dt);g(Bt,dt)&&Wu(Me,To(dt,r),Bt)}return Me}function Tp(r){return function(a){return nl(a,r)}}function Ol(r,a,g,O){var ue=O?Zg:Dl,Me=-1,dt=a.length,Bt=r;for(r===a&&(a=Js(a)),g&&(Bt=ts(r,Aa(g)));++Me<dt;)for(var nn=0,kn=a[Me],Ln=g?g(kn):kn;(nn=ue(Bt,Ln,nn,O))>-1;)Bt!==r&&ec.call(Bt,nn,1),ec.call(r,nn,1);return r}function Wl(r,a){for(var g=r?a.length:0,O=g-1;g--;){var ue=a[g];if(g==O||ue!==Me){var Me=ue;si(ue)?ec.call(r,ue,1):Pf(r,ue)}}return r}function Ko(r,a){return r+yu(bf()*(a-r+1))}function vr(r,a,g,O){for(var ue=-1,Me=ks(tc((a-r)/(g||1)),0),dt=vn(Me);Me--;)dt[O?Me:++ue]=r,r+=g;return dt}function ah(r,a){var g="";if(!r||a<1||a>zt)return g;do a%2&&(g+=r),a=yu(a/2),a&&(r+=r);while(a);return g}function fi(r,a){return pa(zi(r,a,Qa),r+"")}function pg(r){return Hd(Fc(r))}function Mp(r,a){var g=Fc(r);return Ds(g,Ml(a,0,g.length))}function Wu(r,a,g,O){if(!qr(r))return r;a=To(a,r);for(var ue=-1,Me=a.length,dt=Me-1,Bt=r;Bt!=null&&++ue<Me;){var nn=Ai(a[ue]),kn=g;if(nn==="__proto__"||nn==="constructor"||nn==="prototype")return r;if(ue!=dt){var Ln=Bt[nn];kn=O?O(Ln,nn,Bt):B,kn===B&&(kn=qr(Ln)?Ln:si(a[ue+1])?[]:{})}Hl(Bt,nn,kn),Bt=Bt[nn]}return r}var Zd=eh?function(r,a){return eh.set(r,a),r}:Qa,ud=zl?function(r,a){return zl(r,"toString",{configurable:!0,enumerable:!1,value:Vp(a),writable:!0})}:Qa;function Pp(r){return Ds(Fc(r))}function Ra(r,a,g){var O=-1,ue=r.length;a<0&&(a=-a>ue?0:ue+a),g=g>ue?ue:g,g<0&&(g+=ue),ue=a>g?0:g-a>>>0,a>>>=0;for(var Me=vn(ue);++O<ue;)Me[O]=r[O+a];return Me}function Mf(r,a){var g;return _o(r,function(O,ue,Me){return g=a(O,ue,Me),!g}),!!g}function ac(r,a,g){var O=0,ue=r==null?O:r.length;if(typeof a=="number"&&a===a&&ue<=We){for(;O<ue;){var Me=O+ue>>>1,dt=r[Me];dt!==null&&!Gs(dt)&&(g?dt<=a:dt<a)?O=Me+1:ue=Me}return ue}return oh(r,a,Qa,g)}function oh(r,a,g,O){var ue=0,Me=r==null?0:r.length;if(Me===0)return 0;a=g(a);for(var dt=a!==a,Bt=a===null,nn=Gs(a),kn=a===B;ue<Me;){var Ln=yu((ue+Me)/2),zn=g(r[Ln]),_r=zn!==B,Fr=zn===null,Xr=zn===zn,ci=Gs(zn);if(dt)var Qr=O||Xr;else kn?Qr=Xr&&(O||_r):Bt?Qr=Xr&&_r&&(O||!Fr):nn?Qr=Xr&&_r&&!Fr&&(O||!ci):Fr||ci?Qr=!1:Qr=O?zn<=a:zn<a;Qr?ue=Ln+1:Me=Ln}return Qs(Me,tt)}function Hh(r,a){for(var g=-1,O=r.length,ue=0,Me=[];++g<O;){var dt=r[g],Bt=a?a(dt):dt;if(!g||!Li(Bt,nn)){var nn=Bt;Me[ue++]=dt===0?0:dt}}return Me}function $d(r){return typeof r=="number"?r:Gs(r)?Mt:+r}function Ma(r){if(typeof r=="string")return r;if(ri(r))return ts(r,Ma)+"";if(Gs(r))return Ea?Ea.call(r):"";var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}function vl(r,a,g){var O=-1,ue=Zc,Me=r.length,dt=!0,Bt=[],nn=Bt;if(g)dt=!1,ue=Sc;else if(Me>=Be){var kn=a?null:n(r);if(kn)return Ec(kn);dt=!1,ue=Ac,nn=new uo}else nn=a?[]:Bt;e:for(;++O<Me;){var Ln=r[O],zn=a?a(Ln):Ln;if(Ln=g||Ln!==0?Ln:0,dt&&zn===zn){for(var _r=nn.length;_r--;)if(nn[_r]===zn)continue e;a&&nn.push(zn),Bt.push(Ln)}else ue(nn,zn,g)||(nn!==Bt&&nn.push(zn),Bt.push(Ln))}return Bt}function Pf(r,a){return a=To(a,r),r=wo(r,a),r==null||delete r[Ai(Ee(a))]}function Kd(r,a,g,O){return Wu(r,a,g(nl(r,a)),O)}function lh(r,a,g,O){for(var ue=r.length,Me=O?ue:-1;(O?Me--:++Me<ue)&&a(r[Me],Me,r););return g?Ra(r,O?0:Me,O?Me+1:ue):Ra(r,O?Me+1:0,O?ue:Me)}function cd(r,a){var g=r;return g instanceof hi&&(g=g.value()),Zf(a,function(O,ue){return ue.func.apply(ue.thisArg,el([O],ue.args))},g)}function Of(r,a,g){var O=r.length;if(O<2)return O?vl(r[0]):[];for(var ue=-1,Me=vn(O);++ue<O;)for(var dt=r[ue],Bt=-1;++Bt<O;)Bt!=ue&&(Me[ue]=gl(Me[ue]||dt,r[Bt],a,g));return vl(cs(Me,1),a,g)}function hd(r,a,g){for(var O=-1,ue=r.length,Me=a.length,dt={};++O<ue;){var Bt=O<Me?a[O]:B;g(dt,r[O],Bt)}return dt}function Wh(r){return qi(r)?r:[]}function kf(r){return typeof r=="function"?r:Qa}function To(r,a){return ri(r)?r:ai(r,a)?[r]:di(Nt(r))}var fd=fi;function zo(r,a,g){var O=r.length;return g=g===B?O:g,!a&&g>=O?r:Ra(r,a,g)}var dd=xf||function(r){return Ls.clearTimeout(r)};function kc(r,a){if(a)return r.slice();var g=r.length,O=va?va(g):new r.constructor(g);return r.copy(O),O}function uh(r){var a=new r.constructor(r.byteLength);return new Qc(a).set(new Qc(r)),a}function pd(r,a){var g=a?uh(r.buffer):r.buffer;return new r.constructor(g,r.byteOffset,r.byteLength)}function Na(r){var a=new r.constructor(r.source,Ql.exec(r));return a.lastIndex=r.lastIndex,a}function Op(r){return pl?ki(pl.call(r)):{}}function qd(r,a){var g=a?uh(r.buffer):r.buffer;return new r.constructor(g,r.byteOffset,r.length)}function kl(r,a){if(r!==a){var g=r!==B,O=r===null,ue=r===r,Me=Gs(r),dt=a!==B,Bt=a===null,nn=a===a,kn=Gs(a);if(!Bt&&!kn&&!Me&&r>a||Me&&dt&&nn&&!Bt&&!kn||O&&dt&&nn||!g&&nn||!ue)return 1;if(!O&&!Me&&!kn&&r<a||kn&&g&&ue&&!O&&!Me||Bt&&g&&ue||!dt&&ue||!nn)return-1}return 0}function kp(r,a,g){for(var O=-1,ue=r.criteria,Me=a.criteria,dt=ue.length,Bt=g.length;++O<dt;){var nn=kl(ue[O],Me[O]);if(nn){if(O>=Bt)return nn;var kn=g[O];return nn*(kn=="desc"?-1:1)}}return r.index-a.index}function Gh(r,a,g,O){for(var ue=-1,Me=r.length,dt=g.length,Bt=-1,nn=a.length,kn=ks(Me-dt,0),Ln=vn(nn+kn),zn=!O;++Bt<nn;)Ln[Bt]=a[Bt];for(;++ue<dt;)(zn||ue<Me)&&(Ln[g[ue]]=r[ue]);for(;kn--;)Ln[Bt++]=r[ue++];return Ln}function ch(r,a,g,O){for(var ue=-1,Me=r.length,dt=-1,Bt=g.length,nn=-1,kn=a.length,Ln=ks(Me-Bt,0),zn=vn(Ln+kn),_r=!O;++ue<Ln;)zn[ue]=r[ue];for(var Fr=ue;++nn<kn;)zn[Fr+nn]=a[nn];for(;++dt<Bt;)(_r||ue<Me)&&(zn[Fr+g[dt]]=r[ue++]);return zn}function Js(r,a){var g=-1,O=r.length;for(a||(a=vn(O));++g<O;)a[g]=r[g];return a}function ho(r,a,g,O){var ue=!g;g||(g={});for(var Me=-1,dt=a.length;++Me<dt;){var Bt=a[Me],nn=O?O(g[Bt],r[Bt],Bt,g,r):B;nn===B&&(nn=r[Bt]),ue?co(g,Bt,nn):Hl(g,Bt,nn)}return g}function Xd(r,a){return ho(r,He(r),a)}function If(r,a){return ho(r,_e(r),a)}function Ic(r,a){return function(g,O){var ue=ri(g)?Yg:kh,Me=a?a():{};return ue(g,r,Ie(O,2),Me)}}function Il(r){return fi(function(a,g){var O=-1,ue=g.length,Me=ue>1?g[ue-1]:B,dt=ue>2?g[2]:B;for(Me=r.length>3&&typeof Me=="function"?(ue--,Me):B,dt&&Pi(g[0],g[1],dt)&&(Me=ue<3?B:Me,ue=1),a=ki(a);++O<ue;){var Bt=g[O];Bt&&r(a,Bt,O,Me)}return a})}function Lf(r,a){return function(g,O){if(g==null)return g;if(!es(g))return r(g,O);for(var ue=g.length,Me=a?ue:-1,dt=ki(g);(a?Me--:++Me<ue)&&O(dt[Me],Me,dt)!==!1;);return g}}function Qd(r){return function(a,g,O){for(var ue=-1,Me=ki(a),dt=O(a),Bt=dt.length;Bt--;){var nn=dt[r?Bt:++ue];if(g(Me[nn],nn,Me)===!1)break}return a}}function Ip(r,a,g){var O=a&at,ue=oc(r);function Me(){var dt=this&&this!==Ls&&this instanceof Me?ue:r;return dt.apply(O?g:this,arguments)}return Me}function Jd(r){return function(a){a=Nt(a);var g=nu(a)?sa(a):B,O=g?g[0]:a.charAt(0),ue=g?zo(g,1).join(""):a.slice(1);return O[r]()+ue}}function Gl(r){return function(a){return Zf(zc(Bf(a).replace(ss,"")),r,"")}}function oc(r){return function(){var a=arguments;switch(a.length){case 0:return new r;case 1:return new r(a[0]);case 2:return new r(a[0],a[1]);case 3:return new r(a[0],a[1],a[2]);case 4:return new r(a[0],a[1],a[2],a[3]);case 5:return new r(a[0],a[1],a[2],a[3],a[4]);case 6:return new r(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new r(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var g=Yo(r.prototype),O=r.apply(g,a);return qr(O)?O:g}}function tm(r,a,g){var O=oc(r);function ue(){for(var Me=arguments.length,dt=vn(Me),Bt=Me,nn=tn(ue);Bt--;)dt[Bt]=arguments[Bt];var kn=Me<3&&dt[0]!==nn&&dt[Me-1]!==nn?[]:Ro(dt,nn);if(Me-=kn.length,Me<g)return y(r,a,Lc,ue.placeholder,B,dt,kn,B,B,g-Me);var Ln=this&&this!==Ls&&this instanceof ue?O:r;return Ba(Ln,this,dt)}return ue}function rl(r){return function(a,g,O){var ue=ki(a);if(!es(a)){var Me=Ie(g,3);a=Ks(a),g=function(Bt){return Me(ue[Bt],Bt,ue)}}var dt=r(a,g,O);return dt>-1?ue[Me?a[dt]:dt]:B}}function Mo(r){return Ae(function(a){var g=a.length,O=g,ue=Bs.prototype.thru;for(r&&a.reverse();O--;){var Me=a[O];if(typeof Me!="function")throw new Sa(me);if(ue&&!dt&&nt(Me)=="wrapper")var dt=new Bs([],!0)}for(O=dt?O:g;++O<g;){Me=a[O];var Bt=nt(Me),nn=Bt=="wrapper"?mt(Me):B;nn&&fa(nn[0])&&nn[1]==(ut|pt|Jt|St)&&!nn[4].length&&nn[9]==1?dt=dt[nt(nn[0])].apply(dt,nn[3]):dt=Me.length==1&&fa(Me)?dt[Bt]():dt.thru(Me)}return function(){var kn=arguments,Ln=kn[0];if(dt&&kn.length==1&&ri(Ln))return dt.plant(Ln).value();for(var zn=0,_r=g?a[zn].apply(this,kn):Ln;++zn<g;)_r=a[zn].call(this,_r);return _r}})}function Lc(r,a,g,O,ue,Me,dt,Bt,nn,kn){var Ln=a&ut,zn=a&at,_r=a&Ne,Fr=a&(pt|ot),Xr=a&Lt,ci=_r?B:oc(r);function Qr(){for(var yi=arguments.length,Ci=vn(yi),to=yi;to--;)Ci[to]=arguments[to];if(Fr)var ka=tn(Qr),oo=pf(Ci,ka);if(O&&(Ci=Gh(Ci,O,ue,Fr)),Me&&(Ci=ch(Ci,Me,dt,Fr)),yi-=oo,Fr&&yi<kn){var Ps=Ro(Ci,ka);return y(r,a,Lc,Qr.placeholder,g,Ci,Ps,Bt,nn,kn-yi)}var Bo=zn?g:this,ul=_r?Bo[r]:r;return yi=Ci.length,Bt?Ci=xo(Ci,Bt):Xr&&yi>1&&Ci.reverse(),Ln&&nn<yi&&(Ci.length=nn),this&&this!==Ls&&this instanceof Qr&&(ul=ci||oc(ul)),ul.apply(Bo,Ci)}return Qr}function gd(r,a){return function(g,O){return zh(g,r,a(O),{})}}function Bc(r,a){return function(g,O){var ue;if(g===B&&O===B)return a;if(g!==B&&(ue=g),O!==B){if(ue===B)return O;typeof g=="string"||typeof O=="string"?(g=Ma(g),O=Ma(O)):(g=$d(g),O=$d(O)),ue=r(g,O)}return ue}}function Yh(r){return Ae(function(a){return a=ts(a,Aa(Ie())),fi(function(g){var O=this;return r(a,function(ue){return Ba(ue,O,g)})})})}function Rc(r,a){a=a===B?" ":Ma(a);var g=a.length;if(g<2)return g?ah(a,r):a;var O=ah(a,tc(r/iu(a)));return nu(a)?zo(sa(O),0,r).join(""):O.slice(0,r)}function md(r,a,g,O){var ue=a&at,Me=oc(r);function dt(){for(var Bt=-1,nn=arguments.length,kn=-1,Ln=O.length,zn=vn(Ln+nn),_r=this&&this!==Ls&&this instanceof dt?Me:r;++kn<Ln;)zn[kn]=O[kn];for(;nn--;)zn[kn++]=arguments[++Bt];return Ba(_r,ue?g:this,zn)}return dt}function ep(r){return function(a,g,O){return O&&typeof O!="number"&&Pi(a,g,O)&&(g=O=B),a=sr(a),g===B?(g=a,a=0):g=sr(g),O=O===B?a<g?1:-1:sr(O),vr(a,g,O,r)}}function Nc(r){return function(a,g){return typeof a=="string"&&typeof g=="string"||(a=En(a),g=En(g)),r(a,g)}}function y(r,a,g,O,ue,Me,dt,Bt,nn,kn){var Ln=a&pt,zn=Ln?dt:B,_r=Ln?B:dt,Fr=Ln?Me:B,Xr=Ln?B:Me;a|=Ln?Jt:Qt,a&=~(Ln?Qt:Jt),a&Je||(a&=-4);var ci=[r,a,ue,Fr,zn,Xr,_r,Bt,nn,kn],Qr=g.apply(B,ci);return fa(r)&&Uo(Qr,ci),Qr.placeholder=O,ea(Qr,r,a)}function e(r){var a=xs[r];return function(g,O){if(g=En(g),O=O==null?0:Qs(Gt(O),292),O&&Th(g)){var ue=(Nt(g)+"e").split("e"),Me=a(ue[0]+"e"+(+ue[1]+O));return ue=(Nt(Me)+"e").split("e"),+(ue[0]+"e"+(+ue[1]-O))}return a(g)}}var n=Ho&&1/Ec(new Ho([,-0]))[1]==Zt?function(r){return new Ho(r)}:Wp;function s(r){return function(a){var g=Sr(a);return g==qe?ru(a):g==Vt?$g(a):ag(a,r(a))}}function c(r,a,g,O,ue,Me,dt,Bt){var nn=a&Ne;if(!nn&&typeof r!="function")throw new Sa(me);var kn=O?O.length:0;if(kn||(a&=-97,O=ue=B),dt=dt===B?dt:ks(Gt(dt),0),Bt=Bt===B?Bt:Gt(Bt),kn-=ue?ue.length:0,a&Qt){var Ln=O,zn=ue;O=ue=B}var _r=nn?B:mt(r),Fr=[r,a,g,O,ue,Ln,zn,Me,dt,Bt];if(_r&&qo(Fr,_r),r=Fr[0],a=Fr[1],g=Fr[2],O=Fr[3],ue=Fr[4],Bt=Fr[9]=Fr[9]===B?nn?0:r.length:ks(Fr[9]-kn,0),!Bt&&a&(pt|ot)&&(a&=-25),!a||a==at)var Xr=Ip(r,a,g);else a==pt||a==ot?Xr=tm(r,a,Bt):(a==Jt||a==(at|Jt))&&!ue.length?Xr=md(r,a,g,O):Xr=Lc.apply(B,Fr);var ci=_r?Zd:Uo;return ea(ci(Xr,Fr),r,a)}function u(r,a,g,O){return r===B||Li(r,mu[g])&&!ji.call(O,g)?a:r}function m(r,a,g,O,ue,Me){return qr(r)&&qr(a)&&(Me.set(a,r),$o(r,a,B,m,Me),Me.delete(a)),r}function b(r){return qa(r)?B:r}function k(r,a,g,O,ue,Me){var dt=g&wt,Bt=r.length,nn=a.length;if(Bt!=nn&&!(dt&&nn>Bt))return!1;var kn=Me.get(r),Ln=Me.get(a);if(kn&&Ln)return kn==a&&Ln==r;var zn=-1,_r=!0,Fr=g&Dt?new uo:B;for(Me.set(r,a),Me.set(a,r);++zn<Bt;){var Xr=r[zn],ci=a[zn];if(O)var Qr=dt?O(ci,Xr,zn,a,r,Me):O(Xr,ci,zn,r,a,Me);if(Qr!==B){if(Qr)continue;_r=!1;break}if(Fr){if(!$f(a,function(yi,Ci){if(!Ac(Fr,Ci)&&(Xr===yi||ue(Xr,yi,g,O,Me)))return Fr.push(Ci)})){_r=!1;break}}else if(!(Xr===ci||ue(Xr,ci,g,O,Me))){_r=!1;break}}return Me.delete(r),Me.delete(a),_r}function W(r,a,g,O,ue,Me,dt){switch(g){case Tn:if(r.byteLength!=a.byteLength||r.byteOffset!=a.byteOffset)return!1;r=r.buffer,a=a.buffer;case $n:return!(r.byteLength!=a.byteLength||!Me(new Qc(r),new Qc(a)));case de:case Ce:case ht:return Li(+r,+a);case Ke:return r.name==a.name&&r.message==a.message;case bt:case _n:return r==a+"";case qe:var Bt=ru;case Vt:var nn=O&wt;if(Bt||(Bt=Ec),r.size!=a.size&&!nn)return!1;var kn=dt.get(r);if(kn)return kn==a;O|=Dt,dt.set(r,a);var Ln=k(Bt(r),Bt(a),O,ue,Me,dt);return dt.delete(r),Ln;case Yn:if(pl)return pl.call(r)==pl.call(a)}return!1}function ve(r,a,g,O,ue,Me){var dt=g&wt,Bt=rt(r),nn=Bt.length,kn=rt(a),Ln=kn.length;if(nn!=Ln&&!dt)return!1;for(var zn=nn;zn--;){var _r=Bt[zn];if(!(dt?_r in a:ji.call(a,_r)))return!1}var Fr=Me.get(r),Xr=Me.get(a);if(Fr&&Xr)return Fr==a&&Xr==r;var ci=!0;Me.set(r,a),Me.set(a,r);for(var Qr=dt;++zn<nn;){_r=Bt[zn];var yi=r[_r],Ci=a[_r];if(O)var to=dt?O(Ci,yi,_r,a,r,Me):O(yi,Ci,_r,r,a,Me);if(!(to===B?yi===Ci||ue(yi,Ci,g,O,Me):to)){ci=!1;break}Qr||(Qr=_r=="constructor")}if(ci&&!Qr){var ka=r.constructor,oo=a.constructor;ka!=oo&&"constructor"in r&&"constructor"in a&&!(typeof ka=="function"&&ka instanceof ka&&typeof oo=="function"&&oo instanceof oo)&&(ci=!1)}return Me.delete(r),Me.delete(a),ci}function Ae(r){return pa(zi(r,B,R),r+"")}function rt(r){return Nh(r,Ks,He)}function re(r){return Nh(r,Ua,_e)}var mt=eh?function(r){return eh.get(r)}:Wp;function nt(r){for(var a=r.name+"",g=Fu[a],O=ji.call(Fu,a)?g.length:0;O--;){var ue=g[O],Me=ue.func;if(Me==null||Me==r)return ue.name}return a}function tn(r){var a=ji.call(ye,"placeholder")?ye:r;return a.placeholder}function Ie(){var r=ye.iteratee||Hp;return r=r===Hp?ih:r,arguments.length?r(arguments[0],arguments[1]):r}function Kt(r,a){var g=r.__data__;return hs(a)?g[typeof a=="string"?"string":"hash"]:g.map}function At(r){for(var a=Ks(r),g=a.length;g--;){var O=a[g],ue=r[O];a[g]=[O,ue,Zi(ue)]}return a}function an(r,a){var g=wp(r,a);return Or(g)?g:B}function Cn(r){var a=ji.call(r,dl),g=r[dl];try{r[dl]=B;var O=!0}catch{}var ue=vu.call(r);return O&&(a?r[dl]=g:delete r[dl]),ue}var He=Jc?function(r){return r==null?[]:(r=ki(r),Cl(Jc(r),function(a){return Eh.call(r,a)}))}:qh,_e=Jc?function(r){for(var a=[];r;)el(a,He(r)),r=Nu(r);return a}:qh,Sr=Rs;(Mh&&Sr(new Mh(new ArrayBuffer(1)))!=Tn||Ul&&Sr(new Ul)!=qe||jl&&Sr(jl.resolve())!=Ge||Ho&&Sr(new Ho)!=Vt||Wo&&Sr(new Wo)!=lr)&&(Sr=function(r){var a=Rs(r),g=a==xt?r.constructor:B,O=g?ui(g):"";if(O)switch(O){case th:return Tn;case ed:return qe;case wu:return Ge;case zd:return Vt;case Cp:return lr}return a});function On(r,a,g){for(var O=-1,ue=g.length;++O<ue;){var Me=g[O],dt=Me.size;switch(Me.type){case"drop":r+=dt;break;case"dropRight":a-=dt;break;case"take":a=Qs(a,r+dt);break;case"takeRight":r=ks(r,a-dt);break}}return{start:r,end:a}}function Kr(r){var a=r.match(Vc);return a?a[1].split(Pu):[]}function Mi(r,a,g){a=To(a,r);for(var O=-1,ue=a.length,Me=!1;++O<ue;){var dt=Ai(a[O]);if(!(Me=r!=null&&g(r,dt)))break;r=r[dt]}return Me||++O!=ue?Me:(ue=r==null?0:r.length,!!ue&&Pa(ue)&&si(dt,ue)&&(ri(r)||ps(r)))}function ei(r){var a=r.length,g=new r.constructor(a);return a&&typeof r[0]=="string"&&ji.call(r,"index")&&(g.index=r.index,g.input=r.input),g}function oi(r){return typeof r.constructor=="function"&&!da(r)?Yo(Nu(r)):{}}function xr(r,a,g){var O=r.constructor;switch(a){case $n:return uh(r);case de:case Ce:return new O(+r);case Tn:return pd(r,g);case Gn:case tr:case pr:case Br:case Mr:case pn:case Wt:case un:case fn:return qd(r,g);case qe:return new O;case ht:case _n:return new O(r);case bt:return Na(r);case Vt:return new O;case Yn:return Op(r)}}function Ts(r,a){var g=a.length;if(!g)return r;var O=g-1;return a[O]=(g>1?"& ":"")+a[O],a=a.join(g>2?", ":" "),r.replace(mc,`{
/* [wrapped with `+a+`] */
`)}function Fn(r){return ri(r)||ps(r)||!!(wf&&r&&r[wf])}function si(r,a){var g=typeof r;return a=a??zt,!!a&&(g=="number"||g!="symbol"&&Sl.test(r))&&r>-1&&r%1==0&&r<a}function Pi(r,a,g){if(!qr(g))return!1;var O=typeof a;return(O=="number"?es(g)&&si(a,g.length):O=="string"&&a in g)?Li(g[a],r):!1}function ai(r,a){if(ri(r))return!1;var g=typeof r;return g=="number"||g=="symbol"||g=="boolean"||r==null||Gs(r)?!0:gc.test(r)||!$u.test(r)||a!=null&&r in ki(a)}function hs(r){var a=typeof r;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?r!=="__proto__":r===null}function fa(r){var a=nt(r),g=ye[a];if(typeof g!="function"||!(a in hi.prototype))return!1;if(r===g)return!0;var O=mt(g);return!!O&&r===O[0]}function Hs(r){return!!Dh&&Dh in r}var Ns=Ju?Si:Rf;function da(r){var a=r&&r.constructor,g=typeof a=="function"&&a.prototype||mu;return r===g}function Zi(r){return r===r&&!qr(r)}function fo(r,a){return function(g){return g==null?!1:g[r]===a&&(a!==B||r in ki(g))}}function io(r){var a=Re(r,function(O){return g.size===De&&g.clear(),O}),g=a.cache;return a}function qo(r,a){var g=r[1],O=a[1],ue=g|O,Me=ue<(at|Ne|ut),dt=O==ut&&g==pt||O==ut&&g==St&&r[7].length<=a[8]||O==(ut|St)&&a[7].length<=a[8]&&g==pt;if(!(Me||dt))return r;O&at&&(r[2]=a[2],ue|=g&at?0:Je);var Bt=a[3];if(Bt){var nn=r[3];r[3]=nn?Gh(nn,Bt,a[4]):Bt,r[4]=nn?Ro(r[3],Pe):a[4]}return Bt=a[5],Bt&&(nn=r[5],r[5]=nn?ch(nn,Bt,a[6]):Bt,r[6]=nn?Ro(r[5],Pe):a[6]),Bt=a[7],Bt&&(r[7]=Bt),O&ut&&(r[8]=r[8]==null?a[8]:Qs(r[8],a[8])),r[9]==null&&(r[9]=a[9]),r[0]=a[0],r[1]=ue,r}function Ti(r){var a=[];if(r!=null)for(var g in ki(r))a.push(g);return a}function Fi(r){return vu.call(r)}function zi(r,a,g){return a=ks(a===B?r.length-1:a,0),function(){for(var O=arguments,ue=-1,Me=ks(O.length-a,0),dt=vn(Me);++ue<Me;)dt[ue]=O[a+ue];ue=-1;for(var Bt=vn(a+1);++ue<a;)Bt[ue]=O[ue];return Bt[a]=g(dt),Ba(r,this,Bt)}}function wo(r,a){return a.length<2?r:nl(r,Ra(a,0,-1))}function xo(r,a){for(var g=r.length,O=Qs(a.length,g),ue=Js(r);O--;){var Me=a[O];r[O]=si(Me,g)?ue[Me]:B}return r}function Fa(r,a){if(!(a==="constructor"&&typeof r[a]=="function")&&a!="__proto__")return r[a]}var Uo=fs(Zd),so=em||function(r,a){return Ls.setTimeout(r,a)},pa=fs(ud);function ea(r,a,g){var O=a+"";return pa(r,Ts(O,bo(Kr(O),g)))}function fs(r){var a=0,g=0;return function(){var O=ug(),ue=rn-(O-g);if(g=O,ue>0){if(++a>=Ot)return arguments[0]}else a=0;return r.apply(B,arguments)}}function Ds(r,a){var g=-1,O=r.length,ue=O-1;for(a=a===B?O:a;++g<a;){var Me=Ko(g,ue),dt=r[Me];r[Me]=r[g],r[g]=dt}return r.length=a,r}var di=io(function(r){var a=[];return r.charCodeAt(0)===46&&a.push(""),r.replace(Xl,function(g,O,ue,Me){a.push(ue?Me.replace(Ku,"$1"):O||g)}),a});function Ai(r){if(typeof r=="string"||Gs(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}function ui(r){if(r!=null){try{return au.call(r)}catch{}try{return r+""}catch{}}return""}function bo(r,a){return Wa(C,function(g){var O="_."+g[0];a&g[1]&&!Zc(r,O)&&r.push(O)}),r.sort()}function ar(r){if(r instanceof hi)return r.clone();var a=new Bs(r.__wrapped__,r.__chain__);return a.__actions__=Js(r.__actions__),a.__index__=r.__index__,a.__values__=r.__values__,a}function t(r,a,g){(g?Pi(r,a,g):a===B)?a=1:a=ks(Gt(a),0);var O=r==null?0:r.length;if(!O||a<1)return[];for(var ue=0,Me=0,dt=vn(tc(O/a));ue<O;)dt[Me++]=Ra(r,ue,ue+=a);return dt}function i(r){for(var a=-1,g=r==null?0:r.length,O=0,ue=[];++a<g;){var Me=r[a];Me&&(ue[O++]=Me)}return ue}function o(){var r=arguments.length;if(!r)return[];for(var a=vn(r-1),g=arguments[0],O=r;O--;)a[O-1]=arguments[O];return el(ri(g)?Js(g):[g],cs(a,1))}var h=fi(function(r,a){return qi(r)?gl(r,cs(a,1,qi,!0)):[]}),d=fi(function(r,a){var g=Ee(a);return qi(g)&&(g=B),qi(r)?gl(r,cs(a,1,qi,!0),Ie(g,2)):[]}),v=fi(function(r,a){var g=Ee(a);return qi(g)&&(g=B),qi(r)?gl(r,cs(a,1,qi,!0),B,g):[]});function D(r,a,g){var O=r==null?0:r.length;return O?(a=g||a===B?1:Gt(a),Ra(r,a<0?0:a,O)):[]}function A(r,a,g){var O=r==null?0:r.length;return O?(a=g||a===B?1:Gt(a),a=O-a,Ra(r,0,a<0?0:a)):[]}function T(r,a){return r&&r.length?lh(r,Ie(a,3),!0,!0):[]}function P(r,a){return r&&r.length?lh(r,Ie(a,3),!0):[]}function F(r,a,g,O){var ue=r==null?0:r.length;return ue?(g&&typeof g!="number"&&Pi(r,a,g)&&(g=0,O=ue),Wd(r,a,g,O)):[]}function V(r,a,g){var O=r==null?0:r.length;if(!O)return-1;var ue=g==null?0:Gt(g);return ue<0&&(ue=ks(O+ue,0)),$c(r,Ie(a,3),ue)}function z(r,a,g){var O=r==null?0:r.length;if(!O)return-1;var ue=O-1;return g!==B&&(ue=Gt(g),ue=g<0?ks(O+ue,0):Qs(ue,O-1)),$c(r,Ie(a,3),ue,!0)}function R(r){var a=r==null?0:r.length;return a?cs(r,1):[]}function J(r){var a=r==null?0:r.length;return a?cs(r,Zt):[]}function Y(r,a){var g=r==null?0:r.length;return g?(a=a===B?1:Gt(a),cs(r,a)):[]}function ie(r){for(var a=-1,g=r==null?0:r.length,O={};++a<g;){var ue=r[a];O[ue[0]]=ue[1]}return O}function j(r){return r&&r.length?r[0]:B}function X(r,a,g){var O=r==null?0:r.length;if(!O)return-1;var ue=g==null?0:Gt(g);return ue<0&&(ue=ks(O+ue,0)),Dl(r,a,ue)}function I(r){var a=r==null?0:r.length;return a?Ra(r,0,-1):[]}var G=fi(function(r){var a=ts(r,Wh);return a.length&&a[0]===r[0]?Fh(a):[]}),te=fi(function(r){var a=Ee(r),g=ts(r,Wh);return a===Ee(g)?a=B:g.pop(),g.length&&g[0]===r[0]?Fh(g,Ie(a,2)):[]}),pe=fi(function(r){var a=Ee(r),g=ts(r,Wh);return a=typeof a=="function"?a:B,a&&g.pop(),g.length&&g[0]===r[0]?Fh(g,B,a):[]});function oe(r,a){return r==null?"":_a.call(r,a)}function Ee(r){var a=r==null?0:r.length;return a?r[a-1]:B}function $e(r,a,g){var O=r==null?0:r.length;if(!O)return-1;var ue=O;return g!==B&&(ue=Gt(g),ue=ue<0?ks(O+ue,0):Qs(ue,O-1)),a===a?qg(r,a,ue):$c(r,yp,ue,!0)}function Xe(r,a){return r&&r.length?Ao(r,Gt(a)):B}var ft=fi(Ze);function Ze(r,a){return r&&r.length&&a&&a.length?Ol(r,a):r}function yt(r,a,g){return r&&r.length&&a&&a.length?Ol(r,a,Ie(g,2)):r}function Et(r,a,g){return r&&r.length&&a&&a.length?Ol(r,a,B,g):r}var Yt=Ae(function(r,a){var g=r==null?0:r.length,O=Pc(r,a);return Wl(r,ts(a,function(ue){return si(ue,g)?+ue:ue}).sort(kl)),O});function qt(r,a){var g=[];if(!(r&&r.length))return g;var O=-1,ue=[],Me=r.length;for(a=Ie(a,3);++O<Me;){var dt=r[O];a(dt,O,r)&&(g.push(dt),ue.push(O))}return Wl(r,ue),g}function ln(r){return r==null?r:Tc.call(r)}function In(r,a,g){var O=r==null?0:r.length;return O?(g&&typeof g!="number"&&Pi(r,a,g)?(a=0,g=O):(a=a==null?0:Gt(a),g=g===B?O:Gt(g)),Ra(r,a,g)):[]}function Zn(r,a){return ac(r,a)}function Kn(r,a,g){return oh(r,a,Ie(g,2))}function ur(r,a){var g=r==null?0:r.length;if(g){var O=ac(r,a);if(O<g&&Li(r[O],a))return O}return-1}function yn(r,a){return ac(r,a,!0)}function An(r,a,g){return oh(r,a,Ie(g,2),!0)}function qn(r,a){var g=r==null?0:r.length;if(g){var O=ac(r,a,!0)-1;if(Li(r[O],a))return O}return-1}function cr(r){return r&&r.length?Hh(r):[]}function mr(r,a){return r&&r.length?Hh(r,Ie(a,2)):[]}function Rr(r){var a=r==null?0:r.length;return a?Ra(r,1,a):[]}function Lr(r,a,g){return r&&r.length?(a=g||a===B?1:Gt(a),Ra(r,0,a<0?0:a)):[]}function Ir(r,a,g){var O=r==null?0:r.length;return O?(a=g||a===B?1:Gt(a),a=O-a,Ra(r,a<0?0:a,O)):[]}function ti(r,a){return r&&r.length?lh(r,Ie(a,3),!1,!0):[]}function Wr(r,a){return r&&r.length?lh(r,Ie(a,3)):[]}var ls=fi(function(r){return vl(cs(r,1,qi,!0))}),Vr=fi(function(r){var a=Ee(r);return qi(a)&&(a=B),vl(cs(r,1,qi,!0),Ie(a,2))}),$i=fi(function(r){var a=Ee(r);return a=typeof a=="function"?a:B,vl(cs(r,1,qi,!0),B,a)});function Qi(r){return r&&r.length?vl(r):[]}function Oi(r,a){return r&&r.length?vl(r,Ie(a,2)):[]}function Bi(r,a){return a=typeof a=="function"?a:B,r&&r.length?vl(r,B,a):[]}function ys(r){if(!(r&&r.length))return[];var a=0;return r=Cl(r,function(g){if(qi(g))return a=ks(g.length,a),!0}),bh(a,function(g){return ts(r,Dc(g))})}function ns(r,a){if(!(r&&r.length))return[];var g=ys(r);return a==null?g:ts(g,function(O){return Ba(a,B,O)})}var As=fi(function(r,a){return qi(r)?gl(r,a):[]}),rs=fi(function(r){return Of(Cl(r,qi))}),Ji=fi(function(r){var a=Ee(r);return qi(a)&&(a=B),Of(Cl(r,qi),Ie(a,2))}),Fs=fi(function(r){var a=Ee(r);return a=typeof a=="function"?a:B,Of(Cl(r,qi),B,a)}),Is=fi(ys);function Ws(r,a){return hd(r||[],a||[],Hl)}function Ca(r,a){return hd(r||[],a||[],Wu)}var ta=fi(function(r){var a=r.length,g=a>1?r[a-1]:B;return g=typeof g=="function"?(r.pop(),g):B,ns(r,g)});function Po(r){var a=ye(r);return a.__chain__=!0,a}function il(r,a){return a(r),r}function Oo(r,a){return a(r)}var sl=Ae(function(r){var a=r.length,g=a?r[0]:0,O=this.__wrapped__,ue=function(Me){return Pc(Me,r)};return a>1||this.__actions__.length||!(O instanceof hi)||!si(g)?this.thru(ue):(O=O.slice(g,+g+(a?1:0)),O.__actions__.push({func:Oo,args:[ue],thisArg:B}),new Bs(O,this.__chain__).thru(function(Me){return a&&!Me.length&&Me.push(B),Me}))});function Ya(){return Po(this)}function al(){return new Bs(this.value(),this.__chain__)}function Vi(){this.__values__===B&&(this.__values__=fr(this.value()));var r=this.__index__>=this.__values__.length,a=r?B:this.__values__[this.__index__++];return{done:r,value:a}}function Ll(){return this}function po(r){for(var a,g=this;g instanceof wa;){var O=ar(g);O.__index__=0,O.__values__=B,a?ue.__wrapped__=O:a=O;var ue=O;g=g.__wrapped__}return ue.__wrapped__=r,a}function Za(){var r=this.__wrapped__;if(r instanceof hi){var a=r;return this.__actions__.length&&(a=new hi(this)),a=a.reverse(),a.__actions__.push({func:Oo,args:[ln],thisArg:B}),new Bs(a,this.__chain__)}return this.thru(ln)}function ga(){return cd(this.__wrapped__,this.__actions__)}var $a=Ic(function(r,a,g){ji.call(r,g)?++r[g]:co(r,g,1)});function oa(r,a,g){var O=ri(r)?Ld:sd;return g&&Pi(r,a,g)&&(a=B),O(r,Ie(a,3))}function Zs(r,a){var g=ri(r)?Cl:Oc;return g(r,Ie(a,3))}var _=rl(V),he=rl(z);function gt(r,a){return cs(Oe(r,a),1)}function jt(r,a){return cs(Oe(r,a),Zt)}function wn(r,a,g){return g=g===B?1:Gt(g),cs(Oe(r,a),g)}function nr(r,a){var g=ri(r)?Wa:_o;return g(r,Ie(a,3))}function l(r,a){var g=ri(r)?vp:Rh;return g(r,Ie(a,3))}var f=Ic(function(r,a,g){ji.call(r,g)?r[g].push(a):co(r,g,[a])});function x(r,a,g,O){r=es(r)?r:Fc(r),g=g&&!O?Gt(g):0;var ue=r.length;return g<0&&(g=ks(ue+g,0)),Zl(r)?g<=ue&&r.indexOf(a,g)>-1:!!ue&&Dl(r,a,g)>-1}var N=fi(function(r,a,g){var O=-1,ue=typeof a=="function",Me=es(r)?vn(r.length):[];return _o(r,function(dt){Me[++O]=ue?Ba(a,dt,g):Fo(dt,a,g)}),Me}),ge=Ic(function(r,a,g){co(r,g,a)});function Oe(r,a){var g=ri(r)?ts:aa;return g(r,Ie(a,3))}function Ht(r,a,g,O){return r==null?[]:(ri(a)||(a=a==null?[]:[a]),g=O?B:g,ri(g)||(g=g==null?[]:[g]),Eo(r,a,g))}var Sn=Ic(function(r,a,g){r[g?0:1].push(a)},function(){return[[],[]]});function Rn(r,a,g){var O=ri(r)?Zf:Rd,ue=arguments.length<3;return O(r,Ie(a,4),g,ue,_o)}function dr(r,a,g){var O=ri(r)?_p:Rd,ue=arguments.length<3;return O(r,Ie(a,4),g,ue,Rh)}function Dr(r,a){var g=ri(r)?Cl:Oc;return g(r,vt(Ie(a,3)))}function Pr(r){var a=ri(r)?Hd:pg;return a(r)}function Ur(r,a,g){(g?Pi(r,a,g):a===B)?a=1:a=Gt(a);var O=ri(r)?rd:Mp;return O(r,a)}function pi(r){var a=ri(r)?id:Pp;return a(r)}function mi(r){if(r==null)return 0;if(es(r))return Zl(r)?iu(r):r.length;var a=Sr(r);return a==qe||a==Vt?r.size:sh(r).length}function gi(r,a,g){var O=ri(r)?$f:Mf;return g&&Pi(r,a,g)&&(a=B),O(r,Ie(a,3))}var xa=fi(function(r,a){if(r==null)return[];var g=a.length;return g>1&&Pi(r,a[0],a[1])?a=[]:g>2&&Pi(a[0],a[1],a[2])&&(a=[a[0]]),Eo(r,cs(a,1),[])}),Xn=Jg||function(){return Ls.Date.now()};function Un(r,a){if(typeof a!="function")throw new Sa(me);return r=Gt(r),function(){if(--r<1)return a.apply(this,arguments)}}function rr(r,a,g){return a=g?B:a,a=r&&a==null?r.length:a,c(r,ut,B,B,B,B,a)}function Nr(r,a){var g;if(typeof a!="function")throw new Sa(me);return r=Gt(r),function(){return--r>0&&(g=a.apply(this,arguments)),r<=1&&(a=B),g}}var vi=fi(function(r,a,g){var O=at;if(g.length){var ue=Ro(g,tn(vi));O|=Jt}return c(r,O,a,g,ue)}),xi=fi(function(r,a,g){var O=at|Ne;if(g.length){var ue=Ro(g,tn(xi));O|=Jt}return c(a,O,r,g,ue)});function Ri(r,a,g){a=g?B:a;var O=c(r,pt,B,B,B,B,B,a);return O.placeholder=Ri.placeholder,O}function Ui(r,a,g){a=g?B:a;var O=c(r,ot,B,B,B,B,B,a);return O.placeholder=Ui.placeholder,O}function zs(r,a,g){var O,ue,Me,dt,Bt,nn,kn=0,Ln=!1,zn=!1,_r=!0;if(typeof r!="function")throw new Sa(me);a=En(a)||0,qr(g)&&(Ln=!!g.leading,zn="maxWait"in g,Me=zn?ks(En(g.maxWait)||0,a):Me,_r="trailing"in g?!!g.trailing:_r);function Fr(Ps){var Bo=O,ul=ue;return O=ue=B,kn=Ps,dt=r.apply(ul,Bo),dt}function Xr(Ps){return kn=Ps,Bt=so(yi,a),Ln?Fr(Ps):dt}function ci(Ps){var Bo=Ps-nn,ul=Ps-kn,cm=a-Bo;return zn?Qs(cm,Me-ul):cm}function Qr(Ps){var Bo=Ps-nn,ul=Ps-kn;return nn===B||Bo>=a||Bo<0||zn&&ul>=Me}function yi(){var Ps=Xn();if(Qr(Ps))return Ci(Ps);Bt=so(yi,ci(Ps))}function Ci(Ps){return Bt=B,_r&&O?Fr(Ps):(O=ue=B,dt)}function to(){Bt!==B&&dd(Bt),kn=0,O=nn=ue=Bt=B}function ka(){return Bt===B?dt:Ci(Xn())}function oo(){var Ps=Xn(),Bo=Qr(Ps);if(O=arguments,ue=this,nn=Ps,Bo){if(Bt===B)return Xr(nn);if(zn)return dd(Bt),Bt=so(yi,a),Fr(nn)}return Bt===B&&(Bt=so(yi,a)),dt}return oo.cancel=to,oo.flush=ka,oo}var M=fi(function(r,a){return Bh(r,1,a)}),Z=fi(function(r,a,g){return Bh(r,En(a)||0,g)});function xe(r){return c(r,Lt)}function Re(r,a){if(typeof r!="function"||a!=null&&typeof a!="function")throw new Sa(me);var g=function(){var O=arguments,ue=a?a.apply(this,O):O[0],Me=g.cache;if(Me.has(ue))return Me.get(ue);var dt=r.apply(this,O);return g.cache=Me.set(ue,dt)||Me,dt};return g.cache=new(Re.Cache||Do),g}Re.Cache=Do;function vt(r){if(typeof r!="function")throw new Sa(me);return function(){var a=arguments;switch(a.length){case 0:return!r.call(this);case 1:return!r.call(this,a[0]);case 2:return!r.call(this,a[0],a[1]);case 3:return!r.call(this,a[0],a[1],a[2])}return!r.apply(this,a)}}function Ct(r){return Nr(2,r)}var It=fd(function(r,a){a=a.length==1&&ri(a[0])?ts(a[0],Aa(Ie())):ts(cs(a,1),Aa(Ie()));var g=a.length;return fi(function(O){for(var ue=-1,Me=Qs(O.length,g);++ue<Me;)O[ue]=a[ue].call(this,O[ue]);return Ba(r,this,O)})}),Pn=fi(function(r,a){var g=Ro(a,tn(Pn));return c(r,Jt,B,a,g)}),xn=fi(function(r,a){var g=Ro(a,tn(xn));return c(r,Qt,B,a,g)}),Wn=Ae(function(r,a){return c(r,St,B,B,B,a)});function Cr(r,a){if(typeof r!="function")throw new Sa(me);return a=a===B?a:Gt(a),fi(r,a)}function kr(r,a){if(typeof r!="function")throw new Sa(me);return a=a==null?0:ks(Gt(a),0),fi(function(g){var O=g[a],ue=zo(g,0,a);return O&&el(ue,O),Ba(r,this,ue)})}function hr(r,a,g){var O=!0,ue=!0;if(typeof r!="function")throw new Sa(me);return qr(g)&&(O="leading"in g?!!g.leading:O,ue="trailing"in g?!!g.trailing:ue),zs(r,a,{leading:O,maxWait:a,trailing:ue})}function Gr(r){return rr(r,1)}function _i(r,a){return Pn(kf(a),r)}function ds(){if(!arguments.length)return[];var r=arguments[0];return ri(r)?r:[r]}function us(r){return eo(r,Qe)}function So(r,a){return a=typeof a=="function"?a:B,eo(r,Qe,a)}function Ka(r){return eo(r,Se|Qe)}function za(r,a){return a=typeof a=="function"?a:B,eo(r,Se|Qe,a)}function is(r,a){return a==null||Lh(r,a,Ks(a))}function Li(r,a){return r===a||r!==r&&a!==a}var ko=Nc(Du),Ms=Nc(function(r,a){return r>=a}),ps=Uh(function(){return arguments}())?Uh:function(r){return Ei(r)&&ji.call(r,"callee")&&!Eh.call(r,"callee")},ri=vn.isArray,Yl=Id?Aa(Id):od;function es(r){return r!=null&&Pa(r.length)&&!Si(r)}function qi(r){return Ei(r)&&es(r)}function Xo(r){return r===!0||r===!1||Ei(r)&&Rs(r)==de}var ii=Sp||Rf,_l=pp?Aa(pp):jh;function Io(r){return Ei(r)&&r.nodeType===1&&!qa(r)}function Gu(r){if(r==null)return!0;if(es(r)&&(ri(r)||typeof r=="string"||typeof r.splice=="function"||ii(r)||la(r)||ps(r)))return!r.length;var a=Sr(r);if(a==qe||a==Vt)return!r.size;if(da(r))return!sh(r).length;for(var g in r)if(ji.call(r,g))return!1;return!0}function gs(r,a){return Uu(r,a)}function Da(r,a,g){g=typeof g=="function"?g:B;var O=g?g(r,a):B;return O===B?Uu(r,a,B,g):!!O}function $r(r){if(!Ei(r))return!1;var a=Rs(r);return a==Ke||a==Ye||typeof r.message=="string"&&typeof r.name=="string"&&!qa(r)}function Yu(r){return typeof r=="number"&&Th(r)}function Si(r){if(!qr(r))return!1;var a=Rs(r);return a==ct||a==_t||a==fe||a==en}function bs(r){return typeof r=="number"&&r==Gt(r)}function Pa(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=zt}function qr(r){var a=typeof r;return r!=null&&(a=="object"||a=="function")}function Ei(r){return r!=null&&typeof r=="object"}var uu=gu?Aa(gu):Ep;function vd(r,a){return r===a||Vu(r,a,At(a))}function lc(r,a,g){return g=typeof g=="function"?g:B,Vu(r,a,At(a),g)}function yl(r){return xl(r)&&r!=+r}function Oa(r){if(Ns(r))throw new Tr(ce);return Or(r)}function Lo(r){return r===null}function wl(r){return r==null}function xl(r){return typeof r=="number"||Ei(r)&&Rs(r)==ht}function qa(r){if(!Ei(r)||Rs(r)!=xt)return!1;var a=Nu(r);if(a===null)return!0;var g=ji.call(a,"constructor")&&a.constructor;return typeof g=="function"&&g instanceof g&&au.call(g)==Xg}var ol=gp?Aa(gp):Yd;function Us(r){return bs(r)&&r>=-9007199254740991&&r<=zt}var Zu=Yf?Aa(Yf):Vh;function Zl(r){return typeof r=="string"||!ri(r)&&Ei(r)&&Rs(r)==_n}function Gs(r){return typeof r=="symbol"||Ei(r)&&Rs(r)==Yn}var la=mp?Aa(mp):Tf;function uc(r){return r===B}function Zh(r){return Ei(r)&&Sr(r)==lr}function $l(r){return Ei(r)&&Rs(r)==Jn}var gn=Nc(Ta),jn=Nc(function(r,a){return r<=a});function fr(r){if(!r)return[];if(es(r))return Zl(r)?sa(r):Js(r);if(ou&&r[ou])return Jf(r[ou]());var a=Sr(r),g=a==qe?ru:a==Vt?Ec:Fc;return g(r)}function sr(r){if(!r)return r===0?r:0;if(r=En(r),r===Zt||r===-1/0){var a=r<0?-1:1;return a*Le}return r===r?r:0}function Gt(r){var a=sr(r),g=a%1;return a===a?g?a-g:a:0}function Nn(r){return r?Ml(Gt(r),0,Rt):0}function En(r){if(typeof r=="number")return r;if(Gs(r))return Mt;if(qr(r)){var a=typeof r.valueOf=="function"?r.valueOf():r;r=qr(a)?a+"":a}if(typeof r!="string")return r===0?r:+r;r=Kc(r);var g=qu.test(r);return g||_h.test(r)?tu(r.slice(2),g?2:8):Jl.test(r)?Mt:+r}function ke(r){return ho(r,Ua(r))}function et(r){return r?Ml(Gt(r),-9007199254740991,zt):r===0?r:0}function Nt(r){return r==null?"":Ma(r)}var dn=Il(function(r,a){if(da(a)||es(a)){ho(a,Ks(a),r);return}for(var g in a)ji.call(a,g)&&Hl(r,g,a[g])}),Qn=Il(function(r,a){ho(a,Ua(a),r)}),br=Il(function(r,a,g,O){ho(a,Ua(a),r,O)}),wr=Il(function(r,a,g,O){ho(a,Ks(a),r,O)}),Yr=Ae(Pc);function Es(r,a){var g=Yo(r);return a==null?g:Ih(g,a)}var ra=fi(function(r,a){r=ki(r);var g=-1,O=a.length,ue=O>2?a[2]:B;for(ue&&Pi(a[0],a[1],ue)&&(O=1);++g<O;)for(var Me=a[g],dt=Ua(Me),Bt=-1,nn=dt.length;++Bt<nn;){var kn=dt[Bt],Ln=r[kn];(Ln===B||Li(Ln,mu[kn])&&!ji.call(r,kn))&&(r[kn]=Me[kn])}return r}),Xa=fi(function(r){return r.push(B,m),Ba($h,B,r)});function ao(r,a){return Kf(r,Ie(a,3),yo)}function cu(r,a){return Kf(r,Ie(a,3),Pl)}function ws(r,a){return r==null?r:Cu(r,Ie(a,3),Ua)}function sv(r,a){return r==null?r:Ef(r,Ie(a,3),Ua)}function Sm(r,a){return r&&yo(r,Ie(a,3))}function gg(r,a){return r&&Pl(r,Ie(a,3))}function av(r){return r==null?[]:ml(r,Ks(r))}function ov(r){return r==null?[]:ml(r,Ua(r))}function Lp(r,a,g){var O=r==null?B:nl(r,a);return O===B?g:O}function mg(r,a){return r!=null&&Mi(r,a,ad)}function cc(r,a){return r!=null&&Mi(r,a,dg)}var vg=gd(function(r,a,g){a!=null&&typeof a.toString!="function"&&(a=vu.call(a)),r[a]=g},Vp(Qa)),Cm=gd(function(r,a,g){a!=null&&typeof a.toString!="function"&&(a=vu.call(a)),ji.call(r,a)?r[a].push(g):r[a]=[g]},Ie),_g=fi(Fo);function Ks(r){return es(r)?nd(r):sh(r)}function Ua(r){return es(r)?nd(r,!0):sc(r)}function yg(r,a){var g={};return a=Ie(a,3),yo(r,function(O,ue,Me){co(g,a(O,ue,Me),O)}),g}function Dm(r,a){var g={};return a=Ie(a,3),yo(r,function(O,ue,Me){co(g,ue,a(O,ue,Me))}),g}var Bp=Il(function(r,a,g){$o(r,a,g)}),$h=Il(function(r,a,g,O){$o(r,a,g,O)}),wg=Ae(function(r,a){var g={};if(r==null)return g;var O=!1;a=ts(a,function(Me){return Me=To(Me,r),O||(O=Me.length>1),Me}),ho(r,re(r),g),O&&(g=eo(g,Se|ee|Qe,b));for(var ue=a.length;ue--;)Pf(g,a[ue]);return g});function lv(r,a){return nm(r,vt(Ie(a)))}var uv=Ae(function(r,a){return r==null?{}:ld(r,a)});function nm(r,a){if(r==null)return{};var g=ts(re(r),function(O){return[O]});return a=Ie(a),Hu(r,g,function(O,ue){return a(O,ue[0])})}function xg(r,a,g){a=To(a,r);var O=-1,ue=a.length;for(ue||(ue=1,r=B);++O<ue;){var Me=r==null?B:r[Ai(a[O])];Me===B&&(O=ue,Me=g),r=Si(Me)?Me.call(r):Me}return r}function bg(r,a,g){return r==null?r:Wu(r,a,g)}function rm(r,a,g,O){return O=typeof O=="function"?O:B,r==null?r:Wu(r,a,g,O)}var im=s(Ks),Sg=s(Ua);function cv(r,a,g){var O=ri(r),ue=O||ii(r)||la(r);if(a=Ie(a,4),g==null){var Me=r&&r.constructor;ue?g=O?new Me:[]:qr(r)?g=Si(Me)?Yo(Nu(r)):{}:g={}}return(ue?Wa:yo)(r,function(dt,Bt,nn){return a(g,dt,Bt,nn)}),g}function hv(r,a){return r==null?!0:Pf(r,a)}function ll(r,a,g){return r==null?r:Kd(r,a,kf(g))}function Kl(r,a,g,O){return O=typeof O=="function"?O:B,r==null?r:Kd(r,a,kf(g),O)}function Fc(r){return r==null?[]:ff(r,Ks(r))}function fv(r){return r==null?[]:ff(r,Ua(r))}function Am(r,a,g){return g===B&&(g=a,a=B),g!==B&&(g=En(g),g=g===g?g:0),a!==B&&(a=En(a),a=a===a?a:0),Ml(En(r),a,g)}function dv(r,a,g){return a=sr(a),g===B?(g=a,a=0):g=sr(g),r=En(r),Gd(r,a,g)}function sm(r,a,g){if(g&&typeof g!="boolean"&&Pi(r,a,g)&&(a=g=B),g===B&&(typeof a=="boolean"?(g=a,a=B):typeof r=="boolean"&&(g=r,r=B)),r===B&&a===B?(r=0,a=1):(r=sr(r),a===B?(a=r,r=0):a=sr(a)),r>a){var O=r;r=a,a=O}if(g||r%1||a%1){var ue=bf();return Qs(r+ue*(a-r+fp("1e-"+((ue+"").length-1))),a)}return Ko(r,a)}var Rp=Gl(function(r,a,g){return a=a.toLowerCase(),r+(g?Np(a):a)});function Np(r){return jp(Nt(r).toLowerCase())}function Bf(r){return r=Nt(r),r&&r.replace(wi,gf).replace(Bu,"")}function Fp(r,a,g){r=Nt(r),a=Ma(a);var O=r.length;g=g===B?O:Ml(Gt(g),0,O);var ue=g;return g-=a.length,g>=0&&r.slice(g,ue)==a}function zp(r){return r=Nt(r),r&&as.test(r)?r.replace(Zr,mf):r}function Cg(r){return r=Nt(r),r&&Mu.test(r)?r.replace(Co,"\\$&"):r}var tp=Gl(function(r,a,g){return r+(g?"-":"")+a.toLowerCase()}),pv=Gl(function(r,a,g){return r+(g?" ":"")+a.toLowerCase()}),gv=Jd("toLowerCase");function mv(r,a,g){r=Nt(r),a=Gt(a);var O=a?iu(r):0;if(!a||O>=a)return r;var ue=(a-O)/2;return Rc(yu(ue),g)+r+Rc(tc(ue),g)}function vv(r,a,g){r=Nt(r),a=Gt(a);var O=a?iu(r):0;return a&&O<a?r+Rc(a-O,g):r}function _v(r,a,g){r=Nt(r),a=Gt(a);var O=a?iu(r):0;return a&&O<a?Rc(a-O,g)+r:r}function Dg(r,a,g){return g||a==null?a=0:a&&(a=+a),Fd(Nt(r).replace(Ha,""),a||0)}function Up(r,a,g){return(g?Pi(r,a,g):a===B)?a=1:a=Gt(a),ah(Nt(r),a)}function Em(){var r=arguments,a=Nt(r[0]);return r.length<3?a:a.replace(r[1],r[2])}var on=Gl(function(r,a,g){return r+(g?"_":"")+a.toLowerCase()});function np(r,a,g){return g&&typeof g!="number"&&Pi(r,a,g)&&(a=g=B),g=g===B?Rt:g>>>0,g?(r=Nt(r),r&&(typeof a=="string"||a!=null&&!ol(a))&&(a=Ma(a),!a&&nu(r))?zo(sa(r),0,g):r.split(a,g)):[]}var Ag=Gl(function(r,a,g){return r+(g?" ":"")+jp(a)});function hc(r,a,g){return r=Nt(r),g=g==null?0:Ml(Gt(g),0,r.length),a=Ma(a),r.slice(g,g+a.length)==a}function qs(r,a,g){var O=ye.templateSettings;g&&Pi(r,a,g)&&(a=B),r=Nt(r),a=br({},a,O,u);var ue=br({},a.imports,O.imports,u),Me=Ks(ue),dt=ff(ue,Me),Bt,nn,kn=0,Ln=a.interpolate||Ja,zn="__p += '",_r=Ch((a.escape||Ja).source+"|"+Ln.source+"|"+(Ln===go?ca:Ja).source+"|"+(a.evaluate||Ja).source+"|$","g"),Fr="//# sourceURL="+(ji.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rg+"]")+`
`;r.replace(_r,function(Qr,yi,Ci,to,ka,oo){return Ci||(Ci=to),zn+=r.slice(kn,oo).replace(fu,Qf),yi&&(Bt=!0,zn+=`' +
__e(`+yi+`) +
'`),ka&&(nn=!0,zn+=`';
`+ka+`;
__p += '`),Ci&&(zn+=`' +
((__t = (`+Ci+`)) == null ? '' : __t) +
'`),kn=oo+Qr.length,Qr}),zn+=`';
`;var Xr=ji.call(a,"variable")&&a.variable;if(!Xr)zn=`with (obj) {
`+zn+`
}
`;else if(Jo.test(Xr))throw new Tr(we);zn=(nn?zn.replace(Bn,""):zn).replace(Hn,"$1").replace(yr,"$1;"),zn="function("+(Xr||"obj")+`) {
`+(Xr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Bt?", __e = _.escape":"")+(nn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+zn+`return __p
}`;var ci=am(function(){return bi(Me,Fr+"return "+zn).apply(B,dt)});if(ci.source=zn,$r(ci))throw ci;return ci}function yv(r){return Nt(r).toLowerCase()}function wv(r){return Nt(r).toUpperCase()}function xv(r,a,g){if(r=Nt(r),r&&(g||a===B))return Kc(r);if(!r||!(a=Ma(a)))return r;var O=sa(r),ue=sa(a),Me=Xf(O,ue),dt=df(O,ue)+1;return zo(O,Me,dt).join("")}function _d(r,a,g){if(r=Nt(r),r&&(g||a===B))return r.slice(0,qc(r)+1);if(!r||!(a=Ma(a)))return r;var O=sa(r),ue=df(O,sa(a))+1;return zo(O,0,ue).join("")}function bv(r,a,g){if(r=Nt(r),r&&(g||a===B))return r.replace(Ha,"");if(!r||!(a=Ma(a)))return r;var O=sa(r),ue=Xf(O,sa(a));return zo(O,ue).join("")}function Sv(r,a){var g=Ue,O=Ut;if(qr(a)){var ue="separator"in a?a.separator:ue;g="length"in a?Gt(a.length):g,O="omission"in a?Ma(a.omission):O}r=Nt(r);var Me=r.length;if(nu(r)){var dt=sa(r);Me=dt.length}if(g>=Me)return r;var Bt=g-iu(O);if(Bt<1)return O;var nn=dt?zo(dt,0,Bt).join(""):r.slice(0,Bt);if(ue===B)return nn+O;if(dt&&(Bt+=nn.length-Bt),ol(ue)){if(r.slice(Bt).search(ue)){var kn,Ln=nn;for(ue.global||(ue=Ch(ue.source,Nt(Ql.exec(ue))+"g")),ue.lastIndex=0;kn=ue.exec(Ln);)var zn=kn.index;nn=nn.slice(0,zn===B?Bt:zn)}}else if(r.indexOf(Ma(ue),Bt)!=Bt){var _r=nn.lastIndexOf(ue);_r>-1&&(nn=nn.slice(0,_r))}return nn+O}function Cv(r){return r=Nt(r),r&&Ni.test(r)?r.replace(zr,vo):r}var Dv=Gl(function(r,a,g){return r+(g?" ":"")+a.toUpperCase()}),jp=Jd("toUpperCase");function zc(r,a,g){return r=Nt(r),a=g?B:a,a===B?xp(r)?_f(r):Cc(r):r.match(a)||[]}var am=fi(function(r,a){try{return Ba(r,B,a)}catch(g){return $r(g)?g:new Tr(g)}}),Av=Ae(function(r,a){return Wa(a,function(g){g=Ai(g),co(r,g,vi(r[g],r))}),r});function Ev(r){var a=r==null?0:r.length,g=Ie();return r=a?ts(r,function(O){if(typeof O[1]!="function")throw new Sa(me);return[g(O[0]),O[1]]}):[],fi(function(O){for(var ue=-1;++ue<a;){var Me=r[ue];if(Ba(Me[0],this,O))return Ba(Me[1],this,O)}})}function Tv(r){return Af(eo(r,Se))}function Vp(r){return function(){return r}}function Kh(r,a){return r==null||r!==r?a:r}var Mv=Mo(),Pv=Mo(!0);function Qa(r){return r}function Hp(r){return ih(typeof r=="function"?r:eo(r,Se))}function Ov(r){return ha(eo(r,Se))}function yd(r,a){return lu(r,eo(a,Se))}var kv=fi(function(r,a){return function(g){return Fo(g,r,a)}}),Iv=fi(function(r,a){return function(g){return Fo(r,g,a)}});function hu(r,a,g){var O=Ks(a),ue=ml(a,O);g==null&&!(qr(a)&&(ue.length||!O.length))&&(g=a,a=r,r=this,ue=ml(a,Ks(a)));var Me=!(qr(g)&&"chain"in g)||!!g.chain,dt=Si(r);return Wa(ue,function(Bt){var nn=a[Bt];r[Bt]=nn,dt&&(r.prototype[Bt]=function(){var kn=this.__chain__;if(Me||kn){var Ln=r(this.__wrapped__),zn=Ln.__actions__=Js(this.__actions__);return zn.push({func:nn,args:arguments,thisArg:r}),Ln.__chain__=kn,Ln}return nn.apply(r,el([this.value()],arguments))})}),r}function Lv(){return Ls._===this&&(Ls._=Qg),this}function Wp(){}function Bv(r){return r=Gt(r),fi(function(a){return Ao(a,r)})}var Rv=Yh(ts),Nv=Yh(Ld),Tm=Yh($f);function Eg(r){return ai(r)?Dc(Ai(r)):Tp(r)}function Fv(r){return function(a){return r==null?B:nl(r,a)}}var zv=ep(),om=ep(!0);function qh(){return[]}function Rf(){return!1}function Uv(){return{}}function Mm(){return""}function jv(){return!0}function Xh(r,a){if(r=Gt(r),r<1||r>zt)return[];var g=Rt,O=Qs(r,Rt);a=Ie(a),r-=Rt;for(var ue=bh(O,a);++g<r;)a(g);return ue}function lm(r){return ri(r)?ts(r,Ai):Gs(r)?[r]:Js(di(Nt(r)))}function wd(r){var a=++Xc;return Nt(r)+a}var fc=Bc(function(r,a){return r+a},0),Vv=e("ceil"),Pm=Bc(function(r,a){return r/a},1),Om=e("floor");function Gp(r){return r&&r.length?Zo(r,Qa,Du):B}function Nf(r,a){return r&&r.length?Zo(r,Ie(a,2),Du):B}function km(r){return qf(r,Qa)}function Hv(r,a){return qf(r,Ie(a,2))}function Tg(r){return r&&r.length?Zo(r,Qa,Ta):B}function Wv(r,a){return r&&r.length?Zo(r,Ie(a,2),Ta):B}var Im=Bc(function(r,a){return r*a},1),Bl=e("round"),um=Bc(function(r,a){return r-a},0);function Lm(r){return r&&r.length?hf(r,Qa):0}function hh(r,a){return r&&r.length?hf(r,Ie(a,2)):0}return ye.after=Un,ye.ary=rr,ye.assign=dn,ye.assignIn=Qn,ye.assignInWith=br,ye.assignWith=wr,ye.at=Yr,ye.before=Nr,ye.bind=vi,ye.bindAll=Av,ye.bindKey=xi,ye.castArray=ds,ye.chain=Po,ye.chunk=t,ye.compact=i,ye.concat=o,ye.cond=Ev,ye.conforms=Tv,ye.constant=Vp,ye.countBy=$a,ye.create=Es,ye.curry=Ri,ye.curryRight=Ui,ye.debounce=zs,ye.defaults=ra,ye.defaultsDeep=Xa,ye.defer=M,ye.delay=Z,ye.difference=h,ye.differenceBy=d,ye.differenceWith=v,ye.drop=D,ye.dropRight=A,ye.dropRightWhile=T,ye.dropWhile=P,ye.fill=F,ye.filter=Zs,ye.flatMap=gt,ye.flatMapDeep=jt,ye.flatMapDepth=wn,ye.flatten=R,ye.flattenDeep=J,ye.flattenDepth=Y,ye.flip=xe,ye.flow=Mv,ye.flowRight=Pv,ye.fromPairs=ie,ye.functions=av,ye.functionsIn=ov,ye.groupBy=f,ye.initial=I,ye.intersection=G,ye.intersectionBy=te,ye.intersectionWith=pe,ye.invert=vg,ye.invertBy=Cm,ye.invokeMap=N,ye.iteratee=Hp,ye.keyBy=ge,ye.keys=Ks,ye.keysIn=Ua,ye.map=Oe,ye.mapKeys=yg,ye.mapValues=Dm,ye.matches=Ov,ye.matchesProperty=yd,ye.memoize=Re,ye.merge=Bp,ye.mergeWith=$h,ye.method=kv,ye.methodOf=Iv,ye.mixin=hu,ye.negate=vt,ye.nthArg=Bv,ye.omit=wg,ye.omitBy=lv,ye.once=Ct,ye.orderBy=Ht,ye.over=Rv,ye.overArgs=It,ye.overEvery=Nv,ye.overSome=Tm,ye.partial=Pn,ye.partialRight=xn,ye.partition=Sn,ye.pick=uv,ye.pickBy=nm,ye.property=Eg,ye.propertyOf=Fv,ye.pull=ft,ye.pullAll=Ze,ye.pullAllBy=yt,ye.pullAllWith=Et,ye.pullAt=Yt,ye.range=zv,ye.rangeRight=om,ye.rearg=Wn,ye.reject=Dr,ye.remove=qt,ye.rest=Cr,ye.reverse=ln,ye.sampleSize=Ur,ye.set=bg,ye.setWith=rm,ye.shuffle=pi,ye.slice=In,ye.sortBy=xa,ye.sortedUniq=cr,ye.sortedUniqBy=mr,ye.split=np,ye.spread=kr,ye.tail=Rr,ye.take=Lr,ye.takeRight=Ir,ye.takeRightWhile=ti,ye.takeWhile=Wr,ye.tap=il,ye.throttle=hr,ye.thru=Oo,ye.toArray=fr,ye.toPairs=im,ye.toPairsIn=Sg,ye.toPath=lm,ye.toPlainObject=ke,ye.transform=cv,ye.unary=Gr,ye.union=ls,ye.unionBy=Vr,ye.unionWith=$i,ye.uniq=Qi,ye.uniqBy=Oi,ye.uniqWith=Bi,ye.unset=hv,ye.unzip=ys,ye.unzipWith=ns,ye.update=ll,ye.updateWith=Kl,ye.values=Fc,ye.valuesIn=fv,ye.without=As,ye.words=zc,ye.wrap=_i,ye.xor=rs,ye.xorBy=Ji,ye.xorWith=Fs,ye.zip=Is,ye.zipObject=Ws,ye.zipObjectDeep=Ca,ye.zipWith=ta,ye.entries=im,ye.entriesIn=Sg,ye.extend=Qn,ye.extendWith=br,hu(ye,ye),ye.add=fc,ye.attempt=am,ye.camelCase=Rp,ye.capitalize=Np,ye.ceil=Vv,ye.clamp=Am,ye.clone=us,ye.cloneDeep=Ka,ye.cloneDeepWith=za,ye.cloneWith=So,ye.conformsTo=is,ye.deburr=Bf,ye.defaultTo=Kh,ye.divide=Pm,ye.endsWith=Fp,ye.eq=Li,ye.escape=zp,ye.escapeRegExp=Cg,ye.every=oa,ye.find=_,ye.findIndex=V,ye.findKey=ao,ye.findLast=he,ye.findLastIndex=z,ye.findLastKey=cu,ye.floor=Om,ye.forEach=nr,ye.forEachRight=l,ye.forIn=ws,ye.forInRight=sv,ye.forOwn=Sm,ye.forOwnRight=gg,ye.get=Lp,ye.gt=ko,ye.gte=Ms,ye.has=mg,ye.hasIn=cc,ye.head=j,ye.identity=Qa,ye.includes=x,ye.indexOf=X,ye.inRange=dv,ye.invoke=_g,ye.isArguments=ps,ye.isArray=ri,ye.isArrayBuffer=Yl,ye.isArrayLike=es,ye.isArrayLikeObject=qi,ye.isBoolean=Xo,ye.isBuffer=ii,ye.isDate=_l,ye.isElement=Io,ye.isEmpty=Gu,ye.isEqual=gs,ye.isEqualWith=Da,ye.isError=$r,ye.isFinite=Yu,ye.isFunction=Si,ye.isInteger=bs,ye.isLength=Pa,ye.isMap=uu,ye.isMatch=vd,ye.isMatchWith=lc,ye.isNaN=yl,ye.isNative=Oa,ye.isNil=wl,ye.isNull=Lo,ye.isNumber=xl,ye.isObject=qr,ye.isObjectLike=Ei,ye.isPlainObject=qa,ye.isRegExp=ol,ye.isSafeInteger=Us,ye.isSet=Zu,ye.isString=Zl,ye.isSymbol=Gs,ye.isTypedArray=la,ye.isUndefined=uc,ye.isWeakMap=Zh,ye.isWeakSet=$l,ye.join=oe,ye.kebabCase=tp,ye.last=Ee,ye.lastIndexOf=$e,ye.lowerCase=pv,ye.lowerFirst=gv,ye.lt=gn,ye.lte=jn,ye.max=Gp,ye.maxBy=Nf,ye.mean=km,ye.meanBy=Hv,ye.min=Tg,ye.minBy=Wv,ye.stubArray=qh,ye.stubFalse=Rf,ye.stubObject=Uv,ye.stubString=Mm,ye.stubTrue=jv,ye.multiply=Im,ye.nth=Xe,ye.noConflict=Lv,ye.noop=Wp,ye.now=Xn,ye.pad=mv,ye.padEnd=vv,ye.padStart=_v,ye.parseInt=Dg,ye.random=sm,ye.reduce=Rn,ye.reduceRight=dr,ye.repeat=Up,ye.replace=Em,ye.result=xg,ye.round=Bl,ye.runInContext=Xt,ye.sample=Pr,ye.size=mi,ye.snakeCase=on,ye.some=gi,ye.sortedIndex=Zn,ye.sortedIndexBy=Kn,ye.sortedIndexOf=ur,ye.sortedLastIndex=yn,ye.sortedLastIndexBy=An,ye.sortedLastIndexOf=qn,ye.startCase=Ag,ye.startsWith=hc,ye.subtract=um,ye.sum=Lm,ye.sumBy=hh,ye.template=qs,ye.times=Xh,ye.toFinite=sr,ye.toInteger=Gt,ye.toLength=Nn,ye.toLower=yv,ye.toNumber=En,ye.toSafeInteger=et,ye.toString=Nt,ye.toUpper=wv,ye.trim=xv,ye.trimEnd=_d,ye.trimStart=bv,ye.truncate=Sv,ye.unescape=Cv,ye.uniqueId=wd,ye.upperCase=Dv,ye.upperFirst=jp,ye.each=nr,ye.eachRight=l,ye.first=j,hu(ye,function(){var r={};return yo(ye,function(a,g){ji.call(ye.prototype,g)||(r[g]=a)}),r}(),{chain:!1}),ye.VERSION=Fe,Wa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){ye[r].placeholder=ye}),Wa(["drop","take"],function(r,a){hi.prototype[r]=function(g){g=g===B?1:ks(Gt(g),0);var O=this.__filtered__&&!a?new hi(this):this.clone();return O.__filtered__?O.__takeCount__=Qs(g,O.__takeCount__):O.__views__.push({size:Qs(g,Rt),type:r+(O.__dir__<0?"Right":"")}),O},hi.prototype[r+"Right"]=function(g){return this.reverse()[r](g).reverse()}}),Wa(["filter","map","takeWhile"],function(r,a){var g=a+1,O=g==$t||g==lt;hi.prototype[r]=function(ue){var Me=this.clone();return Me.__iteratees__.push({iteratee:Ie(ue,3),type:g}),Me.__filtered__=Me.__filtered__||O,Me}}),Wa(["head","last"],function(r,a){var g="take"+(a?"Right":"");hi.prototype[r]=function(){return this[g](1).value()[0]}}),Wa(["initial","tail"],function(r,a){var g="drop"+(a?"":"Right");hi.prototype[r]=function(){return this.__filtered__?new hi(this):this[g](1)}}),hi.prototype.compact=function(){return this.filter(Qa)},hi.prototype.find=function(r){return this.filter(r).head()},hi.prototype.findLast=function(r){return this.reverse().find(r)},hi.prototype.invokeMap=fi(function(r,a){return typeof r=="function"?new hi(this):this.map(function(g){return Fo(g,r,a)})}),hi.prototype.reject=function(r){return this.filter(vt(Ie(r)))},hi.prototype.slice=function(r,a){r=Gt(r);var g=this;return g.__filtered__&&(r>0||a<0)?new hi(g):(r<0?g=g.takeRight(-r):r&&(g=g.drop(r)),a!==B&&(a=Gt(a),g=a<0?g.dropRight(-a):g.take(a-r)),g)},hi.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},hi.prototype.toArray=function(){return this.take(Rt)},yo(hi.prototype,function(r,a){var g=/^(?:filter|find|map|reject)|While$/.test(a),O=/^(?:head|last)$/.test(a),ue=ye[O?"take"+(a=="last"?"Right":""):a],Me=O||/^find/.test(a);ue&&(ye.prototype[a]=function(){var dt=this.__wrapped__,Bt=O?[1]:arguments,nn=dt instanceof hi,kn=Bt[0],Ln=nn||ri(dt),zn=function(yi){var Ci=ue.apply(ye,el([yi],Bt));return O&&_r?Ci[0]:Ci};Ln&&g&&typeof kn=="function"&&kn.length!=1&&(nn=Ln=!1);var _r=this.__chain__,Fr=!!this.__actions__.length,Xr=Me&&!_r,ci=nn&&!Fr;if(!Me&&Ln){dt=ci?dt:new hi(this);var Qr=r.apply(dt,Bt);return Qr.__actions__.push({func:Oo,args:[zn],thisArg:B}),new Bs(Qr,_r)}return Xr&&ci?r.apply(this,Bt):(Qr=this.thru(zn),Xr?O?Qr.value()[0]:Qr.value():Qr)})}),Wa(["pop","push","shift","sort","splice","unshift"],function(r){var a=su[r],g=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",O=/^(?:pop|shift)$/.test(r);ye.prototype[r]=function(){var ue=arguments;if(O&&!this.__chain__){var Me=this.value();return a.apply(ri(Me)?Me:[],ue)}return this[g](function(dt){return a.apply(ri(dt)?dt:[],ue)})}}),yo(hi.prototype,function(r,a){var g=ye[a];if(g){var O=g.name+"";ji.call(Fu,O)||(Fu[O]=[]),Fu[O].push({name:a,func:g})}}),Fu[Lc(B,Ne).name]=[{name:"wrapper",func:B}],hi.prototype.clone=Ph,hi.prototype.reverse=Al,hi.prototype.value=Oh,ye.prototype.at=sl,ye.prototype.chain=Ya,ye.prototype.commit=al,ye.prototype.next=Vi,ye.prototype.plant=po,ye.prototype.reverse=Za,ye.prototype.toJSON=ye.prototype.valueOf=ye.prototype.value=ga,ye.prototype.first=ye.prototype.head,ou&&(ye.prototype[ou]=Ll),ye},Ii=Nd();Ls._=Ii,se=(function(){return Ii}).call(be,K,be,je),se!==B&&(je.exports=se)}).call(this)},react:je=>{je.exports=L},"styled-components":je=>{je.exports=le},"?4f7e":()=>{},"./node_modules/@zakeke/zakeke-3d-core/dist/index.js":(je,be,K)=>{K.r(be),K.d(be,{AndroidAR:()=>gl,AxesLayer:()=>cs,BlendProceduralTexture:()=>yu,BlurXProceduralTexture:()=>ki,BlurYProceduralTexture:()=>su,BroadcastChannelEventType:()=>rl,DAMViewerAnalyticsEventType:()=>Oc,Database:()=>nl,DefaultAssetUrls:()=>Ii,DracoCompression:()=>kh,EditingMode:()=>B,EditorMeshType:()=>Rc,ElementSelector:()=>Th,EnvironmentManager:()=>Ih,EnvironmentMode:()=>se,EventState:()=>Ef,ForegroundBackgroundProceduralTexture:()=>au,GlowManager:()=>ug,IS_ANDROID:()=>jd,IS_IOS:()=>Ga,IncrementalFiles:()=>Wo,InfoPointsManager:()=>_o,InnerShadow:()=>rc,LightsLayer:()=>Cu,MaterialEditor:()=>md,MaterialGroup:()=>Lc,MaterialPreviewData:()=>td,MaterialsPreview:()=>tl,MeshDesignManager:()=>Tl,MeshExpander:()=>Dn,MeshLocationsManager:()=>Qs,MoveProceduralTexture:()=>vu,MultiObserver:()=>Pl,MultiplyProceduralTexture:()=>_u,NormalMapProceduralTexture:()=>Nu,Observable:()=>ml,Observer:()=>yo,OpacityProceduralTexture:()=>wf,OuterShadow:()=>uo,OverlayProceduralTexture:()=>xf,Preview3DConfigurationManager:()=>zu,ProceduralNormalMap:()=>rh,SceneActionsExecutor:()=>ks,SceneDesignManager:()=>Vl,SceneEditor:()=>Yh,SceneHelper:()=>Tr,SceneToBlobs:()=>Bh,SceneViewer:()=>Mo,SourceTaskStatus:()=>gd,StringTools:()=>Xt,TryOnFineTuningMazingEnvironment:()=>Wd,TryOnProvider:()=>sd,TryOnSettingsType:()=>Zo,TryOnType:()=>Rh,UsdzHelper:()=>vn,WorkerPool:()=>Fd,ZakekeEnvironment:()=>Fe,arrayContains:()=>wa,changeColorLuminosity:()=>Ph,chunkString:()=>Ud,cropImageTransparency:()=>Al,cropImageTransparencyAsync:()=>cg,dataURItoBlob:()=>Ap,debounce:()=>ic,defaultSceneConfig:()=>Nc,flipImage:()=>Cf,getAbsoluteUrl:()=>hg,getColorBrightness:()=>Bs,getColorImage:()=>Mc,getContrastYIQ:()=>ye,getContrastYIQHex:()=>Yo,getNavigatorQueryParams:()=>Do,getRandomString:()=>nh,getStringHashCode:()=>No,getViewport:()=>Ea,isAndroid:()=>Cp,isColorDark:()=>hi,isIPhoneX:()=>zd,isMobile:()=>pl,isPBRMaterial:()=>nc,isiOS:()=>xu,removeBlanks:()=>Sf,resizeImageFromDataUri:()=>Dp,trimCanvas:()=>El,trimImageAsync:()=>Oh}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(y){if(this==null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof y!="function")throw new TypeError("predicate must be a function");for(var e=Object(this),n=e.length>>>0,s=arguments[1],c=0;c!==n;c++)if(y.call(s,this[c],c,e))return this[c]}}),Array.prototype.includes||(Array.prototype.includes=function(y){if(this==null)throw new TypeError("Array.prototype.includes called on null or undefined");var e=Object(this),n=parseInt(e.length,10)||0;if(n===0)return!1;var s=parseInt(arguments[1],10)||0,c;s>=0?c=s:(c=n+s,c<0&&(c=0));for(var u;c<n;){if(u=e[c],y===u||y!==y&&u!==u)return!0;c++}return!1}),Array.prototype.map||(Array.prototype.map=function(y){var e,n,s;if(this==null)throw new TypeError("this is null or not defined");var c=Object(this),u=c.length>>>0;if(typeof y!="function")throw new TypeError(y+" is not a function");for(arguments.length>1&&(e=arguments[1]),n=new Array(u),s=0;s<u;){var m,b;s in c&&(m=c[s],b=y.call(e,m,s,c),n[s]=b),s++}return n}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(y,e){var n=e>0?e|0:0;return this.substring(n,n+y.length)===y}}),String.prototype.endsWith||(String.prototype.endsWith=function(y,e){return(e===void 0||e>this.length)&&(e=this.length),this.substring(e-y.length,e)===y});var se=(y=>(y[y.Editor=1]="Editor",y[y.Viewer=2]="Viewer",y))(se||{}),B=(y=>(y.None="None",y.Translate="Translate",y.Rotate="Rotate",y.Scaling="Scaling",y))(B||{}),Fe=(y=>(y[y.Customizer=1]="Customizer",y[y.Composer=2]="Composer",y[y.Viewer=3]="Viewer",y))(Fe||{}),Be=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var y=0,e=arguments.length;e--;)y+=arguments[e]*arguments[e];return Math.sqrt(y)});function ce(){var y=new Be(3);return Be!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y}function me(y){var e=y[0],n=y[1],s=y[2];return Math.hypot(e,n,s)}(function(){var y=ce();return function(e,n,s,c,u,m){var b,k;for(n||(n=3),s||(s=0),c?k=Math.min(c*n+s,e.length):k=e.length,b=s;b<k;b+=n)y[0]=e[b],y[1]=e[b+1],y[2]=e[b+2],u(y,y,m),e[b]=y[0],e[b+1]=y[1],e[b+2]=y[2];return e}})();function we(y){var e=y[0],n=y[1],s=y[2],c=y[3],u=y[4],m=y[5],b=y[6],k=y[7],W=y[8],ve=y[9],Ae=y[10],rt=y[11],re=y[12],mt=y[13],nt=y[14],tn=y[15],Ie=e*m-n*u,Kt=e*b-s*u,At=e*k-c*u,an=n*b-s*m,Cn=n*k-c*m,He=s*k-c*b,_e=W*mt-ve*re,Sr=W*nt-Ae*re,On=W*tn-rt*re,Kr=ve*nt-Ae*mt,Mi=ve*tn-rt*mt,ei=Ae*tn-rt*nt;return Ie*ei-Kt*Mi+At*Kr+an*On-Cn*Sr+He*_e}function ae(y,e,n){var s=e[0],c=e[1],u=e[2],m=e[3],b=e[4],k=e[5],W=e[6],ve=e[7],Ae=e[8],rt=e[9],re=e[10],mt=e[11],nt=e[12],tn=e[13],Ie=e[14],Kt=e[15],At=n[0],an=n[1],Cn=n[2],He=n[3];return y[0]=At*s+an*b+Cn*Ae+He*nt,y[1]=At*c+an*k+Cn*rt+He*tn,y[2]=At*u+an*W+Cn*re+He*Ie,y[3]=At*m+an*ve+Cn*mt+He*Kt,At=n[4],an=n[5],Cn=n[6],He=n[7],y[4]=At*s+an*b+Cn*Ae+He*nt,y[5]=At*c+an*k+Cn*rt+He*tn,y[6]=At*u+an*W+Cn*re+He*Ie,y[7]=At*m+an*ve+Cn*mt+He*Kt,At=n[8],an=n[9],Cn=n[10],He=n[11],y[8]=At*s+an*b+Cn*Ae+He*nt,y[9]=At*c+an*k+Cn*rt+He*tn,y[10]=At*u+an*W+Cn*re+He*Ie,y[11]=At*m+an*ve+Cn*mt+He*Kt,At=n[12],an=n[13],Cn=n[14],He=n[15],y[12]=At*s+an*b+Cn*Ae+He*nt,y[13]=At*c+an*k+Cn*rt+He*tn,y[14]=At*u+an*W+Cn*re+He*Ie,y[15]=At*m+an*ve+Cn*mt+He*Kt,y}function De(y,e){var n=e[0],s=e[1],c=e[2],u=e[4],m=e[5],b=e[6],k=e[8],W=e[9],ve=e[10];return y[0]=Math.hypot(n,s,c),y[1]=Math.hypot(u,m,b),y[2]=Math.hypot(k,W,ve),y}function Pe(y,e){var n=new Be(3);De(n,e);var s=1/n[0],c=1/n[1],u=1/n[2],m=e[0]*s,b=e[1]*c,k=e[2]*u,W=e[4]*s,ve=e[5]*c,Ae=e[6]*u,rt=e[8]*s,re=e[9]*c,mt=e[10]*u,nt=m+ve+mt,tn=0;return nt>0?(tn=Math.sqrt(nt+1)*2,y[3]=.25*tn,y[0]=(Ae-re)/tn,y[1]=(rt-k)/tn,y[2]=(b-W)/tn):m>ve&&m>mt?(tn=Math.sqrt(1+m-ve-mt)*2,y[3]=(Ae-re)/tn,y[0]=.25*tn,y[1]=(b+W)/tn,y[2]=(rt+k)/tn):ve>mt?(tn=Math.sqrt(1+ve-m-mt)*2,y[3]=(rt-k)/tn,y[0]=(b+W)/tn,y[1]=.25*tn,y[2]=(Ae+re)/tn):(tn=Math.sqrt(1+mt-m-ve)*2,y[3]=(b-W)/tn,y[0]=(rt+k)/tn,y[1]=(Ae+re)/tn,y[2]=.25*tn),y}var Se,ee,Qe,wt;function Dt(y,e,n,s){var c,u=arguments.length,m=u<3?e:s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(y,e,n,s);else for(var b=y.length-1;b>=0;b--)(c=y[b])&&(m=(u<3?c(m):u>3?c(e,n,m):c(e,n))||m);return u>3&&m&&Object.defineProperty(e,n,m),m}(function(y){y.ACCESSOR="Accessor",y.ANIMATION="Animation",y.ANIMATION_CHANNEL="AnimationChannel",y.ANIMATION_SAMPLER="AnimationSampler",y.BUFFER="Buffer",y.CAMERA="Camera",y.MATERIAL="Material",y.MESH="Mesh",y.PRIMITIVE="Primitive",y.PRIMITIVE_TARGET="PrimitiveTarget",y.NODE="Node",y.ROOT="Root",y.SCENE="Scene",y.SKIN="Skin",y.TEXTURE="Texture",y.TEXTURE_INFO="TextureInfo"})(Se||(Se={})),function(y){y.INTERLEAVED="interleaved",y.SEPARATE="separate"}(ee||(ee={})),function(y){y[y.R=4096]="R",y[y.G=256]="G",y[y.B=16]="B",y[y.A=1]="A"}(Qe||(Qe={})),function(y){y.GLTF="GLTF",y.GLB="GLB"}(wt||(wt={}));class at{constructor(e,n,s){if(this.t=void 0,this.i=void 0,this.h=void 0,this.o=!1,this.u=[],this.t=e,this.i=n,this.h=s,!n.canLink(s))throw new Error("Cannot link disconnected graphs/documents.")}getName(){return this.t}getParent(){return this.i}getChild(){return this.h}setChild(e){return this.h=e,this}dispose(){this.o||(this.o=!0,this.u.forEach(e=>e()),this.u.length=0)}onDispose(e){return this.u.push(e),this}isDisposed(){return this.o}}class Ne{constructor(){this.l=new Set,this.p=new Set,this.g=new Map,this.v=new Map,this.u={}}on(e,n){return this.u[e]=this.u[e]||[],this.u[e].push(n),this}emit(e,n){for(const s of this.u[e]||[])s(n);return this}getLinks(){return Array.from(this.p)}listParentLinks(e){return Array.from(this.v.get(e)||this.l)}listParents(e){return this.listParentLinks(e).map(n=>n.getParent())}listChildLinks(e){return Array.from(this.g.get(e)||this.l)}listChildren(e){return this.listChildLinks(e).map(n=>n.getChild())}disconnectChildren(e){return(this.g.get(e)||this.l).forEach(n=>n.dispose()),this}disconnectParents(e,n){let s=Array.from(this.v.get(e)||this.l);return n&&(s=s.filter(c=>n(c.getParent()))),s.forEach(c=>c.dispose()),this}swapChild(e,n,s){const c=this.g.get(e)||this.l;return Array.from(c).filter(u=>u.getChild()===n).forEach(u=>{this.v.get(n).delete(u),u.setChild(s),this.v.has(s)||this.v.set(s,new Set),this.v.get(s).add(u)}),this}link(e,n,s){if(!s)return null;const c=new at(e,n,s);return this.registerLink(c),c}registerLink(e){this.p.add(e);const n=e.getParent();this.g.has(n)||this.g.set(n,new Set),this.g.get(n).add(e);const s=e.getChild();return this.v.has(s)||this.v.set(s,new Set),this.v.get(s).add(e),e.onDispose(()=>this.unlink(e)),e}unlink(e){return this.p.delete(e),this.g.get(e.getParent()).delete(e),this.v.get(e.getChild()).delete(e),this}}function Je(y,e){Object.defineProperty(y,e,{get:function(){return this["__"+e]},set:function(n){const s=this["__"+e];s&&!Array.isArray(s)&&s.dispose(),n&&!Array.isArray(n)&&n.onDispose(()=>{this["__"+e]=null}),this["__"+e]=n},enumerable:!0})}function pt(y,e){}class ot{static createBufferFromDataURI(e){if(typeof Buffer>"u"){const n=atob(e.split(",")[1]),s=new Uint8Array(n.length);for(let c=0;c<n.length;c++)s[c]=n.charCodeAt(c);return s.buffer}{const n=e.split(",")[1],s=e.indexOf("base64")>=0;return this.trim(Buffer.from(n,s?"base64":"utf8"))}}static encodeText(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e).buffer:this.trim(Buffer.from(e))}static decodeText(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Buffer.from(e).toString("utf8")}static trim(e){const{byteOffset:n,byteLength:s}=e;return e.buffer.slice(n,n+s)}static concat(e){let n=0;for(const u of e)n+=u.byteLength;const s=new Uint8Array(n);let c=0;for(const u of e)s.set(new Uint8Array(u),c),c+=u.byteLength;return s.buffer}static pad(e,n=0){const s=this.padNumber(e.byteLength);if(s!==e.byteLength){const c=new Uint8Array(s);if(c.set(new Uint8Array(e)),n!==0)for(let u=e.byteLength;u<s;u++)c[u]=n;return c.buffer}return e}static padNumber(e){return 4*Math.ceil(e/4)}static equals(e,n){if(e===n)return!0;if(e.byteLength!==n.byteLength)return!1;const s=new DataView(e),c=new DataView(n);let u=e.byteLength;for(;u--;)if(s.getUint8(u)!==c.getUint8(u))return!1;return!0}}class Jt{static hexToFactor(e,n){e=Math.floor(e);const s=n;return s[0]=(e>>16&255)/255,s[1]=(e>>8&255)/255,s[2]=(255&e)/255,this.convertSRGBToLinear(n,n)}static factorToHex(e){const n=[...e],[s,c,u]=this.convertLinearToSRGB(e,n);return 255*s<<16^255*c<<8^255*u<<0}static convertSRGBToLinear(e,n){const s=e,c=n;for(let u=0;u<3;u++)c[u]=s[u]<.04045?.0773993808*s[u]:Math.pow(.9478672986*s[u]+.0521327014,2.4);return n}static convertLinearToSRGB(e,n){const s=e,c=n;for(let u=0;u<3;u++)c[u]=s[u]<.0031308?12.92*s[u]:1.055*Math.pow(s[u],.41666)-.055;return n}}class Qt{static basename(e){const n=e.split(/[\\/]/).pop();return n.substr(0,n.lastIndexOf("."))}static extension(e){return e.indexOf("data:")!==0?e.split(/[\\/]/).pop().split(/[.]/).pop():e.indexOf("data:image/png")===0?"png":e.indexOf("data:image/jpeg")===0?"jpeg":"bin"}}class ut{match(e){const n=new Uint8Array(e);return n.length>=8&&n[0]===137&&n[1]===80&&n[2]===78&&n[3]===71&&n[4]===13&&n[5]===10&&n[6]===26&&n[7]===10}getSize(e){const n=new DataView(e);return ot.decodeText(e.slice(12,16))===ut.PNG_FRIED_CHUNK_NAME?[n.getUint32(32,!1),n.getUint32(36,!1)]:[n.getUint32(16,!1),n.getUint32(20,!1)]}getChannels(e){return 4}}ut.PNG_FRIED_CHUNK_NAME="CgBI";class St{static registerFormat(e,n){this.impls[e]=n}static getMimeType(e){for(const n in this.impls)if(this.impls[n].match(e))return n;return null}static getSize(e,n){return this.impls[n]?this.impls[n].getSize(e):null}static getChannels(e,n){return this.impls[n]?this.impls[n].getChannels(e):null}static getMemSize(e,n){if(!this.impls[n])return null;if(this.impls[n].getGPUByteLength)return this.impls[n].getGPUByteLength(e);let s=0;const c=this.getSize(e,n);if(!c)return null;for(;c[0]>1||c[1]>1;)s+=c[0]*c[1]*4,c[0]=Math.max(Math.floor(c[0]/2),1),c[1]=Math.max(Math.floor(c[1]/2),1);return s+=4,s}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":`image/${e}`}}function Lt(y,e){if(e>y.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(y.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return y}St.impls={"image/jpeg":new class{match(y){const e=new Uint8Array(y);return e.length>=3&&e[0]===255&&e[1]===216&&e[2]===255}getSize(y){let e,n,s=new DataView(y,4);for(;s.byteLength;){if(e=s.getUint16(0,!1),Lt(s,e),n=s.getUint8(e+1),n===192||n===193||n===194)return[s.getUint16(e+7,!1),s.getUint16(e+5,!1)];s=new DataView(y,s.byteOffset+e+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(y){return 3}},"image/png":new ut};class Ue{static identity(e){return e}static eq(e,n){if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(Math.abs(e[s]-n[s])>1e-5)return!1;return!0}static denormalize(e,n){switch(n){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static normalize(e,n){switch(n){case 5126:return e;case 5123:return Math.round(65535*e);case 5121:return Math.round(255*e);case 5122:return Math.round(32767*e);case 5120:return Math.round(127*e);default:throw new Error("Invalid component type.")}}static decompose(e,n,s,c){let u=me([e[0],e[1],e[2]]);const m=me([e[4],e[5],e[6]]),b=me([e[8],e[9],e[10]]);we(e)<0&&(u=-u),n[0]=e[12],n[1]=e[13],n[2]=e[14];const k=e.slice(),W=1/u,ve=1/m,Ae=1/b;k[0]*=W,k[1]*=W,k[2]*=W,k[4]*=ve,k[5]*=ve,k[6]*=ve,k[8]*=Ae,k[9]*=Ae,k[10]*=Ae,Pe(s,k),c[0]=u,c[1]=m,c[2]=b}static compose(e,n,s,c){const u=c,m=n[0],b=n[1],k=n[2],W=n[3],ve=m+m,Ae=b+b,rt=k+k,re=m*ve,mt=m*Ae,nt=m*rt,tn=b*Ae,Ie=b*rt,Kt=k*rt,At=W*ve,an=W*Ae,Cn=W*rt,He=s[0],_e=s[1],Sr=s[2];return u[0]=(1-(tn+Kt))*He,u[1]=(mt+Cn)*He,u[2]=(nt-an)*He,u[3]=0,u[4]=(mt-Cn)*_e,u[5]=(1-(re+Kt))*_e,u[6]=(Ie+At)*_e,u[7]=0,u[8]=(nt+an)*Sr,u[9]=(Ie-At)*Sr,u[10]=(1-(re+tn))*Sr,u[11]=0,u[12]=e[0],u[13]=e[1],u[14]=e[2],u[15]=1,u}}class Ut{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=Ut.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=Ut.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=Ut.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=Ut.Verbosity.ERROR&&console.error(e)}}Ut.Verbosity={SILENT:4,ERROR:3,WARN:2,INFO:1,DEBUG:0},Ut.DEFAULT_INSTANCE=new Ut(Ut.Verbosity.INFO);const Ot="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",rn=new Set,$t=function(){let y="";for(let e=0;e<6;e++)y+=Ot.charAt(Math.floor(Math.random()*Ot.length));return y},sn=function(){for(let y=0;y<999;y++){const e=$t();if(!rn.has(e))return rn.add(e),e}return""},lt=y=>y;class Zt extends class{constructor(e){this.graph=void 0,this.o=!1,this.graph=e,this.graph=e}canLink(e){return this.graph===e.graph}isDisposed(){return this.o}dispose(){this.graph.disconnectChildren(this),this.graph.disconnectParents(this),this.o=!0,this.graph.emit("dispose",this)}detach(){return this.graph.disconnectParents(this),this}swap(e,n){return this.graph.swapChild(this,e,n),this}addGraphChild(e,n){return e.push(n),n.onDispose(()=>{const s=e.filter(c=>c!==n);e.length=0;for(const c of s)e.push(c)}),this}removeGraphChild(e,n){return e.filter(s=>s.getChild()===n).forEach(s=>s.dispose()),this}clearGraphChildList(e){for(;e.length>0;)e[0].dispose();return this}listGraphParents(){return this.graph.listParents(this)}}{constructor(e,n=""){super(e),this.graph=void 0,this.m={},this.t="",this.graph=e,this.t=n}getName(){return this.t}setName(e){return this.t=e,this}getExtras(){return this.m}setExtras(e){return this.m=e,this}clone(){const e=new this.constructor(this.graph).copy(this,lt);return this.graph.emit("clone",e),e}copy(e,n=lt){return this.t=e.t,this.m=JSON.parse(JSON.stringify(e.m)),this}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.listGraphParents()}}const zt="Pass extension name (string) as lookup token, not a constructor.";class Le extends Zt{constructor(...e){super(...e),this.extensions=[]}copy(e,n=lt){return super.copy(e,n),this.clearGraphChildList(this.extensions),e.extensions.forEach(s=>{const c=s.getChild();this.setExtension(c.extensionName,n(c))}),this}getExtension(e){if(typeof e!="string")throw new Error(zt);const n=this.extensions.find(s=>s.getChild().extensionName===e);return n?n.getChild():null}setExtension(e,n){if(typeof e!="string")throw new Error(zt);const s=this.getExtension(e);return s&&this.removeGraphChild(this.extensions,s),n?(n.T(this),this.addGraphChild(this.extensions,this.graph.link(e,this,n))):this}listExtensions(){return this.extensions.map(e=>e.getChild())}}Dt([pt],Le.prototype,"extensions",void 0);class Mt extends Le{constructor(...e){super(...e),this.propertyType=Se.ACCESSOR,this.S=null,this.M=Mt.Type.SCALAR,this.I=Mt.ComponentType.FLOAT,this.N=!1,this.C=Ue.identity,this.O=Ue.identity,this.buffer=null}copy(e,n=lt){return super.copy(e,n),this.M=e.M,this.I=e.I,this.N=e.N,this.C=e.C,this.O=e.O,e.S&&(this.S=e.S.slice()),this.setBuffer(e.buffer?n(e.buffer.getChild()):null),this}static getElementSize(e){switch(e){case Mt.Type.SCALAR:return 1;case Mt.Type.VEC2:return 2;case Mt.Type.VEC3:return 3;case Mt.Type.VEC4:case Mt.Type.MAT2:return 4;case Mt.Type.MAT3:return 9;case Mt.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case Mt.ComponentType.BYTE:case Mt.ComponentType.UNSIGNED_BYTE:return 1;case Mt.ComponentType.SHORT:case Mt.ComponentType.UNSIGNED_SHORT:return 2;case Mt.ComponentType.UNSIGNED_INT:case Mt.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const n=this.getElementSize();this.getMin(e);for(let s=0;s<n;s++)e[s]=this.O(e[s]);return e}getMin(e){const n=this.getCount(),s=this.getElementSize();for(let c=0;c<s;c++)e[c]=1/0;for(let c=0;c<n*s;c+=s)for(let u=0;u<s;u++){const m=this.S[c+u];Number.isFinite(m)&&(e[u]=Math.min(e[u],m))}return e}getMaxNormalized(e){const n=this.getElementSize();this.getMax(e);for(let s=0;s<n;s++)e[s]=this.O(e[s]);return e}getMax(e){const n=this.getCount(),s=this.getElementSize();for(let c=0;c<s;c++)e[c]=-1/0;for(let c=0;c<n*s;c+=s)for(let u=0;u<s;u++){const m=this.S[c+u];Number.isFinite(m)&&(e[u]=Math.max(e[u],m))}return e}getCount(){return this.S?this.S.length/this.getElementSize():0}getType(){return this.M}setType(e){return this.M=e,this}getElementSize(){return Mt.getElementSize(this.M)}getComponentSize(){return this.S.BYTES_PER_ELEMENT}getComponentType(){return this.I}getNormalized(){return this.N}setNormalized(e){return this.N=e,e?(this.O=n=>Ue.denormalize(n,this.I),this.C=n=>Ue.normalize(n,this.I)):(this.O=Ue.identity,this.C=Ue.identity),this}getScalar(e){const n=this.getElementSize();return this.O(this.S[e*n])}setScalar(e,n){return this.S[e*this.getElementSize()]=this.C(n),this}getElement(e,n){const s=this.getElementSize();for(let c=0;c<s;c++)n[c]=this.O(this.S[e*s+c]);return n}setElement(e,n){const s=this.getElementSize();for(let c=0;c<s;c++)this.S[e*s+c]=this.C(n[c]);return this}getBuffer(){return this.buffer?this.buffer.getChild():null}setBuffer(e){return this.buffer=this.graph.link("buffer",this,e),this}getArray(){return this.S}setArray(e){return this.I=e?function(n){switch(n.constructor){case Float32Array:return Mt.ComponentType.FLOAT;case Uint32Array:return Mt.ComponentType.UNSIGNED_INT;case Uint16Array:return Mt.ComponentType.UNSIGNED_SHORT;case Uint8Array:return Mt.ComponentType.UNSIGNED_BYTE;case Int16Array:return Mt.ComponentType.SHORT;case Int8Array:return Mt.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}(e):Mt.ComponentType.FLOAT,this.S=e,this}getByteLength(){return this.S?this.S.byteLength:0}}Mt.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"},Mt.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},Dt([Je],Mt.prototype,"buffer",void 0);class Rt extends Le{constructor(...e){super(...e),this.propertyType=Se.ANIMATION,this.channels=[],this.samplers=[]}copy(e,n=lt){return super.copy(e,n),this.clearGraphChildList(this.channels),this.clearGraphChildList(this.samplers),e.channels.forEach(s=>this.addChannel(n(s.getChild()))),e.samplers.forEach(s=>this.addSampler(n(s.getChild()))),this}addChannel(e){const n=this.graph.link("channel",this,e);return this.addGraphChild(this.channels,n)}removeChannel(e){return this.removeGraphChild(this.channels,e)}listChannels(){return this.channels.map(e=>e.getChild())}addSampler(e){const n=this.graph.link("sampler",this,e);return this.addGraphChild(this.samplers,n)}removeSampler(e){return this.removeGraphChild(this.samplers,e)}listSamplers(){return this.samplers.map(e=>e.getChild())}}Dt([pt],Rt.prototype,"channels",void 0),Dt([pt],Rt.prototype,"samplers",void 0);class tt extends Zt{constructor(...e){super(...e),this.propertyType=Se.ANIMATION_CHANNEL,this._=null,this.targetNode=null,this.sampler=null}copy(e,n=lt){return super.copy(e,n),this._=e._,this.setTargetNode(e.targetNode?n(e.targetNode.getChild()):null),this.setSampler(e.sampler?n(e.sampler.getChild()):null),this}getTargetPath(){return this._}setTargetPath(e){return this._=e,this}getTargetNode(){return this.targetNode?this.targetNode.getChild():null}setTargetNode(e){return this.targetNode=this.graph.link("target.node",this,e),this}getSampler(){return this.sampler?this.sampler.getChild():null}setSampler(e){return this.sampler=this.graph.link("sampler",this,e),this}}tt.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"},Dt([Je],tt.prototype,"targetNode",void 0),Dt([Je],tt.prototype,"sampler",void 0);class We extends Zt{constructor(...e){super(...e),this.propertyType=Se.ANIMATION_SAMPLER,this.L=We.Interpolation.LINEAR,this.input=null,this.output=null}copy(e,n=lt){return super.copy(e,n),this.L=e.L,this.setInput(e.input?n(e.input.getChild()):null),this.setOutput(e.output?n(e.output.getChild()):null),this}getInterpolation(){return this.L}setInterpolation(e){return this.L=e,this}getInput(){return this.input?this.input.getChild():null}setInput(e){return this.input=this.graph.link("input",this,e),this}getOutput(){return this.output?this.output.getChild():null}setOutput(e){return this.output=this.graph.link("output",this,e),this}}We.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"},Dt([Je],We.prototype,"input",void 0),Dt([Je],We.prototype,"output",void 0);class C extends Le{constructor(...e){super(...e),this.propertyType=Se.BUFFER,this.P=""}copy(e,n=lt){return super.copy(e,n),this.P=e.P,this}getURI(){return this.P}setURI(e){return this.P=e,this}}class U extends Le{constructor(...e){super(...e),this.propertyType=Se.CAMERA,this.M=U.Type.PERSPECTIVE,this.U=.1,this.k=100,this.F=null,this.j=2*Math.PI*50/360,this.D=1,this.J=1}copy(e,n=lt){return super.copy(e,n),this.M=e.M,this.U=e.U,this.k=e.k,this.F=e.F,this.j=e.j,this.D=e.D,this.J=e.J,this}getType(){return this.M}setType(e){return this.M=e,this}getZNear(){return this.U}setZNear(e){return this.U=e,this}getZFar(){return this.k}setZFar(e){return this.k=e,this}getAspectRatio(){return this.F}setAspectRatio(e){return this.F=e,this}getYFov(){return this.j}setYFov(e){return this.j=e,this}getXMag(){return this.D}setXMag(e){return this.D=e,this}getYMag(){return this.J}setYMag(e){return this.J=e,this}}U.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class Q extends Zt{constructor(e,n){super(e),this.$=void 0,this.$=n,this.$.addExtensionProperty(this)}clone(){const e=new this.constructor(this.graph,this.$).copy(this,lt);return this.graph.emit("clone",e),e}dispose(){this.$.removeExtensionProperty(this),super.dispose()}T(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}Q.EXTENSION_NAME=void 0;class fe extends at{constructor(...e){super(...e),this.semantic=""}copy(e){return this.semantic=e.semantic,this}}class de extends at{copy(e){return this}}let Ce=class extends at{constructor(...y){super(...y),this.channels=0}copy(y){return this.channels=y.channels,this}};class Ye extends Ne{linkAttribute(e,n,s){if(!s)return null;const c=new fe(e,n,s);return c.semantic=e,this.registerLink(c),c}linkIndex(e,n,s){if(!s)return null;const c=new de(e,n,s);return this.registerLink(c),c}linkTexture(e,n,s,c){if(!c)return null;const u=new Ce(e,s,c);return u.channels=n,this.registerLink(u),u}}class Ke extends Le{constructor(...e){super(...e),this.propertyType=Se.TEXTURE_INFO,this.V=0,this.W=null,this.q=null,this.Y=Ke.WrapMode.REPEAT,this.H=Ke.WrapMode.REPEAT}copy(e,n=lt){return super.copy(e,n),this.V=e.V,this.W=e.W,this.q=e.q,this.Y=e.Y,this.H=e.H,this}equals(e){return this.getTexCoord()===e.getTexCoord()&&this.getMagFilter()===e.getMagFilter()&&this.getMinFilter()===e.getMinFilter()&&this.getWrapS()===e.getWrapS()&&this.getWrapT()===e.getWrapT()}getTexCoord(){return this.V}setTexCoord(e){return this.V=e,this}getMagFilter(){return this.W}setMagFilter(e){return this.W=e,this}getMinFilter(){return this.q}setMinFilter(e){return this.q=e,this}getWrapS(){return this.Y}setWrapS(e){return this.Y=e,this}getWrapT(){return this.H}setWrapT(e){return this.H=e,this}}Ke.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Ke.MagFilter={NEAREST:9728,LINEAR:9729},Ke.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:ct,G:_t,B:qe,A:ht}=Qe;class Pt extends Le{constructor(...e){super(...e),this.propertyType=Se.MATERIAL,this.Z=Pt.AlphaMode.OPAQUE,this.K=.5,this.X=!1,this.tt=[1,1,1,1],this.st=[0,0,0],this.et=1,this.it=1,this.rt=1,this.nt=1,this.baseColorTexture=null,this.baseColorTextureInfo=this.graph.link("baseColorTextureInfo",this,new Ke(this.graph)),this.emissiveTexture=null,this.emissiveTextureInfo=this.graph.link("emissiveTextureInfo",this,new Ke(this.graph)),this.normalTexture=null,this.normalTextureInfo=this.graph.link("normalTextureInfo",this,new Ke(this.graph)),this.occlusionTexture=null,this.occlusionTextureInfo=this.graph.link("occlusionTextureInfo",this,new Ke(this.graph)),this.metallicRoughnessTexture=null,this.metallicRoughnessTextureInfo=this.graph.link("metallicRoughnessTextureInfo",this,new Ke(this.graph))}copy(e,n=lt){return super.copy(e,n),this.Z=e.Z,this.K=e.K,this.X=e.X,this.tt=[...e.tt],this.st=[...e.st],this.et=e.et,this.it=e.it,this.rt=e.rt,this.nt=e.nt,this.setBaseColorTexture(e.baseColorTexture?n(e.baseColorTexture.getChild()):null),this.baseColorTextureInfo.getChild().copy(n(e.baseColorTextureInfo.getChild()),n),this.setEmissiveTexture(e.emissiveTexture?n(e.emissiveTexture.getChild()):null),this.emissiveTextureInfo.getChild().copy(n(e.emissiveTextureInfo.getChild()),n),this.setNormalTexture(e.normalTexture?n(e.normalTexture.getChild()):null),this.normalTextureInfo.getChild().copy(n(e.normalTextureInfo.getChild()),n),this.setOcclusionTexture(e.occlusionTexture?n(e.occlusionTexture.getChild()):null),this.occlusionTextureInfo.getChild().copy(n(e.occlusionTextureInfo.getChild()),n),this.setMetallicRoughnessTexture(e.metallicRoughnessTexture?n(e.metallicRoughnessTexture.getChild()):null),this.metallicRoughnessTextureInfo.getChild().copy(n(e.metallicRoughnessTextureInfo.getChild()),n),this}equals(e){if(this.getAlphaMode()!==e.getAlphaMode()||this.getAlphaCutoff()!==e.getAlphaCutoff()||this.getDoubleSided()!==e.getDoubleSided()||!Ue.eq(this.getBaseColorFactor(),e.getBaseColorFactor())||!Ue.eq(this.getEmissiveFactor(),e.getEmissiveFactor())||this.getNormalScale()!==e.getNormalScale()||this.getOcclusionStrength()!==e.getOcclusionStrength()||this.getRoughnessFactor()!==e.getRoughnessFactor()||this.getMetallicFactor()!==e.getMetallicFactor()||(this.getBaseColorTexture()||e.getBaseColorTexture())&&(this.getBaseColorTexture()!==e.getBaseColorTexture()||this.getBaseColorTexture()&&!this.getBaseColorTextureInfo().equals(e.getBaseColorTextureInfo()))||(this.getEmissiveTexture()||e.getEmissiveTexture())&&(this.getEmissiveTexture()!==e.getEmissiveTexture()||this.getEmissiveTexture()&&!this.getEmissiveTextureInfo().equals(e.getEmissiveTextureInfo()))||(this.getNormalTexture()||e.getNormalTexture())&&(this.getNormalTexture()!==e.getNormalTexture()||this.getNormalTexture()&&!this.getNormalTextureInfo().equals(e.getNormalTextureInfo()))||(this.getOcclusionTexture()||e.getOcclusionTexture())&&(this.getOcclusionTexture()!==e.getOcclusionTexture()||this.getOcclusionTexture()&&!this.getOcclusionTextureInfo().equals(e.getOcclusionTextureInfo()))||(this.getMetallicRoughnessTexture()||e.getMetallicRoughnessTexture())&&(this.getMetallicRoughnessTexture()!==e.getMetallicRoughnessTexture()||this.getMetallicRoughnessTexture()&&!this.getMetallicRoughnessTextureInfo().equals(e.getMetallicRoughnessTextureInfo())))return!1;const n=this.listExtensions(),s=e.listExtensions();if(n.length!==s.length)return!1;for(let c=0;c<n.length;c++)if(n[c]!==s[c])return!1;return!0}dispose(){this.baseColorTextureInfo.getChild().dispose(),this.emissiveTextureInfo.getChild().dispose(),this.normalTextureInfo.getChild().dispose(),this.occlusionTextureInfo.getChild().dispose(),this.metallicRoughnessTextureInfo.getChild().dispose(),super.dispose()}getDoubleSided(){return this.X}setDoubleSided(e){return this.X=e,this}getAlpha(){return this.tt[3]}setAlpha(e){return this.tt[3]=e,this}getAlphaMode(){return this.Z}setAlphaMode(e){return this.Z=e,this}getAlphaCutoff(){return this.K}setAlphaCutoff(e){return this.K=e,this}getBaseColorFactor(){return this.tt}setBaseColorFactor(e){return this.tt=e,this}getBaseColorHex(){return Jt.factorToHex(this.tt)}setBaseColorHex(e){return Jt.hexToFactor(e,this.tt),this}getBaseColorTexture(){return this.baseColorTexture?this.baseColorTexture.getChild():null}getBaseColorTextureInfo(){return this.baseColorTexture?this.baseColorTextureInfo.getChild():null}setBaseColorTexture(e){return this.baseColorTexture=this.graph.linkTexture("baseColorTexture",ct|_t|qe|ht,this,e),this}getEmissiveFactor(){return this.st}setEmissiveFactor(e){return this.st=e,this}getEmissiveHex(){return Jt.factorToHex(this.st)}setEmissiveHex(e){return Jt.hexToFactor(e,this.st),this}getEmissiveTexture(){return this.emissiveTexture?this.emissiveTexture.getChild():null}getEmissiveTextureInfo(){return this.emissiveTexture?this.emissiveTextureInfo.getChild():null}setEmissiveTexture(e){return this.emissiveTexture=this.graph.linkTexture("emissiveTexture",ct|_t|qe,this,e),this}getNormalScale(){return this.et}setNormalScale(e){return this.et=e,this}getNormalTexture(){return this.normalTexture?this.normalTexture.getChild():null}getNormalTextureInfo(){return this.normalTexture?this.normalTextureInfo.getChild():null}setNormalTexture(e){return this.normalTexture=this.graph.linkTexture("normalTexture",ct|_t|qe,this,e),this}getOcclusionStrength(){return this.it}setOcclusionStrength(e){return this.it=e,this}getOcclusionTexture(){return this.occlusionTexture?this.occlusionTexture.getChild():null}getOcclusionTextureInfo(){return this.occlusionTexture?this.occlusionTextureInfo.getChild():null}setOcclusionTexture(e){return this.occlusionTexture=this.graph.linkTexture("occlusionTexture",ct,this,e),this}getRoughnessFactor(){return this.rt}setRoughnessFactor(e){return this.rt=e,this}getMetallicFactor(){return this.nt}setMetallicFactor(e){return this.nt=e,this}getMetallicRoughnessTexture(){return this.metallicRoughnessTexture?this.metallicRoughnessTexture.getChild():null}getMetallicRoughnessTextureInfo(){return this.metallicRoughnessTexture?this.metallicRoughnessTextureInfo.getChild():null}setMetallicRoughnessTexture(e){return this.metallicRoughnessTexture=this.graph.linkTexture("metallicRoughnessTexture",_t|qe,this,e),this}}Pt.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},Dt([Je],Pt.prototype,"baseColorTexture",void 0),Dt([Je],Pt.prototype,"baseColorTextureInfo",void 0),Dt([Je],Pt.prototype,"emissiveTexture",void 0),Dt([Je],Pt.prototype,"emissiveTextureInfo",void 0),Dt([Je],Pt.prototype,"normalTexture",void 0),Dt([Je],Pt.prototype,"normalTextureInfo",void 0),Dt([Je],Pt.prototype,"occlusionTexture",void 0),Dt([Je],Pt.prototype,"occlusionTextureInfo",void 0),Dt([Je],Pt.prototype,"metallicRoughnessTexture",void 0),Dt([Je],Pt.prototype,"metallicRoughnessTextureInfo",void 0);class xt extends Le{constructor(...e){super(...e),this.propertyType=Se.MESH,this.ht=[],this.primitives=[]}copy(e,n=lt){return super.copy(e,n),this.ht=[...e.ht],this.clearGraphChildList(this.primitives),e.primitives.forEach(s=>this.addPrimitive(n(s.getChild()))),this}addPrimitive(e){return this.addGraphChild(this.primitives,this.graph.link("primitive",this,e))}removePrimitive(e){return this.removeGraphChild(this.primitives,e)}listPrimitives(){return this.primitives.map(e=>e.getChild())}getWeights(){return this.ht}setWeights(e){return this.ht=e,this}}Dt([pt],xt.prototype,"primitives",void 0);class Ge extends Le{constructor(...e){super(...e),this.propertyType=Se.NODE,this.ot=[0,0,0],this.ut=[0,0,0,1],this.ct=[1,1,1],this.ht=[],this.i=null,this.camera=null,this.mesh=null,this.skin=null,this.children=[]}copy(e,n=lt){return super.copy(e,n),this.ot=[...e.ot],this.ut=[...e.ut],this.ct=[...e.ct],this.ht=[...e.ht],this.setCamera(e.camera?n(e.camera.getChild()):null),this.setMesh(e.mesh?n(e.mesh.getChild()):null),this.setSkin(e.skin?n(e.skin.getChild()):null),n!==lt&&(this.clearGraphChildList(this.children),e.children.forEach(s=>this.addChild(n(s.getChild())))),this}getTranslation(){return this.ot}getRotation(){return this.ut}getScale(){return this.ct}setTranslation(e){return this.ot=e,this}setRotation(e){return this.ut=e,this}setScale(e){return this.ct=e,this}getMatrix(){return Ue.compose(this.ot,this.ut,this.ct,[])}setMatrix(e){return Ue.decompose(e,this.ot,this.ut,this.ct),this}getWorldTranslation(){const e=[0,0,0];return Ue.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return Ue.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return Ue.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let c=this;c instanceof Ge;c=c.i)e.push(c);let n;const s=e.pop().getMatrix();for(;n=e.pop();)ae(s,s,n.getMatrix());return s}addChild(e){e.i&&e.i.removeChild(e);const n=this.graph.link("child",this,e);return this.addGraphChild(this.children,n),e.i=this,n.onDispose(()=>e.i=null),this}removeChild(e){return this.removeGraphChild(this.children,e)}listChildren(){return this.children.map(e=>e.getChild())}getParent(){return this.i}getMesh(){return this.mesh?this.mesh.getChild():null}setMesh(e){return this.mesh=this.graph.link("mesh",this,e),this}getCamera(){return this.camera?this.camera.getChild():null}setCamera(e){return this.camera=this.graph.link("camera",this,e),this}getSkin(){return this.skin?this.skin.getChild():null}setSkin(e){return this.skin=this.graph.link("skin",this,e),this}getWeights(){return this.ht}setWeights(e){return this.ht=e,this}traverse(e){e(this);for(const n of this.listChildren())n.traverse(e);return this}}Dt([Je],Ge.prototype,"camera",void 0),Dt([Je],Ge.prototype,"mesh",void 0),Dt([Je],Ge.prototype,"skin",void 0),Dt([pt],Ge.prototype,"children",void 0);class en extends Le{constructor(...e){super(...e),this.propertyType=Se.PRIMITIVE,this.at=en.Mode.TRIANGLES,this.material=null,this.indices=null,this.attributes=[],this.targets=[]}copy(e,n=lt){return super.copy(e,n),this.at=e.at,this.setIndices(e.indices?n(e.indices.getChild()):null),this.setMaterial(e.material?n(e.material.getChild()):null),this.clearGraphChildList(this.attributes),e.listSemantics().forEach(s=>{this.setAttribute(s,n(e.getAttribute(s)))}),this.clearGraphChildList(this.targets),e.targets.forEach(s=>this.addTarget(n(s.getChild()))),this}getIndices(){return this.indices?this.indices.getChild():null}setIndices(e){return this.indices=this.graph.linkIndex("indices",this,e),this}getAttribute(e){const n=this.attributes.find(s=>s.semantic===e);return n?n.getChild():null}setAttribute(e,n){const s=this.getAttribute(e);if(s&&this.removeGraphChild(this.attributes,s),!n)return this;const c=this.graph.linkAttribute(e,this,n);return this.addGraphChild(this.attributes,c)}listAttributes(){return this.attributes.map(e=>e.getChild())}listSemantics(){return this.attributes.map(e=>e.semantic)}getMaterial(){return this.material?this.material.getChild():null}setMaterial(e){return this.material=this.graph.link("material",this,e),this}getMode(){return this.at}setMode(e){return this.at=e,this}listTargets(){return this.targets.map(e=>e.getChild())}addTarget(e){return this.addGraphChild(this.targets,this.graph.link("target",this,e)),this}removeTarget(e){return this.removeGraphChild(this.targets,e)}}en.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Dt([Je],en.prototype,"material",void 0),Dt([Je],en.prototype,"indices",void 0),Dt([pt],en.prototype,"attributes",void 0),Dt([pt],en.prototype,"targets",void 0);class bt extends Zt{constructor(...e){super(...e),this.propertyType=Se.PRIMITIVE_TARGET,this.attributes=[]}copy(e,n=lt){return super.copy(e,n),this.clearGraphChildList(this.attributes),e.listSemantics().forEach(s=>{this.setAttribute(s,n(e.getAttribute(s)))}),this}getAttribute(e){const n=this.attributes.find(s=>s.semantic===e);return n?n.getChild():null}setAttribute(e,n){const s=this.getAttribute(e);if(s&&this.removeGraphChild(this.attributes,s),!n)return this;const c=this.graph.linkAttribute(e,this,n);return c.semantic=e,this.addGraphChild(this.attributes,c)}listAttributes(){return this.attributes.map(e=>e.getChild())}listSemantics(){return this.attributes.map(e=>e.semantic)}}Dt([pt],bt.prototype,"attributes",void 0);class Vt extends Le{constructor(...e){super(...e),this.propertyType=Se.SCENE,this.children=[]}copy(e,n=lt){return super.copy(e,n),n!==lt&&(this.clearGraphChildList(this.children),e.children.forEach(s=>this.addChild(n(s.getChild())))),this}addChild(e){e.i&&e.i.removeChild(e);const n=this.graph.link("child",this,e);return this.addGraphChild(this.children,n),e.i=this,n.onDispose(()=>e.i=null),this}removeChild(e){return this.removeGraphChild(this.children,e)}listChildren(){return this.children.map(e=>e.getChild())}traverse(e){for(const n of this.listChildren())n.traverse(e);return this}}Dt([pt],Vt.prototype,"children",void 0);class _n extends Le{constructor(...e){super(...e),this.propertyType=Se.SKIN,this.skeleton=null,this.inverseBindMatrices=null,this.joints=[]}copy(e,n=lt){return super.copy(e,n),this.setSkeleton(e.skeleton?n(e.skeleton.getChild()):null),this.setInverseBindMatrices(e.inverseBindMatrices?n(e.inverseBindMatrices.getChild()):null),this.clearGraphChildList(this.joints),e.joints.forEach(s=>this.addJoint(n(s.getChild()))),this}getSkeleton(){return this.skeleton?this.skeleton.getChild():null}setSkeleton(e){return this.skeleton=this.graph.link("skeleton",this,e),this}getInverseBindMatrices(){return this.inverseBindMatrices?this.inverseBindMatrices.getChild():null}setInverseBindMatrices(e){return this.inverseBindMatrices=this.graph.link("inverseBindMatrices",this,e),this}addJoint(e){const n=this.graph.link("joint",this,e);return this.addGraphChild(this.joints,n)}removeJoint(e){return this.removeGraphChild(this.joints,e)}listJoints(){return this.joints.map(e=>e.getChild())}}Dt([Je],_n.prototype,"skeleton",void 0),Dt([Je],_n.prototype,"inverseBindMatrices",void 0),Dt([pt],_n.prototype,"joints",void 0);class Yn extends Le{constructor(...e){super(...e),this.propertyType=Se.TEXTURE,this.lt=null,this.ft="",this.P=""}copy(e,n=lt){return super.copy(e,n),this.ft=e.ft,this.P=e.P,e.lt&&(this.lt=e.lt.slice(0)),this}getMimeType(){return this.ft||St.extensionToMimeType(Qt.extension(this.P))}setMimeType(e){return this.ft=e,this}getURI(){return this.P}setURI(e){return this.P=e,this.ft=St.extensionToMimeType(Qt.extension(e)),this}getImage(){return this.lt}setImage(e){return this.lt=e,this}getSize(){return this.lt?St.getSize(this.lt,this.getMimeType()):null}}class or extends Zt{constructor(e){super(e),this.propertyType=Se.ROOT,this.dt={generator:"glTF-Transform v1.2.4",version:"2.0"},this.gt=new Set,this.defaultScene=null,this.accessors=[],this.animations=[],this.buffers=[],this.cameras=[],this.materials=[],this.meshes=[],this.nodes=[],this.scenes=[],this.skins=[],this.textures=[],e.on("clone",n=>this.wt(n))}clone(){throw new Error("Root cannot be cloned.")}copy(e,n=lt){if(super.copy(e,n),n===lt)throw new Error("Root cannot be copied.");return Object.assign(this.dt,e.dt),e.accessors.forEach(s=>this.vt(n(s.getChild()))),e.animations.forEach(s=>this.Tt(n(s.getChild()))),e.buffers.forEach(s=>this.yt(n(s.getChild()))),e.cameras.forEach(s=>this.At(n(s.getChild()))),e.materials.forEach(s=>this.Et(n(s.getChild()))),e.meshes.forEach(s=>this.xt(n(s.getChild()))),e.nodes.forEach(s=>this.St(n(s.getChild()))),e.scenes.forEach(s=>this.Mt(n(s.getChild()))),e.skins.forEach(s=>this.It(n(s.getChild()))),e.textures.forEach(s=>this.bt(n(s.getChild()))),this.setDefaultScene(e.defaultScene?n(e.defaultScene.getChild()):null),this}wt(e){return e instanceof Vt?this.Mt(e):e instanceof Ge?this.St(e):e instanceof U?this.At(e):e instanceof _n?this.It(e):e instanceof xt?this.xt(e):e instanceof Pt?this.Et(e):e instanceof Yn?this.bt(e):e instanceof Rt?this.Tt(e):e instanceof Mt?this.vt(e):e instanceof C&&this.yt(e),this}getAsset(){return this.dt}listExtensionsUsed(){return Array.from(this.gt)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}Rt(e){return this.gt.add(e),this}Nt(e){return this.gt.delete(e),this}Mt(e){return this.addGraphChild(this.scenes,this.graph.link("scene",this,e))}listScenes(){return this.scenes.map(e=>e.getChild())}setDefaultScene(e){return this.defaultScene=this.graph.link("scene",this,e),this}getDefaultScene(){return this.defaultScene?this.defaultScene.getChild():null}St(e){return this.addGraphChild(this.nodes,this.graph.link("node",this,e))}listNodes(){return this.nodes.map(e=>e.getChild())}At(e){return this.addGraphChild(this.cameras,this.graph.link("camera",this,e))}listCameras(){return this.cameras.map(e=>e.getChild())}It(e){return this.addGraphChild(this.skins,this.graph.link("skin",this,e))}listSkins(){return this.skins.map(e=>e.getChild())}xt(e){return this.addGraphChild(this.meshes,this.graph.link("mesh",this,e))}listMeshes(){return this.meshes.map(e=>e.getChild())}Et(e){return this.addGraphChild(this.materials,this.graph.link("material",this,e))}listMaterials(){return this.materials.map(e=>e.getChild())}bt(e){return this.addGraphChild(this.textures,this.graph.link("texture",this,e))}listTextures(){return this.textures.map(e=>e.getChild())}Tt(e){return this.addGraphChild(this.animations,this.graph.link("animation",this,e))}listAnimations(){return this.animations.map(e=>e.getChild())}vt(e){return this.addGraphChild(this.accessors,this.graph.link("accessor",this,e))}listAccessors(){return this.accessors.map(e=>e.getChild())}yt(e){return this.addGraphChild(this.buffers,this.graph.link("buffer",this,e))}listBuffers(){return this.buffers.map(e=>e.getChild())}}Dt([Je],or.prototype,"defaultScene",void 0),Dt([pt],or.prototype,"accessors",void 0),Dt([pt],or.prototype,"animations",void 0),Dt([pt],or.prototype,"buffers",void 0),Dt([pt],or.prototype,"cameras",void 0),Dt([pt],or.prototype,"materials",void 0),Dt([pt],or.prototype,"meshes",void 0),Dt([pt],or.prototype,"nodes",void 0),Dt([pt],or.prototype,"scenes",void 0),Dt([pt],or.prototype,"skins",void 0),Dt([pt],or.prototype,"textures",void 0);class lr{constructor(){this.Ct=new Ye,this.Ot=new or(this.Ct),this._t=Ut.DEFAULT_INSTANCE}getRoot(){return this.Ot}getGraph(){return this.Ct}getLogger(){return this._t}setLogger(e){return this._t=e,this}clone(){return new lr().merge(this).setLogger(this._t)}merge(e){const n={};for(const m of e.getRoot().listExtensionsUsed()){const b=this.createExtension(m.constructor);m.isRequired()&&b.setRequired(!0),n[b.extensionName]=b}const s=new Set,c=new Map;s.add(e.Ot),c.set(e.Ot,this.Ot);for(const m of e.Ct.getLinks())for(const b of[m.getParent(),m.getChild()]){if(s.has(b))continue;let k;if(b.propertyType===Se.TEXTURE_INFO)k=b;else{const W=b.constructor;k=b instanceof Q?new W(this.Ct,n[b.extensionName]):new W(this.Ct)}c.set(b,k),s.add(b)}const u=m=>{const b=c.get(m);if(!b)throw new Error("Could resolve property.");return b};for(const m of s){const b=c.get(m);if(!b)throw new Error("Could resolve property.");b.copy(m,u)}return this}async transform(...e){const n=e.map(s=>s.name);for(const s of e)await s(this,{stack:n});return this}createExtension(e){const n=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(s=>s.extensionName===n)||new e(this)}createScene(e=""){const n=new Vt(this.Ct,e);return this.Ot.Mt(n),n}createNode(e=""){const n=new Ge(this.Ct,e);return this.Ot.St(n),n}createCamera(e=""){const n=new U(this.Ct,e);return this.Ot.At(n),n}createSkin(e=""){const n=new _n(this.Ct,e);return this.Ot.It(n),n}createMesh(e=""){const n=new xt(this.Ct,e);return this.Ot.xt(n),n}createPrimitive(){return new en(this.Ct)}createPrimitiveTarget(e=""){return new bt(this.Ct,e)}createMaterial(e=""){const n=new Pt(this.Ct,e);return this.Ot.Et(n),n}createTexture(e=""){const n=new Yn(this.Ct,e);return this.Ot.bt(n),n}createAnimation(e=""){const n=new Rt(this.Ct,e);return this.Ot.Tt(n),n}createAnimationChannel(e=""){return new tt(this.Ct,e)}createAnimationSampler(e=""){return new We(this.Ct,e)}createAccessor(e="",n=null){n||(n=this.getRoot().listBuffers()[0]);const s=new Mt(this.Ct,e).setBuffer(n);return this.Ot.vt(s),s}createBuffer(e=""){const n=new C(this.Ct,e);return this.Ot.yt(n),n}}function Jn(){return(Jn=Object.assign||function(y){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(y[s]=n[s])}return y}).apply(this,arguments)}class $n{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,n){this.textureInfos.set(e,n),n.texCoord!==void 0&&e.setTexCoord(n.texCoord);const s=this.jsonDoc.json.textures[n.index];if(s.sampler===void 0)return;const c=this.jsonDoc.json.samplers[s.sampler];c.magFilter!==void 0&&e.setMagFilter(c.magFilter),c.minFilter!==void 0&&e.setMinFilter(c.minFilter),c.wrapS!==void 0&&e.setWrapS(c.wrapS),c.wrapT!==void 0&&e.setWrapT(c.wrapT)}}const Tn={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Gn={logger:Ut.DEFAULT_INSTANCE,extensions:[],dependencies:{}};function tr(y,e){const n=e.bufferViews[y.bufferView],s=e.jsonDoc.json.bufferViews[y.bufferView],c=Tn[y.componentType],u=Mt.getElementSize(y.type),m=c.BYTES_PER_ELEMENT;if(s.byteStride!==void 0&&s.byteStride!==u*m)return function(k,W){const ve=W.bufferViews[k.bufferView],Ae=W.jsonDoc.json.bufferViews[k.bufferView],rt=Tn[k.componentType],re=Mt.getElementSize(k.type),mt=rt.BYTES_PER_ELEMENT,nt=k.byteOffset||0,tn=new rt(k.count*re),Ie=new DataView(ve.buffer,ve.byteOffset,ve.byteLength),Kt=Ae.byteStride;for(let At=0;At<k.count;At++)for(let an=0;an<re;an++){const Cn=nt+At*Kt+an*mt;let He;switch(k.componentType){case Mt.ComponentType.FLOAT:He=Ie.getFloat32(Cn,!0);break;case Mt.ComponentType.UNSIGNED_INT:He=Ie.getUint32(Cn,!0);break;case Mt.ComponentType.UNSIGNED_SHORT:He=Ie.getUint16(Cn,!0);break;case Mt.ComponentType.UNSIGNED_BYTE:He=Ie.getUint8(Cn);break;case Mt.ComponentType.SHORT:He=Ie.getInt16(Cn,!0);break;case Mt.ComponentType.BYTE:He=Ie.getInt8(Cn);break;default:throw new Error(`Unexpected componentType "${k.componentType}".`)}tn[At*re+an]=He}return tn}(y,e);const b=n.byteOffset+(y.byteOffset||0);return new c(n.buffer.slice(b,b+y.count*u*m))}var pr,Br;(function(y){y[y.ARRAY_BUFFER=34962]="ARRAY_BUFFER",y[y.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(pr||(pr={})),function(y){y.ARRAY_BUFFER="ARRAY_BUFFER",y.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",y.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",y.OTHER="OTHER"}(Br||(Br={}));class Mr{constructor(e,n,s){this.Bt=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this.Lt=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this.Bt=e,this.jsonDoc=n,this.options=s;const c=e.getRoot(),u=c.listBuffers().length,m=c.listTextures().length;this.bufferURIGenerator=new pn(u>1,s.basename),this.imageURIGenerator=new pn(m>1,s.basename),this.logger=e.getLogger()}createTextureInfoDef(e,n){const s={magFilter:n.getMagFilter()||void 0,minFilter:n.getMinFilter()||void 0,wrapS:n.getWrapS(),wrapT:n.getWrapT()},c=JSON.stringify(s);this.samplerDefIndexMap.has(c)||(this.samplerDefIndexMap.set(c,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(s));const u={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(c)},m=JSON.stringify(u);this.textureDefIndexMap.has(m)||(this.textureDefIndexMap.set(m,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(u));const b={index:this.textureDefIndexMap.get(m)};return n.getTexCoord()!==0&&(b.texCoord=n.getTexCoord()),this.textureInfoDefMap.set(n,b),b}createPropertyDef(e){const n={};return e.getName()&&(n.name=e.getName()),Object.keys(e.getExtras()).length>0&&(n.extras=e.getExtras()),n}createAccessorDef(e){const n=this.createPropertyDef(e);return n.type=e.getType(),n.componentType=e.getComponentType(),n.count=e.getCount(),this.Bt.getGraph().listParentLinks(e).some(s=>s.getName()==="POSITION"||s.getName()==="input")&&(n.max=e.getMax([]).map(Math.fround),n.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(n.normalized=e.getNormalized()),n}createImageData(e,n,s){if(this.options.format===wt.GLB)this.imageBufferViews.push(n),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:n.byteLength});else{const c=St.mimeTypeToExtension(s.getMimeType());e.uri=this.imageURIGenerator.createURI(s,c),this.jsonDoc.resources[e.uri]=n}}getAccessorUsage(e){const n=this.Lt.get(e);if(n)return n;for(const s of this.Bt.getGraph().listParentLinks(e)){if(s.getName()==="inverseBindMatrices")return Mr.BufferViewUsage.INVERSE_BIND_MATRICES;if(s instanceof fe)return Mr.BufferViewUsage.ARRAY_BUFFER;if(s instanceof de)return Mr.BufferViewUsage.ELEMENT_ARRAY_BUFFER}return Mr.BufferViewUsage.OTHER}addAccessorToUsageGroup(e,n){const s=this.Lt.get(e);if(s&&s!==n)throw new Error(`Accessor with usage "${s}" cannot be reused as "${n}".`);return this.Lt.set(e,n),this}listAccessorUsageGroups(){const e={};for(const[n,s]of Array.from(this.Lt.entries()))e[s]=e[s]||[],e[s].push(n);return e}}Mr.BufferViewTarget=pr,Mr.BufferViewUsage=Br,Mr.USAGE_TO_TARGET={[Br.ARRAY_BUFFER]:pr.ARRAY_BUFFER,[Br.ELEMENT_ARRAY_BUFFER]:pr.ELEMENT_ARRAY_BUFFER};class pn{constructor(e,n){this.multiple=void 0,this.basename=void 0,this.counter=1,this.multiple=e,this.basename=n}createURI(e,n){return e.getURI()?e.getURI():this.multiple?`${this.basename}_${this.counter++}.${n}`:`${this.basename}.${n}`}}const{BufferViewUsage:Wt}=Mr;var un;(function(y){y[y.JSON=1313821514]="JSON",y[y.BIN=5130562]="BIN"})(un||(un={}));class fn{constructor(){this._t=Ut.DEFAULT_INSTANCE,this.gt=new Set,this.Pt={},this.Ut=ee.INTERLEAVED}setLogger(e){return this._t=e,this}registerExtensions(e){for(const n of e)this.gt.add(n),n.register();return this}registerDependencies(e){return Object.assign(this.Pt,e),this}setVertexLayout(e){return this.Ut=e,this}kt(e){function n(s){if(s.uri&&!(s.uri in e.resources)&&s.uri.match(/data:/)){const c=`__${sn()}.${Qt.extension(s.uri)}`;e.resources[c]=ot.createBufferFromDataURI(s.uri),s.uri=c}}(e.json.images||[]).forEach(s=>{if(s.bufferView===void 0&&s.uri===void 0)throw new Error("Missing resource URI or buffer view.");n(s)}),(e.json.buffers||[]).forEach(n)}readJSON(e){return e=this.Ft(e),this.kt(e),(class{static read(n,s=Gn){const c=Jn({},Gn,s),{json:u}=n,m=new lr;this.validate(n,c);const b=new $n(n),k=u.asset,W=m.getRoot().getAsset();k.copyright&&(W.copyright=k.copyright),k.extras&&(W.extras=k.extras),u.extras!==void 0&&m.getRoot().setExtras(Jn({},u.extras));const ve=u.extensionsUsed||[],Ae=u.extensionsRequired||[];for(const Kt of c.extensions)if(ve.includes(Kt.EXTENSION_NAME)){const At=m.createExtension(Kt).setRequired(Ae.includes(Kt.EXTENSION_NAME));for(const an of At.readDependencies)At.install(an,c.dependencies[an])}const rt=u.buffers||[];m.getRoot().listExtensionsUsed().filter(Kt=>Kt.prereadTypes.includes(Se.BUFFER)).forEach(Kt=>Kt.preread(b,Se.BUFFER)),b.buffers=rt.map(Kt=>{const At=m.createBuffer(Kt.name);return Kt.extras&&At.setExtras(Kt.extras),Kt.uri&&Kt.uri.indexOf("__")!==0&&At.setURI(Kt.uri),At}),b.bufferViewBuffers=(u.bufferViews||[]).map((Kt,At)=>{if(!b.bufferViews[At]){const an=n.json.buffers[Kt.buffer],Cn=new Uint8Array(an.uri?n.resources[an.uri]:n.resources["@glb.bin"],Kt.byteOffset||0,Kt.byteLength);b.bufferViews[At]=Cn}return b.buffers[Kt.buffer]}),b.accessors=(u.accessors||[]).map(Kt=>{const At=m.createAccessor(Kt.name,b.bufferViewBuffers[Kt.bufferView]).setType(Kt.type);if(Kt.extras&&At.setExtras(Kt.extras),Kt.normalized!==void 0&&At.setNormalized(Kt.normalized),Kt.bufferView===void 0&&!Kt.sparse)return At;let an;return an=Kt.sparse!==void 0?function(Cn,He){const _e=Tn[Cn.componentType],Sr=Mt.getElementSize(Cn.type);let On;On=Cn.bufferView!==void 0?tr(Cn,He):new _e(Cn.count*Sr);const Kr=Cn.sparse,Mi=Kr.count,ei=Jn({},Cn,Kr.indices,{count:Mi,type:"SCALAR"}),oi=Jn({},Cn,Kr.values,{count:Mi}),xr=tr(ei,He),Ts=tr(oi,He);for(let Fn=0;Fn<ei.count;Fn++)for(let si=0;si<Sr;si++)On[xr[Fn]*Sr+si]=Ts[Fn*Sr+si];return On}(Kt,b):tr(Kt,b),At.setArray(an),At});const re=u.images||[],mt=u.textures||[];m.getRoot().listExtensionsUsed().filter(Kt=>Kt.prereadTypes.includes(Se.TEXTURE)).forEach(Kt=>Kt.preread(b,Se.TEXTURE)),b.textures=re.map(Kt=>{const At=m.createTexture(Kt.name);if(Kt.extras&&At.setExtras(Kt.extras),Kt.bufferView!==void 0){const an=u.bufferViews[Kt.bufferView],Cn=n.json.buffers[an.buffer],He=an.byteOffset||0,_e=(Cn.uri?n.resources[Cn.uri]:n.resources["@glb.bin"]).slice(He,He+an.byteLength);At.setImage(_e)}else Kt.uri!==void 0&&(At.setImage(n.resources[Kt.uri]),Kt.uri.indexOf("__")!==0&&At.setURI(Kt.uri));if(Kt.mimeType!==void 0)At.setMimeType(Kt.mimeType);else if(Kt.uri){const an=Qt.extension(Kt.uri);At.setMimeType(St.extensionToMimeType(an))}return At}),b.materials=(u.materials||[]).map(Kt=>{const At=m.createMaterial(Kt.name);Kt.extras&&At.setExtras(Kt.extras),Kt.alphaMode!==void 0&&At.setAlphaMode(Kt.alphaMode),Kt.alphaCutoff!==void 0&&At.setAlphaCutoff(Kt.alphaCutoff),Kt.doubleSided!==void 0&&At.setDoubleSided(Kt.doubleSided);const an=Kt.pbrMetallicRoughness||{};if(an.baseColorFactor!==void 0&&At.setBaseColorFactor(an.baseColorFactor),Kt.emissiveFactor!==void 0&&At.setEmissiveFactor(Kt.emissiveFactor),an.metallicFactor!==void 0&&At.setMetallicFactor(an.metallicFactor),an.roughnessFactor!==void 0&&At.setRoughnessFactor(an.roughnessFactor),an.baseColorTexture!==void 0){const Cn=an.baseColorTexture;At.setBaseColorTexture(b.textures[mt[Cn.index].source]),b.setTextureInfo(At.getBaseColorTextureInfo(),Cn)}if(Kt.emissiveTexture!==void 0){const Cn=Kt.emissiveTexture;At.setEmissiveTexture(b.textures[mt[Cn.index].source]),b.setTextureInfo(At.getEmissiveTextureInfo(),Cn)}if(Kt.normalTexture!==void 0){const Cn=Kt.normalTexture;At.setNormalTexture(b.textures[mt[Cn.index].source]),b.setTextureInfo(At.getNormalTextureInfo(),Cn),Kt.normalTexture.scale!==void 0&&At.setNormalScale(Kt.normalTexture.scale)}if(Kt.occlusionTexture!==void 0){const Cn=Kt.occlusionTexture;At.setOcclusionTexture(b.textures[mt[Cn.index].source]),b.setTextureInfo(At.getOcclusionTextureInfo(),Cn),Kt.occlusionTexture.strength!==void 0&&At.setOcclusionStrength(Kt.occlusionTexture.strength)}if(an.metallicRoughnessTexture!==void 0){const Cn=an.metallicRoughnessTexture;At.setMetallicRoughnessTexture(b.textures[mt[Cn.index].source]),b.setTextureInfo(At.getMetallicRoughnessTextureInfo(),Cn)}return At});const nt=u.meshes||[];m.getRoot().listExtensionsUsed().filter(Kt=>Kt.prereadTypes.includes(Se.PRIMITIVE)).forEach(Kt=>Kt.preread(b,Se.PRIMITIVE)),b.meshes=nt.map(Kt=>{const At=m.createMesh(Kt.name);return Kt.extras&&At.setExtras(Kt.extras),Kt.weights!==void 0&&At.setWeights(Kt.weights),(Kt.primitives||[]).forEach(an=>{const Cn=m.createPrimitive();an.extras&&Cn.setExtras(an.extras),an.material!==void 0&&Cn.setMaterial(b.materials[an.material]),an.mode!==void 0&&Cn.setMode(an.mode);for(const[_e,Sr]of Object.entries(an.attributes||{}))Cn.setAttribute(_e,b.accessors[Sr]);an.indices!==void 0&&Cn.setIndices(b.accessors[an.indices]);const He=Kt.extras&&Kt.extras.targetNames||[];(an.targets||[]).forEach((_e,Sr)=>{const On=He[Sr]||Sr.toString(),Kr=m.createPrimitiveTarget(On);for(const[Mi,ei]of Object.entries(_e))Kr.setAttribute(Mi,b.accessors[ei]);Cn.addTarget(Kr)}),At.addPrimitive(Cn)}),At}),b.cameras=(u.cameras||[]).map(Kt=>{const At=m.createCamera(Kt.name).setType(Kt.type);if(Kt.extras&&At.setExtras(Kt.extras),Kt.type===U.Type.PERSPECTIVE){const an=Kt.perspective;At.setYFov(an.yfov),At.setZNear(an.znear),an.zfar!==void 0&&At.setZFar(an.zfar),an.aspectRatio!==void 0&&At.setAspectRatio(an.aspectRatio)}else{const an=Kt.orthographic;At.setZNear(an.znear).setZFar(an.zfar).setXMag(an.xmag).setYMag(an.ymag)}return At});const tn=u.nodes||[];m.getRoot().listExtensionsUsed().filter(Kt=>Kt.prereadTypes.includes(Se.NODE)).forEach(Kt=>Kt.preread(b,Se.NODE)),b.nodes=tn.map(Kt=>{const At=m.createNode(Kt.name);if(Kt.extras&&At.setExtras(Kt.extras),Kt.translation!==void 0&&At.setTranslation(Kt.translation),Kt.rotation!==void 0&&At.setRotation(Kt.rotation),Kt.scale!==void 0&&At.setScale(Kt.scale),Kt.matrix!==void 0){const an=[0,0,0],Cn=[0,0,0,1],He=[1,1,1];Ue.decompose(Kt.matrix,an,Cn,He),At.setTranslation(an),At.setRotation(Cn),At.setScale(He)}return Kt.weights!==void 0&&At.setWeights(Kt.weights),At}),b.skins=(u.skins||[]).map(Kt=>{const At=m.createSkin(Kt.name);Kt.extras&&At.setExtras(Kt.extras),Kt.inverseBindMatrices!==void 0&&At.setInverseBindMatrices(b.accessors[Kt.inverseBindMatrices]),Kt.skeleton!==void 0&&At.setSkeleton(b.nodes[Kt.skeleton]);for(const an of Kt.joints)At.addJoint(b.nodes[an]);return At}),tn.map((Kt,At)=>{const an=b.nodes[At];(Kt.children||[]).forEach(Cn=>an.addChild(b.nodes[Cn])),Kt.mesh!==void 0&&an.setMesh(b.meshes[Kt.mesh]),Kt.camera!==void 0&&an.setCamera(b.cameras[Kt.camera]),Kt.skin!==void 0&&an.setSkin(b.skins[Kt.skin])}),b.animations=(u.animations||[]).map(Kt=>{const At=m.createAnimation(Kt.name);Kt.extras&&At.setExtras(Kt.extras);const an=(Kt.samplers||[]).map(Cn=>{const He=m.createAnimationSampler().setInput(b.accessors[Cn.input]).setOutput(b.accessors[Cn.output]).setInterpolation(Cn.interpolation||We.Interpolation.LINEAR);return Cn.extras&&He.setExtras(Cn.extras),At.addSampler(He),He});return(Kt.channels||[]).forEach(Cn=>{const He=m.createAnimationChannel().setSampler(an[Cn.sampler]).setTargetNode(b.nodes[Cn.target.node]).setTargetPath(Cn.target.path);Cn.extras&&He.setExtras(Cn.extras),At.addChannel(He)}),At});const Ie=u.scenes||[];return m.getRoot().listExtensionsUsed().filter(Kt=>Kt.prereadTypes.includes(Se.SCENE)).forEach(Kt=>Kt.preread(b,Se.SCENE)),b.scenes=Ie.map(Kt=>{const At=m.createScene(Kt.name);return Kt.extras&&At.setExtras(Kt.extras),(Kt.nodes||[]).map(an=>b.nodes[an]).forEach(an=>At.addChild(an)),At}),u.scene!==void 0&&m.getRoot().setDefaultScene(b.scenes[u.scene]),m.getRoot().listExtensionsUsed().forEach(Kt=>Kt.read(b)),m}static validate(n,s){const c=n.json;if(c.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${c.asset.version}".`);if(c.extensionsRequired){for(const u of c.extensionsRequired)if(!s.extensions.find(m=>m.EXTENSION_NAME===u))throw new Error(`Missing required extension, "${u}".`)}if(c.extensionsUsed)for(const u of c.extensionsUsed)s.extensions.find(m=>m.EXTENSION_NAME===u)||s.logger.warn(`Missing optional extension, "${u}".`)}}).read(e,{extensions:Array.from(this.gt),dependencies:this.Pt,logger:this._t})}writeJSON(e,n={}){if(n.format===wt.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 0–1 buffers.");return(class{static write(s,c){const u=s.getRoot(),m={asset:Jn({generator:"glTF-Transform v1.2.4"},u.getAsset()),extras:Jn({},u.getExtras())},b={json:m,resources:{}},k=new Mr(s,b,c),W=c.logger||Ut.DEFAULT_INSTANCE,ve=new Set(c.extensions.map(Ie=>Ie.EXTENSION_NAME)),Ae=s.getRoot().listExtensionsUsed().filter(Ie=>ve.has(Ie.extensionName)),rt=s.getRoot().listExtensionsRequired().filter(Ie=>ve.has(Ie.extensionName));Ae.length<s.getRoot().listExtensionsUsed().length&&W.debug("Some extensions were not registered for I/O, and will not be written.");for(const Ie of Ae)for(const Kt of Ie.writeDependencies)Ie.install(Kt,c.dependencies[Kt]);function re(Ie,Kt,At,an){const Cn=[];let He=0;for(const Sr of Ie){const On=k.createAccessorDef(Sr);On.bufferView=m.bufferViews.length;const Kr=ot.pad(Sr.getArray().buffer);On.byteOffset=He,He+=Kr.byteLength,Cn.push(Kr),k.accessorIndexMap.set(Sr,m.accessors.length),m.accessors.push(On)}const _e={buffer:Kt,byteOffset:At,byteLength:ot.concat(Cn).byteLength};return an&&(_e.target=an),m.bufferViews.push(_e),{buffers:Cn,byteLength:He}}function mt(Ie,Kt,At){const an=Ie[0].getCount();let Cn=0;for(const On of Ie){const Kr=k.createAccessorDef(On);Kr.bufferView=m.bufferViews.length,Kr.byteOffset=Cn;const Mi=On.getElementSize(),ei=On.getComponentSize();Cn+=ot.padNumber(Mi*ei),k.accessorIndexMap.set(On,m.accessors.length),m.accessors.push(Kr)}const He=an*Cn,_e=new ArrayBuffer(He),Sr=new DataView(_e);for(let On=0;On<an;On++){let Kr=0;for(const Mi of Ie){const ei=Mi.getElementSize(),oi=Mi.getComponentSize(),xr=Mi.getComponentType(),Ts=Mi.getArray();for(let Fn=0;Fn<ei;Fn++){const si=On*Cn+Kr+Fn*oi,Pi=Ts[On*ei+Fn];switch(xr){case Mt.ComponentType.FLOAT:Sr.setFloat32(si,Pi,!0);break;case Mt.ComponentType.BYTE:Sr.setInt8(si,Pi);break;case Mt.ComponentType.SHORT:Sr.setInt16(si,Pi,!0);break;case Mt.ComponentType.UNSIGNED_BYTE:Sr.setUint8(si,Pi);break;case Mt.ComponentType.UNSIGNED_SHORT:Sr.setUint16(si,Pi,!0);break;case Mt.ComponentType.UNSIGNED_INT:Sr.setUint32(si,Pi,!0);break;default:throw new Error("Unexpected component type: "+xr)}}Kr+=ot.padNumber(ei*oi)}}return m.bufferViews.push({buffer:Kt,byteOffset:At,byteLength:He,byteStride:Cn,target:Mr.BufferViewTarget.ARRAY_BUFFER}),{byteLength:He,buffers:[_e]}}const nt=new Map;for(const Ie of s.getGraph().getLinks()){if(Ie.getParent()===u)continue;const Kt=Ie.getChild();if(Kt instanceof Mt){const At=nt.get(Kt)||[];At.push(Ie),nt.set(Kt,At)}}if(m.accessors=[],m.bufferViews=[],m.samplers=[],m.textures=[],m.images=u.listTextures().map((Ie,Kt)=>{const At=k.createPropertyDef(Ie);Ie.getMimeType()&&(At.mimeType=Ie.getMimeType());const an=Ie.getImage();return an&&k.createImageData(At,an,Ie),k.imageIndexMap.set(Ie,Kt),At}),Ae.filter(Ie=>Ie.prewriteTypes.includes(Se.ACCESSOR)).forEach(Ie=>Ie.prewrite(k,Se.ACCESSOR)),u.listAccessors().forEach(Ie=>{const Kt=k.accessorUsageGroupedByParent,At=k.accessorParents;if(k.accessorIndexMap.has(Ie))return;const an=nt.get(Ie)||[],Cn=k.getAccessorUsage(Ie);if(k.addAccessorToUsageGroup(Ie,Cn),Kt.has(Cn)){const He=an[0].getParent(),_e=At.get(He)||new Set;_e.add(Ie),At.set(He,_e)}}),Ae.filter(Ie=>Ie.prewriteTypes.includes(Se.BUFFER)).forEach(Ie=>Ie.prewrite(k,Se.BUFFER)),(u.listAccessors().length>0||u.listTextures().length>0||k.otherBufferViews.size>0)&&u.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");m.buffers=[],u.listBuffers().forEach((Ie,Kt)=>{const At=k.createPropertyDef(Ie),an=k.accessorUsageGroupedByParent,Cn=k.accessorParents,He=Ie.listParents().filter(ei=>ei instanceof Mt),_e=new Set(He),Sr=[],On=m.buffers.length;let Kr=0;const Mi=k.listAccessorUsageGroups();for(const ei in Mi)if(an.has(ei))for(const oi of Array.from(Cn.values())){const xr=Array.from(oi).filter(Ts=>_e.has(Ts)).filter(Ts=>k.getAccessorUsage(Ts)===ei);if(xr.length)if(ei!==Wt.ARRAY_BUFFER||c.vertexLayout===ee.INTERLEAVED){const Ts=ei===Wt.ARRAY_BUFFER?mt(xr,On,Kr):re(xr,On,Kr);Kr+=Ts.byteLength,Sr.push(...Ts.buffers)}else for(const Ts of xr){const Fn=mt([Ts],On,Kr);Kr+=Fn.byteLength,Sr.push(...Fn.buffers)}}else{const oi=Mi[ei].filter(Ts=>_e.has(Ts));if(!oi.length)continue;const xr=re(oi,On,Kr,ei===Wt.ELEMENT_ARRAY_BUFFER?Mr.BufferViewTarget.ELEMENT_ARRAY_BUFFER:void 0);Kr+=xr.byteLength,Sr.push(...xr.buffers)}if(k.imageBufferViews.length&&Kt===0){for(let ei=0;ei<k.imageBufferViews.length;ei++)if(m.bufferViews[m.images[ei].bufferView].byteOffset=Kr,Kr+=k.imageBufferViews[ei].byteLength,Sr.push(k.imageBufferViews[ei]),Kr%8){const oi=8-Kr%8;Kr+=oi,Sr.push(new ArrayBuffer(oi))}}if(k.otherBufferViews.has(Ie))for(const ei of k.otherBufferViews.get(Ie))m.bufferViews.push({buffer:On,byteOffset:Kr,byteLength:ei.byteLength}),k.otherBufferViewsIndexMap.set(ei,m.bufferViews.length-1),Kr+=ei.byteLength,Sr.push(ei);if(Kr){let ei;c.format===wt.GLB?ei="@glb.bin":(ei=k.bufferURIGenerator.createURI(Ie,"bin"),At.uri=ei),At.byteLength=Kr,b.resources[ei]=ot.concat(Sr)}m.buffers.push(At),k.bufferIndexMap.set(Ie,Kt)}),u.listAccessors().find(Ie=>!Ie.getBuffer())&&W.warn("Skipped writing one or more Accessors: no Buffer assigned."),m.materials=u.listMaterials().map((Ie,Kt)=>{const At=k.createPropertyDef(Ie);if(Ie.getAlphaMode()!==Pt.AlphaMode.OPAQUE&&(At.alphaMode=Ie.getAlphaMode()),Ie.getAlphaMode()===Pt.AlphaMode.MASK&&(At.alphaCutoff=Ie.getAlphaCutoff()),Ie.getDoubleSided()&&(At.doubleSided=!0),At.pbrMetallicRoughness={},Ue.eq(Ie.getBaseColorFactor(),[1,1,1,1])||(At.pbrMetallicRoughness.baseColorFactor=Ie.getBaseColorFactor()),Ue.eq(Ie.getEmissiveFactor(),[0,0,0])||(At.emissiveFactor=Ie.getEmissiveFactor()),Ie.getRoughnessFactor()!==1&&(At.pbrMetallicRoughness.roughnessFactor=Ie.getRoughnessFactor()),Ie.getMetallicFactor()!==1&&(At.pbrMetallicRoughness.metallicFactor=Ie.getMetallicFactor()),Ie.getBaseColorTexture()){const an=Ie.getBaseColorTexture(),Cn=Ie.getBaseColorTextureInfo();At.pbrMetallicRoughness.baseColorTexture=k.createTextureInfoDef(an,Cn)}if(Ie.getEmissiveTexture()){const an=Ie.getEmissiveTexture(),Cn=Ie.getEmissiveTextureInfo();At.emissiveTexture=k.createTextureInfoDef(an,Cn)}if(Ie.getNormalTexture()){const an=Ie.getNormalTexture(),Cn=Ie.getNormalTextureInfo(),He=k.createTextureInfoDef(an,Cn);Ie.getNormalScale()!==1&&(He.scale=Ie.getNormalScale()),At.normalTexture=He}if(Ie.getOcclusionTexture()){const an=Ie.getOcclusionTexture(),Cn=Ie.getOcclusionTextureInfo(),He=k.createTextureInfoDef(an,Cn);Ie.getOcclusionStrength()!==1&&(He.strength=Ie.getOcclusionStrength()),At.occlusionTexture=He}if(Ie.getMetallicRoughnessTexture()){const an=Ie.getMetallicRoughnessTexture(),Cn=Ie.getMetallicRoughnessTextureInfo();At.pbrMetallicRoughness.metallicRoughnessTexture=k.createTextureInfoDef(an,Cn)}return k.materialIndexMap.set(Ie,Kt),At}),m.meshes=u.listMeshes().map((Ie,Kt)=>{const At=k.createPropertyDef(Ie);let an=null;return At.primitives=Ie.listPrimitives().map(Cn=>{const He={attributes:{}};He.mode=Cn.getMode();const _e=Cn.getMaterial();_e&&(He.material=k.materialIndexMap.get(_e)),Object.keys(Cn.getExtras()).length&&(He.extras=Cn.getExtras());const Sr=Cn.getIndices();Sr&&(He.indices=k.accessorIndexMap.get(Sr));for(const On of Cn.listSemantics())He.attributes[On]=k.accessorIndexMap.get(Cn.getAttribute(On));for(const On of Cn.listTargets()){const Kr={};for(const Mi of On.listSemantics())Kr[Mi]=k.accessorIndexMap.get(On.getAttribute(Mi));He.targets=He.targets||[],He.targets.push(Kr)}return Cn.listTargets().length&&!an&&(an=Cn.listTargets().map(On=>On.getName())),He}),Ie.getWeights().length&&(At.weights=Ie.getWeights()),an&&(At.extras=At.extras||{},At.extras.targetNames=an),k.meshIndexMap.set(Ie,Kt),At}),m.cameras=u.listCameras().map((Ie,Kt)=>{const At=k.createPropertyDef(Ie);if(At.type=Ie.getType(),At.type===U.Type.PERSPECTIVE){At.perspective={znear:Ie.getZNear(),zfar:Ie.getZFar(),yfov:Ie.getYFov()};const an=Ie.getAspectRatio();an!==null&&(At.perspective.aspectRatio=an)}else At.orthographic={znear:Ie.getZNear(),zfar:Ie.getZFar(),xmag:Ie.getXMag(),ymag:Ie.getYMag()};return k.cameraIndexMap.set(Ie,Kt),At}),m.nodes=u.listNodes().map((Ie,Kt)=>{const At=k.createPropertyDef(Ie);return Ue.eq(Ie.getTranslation(),[0,0,0])||(At.translation=Ie.getTranslation()),Ue.eq(Ie.getRotation(),[0,0,0,1])||(At.rotation=Ie.getRotation()),Ue.eq(Ie.getScale(),[1,1,1])||(At.scale=Ie.getScale()),Ie.getWeights().length&&(At.weights=Ie.getWeights()),k.nodeIndexMap.set(Ie,Kt),At}),m.skins=u.listSkins().map((Ie,Kt)=>{const At=k.createPropertyDef(Ie),an=Ie.getInverseBindMatrices();an&&(At.inverseBindMatrices=k.accessorIndexMap.get(an));const Cn=Ie.getSkeleton();return Cn&&(At.skeleton=k.nodeIndexMap.get(Cn)),At.joints=Ie.listJoints().map(He=>k.nodeIndexMap.get(He)),k.skinIndexMap.set(Ie,Kt),At}),u.listNodes().forEach((Ie,Kt)=>{const At=m.nodes[Kt],an=Ie.getMesh();an&&(At.mesh=k.meshIndexMap.get(an));const Cn=Ie.getCamera();Cn&&(At.camera=k.cameraIndexMap.get(Cn));const He=Ie.getSkin();He&&(At.skin=k.skinIndexMap.get(He)),Ie.listChildren().length>0&&(At.children=Ie.listChildren().map(_e=>k.nodeIndexMap.get(_e)))}),m.animations=u.listAnimations().map(Ie=>{const Kt=k.createPropertyDef(Ie),At=new Map;return Kt.samplers=Ie.listSamplers().map((an,Cn)=>{const He=k.createPropertyDef(an);return He.input=k.accessorIndexMap.get(an.getInput()),He.output=k.accessorIndexMap.get(an.getOutput()),He.interpolation=an.getInterpolation(),At.set(an,Cn),He}),Kt.channels=Ie.listChannels().map(an=>{const Cn=k.createPropertyDef(an);return Cn.sampler=At.get(an.getSampler()),Cn.target={node:k.nodeIndexMap.get(an.getTargetNode()),path:an.getTargetPath()},Cn}),Kt}),m.scenes=u.listScenes().map(Ie=>{const Kt=k.createPropertyDef(Ie);return Kt.nodes=Ie.listChildren().map(At=>k.nodeIndexMap.get(At)),Kt});const tn=u.getDefaultScene();return tn&&(m.scene=u.listScenes().indexOf(tn)),m.extensionsUsed=Ae.map(Ie=>Ie.extensionName),m.extensionsRequired=rt.map(Ie=>Ie.extensionName),Ae.forEach(Ie=>Ie.write(k)),function(Ie){const Kt=[];for(const At in Ie){const an=Ie[At];(Array.isArray(an)&&an.length===0||an===null||an===""||an&&typeof an=="object"&&Object.keys(an).length===0)&&Kt.push(At)}for(const At of Kt)delete Ie[At]}(m),b}}).write(e,{format:n.format||wt.GLTF,basename:n.basename||"",logger:this._t,vertexLayout:this.Ut,dependencies:Jn({},this.Pt),extensions:Array.from(this.gt)})}Ft(e){const{images:n,buffers:s}=e.json;return e={json:Jn({},e.json),resources:Jn({},e.resources)},n&&(e.json.images=n.map(c=>Jn({},c))),s&&(e.json.buffers=s.map(c=>Jn({},c))),e}binaryToJSON(e){const n=this.Gt(e);this.kt(n);const s=n.json;if(s.buffers&&s.buffers.some(c=>function(u,m){return m.uri!==void 0&&!(m.uri in u.resources)}(n,c)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(s.images&&s.images.some(c=>function(u,m){return m.uri!==void 0&&!(m.uri in u.resources)&&m.bufferView===void 0}(n,c)))throw new Error("Cannot resolve external images with binaryToJSON().");return n}Gt(e){const n=new Uint32Array(e,0,3);if(n[0]!==1179937895)throw new Error("Invalid glTF asset.");if(n[1]!==2)throw new Error(`Unsupported glTF binary version, "${n[1]}".`);const s=new Uint32Array(e,12,2);if(s[1]!==un.JSON)throw new Error("Missing required GLB JSON chunk.");const c=s[0],u=ot.decodeText(e.slice(20,20+c)),m=JSON.parse(u),b=20+c;if(e.byteLength<=b)return{json:m,resources:{}};const k=new Uint32Array(e,b,2);if(k[1]!==un.BIN)throw new Error("Expected GLB BIN in second chunk.");return{json:m,resources:{"@glb.bin":e.slice(b+8,b+8+k[0])}}}readBinary(e){return this.readJSON(this.binaryToJSON(e))}writeBinary(e){const{json:n,resources:s}=this.writeJSON(e,{format:wt.GLB}),c=new Uint32Array([1179937895,2,12]),u=JSON.stringify(n),m=ot.pad(ot.encodeText(u),32),b=new Uint32Array([m.byteLength,1313821514]).buffer,k=ot.concat([b,m]);c[c.length-1]+=k.byteLength;const W=Object.values(s)[0];if(!W||!W.byteLength)return ot.concat([c.buffer,k]);const ve=ot.pad(W,0),Ae=new Uint32Array([ve.byteLength,5130562]).buffer,rt=ot.concat([Ae,ve]);return c[c.length-1]+=rt.byteLength,ot.concat([c.buffer,k,rt])}}const Bn={};let Hn=class extends fn{constructor(y=Bn){super(),this.qt=void 0,this.qt=y}read(y){return this.readAsJSON(y).then(e=>this.readJSON(e))}readAsJSON(y){return y.match(/^data:application\/octet-stream;/)||new URL(y,window.location.href).pathname.match(/\.glb$/)?this.Jt(y):this.zt(y)}Wt(y,e){const n=[...y.json.images||[],...y.json.buffers||[]].map(s=>{const c=s.uri;return!c||c.match(/data:/)?Promise.resolve():fetch(function(u,m){if(!function(W){return!/^(?:[a-zA-Z]+:)?\//.test(W)}(m))return m;const b=u.split("/"),k=m.split("/");b.pop();for(let W=0;W<k.length;W++)k[W]!=="."&&(k[W]===".."?b.pop():b.push(k[W]));return b.join("/")}(e,c),this.qt).then(u=>u.arrayBuffer()).then(u=>{y.resources[c]=u})});return Promise.all(n).then(()=>{})}zt(y){var e=this;const n={json:{},resources:{}};return fetch(y,this.qt).then(s=>s.json()).then(async function(s){return n.json=s,await e.Wt(n,yr(y)),e.kt(n),n})}Jt(y){var e=this;return fetch(y,this.qt).then(n=>n.arrayBuffer()).then(async function(n){const s=e.Gt(n);return await e.Wt(s,yr(y)),e.kt(s),s})}};function yr(y){const e=y.lastIndexOf("/");return e===-1?"./":y.substr(0,e+1)}var zr=Object.defineProperty,Zr=(y,e,n)=>e in y?zr(y,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):y[e]=n,Ni=(y,e,n)=>(Zr(y,typeof e!="symbol"?e+"":e,n),n),as=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Um<"u"?Um:typeof self<"u"?self:{};function Ss(y){return y&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y}function Os(y){if(y.__esModule)return y;var e=y.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(y).forEach(function(s){var c=Object.getOwnPropertyDescriptor(y,s);Object.defineProperty(n,s,c.get?c:{enumerable:!0,get:function(){return y[s]}})}),n}function go(y){throw new Error('Could not dynamically require "'+y+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $u={exports:{}};const gc={},Xl=Object.freeze(Object.defineProperty({__proto__:null,default:gc},Symbol.toStringTag,{value:"Module"})),Co=Os(Xl);/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(y){(function(e,n){e=e||Co;var s=e.window,c=e.document,u=new function(){var t=/^(statics|enumerable|beans|preserve)$/,i=[],o=i.slice,h=Object.create,d=Object.getOwnPropertyDescriptor,v=Object.defineProperty,D=i.forEach||function(z,R){for(var J=0,Y=this.length;J<Y;J++)z.call(R,this[J],J,this)},A=function(z,R){for(var J in this)this.hasOwnProperty(J)&&z.call(R,this[J],J,this)},T=Object.assign||function(z){for(var R=1,J=arguments.length;R<J;R++){var Y=arguments[R];for(var ie in Y)Y.hasOwnProperty(ie)&&(z[ie]=Y[ie])}return z},P=function(z,R,J){if(z){var Y=d(z,"length");(Y&&typeof Y.value=="number"?D:A).call(z,R,J=J||z)}return J};function F(z,R,J,Y,ie){var j={};function X(oe,Ee){Ee=Ee||(Ee=d(R,oe))&&(Ee.get?Ee:Ee.value),typeof Ee=="string"&&Ee[0]==="#"&&(Ee=z[Ee.substring(1)]||Ee);var $e=typeof Ee=="function",Xe=Ee,ft=ie||$e&&!Ee.base?Ee&&Ee.get?oe in z:z[oe]:null,Ze;(!ie||!ft)&&($e&&ft&&(Ee.base=ft),$e&&Y!==!1&&(Ze=oe.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(j[Ze[3].toLowerCase()+Ze[4]]=Ze[2]),(!Xe||$e||!Xe.get||typeof Xe.get!="function"||!V.isPlainObject(Xe))&&(Xe={value:Xe,writable:!0}),(d(z,oe)||{configurable:!0}).configurable&&(Xe.configurable=!0,Xe.enumerable=J??!Ze),v(z,oe,Xe))}if(R){for(var I in R)R.hasOwnProperty(I)&&!t.test(I)&&X(I);for(var I in j){var G=j[I],te=z["set"+G],pe=z["get"+G]||te&&z["is"+G];pe&&(Y===!0||pe.length===0)&&X(I,{get:pe,set:te})}}return z}function V(){for(var z=0,R=arguments.length;z<R;z++){var J=arguments[z];J&&T(this,J)}return this}return F(V,{inject:function(z){if(z){var R=z.statics===!0?z:z.statics,J=z.beans,Y=z.preserve;R!==z&&F(this.prototype,z,z.enumerable,J,Y),F(this,R,null,J,Y)}for(var ie=1,j=arguments.length;ie<j;ie++)this.inject(arguments[ie]);return this},extend:function(){for(var z=this,R,J,Y=0,ie,j=arguments.length;Y<j&&!(R&&J);Y++)ie=arguments[Y],R=R||ie.initialize,J=J||ie.prototype;return R=R||function(){z.apply(this,arguments)},J=R.prototype=J||h(this.prototype),v(J,"constructor",{value:R,writable:!0,configurable:!0}),F(R,this),arguments.length&&this.inject.apply(R,arguments),R.base=z,R}}).inject({enumerable:!1,initialize:V,set:V,inject:function(){for(var z=0,R=arguments.length;z<R;z++){var J=arguments[z];J&&F(this,J,J.enumerable,J.beans,J.preserve)}return this},extend:function(){var z=h(this);return z.inject.apply(z,arguments)},each:function(z,R){return P(this,z,R)},clone:function(){return new this.constructor(this)},statics:{set:T,each:P,create:h,define:v,describe:d,clone:function(z){return T(new z.constructor,z)},isPlainObject:function(z){var R=z!=null&&z.constructor;return R&&(R===Object||R===V||R.name==="Object")},pick:function(z,R){return z!==n?z:R},slice:function(z,R,J){return o.call(z,R,J)}}})};y.exports=u,u.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+u.each(this,function(t,i){if(!/^_/.test(i)){var o=typeof t;this.push(i+": "+(o==="number"?ve.instance.number(t):o==="string"?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return u.importJSON(t,this)},exportJSON:function(t){return u.exportJSON(this,t)},toJSON:function(){return u.serialize(this)},set:function(t,i){return t&&u.filter(this,t,i,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var i=t.base.apply(this,arguments),o=i.prototype._class;return o&&!u.exports[o]&&(u.exports[o]=i),i},equals:function(t,i){if(t===i)return!0;if(t&&t.equals)return t.equals(i);if(i&&i.equals)return i.equals(t);if(t&&i&&typeof t=="object"&&typeof i=="object"){if(Array.isArray(t)&&Array.isArray(i)){var o=t.length;if(o!==i.length)return!1;for(;o--;)if(!u.equals(t[o],i[o]))return!1}else{var h=Object.keys(t),o=h.length;if(o!==Object.keys(i).length)return!1;for(;o--;){var d=h[o];if(!(i.hasOwnProperty(d)&&u.equals(t[d],i[d])))return!1}}return!0}return!1},read:function(t,i,o,h){if(this===u){var d=this.peek(t,i);return t.__index++,d}var v=this.prototype,D=v._readIndex,A=i||D&&t.__index||0,T=t.length,P=t[A];if(h=h||T-A,P instanceof this||o&&o.readNull&&P==null&&h<=1)return D&&(t.__index=A+1),P&&o&&o.clone?P.clone():P;if(P=u.create(v),D&&(P.__read=!0),P=P.initialize.apply(P,A>0||A+h<T?u.slice(t,A,A+h):t)||P,D){t.__index=A+P.__read;var F=P.__filtered;F&&(t.__filtered=F,P.__filtered=n),P.__read=n}return P},peek:function(t,i){return t[t.__index=i||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,i,o,h){for(var d=[],v,D=i||0,A=h?D+h:t.length,T=D;T<A;T++)d.push(Array.isArray(v=t[T])?this.read(v,0,o):this.read(t,T,o,1));return d},readNamed:function(t,i,o,h,d){var v=this.getNamed(t,i),D=v!==n;if(D){var A=t.__filtered;if(!A){var T=this.getSource(t);A=t.__filtered=u.create(T),A.__unfiltered=T}A[i]=n}return this.read(D?[v]:t,o,h,d)},readSupported:function(t,i){var o=this.getSource(t),h=this,d=!1;return o&&Object.keys(o).forEach(function(v){if(v in i){var D=h.readNamed(t,v);D!==n&&(i[v]=D),d=!0}}),d},getSource:function(t){var i=t.__source;if(i===n){var o=t.length===1&&t[0];i=t.__source=o&&u.isPlainObject(o)?o:null}return i},getNamed:function(t,i){var o=this.getSource(t);if(o)return i?o[i]:t.__filtered||o},hasNamed:function(t,i){return!!this.getNamed(t,i)},filter:function(t,i,o,h){var d;function v(F){if(!(o&&F in o)&&!(d&&F in d)){var V=i[F];V!==n&&(t[F]=V)}}if(h){for(var D={},A=0,T,P=h.length;A<P;A++)(T=h[A])in i&&(v(T),D[T]=!0);d=D}return Object.keys(i.__unfiltered||i).forEach(v),t},isPlainValue:function(t,i){return u.isPlainObject(t)||Array.isArray(t)||i&&typeof t=="string"},serialize:function(t,i,o,h){i=i||{};var d=!h,v;if(d&&(i.formatter=new ve(i.precision),h={length:0,definitions:{},references:{},add:function(V,z){var R="#"+V._id,J=this.references[R];if(!J){this.length++;var Y=z.call(V),ie=V._class;ie&&Y[0]!==ie&&Y.unshift(ie),this.definitions[R]=Y,J=this.references[R]=[R]}return J}}),t&&t._serialize){v=t._serialize(i,h);var D=t._class;D&&!t._compactSerialize&&(d||!o)&&v[0]!==D&&v.unshift(D)}else if(Array.isArray(t)){v=[];for(var A=0,T=t.length;A<T;A++)v[A]=u.serialize(t[A],i,o,h)}else if(u.isPlainObject(t)){v={};for(var P=Object.keys(t),A=0,T=P.length;A<T;A++){var F=P[A];v[F]=u.serialize(t[F],i,o,h)}}else typeof t=="number"?v=i.formatter.number(t,i.precision):v=t;return d&&h.length>0?[["dictionary",h.definitions],v]:v},deserialize:function(t,i,o,h,d){var v=t,D=!o,A=D&&t&&t.length&&t[0][0]==="dictionary";if(o=o||{},Array.isArray(t)){var T=t[0],P=T==="dictionary";if(t.length==1&&/^#/.test(T))return o.dictionary[T];T=u.exports[T],v=[];for(var F=T?1:0,V=t.length;F<V;F++)v.push(u.deserialize(t[F],i,o,P,A));if(T){var z=v;i?v=i(T,z,D||d):v=new T(z)}}else if(u.isPlainObject(t)){v={},h&&(o.dictionary=v);for(var R in t)v[R]=u.deserialize(t[R],i,o)}return A?v[1]:v},exportJSON:function(t,i){var o=u.serialize(t,i);return i&&i.asString==!1?o:JSON.stringify(o)},importJSON:function(t,i){return u.deserialize(typeof t=="string"?JSON.parse(t):t,function(o,h,d){var v=d&&i&&i.constructor===o,D=v?i:u.create(o.prototype);if(h.length===1&&D instanceof He&&(v||!(D instanceof Sr))){var A=h[0];u.isPlainObject(A)&&(A.insert=!1,v&&(h=h.concat([He.INSERT])))}return(v?D.set:o).apply(D,h),v&&(i=null),D})},push:function(t,i){var o=i.length;if(o<4096)t.push.apply(t,i);else{var h=t.length;t.length+=o;for(var d=0;d<o;d++)t[h+d]=i[d]}return t},splice:function(t,i,o,h){var d=i&&i.length,v=o===n;o=v?t.length:o,o>t.length&&(o=t.length);for(var D=0;D<d;D++)i[D]._index=o+D;if(v)return u.push(t,i),[];var A=[o,h];i&&u.push(A,i);for(var T=t.splice.apply(t,A),D=0,P=T.length;D<P;D++)T[D]._index=n;for(var D=o+d,P=t.length;D<P;D++)t[D]._index=D;return T},capitalize:function(t){return t.replace(/\b[a-z]/g,function(i){return i.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(i,o){return o.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var m={on:function(t,i){if(typeof t!="string")u.each(t,function(v,D){this.on(D,v)},this);else{var o=this._eventTypes,h=o&&o[t],d=this._callbacks=this._callbacks||{};d=d[t]=d[t]||[],d.indexOf(i)===-1&&(d.push(i),h&&h.install&&d.length===1&&h.install.call(this,t))}return this},off:function(t,i){if(typeof t!="string"){u.each(t,function(D,A){this.off(A,D)},this);return}var o=this._eventTypes,h=o&&o[t],d=this._callbacks&&this._callbacks[t],v;return d&&(!i||(v=d.indexOf(i))!==-1&&d.length===1?(h&&h.uninstall&&h.uninstall.call(this,t),delete this._callbacks[t]):v!==-1&&d.splice(v,1)),this},once:function(t,i){return this.on(t,function o(){i.apply(this,arguments),this.off(t,o)})},emit:function(t,i){var o=this._callbacks&&this._callbacks[t];if(!o)return!1;var h=u.slice(arguments,1),d=i&&i.target&&!i.currentTarget;o=o.slice(),d&&(i.currentTarget=this);for(var v=0,D=o.length;v<D;v++)if(o[v].apply(this,h)==!1){i&&i.stop&&i.stop();break}return d&&delete i.currentTarget,!0},responds:function(t){return!!(this._callbacks&&this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var i=this._eventTypes,o=this._callbacks,h=t?"install":"uninstall";if(i){for(var d in o)if(o[d].length>0){var v=i[d],D=v&&v[h];D&&D.call(this,d)}}},statics:{inject:function t(i){var o=i._events;if(o){var h={};u.each(o,function(d,v){var D=typeof d=="string",A=D?d:v,T=u.capitalize(A),P=A.substring(2).toLowerCase();h[P]=D?{}:d,A="_"+A,i["get"+T]=function(){return this[A]},i["set"+T]=function(F){var V=this[A];V&&this.off(P,V),F&&this.on(P,F),this[A]=F}}),i._eventTypes=h}return t.base.apply(this,arguments)}}},b=u.extend({_class:"PaperScope",initialize:function t(){ar=this,this.settings=new u({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var i=t.prototype;if(!this.support){var o=di.getContext(1,1)||{};i.support={nativeDash:"setLineDash"in o||"mozDash"in o,nativeBlendModes:Ai.nativeModes},di.release(o)}if(!this.agent){var h=e.navigator.userAgent.toLowerCase(),d=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(h)||[])[0],v=d==="darwin"?"mac":d,D=i.agent=i.browser={platform:v};v&&(D[v]=!0),h.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(A,T,P,F,V){if(!D.chrome){var z=T==="opera"?F:/^(node|trident)$/.test(T)?V:P;D.version=z,D.versionNumber=parseFloat(z),T={trident:"msie",jsdom:"node"}[T]||T,D.name=T,D[T]=!0}}),D.chrome&&delete D.webkit,D.atom&&delete D.chrome}},version:"0.12.17",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,i){var o=ar.PaperScript.execute(t,this,i);return zi.updateFocus(),o},install:function(t){var i=this;u.each(["project","view","tool"],function(h){u.define(t,h,{configurable:!0,get:function(){return i[h]}})});for(var o in this)!/^_/.test(o)&&this[o]&&(t[o]=this[o])},setup:function(t){return ar=this,this.project=new Cn(t),this},createCanvas:function(t,i){return di.getCanvas(t,i)},activate:function(){ar=this},clear:function(){for(var t=this.projects,i=this.tools,o=t.length-1;o>=0;o--)t[o].remove();for(var o=i.length-1;o>=0;o--)i[o].remove()},remove:function(){this.clear(),delete b._scopes[this._id]},statics:new function(){function t(i){return i+="Attribute",function(o,h){return o[i](h)||o[i]("data-paper-"+h)}}return{_scopes:{},_id:0,get:function(i){return this._scopes[i]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),k=u.extend(m,{initialize:function(t){this._scope=ar,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(u.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),W={findItemBoundsCollisions:function(t,i,o){function h(D){for(var A=new Array(D.length),T=0;T<D.length;T++){var P=D[T].getBounds();A[T]=[P.left,P.top,P.right,P.bottom]}return A}var d=h(t),v=!i||i===t?d:h(i);return this.findBoundsCollisions(d,v,o||0)},findCurveBoundsCollisions:function(t,i,o,h){function d(z){for(var R=Math.min,J=Math.max,Y=new Array(z.length),ie=0;ie<z.length;ie++){var j=z[ie];Y[ie]=[R(j[0],j[2],j[4],j[6]),R(j[1],j[3],j[5],j[7]),J(j[0],j[2],j[4],j[6]),J(j[1],j[3],j[5],j[7])]}return Y}var v=d(t),D=!i||i===t?v:d(i);if(h){for(var A=this.findBoundsCollisions(v,D,o||0,!1,!0),T=this.findBoundsCollisions(v,D,o||0,!0,!0),P=[],F=0,V=A.length;F<V;F++)P[F]={hor:A[F],ver:T[F]};return P}return this.findBoundsCollisions(v,D,o||0)},findBoundsCollisions:function(t,i,o,h,d){var v=!i||t===i,D=v?t:t.concat(i),A=t.length,T=D.length;function P(Zn,Kn,ur){for(var yn=0,An=Zn.length;yn<An;){var qn=An+yn>>>1;D[Zn[qn]][Kn]<ur?yn=qn+1:An=qn}return yn-1}for(var F=h?1:0,V=F+2,z=h?0:1,R=z+2,J=new Array(T),Y=0;Y<T;Y++)J[Y]=Y;J.sort(function(Zn,Kn){return D[Zn][F]-D[Kn][F]});for(var ie=[],j=new Array(A),Y=0;Y<T;Y++){var X=J[Y],I=D[X],G=v?X:X-A,te=X<A,pe=v||!te,oe=te?[]:null;if(ie.length){var Ee=P(ie,V,I[F]-o)+1;if(ie.splice(0,Ee),v&&d){oe=oe.concat(ie);for(var $e=0;$e<ie.length;$e++){var Xe=ie[$e];j[Xe].push(G)}}else for(var ft=I[R],Ze=I[z],$e=0;$e<ie.length;$e++){var Xe=ie[$e],yt=D[Xe],Et=Xe<A,Yt=v||Xe>=A;(d||(te&&Yt||pe&&Et)&&ft>=yt[z]-o&&Ze<=yt[R]+o)&&(te&&Yt&&oe.push(v?Xe:Xe-A),pe&&Et&&j[Xe].push(G))}}if(te&&(t===i&&oe.push(X),j[X]=oe),ie.length){var qt=I[V],ln=P(ie,V,qt);ie.splice(ln+1,0,X)}else ie.push(X)}for(var Y=0;Y<j.length;Y++){var In=j[Y];In&&In.sort(function(Kn,ur){return Kn-ur})}return j}},ve=u.extend({initialize:function(t){this.precision=u.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,i,o){return this.number(t)+(o||",")+this.number(i)},point:function(t,i){return this.number(t.x)+(i||",")+this.number(t.y)},size:function(t,i){return this.number(t.width)+(i||",")+this.number(t.height)},rectangle:function(t,i){return this.point(t,i)+(i||",")+this.size(t,i)}});ve.instance=new ve;var Ae=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],i=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],o=Math.abs,h=Math.sqrt,d=Math.pow,v=Math.log2||function(V){return Math.log(V)*Math.LOG2E},D=1e-12,A=112e-18;function T(V,z,R){return V<z?z:V>R?R:V}function P(V,z,R){function J(Ee){var $e=Ee*134217729,Xe=Ee-$e,ft=Xe+$e,Ze=Ee-ft;return[ft,Ze]}var Y=z*z-V*R,ie=z*z+V*R;if(o(Y)*3<ie){var j=J(V),X=J(z),I=J(R),G=z*z,te=X[0]*X[0]-G+2*X[0]*X[1]+X[1]*X[1],pe=V*R,oe=j[0]*I[0]-pe+j[0]*I[1]+j[1]*I[0]+j[1]*I[1];Y=G-pe+(te-oe)}return Y}function F(){var V=Math.max.apply(Math,arguments);return V&&(V<1e-8||V>1e8)?d(2,-Math.round(v(V))):0}return{EPSILON:D,MACHINE_EPSILON:A,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(h(2)-1)/3,isZero:function(V){return V>=-1e-12&&V<=D},isMachineZero:function(V){return V>=-112e-18&&V<=A},clamp:T,integrate:function(V,z,R,J){for(var Y=t[J-2],ie=i[J-2],j=(R-z)*.5,X=j+z,I=0,G=J+1>>1,te=J&1?ie[I++]*V(X):0;I<G;){var pe=j*Y[I];te+=ie[I++]*(V(X+pe)+V(X-pe))}return j*te},findRoot:function(V,z,R,J,Y,ie,j){for(var X=0;X<ie;X++){var I=V(R),G=I/z(R),te=R-G;if(o(G)<j){R=te;break}I>0?(Y=R,R=te<=J?(J+Y)*.5:te):(J=R,R=te>=Y?(J+Y)*.5:te)}return T(R,J,Y)},solveQuadratic:function(V,z,R,J,Y,ie){var j,X=1/0;if(o(V)<D){if(o(z)<D)return o(R)<D?-1:0;j=-R/z}else{z*=-.5;var I=P(V,z,R);if(I&&o(I)<A){var G=F(o(V),o(z),o(R));G&&(V*=G,z*=G,R*=G,I=P(V,z,R))}if(I>=-112e-18){var te=I<0?0:h(I),pe=z+(z<0?-te:te);pe===0?(j=R/V,X=-j):(j=pe/V,X=R/pe)}}var oe=0,Ee=Y==null,$e=Y-D,Xe=ie+D;return isFinite(j)&&(Ee||j>$e&&j<Xe)&&(J[oe++]=Ee?j:T(j,Y,ie)),X!==j&&isFinite(X)&&(Ee||X>$e&&X<Xe)&&(J[oe++]=Ee?X:T(X,Y,ie)),oe},solveCubic:function(V,z,R,J,Y,ie,j){var X=F(o(V),o(z),o(R),o(J)),I,G,te,pe,oe;X&&(V*=X,z*=X,R*=X,J*=X);function Ee(ln){I=ln;var In=V*I;G=In+z,te=G*I+R,pe=(In+G)*I+te,oe=te*I+J}if(o(V)<D)V=z,G=R,te=J,I=1/0;else if(o(J)<D)G=z,te=R,I=0;else{Ee(-(z/V)/3);var $e=oe/V,Xe=d(o($e),1/3),ft=$e<0?-1:1,Ze=-pe/V,yt=Ze>0?1.324717957244746*Math.max(Xe,h(Ze)):Xe,Et=I-ft*yt;if(Et!==I){do Ee(Et),Et=pe===0?I:I-oe/pe/(1+A);while(ft*Et>ft*I);o(V)*I*I>o(J/I)&&(te=-J/I,G=(te-R)/I)}}var Yt=Ae.solveQuadratic(V,G,te,Y,ie,j),qt=ie==null;return isFinite(I)&&(Yt===0||Yt>0&&I!==Y[0]&&I!==Y[1])&&(qt||I>ie-D&&I<j+D)&&(Y[Yt++]=qt?I:T(I,ie,j)),Yt}}},rt={_id:1,_pools:{},get:function(t){if(t){var i=this._pools[t];return i||(i=this._pools[t]={_id:1}),i._id++}else return this._id++}},re=u.extend({_class:"Point",_readIndex:!0,initialize:function(t,i){var o=typeof t,h=this.__read,d=0;if(o==="number"){var v=typeof i=="number";this._set(t,v?i:t),h&&(d=v?2:1)}else if(o==="undefined"||t===null)this._set(0,0),h&&(d=t===null?1:0);else{var D=o==="string"?t.split(/[\s,]+/)||[]:t;d=1,Array.isArray(D)?this._set(+D[0],+(D.length>1?D[1]:D[0])):"x"in D?this._set(D.x||0,D.y||0):"width"in D?this._set(D.width||0,D.height||0):"angle"in D?(this._set(D.length||0,0),this.setAngle(D.angle||0)):(this._set(0,0),d=0)}return h&&(this.__read=d),this},set:"#initialize",_set:function(t,i){return this.x=t,this.y=i,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new re(this.x,this.y)},toString:function(){var t=ve.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var i=t.formatter;return[i.number(this.x),i.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var i=this._angle||0;this._set(Math.cos(i)*t,Math.sin(i)*t)}else{var o=t/this.getLength();Ae.isZero(o)&&this.getAngle(),this._set(this.x*o,this.y*o)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=re.read(arguments),i=this.getLength()*t.getLength();if(Ae.isZero(i))return NaN;var o=this.dot(t)/i;return Math.acos(o<-1?-1:o>1?1:o)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var i=this.getLength();this._set(Math.cos(t)*i,Math.sin(t)*i)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=re.read(arguments);return Math.atan2(this.cross(t),this.dot(t))*180/Math.PI},getDistance:function(){var t=arguments,i=re.read(t),o=i.x-this.x,h=i.y-this.y,d=o*o+h*h,v=u.read(t);return v?d:Math.sqrt(d)},normalize:function(t){t===n&&(t=1);var i=this.getLength(),o=i!==0?t/i:0,h=new re(this.x*o,this.y*o);return o>=0&&(h._angle=this._angle),h},rotate:function(t,i){if(t===0)return this.clone();t=t*Math.PI/180;var o=i?this.subtract(i):this,h=Math.sin(t),d=Math.cos(t);return o=new re(o.x*d-o.y*h,o.x*h+o.y*d),i?o.add(i):o},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=re.read(arguments);return new re(this.x+t.x,this.y+t.y)},subtract:function(){var t=re.read(arguments);return new re(this.x-t.x,this.y-t.y)},multiply:function(){var t=re.read(arguments);return new re(this.x*t.x,this.y*t.y)},divide:function(){var t=re.read(arguments);return new re(this.x/t.x,this.y/t.y)},modulo:function(){var t=re.read(arguments);return new re(this.x%t.x,this.y%t.y)},negate:function(){return new re(-this.x,-this.y)},isInside:function(){return Ie.read(arguments).contains(this)},isClose:function(){var t=arguments,i=re.read(t),o=u.read(t);return this.getDistance(i)<=o},isCollinear:function(){var t=re.read(arguments);return re.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=re.read(arguments);return re.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=Ae.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=re.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=re.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=re.read(arguments),i=t.isZero()?0:this.dot(t)/t.dot(t);return new re(t.x*i,t.y*i)},statics:{min:function(){var t=arguments,i=re.read(t),o=re.read(t);return new re(Math.min(i.x,o.x),Math.min(i.y,o.y))},max:function(){var t=arguments,i=re.read(t),o=re.read(t);return new re(Math.max(i.x,o.x),Math.max(i.y,o.y))},random:function(){return new re(Math.random(),Math.random())},isCollinear:function(t,i,o,h){return Math.abs(t*h-i*o)<=Math.sqrt((t*t+i*i)*(o*o+h*h))*1e-8},isOrthogonal:function(t,i,o,h){return Math.abs(t*o+i*h)<=Math.sqrt((t*t+i*i)*(o*o+h*h))*1e-8}}},u.each(["round","ceil","floor","abs"],function(t){var i=Math[t];this[t]=function(){return new re(i(this.x),i(this.y))}},{})),mt=re.extend({initialize:function(t,i,o,h){this._x=t,this._y=i,this._owner=o,this._setter=h},_set:function(t,i,o){return this._x=t,this._y=i,o||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),nt=u.extend({_class:"Size",_readIndex:!0,initialize:function(t,i){var o=typeof t,h=this.__read,d=0;if(o==="number"){var v=typeof i=="number";this._set(t,v?i:t),h&&(d=v?2:1)}else if(o==="undefined"||t===null)this._set(0,0),h&&(d=t===null?1:0);else{var D=o==="string"?t.split(/[\s,]+/)||[]:t;d=1,Array.isArray(D)?this._set(+D[0],+(D.length>1?D[1]:D[0])):"width"in D?this._set(D.width||0,D.height||0):"x"in D?this._set(D.x||0,D.y||0):(this._set(0,0),d=0)}return h&&(this.__read=d),this},set:"#initialize",_set:function(t,i){return this.width=t,this.height=i,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new nt(this.width,this.height)},toString:function(){var t=ve.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var i=t.formatter;return[i.number(this.width),i.number(this.height)]},add:function(){var t=nt.read(arguments);return new nt(this.width+t.width,this.height+t.height)},subtract:function(){var t=nt.read(arguments);return new nt(this.width-t.width,this.height-t.height)},multiply:function(){var t=nt.read(arguments);return new nt(this.width*t.width,this.height*t.height)},divide:function(){var t=nt.read(arguments);return new nt(this.width/t.width,this.height/t.height)},modulo:function(){var t=nt.read(arguments);return new nt(this.width%t.width,this.height%t.height)},negate:function(){return new nt(-this.width,-this.height)},isZero:function(){var t=Ae.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,i){return new nt(Math.min(t.width,i.width),Math.min(t.height,i.height))},max:function(t,i){return new nt(Math.max(t.width,i.width),Math.max(t.height,i.height))},random:function(){return new nt(Math.random(),Math.random())}}},u.each(["round","ceil","floor","abs"],function(t){var i=Math[t];this[t]=function(){return new nt(i(this.width),i(this.height))}},{})),tn=nt.extend({initialize:function(t,i,o,h){this._width=t,this._height=i,this._owner=o,this._setter=h},_set:function(t,i,o){return this._width=t,this._height=i,o||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),Ie=u.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,i,o,h){var d=arguments,v=typeof t,D;if(v==="number"?(this._set(t,i,o,h),D=4):v==="undefined"||t===null?(this._set(0,0,0,0),D=t===null?1:0):d.length===1&&(Array.isArray(t)?(this._set.apply(this,t),D=1):t.x!==n||t.width!==n?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),D=1):t.from===n&&t.to===n&&(this._set(0,0,0,0),u.readSupported(d,this)&&(D=1))),D===n){var A=re.readNamed(d,"from"),T=u.peek(d),P=A.x,F=A.y,V,z;if(T&&T.x!==n||u.hasNamed(d,"to")){var R=re.readNamed(d,"to");V=R.x-P,z=R.y-F,V<0&&(P=R.x,V=-V),z<0&&(F=R.y,z=-z)}else{var J=nt.read(d);V=J.width,z=J.height}this._set(P,F,V,z),D=d.__index}var Y=d.__filtered;return Y&&(this.__filtered=Y),this.__read&&(this.__read=D),this},set:"#initialize",_set:function(t,i,o,h){return this.x=t,this.y=i,this.width=o,this.height=h,this},clone:function(){return new Ie(this.x,this.y,this.width,this.height)},equals:function(t){var i=u.isPlainValue(t)?Ie.read(arguments):t;return i===this||i&&this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height||!1},toString:function(){var t=ve.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var i=t.formatter;return[i.number(this.x),i.number(this.y),i.number(this.width),i.number(this.height)]},getPoint:function(t){var i=t?re:mt;return new i(this.x,this.y,this,"setPoint")},setPoint:function(){var t=re.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){var i=t?nt:tn;return new i(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=nt.read(arguments),i=this._sx,o=this._sy,h=t.width,d=t.height;i&&(this.x+=(this.width-h)*i),o&&(this.y+=(this.height-d)*o),this.width=h,this.height=d,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var i=t-this.x;this.width-=this._sx===.5?i*2:i}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var i=t-this.y;this.height-=this._sy===.5?i*2:i}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var i=t-this.x;this.width=this._sx===.5?i*2:i}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var i=t-this.y;this.height=this._sy===.5?i*2:i}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||this._sx===.5?this.x=t-this.width/2:(this._sx&&(this.x+=(t-this.x)*2*this._sx),this.width=(t-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||this._sy===.5?this.y=t-this.height/2:(this._sy&&(this.y+=(t-this.y)*2*this._sy),this.height=(t-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(t){var i=t?re:mt;return new i(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=re.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(t){return t&&t.width!==n||(Array.isArray(t)?t:arguments).length===4?this._containsRectangle(Ie.read(arguments)):this._containsPoint(re.read(arguments))},_containsPoint:function(t){var i=t.x,o=t.y;return i>=this.x&&o>=this.y&&i<=this.x+this.width&&o<=this.y+this.height},_containsRectangle:function(t){var i=t.x,o=t.y;return i>=this.x&&o>=this.y&&i+t.width<=this.x+this.width&&o+t.height<=this.y+this.height},intersects:function(){var t=Ie.read(arguments),i=u.read(arguments)||0;return t.x+t.width>this.x-i&&t.y+t.height>this.y-i&&t.x<this.x+this.width+i&&t.y<this.y+this.height+i},intersect:function(){var t=Ie.read(arguments),i=Math.max(this.x,t.x),o=Math.max(this.y,t.y),h=Math.min(this.x+this.width,t.x+t.width),d=Math.min(this.y+this.height,t.y+t.height);return new Ie(i,o,h-i,d-o)},unite:function(){var t=Ie.read(arguments),i=Math.min(this.x,t.x),o=Math.min(this.y,t.y),h=Math.max(this.x+this.width,t.x+t.width),d=Math.max(this.y+this.height,t.y+t.height);return new Ie(i,o,h-i,d-o)},include:function(){var t=re.read(arguments),i=Math.min(this.x,t.x),o=Math.min(this.y,t.y),h=Math.max(this.x+this.width,t.x),d=Math.max(this.y+this.height,t.y);return new Ie(i,o,h-i,d-o)},expand:function(){var t=nt.read(arguments),i=t.width,o=t.height;return new Ie(this.x-i/2,this.y-o/2,this.width+i,this.height+o)},scale:function(t,i){return this.expand(this.width*t-this.width,this.height*(i===n?t:i)-this.height)}},u.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,i){var o=t.join(""),h=/^[RL]/.test(o);i>=4&&(t[1]+=h?"Y":"X");var d=t[h?0:1],v=t[h?1:0],D="get"+d,A="get"+v,T="set"+d,P="set"+v,F="get"+o,V="set"+o;this[F]=function(z){var R=z?re:mt;return new R(this[D](),this[A](),this,V)},this[V]=function(){var z=re.read(arguments);this[T](z.x),this[P](z.y)}},{beans:!0})),Kt=Ie.extend({initialize:function(t,i,o,h,d,v){this._set(t,i,o,h,!0),this._owner=d,this._setter=v},_set:function(t,i,o,h,d){return this._x=t,this._y=i,this._width=o,this._height=h,d||this._owner[this._setter](this),this}},new function(){var t=Ie.prototype;return u.each(["x","y","width","height"],function(i){var o=u.capitalize(i),h="_"+i;this["get"+o]=function(){return this[h]},this["set"+o]=function(d){this[h]=d,this._dontNotify||this._owner[this._setter](this)}},u.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(i){var o="set"+i;this[o]=function(){this._dontNotify=!0,t[o].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(i){var o=this._owner;o._changeSelection&&o._changeSelection(2,i)}}))}),At=u.extend({_class:"Matrix",initialize:function t(i,o){var h=arguments,d=h.length,v=!0;if(d>=6?this._set.apply(this,h):d===1||d===2?i instanceof t?this._set(i._a,i._b,i._c,i._d,i._tx,i._ty,o):Array.isArray(i)?this._set.apply(this,o?i.concat([o]):i):v=!1:d?v=!1:this.reset(),!v)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,i,o,h,d,v,D){return this._a=t,this._b=i,this._c=o,this._d=h,this._tx=d,this._ty=v,D||this._changed(),this},_serialize:function(t,i){return u.serialize(this.getValues(),t,!0,i)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new At(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=ve.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,i){var o=this._owner;return o?(o.transform(null,u.pick(t,!0),i),this.isIdentity()):!1},translate:function(){var t=re.read(arguments),i=t.x,o=t.y;return this._tx+=i*this._a+o*this._c,this._ty+=i*this._b+o*this._d,this._changed(),this},scale:function(){var t=arguments,i=re.read(t),o=re.read(t,0,{readNull:!0});return o&&this.translate(o),this._a*=i.x,this._b*=i.x,this._c*=i.y,this._d*=i.y,o&&this.translate(o.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var i=re.read(arguments,1),o=i.x,h=i.y,d=Math.cos(t),v=Math.sin(t),D=o-o*d+h*v,A=h-o*v-h*d,T=this._a,P=this._b,F=this._c,V=this._d;return this._a=d*T+v*F,this._b=d*P+v*V,this._c=-v*T+d*F,this._d=-v*P+d*V,this._tx+=D*T+A*F,this._ty+=D*P+A*V,this._changed(),this},shear:function(){var t=arguments,i=re.read(t),o=re.read(t,0,{readNull:!0});o&&this.translate(o);var h=this._a,d=this._b;return this._a+=i.y*this._c,this._b+=i.y*this._d,this._c+=i.x*h,this._d+=i.x*d,o&&this.translate(o.negate()),this._changed(),this},skew:function(){var t=arguments,i=re.read(t),o=re.read(t,0,{readNull:!0}),h=Math.PI/180,d=new re(Math.tan(i.x*h),Math.tan(i.y*h));return this.shear(d,o)},append:function(t,i){if(t){var o=this._a,h=this._b,d=this._c,v=this._d,D=t._a,A=t._c,T=t._b,P=t._d,F=t._tx,V=t._ty;this._a=D*o+T*d,this._c=A*o+P*d,this._b=D*h+T*v,this._d=A*h+P*v,this._tx+=F*o+V*d,this._ty+=F*h+V*v,i||this._changed()}return this},prepend:function(t,i){if(t){var o=this._a,h=this._b,d=this._c,v=this._d,D=this._tx,A=this._ty,T=t._a,P=t._c,F=t._b,V=t._d,z=t._tx,R=t._ty;this._a=T*o+P*h,this._c=T*d+P*v,this._b=F*o+V*h,this._d=F*d+V*v,this._tx=T*D+P*A+z,this._ty=F*D+V*A+R,i||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,i=this._b,o=this._c,h=this._d,d=this._tx,v=this._ty,D=t*h-i*o,A=null;return D&&!isNaN(D)&&isFinite(d)&&isFinite(v)&&(this._a=h/D,this._b=-i/D,this._c=-o/D,this._d=t/D,this._tx=(o*v-h*d)/D,this._ty=(i*d-t*v)/D,A=this),A},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new At(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,i,o){return arguments.length<3?this._transformPoint(re.read(arguments)):this._transformCoordinates(t,i,o)},_transformPoint:function(t,i,o){var h=t.x,d=t.y;return i||(i=new re),i._set(h*this._a+d*this._c+this._tx,h*this._b+d*this._d+this._ty,o)},_transformCoordinates:function(t,i,o){for(var h=0,d=2*o;h<d;h+=2){var v=t[h],D=t[h+1];i[h]=v*this._a+D*this._c+this._tx,i[h+1]=v*this._b+D*this._d+this._ty}return i},_transformCorners:function(t){var i=t.x,o=t.y,h=i+t.width,d=o+t.height,v=[i,o,h,o,h,d,i,d];return this._transformCoordinates(v,v,4)},_transformBounds:function(t,i,o){for(var h=this._transformCorners(t),d=h.slice(0,2),v=d.slice(),D=2;D<8;D++){var A=h[D],T=D&1;A<d[T]?d[T]=A:A>v[T]&&(v[T]=A)}return i||(i=new Ie),i._set(d[0],d[1],v[0]-d[0],v[1]-d[1],o)},inverseTransform:function(){return this._inverseTransform(re.read(arguments))},_inverseTransform:function(t,i,o){var h=this._a,d=this._b,v=this._c,D=this._d,A=this._tx,T=this._ty,P=h*D-d*v,F=null;if(P&&!isNaN(P)&&isFinite(A)&&isFinite(T)){var V=t.x-this._tx,z=t.y-this._ty;i||(i=new re),F=i._set((V*D-z*v)/P,(z*h-V*d)/P,o)}return F},decompose:function(){var t=this._a,i=this._b,o=this._c,h=this._d,d=t*h-i*o,v=Math.sqrt,D=Math.atan2,A=180/Math.PI,T,P,F;if(t!==0||i!==0){var V=v(t*t+i*i);T=Math.acos(t/V)*(i>0?1:-1),P=[V,d/V],F=[D(t*o+i*h,V*V),0]}else if(o!==0||h!==0){var z=v(o*o+h*h);T=Math.asin(o/z)*(h>0?1:-1),P=[d/z,z],F=[0,D(t*o+i*h,z*z)]}else T=0,F=P=[0,0];return{translation:this.getTranslation(),rotation:T*A,scaling:new re(P),skewing:new re(F[0]*A,F[1]*A)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new re(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},u.each(["a","b","c","d","tx","ty"],function(t){var i=u.capitalize(t),o="_"+t;this["get"+i]=function(){return this[o]},this["set"+i]=function(h){this[o]=h,this._changed()}},{})),an=u.extend({_class:"Line",initialize:function(t,i,o,h,d){var v=!1;arguments.length>=4?(this._px=t,this._py=i,this._vx=o,this._vy=h,v=d):(this._px=t.x,this._py=t.y,this._vx=i.x,this._vy=i.y,v=o),v||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new re(this._px,this._py)},getVector:function(){return new re(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,i){return an.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,i)},getSide:function(t,i){return an.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,i)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return an.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return re.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return re.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,i,o,h,d,v,D,A,T,P){T||(o-=t,h-=i,D-=d,A-=v);var F=o*A-h*D;if(!Ae.isMachineZero(F)){var V=t-d,z=i-v,R=(D*z-A*V)/F,J=(o*z-h*V)/F,Y=1e-12,ie=-Y,j=1+Y;if(P||ie<R&&R<j&&ie<J&&J<j)return P||(R=R<=0?0:R>=1?1:R),new re(t+R*o,i+R*h)}},getSide:function(t,i,o,h,d,v,D,A){D||(o-=t,h-=i);var T=d-t,P=v-i,F=T*h-P*o;return!A&&Ae.isMachineZero(F)&&(F=(T*o+T*o)/(o*o+h*h),F>=0&&F<=1&&(F=0)),F<0?-1:F>0?1:0},getSignedDistance:function(t,i,o,h,d,v,D){return D||(o-=t,h-=i),o===0?h>0?d-t:t-d:h===0?o<0?v-i:i-v:((d-t)*h-(v-i)*o)/(h>o?h*Math.sqrt(1+o*o/(h*h)):o*Math.sqrt(1+h*h/(o*o)))},getDistance:function(t,i,o,h,d,v,D){return Math.abs(an.getSignedDistance(t,i,o,h,d,v,D))}}}),Cn=k.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){k.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new qo(null,null,this),this._view=zi.create(this,t||di.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,i){return u.serialize(this._children,t,!0,i)},_changed:function(t,i){if(t&1){var o=this._view;o&&(o._needsUpdate=!0,!o._requested&&o._autoUpdate&&o.requestUpdate())}var h=this._changes;if(h&&i){var d=this._changesById,v=i._id,D=d[v];D?D.flags|=t:h.push(d[v]={item:i,flags:t})}},clear:function(){for(var t=this._children,i=t.length-1;i>=0;i--)t[i].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return t.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Sr({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],i={};return this.getItems({class:Mi,match:function(o){var h=o._definition,d=h._id;return i[d]||(i[d]=!0,t.push(h)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,i=[];for(var o in t){var h=t[o],d=h._selection;d&1&&h.isInserted()?i.push(h):d||this._updateSelection(h)}return i},_updateSelection:function(t){var i=t._id,o=this._selectionItems;t._selection?o[i]!==t&&(this._selectionCount++,o[i]=t):o[i]===t&&(this._selectionCount--,delete o[i])},selectAll:function(){for(var t=this._children,i=0,o=t.length;i<o;i++)t[i].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var i in t)t[i].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(n,t)},insertLayer:function(t,i){if(i instanceof Sr){i._remove(!1,!0),u.splice(this._children,[i],t,0),i._setProject(this,!0);var o=i._name;o&&i.setName(o),this._changes&&i._changed(5),this._activeLayer||(this._activeLayer=i)}else i=null;return i},_insertItem:function(t,i,o){return i=this.insertLayer(t,i)||(this._activeLayer||this._insertItem(n,new Sr(He.NO_INSERT),!0)).insertChild(t,i),o&&i.activate&&i.activate(),i},getItems:function(t){return He._getItems(this,t)},getItem:function(t){return He._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var i=this._activeLayer;return u.importJSON(t,i&&i.isEmpty()&&i)},removeOn:function(t){var i=this._removeSets;if(i){t==="mouseup"&&(i.mousedrag=null);var o=i[t];if(o){for(var h in o){var d=o[h];for(var v in i){var D=i[v];D&&D!=o&&delete D[d._id]}d.remove()}i[t]=null}}},draw:function(t,i,o){this._updateVersion++,t.save(),i.applyToContext(t);for(var h=this._children,d=new u({offset:new re(0,0),pixelRatio:o,viewMatrix:i.isIdentity()?null:i,matrices:[new At],updateMatrix:!0}),v=0,D=h.length;v<D;v++)h[v].draw(t,d);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var A=this._selectionItems,T=this._scope.settings.handleSize,P=this._updateVersion;for(var F in A)A[F]._drawSelection(t,i,T,A,P);t.restore()}}}),He=u.extend(m,{statics:{extend:function t(i){return i._serializeFields&&(i._serializeFields=u.set({},this.prototype._serializeFields,i._serializeFields)),t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new At,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return u.each(t,function(i){this._events[i]={install:function(o){this.getView()._countItemEvent(o,1)},uninstall:function(o){this.getView()._countItemEvent(o,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,i){var o=t&&u.isPlainObject(t),h=o&&t.internal===!0,d=this._matrix=new At,v=o&&t.project||ar.project,D=ar.settings;return this._id=h?null:rt.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&D.applyMatrix,i&&d.translate(i),d._owner=this,this._style=new qo(v._currentStyle,this,v),h||o&&t.insert==!1||!D.insertItems&&!(o&&t.insert==!0)?this._setProject(v):(o&&t.parent||v)._insertItem(n,this,!0),o&&t!==He.NO_INSERT&&t!==He.INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),o},_serialize:function(t,i){var o={},h=this;function d(v){for(var D in v){var A=h[D];u.equals(A,D==="leading"?v.fontSize*1.2:v[D])||(o[D]=u.serialize(A,t,D!=="data",i))}}return d(this._serializeFields),this instanceof _e||d(this._style._defaults),[this._class,o]},_changed:function(t){var i=this._symbol,o=this._parent||i,h=this._project;t&8&&(this._bounds=this._position=this._decomposed=n),t&16&&(this._globalMatrix=n),o&&t&72&&He._clearBoundsCache(o),t&2&&He._clearBoundsCache(this),h&&h._changed(t,this),i&&i._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var i=this._getOwner();if(t&&i){var o=i._children,h=i._namedChildren;(h[t]=h[t]||[]).push(this),t in o||(o[t]=this)}this._name=t||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},u.each(["locked","visible","blendMode","opacity","guide"],function(t){var i=u.capitalize(t),o="_"+t,h={locked:256,visible:265};this["get"+i]=function(){return this[o]},this["set"+i]=function(d){d!=this[o]&&(this[o]=d,this._changed(h[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var i=this._project;i&&(i._updateSelection(this),this._changed(257))}},_changeSelection:function(t,i){var o=this._selection;this.setSelection(i?o|t:o&~t)},isSelected:function(){if(this._selectChildren){for(var t=this._children,i=0,o=t.length;i<o;i++)if(t[i].isSelected())return!0}return!!(this._selection&1)},setSelected:function(t){if(this._selectChildren)for(var i=this._children,o=0,h=i.length;o<h;o++)i[o].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,i=!!(this._selection&1);if(t&&i){for(var o=0,h=t.length;o<h;o++)if(!t[o].isFullySelected())return!1;return!0}return i},setFullySelected:function(t){var i=this._children;if(i)for(var o=0,h=i.length;o<h;o++)i[o].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var i=t?re:mt,o=this._position||(this._position=this._getPositionFromBounds());return new i(o.x,o.y,this,"setPosition")},setPosition:function(){this.translate(re.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new mt(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=re.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},u.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,i){this[i]=function(o){return this.getBounds(o,t)}},{beans:!0,getBounds:function(t,i){var o=i||t instanceof At,h=u.set({},o?i:t,this._boundsOptions);(!h.stroke||this.getStrokeScaling())&&(h.cacheItem=this);var d=this._getCachedBounds(o&&t,h).rect;return arguments.length?d:new Kt(d.x,d.y,d.width,d.height,this,"setBounds")},setBounds:function(){var t=Ie.read(arguments),i=this.getBounds(),o=this._matrix,h=new At,d=t.getCenter();h.translate(d),(t.width!=i.width||t.height!=i.height)&&(o.isInvertible()||(o.set(o._backup||new At().translate(o.getTranslation())),i=this.getBounds()),h.scale(i.width!==0?t.width/i.width:0,i.height!==0?t.height/i.height:0)),d=i.getCenter(),h.translate(-d.x,-d.y),this.transform(h)},_getBounds:function(t,i){var o=this._children;return!o||!o.length?new Ie:(He._updateBoundsCache(this,i.cacheItem),He._getBounds(o,t,i))},_getBoundsCacheKey:function(t,i){return[t.stroke?1:0,t.handle?1:0,i?1:0].join("")},_getCachedBounds:function(t,i,o){t=t&&t._orNullIfIdentity();var h=i.internal&&!o,d=i.cacheItem,v=h?null:this._matrix._orNullIfIdentity(),D=d&&(!t||t.equals(v))&&this._getBoundsCacheKey(i,h),A=this._bounds;if(He._updateBoundsCache(this._parent||this._symbol,d),D&&A&&D in A){var T=A[D];return{rect:T.rect.clone(),nonscaling:T.nonscaling}}var P=this._getBounds(t||v,i),F=P.rect||P,V=this._style,z=P.nonscaling||V.hasStroke()&&!V.getStrokeScaling();if(D){A||(this._bounds=A={});var T=A[D]={rect:F.clone(),nonscaling:z,internal:h}}return{rect:F,nonscaling:z}},_getStrokeMatrix:function(t,i){var o=this.getStrokeScaling()?null:i&&i.internal?this:this._parent||this._symbol&&this._symbol._item,h=o?o.getViewMatrix().invert():t;return h&&h._shiftless()},statics:{_updateBoundsCache:function(t,i){if(t&&i){var o=i._id,h=t._boundsCache=t._boundsCache||{ids:{},list:[]};h.ids[o]||(h.list.push(i),h.ids[o]=i)}},_clearBoundsCache:function(t){var i=t._boundsCache;if(i){t._bounds=t._position=t._boundsCache=n;for(var o=0,h=i.list,d=h.length;o<d;o++){var v=h[o];v!==t&&(v._bounds=v._position=n,v._boundsCache&&He._clearBoundsCache(v))}}},_getBounds:function(t,i,o){var h=1/0,d=-h,v=h,D=d,A=!1;o=o||{};for(var T=0,P=t.length;T<P;T++){var F=t[T];if(F._visible&&!F.isEmpty(!0)){var V=F._getCachedBounds(i&&i.appended(F._matrix),o,!0),z=V.rect;h=Math.min(z.x,h),v=Math.min(z.y,v),d=Math.max(z.x+z.width,d),D=Math.max(z.y+z.height,D),V.nonscaling&&(A=!0)}}return{rect:isFinite(h)?new Ie(h,v,d-h,D-v):new Ie,nonscaling:A}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var i=this.getRotation();if(i!=null&&t!=null){var o=this._decomposed;this.rotate(t-i),o&&(o.rotation=t,this._decomposed=o)}},getScaling:function(){var t=this._decompose(),i=t&&t.scaling;return new mt(i?i.x:1,i?i.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),i=re.read(arguments,0,{clone:!0,readNull:!0});if(t&&i&&!t.equals(i)){var o=this.getRotation(),h=this._decomposed,d=new At,v=Ae.isZero;if(v(t.x)||v(t.y))d.translate(h.translation),o&&d.rotate(o),d.scale(i.x,i.y),this._matrix.set(d);else{var D=this.getPosition(!0);d.translate(D),o&&d.rotate(o),d.scale(i.x/t.x,i.y/t.y),o&&d.rotate(-o),d.translate(D.negate()),this.transform(d)}h&&(h.scaling=i,this._decomposed=h)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var i=this._globalMatrix;if(i)for(var o=this._parent,h=[];o;){if(!o._globalMatrix){i=null;for(var d=0,v=h.length;d<v;d++)h[d]._globalMatrix=null;break}h.push(o),o=o._parent}if(!i){i=this._globalMatrix=this._matrix.clone();var o=this._parent;o&&i.prepend(o.getGlobalMatrix(!0))}return t?i:i.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,i){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var o=this._children,h=0,d=o&&o.length;h<d;h++)o[h]._setProject(t);i=!0}i&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(i){t.base.call(this,i);for(var o=this._children,h=0,d=o&&o.length;h<d;h++)o[h]._installEvents(i)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof Sr)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return u.equals(this._children,t._children)},clone:function(t){var i=new this.constructor(He.NO_INSERT),o=this._children,h=u.pick(t?t.insert:n,t===n||t===!0),d=u.pick(t?t.deep:n,!0);o&&i.copyAttributes(this),(!o||d)&&i.copyContent(this),o||i.copyAttributes(this),h&&i.insertAbove(this);var v=this._name,D=this._parent;if(v&&D){for(var o=D._children,A=v,T=1;o[v];)v=A+" "+T++;v!==A&&i.setName(v)}return i},copyContent:function(t){for(var i=t._children,o=0,h=i&&i.length;o<h;o++)this.addChild(i[o].clone(!1),!0)},copyAttributes:function(t,i){this.setStyle(t._style);for(var o=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],h=0,d=o.length;h<d;h++){var v=o[h];t.hasOwnProperty(v)&&(this[v]=t[v])}i||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var D=t._data,A=t._name;this._data=D?u.clone(D):null,A&&this.setName(A)},rasterize:function(t,i){var o,h,d;u.isPlainObject(t)?(o=t.resolution,h=t.insert,d=t.raster):(o=t,h=i),d||(d=new Kr(He.NO_INSERT));var v=this.getStrokeBounds(),D=(o||this.getView().getResolution())/72,A=v.getTopLeft().floor(),T=v.getBottomRight().ceil(),P=new nt(T.subtract(A)),F=P.multiply(D);if(d.setSize(F,!0),!F.isZero()){var V=d.getContext(!0),z=new At().scale(D).translate(A.negate());V.save(),z.applyToContext(V),this.draw(V,new u({matrices:[z]})),V.restore()}return d._matrix.set(new At().translate(A.add(P.divide(2))).scale(1/D)),(h===n||h)&&d.insertAbove(this),d},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(re.read(arguments)))},_contains:function(t){var i=this._children;if(i){for(var o=i.length-1;o>=0;o--)if(i[o].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return Ie.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new ai.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,i){return t instanceof He?this._asPathItem().getIntersections(t._asPathItem(),null,i,!0).length>0:!1}},new function(){function t(){var h=arguments;return this._hitTest(re.read(h),oi.getOptions(h))}function i(){var h=arguments,d=re.read(h),v=oi.getOptions(h),D=[];return this._hitTest(d,new u({all:D},v)),D}function o(h,d,v,D){var A=this._children;if(A)for(var T=A.length-1;T>=0;T--){var P=A[T],F=P!==D&&P._hitTest(h,d,v);if(F&&!d.all)return F}return null}return Cn.inject({hitTest:t,hitTestAll:i,_hitTest:o}),{hitTest:t,hitTestAll:i,_hitTestChildren:o}},{_hitTest:function(t,i,o){if(this._locked||!this._visible||this._guide&&!i.guides||this.isEmpty())return null;var h=this._matrix,d=o?o.appended(h):this.getGlobalMatrix().prepend(this.getView()._matrix),v=Math.max(i.tolerance,1e-12),D=i._tolerancePadding=new nt(ai._getStrokePadding(v,h._shiftless().invert()));if(t=h._inverseTransform(t),!t||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(D.multiply(2))._containsPoint(t))return null;var A=!(i.guides&&!this._guide||i.selected&&!this.isSelected()||i.type&&i.type!==u.hyphenate(this._class)||i.class&&!(this instanceof i.class)),T=i.match,P=this,F,V;function z(I){return I&&T&&!T(I)&&(I=null),I&&i.all&&i.all.push(I),I}function R(I,G){var te=G?F["get"+G]():P.getPosition();if(t.subtract(te).divide(D).length<=1)return new oi(I,P,{name:G?u.hyphenate(G):I,point:te})}var J=i.position,Y=i.center,ie=i.bounds;if(A&&this._parent&&(J||Y||ie)){if((Y||ie)&&(F=this.getInternalBounds()),V=J&&R("position")||Y&&R("center","Center"),!V&&ie)for(var j=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],X=0;X<8&&!V;X++)V=R("bounds",j[X]);V=z(V)}return V||(V=this._hitTestChildren(t,i,d)||A&&z(this._hitTestSelf(t,i,d,this.getStrokeScaling()?null:d._shiftless().invert()))||null),V&&V.point&&(V.point=h.transform(V.point)),V},_hitTestSelf:function(t,i){if(i.fill&&this.hasFill()&&this._contains(t))return new oi("fill",this)},matches:function(t,i){function o(D,A){for(var T in D)if(D.hasOwnProperty(T)){var P=D[T],F=A[T];if(u.isPlainObject(P)&&u.isPlainObject(F)){if(!o(P,F))return!1}else if(!u.equals(P,F))return!1}return!0}var h=typeof t;if(h==="object"){for(var d in t)if(t.hasOwnProperty(d)&&!this.matches(d,t[d]))return!1;return!0}else{if(h==="function")return t(this);if(t==="match")return i(this);var v=/^(empty|editable)$/.test(t)?this["is"+u.capitalize(t)]():t==="type"?u.hyphenate(this._class):this[t];if(t==="class"){if(typeof i=="function")return this instanceof i;v=this._class}if(typeof i=="function")return!!i(v);if(i){if(i.test)return i.test(v);if(u.isPlainObject(i))return o(i,v)}return u.equals(v,i)}},getItems:function(t){return He._getItems(this,t,this._matrix)},getItem:function(t){return He._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(i,o,h,d,v){if(!d){var D=typeof o=="object"&&o,A=D&&D.overlapping,T=D&&D.inside,P=A||T,z=P&&Ie.read([P]);d={items:[],recursive:D&&D.recursive!==!1,inside:!!T,overlapping:!!A,rect:z,path:A&&new ai.Rectangle({rectangle:z,insert:!1})},D&&(o=u.filter({},o,{recursive:!0,inside:!0,overlapping:!0}))}var F=i._children,V=d.items,z=d.rect;h=z&&(h||new At);for(var R=0,J=F&&F.length;R<J;R++){var Y=F[R],ie=h&&h.appended(Y._matrix),j=!0;if(z){var P=Y.getBounds(ie);if(!z.intersects(P))continue;z.contains(P)||d.overlapping&&(P.contains(z)||d.path.intersects(Y,ie))||(j=!1)}if(j&&Y.matches(o)&&(V.push(Y),v)||(d.recursive!==!1&&t(Y,o,ie,d,v),v&&V.length>0))break}return V}}},{importJSON:function(t){var i=u.importJSON(t,this);return i!==this?this.addChild(i):i},addChild:function(t){return this.insertChild(n,t)},insertChild:function(t,i){var o=i?this.insertChildren(t,[i]):null;return o&&o[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,i){var o=this._children;if(o&&i&&i.length>0){i=u.slice(i);for(var h={},d=i.length-1;d>=0;d--){var v=i[d],D=v&&v._id;!v||h[D]?i.splice(d,1):(v._remove(!1,!0),h[D]=!0)}u.splice(o,i,t,0);for(var A=this._project,T=A._changes,d=0,P=i.length;d<P;d++){var v=i[d],F=v._name;v._parent=this,v._setProject(A,!0),F&&v.setName(F),T&&v._changed(5)}this._changed(11)}else i=null;return i},_insertItem:"#insertChild",_insertAt:function(t,i){var o=t&&t._getOwner(),h=t!==this&&o?this:null;return h&&(h._remove(!1,!0),o._insertItem(t._index+i,h)),h},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(n,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var i=this._children;if(i&&i.length===1){var o=i[0].reduce(t);return this._parent?(o.insertAbove(this),this.remove()):o.remove(),o}return this},_removeNamed:function(){var t=this._getOwner();if(t){var i=t._children,o=t._namedChildren,h=this._name,d=o[h],v=d?d.indexOf(this):-1;v!==-1&&(i[h]==this&&delete i[h],d.splice(v,1),d.length?i[h]=d[0]:delete o[h])}},_remove:function(t,i){var o=this._getOwner(),h=this._project,d=this._index;return this._style&&this._style._dispose(),o?(this._name&&this._removeNamed(),d!=null&&(h._activeLayer===this&&(h._activeLayer=this.getNextSibling()||this.getPreviousSibling()),u.splice(o._children,null,d,1)),this._installEvents(!1),t&&h._changes&&this._changed(5),i&&o._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var i=t&&t.insertBelow(this);return i&&this.remove(),i},removeChildren:function(t,i){if(!this._children)return null;t=t||0,i=u.pick(i,this._children.length);for(var o=u.splice(this._children,null,t,i-t),h=o.length-1;h>=0;h--)o[h]._remove(!0,!1);return o.length>0&&this._changed(11),o},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,i=this._children.length;t<i;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var i=this._children,o=i?i.length:0;if(t){for(var h=0;h<o;h++)if(!i[h].isEmpty(t))return!1;return!0}return!o},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function i(D){var A=[];do A.unshift(D);while(D=D._parent);return A}for(var o=i(this),h=i(t),d=0,v=Math.min(o.length,h.length);d<v;d++)if(o[d]!=h[d])return o[d]._index<h[d]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(t){return this._getOrder(t)===-1},isBelow:function(t){return this._getOrder(t)===1},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var i=this;i=i._parent;)if(i===t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var i=this._parent;i;){if(i._parent&&/^(Group|Layer|CompoundPath)$/.test(i._class)&&t.isDescendant(i))return!0;i=i._parent}return!1}},u.each(["rotate","scale","shear","skew"],function(t){var i=t==="rotate";this[t]=function(){var o=arguments,h=(i?u:re).read(o),d=re.read(o,0,{readNull:!0});return this.transform(new At()[t](h,d||this.getPosition(!0)))}},{translate:function(){var t=new At;return this.transform(t.translate.apply(t,arguments))},transform:function(t,i,o){var h=this._matrix,d=t&&!t.isIdentity(),v=o&&this._canApplyMatrix||this._applyMatrix&&(d||!h.isIdentity()||i&&this._children);if(!d&&!v)return this;if(d){!t.isInvertible()&&h.isInvertible()&&(h._backup=h.getValues()),h.prepend(t,!0);var D=this._style,A=D.getFillColor(!0),T=D.getStrokeColor(!0);A&&A.transform(t),T&&T.transform(t)}if(v&&(v=this._transformContent(h,i,o))){var P=this._pivot;P&&h._transformPoint(P,P,!0),h.reset(!0),o&&this._canApplyMatrix&&(this._applyMatrix=!0)}var F=this._bounds,V=this._position;(d||v)&&this._changed(25);var z=d&&F&&t.decompose();if(z&&z.skewing.isZero()&&z.rotation%90===0){for(var R in F){var J=F[R];if(J.nonscaling)delete F[R];else if(v||!J.internal){var Y=J.rect;t._transformBounds(Y,Y)}}this._bounds=F;var ie=F[this._getBoundsCacheKey(this._boundsOptions||{})];ie&&(this._position=this._getPositionFromBounds(ie.rect))}else d&&V&&this._pivot&&(this._position=t._transformPoint(V,V));return this},_transformContent:function(t,i,o){var h=this._children;if(h){for(var d=0,v=h.length;d<v;d++)h[d].transform(t,i,o);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(re.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(re.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(re.read(arguments))},localToParent:function(){return this._matrix._transformPoint(re.read(arguments))},fitBounds:function(t,i){t=Ie.read(arguments);var o=this.getBounds(),h=o.height/o.width,d=t.height/t.width,v=(i?h>d:h<d)?t.width/o.width:t.height/o.height,D=new Ie(new re,new nt(o.width*v,o.height*v));D.setCenter(t.getCenter()),this.setBounds(D)}}),{_setStyles:function(t,i,o){var h=this._style,d=this._matrix;if(h.hasFill()&&(t.fillStyle=h.getFillColor().toCanvasStyle(t,d)),h.hasStroke()){t.strokeStyle=h.getStrokeColor().toCanvasStyle(t,d),t.lineWidth=h.getStrokeWidth();var v=h.getStrokeJoin(),D=h.getStrokeCap(),A=h.getMiterLimit();if(v&&(t.lineJoin=v),D&&(t.lineCap=D),A&&(t.miterLimit=A),ar.support.nativeDash){var T=h.getDashArray(),P=h.getDashOffset();T&&T.length&&("setLineDash"in t?(t.setLineDash(T),t.lineDashOffset=P):(t.mozDash=T,t.mozDashOffset=P))}}if(h.hasShadow()){var F=i.pixelRatio||1,V=o._shiftless().prepend(new At().scale(F,F)),z=V.transform(new re(h.getShadowBlur(),0)),R=V.transform(this.getShadowOffset());t.shadowColor=h.getShadowColor().toCanvasStyle(t),t.shadowBlur=z.getLength(),t.shadowOffsetX=R.x,t.shadowOffsetY=R.y}},draw:function(t,i,o){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var h=i.matrices,d=i.viewMatrix,v=this._matrix,D=h[h.length-1].appended(v);if(D.isInvertible()){d=d?d.appended(D):D,h.push(D),i.updateMatrix&&(this._globalMatrix=D);var A=this._blendMode,T=Ae.clamp(this._opacity,0,1),P=A==="normal",F=Ai.nativeModes[A],V=P&&T===1||i.dontStart||i.clip||(F||P&&T<1)&&this._canComposite(),z=i.pixelRatio||1,R,J,Y;if(!V){var ie=this.getStrokeBounds(d);if(!ie.width||!ie.height){h.pop();return}Y=i.offset,J=i.offset=ie.getTopLeft().floor(),R=t,t=di.getContext(ie.getSize().ceil().add(1).multiply(z)),z!==1&&t.scale(z,z)}t.save();var j=o?o.appended(v):this._canScaleStroke&&!this.getStrokeScaling(!0)&&d,X=!V&&i.clipItem,I=!j||X;if(V?(t.globalAlpha=T,F&&(t.globalCompositeOperation=A)):I&&t.translate(-J.x,-J.y),I&&(V?v:d).applyToContext(t),X&&i.clipItem.draw(t,i.extend({clip:!0})),j){t.setTransform(z,0,0,z,0,0);var G=i.offset;G&&t.translate(-G.x,-G.y)}this._draw(t,i,d,j),t.restore(),h.pop(),i.clip&&!i.dontFinish&&t.clip(this.getFillRule()),V||(Ai.process(A,t,R,T,J.subtract(Y).multiply(z)),di.release(t),i.offset=Y)}}},_isUpdated:function(t){var i=this._parent;if(i instanceof hs)return i._isUpdated(t);var o=this._updateVersion===t;return!o&&i&&i._visible&&i._isUpdated(t)&&(this._updateVersion=t,o=!0),o},_drawSelection:function(t,i,o,h,d){var v=this._selection,D=v&1,A=v&2||D&&this._selectBounds,T=v&4;if(this._drawSelected||(D=!1),(D||A||T)&&this._isUpdated(d)){var P,F=this.getSelectedColor(!0)||(P=this.getLayer())&&P.getSelectedColor(!0),V=i.appended(this.getGlobalMatrix(!0)),z=o/2;if(t.strokeStyle=t.fillStyle=F?F.toCanvasStyle(t):"#009dec",D&&this._drawSelected(t,V,h),T){var R=this.getPosition(!0),J=this._parent,Y=J?J.localToGlobal(R):R,ie=Y.x,j=Y.y;t.beginPath(),t.arc(ie,j,z,0,Math.PI*2,!0),t.stroke();for(var X=[[0,-1],[1,0],[0,1],[-1,0]],I=z,G=o+1,te=0;te<4;te++){var pe=X[te],oe=pe[0],Ee=pe[1];t.moveTo(ie+oe*I,j+Ee*I),t.lineTo(ie+oe*G,j+Ee*G),t.stroke()}}if(A){var $e=V._transformCorners(this.getInternalBounds());t.beginPath();for(var te=0;te<8;te++)t[te?"lineTo":"moveTo"]($e[te],$e[++te]);t.closePath(),t.stroke();for(var te=0;te<8;te++)t.fillRect($e[te]-z,$e[++te]-z,o,o)}}},_canComposite:function(){return!1}},u.each(["down","drag","up","move"],function(t){this["removeOn"+u.capitalize(t)]=function(){var i={};return i[t]=!0,this.removeOn(i)}},{removeOn:function(t){for(var i in t)if(t[i]){var o="mouse"+i,h=this._project,d=h._removeSets=h._removeSets||{};d[o]=d[o]||{},d[o][this._id]=this}return this}}),{tween:function(t,i,o){o||(o=i,i=t,t=null,o||(o=i,i=null));var h=o&&o.easing,d=o&&o.start,v=o!=null&&(typeof o=="number"?o:o.duration),D=new fs(this,t,i,v,h,d);function A(T){D._handleFrame(T.time*1e3),D.running||this.off("frame",A)}return v&&this.on("frame",A),D},tweenTo:function(t,i){return this.tween(null,t,i)},tweenFrom:function(t,i){return this.tween(t,null,i)}}),_e=He.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(i){t.base.call(this,i),i&2050&&(this._clipItem=n)},_getClipItem:function(){var t=this._clipItem;if(t===n){t=null;for(var i=this._children,o=0,h=i.length;o<h;o++)if(i[o]._clipMask){t=i[o];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var i=this.getFirstChild();i&&i.setClipMask(t)},_getBounds:function t(i,o){var h=this._getClipItem();return h?h._getCachedBounds(h._matrix.prepended(i),u.set({},o,{stroke:!1})):t.base.call(this,i,o)},_hitTestChildren:function t(i,o,h){var d=this._getClipItem();return(!d||d.contains(i))&&t.base.call(this,i,o,h,d)},_draw:function(t,i){var o=i.clip,h=!o&&this._getClipItem();i=i.extend({clipItem:h,clip:!1}),o?(t.beginPath(),i.dontStart=i.dontFinish=!0):h&&h.draw(t,i.extend({clip:!0}));for(var d=this._children,v=0,D=d.length;v<D;v++){var A=d[v];A!==h&&A.draw(t,i)}}}),Sr=_e.extend({_class:"Layer",initialize:function(){_e.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function t(){return this._parent?t.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),On=He.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,i){this._initialize(t,i)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&u.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new tn(t.width,t.height,this,"setSize")},setSize:function(){var t=nt.read(arguments);if(!this._size)this._size=t.clone();else if(!this._size.equals(t)){var i=this._type,o=t.width,h=t.height;i==="rectangle"?this._radius.set(nt.min(this._radius,t.divide(2).abs())):i==="circle"?(o=h=(o+h)/2,this._radius=o/2):i==="ellipse"&&this._radius._set(o/2,h/2),this._size._set(o,h),this._changed(9)}},getRadius:function(){var t=this._radius;return this._type==="circle"?t:new tn(t.width,t.height,this,"setRadius")},setRadius:function(t){var i=this._type;if(i==="circle"){if(t===this._radius)return;var o=t*2;this._radius=t,this._size._set(o,o)}else if(t=nt.read(arguments),!this._radius)this._radius=t.clone();else{if(this._radius.equals(t))return;if(this._radius.set(t),i==="rectangle"){var o=nt.max(this._size,t.multiply(2));this._size.set(o)}else i==="ellipse"&&this._size._set(t.width*2,t.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var i=new ai[u.capitalize(this._type)]({center:new re,size:this._size,radius:this._radius,insert:!1});return i.copyAttributes(this),ar.settings.applyMatrix&&i.setApplyMatrix(!0),(t===n||t)&&i.insertAbove(this),i},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,i,o,h){var d=this._style,v=d.hasFill(),D=d.hasStroke(),A=i.dontFinish||i.clip,T=!h;if(v||D||A){var P=this._type,F=this._radius,V=P==="circle";if(i.dontStart||t.beginPath(),T&&V)t.arc(0,0,F,0,Math.PI*2,!0);else{var z=V?F:F.width,R=V?F:F.height,J=this._size,Y=J.width,ie=J.height;if(T&&P==="rectangle"&&z===0&&R===0)t.rect(-Y/2,-ie/2,Y,ie);else{var j=Y/2,X=ie/2,I=1-.5522847498307936,G=z*I,te=R*I,pe=[-j,-X+R,-j,-X+te,-j+G,-X,-j+z,-X,j-z,-X,j-G,-X,j,-X+te,j,-X+R,j,X-R,j,X-te,j-G,X,j-z,X,-j+z,X,-j+G,X,-j,X-te,-j,X-R];h&&h.transform(pe,pe,32),t.moveTo(pe[0],pe[1]),t.bezierCurveTo(pe[2],pe[3],pe[4],pe[5],pe[6],pe[7]),j!==z&&t.lineTo(pe[8],pe[9]),t.bezierCurveTo(pe[10],pe[11],pe[12],pe[13],pe[14],pe[15]),X!==R&&t.lineTo(pe[16],pe[17]),t.bezierCurveTo(pe[18],pe[19],pe[20],pe[21],pe[22],pe[23]),j!==z&&t.lineTo(pe[24],pe[25]),t.bezierCurveTo(pe[26],pe[27],pe[28],pe[29],pe[30],pe[31])}}t.closePath()}!A&&(v||D)&&(this._setStyles(t,i,o),v&&(t.fill(d.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),D&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,i){var o=new Ie(this._size).setCenter(0,0),h=this._style,d=i.stroke&&h.hasStroke()&&h.getStrokeWidth();return t&&(o=t._transformBounds(o)),d?o.expand(ai._getStrokePadding(d,this._getStrokeMatrix(t,i))):o}},new function(){function t(o,h,d){var v=o._radius;if(!v.isZero())for(var D=o._size.divide(2),A=1;A<=4;A++){var T=new re(A>1&&A<4?-1:1,A>2?-1:1),P=T.multiply(D),F=P.subtract(T.multiply(v)),V=new Ie(d?P.add(T.multiply(d)):P,F);if(V.contains(h))return{point:F,quadrant:A}}}function i(o,h,d,v){var D=o.divide(h);return(!v||D.isInQuadrant(v))&&D.subtract(D.normalize()).multiply(h).divide(d).length<=1}return{_contains:function o(h){if(this._type==="rectangle"){var d=t(this,h);return d?h.subtract(d.point).divide(this._radius).getLength()<=1:o.base.call(this,h)}else return h.divide(this.size).getLength()<=.5},_hitTestSelf:function o(h,d,v,D){var A=!1,T=this._style,P=d.stroke&&T.hasStroke(),F=d.fill&&T.hasFill();if(P||F){var V=this._type,z=this._radius,R=P?T.getStrokeWidth()/2:0,J=d._tolerancePadding.add(ai._getStrokePadding(R,!T.getStrokeScaling()&&D));if(V==="rectangle"){var Y=J.multiply(2),ie=t(this,h,Y);if(ie)A=i(h.subtract(ie.point),z,J,ie.quadrant);else{var j=new Ie(this._size).setCenter(0,0),X=j.expand(Y),I=j.expand(Y.negate());A=X._containsPoint(h)&&!I._containsPoint(h)}}else A=i(h,z,J)}return A?new oi(P?"stroke":"fill",this):o.base.apply(this,arguments)}}},{statics:new function(){function t(i,o,h,d,v){var D=u.create(On.prototype);return D._type=i,D._size=h,D._radius=d,D._initialize(u.getNamed(v),o),D}return{Circle:function(){var i=arguments,o=re.readNamed(i,"center"),h=u.readNamed(i,"radius");return t("circle",o,new nt(h*2),h,i)},Rectangle:function(){var i=arguments,o=Ie.readNamed(i,"rectangle"),h=nt.min(nt.readNamed(i,"radius"),o.getSize(!0).divide(2));return t("rectangle",o.getCenter(!0),o.getSize(!0),h,i)},Ellipse:function(){var i=arguments,o=On._readEllipse(i),h=o.radius;return t("ellipse",o.center,h.multiply(2),h,i)},_readEllipse:function(i){var o,h;if(u.hasNamed(i,"radius"))o=re.readNamed(i,"center"),h=nt.readNamed(i,"radius");else{var d=Ie.readNamed(i,"rectangle");o=d.getCenter(!0),h=d.getSize(!0).divide(2)}return{center:o,radius:h}}}}}),Kr=He.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,i){if(!this._initialize(t,i!==n&&re.read(arguments))){var o,h=typeof t,d=h==="string"?c.getElementById(t):h==="object"?t:null;if(d&&d!==He.NO_INSERT){if(d.getContext||d.naturalHeight!=null)o=d;else if(d){var v=nt.read(arguments);v.isZero()||(o=di.getCanvas(v))}}o?this.setImage(o):this.setSource(t)}this._size||(this._size=new nt,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var i=t._image,o=t._canvas;if(i)this._setImage(i);else if(o){var h=di.getCanvas(t._size);h.getContext("2d").drawImage(o,0,0),this._setImage(h)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new tn(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,i){var o=nt.read(arguments);if(o.equals(this._size))i&&this.clear();else if(o.width>0&&o.height>0){var h=!i&&this.getElement();this._setImage(di.getCanvas(o)),h&&this.getContext(!0).drawImage(h,0,0,o.width,o.height)}else this._canvas&&di.release(this._canvas),this._size=o.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||t.width===0&&t.height===0},getResolution:function(){var t=this._matrix,i=new re(0,0).transform(t),o=new re(1,0).transform(t).subtract(i),h=new re(0,1).transform(t).subtract(i);return new nt(72/o.getLength(),72/h.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var i=this;function o(h){var d=i.getView(),v=h&&h.type||"load";d&&i.responds(v)&&(ar=d._scope,i.emit(v,new xo(h)))}this._setImage(t),this._loaded?setTimeout(o,0):t&&Fi.add(t,{load:function(h){i._setImage(t),o(h)},error:o})},_setImage:function(t){this._canvas&&di.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new nt(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=di.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch{di.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var i=new e.Image,o=this._crossOrigin;o&&(i.crossOrigin=o),t&&(i.src=t),this.setImage(i)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var i=this._image;i&&(i.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=typeof t=="string"?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=Ie.read(arguments),i=di.getContext(t.getSize());return i.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),i.canvas},getSubRaster:function(){var t=Ie.read(arguments),i=new Kr(He.NO_INSERT);return i._setImage(this.getSubCanvas(t)),i.translate(t.getCenter().subtract(this.getSize().divide(2))),i._matrix.prepend(this._matrix),i.insertAbove(this),i},toDataURL:function(){var t=this._image,i=t&&t.src;if(/^data:/.test(i))return i;var o=this.getCanvas();return o?o.toDataURL.apply(o,arguments):null},drawImage:function(t){var i=re.read(arguments,1);this.getContext(!0).drawImage(t,i.x,i.y)},getAverageColor:function(t){var i,o;if(t?t instanceof Pi?(o=t,i=t.getBounds()):typeof t=="object"&&("width"in t?i=new Ie(t):"x"in t&&(i=new Ie(t.x-.5,t.y-.5,1,1))):i=this.getBounds(),!i)return null;var h=32,d=Math.min(i.width,h),v=Math.min(i.height,h),D=Kr._sampleContext;D?D.clearRect(0,0,h+1,h+1):D=Kr._sampleContext=di.getContext(new nt(h)),D.save();var A=new At().scale(d/i.width,v/i.height).translate(-i.x,-i.y);A.applyToContext(D),o&&o.draw(D,new u({clip:!0,matrices:[A]})),this._matrix.applyToContext(D);var T=this.getElement(),P=this._size;T&&D.drawImage(T,-P.width/2,-P.height/2),D.restore();for(var F=D.getImageData(.5,.5,Math.ceil(d),Math.ceil(v)).data,V=[0,0,0],z=0,R=0,J=F.length;R<J;R+=4){var Y=F[R+3];z+=Y,Y/=255,V[0]+=F[R]*Y,V[1]+=F[R+1]*Y,V[2]+=F[R+2]*Y}for(var R=0;R<3;R++)V[R]/=z;return z?Zi.read(V):null},getPixel:function(){var t=re.read(arguments),i=this.getContext().getImageData(t.x,t.y,1,1).data;return new Zi("rgb",[i[0]/255,i[1]/255,i[2]/255],i[3]/255)},setPixel:function(){var t=arguments,i=re.read(t),o=Zi.read(t),h=o._convert("rgb"),d=o._alpha,v=this.getContext(!0),D=v.createImageData(1,1),A=D.data;A[0]=h[0]*255,A[1]=h[1]*255,A[2]=h[2]*255,A[3]=d!=null?d*255:255,v.putImageData(D,i.x,i.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=nt.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=Ie.read(arguments);return t.isEmpty()&&(t=new Ie(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},putImageData:function(t){var i=re.read(arguments,1);this.getContext(!0).putImageData(t,i.x,i.y)},setImageData:function(t){this.setSize(t),this.getContext(!0).putImageData(t,0,0)},_getBounds:function(t,i){var o=new Ie(this._size).setCenter(0,0);return t?t._transformBounds(o):o},_hitTestSelf:function(t){if(this._contains(t)){var i=this;return new oi("pixel",i,{offset:t.add(i._size.divide(2)).round(),color:{get:function(){return i.getPixel(this.offset)}}})}},_draw:function(t,i,o){var h=this.getElement();if(h&&h.width>0&&h.height>0){t.globalAlpha=Ae.clamp(this._opacity,0,1),this._setStyles(t,i,o);var d=this._smoothing,v=d==="off";Ti.setPrefixed(t,v?"imageSmoothingEnabled":"imageSmoothingQuality",v?!1:d),t.drawImage(h,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Mi=He.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,i){this._initialize(t,i!==n&&re.read(arguments,1))||this.setDefinition(t instanceof ei?t:new ei(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,i){var o=this._definition._item;return o._getCachedBounds(o._matrix.prepended(t),i)},_hitTestSelf:function(t,i,o){var h=i.extend({all:!1}),d=this._definition._item._hitTest(t,h,o);return d&&(d.item=this),d},_draw:function(t,i){this._definition._item.draw(t,i)}}),ei=u.extend({_class:"SymbolDefinition",initialize:function(t,i){this._id=rt.get(),this.project=ar.project,t&&this.setItem(t,i)},_serialize:function(t,i){return i.add(this,function(){return u.serialize([this._class,this._item],t,!1,i)})},_changed:function(t){t&8&&He._clearBoundsCache(this),t&1&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,i){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),i||t.setPosition(new re),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new Mi(this,t)},clone:function(){return new ei(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),oi=u.extend({_class:"HitResult",initialize:function(t,i,o){this.type=t,this.item=i,o&&this.inject(o)},statics:{getOptions:function(t){var i=t&&u.read(t);return new u({type:null,tolerance:ar.settings.hitTolerance,fill:!i,stroke:!i,segments:!i,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},i)}}}),xr=u.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,i,o,h,d,v){var D=arguments.length,A,T,P,F;D>0&&(t==null||typeof t=="object"?D===1&&t&&"point"in t?(A=t.point,T=t.handleIn,P=t.handleOut,F=t.selection):(A=t,T=i,P=o,F=h):(A=[t,i],T=o!==n?[o,h]:null,P=d!==n?[d,v]:null)),new Ts(A,this,"_point"),new Ts(T,this,"_handleIn"),new Ts(P,this,"_handleOut"),F&&this.setSelection(F)},_serialize:function(t,i){var o=this._point,h=this._selection,d=h||this.hasHandles()?[o,this._handleIn,this._handleOut]:o;return h&&d.push(h),u.serialize(d,t,!0,i)},_changed:function(t){var i=this._path;if(i){var o=i._curves,h=this._index,d;o&&((!t||t===this._point||t===this._handleIn)&&(d=h>0?o[h-1]:i._closed?o[o.length-1]:null)&&d._changed(),(!t||t===this._point||t===this._handleOut)&&(d=o[h])&&d._changed()),i._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(re.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(re.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(re.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,i=this._handleOut;return!t.isZero()&&!i.isZero()&&t.isCollinear(i)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var i=this._selection,o=this._path;this._selection=t=t||0,o&&t!==i&&(o._updateSelection(this,i,t),o._changed(257))},_changeSelection:function(t,i){var o=this._selection;this.setSelection(i?o|t:o&~t)},isSelected:function(){return!!(this._selection&7)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,i=this._index;return t?(i>0&&!t._closed&&i===t._segments.length-1&&i--,t.getCurves()[i]||null):null},getLocation:function(){var t=this.getCurve();return t?new si(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,i,o){var h=t||{},d=h.type,v=h.factor,D=this.getPrevious(),A=this.getNext(),T=(D||this)._point,P=this._point,F=(A||this)._point,V=T.getDistance(P),z=P.getDistance(F);if(!d||d==="catmull-rom"){var R=v===n?.5:v,J=Math.pow(V,R),Y=J*J,ie=Math.pow(z,R),j=ie*ie;if(!i&&D){var X=2*j+3*ie*J+Y,I=3*ie*(ie+J);this.setHandleIn(I!==0?new re((j*T._x+X*P._x-Y*F._x)/I-P._x,(j*T._y+X*P._y-Y*F._y)/I-P._y):new re)}if(!o&&A){var X=2*Y+3*J*ie+j,I=3*J*(J+ie);this.setHandleOut(I!==0?new re((Y*F._x+X*P._x-j*T._x)/I-P._x,(Y*F._y+X*P._y-j*T._y)/I-P._y):new re)}}else if(d==="geometric"){if(D&&A){var G=T.subtract(F),te=v===n?.4:v,pe=te*V/(V+z);i||this.setHandleIn(G.multiply(pe)),o||this.setHandleOut(G.multiply(pe-te))}}else throw new Error("Smoothing method '"+d+"' not supported.")},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,i=this._handleOut,o=t.clone();t.set(i),i.set(o)},reversed:function(){return new xr(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new xr(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,i,o){var h=1-o,d=o,v=t._point,D=i._point,A=t._handleIn,T=i._handleIn,P=i._handleOut,F=t._handleOut;this._point._set(h*v._x+d*D._x,h*v._y+d*D._y,!0),this._handleIn._set(h*A._x+d*T._x,h*A._y+d*T._y,!0),this._handleOut._set(h*F._x+d*P._x,h*F._y+d*P._y,!0),this._changed()},_transformCoordinates:function(t,i,o){var h=this._point,d=!o||!this._handleIn.isZero()?this._handleIn:null,v=!o||!this._handleOut.isZero()?this._handleOut:null,D=h._x,A=h._y,T=2;return i[0]=D,i[1]=A,d&&(i[T++]=d._x+D,i[T++]=d._y+A),v&&(i[T++]=v._x+D,i[T++]=v._y+A),t&&(t._transformCoordinates(i,i,T/2),D=i[0],A=i[1],o?(h._x=D,h._y=A,T=2,d&&(d._x=i[T++]-D,d._y=i[T++]-A),v&&(v._x=i[T++]-D,v._y=i[T++]-A)):(d||(i[T++]=D,i[T++]=A),v||(i[T++]=D,i[T++]=A))),i}}),Ts=re.extend({initialize:function(t,i,o){var h,d,v;if(!t)h=d=0;else if((h=t[0])!==n)d=t[1];else{var D=t;(h=D.x)===n&&(D=re.read(arguments),h=D.x),d=D.y,v=D.selected}this._x=h,this._y=d,this._owner=i,i[o]=this,v&&this.setSelected(!0)},_set:function(t,i){return this._x=t,this._y=i,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=Ae.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),Fn=u.extend({_class:"Curve",beans:!0,initialize:function(t,i,o,h,d,v,D,A){var T=arguments.length,P,F,V,z,R,J;T===3?(this._path=t,P=i,F=o):T?T===1?"segment1"in t?(P=new xr(t.segment1),F=new xr(t.segment2)):"point1"in t?(V=t.point1,R=t.handle1,J=t.handle2,z=t.point2):Array.isArray(t)&&(V=[t[0],t[1]],z=[t[6],t[7]],R=[t[2]-t[0],t[3]-t[1]],J=[t[4]-t[6],t[5]-t[7]]):T===2?(P=new xr(t),F=new xr(i)):T===4?(V=t,R=i,J=o,z=h):T===8&&(V=[t,i],z=[D,A],R=[o-t,h-i],J=[d-D,v-A]):(P=new xr,F=new xr),this._segment1=P||new xr(V,null,R),this._segment2=F||new xr(z,J,null)},_serialize:function(t,i){return u.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,i)},_changed:function(){this._length=this._bounds=n},clone:function(){return new Fn(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return Fn.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var i=this._segment2,o=i._handleOut;t=i.remove(),t&&this._segment1._handleOut.set(o)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(re.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(re.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(re.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(re.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return Fn.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),i=[],o=0;o<8;o+=2)i.push(new re(t[o],t[o+1]));return i}},{getLength:function(){return this._length==null&&(this._length=Fn.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Fn.getArea(this.getValues())},getLine:function(){return new an(this._segment1._point,this._segment2._point)},getPart:function(t,i){return new Fn(Fn.getPart(this.getValues(),t,i))},getPartLength:function(t,i){return Fn.getLength(this.getValues(),t,i)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,i){var o=1e-8,h=1-o,d=null;if(t>=o&&t<=h){var v=Fn.subdivide(this.getValues(),t),D=v[0],A=v[1],T=i||this.hasHandles(),P=this._segment1,F=this._segment2,V=this._path;T&&(P._handleOut._set(D[2]-D[0],D[3]-D[1]),F._handleIn._set(A[4]-A[6],A[5]-A[7]));var z=D[6],R=D[7],J=new xr(new re(z,R),T&&new re(D[4]-z,D[5]-R),T&&new re(A[2]-z,A[3]-R));V?(V.insert(P._index+1,J),d=this.getNext()):(this._segment2=J,this._changed(),d=new Fn(J,F))}return d},splitAt:function(t){var i=this._path;return i?i.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,i){return this.divideAtTime(t===n?.5:i?t:this.getTimeAt(t))},split:function(t,i){return this.splitAtTime(t===n?.5:i?t:this.getTimeAt(t))},reversed:function(){return new Fn(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,i,o,h){var d=t._point,v=t._handleOut,D=i._handleIn,A=i._point,T=d.x,P=d.y,F=A.x,V=A.y,z=h?[T,P,T,P,F,V,F,V]:[T,P,T+v._x,P+v._y,F+D._x,V+D._y,F,V];return o&&o._transformCoordinates(z,z,4),z},subdivide:function(t,i){var o=t[0],h=t[1],d=t[2],v=t[3],D=t[4],A=t[5],T=t[6],P=t[7];i===n&&(i=.5);var F=1-i,V=F*o+i*d,z=F*h+i*v,R=F*d+i*D,J=F*v+i*A,Y=F*D+i*T,ie=F*A+i*P,j=F*V+i*R,X=F*z+i*J,I=F*R+i*Y,G=F*J+i*ie,te=F*j+i*I,pe=F*X+i*G;return[[o,h,V,z,j,X,te,pe],[te,pe,I,G,Y,ie,T,P]]},getMonoCurves:function(t,i){var o=[],h=i?0:1,d=t[h+0],v=t[h+2],D=t[h+4],A=t[h+6];if(d>=v==v>=D&&v>=D==D>=A||Fn.isStraight(t))o.push(t);else{var T=3*(v-D)-d+A,P=2*(d+D)-4*v,F=v-d,V=1e-8,z=1-V,R=[],J=Ae.solveQuadratic(T,P,F,R,V,z);if(!J)o.push(t);else{R.sort();var Y=R[0],ie=Fn.subdivide(t,Y);o.push(ie[0]),J>1&&(Y=(R[1]-Y)/(1-Y),ie=Fn.subdivide(ie[1],Y),o.push(ie[0])),o.push(ie[1])}}return o},solveCubic:function(t,i,o,h,d,v){var D=t[i],A=t[i+2],T=t[i+4],P=t[i+6],F=0;if(!(D<o&&P<o&&A<o&&T<o||D>o&&P>o&&A>o&&T>o)){var V=3*(A-D),z=3*(T-A)-V,R=P-D-V-z;F=Ae.solveCubic(R,z,V,D-o,h,d,v)}return F},getTimeOf:function(t,i){var o=new re(t[0],t[1]),h=new re(t[6],t[7]),d=1e-12,v=1e-7,D=i.isClose(o,d)?0:i.isClose(h,d)?1:null;if(D===null)for(var A=[i.x,i.y],T=[],P=0;P<2;P++)for(var F=Fn.solveCubic(t,P,A[P],T,0,1),V=0;V<F;V++){var z=T[V];if(i.isClose(Fn.getPoint(t,z),v))return z}return i.isClose(o,v)?0:i.isClose(h,v)?1:null},getNearestTime:function(t,i){if(Fn.isStraight(t)){var o=t[0],h=t[1],d=t[6],v=t[7],D=d-o,A=v-h,T=D*D+A*A;if(T===0)return 0;var P=((i.x-o)*D+(i.y-h)*A)/T;return P<1e-12?0:P>.999999999999?1:Fn.getTimeOf(t,new re(o+P*D,h+P*A))}var F=100,V=1/0,z=0;function R(ie){if(ie>=0&&ie<=1){var j=i.getDistance(Fn.getPoint(t,ie),!0);if(j<V)return V=j,z=ie,!0}}for(var J=0;J<=F;J++)R(J/F);for(var Y=1/(F*2);Y>1e-8;)!R(z-Y)&&!R(z+Y)&&(Y/=2);return z},getPart:function(t,i,o){var h=i>o;if(h){var d=i;i=o,o=d}return i>0&&(t=Fn.subdivide(t,i)[1]),o<1&&(t=Fn.subdivide(t,(o-i)/(1-i))[0]),h?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,i){var o=t[0],h=t[1],d=t[2],v=t[3],D=t[4],A=t[5],T=t[6],P=t[7],F=3*d-2*o-T,V=3*v-2*h-P,z=3*D-2*T-o,R=3*A-2*P-h;return Math.max(F*F,z*z)+Math.max(V*V,R*R)<=16*i*i},getArea:function(t){var i=t[0],o=t[1],h=t[2],d=t[3],v=t[4],D=t[5],A=t[6],T=t[7];return 3*((T-o)*(h+v)-(A-i)*(d+D)+d*(i-v)-h*(o-D)+T*(v+i/3)-A*(D+o/3))/20},getBounds:function(t){for(var i=t.slice(0,2),o=i.slice(),h=[0,0],d=0;d<2;d++)Fn._addBounds(t[d],t[d+2],t[d+4],t[d+6],d,0,i,o,h);return new Ie(i[0],i[1],o[0]-i[0],o[1]-i[1])},_addBounds:function(t,i,o,h,d,v,D,A,T){function P(te,pe){var oe=te-pe,Ee=te+pe;oe<D[d]&&(D[d]=oe),Ee>A[d]&&(A[d]=Ee)}v/=2;var F=D[d]+v,V=A[d]-v;if(t<F||i<F||o<F||h<F||t>V||i>V||o>V||h>V)if(i<t!=i<h&&o<t!=o<h)P(t,0),P(h,0);else{var z=3*(i-o)-t+h,R=2*(t+o)-4*i,J=i-t,Y=Ae.solveQuadratic(z,R,J,T),ie=1e-8,j=1-ie;P(h,0);for(var X=0;X<Y;X++){var I=T[X],G=1-I;ie<=I&&I<=j&&P(G*G*G*t+3*G*G*I*i+3*G*I*I*o+I*I*I*h,v)}}}}},u.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var i=this._bounds[t];return i||(i=this._bounds[t]=ai[t]([this._segment1,this._segment2],!1,this._path)),i.clone()}},{}),u.each({isStraight:function(t,i,o,h){if(i.isZero()&&o.isZero())return!0;var d=h.subtract(t);if(d.isZero())return!1;if(d.isCollinear(i)&&d.isCollinear(o)){var v=new an(t,h),D=1e-7;if(v.getDistance(t.add(i))<D&&v.getDistance(h.add(o))<D){var A=d.dot(d),T=d.dot(i)/A,P=d.dot(o)/A;return T>=0&&T<=1&&P<=0&&P>=-1}}return!1},isLinear:function(t,i,o,h){var d=h.subtract(t).divide(3);return i.equals(d)&&o.negate().equals(d)}},function(t,i){this[i]=function(o){var h=this._segment1,d=this._segment2;return t(h._point,h._handleOut,d._handleIn,d._point,o)},this.statics[i]=function(o,h){var d=o[0],v=o[1],D=o[6],A=o[7];return t(new re(d,v),new re(o[2]-d,o[3]-v),new re(o[4]-D,o[5]-A),new re(D,A),h)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,i){return this.getLocationAtTime(i?t:this.getTimeAt(t))},getLocationAtTime:function(t){return t!=null&&t>=0&&t<=1?new si(this,t):null},getTimeAt:function(t,i){return Fn.getTimeAt(this.getValues(),t,i)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=re.read(arguments);return t.isZero()?[]:Fn.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(re.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return Fn.getTimeOf(this.getValues(),re.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=re.read(arguments),i=this.getValues(),o=Fn.getNearestTime(i,t),h=Fn.getPoint(i,o);return new si(this,o,h,null,t.getDistance(h))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return u.each(t,function(i){this[i+"At"]=function(o,h){var d=this.getValues();return Fn[i](d,h?o:Fn.getTimeAt(d,o))},this[i+"AtTime"]=function(o){return Fn[i](this.getValues(),o)}},{statics:{_evaluateMethods:t}})},new function(){function t(h){var d=h[0],v=h[1],D=h[2],A=h[3],T=h[4],P=h[5],F=h[6],V=h[7],z=9*(D-T)+3*(F-d),R=6*(d+T)-12*D,J=3*(D-d),Y=9*(A-P)+3*(V-v),ie=6*(v+P)-12*A,j=3*(A-v);return function(X){var I=(z*X+R)*X+J,G=(Y*X+ie)*X+j;return Math.sqrt(I*I+G*G)}}function i(h,d){return Math.max(2,Math.min(16,Math.ceil(Math.abs(d-h)*32)))}function o(h,d,v,D){if(d==null||d<0||d>1)return null;var A=h[0],T=h[1],P=h[2],F=h[3],V=h[4],z=h[5],R=h[6],J=h[7],Y=Ae.isZero;Y(P-A)&&Y(F-T)&&(P=A,F=T),Y(V-R)&&Y(z-J)&&(V=R,z=J);var ie=3*(P-A),j=3*(V-P)-ie,X=R-A-ie-j,I=3*(F-T),G=3*(z-F)-I,te=J-T-I-G,pe,oe;if(v===0)pe=d===0?A:d===1?R:((X*d+j)*d+ie)*d+A,oe=d===0?T:d===1?J:((te*d+G)*d+I)*d+T;else{var Ee=1e-8,$e=1-Ee;if(d<Ee?(pe=ie,oe=I):d>$e?(pe=3*(R-V),oe=3*(J-z)):(pe=(3*X*d+2*j)*d+ie,oe=(3*te*d+2*G)*d+I),D){pe===0&&oe===0&&(d<Ee||d>$e)&&(pe=V-P,oe=z-F);var Xe=Math.sqrt(pe*pe+oe*oe);Xe&&(pe/=Xe,oe/=Xe)}if(v===3){var V=6*X*d+2*j,z=6*te*d+2*G,ft=Math.pow(pe*pe+oe*oe,3/2);pe=ft!==0?(pe*z-oe*V)/ft:0,oe=0}}return v===2?new re(oe,-pe):new re(pe,oe)}return{statics:{classify:function(h){var d=h[0],v=h[1],D=h[2],A=h[3],T=h[4],P=h[5],F=h[6],V=h[7],z=d*(V-P)+v*(T-F)+F*P-V*T,R=D*(v-V)+A*(F-d)+d*V-v*F,J=T*(A-v)+P*(d-D)+D*v-A*d,Y=3*J,ie=Y-R,j=ie-R+z,X=Math.sqrt(j*j+ie*ie+Y*Y),I=X!==0?1/X:0,G=Ae.isZero,te="serpentine";j*=I,ie*=I,Y*=I;function pe(Xe,ft,Ze){var yt=ft!==n,Et=yt&&ft>0&&ft<1,Yt=yt&&Ze>0&&Ze<1;return yt&&(!(Et||Yt)||Xe==="loop"&&!(Et&&Yt))&&(Xe="arch",Et=Yt=!1),{type:Xe,roots:Et||Yt?Et&&Yt?ft<Ze?[ft,Ze]:[Ze,ft]:[Et?ft:Ze]:null}}if(G(j))return G(ie)?pe(G(Y)?"line":"quadratic"):pe(te,Y/(3*ie));var oe=3*ie*ie-4*j*Y;if(G(oe))return pe("cusp",ie/(2*j));var Ee=oe>0?Math.sqrt(oe/3):Math.sqrt(-oe),$e=2*j;return pe(oe>0?te:"loop",(ie+Ee)/$e,(ie-Ee)/$e)},getLength:function(h,d,v,D){if(d===n&&(d=0),v===n&&(v=1),Fn.isStraight(h)){var A=h;v<1&&(A=Fn.subdivide(A,v)[0],d/=v),d>0&&(A=Fn.subdivide(A,d)[1]);var T=A[6]-A[0],P=A[7]-A[1];return Math.sqrt(T*T+P*P)}return Ae.integrate(D||t(h),d,v,i(d,v))},getTimeAt:function(h,d,v){if(v===n&&(v=d<0?1:0),d===0)return v;var D=Math.abs,A=1e-12,T=d>0,P=T?v:0,F=T?1:v,V=t(h),z=Fn.getLength(h,P,F,V),R=D(d)-z;if(D(R)<A)return T?F:P;if(R>A)return null;var J=d/z,Y=0;function ie(j){return Y+=Ae.integrate(V,v,j,i(v,j)),v=j,Y-d}return Ae.findRoot(ie,V,v+J,P,F,32,1e-12)},getPoint:function(h,d){return o(h,d,0,!1)},getTangent:function(h,d){return o(h,d,1,!0)},getWeightedTangent:function(h,d){return o(h,d,1,!1)},getNormal:function(h,d){return o(h,d,2,!0)},getWeightedNormal:function(h,d){return o(h,d,2,!1)},getCurvature:function(h,d){return o(h,d,3,!1).x},getPeaks:function(h){var d=h[0],v=h[1],D=h[2],A=h[3],T=h[4],P=h[5],F=h[6],V=h[7],z=-d+3*D-3*T+F,R=3*d-6*D+3*T,J=-3*d+3*D,Y=-v+3*A-3*P+V,ie=3*v-6*A+3*P,j=-3*v+3*A,X=1e-8,I=1-X,G=[];return Ae.solveCubic(9*(z*z+Y*Y),9*(z*R+ie*Y),2*(R*R+ie*ie)+3*(J*z+j*Y),J*R+ie*j,G,X,I),G.sort()}}}},new function(){function t(R,J,Y,ie,j,X,I){var G=!I&&Y.getPrevious()===j,te=!I&&Y!==j&&Y.getNext()===j,pe=1e-8,oe=1-pe;if(ie!==null&&ie>=(G?pe:0)&&ie<=(te?oe:1)&&X!==null&&X>=(te?pe:0)&&X<=(G?oe:1)){var Ee=new si(Y,ie,null,I),$e=new si(j,X,null,I);Ee._intersection=$e,$e._intersection=Ee,(!J||J(Ee))&&si.insert(R,Ee,!0)}}function i(R,J,Y,ie,j,X,I,G,te,pe,oe,Ee,$e){if(++te>=4096||++G>=40)return te;var Xe=1e-9,ft=J[0],Ze=J[1],yt=J[6],Et=J[7],Yt=an.getSignedDistance,qt=Yt(ft,Ze,yt,Et,J[2],J[3]),ln=Yt(ft,Ze,yt,Et,J[4],J[5]),In=qt*ln>0?3/4:4/9,Zn=In*Math.min(0,qt,ln),Kn=In*Math.max(0,qt,ln),ur=Yt(ft,Ze,yt,Et,R[0],R[1]),yn=Yt(ft,Ze,yt,Et,R[2],R[3]),An=Yt(ft,Ze,yt,Et,R[4],R[5]),qn=Yt(ft,Ze,yt,Et,R[6],R[7]),cr=o(ur,yn,An,qn),mr=cr[0],Rr=cr[1],Lr,Ir;if(qt===0&&ln===0&&ur===0&&yn===0&&An===0&&qn===0||(Lr=h(mr,Rr,Zn,Kn))==null||(Ir=h(mr.reverse(),Rr.reverse(),Zn,Kn))==null)return te;var ti=pe+(oe-pe)*Lr,Wr=pe+(oe-pe)*Ir;if(Math.max($e-Ee,Wr-ti)<Xe){var ls=(ti+Wr)/2,Vr=(Ee+$e)/2;t(j,X,I?ie:Y,I?Vr:ls,I?Y:ie,I?ls:Vr)}else{R=Fn.getPart(R,Lr,Ir);var $i=$e-Ee;if(Ir-Lr>.8)if(Wr-ti>$i){var Qi=Fn.subdivide(R,.5),ls=(ti+Wr)/2;te=i(J,Qi[0],ie,Y,j,X,!I,G,te,Ee,$e,ti,ls),te=i(J,Qi[1],ie,Y,j,X,!I,G,te,Ee,$e,ls,Wr)}else{var Qi=Fn.subdivide(J,.5),Vr=(Ee+$e)/2;te=i(Qi[0],R,ie,Y,j,X,!I,G,te,Ee,Vr,ti,Wr),te=i(Qi[1],R,ie,Y,j,X,!I,G,te,Vr,$e,ti,Wr)}else $i===0||$i>=Xe?te=i(J,R,ie,Y,j,X,!I,G,te,Ee,$e,ti,Wr):te=i(R,J,Y,ie,j,X,I,G,te,ti,Wr,Ee,$e)}return te}function o(R,J,Y,ie){var j=[0,R],X=[1/3,J],I=[2/3,Y],G=[1,ie],te=J-(2*R+ie)/3,pe=Y-(R+2*ie)/3,oe;if(te*pe<0)oe=[[j,X,G],[j,I,G]];else{var Ee=te/pe;oe=[Ee>=2?[j,X,G]:Ee<=.5?[j,I,G]:[j,X,I,G],[j,G]]}return(te||pe)<0?oe.reverse():oe}function h(R,J,Y,ie){return R[0][1]<Y?d(R,!0,Y):J[0][1]>ie?d(J,!1,ie):R[0][0]}function d(R,J,Y){for(var ie=R[0][0],j=R[0][1],X=1,I=R.length;X<I;X++){var G=R[X][0],te=R[X][1];if(J?te>=Y:te<=Y)return te===Y?G:ie+(Y-j)*(G-ie)/(te-j);ie=G,j=te}return null}function v(R,J,Y,ie,j){var X=Ae.isZero;if(X(ie)&&X(j)){var I=Fn.getTimeOf(R,new re(J,Y));return I===null?[]:[I]}for(var G=Math.atan2(-j,ie),te=Math.sin(G),pe=Math.cos(G),oe=[],Ee=[],$e=0;$e<8;$e+=2){var Xe=R[$e]-J,ft=R[$e+1]-Y;oe.push(Xe*pe-ft*te,Xe*te+ft*pe)}return Fn.solveCubic(oe,1,0,Ee,0,1),Ee}function D(R,J,Y,ie,j,X,I){for(var G=J[0],te=J[1],pe=J[6],oe=J[7],Ee=v(R,G,te,pe-G,oe-te),$e=0,Xe=Ee.length;$e<Xe;$e++){var ft=Ee[$e],Ze=Fn.getPoint(R,ft),yt=Fn.getTimeOf(J,Ze);yt!==null&&t(j,X,I?ie:Y,I?yt:ft,I?Y:ie,I?ft:yt)}}function A(R,J,Y,ie,j,X){var I=an.intersect(R[0],R[1],R[6],R[7],J[0],J[1],J[6],J[7]);I&&t(j,X,Y,Fn.getTimeOf(R,I),ie,Fn.getTimeOf(J,I))}function T(R,J,Y,ie,j,X){var I=1e-12,G=Math.min,te=Math.max;if(te(R[0],R[2],R[4],R[6])+I>G(J[0],J[2],J[4],J[6])&&G(R[0],R[2],R[4],R[6])-I<te(J[0],J[2],J[4],J[6])&&te(R[1],R[3],R[5],R[7])+I>G(J[1],J[3],J[5],J[7])&&G(R[1],R[3],R[5],R[7])-I<te(J[1],J[3],J[5],J[7])){var pe=V(R,J);if(pe)for(var oe=0;oe<2;oe++){var Ee=pe[oe];t(j,X,Y,Ee[0],ie,Ee[1],!0)}else{var $e=Fn.isStraight(R),Xe=Fn.isStraight(J),ft=$e&&Xe,Ze=$e&&!Xe,yt=j.length;if((ft?A:$e||Xe?D:i)(Ze?J:R,Ze?R:J,Ze?ie:Y,Ze?Y:ie,j,X,Ze,0,0,0,1,0,1),!ft||j.length===yt)for(var oe=0;oe<4;oe++){var Et=oe>>1,Yt=oe&1,qt=Et*6,ln=Yt*6,In=new re(R[qt],R[qt+1]),Zn=new re(J[ln],J[ln+1]);In.isClose(Zn,I)&&t(j,X,Y,Et,ie,Yt)}}}return j}function P(R,J,Y,ie){var j=Fn.classify(R);if(j.type==="loop"){var X=j.roots;t(Y,ie,J,X[0],J,X[1])}return Y}function F(R,J,Y,ie,j,X){var I=1e-7,G=!J;G&&(J=R);for(var te=R.length,pe=J.length,oe=new Array(te),Ee=G?oe:new Array(pe),$e=[],Xe=0;Xe<te;Xe++)oe[Xe]=R[Xe].getValues(ie);if(!G)for(var Xe=0;Xe<pe;Xe++)Ee[Xe]=J[Xe].getValues(j);for(var ft=W.findCurveBoundsCollisions(oe,Ee,I),Ze=0;Ze<te;Ze++){var yt=R[Ze],Et=oe[Ze];G&&P(Et,yt,$e,Y);var Yt=ft[Ze];if(Yt)for(var qt=0;qt<Yt.length;qt++){if(X&&$e.length)return $e;var ln=Yt[qt];if(!G||ln>Ze){var In=J[ln],Zn=Ee[ln];T(Et,Zn,yt,In,$e,Y)}}}return $e}function V(R,J){function Y(qn){var cr=qn[6]-qn[0],mr=qn[7]-qn[1];return cr*cr+mr*mr}var ie=Math.abs,j=an.getDistance,X=1e-8,I=1e-7,G=Fn.isStraight(R),te=Fn.isStraight(J),pe=G&&te,oe=Y(R)<Y(J),Ee=oe?J:R,$e=oe?R:J,Xe=Ee[0],ft=Ee[1],Ze=Ee[6]-Xe,yt=Ee[7]-ft;if(j(Xe,ft,Ze,yt,$e[0],$e[1],!0)<I&&j(Xe,ft,Ze,yt,$e[6],$e[7],!0)<I)!pe&&j(Xe,ft,Ze,yt,Ee[2],Ee[3],!0)<I&&j(Xe,ft,Ze,yt,Ee[4],Ee[5],!0)<I&&j(Xe,ft,Ze,yt,$e[2],$e[3],!0)<I&&j(Xe,ft,Ze,yt,$e[4],$e[5],!0)<I&&(G=te=pe=!0);else if(pe)return null;if(G^te)return null;for(var Et=[R,J],Yt=[],qt=0;qt<4&&Yt.length<2;qt++){var ln=qt&1,In=ln^1,Zn=qt>>1,Kn=Fn.getTimeOf(Et[ln],new re(Et[In][Zn?6:0],Et[In][Zn?7:1]));if(Kn!=null){var ur=ln?[Zn,Kn]:[Kn,Zn];(!Yt.length||ie(ur[0]-Yt[0][0])>X&&ie(ur[1]-Yt[0][1])>X)&&Yt.push(ur)}if(qt>2&&!Yt.length)break}if(Yt.length!==2)Yt=null;else if(!pe){var yn=Fn.getPart(R,Yt[0][0],Yt[1][0]),An=Fn.getPart(J,Yt[0][1],Yt[1][1]);(ie(An[2]-yn[2])>I||ie(An[3]-yn[3])>I||ie(An[4]-yn[4])>I||ie(An[5]-yn[5])>I)&&(Yt=null)}return Yt}function z(R,J){var Y=R[0],ie=R[1],j=R[2],X=R[3],I=R[4],G=R[5],te=R[6],pe=R[7],oe=J.normalize(),Ee=oe.x,$e=oe.y,Xe=3*te-9*I+9*j-3*Y,ft=3*pe-9*G+9*X-3*ie,Ze=6*I-12*j+6*Y,yt=6*G-12*X+6*ie,Et=3*j-3*Y,Yt=3*X-3*ie,qt=2*Xe*$e-2*ft*Ee,ln=[];if(Math.abs(qt)<Ae.CURVETIME_EPSILON){var In=Xe*Yt-ft*Et,qt=Xe*yt-ft*Ze;if(qt!=0){var Zn=-In/qt;Zn>=0&&Zn<=1&&ln.push(Zn)}}else{var Kn=(Ze*Ze-4*Xe*Et)*$e*$e+(-2*Ze*yt+4*ft*Et+4*Xe*Yt)*Ee*$e+(yt*yt-4*ft*Yt)*Ee*Ee,ur=Ze*$e-yt*Ee;if(Kn>=0&&qt!=0){var yn=Math.sqrt(Kn),An=-(ur+yn)/qt,qn=(-ur+yn)/qt;An>=0&&An<=1&&ln.push(An),qn>=0&&qn<=1&&ln.push(qn)}}return ln}return{getIntersections:function(R){var J=this.getValues(),Y=R&&R!==this&&R.getValues();return Y?T(J,Y,this,R,[]):P(J,this,[])},statics:{getOverlaps:V,getIntersections:F,getCurveLineIntersections:v,getTimesWithTangent:z}}}),si=u.extend({_class:"CurveLocation",initialize:function(t,i,o,h,d){if(i>=.99999999){var v=t.getNext();v&&(i=0,t=v)}this._setCurve(t),this._time=i,this._point=o||t.getPointAtTime(i),this._overlap=h,this._distance=d,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var i=t.getCurve();i?this._setCurve(i):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var i=this.getCurve(),o=this.getTime();o===0?t=i._segment1:o===1?t=i._segment2:o!=null&&(t=i.getPartLength(0,o)<i.getPartLength(o,1)?i._segment1:i._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,i=this;t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function o(h){var d=h&&h.getCurve();if(d&&(i._time=d.getTimeOf(i._point))!=null)return i._setCurve(d),d}return this._curve||o(this._segment)||o(this._segment1)||o(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),i=this._time;return t&&i==null?this._time=t.getTimeOf(this._point):i},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(t==null){t=0;var i=this.getPath(),o=this.getIndex();if(i&&o!=null)for(var h=i.getCurves(),d=0;d<o;d++)t+=h[d].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(t==null){var i=this.getCurve(),o=this.getTime();this._curveOffset=t=o!=null&&i&&i.getPartLength(0,o)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),i=t&&t.divideAtTime(this.getTime());return i&&this._setSegment(i._segment1),i},split:function(){var t=this.getCurve(),i=t._path,o=t&&t.splitAtTime(this.getTime());return o&&this._setSegment(i.getLastSegment()),o},equals:function(t,i){var o=this===t;if(!o&&t instanceof si){var h=this.getCurve(),d=t.getCurve(),v=h._path,D=d._path;if(v===D){var A=Math.abs,T=1e-7,P=A(this.getOffset()-t.getOffset()),F=!i&&this._intersection,V=!i&&t._intersection;o=(P<T||v&&A(v.getLength()-P)<T)&&(!F&&!V||F&&V&&F.equals(V,!0))}}return o},toString:function(){var t=[],i=this.getPoint(),o=ve.instance;i&&t.push("point: "+i);var h=this.getIndex();h!=null&&t.push("index: "+h);var d=this.getTime();return d!=null&&t.push("time: "+o.number(d)),this._distance!=null&&t.push("distance: "+o.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var i=this.getCurve(),o=t.getCurve();return!(i.isStraight()&&o.isStraight()&&i.getLine().intersect(o.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var i=this.getTime(),o=t.getTime(),h=1e-8,d=1-h,v=i>=h&&i<=d,D=o>=h&&o<=d;if(v&&D)return!this.isTouching();var A=this.getCurve(),T=A&&i<h?A.getPrevious():A,P=t.getCurve(),F=P&&o<h?P.getPrevious():P;if(i>d&&(A=A.getNext()),o>d&&(P=P.getNext()),!T||!A||!F||!P)return!1;var V=[];function z(Ee,$e){var Xe=Ee.getValues(),ft=Fn.classify(Xe).roots||Fn.getPeaks(Xe),Ze=ft.length,yt=Fn.getLength(Xe,$e&&Ze?ft[Ze-1]:0,!$e&&Ze?ft[0]:1);V.push(Ze?yt:yt/32)}function R(Ee,$e,Xe){return $e<Xe?Ee>$e&&Ee<Xe:Ee>$e||Ee<Xe}v||(z(T,!0),z(A,!1)),D||(z(F,!0),z(P,!1));var J=this.getPoint(),Y=Math.min.apply(Math,V),ie=v?A.getTangentAtTime(i):A.getPointAt(Y).subtract(J),j=v?ie.negate():T.getPointAt(-Y).subtract(J),X=D?P.getTangentAtTime(o):P.getPointAt(Y).subtract(J),I=D?X.negate():F.getPointAt(-Y).subtract(J),G=j.getAngle(),te=ie.getAngle(),pe=I.getAngle(),oe=X.getAngle();return!!(v?R(G,pe,oe)^R(te,pe,oe)&&R(G,oe,pe)^R(te,oe,pe):R(pe,G,te)^R(oe,G,te)&&R(pe,te,G)^R(oe,te,G))},hasOverlap:function(){return!!this._overlap}},u.each(Fn._evaluateMethods,function(t){var i=t+"At";this[t]=function(){var o=this.getCurve(),h=this.getTime();return h!=null&&o&&o[i](h,!0)}},{preserve:!0}),new function(){function t(i,o,h){var d=i.length,v=0,D=d-1;function A(J,Y){for(var ie=J+Y;ie>=-1&&ie<=d;ie+=Y){var j=i[(ie%d+d)%d];if(!o.getPoint().isClose(j.getPoint(),1e-7))break;if(o.equals(j))return j}return null}for(;v<=D;){var T=v+D>>>1,P=i[T],F;if(h&&(F=o.equals(P)?P:A(T,-1)||A(T,1)))return o._overlap&&(F._overlap=F._intersection._overlap=!0),F;var V=o.getPath(),z=P.getPath(),R=V!==z?V._id-z._id:o.getIndex()+o.getTime()-(P.getIndex()+P.getTime());R<0?D=T-1:v=T+1}return i.splice(v,0,o),o}return{statics:{insert:t,expand:function(i){for(var o=i.slice(),h=i.length-1;h>=0;h--)t(o,i[h]._intersection,!1);return o}}}}),Pi=He.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var i,o,h;if(u.isPlainObject(t)?(o=t.segments,i=t.pathData):Array.isArray(t)?o=t:typeof t=="string"&&(i=t),o){var d=o[0];h=d&&Array.isArray(d[0])}else i&&(h=(i.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(i));var v=h?hs:ai;return new v(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var i=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),o,h=!1,d,v,D=new re,A=new re;function T(I,G){var te=+o[I];return h&&(te+=D[G]),te}function P(I){return new re(T(I,"x"),T(I+1,"y"))}this.clear();for(var F=0,V=i&&i.length;F<V;F++){var z=i[F],R=z[0],J=R.toLowerCase();o=z.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var Y=o&&o.length;switch(h=R===J,d==="z"&&!/[mz]/.test(J)&&this.moveTo(D),J){case"m":case"l":for(var ie=J==="m",j=0;j<Y;j+=2)this[ie?"moveTo":"lineTo"](D=P(j)),ie&&(A=D,ie=!1);v=D;break;case"h":case"v":var X=J==="h"?"x":"y";D=D.clone();for(var j=0;j<Y;j++)D[X]=T(j,X),this.lineTo(D);v=D;break;case"c":for(var j=0;j<Y;j+=6)this.cubicCurveTo(P(j),v=P(j+2),D=P(j+4));break;case"s":for(var j=0;j<Y;j+=4)this.cubicCurveTo(/[cs]/.test(d)?D.multiply(2).subtract(v):D,v=P(j),D=P(j+2)),d=J;break;case"q":for(var j=0;j<Y;j+=4)this.quadraticCurveTo(v=P(j),D=P(j+2));break;case"t":for(var j=0;j<Y;j+=2)this.quadraticCurveTo(v=/[qt]/.test(d)?D.multiply(2).subtract(v):D,D=P(j)),d=J;break;case"a":for(var j=0;j<Y;j+=7)this.arcTo(D=P(j+5),new nt(+o[j],+o[j+1]),+o[j+2],+o[j+4],+o[j+3]);break;case"z":this.closePath(1e-12),D=A;break}d=J}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var i=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return i.onPath||!!(this.getFillRule()==="evenodd"?i.windingL&1||i.windingR&1:i.winding)},getIntersections:function(t,i,o,h){var d=this===t||!t,v=this._matrix._orNullIfIdentity(),D=d?v:(o||t._matrix)._orNullIfIdentity();return d||this.getBounds(v).intersects(t.getBounds(D),1e-12)?Fn.getIntersections(this.getCurves(),!d&&t.getCurves(),i,v,D,h):[]},getCrossings:function(t){return this.getIntersections(t,function(i){return i.isCrossing()})},getNearestLocation:function(){for(var t=re.read(arguments),i=this.getCurves(),o=1/0,h=null,d=0,v=i.length;d<v;d++){var D=i[d].getNearestLocation(t);D._distance<o&&(o=D._distance,h=D)}return h},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()},interpolate:function(t,i,o){var h=!this._children,d=h?"_segments":"_children",v=t[d],D=i[d],A=this[d];if(!v||!D||v.length!==D.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+i);var T=A.length,P=D.length;if(T<P)for(var F=h?xr:ai,V=T;V<P;V++)this.add(new F);else T>P&&this[h?"removeSegments":"removeChildren"](P,T);for(var V=0;V<P;V++)A[V].interpolate(v[V],D[V],o);h&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var i=!1;if(t){var o=this._children||[this],h=t._children?t._children.slice():[t],d=o.length,v=h.length,D=[],A=0;i=!0;for(var T=W.findItemBoundsCollisions(o,h,Ae.GEOMETRIC_EPSILON),P=d-1;P>=0&&i;P--){var F=o[P];i=!1;var V=T[P];if(V)for(var z=V.length-1;z>=0&&!i;z--)F.compare(h[V[z]])&&(D[V[z]]||(D[V[z]]=!0,A++),i=!0)}i=i&&A===v}return i}}),ai=Pi.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var i=arguments,o=Array.isArray(t)?typeof t[0]=="object"?t:i:t&&t.size===n&&(t.x!==n||t.point!==n)?i:null;o&&o.length>0?this.setSegments(o):(this._curves=n,this._segmentSelection=0,!o&&typeof t=="string"&&(this.setPathData(t),t=null)),this._initialize(!o&&t)},_equals:function(t){return this._closed===t._closed&&u.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(i){if(t.base.call(this,i),i&8){if(this._length=this._area=n,i&32)this._version++;else if(this._curves)for(var o=0,h=this._curves.length;o<h;o++)this._curves[o]._changed()}else i&64&&(this._bounds=n)},getStyle:function(){var t=this._parent;return(t instanceof hs?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var i=this.isFullySelected(),o=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,o){var h=t[o-1];typeof h=="boolean"&&(this.setClosed(h),o--),this._add(xr.readList(t,0,{},o))}i&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,i=this._segments;if(!t){var o=this._countCurves();t=this._curves=new Array(o);for(var h=0;h<o;h++)t[h]=new Fn(this,i[h],i[h+1]||i[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var i=this._curves.length=this._countCurves();t&&(this._curves[i-1]=new Fn(this,this._segments[i-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,i){var o=this._segments,h=o.length,d=new ve(i),v=new Array(6),D=!0,A,T,P,F,V,z,R,J,Y=[];function ie(X,I){if(X._transformCoordinates(t,v),A=v[0],T=v[1],D)Y.push("M"+d.pair(A,T)),D=!1;else if(V=v[2],z=v[3],V===A&&z===T&&R===P&&J===F){if(!I){var G=A-P,te=T-F;Y.push(G===0?"v"+d.number(te):te===0?"h"+d.number(G):"l"+d.pair(G,te))}}else Y.push("c"+d.pair(R-P,J-F)+" "+d.pair(V-P,z-F)+" "+d.pair(A-P,T-F));P=A,F=T,R=v[4],J=v[5]}if(!h)return"";for(var j=0;j<h;j++)ie(o[j]);return this._closed&&h>0&&(ie(o[0],!0),Y.push("z")),Y.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var i=this._segments,o=new Array(6),h=0,d=i.length;h<d;h++)i[h]._transformCoordinates(t,o,!0);return!0},_add:function(t,i){for(var o=this._segments,h=this._curves,d=t.length,v=i==null,i=v?o.length:i,D=0;D<d;D++){var A=t[D];A._path&&(A=t[D]=A.clone()),A._path=this,A._index=i+D,A._selection&&this._updateSelection(A,0,A._selection)}if(v)u.push(o,t);else{o.splice.apply(o,[i,0].concat(t));for(var D=i+d,T=o.length;D<T;D++)o[D]._index=D}if(h){var P=this._countCurves(),F=i>0&&i+d-1===P?i-1:i,V=F,z=Math.min(F+d,P);t._curves&&(h.splice.apply(h,[F,0].concat(t._curves)),V+=t._curves.length);for(var D=V;D<z;D++)h.splice(D,0,new Fn(this,null,null));this._adjustCurves(F,z)}return this._changed(41),t},_adjustCurves:function(t,i){for(var o=this._segments,h=this._curves,d,v=t;v<i;v++)d=h[v],d._path=this,d._segment1=o[v],d._segment2=o[v+1]||o[0],d._changed();(d=h[this._closed&&!t?o.length-1:t-1])&&(d._segment2=o[t]||o[0],d._changed()),(d=h[i])&&(d._segment1=o[i],d._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var i=arguments;return i.length>1&&typeof t!="number"?this._add(xr.readList(i)):this._add([xr.read(i)])[0]},insert:function(t,i){var o=arguments;return o.length>2&&typeof i!="number"?this._add(xr.readList(o,1),t):this._add([xr.read(o,1)],t)[0]},addSegment:function(){return this._add([xr.read(arguments)])[0]},insertSegment:function(t){return this._add([xr.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(xr.readList(t))},insertSegments:function(t,i){return this._add(xr.readList(i),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,i,o){t=t||0,i=u.pick(i,this._segments.length);var h=this._segments,d=this._curves,v=h.length,D=h.splice(t,i-t),A=D.length;if(!A)return D;for(var T=0;T<A;T++){var P=D[T];P._selection&&this._updateSelection(P,P._selection,0),P._index=P._path=null}for(var T=t,F=h.length;T<F;T++)h[T]._index=T;if(d){for(var V=t>0&&i===v+(this._closed?1:0)?t-1:t,d=d.splice(V,A),T=d.length-1;T>=0;T--)d[T]._path=null;o&&(D._curves=d.slice(1)),this._adjustCurves(V,V)}return this._changed(41),D},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,i=0,o=t.length;i<o;i++)if(t[i].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,i=0,o=t.length;i<o;i++)t[i].clearHandles()},getLength:function(){if(this._length==null){for(var t=this.getCurves(),i=0,o=0,h=t.length;o<h;o++)i+=t[o].getLength();this._length=i}return this._length},getArea:function(){var t=this._area;if(t==null){var i=this._segments,o=this._closed;t=0;for(var h=0,d=i.length;h<d;h++){var v=h+1===d;t+=Fn.getArea(Fn.getValues(i[h],i[v?0:h+1],null,v&&!o))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===t*7},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(i){i&1||this._selectSegments(!1),t.base.call(this,i)},_selectSegments:function(t){var i=this._segments,o=i.length,h=t?7:0;this._segmentSelection=h*o;for(var d=0;d<o;d++)i[d]._selection=h},_updateSelection:function(t,i,o){t._selection=o;var h=this._segmentSelection+=o-i;h>0&&this.setSelected(!0)},divideAt:function(t){var i=this.getLocationAt(t),o;return i&&(o=i.getCurve().divideAt(i.getCurveOffset()))?o._segment1:null},splitAt:function(t){var i=this.getLocationAt(t),o=i&&i.index,h=i&&i.time,d=1e-8,v=1-d;h>v&&(o++,h=0);var D=this.getCurves();if(o>=0&&o<D.length){h>=d&&D[o++].divideAtTime(h);var A=this.removeSegments(o,this._segments.length,!0),T;return this._closed?(this.setClosed(!1),T=this):(T=new ai(He.NO_INSERT),T.insertAbove(this),T.copyAttributes(this)),T._add(A,0),this.addSegment(A[0]),T}return null},split:function(t,i){var o,h=i===n?t:(o=this.getCurves()[t])&&o.getLocationAtTime(i);return h!=null?this.splitAt(h):null},join:function(t,i){var o=i||0;if(t&&t!==this){var h=t._segments,d=this.getLastSegment(),v=t.getLastSegment();if(!v)return this;d&&d._point.isClose(v._point,o)&&t.reverse();var D=t.getFirstSegment();if(d&&d._point.isClose(D._point,o))d.setHandleOut(D._handleOut),this._add(h.slice(1));else{var A=this.getFirstSegment();A&&A._point.isClose(D._point,o)&&t.reverse(),v=t.getLastSegment(),A&&A._point.isClose(v._point,o)?(A.setHandleIn(v._handleIn),this._add(h.slice(0,h.length-1),0)):this._add(h.slice())}t._closed&&this._add([h[0]]),t.remove()}var T=this.getFirstSegment(),P=this.getLastSegment();return T!==P&&T._point.isClose(P._point,o)&&(T.setHandleIn(P._handleIn),P.remove(),this.setClosed(!0)),this},reduce:function(t){for(var i=this.getCurves(),o=t&&t.simplify,h=o?1e-7:0,d=i.length-1;d>=0;d--){var v=i[d];!v.hasHandles()&&(!v.hasLength(h)||o&&v.isCollinear(v.getNext()))&&v.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,i=this._segments.length;t<i;t++){var o=this._segments[t],h=o._handleIn;o._handleIn=o._handleOut,o._handleOut=h,o._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var i=new fa(this,t||.25,256,!0),o=i.parts,h=o.length,d=[],v=0;v<h;v++)d.push(new xr(o[v].curve.slice(0,2)));!this._closed&&h>0&&d.push(new xr(o[h-1].curve.slice(6))),this.setSegments(d)},simplify:function(t){var i=new Hs(this).fit(t||2.5);return i&&this.setSegments(i),!!i},smooth:function(t){var i=this,o=t||{},h=o.type||"asymmetric",d=this._segments,v=d.length,D=this._closed;function A(mr,Rr){var Lr=mr&&mr.index;if(Lr!=null){var Ir=mr.path;if(Ir&&Ir!==i)throw new Error(mr._class+" "+Lr+" of "+Ir+" is not part of "+i);Rr&&mr instanceof Fn&&Lr++}else Lr=typeof mr=="number"?mr:Rr;return Math.min(Lr<0&&D?Lr%v:Lr<0?Lr+v:Lr,v-1)}var T=D&&o.from===n&&o.to===n,P=A(o.from,0),F=A(o.to,v-1);if(P>F)if(D)P-=v;else{var V=P;P=F,F=V}if(/^(?:asymmetric|continuous)$/.test(h)){var z=h==="asymmetric",R=Math.min,J=F-P+1,Y=J-1,ie=T?R(J,4):1,j=ie,X=ie,I=[];if(D||(j=R(1,P),X=R(1,v-F-1)),Y+=j+X,Y<=1)return;for(var G=0,te=P-j;G<=Y;G++,te++)I[G]=d[(te<0?te+v:te)%v]._point;for(var pe=I[0]._x+2*I[1]._x,oe=I[0]._y+2*I[1]._y,Ee=2,$e=Y-1,Xe=[pe],ft=[oe],Ze=[Ee],yt=[],Et=[],G=1;G<Y;G++){var Yt=G<$e,qt=Yt||z?1:2,ln=Yt?4:z?2:7,In=Yt?4:z?3:8,Zn=Yt?2:z?0:1,Kn=qt/Ee;Ee=Ze[G]=ln-Kn,pe=Xe[G]=In*I[G]._x+Zn*I[G+1]._x-Kn*pe,oe=ft[G]=In*I[G]._y+Zn*I[G+1]._y-Kn*oe}yt[$e]=Xe[$e]/Ze[$e],Et[$e]=ft[$e]/Ze[$e];for(var G=Y-2;G>=0;G--)yt[G]=(Xe[G]-yt[G+1])/Ze[G],Et[G]=(ft[G]-Et[G+1])/Ze[G];yt[Y]=(3*I[Y]._x-yt[$e])/2,Et[Y]=(3*I[Y]._y-Et[$e])/2;for(var G=j,ur=Y-X,te=P;G<=ur;G++,te++){var yn=d[te<0?te+v:te],An=yn._point,qn=yt[G]-An._x,cr=Et[G]-An._y;(T||G<ur)&&yn.setHandleOut(qn,cr),(T||G>j)&&yn.setHandleIn(-qn,-cr)}}else for(var G=P;G<=F;G++)d[G<0?G+v:G].smooth(o,!T&&G===P,!T&&G===F)},toShape:function(t){if(!this._closed)return null;var i=this._segments,o,h,d,v;function D(z,R){var J=i[z],Y=J.getNext(),ie=i[R],j=ie.getNext();return J._handleOut.isZero()&&Y._handleIn.isZero()&&ie._handleOut.isZero()&&j._handleIn.isZero()&&Y._point.subtract(J._point).isCollinear(j._point.subtract(ie._point))}function A(z){var R=i[z],J=R.getPrevious(),Y=R.getNext();return J._handleOut.isZero()&&R._handleIn.isZero()&&R._handleOut.isZero()&&Y._handleIn.isZero()&&R._point.subtract(J._point).isOrthogonal(Y._point.subtract(R._point))}function T(z){var R=i[z],J=R.getNext(),Y=R._handleOut,ie=J._handleIn,j=.5522847498307936;if(Y.isOrthogonal(ie)){var X=R._point,I=J._point,G=new an(X,Y,!0).intersect(new an(I,ie,!0),!0);return G&&Ae.isZero(Y.getLength()/G.subtract(X).getLength()-j)&&Ae.isZero(ie.getLength()/G.subtract(I).getLength()-j)}return!1}function P(z,R){return i[z]._point.getDistance(i[R]._point)}if(!this.hasHandles()&&i.length===4&&D(0,2)&&D(1,3)&&A(1)?(o=On.Rectangle,h=new nt(P(0,3),P(0,1)),v=i[1]._point.add(i[2]._point).divide(2)):i.length===8&&T(0)&&T(2)&&T(4)&&T(6)&&D(1,5)&&D(3,7)?(o=On.Rectangle,h=new nt(P(1,6),P(0,3)),d=h.subtract(new nt(P(0,7),P(1,2))).divide(2),v=i[3]._point.add(i[4]._point).divide(2)):i.length===4&&T(0)&&T(1)&&T(2)&&T(3)&&(Ae.isZero(P(0,2)-P(1,3))?(o=On.Circle,d=P(0,2)/2):(o=On.Ellipse,d=new nt(P(2,0)/2,P(3,1)/2)),v=i[1]._point),o){var F=this.getPosition(!0),V=new o({center:F,size:h,radius:d,insert:!1});return V.copyAttributes(this,!0),V._matrix.prepend(this._matrix),V.rotate(v.subtract(F).getAngle()+90),(t===n||t)&&V.insertAbove(this),V}return null},toPath:"#clone",compare:function t(i){if(!i||i instanceof hs)return t.base.call(this,i);var o=this.getCurves(),h=i.getCurves(),d=o.length,v=h.length;if(!d||!v)return d==v;for(var D=o[0].getValues(),A=[],T=0,P,F=0,V,z=0;z<v;z++){var R=h[z].getValues();A.push(R);var J=Fn.getOverlaps(D,R);if(J){P=!z&&J[0][0]>0?v-1:z,V=J[0][1];break}}for(var Y=Math.abs,ie=1e-8,R=A[P],j;D&&R;){var J=Fn.getOverlaps(D,R);if(J){var X=J[0][0];if(Y(X-F)<ie){F=J[1][0],F===1&&(D=++T<d?o[T].getValues():null,F=0);var I=J[0][1];if(Y(I-V)<ie){if(j||(j=[P,I]),V=J[1][1],V===1&&(++P>=v&&(P=0),R=A[P]||h[P].getValues(),V=0),!D)return j[0]===P&&j[1]===V;continue}}}break}return!1},_hitTestSelf:function(t,i,o,h){var d=this,v=this.getStyle(),D=this._segments,A=D.length,T=this._closed,P=i._tolerancePadding,F=P,V,z,R,J,Y,ie,j=i.stroke&&v.hasStroke(),X=i.fill&&v.hasFill(),I=i.curves,G=j?v.getStrokeWidth()/2:X&&i.tolerance>0||I?0:null;G!==null&&(G>0?(V=v.getStrokeJoin(),z=v.getStrokeCap(),R=v.getMiterLimit(),F=F.add(ai._getStrokePadding(G,h))):V=z="round");function te(yt,Et){return t.subtract(yt).divide(Et).length<=1}function pe(yt,Et,Yt){if(!i.selected||Et.isSelected()){var qt=yt._point;if(Et!==qt&&(Et=Et.add(qt)),te(Et,F))return new oi(Yt,d,{segment:yt,point:Et})}}function oe(yt,Et){return(Et||i.segments)&&pe(yt,yt._point,"segment")||!Et&&i.handles&&(pe(yt,yt._handleIn,"handle-in")||pe(yt,yt._handleOut,"handle-out"))}function Ee(yt){J.add(yt)}function $e(yt){var Et=T||yt._index>0&&yt._index<A-1;if((Et?V:z)==="round")return te(yt._point,F);if(J=new ai({internal:!0,closed:!0}),Et?yt.isSmooth()||ai._addBevelJoin(yt,V,G,R,null,h,Ee,!0):z==="square"&&ai._addSquareCap(yt,z,G,null,h,Ee,!0),!J.isEmpty()){var Yt;return J.contains(t)||(Yt=J.getNearestLocation(t))&&te(Yt.getPoint(),P)}}if(i.ends&&!i.segments&&!T){if(ie=oe(D[0],!0)||oe(D[A-1],!0))return ie}else if(i.segments||i.handles){for(var Xe=0;Xe<A;Xe++)if(ie=oe(D[Xe]))return ie}if(G!==null){if(Y=this.getNearestLocation(t),Y){var ft=Y.getTime();ft===0||ft===1&&A>1?$e(Y.getSegment())||(Y=null):te(Y.getPoint(),F)||(Y=null)}if(!Y&&V==="miter"&&A>1)for(var Xe=0;Xe<A;Xe++){var Ze=D[Xe];if(t.getDistance(Ze._point)<=R*G&&$e(Ze)){Y=Ze.getLocation();break}}}return!Y&&X&&this._contains(t)||Y&&!j&&!I?new oi("fill",this):Y?new oi(j?"stroke":"curve",this,{location:Y,point:Y.getPoint()}):null}},u.each(Fn._evaluateMethods,function(t){this[t+"At"]=function(i){var o=this.getLocationAt(i);return o&&o[t]()}},{beans:!1,getLocationOf:function(){for(var t=re.read(arguments),i=this.getCurves(),o=0,h=i.length;o<h;o++){var d=i[o].getLocationOf(t);if(d)return d}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if(typeof t=="number"){for(var i=this.getCurves(),o=0,h=0,d=i.length;h<d;h++){var v=o,D=i[h];if(o+=D.getLength(),o>t)return D.getLocationAt(t-v)}if(i.length>0&&t<=this.getLength())return new si(i[i.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=re.read(arguments);if(t.isZero())return[];for(var i=[],o=0,h=this.getCurves(),d=0,v=h.length;d<v;d++){for(var D=h[d],A=D.getTimesWithTangent(t),T=0,P=A.length;T<P;T++){var F=o+D.getOffsetAtTime(A[T]);i.indexOf(F)<0&&i.push(F)}o+=D.length}return i}}),new function(){function t(o,h,d,v){if(v<=0)return;var D=v/2,A=v-2,T=D-1,P=new Array(6),F,V;function z(X){var I=P[X],G=P[X+1];(F!=I||V!=G)&&(o.beginPath(),o.moveTo(F,V),o.lineTo(I,G),o.stroke(),o.beginPath(),o.arc(I,G,D,0,Math.PI*2,!0),o.fill())}for(var R=0,J=h.length;R<J;R++){var Y=h[R],ie=Y._selection;if(Y._transformCoordinates(d,P),F=P[0],V=P[1],ie&2&&z(2),ie&4&&z(4),o.fillRect(F-D,V-D,v,v),A>0&&!(ie&1)){var j=o.fillStyle;o.fillStyle="#ffffff",o.fillRect(F-T,V-T,A,A),o.fillStyle=j}}}function i(o,h,d){var v=h._segments,D=v.length,A=new Array(6),T=!0,P,F,V,z,R,J,Y,ie;function j(I){if(d)I._transformCoordinates(d,A),P=A[0],F=A[1];else{var G=I._point;P=G._x,F=G._y}if(T)o.moveTo(P,F),T=!1;else{if(d)R=A[2],J=A[3];else{var te=I._handleIn;R=P+te._x,J=F+te._y}R===P&&J===F&&Y===V&&ie===z?o.lineTo(P,F):o.bezierCurveTo(Y,ie,R,J,P,F)}if(V=P,z=F,d)Y=A[4],ie=A[5];else{var te=I._handleOut;Y=V+te._x,ie=z+te._y}}for(var X=0;X<D;X++)j(v[X]);h._closed&&D>0&&j(v[0])}return{_draw:function(o,h,d,v){var D=h.dontStart,A=h.dontFinish||h.clip,T=this.getStyle(),P=T.hasFill(),F=T.hasStroke(),V=T.getDashArray(),z=!ar.support.nativeDash&&F&&V&&V.length;D||o.beginPath(),(P||F&&!z||A)&&(i(o,this,v),this._closed&&o.closePath());function R(I){return V[(I%z+z)%z]}if(!A&&(P||F)&&(this._setStyles(o,h,d),P&&(o.fill(T.getFillRule()),o.shadowColor="rgba(0,0,0,0)"),F)){if(z){D||o.beginPath();for(var J=new fa(this,.25,32,!1,v),Y=J.length,ie=-T.getDashOffset(),j,X=0;ie>0;)ie-=R(X--)+R(X--);for(;ie<Y;)j=ie+R(X++),(ie>0||j>0)&&J.drawPart(o,Math.max(ie,0),Math.max(j,0)),ie=j+R(X++)}o.stroke()}},_drawSelected:function(o,h){o.beginPath(),i(o,this,h),o.stroke(),t(o,this._segments,h,ar.settings.handleSize)}}},new function(){function t(i){var o=i._segments;if(!o.length)throw new Error("Use a moveTo() command first");return o[o.length-1]}return{moveTo:function(){var i=this._segments;i.length===1&&this.removeSegment(0),i.length||this._add([new xr(re.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new xr(re.read(arguments))])},cubicCurveTo:function(){var i=arguments,o=re.read(i),h=re.read(i),d=re.read(i),v=t(this);v.setHandleOut(o.subtract(v._point)),this._add([new xr(d,h.subtract(d))])},quadraticCurveTo:function(){var i=arguments,o=re.read(i),h=re.read(i),d=t(this)._point;this.cubicCurveTo(o.add(d.subtract(o).multiply(1/3)),o.add(h.subtract(o).multiply(1/3)),h)},curveTo:function(){var i=arguments,o=re.read(i),h=re.read(i),d=u.pick(u.read(i),.5),v=1-d,D=t(this)._point,A=o.subtract(D.multiply(v*v)).subtract(h.multiply(d*d)).divide(2*d*v);if(A.isNaN())throw new Error("Cannot put a curve through points with parameter = "+d);this.quadraticCurveTo(A,h)},arcTo:function(){var i=arguments,o=Math.abs,h=Math.sqrt,d=t(this),v=d._point,D=re.read(i),J,A=u.peek(i),T=u.pick(A,!0),P,F,V,z;if(typeof T=="boolean")var R=v.add(D).divide(2),J=R.add(R.subtract(v).rotate(T?-90:90));else if(u.remain(i)<=2)J=D,D=re.read(i);else if(!v.equals(D)){var Y=nt.read(i),ie=Ae.isZero;if(ie(Y.width)||ie(Y.height))return this.lineTo(D);var j=u.read(i),T=!!u.read(i),X=!!u.read(i),R=v.add(D).divide(2),I=v.subtract(R).rotate(-j),G=I.x,te=I.y,pe=o(Y.width),oe=o(Y.height),Ee=pe*pe,$e=oe*oe,Xe=G*G,ft=te*te,Ze=h(Xe/Ee+ft/$e);if(Ze>1&&(pe*=Ze,oe*=Ze,Ee=pe*pe,$e=oe*oe),Ze=(Ee*$e-Ee*ft-$e*Xe)/(Ee*ft+$e*Xe),o(Ze)<1e-12&&(Ze=0),Ze<0)throw new Error("Cannot create an arc with the given arguments");P=new re(pe*te/oe,-oe*G/pe).multiply((X===T?-1:1)*h(Ze)).rotate(j).add(R),z=new At().translate(P).rotate(j).scale(pe,oe),V=z._inverseTransform(v),F=V.getDirectedAngle(z._inverseTransform(D)),!T&&F>0?F-=360:T&&F<0&&(F+=360)}if(J){var yt=new an(v.add(J).divide(2),J.subtract(v).rotate(90),!0),Et=new an(J.add(D).divide(2),D.subtract(J).rotate(90),!0),Yt=new an(v,D),qt=Yt.getSide(J);if(P=yt.intersect(Et,!0),!P){if(!qt)return this.lineTo(D);throw new Error("Cannot create an arc with the given arguments")}V=v.subtract(P),F=V.getDirectedAngle(D.subtract(P));var ln=Yt.getSide(P,!0);ln===0?F=qt*o(F):qt===ln&&(F+=F<0?360:-360)}if(F){for(var In=1e-5,Zn=o(F),Kn=Zn>=360?4:Math.ceil((Zn-In)/90),ur=F/Kn,yn=ur*Math.PI/360,An=4/3*Math.sin(yn)/(1+Math.cos(yn)),qn=[],cr=0;cr<=Kn;cr++){var I=D,mr=null;if(cr<Kn&&(mr=V.rotate(90).multiply(An),z?(I=z._transformPoint(V),mr=z._transformPoint(V.add(mr)).subtract(I)):I=P.add(V)),!cr)d.setHandleOut(mr);else{var Rr=V.rotate(-90).multiply(An);z&&(Rr=z._transformPoint(V.add(Rr)).subtract(I)),qn.push(new xr(I,Rr,mr))}V=V.rotate(ur)}this._add(qn)}},lineBy:function(){var i=re.read(arguments),o=t(this)._point;this.lineTo(o.add(i))},curveBy:function(){var i=arguments,o=re.read(i),h=re.read(i),d=u.read(i),v=t(this)._point;this.curveTo(v.add(o),v.add(h),d)},cubicCurveBy:function(){var i=arguments,o=re.read(i),h=re.read(i),d=re.read(i),v=t(this)._point;this.cubicCurveTo(v.add(o),v.add(h),v.add(d))},quadraticCurveBy:function(){var i=arguments,o=re.read(i),h=re.read(i),d=t(this)._point;this.quadraticCurveTo(d.add(o),d.add(h))},arcBy:function(){var i=arguments,o=t(this)._point,h=o.add(re.read(i)),d=u.pick(u.peek(i),!0);typeof d=="boolean"?this.arcTo(h,d):this.arcTo(h,o.add(re.read(i)))},closePath:function(i){this.setClosed(!0),this.join(this,i)}}},{_getBounds:function(t,i){var o=i.handle?"getHandleBounds":i.stroke?"getStrokeBounds":"getBounds";return ai[o](this._segments,this._closed,this,t,i)},statics:{getBounds:function(t,i,o,h,d,v){var D=t[0];if(!D)return new Ie;var A=new Array(6),T=D._transformCoordinates(h,new Array(6)),P=T.slice(0,2),F=P.slice(),V=new Array(2);function z(Y){Y._transformCoordinates(h,A);for(var ie=0;ie<2;ie++)Fn._addBounds(T[ie],T[ie+4],A[ie+2],A[ie],ie,v?v[ie]:0,P,F,V);var j=T;T=A,A=j}for(var R=1,J=t.length;R<J;R++)z(t[R]);return i&&z(D),new Ie(P[0],P[1],F[0]-P[0],F[1]-P[1])},getStrokeBounds:function(t,i,o,h,d){var v=o.getStyle(),D=v.hasStroke(),A=v.getStrokeWidth(),T=D&&o._getStrokeMatrix(h,d),P=D&&ai._getStrokePadding(A,T),F=ai.getBounds(t,i,o,h,d,P);if(!D)return F;var V=A/2,z=v.getStrokeJoin(),R=v.getStrokeCap(),J=v.getMiterLimit(),Y=new Ie(new nt(P));function ie(pe){F=F.include(pe)}function j(pe){F=F.unite(Y.setCenter(pe._point.transform(h)))}function X(pe,oe){oe==="round"||pe.isSmooth()?j(pe):ai._addBevelJoin(pe,oe,V,J,h,T,ie)}function I(pe,oe){oe==="round"?j(pe):ai._addSquareCap(pe,oe,V,h,T,ie)}var G=t.length-(i?0:1);if(G>0){for(var te=1;te<G;te++)X(t[te],z);i?X(t[0],z):(I(t[0],R),I(t[t.length-1],R))}return F},_getStrokePadding:function(t,i){if(!i)return[t,t];var o=new re(t,0).transform(i),h=new re(0,t).transform(i),d=o.getAngleInRadians(),v=o.getLength(),D=h.getLength(),A=Math.sin(d),T=Math.cos(d),P=Math.tan(d),F=Math.atan2(D*P,v),V=Math.atan2(D,P*v);return[Math.abs(v*Math.cos(F)*T+D*Math.sin(F)*A),Math.abs(D*Math.sin(V)*T+v*Math.cos(V)*A)]},_addBevelJoin:function(t,i,o,h,d,v,D,A){var T=t.getCurve(),P=T.getPrevious(),F=T.getPoint1().transform(d),V=P.getNormalAtTime(1).multiply(o).transform(v),z=T.getNormalAtTime(0).multiply(o).transform(v),R=V.getDirectedAngle(z);if((R<0||R>=180)&&(V=V.negate(),z=z.negate()),A&&D(F),D(F.add(V)),i==="miter"){var J=new an(F.add(V),new re(-V.y,V.x),!0).intersect(new an(F.add(z),new re(-z.y,z.x),!0),!0);J&&F.getDistance(J)<=h*o&&D(J)}D(F.add(z))},_addSquareCap:function(t,i,o,h,d,v,D){var A=t._point.transform(h),T=t.getLocation(),P=T.getNormal().multiply(T.getTime()===0?o:-o).transform(d);i==="square"&&(D&&(v(A.subtract(P)),v(A.add(P))),A=A.add(P.rotate(-90))),v(A.add(P)),v(A.subtract(P))},getHandleBounds:function(t,i,o,h,d){var v=o.getStyle(),D=d.stroke&&v.hasStroke(),A,T;if(D){var P=o._getStrokeMatrix(h,d),F=v.getStrokeWidth()/2,V=F;v.getStrokeJoin()==="miter"&&(V=F*v.getMiterLimit()),v.getStrokeCap()==="square"&&(V=Math.max(V,F*Math.SQRT2)),A=ai._getStrokePadding(F,P),T=ai._getStrokePadding(V,P)}for(var z=new Array(6),R=1/0,J=-R,Y=R,ie=J,j=0,X=t.length;j<X;j++){var I=t[j];I._transformCoordinates(h,z);for(var G=0;G<6;G+=2){var te=G?A:T,pe=te?te[0]:0,oe=te?te[1]:0,Ee=z[G],$e=z[G+1],Xe=Ee-pe,ft=Ee+pe,Ze=$e-oe,yt=$e+oe;Xe<R&&(R=Xe),ft>J&&(J=ft),Ze<Y&&(Y=Ze),yt>ie&&(ie=yt)}}return new Ie(R,Y,J-R,ie-Y)}}});ai.inject({statics:new function(){var t=.5522847498307936,i=[new xr([-1,0],[0,t],[0,-.5522847498307936]),new xr([0,-1],[-.5522847498307936,0],[t,0]),new xr([1,0],[0,-.5522847498307936],[0,t]),new xr([0,1],[t,0],[-.5522847498307936,0])];function o(d,v,D){var A=u.getNamed(D),T=new ai(A&&(A.insert==!0?He.INSERT:A.insert==!1?He.NO_INSERT:null));return T._add(d),T._closed=v,T.set(A,He.INSERT)}function h(d,v,D){for(var A=new Array(4),T=0;T<4;T++){var P=i[T];A[T]=new xr(P._point.multiply(v).add(d),P._handleIn.multiply(v),P._handleOut.multiply(v))}return o(A,!0,D)}return{Line:function(){var d=arguments;return o([new xr(re.readNamed(d,"from")),new xr(re.readNamed(d,"to"))],!1,d)},Circle:function(){var d=arguments,v=re.readNamed(d,"center"),D=u.readNamed(d,"radius");return h(v,new nt(D),d)},Rectangle:function(){var d=arguments,v=Ie.readNamed(d,"rectangle"),D=nt.readNamed(d,"radius",0,{readNull:!0}),A=v.getBottomLeft(!0),T=v.getTopLeft(!0),P=v.getTopRight(!0),F=v.getBottomRight(!0),V;if(!D||D.isZero())V=[new xr(A),new xr(T),new xr(P),new xr(F)];else{D=nt.min(D,v.getSize(!0).divide(2));var z=D.width,R=D.height,J=z*t,Y=R*t;V=[new xr(A.add(z,0),null,[-J,0]),new xr(A.subtract(0,R),[0,Y]),new xr(T.add(0,R),null,[0,-Y]),new xr(T.add(z,0),[-J,0],null),new xr(P.subtract(z,0),null,[J,0]),new xr(P.add(0,R),[0,-Y],null),new xr(F.subtract(0,R),null,[0,Y]),new xr(F.subtract(z,0),[J,0])]}return o(V,!0,d)},RoundRectangle:"#Rectangle",Ellipse:function(){var d=arguments,v=On._readEllipse(d);return h(v.center,v.radius,d)},Oval:"#Ellipse",Arc:function(){var d=arguments,v=re.readNamed(d,"from"),D=re.readNamed(d,"through"),A=re.readNamed(d,"to"),T=u.getNamed(d),P=new ai(T&&T.insert==!1&&He.NO_INSERT);return P.moveTo(v),P.arcTo(D,A),P.set(T)},RegularPolygon:function(){for(var d=arguments,v=re.readNamed(d,"center"),D=u.readNamed(d,"sides"),A=u.readNamed(d,"radius"),T=360/D,P=D%3===0,F=new re(0,P?-A:A),V=P?-1:.5,z=new Array(D),R=0;R<D;R++)z[R]=new xr(v.add(F.rotate((R+V)*T)));return o(z,!0,d)},Star:function(){for(var d=arguments,v=re.readNamed(d,"center"),D=u.readNamed(d,"points")*2,A=u.readNamed(d,"radius1"),T=u.readNamed(d,"radius2"),P=360/D,F=new re(0,-1),V=new Array(D),z=0;z<D;z++)V[z]=new xr(v.add(F.rotate(P*z).multiply(z%2?T:A)));return o(V,!0,d)}}}});var hs=Pi.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(typeof t=="string"?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(i,o){var h=o,d=h[0];d&&typeof d[0]=="number"&&(h=[h]);for(var v=o.length-1;v>=0;v--){var D=h[v];h===o&&!(D instanceof ai)&&(h=u.slice(h)),Array.isArray(D)?h[v]=new ai({segments:D,insert:!1}):D instanceof hs&&(h.splice.apply(h,[v,1].concat(D.removeChildren())),D.remove())}return t.base.call(this,i,h)},reduce:function t(i){for(var o=this._children,h=o.length-1;h>=0;h--){var d=o[h].reduce(i);d.isEmpty()&&d.remove()}if(!o.length){var d=new ai(He.NO_INSERT);return d.copyAttributes(this),d.insertAbove(this),this.remove(),d}return t.base.call(this)},isClosed:function(){for(var t=this._children,i=0,o=t.length;i<o;i++)if(!t[i]._closed)return!1;return!0},setClosed:function(t){for(var i=this._children,o=0,h=i.length;o<h;o++)i[o].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,i=[],o=0,h=t.length;o<h;o++)u.push(i,t[o].getCurves());return i},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,i=0,o=0,h=t.length;o<h;o++)i+=t[o].getArea();return i},getLength:function(){for(var t=this._children,i=0,o=0,h=t.length;o<h;o++)i+=t[o].getLength();return i},getPathData:function(t,i){for(var o=this._children,h=[],d=0,v=o.length;d<v;d++){var D=o[d],A=D._matrix;h.push(D.getPathData(t&&!A.isIdentity()?t.appended(A):t,i))}return h.join("")},_hitTestChildren:function t(i,o,h){return t.base.call(this,i,o.class===ai||o.type==="path"?o:u.set({},o,{fill:!1}),h)},_draw:function(t,i,o,h){var d=this._children;if(d.length){i=i.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var v=0,D=d.length;v<D;v++)d[v].draw(t,i,h);if(!i.clip){this._setStyles(t,i,o);var A=this._style;A.hasFill()&&(t.fill(A.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),A.hasStroke()&&t.stroke()}}},_drawSelected:function(t,i,o){for(var h=this._children,d=0,v=h.length;d<v;d++){var D=h[d],A=D._matrix;o[D._id]||D._drawSelected(t,A.isIdentity()?i:i.appended(A))}}},new function(){function t(i,o){var h=i._children;if(o&&!h.length)throw new Error("Use a moveTo() command first");return h[h.length-1]}return u.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(i){this[i]=function(){var o=t(this,!0);o[i].apply(o,arguments)}},{moveTo:function(){var i=t(this),o=i&&i.isEmpty()?i:new ai(He.NO_INSERT);o!==i&&this.addChild(o),o.moveTo.apply(o,arguments)},moveBy:function(){var i=t(this,!0),o=i&&i.getLastSegment(),h=re.read(arguments);this.moveTo(o?h.add(o._point):h)},closePath:function(i){t(this,!0).closePath(i)}})},u.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(i){for(var o=this._children,h,d=0,v=o.length;d<v;d++)h=o[d][t](i)||h;return h}},{}));Pi.inject(new function(){var t=Math.min,i=Math.max,o=Math.abs,h={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function d(j){return j._children||[j]}function v(j,X){var I=j.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(X){for(var G=d(I),te=0,pe=G.length;te<pe;te++){var j=G[te];!j._closed&&!j.isEmpty()&&(j.closePath(1e-12),j.getFirstSegment().setHandleIn(0,0),j.getLastSegment().setHandleOut(0,0))}I=I.resolveCrossings().reorient(I.getFillRule()==="nonzero",!0)}return I}function D(j,X,I,G,te){var pe=new hs(He.NO_INSERT);return pe.addChildren(j,!0),pe=pe.reduce({simplify:X}),te&&te.insert==!1||pe.insertAbove(G&&I.isSibling(G)&&I.getIndex()<G.getIndex()?G:I),pe.copyAttributes(I,!0),pe}function A(j){return j.hasOverlap()||j.isCrossing()}function T(j,X,I,G){if(G&&(G.trace==!1||G.stroke)&&/^(subtract|intersect)$/.test(I))return P(j,X,I);var te=v(j,!0),pe=X&&j!==X&&v(X,!0),oe=h[I];oe[I]=!0,pe&&(oe.subtract||oe.exclude)^(pe.isClockwise()^te.isClockwise())&&pe.reverse();var Ee=R(si.expand(te.getIntersections(pe,A))),$e=d(te),Xe=pe&&d(pe),ft=[],Ze=[],yt;function Et(mr){for(var Rr=0,Lr=mr.length;Rr<Lr;Rr++){var Ir=mr[Rr];u.push(ft,Ir._segments),u.push(Ze,Ir.getCurves()),Ir._overlapsOnly=!0}}function Yt(mr){for(var Rr=[],Lr=0,Ir=mr&&mr.length;Lr<Ir;Lr++)Rr.push(Ze[mr[Lr]]);return Rr}if(Ee.length){Et($e),Xe&&Et(Xe);for(var qt=new Array(Ze.length),ln=0,In=Ze.length;ln<In;ln++)qt[ln]=Ze[ln].getValues();for(var Zn=W.findCurveBoundsCollisions(qt,qt,0,!0),Kn={},ln=0;ln<Ze.length;ln++){var ur=Ze[ln],yn=ur._path._id,An=Kn[yn]=Kn[yn]||{};An[ur.getIndex()]={hor:Yt(Zn[ln].hor),ver:Yt(Zn[ln].ver)}}for(var ln=0,In=Ee.length;ln<In;ln++)Y(Ee[ln]._segment,te,pe,Kn,oe);for(var ln=0,In=ft.length;ln<In;ln++){var qn=ft[ln],cr=qn._intersection;qn._winding||Y(qn,te,pe,Kn,oe),cr&&cr._overlap||(qn._path._overlapsOnly=!1)}yt=ie(ft,oe)}else yt=z(Xe?$e.concat(Xe):$e.slice(),function(mr){return!!oe[mr]});return D(yt,!0,j,X,G)}function P(j,X,I){var G=v(j),te=v(X),pe=G.getIntersections(te,A),oe=I==="subtract",Ee=I==="divide",$e={},Xe=[];function ft(Et){if(!$e[Et._id]&&(Ee||te.contains(Et.getPointAt(Et.getLength()/2))^oe))return Xe.unshift(Et),$e[Et._id]=!0}for(var Ze=pe.length-1;Ze>=0;Ze--){var yt=pe[Ze].split();yt&&(ft(yt)&&yt.getFirstSegment().setHandleIn(0,0),G.getLastSegment().setHandleOut(0,0))}return ft(G),D(Xe,!1,j,X)}function F(j,X){for(var I=j;I;){if(I===X)return;I=I._previous}for(;j._next&&j._next!==X;)j=j._next;if(!j._next){for(;X._previous;)X=X._previous;j._next=X,X._previous=j}}function V(j){for(var X=j.length-1;X>=0;X--)j[X].clearHandles()}function z(j,X,I){var G=j&&j.length;if(G){var te=u.each(j,function(Zn,Kn){this[Zn._id]={container:null,winding:Zn.isClockwise()?1:-1,index:Kn}},{}),pe=j.slice().sort(function(Zn,Kn){return o(Kn.getArea())-o(Zn.getArea())}),oe=pe[0],Ee=W.findItemBoundsCollisions(pe,null,Ae.GEOMETRIC_EPSILON);I==null&&(I=oe.isClockwise());for(var $e=0;$e<G;$e++){var Xe=pe[$e],ft=te[Xe._id],Ze=0,yt=Ee[$e];if(yt){for(var Et=null,Yt=yt.length-1;Yt>=0;Yt--)if(yt[Yt]<$e){Et=Et||Xe.getInteriorPoint();var qt=pe[yt[Yt]];if(qt.contains(Et)){var ln=te[qt._id];Ze=ln.winding,ft.winding+=Ze,ft.container=ln.exclude?ln.container:qt;break}}}if(X(ft.winding)===X(Ze))ft.exclude=!0,j[ft.index]=null;else{var In=ft.container;Xe.setClockwise(In?!In.isClockwise():I)}}}return j}function R(j,X,I){var G=X&&[],te=1e-8,pe=1-te,oe=!1,Ee=I||[],$e=I&&{},Xe,ft,Ze;function yt(Rr){return Rr._path._id+"."+Rr._segment1._index}for(var Et=(I&&I.length)-1;Et>=0;Et--){var Yt=I[Et];Yt._path&&($e[yt(Yt)]=!0)}for(var Et=j.length-1;Et>=0;Et--){var qt=j[Et],ln=qt._time,In=ln,Zn=X&&!X(qt),Yt=qt._curve,Kn;if(Yt&&(Yt!==ft?(oe=!Yt.hasHandles()||$e&&$e[yt(Yt)],Xe=[],Ze=null,ft=Yt):Ze>=te&&(ln/=Ze)),Zn){Xe&&Xe.push(qt);continue}else X&&G.unshift(qt);if(Ze=In,ln<te)Kn=Yt._segment1;else if(ln>pe)Kn=Yt._segment2;else{var ur=Yt.divideAtTime(ln,!0);oe&&Ee.push(Yt,ur),Kn=ur._segment1;for(var yn=Xe.length-1;yn>=0;yn--){var An=Xe[yn];An._time=(An._time-ln)/(1-ln)}}qt._setSegment(Kn);var qn=Kn._intersection,cr=qt._intersection;if(qn){F(qn,cr);for(var mr=qn;mr;)F(mr._intersection,qn),mr=mr._next}else Kn._intersection=cr}return I||V(Ee),G||j}function J(j,X,I,G,te){var pe=Array.isArray(X)?X:X[I?"hor":"ver"],oe=I?1:0,Ee=oe^1,$e=[j.x,j.y],Xe=$e[oe],ft=$e[Ee],Ze=1e-9,yt=1e-6,Et=Xe-Ze,Yt=Xe+Ze,qt=0,ln=0,In=0,Zn=0,Kn=!1,ur=!1,yn=1,An=[],qn,cr;function mr(Oi){var Bi=Oi[Ee+0],ys=Oi[Ee+6];if(!(ft<t(Bi,ys)||ft>i(Bi,ys))){var ns=Oi[oe+0],As=Oi[oe+2],rs=Oi[oe+4],Ji=Oi[oe+6];if(Bi===ys){(ns<Yt&&Ji>Et||Ji<Yt&&ns>Et)&&(Kn=!0);return}var Fs=ft===Bi?0:ft===ys||Et>i(ns,As,rs,Ji)||Yt<t(ns,As,rs,Ji)?1:Fn.solveCubic(Oi,Ee,ft,An,0,1)>0?An[0]:1,Is=Fs===0?ns:Fs===1?Ji:Fn.getPoint(Oi,Fs)[I?"y":"x"],Ws=Bi>ys?1:-1,Ca=qn[Ee]>qn[Ee+6]?1:-1,ta=qn[oe+6];return ft!==Bi?(Is<Et?In+=Ws:Is>Yt?Zn+=Ws:Kn=!0,Is>Xe-yt&&Is<Xe+yt&&(yn/=2)):(Ws!==Ca?ns<Et?In+=Ws:ns>Yt&&(Zn+=Ws):ns!=ta&&(ta<Yt&&Is>Yt?(Zn+=Ws,Kn=!0):ta>Et&&Is<Et&&(In+=Ws,Kn=!0)),yn/=4),qn=Oi,!te&&Is>Et&&Is<Yt&&Fn.getTangent(Oi,Fs)[I?"x":"y"]===0&&J(j,X,!I,G,!0)}}function Rr(Oi){var Bi=Oi[Ee+0],ys=Oi[Ee+2],ns=Oi[Ee+4],As=Oi[Ee+6];if(ft<=i(Bi,ys,ns,As)&&ft>=t(Bi,ys,ns,As)){for(var rs=Oi[oe+0],Ji=Oi[oe+2],Fs=Oi[oe+4],Is=Oi[oe+6],Ws=Et>i(rs,Ji,Fs,Is)||Yt<t(rs,Ji,Fs,Is)?[Oi]:Fn.getMonoCurves(Oi,I),Ca,ta=0,Po=Ws.length;ta<Po;ta++)if(Ca=mr(Ws[ta]))return Ca}}for(var Lr=0,Ir=pe.length;Lr<Ir;Lr++){var ti=pe[Lr],Wr=ti._path,ls=ti.getValues(),Vr;if((!Lr||pe[Lr-1]._path!==Wr)&&(qn=null,Wr._closed||(cr=Fn.getValues(Wr.getLastCurve().getSegment2(),ti.getSegment1(),null,!G),cr[Ee]!==cr[Ee+6]&&(qn=cr)),!qn)){qn=ls;for(var $i=Wr.getLastCurve();$i&&$i!==ti;){var Qi=$i.getValues();if(Qi[Ee]!==Qi[Ee+6]){qn=Qi;break}$i=$i.getPrevious()}}if(Vr=Rr(ls))return Vr;if(Lr+1===Ir||pe[Lr+1]._path!==Wr){if(cr&&(Vr=Rr(cr)))return Vr;Kn&&!In&&!Zn&&(In=Zn=Wr.isClockwise(G)^I?1:-1),qt+=In,ln+=Zn,In=Zn=0,Kn&&(ur=!0,Kn=!1),cr=null}}return qt=o(qt),ln=o(ln),{winding:i(qt,ln),windingL:qt,windingR:ln,quality:yn,onPath:ur}}function Y(j,X,I,G,te){var pe=[],oe=j,Ee=0,$e;do{var Xe=j.getCurve();if(Xe){var ft=Xe.getLength();pe.push({segment:j,curve:Xe,length:ft}),Ee+=ft}j=j.getNext()}while(j&&!j._intersection&&j!==oe);for(var Ze=[.5,.25,.75],$e={winding:0,quality:-1},yt=.001,Et=1-yt,Yt=0;Yt<Ze.length&&$e.quality<.5;Yt++)for(var ft=Ee*Ze[Yt],qt=0,ln=pe.length;qt<ln;qt++){var In=pe[qt],Zn=In.length;if(ft<=Zn){var Xe=In.curve,Kn=Xe._path,ur=Kn._parent,yn=ur instanceof hs?ur:Kn,An=Ae.clamp(Xe.getTimeAt(ft),yt,Et),qn=Xe.getPointAtTime(An),cr=o(Xe.getTangentAtTime(An).y)<Math.SQRT1_2,mr=null;if(te.subtract&&I){var Rr=yn===X?I:X,Lr=Rr._getWinding(qn,cr,!0);if(yn===X&&Lr.winding||yn===I&&!Lr.winding){if(Lr.quality<1)continue;mr={winding:0,quality:1}}}mr=mr||J(qn,G[Kn._id][Xe.getIndex()],cr,!0),mr.quality>$e.quality&&($e=mr);break}ft-=Zn}for(var qt=pe.length-1;qt>=0;qt--)pe[qt].segment._winding=$e}function ie(j,X){var I=[],G;function te(Ir){var ti;return!!(Ir&&!Ir._visited&&(!X||X[(ti=Ir._winding||{}).winding]&&!(X.unite&&ti.winding===2&&ti.windingL&&ti.windingR)))}function pe(Ir){if(Ir){for(var ti=0,Wr=G.length;ti<Wr;ti++)if(Ir===G[ti])return!0}return!1}function oe(Ir){for(var ti=Ir._segments,Wr=0,ls=ti.length;Wr<ls;Wr++)ti[Wr]._visited=!0}function Ee(Ir,ti){var Wr=Ir._intersection,ls=Wr,Vr=[];ti&&(G=[Ir]);function $i(Qi,Oi){for(;Qi&&Qi!==Oi;){var Bi=Qi._segment,ys=Bi&&Bi._path;if(ys){var ns=Bi.getNext()||ys.getFirstSegment(),As=ns._intersection;Bi!==Ir&&(pe(Bi)||pe(ns)||ns&&te(Bi)&&(te(ns)||As&&te(As._segment)))&&Vr.push(Bi),ti&&G.push(Bi)}Qi=Qi._next}}if(Wr){for($i(Wr);Wr&&Wr._previous;)Wr=Wr._previous;$i(Wr,ls)}return Vr}j.sort(function(Ir,ti){var Wr=Ir._intersection,ls=ti._intersection,Vr=!!(Wr&&Wr._overlap),$i=!!(ls&&ls._overlap),Qi=Ir._path,Oi=ti._path;return Vr^$i?Vr?1:-1:!Wr^!ls?Wr?1:-1:Qi!==Oi?Qi._id-Oi._id:Ir._index-ti._index});for(var $e=0,Xe=j.length;$e<Xe;$e++){var ft=j[$e],Ze=te(ft),yt=null,Et=!1,Yt=!0,qt=[],ln,In,Zn;if(Ze&&ft._path._overlapsOnly){var Kn=ft._path,ur=ft._intersection._segment._path;Kn.compare(ur)&&(Kn.getArea()&&I.push(Kn.clone(!1)),oe(Kn),oe(ur),Ze=!1)}for(;Ze;){var yn=!yt,An=Ee(ft,yn),qn=An.shift(),Et=!yn&&(pe(ft)||pe(qn)),cr=!Et&&qn;if(yn&&(yt=new ai(He.NO_INSERT),ln=null),Et){(ft.isFirst()||ft.isLast())&&(Yt=ft._path._closed),ft._visited=!0;break}if(cr&&ln&&(qt.push(ln),ln=null),ln||(cr&&An.push(ft),ln={start:yt._segments.length,crossings:An,visited:In=[],handleIn:Zn}),cr&&(ft=qn),!te(ft)){yt.removeSegments(ln.start);for(var mr=0,Rr=In.length;mr<Rr;mr++)In[mr]._visited=!1;In.length=0;do ft=ln&&ln.crossings.shift(),(!ft||!ft._path)&&(ft=null,ln=qt.pop(),ln&&(In=ln.visited,Zn=ln.handleIn));while(ln&&!te(ft));if(!ft)break}var Lr=ft.getNext();yt.add(new xr(ft._point,Zn,Lr&&ft._handleOut)),ft._visited=!0,In.push(ft),ft=Lr||ft._path.getFirstSegment(),Zn=Lr&&Lr._handleIn}Et&&(Yt&&(yt.getFirstSegment().setHandleIn(Zn),yt.setClosed(Yt)),yt.getArea()!==0&&I.push(yt))}return I}return{_getWinding:function(j,X,I){return J(j,this.getCurves(),X,I)},unite:function(j,X){return T(this,j,"unite",X)},intersect:function(j,X){return T(this,j,"intersect",X)},subtract:function(j,X){return T(this,j,"subtract",X)},exclude:function(j,X){return T(this,j,"exclude",X)},divide:function(j,X){return X&&(X.trace==!1||X.stroke)?P(this,j,"divide"):D([this.subtract(j,X),this.intersect(j,X)],!0,this,j,X)},resolveCrossings:function(){var j=this._children,X=j||[this];function I(ln,In){var Zn=ln&&ln._intersection;return Zn&&Zn._overlap&&Zn._path===In}var G=!1,te=!1,pe=this.getIntersections(null,function(ln){return ln.hasOverlap()&&(G=!0)||ln.isCrossing()&&(te=!0)}),oe=G&&te&&[];if(pe=si.expand(pe),G)for(var Ee=R(pe,function(ln){return ln.hasOverlap()},oe),$e=Ee.length-1;$e>=0;$e--){var Xe=Ee[$e],ft=Xe._path,Ze=Xe._segment,yt=Ze.getPrevious(),Et=Ze.getNext();I(yt,ft)&&I(Et,ft)&&(Ze.remove(),yt._handleOut._set(0,0),Et._handleIn._set(0,0),yt!==Ze&&!yt.getCurve().hasLength()&&(Et._handleIn.set(yt._handleIn),yt.remove()))}te&&(R(pe,G&&function(ln){var In=ln.getCurve(),Zn=ln.getSegment(),Kn=ln._intersection,ur=Kn._curve,yn=Kn._segment;if(In&&ur&&In._path&&ur._path)return!0;Zn&&(Zn._intersection=null),yn&&(yn._intersection=null)},oe),oe&&V(oe),X=ie(u.each(X,function(ln){u.push(this,ln._segments)},[])));var Yt=X.length,qt;return Yt>1&&j?(X!==j&&this.setChildren(X),qt=this):Yt===1&&!j&&(X[0]!==this&&this.setSegments(X[0].removeSegments()),qt=this),qt||(qt=new hs(He.NO_INSERT),qt.addChildren(X),qt=qt.reduce(),qt.copyAttributes(this),this.replaceWith(qt)),qt},reorient:function(j,X){var I=this._children;return I&&I.length?this.setChildren(z(this.removeChildren(),function(G){return!!(j?G:G&1)},X)):X!==n&&this.setClockwise(X),this},getInteriorPoint:function(){var j=this.getBounds(),X=j.getCenter(!0);if(!this.contains(X)){for(var I=this.getCurves(),G=X.y,te=[],pe=[],oe=0,Ee=I.length;oe<Ee;oe++){var $e=I[oe].getValues(),Xe=$e[1],ft=$e[3],Ze=$e[5],yt=$e[7];if(G>=t(Xe,ft,Ze,yt)&&G<=i(Xe,ft,Ze,yt))for(var Et=Fn.getMonoCurves($e),Yt=0,qt=Et.length;Yt<qt;Yt++){var ln=Et[Yt],In=ln[1],Zn=ln[7];if(In!==Zn&&(G>=In&&G<=Zn||G>=Zn&&G<=In)){var Kn=G===In?ln[0]:G===Zn?ln[6]:Fn.solveCubic(ln,1,G,pe,0,1)===1?Fn.getPoint(ln,pe[0]).x:(ln[0]+ln[6])/2;te.push(Kn)}}}te.length>1&&(te.sort(function(ur,yn){return ur-yn}),X.x=(te[0]+te[1])/2)}return X}}});var fa=u.extend({_class:"PathFlattener",initialize:function(t,i,o,h,d){var v=[],D=[],A=0,T=1/(o||32),P=t._segments,F=P[0],V;function z(ie,j){var X=Fn.getValues(ie,j,d);v.push(X),R(X,ie._index,0,1)}function R(ie,j,X,I){if(I-X>T&&!(h&&Fn.isStraight(ie))&&!Fn.isFlatEnough(ie,i||.25)){var G=Fn.subdivide(ie,.5),te=(X+I)/2;R(G[0],j,X,te),R(G[1],j,te,I)}else{var pe=ie[6]-ie[0],oe=ie[7]-ie[1],Ee=Math.sqrt(pe*pe+oe*oe);Ee>0&&(A+=Ee,D.push({offset:A,curve:ie,index:j,time:I}))}}for(var J=1,Y=P.length;J<Y;J++)V=P[J],z(F,V),F=V;t._closed&&z(V||F,P[0]),this.curves=v,this.parts=D,this.length=A,this.index=0},_get:function(t){for(var i=this.parts,o=i.length,h,d=this.index;h=d,!(!d||i[--d].offset<t););for(;h<o;h++){var v=i[h];if(v.offset>=t){this.index=h;var D=i[h-1],A=D&&D.index===v.index?D.time:0,T=D?D.offset:0;return{index:v.index,time:A+(v.time-A)*(t-T)/(v.offset-T)}}}return{index:i[o-1].index,time:1}},drawPart:function(t,i,o){for(var h=this._get(i),d=this._get(o),v=h.index,D=d.index;v<=D;v++){var A=Fn.getPart(this.curves[v],v===h.index?h.time:0,v===d.index?d.time:1);v===h.index&&t.moveTo(A[0],A[1]),t.bezierCurveTo.apply(t,A.slice(2))}}},u.each(Fn._evaluateMethods,function(t){this[t+"At"]=function(i){var o=this._get(i);return Fn[t](this.curves[o.index],o.time)}},{})),Hs=u.extend({initialize:function(t){for(var i=this.points=[],o=t._segments,h=t._closed,d=0,v,D=o.length;d<D;d++){var A=o[d].point;(!v||!v.equals(A))&&i.push(v=A.clone())}h&&(i.unshift(i[i.length-1]),i.push(i[1])),this.closed=h},fit:function(t){var i=this.points,o=i.length,h=null;return o>0&&(h=[new xr(i[0])],o>1&&(this.fitCubic(h,t,0,o-1,i[1].subtract(i[0]),i[o-2].subtract(i[o-1])),this.closed&&(h.shift(),h.pop()))),h},fitCubic:function(t,i,o,h,d,v){var D=this.points;if(h-o===1){var A=D[o],T=D[h],P=A.getDistance(T)/3;this.addCurve(t,[A,A.add(d.normalize(P)),T.add(v.normalize(P)),T]);return}for(var F=this.chordLengthParameterize(o,h),V=Math.max(i,i*i),z,R=!0,J=0;J<=4;J++){var Y=this.generateBezier(o,h,F,d,v),ie=this.findMaxError(o,h,Y,F);if(ie.error<i&&R){this.addCurve(t,Y);return}if(z=ie.index,ie.error>=V)break;R=this.reparameterize(o,h,F,Y),V=ie.error}var j=D[z-1].subtract(D[z+1]);this.fitCubic(t,i,o,z,d,j),this.fitCubic(t,i,z,h,j.negate(),v)},addCurve:function(t,i){var o=t[t.length-1];o.setHandleOut(i[1].subtract(i[0])),t.push(new xr(i[3],i[2].subtract(i[3])))},generateBezier:function(t,i,o,h,d){for(var v=1e-12,D=Math.abs,A=this.points,T=A[t],P=A[i],F=[[0,0],[0,0]],V=[0,0],z=0,R=i-t+1;z<R;z++){var J=o[z],Y=1-J,ie=3*J*Y,j=Y*Y*Y,X=ie*Y,I=ie*J,G=J*J*J,te=h.normalize(X),pe=d.normalize(I),oe=A[t+z].subtract(T.multiply(j+X)).subtract(P.multiply(I+G));F[0][0]+=te.dot(te),F[0][1]+=te.dot(pe),F[1][0]=F[0][1],F[1][1]+=pe.dot(pe),V[0]+=te.dot(oe),V[1]+=pe.dot(oe)}var Ee=F[0][0]*F[1][1]-F[1][0]*F[0][1],$e,Xe;if(D(Ee)>v){var ft=F[0][0]*V[1]-F[1][0]*V[0],Ze=V[0]*F[1][1]-V[1]*F[0][1];$e=Ze/Ee,Xe=ft/Ee}else{var yt=F[0][0]+F[0][1],Et=F[1][0]+F[1][1];$e=Xe=D(yt)>v?V[0]/yt:D(Et)>v?V[1]/Et:0}var Yt=P.getDistance(T),qt=v*Yt,ln,In;if($e<qt||Xe<qt)$e=Xe=Yt/3;else{var Zn=P.subtract(T);ln=h.normalize($e),In=d.normalize(Xe),ln.dot(Zn)-In.dot(Zn)>Yt*Yt&&($e=Xe=Yt/3,ln=In=null)}return[T,T.add(ln||h.normalize($e)),P.add(In||d.normalize(Xe)),P]},reparameterize:function(t,i,o,h){for(var d=t;d<=i;d++)o[d-t]=this.findRoot(h,this.points[d],o[d-t]);for(var d=1,v=o.length;d<v;d++)if(o[d]<=o[d-1])return!1;return!0},findRoot:function(t,i,o){for(var h=[],d=[],v=0;v<=2;v++)h[v]=t[v+1].subtract(t[v]).multiply(3);for(var v=0;v<=1;v++)d[v]=h[v+1].subtract(h[v]).multiply(2);var D=this.evaluate(3,t,o),A=this.evaluate(2,h,o),T=this.evaluate(1,d,o),P=D.subtract(i),F=A.dot(A)+P.dot(T);return Ae.isMachineZero(F)?o:o-P.dot(A)/F},evaluate:function(t,i,o){for(var h=i.slice(),d=1;d<=t;d++)for(var v=0;v<=t-d;v++)h[v]=h[v].multiply(1-o).add(h[v+1].multiply(o));return h[0]},chordLengthParameterize:function(t,i){for(var o=[0],h=t+1;h<=i;h++)o[h-t]=o[h-t-1]+this.points[h].getDistance(this.points[h-1]);for(var h=1,d=i-t;h<=d;h++)o[h]/=o[d];return o},findMaxError:function(t,i,o,h){for(var d=Math.floor((i-t+1)/2),v=0,D=t+1;D<i;D++){var A=this.evaluate(3,o,h[D-t]),T=A.subtract(this.points[D]),P=T.x*T.x+T.y*T.y;P>=v&&(v=P,d=D)}return{error:v,index:d}}}),Ns=He.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var i=t&&u.isPlainObject(t)&&t.x===n&&t.y===n;this._initialize(i&&t,!i&&re.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),da=Ns.extend({_class:"PointText",initialize:function(){Ns.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new mt(t.x,t.y,this,"setPoint")},setPoint:function(){var t=re.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,i,o){if(this._content){this._setStyles(t,i,o);var h=this._lines,d=this._style,v=d.hasFill(),D=d.hasStroke(),A=d.getLeading(),T=t.shadowColor;t.font=d.getFontStyle(),t.textAlign=d.getJustification();for(var P=0,F=h.length;P<F;P++){t.shadowColor=T;var V=h[P];v&&(t.fillText(V,0,0),t.shadowColor="rgba(0,0,0,0)"),D&&t.strokeText(V,0,0),t.translate(0,A)}}},_getBounds:function(t,i){var o=this._style,h=this._lines,d=h.length,v=o.getJustification(),D=o.getLeading(),A=this.getView().getTextWidth(o.getFontStyle(),h),T=0;v!=="left"&&(T-=A/(v==="center"?2:1));var P=new Ie(T,d?-.75*D:0,A,d*D);return t?t._transformBounds(P,P):P}}),Zi=u.extend(new function(){var t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},i={},o={transparent:[0,0,0,0]},h;function d(A){var T=A.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||A.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),P="rgb",F;if(T){var V=T[4]?4:3;F=new Array(V);for(var z=0;z<V;z++){var R=T[z+1];F[z]=parseInt(R.length==1?R+R:R,16)/255}}else if(T=A.match(/^(rgb|hsl)a?\((.*)\)$/)){P=T[1],F=T[2].trim().split(/[,\s]+/g);for(var J=P==="hsl",z=0,Y=Math.min(F.length,4);z<Y;z++){var ie=F[z],R=parseFloat(ie);if(J)if(z===0){var j=ie.match(/([a-z]*)$/)[1];R*={turn:360,rad:180/Math.PI,grad:.9}[j]||1}else z<3&&(R/=100);else z<3&&(R/=/%$/.test(ie)?100:255);F[z]=R}}else{var X=o[A];if(!X)if(s){h||(h=di.getContext(1,1,{willReadFrequently:!0}),h.globalCompositeOperation="copy"),h.fillStyle="rgba(0,0,0,0)",h.fillStyle=A,h.fillRect(0,0,1,1);var I=h.getImageData(0,0,1,1).data;X=o[A]=[I[0]/255,I[1]/255,I[2]/255]}else X=[0,0,0];F=X.slice()}return[P,F]}var v=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],D={"rgb-hsb":function(A,T,P){var F=Math.max(A,T,P),V=Math.min(A,T,P),z=F-V,R=z===0?0:(F==A?(T-P)/z+(T<P?6:0):F==T?(P-A)/z+2:(A-T)/z+4)*60;return[R,F===0?0:z/F,F]},"hsb-rgb":function(A,T,P){A=(A/60%6+6)%6;var V=Math.floor(A),F=A-V,V=v[V],z=[P,P*(1-T),P*(1-T*F),P*(1-T*(1-F))];return[z[V[0]],z[V[1]],z[V[2]]]},"rgb-hsl":function(A,T,P){var F=Math.max(A,T,P),V=Math.min(A,T,P),z=F-V,R=z===0,J=R?0:(F==A?(T-P)/z+(T<P?6:0):F==T?(P-A)/z+2:(A-T)/z+4)*60,Y=(F+V)/2,ie=R?0:Y<.5?z/(F+V):z/(2-F-V);return[J,ie,Y]},"hsl-rgb":function(A,T,P){if(A=(A/360%1+1)%1,T===0)return[P,P,P];for(var F=[A+1/3,A,A-1/3],V=P<.5?P*(1+T):P+T-P*T,z=2*P-V,R=[],J=0;J<3;J++){var Y=F[J];Y<0&&(Y+=1),Y>1&&(Y-=1),R[J]=6*Y<1?z+(V-z)*6*Y:2*Y<1?V:3*Y<2?z+(V-z)*(2/3-Y)*6:z}return R},"rgb-gray":function(A,T,P){return[A*.2989+T*.587+P*.114]},"gray-rgb":function(A){return[A,A,A]},"gray-hsb":function(A){return[0,0,A]},"gray-hsl":function(A){return[0,0,A]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return u.each(t,function(A,T){i[T]=[],u.each(A,function(P,F){var V=u.capitalize(P),z=/^(hue|saturation)$/.test(P),R=i[T][F]=T==="gradient"?P==="gradient"?function(J){var Y=this._components[0];return J=fo.read(Array.isArray(J)?J:arguments,0,{readNull:!0}),Y!==J&&(Y&&Y._removeOwner(this),J&&J._addOwner(this)),J}:function(){return re.read(arguments,0,{readNull:P==="highlight",clone:!0})}:function(J){return J==null||isNaN(J)?0:+J};this["get"+V]=function(){return this._type===T||z&&/^hs[bl]$/.test(this._type)?this._components[F]:this._convert(T)[F]},this["set"+V]=function(J){this._type!==T&&!(z&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(T),this._properties=t[T],this._type=T),this._components[F]=R.call(this,J),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function A(T){var P=arguments,F=this.__read,V=0,z,R,J,Y;Array.isArray(T)&&(P=T,T=P[0]);var ie=T!=null&&typeof T;if(ie==="string"&&T in t&&(z=T,T=P[1],Array.isArray(T)?(R=T,J=P[2]):(F&&(V=1),P=u.slice(P,1),ie=typeof T)),!R){if(Y=ie==="number"?P:ie==="object"&&T.length!=null?T:null,Y){z||(z=Y.length>=3?"rgb":"gray");var j=t[z].length;J=Y[j],F&&(V+=Y===arguments?j+(J!=null?1:0):1),Y.length>j&&(Y=u.slice(Y,0,j))}else if(ie==="string"){var X=d(T);z=X[0],R=X[1],R.length===4&&(J=R[3],R.length--)}else if(ie==="object")if(T.constructor===A){if(z=T._type,R=T._components.slice(),J=T._alpha,z==="gradient")for(var I=1,G=R.length;I<G;I++){var te=R[I];te&&(R[I]=te.clone())}}else if(T.constructor===fo)z="gradient",Y=P;else{z="hue"in T?"lightness"in T?"hsl":"hsb":"gradient"in T||"stops"in T||"radial"in T?"gradient":"gray"in T?"gray":"rgb";var pe=t[z],oe=i[z];this._components=R=[];for(var I=0,G=pe.length;I<G;I++){var Ee=T[pe[I]];Ee==null&&!I&&z==="gradient"&&"stops"in T&&(Ee={stops:T.stops,radial:T.radial}),Ee=oe[I].call(this,Ee),Ee!=null&&(R[I]=Ee)}J=T.alpha}F&&z&&(V=1)}if(this._type=z||"rgb",!R){this._components=R=[];for(var oe=i[this._type],I=0,G=oe.length;I<G;I++){var Ee=oe[I].call(this,Y&&Y[I]);Ee!=null&&(R[I]=Ee)}}return this._components=R,this._properties=t[this._type],this._alpha=J,F&&(this.__read=V),this},set:"#initialize",_serialize:function(A,T){var P=this.getComponents();return u.serialize(/^(gray|rgb)$/.test(this._type)?P:[this._type].concat(P),A,!0,T)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(A){var T;return this._type===A?this._components.slice():(T=D[this._type+"-"+A])?T.apply(this,this._components):D["rgb-"+A].apply(this,D[this._type+"-rgb"].apply(this,this._components))},convert:function(A){return new Zi(A,this._convert(A),this._alpha)},getType:function(){return this._type},setType:function(A){this._components=this._convert(A),this._properties=t[A],this._type=A},getComponents:function(){var A=this._components.slice();return this._alpha!=null&&A.push(this._alpha),A},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(A){this._alpha=A==null?null:Math.min(Math.max(A,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(A){var T=u.isPlainValue(A,!0)?Zi.read(arguments):A;return T===this||T&&this._class===T._class&&this._type===T._type&&this.getAlpha()===T.getAlpha()&&u.equals(this._components,T._components)||!1},toString:function(){for(var A=this._properties,T=[],P=this._type==="gradient",F=ve.instance,V=0,z=A.length;V<z;V++){var R=this._components[V];R!=null&&T.push(A[V]+": "+(P?R:F.number(R)))}return this._alpha!=null&&T.push("alpha: "+F.number(this._alpha)),"{ "+T.join(", ")+" }"},toCSS:function(A){var T=this._convert("rgb"),P=A||this._alpha==null?1:this._alpha;function F(V){return Math.round((V<0?0:V>1?1:V)*255)}return T=[F(T[0]),F(T[1]),F(T[2])],P<1&&T.push(P<0?0:P),A?"#"+((1<<24)+(T[0]<<16)+(T[1]<<8)+T[2]).toString(16).slice(1):(T.length==4?"rgba(":"rgb(")+T.join(",")+")"},toCanvasStyle:function(A,T){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var P=this._components,F=P[0],V=F._stops,z=P[1],R=P[2],J=P[3],Y=T&&T.inverted(),ie;if(Y&&(z=Y._transformPoint(z),R=Y._transformPoint(R),J&&(J=Y._transformPoint(J))),F._radial){var j=R.getDistance(z);if(J){var X=J.subtract(z);X.getLength()>j&&(J=z.add(X.normalize(j-.1)))}var I=J||z;ie=A.createRadialGradient(I.x,I.y,0,z.x,z.y,j)}else ie=A.createLinearGradient(z.x,z.y,R.x,R.y);for(var G=0,te=V.length;G<te;G++){var pe=V[G],oe=pe._offset;ie.addColorStop(oe??G/(te-1),pe._color.toCanvasStyle())}return this._canvasStyle=ie},transform:function(A){if(this._type==="gradient"){for(var T=this._components,P=1,F=T.length;P<F;P++){var V=T[P];A._transformPoint(V,V,!0)}this._changed()}},statics:{_types:t,random:function(){var A=Math.random;return new Zi(A(),A(),A())},_setOwner:function(A,T,P){return A&&(A._owner&&T&&A._owner!==T&&(A=A.clone()),!A._owner^!T&&(A._owner=T||null,A._setter=P||null)),A}}})},new function(){var t={add:function(i,o){return i+o},subtract:function(i,o){return i-o},multiply:function(i,o){return i*o},divide:function(i,o){return i/o}};return u.each(t,function(i,o){this[o]=function(h){h=Zi.read(arguments);for(var d=this._type,v=this._components,D=h._convert(d),A=0,T=v.length;A<T;A++)D[A]=i(v[A],D[A]);return new Zi(d,D,this._alpha!=null?i(this._alpha,h.getAlpha()):null)}},{})}),fo=u.extend({_class:"Gradient",initialize:function(t,i){this._id=rt.get(),t&&u.isPlainObject(t)&&(this.set(t),t=i=null),this._stops==null&&this.setStops(t||["white","black"]),this._radial==null&&this.setRadial(typeof i=="string"&&i==="radial"||i||!1)},_serialize:function(t,i){return i.add(this,function(){return u.serialize([this._stops,this._radial],t,!0,i)})},_changed:function(){for(var t=0,i=this._owners&&this._owners.length;t<i;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var i=this._owners?this._owners.indexOf(t):-1;i!=-1&&(this._owners.splice(i,1),this._owners.length||(this._owners=n))},clone:function(){for(var t=[],i=0,o=this._stops.length;i<o;i++)t[i]=this._stops[i].clone();return new fo(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var i=this._stops;if(i)for(var o=0,h=i.length;o<h;o++)i[o]._owner=n;i=this._stops=io.readList(t,0,{clone:!0});for(var o=0,h=i.length;o<h;o++)i[o]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var i=this._stops,o=t._stops,h=i.length;if(h===o.length){for(var d=0;d<h;d++)if(!i[d].equals(o[d]))return!1;return!0}}return!1}}),io=u.extend({_class:"GradientStop",initialize:function(t,i){var o=t,h=i;typeof t=="object"&&i===n&&(Array.isArray(t)&&typeof t[0]!="number"?(o=t[0],h=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(o=t.color,h=t.offset||t.rampPoint||0)),this.setColor(o),this.setOffset(h)},clone:function(){return new io(this._color.clone(),this._offset)},_serialize:function(t,i){var o=this._color,h=this._offset;return u.serialize(h==null?[o]:[o,h],t,!0,i)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Zi._setOwner(this._color,null),this._color=Zi._setOwner(Zi.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),qo=u.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new re,selectedColor:null},i=u.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),o=u.set({},i,{fillColor:new Zi}),h={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},d={beans:!0},v={_class:"Style",beans:!0,initialize:function(D,A,T){this._values={},this._owner=A,this._project=A&&A._project||T||ar.project,this._defaults=!A||A instanceof _e?i:A instanceof Ns?o:t,D&&this.set(D)}};return u.each(i,function(D,A){var T=/Color$/.test(A),P=A==="shadowOffset",F=u.capitalize(A),V=h[A],z="set"+F,R="get"+F;v[z]=function(J){var Y=this._owner,ie=Y&&Y._children,j=ie&&ie.length>0&&!(Y instanceof hs);if(j)for(var X=0,I=ie.length;X<I;X++)ie[X]._style[z](J);if((A==="selectedColor"||!j)&&A in this._defaults){var G=this._values[A];G!==J&&(T&&(G&&(Zi._setOwner(G,null),G._canvasStyle=null),J&&J.constructor===Zi&&(J=Zi._setOwner(J,Y,j&&z))),this._values[A]=J,Y&&Y._changed(V||129))}},v[R]=function(J){var Y=this._owner,ie=Y&&Y._children,j=ie&&ie.length>0&&!(Y instanceof hs),X;if(j&&!J)for(var I=0,G=ie.length;I<G;I++){var te=ie[I]._style[R]();if(!I)X=te;else if(!u.equals(X,te))return n}else if(A in this._defaults){var X=this._values[A];if(X===n)X=this._defaults[A],X&&X.clone&&(X=X.clone());else{var pe=T?Zi:P?re:null;pe&&!(X&&X.constructor===pe)&&(this._values[A]=X=pe.read([X],0,{readNull:!0,clone:!0}))}}return X&&T&&(X=Zi._setOwner(X,Y,j&&z)),X},d[R]=function(J){return this._style[R](J)},d[z]=function(J){this._style[z](J)}}),u.each({Font:"FontFamily",WindingRule:"FillRule"},function(D,A){var T="get"+A,P="set"+A;v[T]=d[T]="#get"+D,v[P]=d[P]="#set"+D}),He.inject(d),v},{set:function(t){var i=t instanceof qo,o=i?t._values:t;if(o){for(var h in o)if(h in this._defaults){var d=o[h];this[h]=d&&i&&d.clone?d.clone():d}}},equals:function(t){function i(o,h,d){var v=o._values,D=h._values,A=h._defaults;for(var T in v){var P=v[T],F=D[T];if(!(d&&T in D)&&!u.equals(P,F===n?A[T]:F))return!1}return!0}return t===this||t&&this._class===t._class&&i(this,t)&&i(t,this,!0)||!1},_dispose:function(){var t;t=this.getFillColor(),t&&(t._canvasStyle=null),t=this.getStrokeColor(),t&&(t._canvasStyle=null),t=this.getShadowColor(),t&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var i=t.base.call(this),o=this.getFontSize();return/pt|em|%|px/.test(o)&&(o=this.getView().getPixelSize(o)),i??o*1.2}}),Ti=new function(){function t(i,o,h,d){for(var v=["","webkit","moz","Moz","ms","o"],D=o[0].toUpperCase()+o.substring(1),A=0;A<6;A++){var T=v[A],P=T?T+D:o;if(P in i){if(h)i[P]=d;else return i[P];break}}}return{getStyles:function(i){var o=i&&i.nodeType!==9?i.ownerDocument:i,h=o&&o.defaultView;return h&&h.getComputedStyle(i,"")},getBounds:function(i,o){var h=i.ownerDocument,d=h.body,v=h.documentElement,D;try{D=i.getBoundingClientRect()}catch{D={left:0,top:0,width:0,height:0}}var A=D.left-(v.clientLeft||d.clientLeft||0),T=D.top-(v.clientTop||d.clientTop||0);if(!o){var P=h.defaultView;A+=P.pageXOffset||v.scrollLeft||d.scrollLeft,T+=P.pageYOffset||v.scrollTop||d.scrollTop}return new Ie(A,T,D.width,D.height)},getViewportBounds:function(i){var o=i.ownerDocument,h=o.defaultView,d=o.documentElement;return new Ie(0,0,h.innerWidth||d.clientWidth,h.innerHeight||d.clientHeight)},getOffset:function(i,o){return Ti.getBounds(i,o).getPoint()},getSize:function(i){return Ti.getBounds(i,!0).getSize()},isInvisible:function(i){return Ti.getSize(i).equals(new nt(0,0))},isInView:function(i){return!Ti.isInvisible(i)&&Ti.getViewportBounds(i).intersects(Ti.getBounds(i,!0))},isInserted:function(i){return c.body.contains(i)},getPrefixed:function(i,o){return i&&t(i,o)},setPrefixed:function(i,o,h){if(typeof o=="object")for(var d in o)t(i,d,!0,o[d]);else t(i,o,!0,h)}}},Fi={add:function(t,i){if(t)for(var o in i)for(var h=i[o],d=o.split(/[\s,]+/g),v=0,D=d.length;v<D;v++){var A=d[v],T=t===c&&(A==="touchstart"||A==="touchmove")?{passive:!1}:!1;t.addEventListener(A,h,T)}},remove:function(t,i){if(t)for(var o in i)for(var h=i[o],d=o.split(/[\s,]+/g),v=0,D=d.length;v<D;v++)t.removeEventListener(d[v],h,!1)},getPoint:function(t){var i=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new re(i.pageX||i.clientX+c.documentElement.scrollLeft,i.pageY||i.clientY+c.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,i){return Fi.getPoint(t).subtract(Ti.getOffset(i||Fi.getTarget(t)))}};Fi.requestAnimationFrame=new function(){var t=Ti.getPrefixed(s,"requestAnimationFrame"),i=!1,o=[],h;function d(){var v=o;o=[];for(var D=0,A=v.length;D<A;D++)v[D]();i=t&&o.length,i&&t(d)}return function(v){o.push(v),t?i||(t(d),i=!0):h||(h=setInterval(d,16.666666666666668))}};var zi=u.extend(m,{_class:"View",initialize:function t(i,o){function h(V){return o[V]||parseInt(o.getAttribute(V),10)}function d(){var V=Ti.getSize(o);return V.isNaN()||V.isZero()?new nt(h("width"),h("height")):V}var v;if(s&&o){this._id=o.getAttribute("id"),this._id==null&&o.setAttribute("id",this._id="paper-view-"+t._id++),Fi.add(o,this._viewEvents);var D="none";if(Ti.setPrefixed(o.style,{userDrag:D,userSelect:D,touchCallout:D,contentZooming:D,tapHighlightColor:"rgba(0,0,0,0)"}),b.hasAttribute(o,"resize")){var A=this;Fi.add(s,this._windowEvents={resize:function(){A.setViewSize(d())}})}if(v=d(),b.hasAttribute(o,"stats")&&typeof Stats<"u"){this._stats=new Stats;var T=this._stats.domElement,P=T.style,F=Ti.getOffset(o);P.position="absolute",P.left=F.x+"px",P.top=F.y+"px",c.body.appendChild(T)}}else v=new nt(o),o=null;this._project=i,this._scope=i._scope,this._element=o,this._pixelRatio||(this._pixelRatio=s&&s.devicePixelRatio||1),this._setElementSize(v.width,v.height),this._viewSize=v,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new At)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ar.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;zi._focused===this&&(zi._focused=null),zi._views.splice(zi._views.indexOf(this),1),delete zi._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Fi.remove(this._element,this._viewEvents),Fi.remove(s,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:u.each(He._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Fi.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var i=t._element;(!Ti.getPrefixed(c,"hidden")||b.getAttribute(i,"keepalive")==="true")&&Ti.isInView(i)&&t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ar=this._scope;var t=Date.now()/1e3,i=this._last?t-this._last:0;this._last=t,this.emit("frame",new u({delta:i,time:this._time+=i,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,i){var o=this._frameItems;i?(o[t._id]={item:t,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete o[t._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var i in this._frameItems){var o=this._frameItems[i];o.item.emit("frame",new u(t,{time:o.time+=t.delta,count:o.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var t=this._viewSize;return new tn(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=nt.read(arguments),i=t.subtract(this._viewSize);i.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:i}),this._autoUpdate&&this.update())},_setElementSize:function(t,i){var o=this._element;o&&(o.width!==t&&(o.width=t),o.height!==i&&(o.height=i))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new Ie(new re,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Ti.isInView(this._element)},isInserted:function(){return Ti.isInserted(this._element)},getPixelSize:function(t){var i=this._element,o;if(i){var h=i.parentNode,d=c.createElement("div");d.style.fontSize=t,h.appendChild(d),o=parseFloat(Ti.getStyles(d).fontSize),h.removeChild(d)}else o=parseFloat(o);return o},getTextWidth:function(t,i){return 0}},u.each(["rotate","scale","shear","skew"],function(t){var i=t==="rotate";this[t]=function(){var o=arguments,h=(i?u:re).read(o),d=re.read(o,0,{readNull:!0});return this.transform(new At()[t](h,d||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new At;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=re.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform(new At().scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var i=this.getRotation();i!=null&&t!=null&&this.rotate(t-i)},getScaling:function(){var t=this._decompose().scaling;return new mt(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),i=re.read(arguments,0,{clone:!0,readNull:!0});t&&i&&this.scale(i.x/t.x,i.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(re.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(re.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(re.read(arguments))},getEventPoint:function(t){return this.viewToProject(Fi.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,i){c&&typeof i=="string"&&(i=c.getElementById(i));var o=s?wo:zi;return new o(t,i)}}},new function(){if(!s)return;var t,i,o=!1,h=!1;function d(Ze){var yt=Fi.getTarget(Ze);return yt.getAttribute&&zi._viewsById[yt.getAttribute("id")]}function v(){var Ze=zi._focused;if(!Ze||!Ze.isVisible()){for(var yt=0,Et=zi._views.length;yt<Et;yt++)if((Ze=zi._views[yt]).isVisible()){zi._focused=i=Ze;break}}}function D(Ze,yt,Et){Ze._handleMouseEvent("mousemove",yt,Et)}var A=s.navigator,T,P,F;A.pointerEnabled||A.msPointerEnabled?(T="pointerdown MSPointerDown",P="pointermove MSPointerMove",F="pointerup pointercancel MSPointerUp MSPointerCancel"):(T="touchstart",P="touchmove",F="touchend touchcancel","ontouchstart"in s&&A.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(T+=" mousedown",P+=" mousemove",F+=" mouseup"));var V={},z={mouseout:function(Ze){var yt=zi._focused,Et=Fi.getRelatedTarget(Ze);if(yt&&(!Et||Et.nodeName==="HTML")){var Yt=Fi.getOffset(Ze,yt._element),qt=Yt.x,ln=Math.abs,In=ln(qt),Zn=1<<25,Kn=In-Zn;Yt.x=ln(Kn)<In?Kn*(qt<0?-1:1):qt,D(yt,Ze,yt.viewToProject(Yt))}},scroll:v};V[T]=function(Ze){var yt=zi._focused=d(Ze);o||(o=!0,yt._handleMouseEvent("mousedown",Ze))},z[P]=function(Ze){var yt=zi._focused;if(!h){var Et=d(Ze);Et?yt!==Et&&(yt&&D(yt,Ze),t||(t=yt),yt=zi._focused=i=Et):i&&i===yt&&(t&&!t.isInserted()&&(t=null),yt=zi._focused=t,t=null,v())}yt&&D(yt,Ze)},z[T]=function(){h=!0},z[F]=function(Ze){var yt=zi._focused;yt&&o&&yt._handleMouseEvent("mouseup",Ze),h=o=!1},Fi.add(c,z),Fi.add(s,{load:v});var R=!1,J=!1,Y={doubleclick:"click",mousedrag:"mousemove"},ie=!1,j,X,I,G,te,pe,oe,Ee;function $e(Ze,yt,Et,Yt,qt,ln,In){var Zn=!1,Kn;function ur(yn,An){if(yn.responds(An)){if(Kn||(Kn=new so(An,Yt,qt,yt||yn,ln?qt.subtract(ln):null)),yn.emit(An,Kn)&&(R=!0,Kn.prevented&&(J=!0),Kn.stopped))return Zn=!0}else{var qn=Y[An];if(qn)return ur(yn,qn)}}for(;Ze&&Ze!==In&&!ur(Ze,Et);)Ze=Ze._parent;return Zn}function Xe(Ze,yt,Et,Yt,qt,ln){return Ze._project.removeOn(Et),J=R=!1,te&&$e(te,null,Et,Yt,qt,ln)||yt&&yt!==te&&!yt.isDescendant(te)&&$e(yt,null,Et==="mousedrag"?"mousemove":Et,Yt,qt,ln,te)||$e(Ze,te||yt||Ze,Et,Yt,qt,ln)}var ft={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:V,_handleMouseEvent:function(Ze,yt,Et){var Yt=this._itemEvents,qt=Yt.native[Ze],ln=Ze==="mousemove",In=this._scope.tool,Zn=this;function Kn(Rr){return Yt.virtual[Rr]||Zn.responds(Rr)||In&&In.responds(Rr)}ln&&o&&Kn("mousedrag")&&(Ze="mousedrag"),Et||(Et=this.getEventPoint(yt));var ur=this.getBounds().contains(Et),yn=qt&&ur&&Zn._project.hitTest(Et,{tolerance:0,fill:!0,stroke:!0}),An=yn&&yn.item||null,qn=!1,cr={};if(cr[Ze.substr(5)]=!0,qt&&An!==G&&(G&&$e(G,null,"mouseleave",yt,Et),An&&$e(An,null,"mouseenter",yt,Et),G=An),ie^ur&&($e(this,null,ur?"mouseenter":"mouseleave",yt,Et),qn=!0),(ur||cr.drag)&&!Et.equals(X)&&(Xe(this,An,ln?Ze:"mousemove",yt,Et,X),qn=!0),ie=ur,cr.down&&ur||cr.up&&j){if(Xe(this,An,Ze,yt,Et,j),cr.down){if(Ee=An===pe&&Date.now()-oe<300,I=pe=An,!J&&An){for(var mr=An;mr&&!mr.responds("mousedrag");)mr=mr._parent;mr&&(te=An)}j=Et}else cr.up&&(!J&&An===I&&(oe=Date.now(),Xe(this,An,Ee?"doubleclick":"click",yt,Et,j),Ee=!1),I=te=null);ie=!1,qn=!0}X=Et,qn&&In&&(R=In._handleMouseEvent(Ze,yt,Et,cr)||R),yt.cancelable!==!1&&(R&&!cr.move||cr.down&&Kn("mouseup"))&&yt.preventDefault()},_handleKeyEvent:function(Ze,yt,Et,Yt){var qt=this._scope,ln=qt.tool,In;function Zn(Kn){Kn.responds(Ze)&&(ar=qt,Kn.emit(Ze,In=In||new Fa(Ze,yt,Et,Yt)))}this.isVisible()&&(Zn(this),ln&&ln.responds(Ze)&&Zn(ln))},_countItemEvent:function(Ze,yt){var Et=this._itemEvents,Yt=Et.native,qt=Et.virtual;for(var ln in ft)Yt[ln]=(Yt[ln]||0)+(ft[ln][Ze]||0)*yt;qt[Ze]=(qt[Ze]||0)+yt},statics:{updateFocus:v,_resetState:function(){o=h=R=ie=!1,t=i=j=X=I=G=te=pe=oe=Ee=null}}}}),wo=zi.extend({_class:"CanvasView",initialize:function(t,i){if(!(i instanceof s.HTMLCanvasElement)){var o=nt.read(arguments,1);if(o.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+u.slice(arguments,1));i=di.getCanvas(o)}var h=this._context=i.getContext("2d");if(h.save(),this._pixelRatio=1,!/^off|false$/.test(b.getAttribute(i,"hidpi"))){var d=s.devicePixelRatio||1,v=Ti.getPrefixed(h,"backingStorePixelRatio")||1;this._pixelRatio=d/v}zi.call(this,t,i),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(i,o){var h=this._pixelRatio;if(t.base.call(this,i*h,o*h),h!==1){var d=this._element,v=this._context;if(!b.hasAttribute(d,"resize")){var D=d.style;D.width=i+"px",D.height=o+"px"}v.restore(),v.save(),v.scale(h,h)}},getContext:function(){return this._context},getPixelSize:function t(i){var o=ar.agent,h;if(o&&o.firefox)h=t.base.call(this,i);else{var d=this._context,v=d.font;d.font=i+" serif",h=parseFloat(d.font),d.font=v}return h},getTextWidth:function(t,i){var o=this._context,h=o.font,d=0;o.font=t;for(var v=0,D=i.length;v<D;v++)d=Math.max(d,o.measureText(i[v]).width);return o.font=h,d},update:function(){if(!this._needsUpdate)return!1;var t=this._project,i=this._context,o=this._viewSize;return i.clearRect(0,0,o.width+1,o.height+1),t&&t.draw(i,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),xo=u.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Uo.modifiers}}),Fa=xo.extend({_class:"KeyEvent",initialize:function(t,i,o,h){this.type=t,this.event=i,this.key=o,this.character=h},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Uo=new function(){var t={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},i={tab:"	",space:" ",enter:"\r"},o={},h={},d,v,D=new u({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var P=ar&&ar.agent;return P&&P.mac?this.meta:this.control}}});function A(P){var F=P.key||P.keyIdentifier;return F=/^U\+/.test(F)?String.fromCharCode(parseInt(F.substr(2),16)):/^Arrow[A-Z]/.test(F)?F.substr(5):F==="Unidentified"||F===n?String.fromCharCode(P.keyCode):F,t[F]||(F.length>1?u.hyphenate(F):F.toLowerCase())}function T(P,F,V,z){var R=zi._focused,J;if(o[F]=P,P?h[F]=V:delete h[F],F.length>1&&(J=u.camelize(F))in D){D[J]=P;var Y=ar&&ar.agent;if(J==="meta"&&Y&&Y.mac)if(P)d={};else{for(var ie in d)ie in h&&T(!1,ie,d[ie],z);d=null}}else P&&d&&(d[F]=V);R&&R._handleKeyEvent(P?"keydown":"keyup",z,F,V)}return Fi.add(c,{keydown:function(P){var F=A(P),V=ar&&ar.agent;F.length>1||V&&V.chrome&&(P.altKey||V.mac&&P.metaKey||!V.mac&&P.ctrlKey)?T(!0,F,i[F]||(F.length>1?"":F),P):v=F},keypress:function(P){if(v){var F=A(P),V=P.charCode,z=V>=32?String.fromCharCode(V):F.length>1?"":F;F!==v&&(F=z.toLowerCase()),T(!0,F,z,P),v=null}},keyup:function(P){var F=A(P);F in h&&T(!1,F,h[F],P)}}),Fi.add(s,{blur:function(P){for(var F in h)T(!1,F,h[F],P)}}),{modifiers:D,isDown:function(P){return!!o[P]}}},so=xo.extend({_class:"MouseEvent",initialize:function(t,i,o,h,d){this.type=t,this.event=i,this.point=o,this.target=h,this.delta=d},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),pa=xo.extend({_class:"ToolEvent",_item:null,initialize:function(t,i,o){this.tool=t,this.type=i,this.event=o},_choosePoint:function(t,i){return t||(i?i.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var i=t.item,o=i._parent;/^(Group|CompoundPath)$/.test(o._class);)i=o,o=o._parent;this._item=i}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),ea=k.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){k.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,t!=null&&this._maxDistance!=null&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,this._minDistance!=null&&t!=null&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,i,o,h){ar=this._scope,h.drag&&!this.responds(t)&&(t="mousemove");var d=h.move||h.drag,v=this.responds(t),D=this.minDistance,A=this.maxDistance,T=!1,P=this;function F(z,R){var J=o,Y=d?P._point:P._downPoint||J;if(d){if(P._moveCount>=0&&J.equals(Y))return!1;if(Y&&(z!=null||R!=null)){var ie=J.subtract(Y),j=ie.getLength();if(j<(z||0))return!1;R&&(J=Y.add(ie.normalize(Math.min(j,R))))}P._moveCount++}return P._point=J,P._lastPoint=Y||J,h.down&&(P._moveCount=-1,P._downPoint=J,P._downCount++),!0}function V(){v&&(T=P.emit(t,new pa(P,t,i))||T)}if(h.down)F(),V();else if(h.up)F(null,A),V();else if(v)for(;F(D,A);)V();return T}}),fs=u.extend(m,{_class:"Tween",statics:{easings:new u({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+2*(2-t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(i,o,h,d,v,D){this.object=i;var A=typeof v,T=A==="function";this.type=T?A:A==="string"?v:"linear",this.easing=T?v:t.easings[this.type],this.duration=d,this.running=!1,this._then=null,this._startTime=null;var P=o||h;this._keys=P?Object.keys(P):[],this._parsedKeys=this._parseKeys(this._keys),this._from=P&&this._getState(o),this._to=P&&this._getState(h),D!==!1&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var i=this.easing(t),o=this._keys,h=function(F){return typeof F=="function"?F(i,t):F},d=0,v=o&&o.length;d<v;d++){var D=o[d],A=h(this._from[D]),T=h(this._to[D]),P=A&&T&&A.__add&&T.__add?T.__subtract(A).__multiply(i).__add(A):(T-A)*i+A;this._setProperty(this._parsedKeys[D],P)}this.responds("update")&&this.emit("update",new u({progress:t,factor:i})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var i=this._startTime,o=i?(t-i)/this.duration:0;i||(this._startTime=t),this.update(o)},_getState:function(t){for(var i=this._keys,o={},h=0,d=i.length;h<d;h++){var v=i[h],D=this._parsedKeys[v],A=this._getProperty(D),T;if(t){var P=this._resolveValue(A,t[v]);this._setProperty(D,P),T=this._getProperty(D),T=T&&T.clone?T.clone():T,this._setProperty(D,A)}else T=A&&A.clone?A.clone():A;o[v]=T}return o},_resolveValue:function(t,i){if(i){if(Array.isArray(i)&&i.length===2){var o=i[0];return o&&o.match&&o.match(/^[+\-\*\/]=/)?this._calculate(t,o[0],i[1]):i}else if(typeof i=="string"){var h=i.match(/^[+\-*/]=(.*)/);if(h){var d=JSON.parse(h[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,i[0],d)}}}return i},_calculate:function(t,i,o){return ar.PaperScript.calculateBinary(t,i,o)},_parseKeys:function(t){for(var i={},o=0,h=t.length;o<h;o++){var d=t[o],v=d.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");i[d]=v.split("/")}return i},_getProperty:function(t,i){for(var o=this.object,h=0,d=t.length-(i||0);h<d&&o;h++)o=o[t[h]];return o},_setProperty:function(t,i){var o=this._getProperty(t,1);o&&(o[t[t.length-1]]=i)}}),Ds={request:function(t){var i=new e.XMLHttpRequest;return i.open((t.method||"get").toUpperCase(),t.url,u.pick(t.async,!0)),t.mimeType&&i.overrideMimeType(t.mimeType),i.onload=function(){var o=i.status;o===0||o===200?t.onLoad&&t.onLoad.call(i,i.responseText):i.onerror()},i.onerror=function(){var o=i.status,h='Could not load "'+t.url+'" (Status: '+o+")";if(t.onError)t.onError(h,o);else throw new Error(h)},i.send(null)}},di=u.exports.CanvasProvider={canvases:[],getCanvas:function(t,i,o){if(!s)return null;var h,d=!0;typeof t=="object"&&(i=t.height,t=t.width),this.canvases.length?h=this.canvases.pop():(h=c.createElement("canvas"),d=!1);var v=h.getContext("2d",o||{});if(!v)throw new Error("Canvas "+h+" is unable to provide a 2D context.");return h.width===t&&h.height===i?d&&v.clearRect(0,0,t+1,i+1):(h.width=t,h.height=i),v.save(),h},getContext:function(t,i,o){var h=this.getCanvas(t,i,o);return h?h.getContext("2d",o||{}):null},release:function(t){var i=t&&t.canvas?t.canvas:t;i&&i.getContext&&(i.getContext("2d").restore(),this.canvases.push(i))}},Ai=new function(){var t=Math.min,i=Math.max,o=Math.abs,h,d,v,D,A,T,P,F,V,z,R;function J(te,pe,oe){return .2989*te+.587*pe+.114*oe}function Y(te,pe,oe,Xe){var $e=Xe-J(te,pe,oe);V=te+$e,z=pe+$e,R=oe+$e;var Xe=J(V,z,R),ft=t(V,z,R),Ze=i(V,z,R);if(ft<0){var yt=Xe-ft;V=Xe+(V-Xe)*Xe/yt,z=Xe+(z-Xe)*Xe/yt,R=Xe+(R-Xe)*Xe/yt}if(Ze>255){var Et=255-Xe,Yt=Ze-Xe;V=Xe+(V-Xe)*Et/Yt,z=Xe+(z-Xe)*Et/Yt,R=Xe+(R-Xe)*Et/Yt}}function ie(te,pe,oe){return i(te,pe,oe)-t(te,pe,oe)}function j(te,pe,oe,Ee){var $e=[te,pe,oe],Xe=i(te,pe,oe),ft=t(te,pe,oe),Ze;ft=ft===te?0:ft===pe?1:2,Xe=Xe===te?0:Xe===pe?1:2,Ze=t(ft,Xe)===0?i(ft,Xe)===1?2:1:0,$e[Xe]>$e[ft]?($e[Ze]=($e[Ze]-$e[ft])*Ee/($e[Xe]-$e[ft]),$e[Xe]=Ee):$e[Ze]=$e[Xe]=0,$e[ft]=0,V=$e[0],z=$e[1],R=$e[2]}var X={multiply:function(){V=A*h/255,z=T*d/255,R=P*v/255},screen:function(){V=A+h-A*h/255,z=T+d-T*d/255,R=P+v-P*v/255},overlay:function(){V=A<128?2*A*h/255:255-2*(255-A)*(255-h)/255,z=T<128?2*T*d/255:255-2*(255-T)*(255-d)/255,R=P<128?2*P*v/255:255-2*(255-P)*(255-v)/255},"soft-light":function(){var te=h*A/255;V=te+A*(255-(255-A)*(255-h)/255-te)/255,te=d*T/255,z=te+T*(255-(255-T)*(255-d)/255-te)/255,te=v*P/255,R=te+P*(255-(255-P)*(255-v)/255-te)/255},"hard-light":function(){V=h<128?2*h*A/255:255-2*(255-h)*(255-A)/255,z=d<128?2*d*T/255:255-2*(255-d)*(255-T)/255,R=v<128?2*v*P/255:255-2*(255-v)*(255-P)/255},"color-dodge":function(){V=A===0?0:h===255?255:t(255,255*A/(255-h)),z=T===0?0:d===255?255:t(255,255*T/(255-d)),R=P===0?0:v===255?255:t(255,255*P/(255-v))},"color-burn":function(){V=A===255?255:h===0?0:i(0,255-(255-A)*255/h),z=T===255?255:d===0?0:i(0,255-(255-T)*255/d),R=P===255?255:v===0?0:i(0,255-(255-P)*255/v)},darken:function(){V=A<h?A:h,z=T<d?T:d,R=P<v?P:v},lighten:function(){V=A>h?A:h,z=T>d?T:d,R=P>v?P:v},difference:function(){V=A-h,V<0&&(V=-V),z=T-d,z<0&&(z=-z),R=P-v,R<0&&(R=-R)},exclusion:function(){V=A+h*(255-A-A)/255,z=T+d*(255-T-T)/255,R=P+v*(255-P-P)/255},hue:function(){j(h,d,v,ie(A,T,P)),Y(V,z,R,J(A,T,P))},saturation:function(){j(A,T,P,ie(h,d,v)),Y(V,z,R,J(A,T,P))},luminosity:function(){Y(A,T,P,J(h,d,v))},color:function(){Y(h,d,v,J(A,T,P))},add:function(){V=t(A+h,255),z=t(T+d,255),R=t(P+v,255)},subtract:function(){V=i(A-h,0),z=i(T-d,0),R=i(P-v,0)},average:function(){V=(A+h)/2,z=(T+d)/2,R=(P+v)/2},negation:function(){V=255-o(255-h-A),z=255-o(255-d-T),R=255-o(255-v-P)}},I=this.nativeModes=u.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(te){this[te]=!0},{}),G=di.getContext(1,1,{willReadFrequently:!0});G&&(u.each(X,function(te,pe){var oe=pe==="darken",Ee=!1;G.save();try{G.fillStyle=oe?"#300":"#a00",G.fillRect(0,0,1,1),G.globalCompositeOperation=pe,G.globalCompositeOperation===pe&&(G.fillStyle=oe?"#a00":"#300",G.fillRect(0,0,1,1),Ee=G.getImageData(0,0,1,1).data[0]!==oe?170:51)}catch{}G.restore(),I[pe]=Ee}),di.release(G)),this.process=function(te,pe,oe,Ee,$e){var Xe=pe.canvas,ft=te==="normal";if(ft||I[te])oe.save(),oe.setTransform(1,0,0,1,0,0),oe.globalAlpha=Ee,ft||(oe.globalCompositeOperation=te),oe.drawImage(Xe,$e.x,$e.y),oe.restore();else{var Ze=X[te];if(!Ze)return;for(var yt=oe.getImageData($e.x,$e.y,Xe.width,Xe.height),Et=yt.data,Yt=pe.getImageData(0,0,Xe.width,Xe.height).data,qt=0,ln=Et.length;qt<ln;qt+=4){h=Yt[qt],A=Et[qt],d=Yt[qt+1],T=Et[qt+1],v=Yt[qt+2],P=Et[qt+2],D=Yt[qt+3],F=Et[qt+3],Ze();var In=D*Ee/255,Zn=1-In;Et[qt]=In*V+Zn*A,Et[qt+1]=In*z+Zn*T,Et[qt+2]=In*R+Zn*P,Et[qt+3]=D*Ee+Zn*F}oe.putImageData(yt,$e.x,$e.y)}}},ui=new function(){var t="http://www.w3.org/2000/svg",i="http://www.w3.org/2000/xmlns",o="http://www.w3.org/1999/xlink",h={href:o,xlink:i,xmlns:i+"/","xmlns:xlink":i+"/"};function d(A,T,P){return D(c.createElementNS(t,A),T,P)}function v(A,T){var P=h[T],F=P?A.getAttributeNS(P,T):A.getAttribute(T);return F==="null"?null:F}function D(A,T,P){for(var F in T){var V=T[F],z=h[F];typeof V=="number"&&P&&(V=P.number(V)),z?A.setAttributeNS(z,F,V):A.setAttribute(F,V)}return A}return{svg:t,xmlns:i,xlink:o,create:d,get:v,set:D}},bo=u.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,i){return!i&&(t instanceof Pi||t instanceof On||t instanceof Ns)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,i){var o=u.capitalize(i),h=t[2];this[i]={type:t[1],property:i,attribute:t[0],toSVG:h,fromSVG:h&&u.each(h,function(d,v){this[d]=v},{}),exportFilter:t[3],get:"get"+o,set:"set"+o}},{});new function(){var t;function i(X,I,G){var te=new u,pe=X.getTranslation();if(I){var oe;X.isInvertible()?(X=X._shiftless(),oe=X._inverseTransform(pe),pe=null):oe=new re,te[G?"cx":"x"]=oe.x,te[G?"cy":"y"]=oe.y}if(!X.isIdentity()){var Ee=X.decompose();if(Ee){var $e=[],Xe=Ee.rotation,ft=Ee.scaling,Ze=Ee.skewing;pe&&!pe.isZero()&&$e.push("translate("+t.point(pe)+")"),Xe&&$e.push("rotate("+t.number(Xe)+")"),(!Ae.isZero(ft.x-1)||!Ae.isZero(ft.y-1))&&$e.push("scale("+t.point(ft)+")"),Ze.x&&$e.push("skewX("+t.number(Ze.x)+")"),Ze.y&&$e.push("skewY("+t.number(Ze.y)+")"),te.transform=$e.join(" ")}else te.transform="matrix("+X.getValues().join(",")+")"}return te}function o(X,I){for(var G=i(X._matrix),te=X._children,pe=ui.create("g",G,t),oe=0,Ee=te.length;oe<Ee;oe++){var $e=te[oe],Xe=ie($e,I);if(Xe)if($e.isClipMask()){var ft=ui.create("clipPath");ft.appendChild(Xe),J($e,ft,"clip"),ui.set(pe,{"clip-path":"url(#"+ft.id+")"})}else pe.appendChild(Xe)}return pe}function h(X,I){var G=i(X._matrix,!0),te=X.getSize(),pe=X.getImage();return G.x-=te.width/2,G.y-=te.height/2,G.width=te.width,G.height=te.height,G.href=I.embedImages==!1&&pe&&pe.src||X.toDataURL(),ui.create("image",G,t)}function d(X,I){var G=I.matchShapes;if(G){var te=X.toShape(!1);if(te)return v(te)}var pe=X._segments,oe=pe.length,Ee,$e=i(X._matrix);if(G&&oe>=2&&!X.hasHandles())if(oe>2){Ee=X._closed?"polygon":"polyline";for(var Xe=[],ft=0;ft<oe;ft++)Xe.push(t.point(pe[ft]._point));$e.points=Xe.join(" ")}else{Ee="line";var Ze=pe[0]._point,yt=pe[1]._point;$e.set({x1:Ze.x,y1:Ze.y,x2:yt.x,y2:yt.y})}else Ee="path",$e.d=X.getPathData(null,I.precision);return ui.create(Ee,$e,t)}function v(X){var I=X._type,G=X._radius,te=i(X._matrix,!0,I!=="rectangle");if(I==="rectangle"){I="rect";var pe=X._size,oe=pe.width,Ee=pe.height;te.x-=oe/2,te.y-=Ee/2,te.width=oe,te.height=Ee,G.isZero()&&(G=null)}return G&&(I==="circle"?te.r=G:(te.rx=G.width,te.ry=G.height)),ui.create(I,te,t)}function D(X,I){var G=i(X._matrix),te=X.getPathData(null,I.precision);return te&&(G.d=te),ui.create("path",G,t)}function A(X,I){var G=i(X._matrix,!0),te=X._definition,pe=R(te,"symbol"),oe=te._item,Ee=oe.getStrokeBounds();return pe||(pe=ui.create("symbol",{viewBox:t.rectangle(Ee)}),pe.appendChild(ie(oe,I)),J(te,pe,"symbol")),G.href="#"+pe.id,G.x+=Ee.x,G.y+=Ee.y,G.width=Ee.width,G.height=Ee.height,G.overflow="visible",ui.create("use",G,t)}function T(X){var I=R(X,"color");if(!I){var G=X.getGradient(),te=G._radial,pe=X.getOrigin(),oe=X.getDestination(),Ee;if(te){Ee={cx:pe.x,cy:pe.y,r:pe.getDistance(oe)};var $e=X.getHighlight();$e&&(Ee.fx=$e.x,Ee.fy=$e.y)}else Ee={x1:pe.x,y1:pe.y,x2:oe.x,y2:oe.y};Ee.gradientUnits="userSpaceOnUse",I=ui.create((te?"radial":"linear")+"Gradient",Ee,t);for(var Xe=G._stops,ft=0,Ze=Xe.length;ft<Ze;ft++){var yt=Xe[ft],Et=yt._color,Yt=Et.getAlpha(),qt=yt._offset;Ee={offset:qt??ft/(Ze-1)},Et&&(Ee["stop-color"]=Et.toCSS(!0)),Yt<1&&(Ee["stop-opacity"]=Yt),I.appendChild(ui.create("stop",Ee,t))}J(X,I,"color")}return"url(#"+I.id+")"}function P(X){var I=ui.create("text",i(X._matrix,!0),t);return I.textContent=X._content,I}var F={Group:o,Layer:o,Raster:h,Path:d,Shape:v,CompoundPath:D,SymbolItem:A,PointText:P};function V(X,I,G){var te={},pe=!G&&X.getParent(),oe=[];return X._name!=null&&(te.id=X._name),u.each(bo,function(Ee){var $e=Ee.get,Xe=Ee.type,ft=X[$e]();if(Ee.exportFilter?Ee.exportFilter(X,ft):!pe||!u.equals(pe[$e](),ft)){if(Xe==="color"&&ft!=null){var Ze=ft.getAlpha();Ze<1&&(te[Ee.attribute+"-opacity"]=Ze)}Xe==="style"?oe.push(Ee.attribute+": "+ft):te[Ee.attribute]=ft==null?"none":Xe==="color"?ft.gradient?T(ft):ft.toCSS(!0):Xe==="array"?ft.join(","):Xe==="lookup"?Ee.toSVG[ft]:ft}}),oe.length&&(te.style=oe.join(";")),te.opacity===1&&delete te.opacity,X._visible||(te.visibility="hidden"),ui.set(I,te,t)}var z;function R(X,I){return z||(z={ids:{},svgs:{}}),X&&z.svgs[I+"-"+(X._id||X.__id||(X.__id=rt.get("svg")))]}function J(X,I,G){z||R();var te=z.ids[G]=(z.ids[G]||0)+1;I.id=G+"-"+te,z.svgs[G+"-"+(X._id||X.__id)]=I}function Y(X,I){var G=X,te=null;if(z){G=X.nodeName.toLowerCase()==="svg"&&X;for(var pe in z.svgs)te||(G||(G=ui.create("svg"),G.appendChild(X)),te=G.insertBefore(ui.create("defs"),G.firstChild)),te.appendChild(z.svgs[pe]);z=null}return I.asString?new e.XMLSerializer().serializeToString(G):G}function ie(X,I,G){var te=F[X._class],pe=te&&te(X,I);if(pe){var oe=I.onExport;oe&&(pe=oe(X,pe,I)||pe);var Ee=JSON.stringify(X._data);Ee&&Ee!=="{}"&&Ee!=="null"&&pe.setAttribute("data-paper-data",Ee)}return pe&&V(X,pe,G)}function j(X){return X||(X={}),t=new ve(X.precision),X}He.inject({exportSVG:function(X){return X=j(X),Y(ie(this,X,!0),X)}}),Cn.inject({exportSVG:function(X){X=j(X);var I=this._children,G=this.getView(),te=u.pick(X.bounds,"view"),pe=X.matrix||te==="view"&&G._matrix,oe=pe&&At.read([pe]),Ee=te==="view"?new Ie([0,0],G.getViewSize()):te==="content"?He._getBounds(I,oe,{stroke:!0}).rect:Ie.read([te],0,{readNull:!0}),$e={version:"1.1",xmlns:ui.svg,"xmlns:xlink":ui.xlink};Ee&&($e.width=Ee.width,$e.height=Ee.height,(Ee.x||Ee.x===0||Ee.y||Ee.y===0)&&($e.viewBox=t.rectangle(Ee)));var Xe=ui.create("svg",$e,t),ft=Xe;oe&&!oe.isIdentity()&&(ft=Xe.appendChild(ui.create("g",i(oe),t)));for(var Ze=0,yt=I.length;Ze<yt;Ze++)ft.appendChild(ie(I[Ze],X,!0));return Y(Xe,X)}})},new function(){var t={},i;function o(I,G,te,pe,oe,Ee){var $e=ui.get(I,G)||Ee,Xe=$e==null?pe?null:te?"":0:te?$e:parseFloat($e);return/%\s*$/.test($e)?Xe/100*(oe?1:i[/x|^width/.test(G)?"width":"height"]):Xe}function h(I,G,te,pe,oe,Ee,$e){return G=o(I,G||"x",!1,pe,oe,Ee),te=o(I,te||"y",!1,pe,oe,$e),pe&&(G==null||te==null)?null:new re(G,te)}function d(I,G,te,pe,oe){return G=o(I,G||"width",!1,pe,oe),te=o(I,te||"height",!1,pe,oe),pe&&(G==null||te==null)?null:new nt(G,te)}function v(I,G,te){return I==="none"?null:G==="number"?parseFloat(I):G==="array"?I?I.split(/[\s,]+/g).map(parseFloat):[]:G==="color"?ie(I)||I:G==="lookup"?te[I]:I}function D(I,G,te,pe){var oe=I.childNodes,Ee=G==="clippath",$e=G==="defs",Xe=new _e,ft=Xe._project,Ze=ft._currentStyle,yt=[];if(!Ee&&!$e&&(Xe=Y(Xe,I,pe),ft._currentStyle=Xe._style.clone()),pe)for(var Et=I.querySelectorAll("defs"),Yt=0,qt=Et.length;Yt<qt;Yt++)j(Et[Yt],te,!1);for(var Yt=0,qt=oe.length;Yt<qt;Yt++){var ln=oe[Yt],In;ln.nodeType===1&&!/^defs$/i.test(ln.nodeName)&&(In=j(ln,te,!1))&&!(In instanceof ei)&&yt.push(In)}return Xe.addChildren(yt),Ee&&(Xe=Y(Xe.reduce(),I,pe)),ft._currentStyle=Ze,(Ee||$e)&&(Xe.remove(),Xe=null),Xe}function A(I,G){for(var te=I.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),pe=[],oe=0,Ee=te.length;oe<Ee;oe+=2)pe.push(new re(parseFloat(te[oe]),parseFloat(te[oe+1])));var $e=new ai(pe);return G==="polygon"&&$e.closePath(),$e}function T(I){return Pi.create(I.getAttribute("d"))}function P(I,G){var te=(o(I,"href",!0)||"").substring(1),pe=G==="radialgradient",oe;if(te)oe=t[te].getGradient(),oe._radial^pe&&(oe=oe.clone(),oe._radial=pe);else{for(var Ee=I.childNodes,$e=[],Xe=0,ft=Ee.length;Xe<ft;Xe++){var Ze=Ee[Xe];Ze.nodeType===1&&$e.push(Y(new io,Ze))}oe=new fo($e,pe)}var yt,Et,Yt,qt=o(I,"gradientUnits",!0)!=="userSpaceOnUse";pe?(yt=h(I,"cx","cy",!1,qt,"50%","50%"),Et=yt.add(o(I,"r",!1,!1,qt,"50%"),0),Yt=h(I,"fx","fy",!0,qt)):(yt=h(I,"x1","y1",!1,qt,"0%","0%"),Et=h(I,"x2","y2",!1,qt,"100%","0%"));var ln=Y(new Zi(oe,yt,Et,Yt),I);return ln._scaleToBounds=qt,null}var F={"#document":function(I,G,te,pe){for(var oe=I.childNodes,Ee=0,$e=oe.length;Ee<$e;Ee++){var Xe=oe[Ee];if(Xe.nodeType===1)return j(Xe,te,pe)}},g:D,svg:D,clippath:D,polygon:A,polyline:A,path:T,lineargradient:P,radialgradient:P,image:function(I){var G=new Kr(o(I,"href",!0));return G.on("load",function(){var te=d(I);this.setSize(te);var pe=h(I).add(te.divide(2));this._matrix.append(new At().translate(pe))}),G},symbol:function(I,G,te,pe){return new ei(D(I,G,te,pe),!0)},defs:D,use:function(I){var G=(o(I,"href",!0)||"").substring(1),te=t[G],pe=h(I);return te?te instanceof ei?te.place(pe):te.clone().translate(pe):null},circle:function(I){return new On.Circle(h(I,"cx","cy"),o(I,"r"))},ellipse:function(I){return new On.Ellipse({center:h(I,"cx","cy"),radius:d(I,"rx","ry")})},rect:function(I){return new On.Rectangle(new Ie(h(I),d(I)),d(I,"rx","ry"))},line:function(I){return new ai.Line(h(I,"x1","y1"),h(I,"x2","y2"))},text:function(I){var G=new da(h(I).add(h(I,"dx","dy")));return G.setContent(I.textContent.trim()||""),G},switch:D};function V(I,G,te,pe){if(I.transform){for(var oe=(pe.getAttribute(te)||"").split(/\)\s*/g),Ee=new At,$e=0,Xe=oe.length;$e<Xe;$e++){var ft=oe[$e];if(!ft)break;for(var Ze=ft.split(/\(\s*/),yt=Ze[0],Et=Ze[1].split(/[\s,]+/g),Yt=0,qt=Et.length;Yt<qt;Yt++)Et[Yt]=parseFloat(Et[Yt]);switch(yt){case"matrix":Ee.append(new At(Et[0],Et[1],Et[2],Et[3],Et[4],Et[5]));break;case"rotate":Ee.rotate(Et[0],Et[1]||0,Et[2]||0);break;case"translate":Ee.translate(Et[0],Et[1]||0);break;case"scale":Ee.scale(Et);break;case"skewX":Ee.skew(Et[0],0);break;case"skewY":Ee.skew(0,Et[0]);break}}I.transform(Ee)}}function z(I,G,te){var pe=te==="fill-opacity"?"getFillColor":"getStrokeColor",oe=I[pe]&&I[pe]();oe&&oe.setAlpha(parseFloat(G))}var R=u.set(u.each(bo,function(I){this[I.attribute]=function(G,te){if(G[I.set]&&(G[I.set](v(te,I.type,I.fromSVG)),I.type==="color")){var pe=G[I.get]();if(pe&&pe._scaleToBounds){var oe=G.getBounds();pe.transform(new At().translate(oe.getPoint()).scale(oe.getSize()))}}}},{}),{id:function(I,G){t[G]=I,I.setName&&I.setName(G)},"clip-path":function(I,G){var te=ie(G);if(te)if(te=te.clone(),te.setClipMask(!0),I instanceof _e)I.insertChild(0,te);else return new _e(te,I)},gradientTransform:V,transform:V,"fill-opacity":z,"stroke-opacity":z,visibility:function(I,G){I.setVisible&&I.setVisible(G==="visible")},display:function(I,G){I.setVisible&&I.setVisible(G!==null)},"stop-color":function(I,G){I.setColor&&I.setColor(G)},"stop-opacity":function(I,G){I._color&&I._color.setAlpha(parseFloat(G))},offset:function(I,G){if(I.setOffset){var te=G.match(/(.*)%$/);I.setOffset(te?te[1]/100:parseFloat(G))}},viewBox:function(I,G,te,pe,oe){var Ee=new Ie(v(G,"array")),$e=d(pe,null,null,!0),Xe,ft;if(I instanceof _e){var Ze=$e?$e.divide(Ee.getSize()):1,ft=new At().scale(Ze).translate(Ee.getPoint().negate());Xe=I}else I instanceof ei&&($e&&Ee.setSize($e),Xe=I._item);if(Xe){if(J(pe,"overflow",oe)!=="visible"){var yt=new On.Rectangle(Ee);yt.setClipMask(!0),Xe.addChild(yt)}ft&&Xe.transform(ft)}}});function J(I,G,te){var pe=I.attributes[G],oe=pe&&pe.value;if(!oe&&I.style){var Ee=u.camelize(G);oe=I.style[Ee],!oe&&te.node[Ee]!==te.parent[Ee]&&(oe=te.node[Ee])}return oe?oe==="none"?null:oe:n}function Y(I,G,te){var pe=G.parentNode,oe={node:Ti.getStyles(G)||{},parent:!te&&!/^defs$/i.test(pe.tagName)&&Ti.getStyles(pe)||{}};return u.each(R,function(Ee,$e){var Xe=J(G,$e,oe);I=Xe!==n&&Ee(I,Xe,$e,G,oe)||I}),I}function ie(I){var G=I&&I.match(/\((?:["'#]*)([^"')]+)/),te=G&&G[1],pe=te&&t[s?te.replace(s.location.href.split("#")[0]+"#",""):te];return pe&&pe._scaleToBounds&&(pe=pe.clone(),pe._scaleToBounds=!0),pe}function j(I,G,te){var pe=I.nodeName.toLowerCase(),oe=pe!=="#document",Ee=c.body,$e,Xe,ft;te&&oe&&(i=ar.getView().getSize(),i=d(I,null,null,!0)||i,$e=ui.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),Xe=I.parentNode,ft=I.nextSibling,$e.appendChild(I),Ee.appendChild($e));var Ze=ar.settings,yt=Ze.applyMatrix,Et=Ze.insertItems;Ze.applyMatrix=!1,Ze.insertItems=!1;var Yt=F[pe],qt=Yt&&Yt(I,pe,G,te)||null;if(Ze.insertItems=Et,Ze.applyMatrix=yt,qt){oe&&!(qt instanceof _e)&&(qt=Y(qt,I,te));var ln=G.onImport,In=oe&&I.getAttribute("data-paper-data");ln&&(qt=ln(I,qt,G)||qt),G.expandShapes&&qt instanceof On&&(qt.remove(),qt=qt.toPath()),In&&(qt._data=JSON.parse(In))}return $e&&(Ee.removeChild($e),Xe&&(ft?Xe.insertBefore(I,ft):Xe.appendChild(I))),te&&(t={},qt&&u.pick(G.applyMatrix,yt)&&qt.matrix.apply(!0,!0)),qt}function X(I,G,te){if(!I)return null;G=typeof G=="function"?{onLoad:G}:G||{};var pe=ar,oe=null;function Ee(Ze){try{var yt=typeof Ze=="object"?Ze:new e.DOMParser().parseFromString(Ze.trim(),"image/svg+xml");if(!yt.nodeName)throw yt=null,new Error("Unsupported SVG source: "+I);ar=pe,oe=j(yt,G,!0),(!G||G.insert!==!1)&&te._insertItem(n,oe);var Et=G.onLoad;Et&&Et(oe,Ze)}catch(Yt){$e(Yt)}}function $e(Ze,yt){var Et=G.onError;if(Et)Et(Ze,yt);else throw new Error(Ze)}if(typeof I=="string"&&!/^[\s\S]*</.test(I)){var Xe=c.getElementById(I);Xe?Ee(Xe):Ds.request({url:I,async:!0,onLoad:Ee,onError:$e})}else if(typeof File<"u"&&I instanceof File){var ft=new FileReader;return ft.onload=function(){Ee(ft.result)},ft.onerror=function(){$e(ft.error)},ft.readAsText(I)}else Ee(I);return oe}He.inject({importSVG:function(I,G){return X(I,G,this)}}),Cn.inject({importSVG:function(I,G){return this.activate(),X(I,G,this)}})},u.exports.PaperScript=(function(){var t=this,i=t.acorn;if(!i&&typeof go<"u")try{i=iO()}catch{}if(!i){var o,h;i=o=h={},function(Y,ie){if(typeof o=="object"&&typeof h=="object")return ie(o);if(typeof n=="function"&&n.amd)return n(["exports"],ie);ie(Y.acorn||(Y.acorn={}))}(this,function(Y){Y.version="0.5.0";var ie,j,X,I;Y.parse=function(ke,et){return j=String(ke),X=j.length,te(et),Ct(),vd(ie.program)};var G=Y.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function te(ke){ie=ke||{};for(var et in G)Object.prototype.hasOwnProperty.call(ie,et)||(ie[et]=G[et]);I=ie.sourceFile||null}var pe=Y.getLineInfo=function(ke,et){for(var Nt=1,dn=0;;){Z.lastIndex=dn;var Qn=Z.exec(ke);if(Qn&&Qn.index<et)++Nt,dn=Qn.index+Qn[0].length;else break}return{line:Nt,column:et-dn}};Y.tokenize=function(ke,et){j=String(ke),X=j.length,te(et),Ct();var Nt={};function dn(Qn){return In=$e,za(Qn),Nt.start=Ee,Nt.end=$e,Nt.startLoc=Xe,Nt.endLoc=ft,Nt.type=Ze,Nt.value=yt,Nt}return dn.jumpTo=function(Qn,br){if(oe=Qn,ie.locations){Yt=1,qt=Z.lastIndex=0;for(var wr;(wr=Z.exec(j))&&wr.index<Qn;)++Yt,qt=wr.index+wr[0].length}Et=br,Wn()},dn};var oe,Ee,$e,Xe,ft,Ze,yt,Et,Yt,qt,ln,In,Zn,Kn,ur,yn;function An(ke,et){var Nt=pe(j,ke);et+=" ("+Nt.line+":"+Nt.column+")";var dn=new SyntaxError(et);throw dn.pos=ke,dn.loc=Nt,dn.raisedAt=oe,dn}var qn=[],cr={type:"num"},mr={type:"regexp"},Rr={type:"string"},Lr={type:"name"},Ir={type:"eof"},ti={keyword:"break"},Wr={keyword:"case",beforeExpr:!0},ls={keyword:"catch"},Vr={keyword:"continue"},$i={keyword:"debugger"},Qi={keyword:"default"},Oi={keyword:"do",isLoop:!0},Bi={keyword:"else",beforeExpr:!0},ys={keyword:"finally"},ns={keyword:"for",isLoop:!0},As={keyword:"function"},rs={keyword:"if"},Ji={keyword:"return",beforeExpr:!0},Fs={keyword:"switch"},Is={keyword:"throw",beforeExpr:!0},Ws={keyword:"try"},Ca={keyword:"var"},ta={keyword:"while",isLoop:!0},Po={keyword:"with"},il={keyword:"new",beforeExpr:!0},Oo={keyword:"this"},sl={keyword:"null",atomValue:null},Ya={keyword:"true",atomValue:!0},al={keyword:"false",atomValue:!1},Vi={keyword:"in",binop:7,beforeExpr:!0},Ll={break:ti,case:Wr,catch:ls,continue:Vr,debugger:$i,default:Qi,do:Oi,else:Bi,finally:ys,for:ns,function:As,if:rs,return:Ji,switch:Fs,throw:Is,try:Ws,var:Ca,while:ta,with:Po,null:sl,true:Ya,false:al,new:il,in:Vi,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Oo,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},po={type:"[",beforeExpr:!0},Za={type:"]"},ga={type:"{",beforeExpr:!0},$a={type:"}"},oa={type:"(",beforeExpr:!0},Zs={type:")"},_={type:",",beforeExpr:!0},he={type:";",beforeExpr:!0},gt={type:":",beforeExpr:!0},jt={type:"."},wn={type:"?",beforeExpr:!0},nr={binop:10,beforeExpr:!0},l={isAssign:!0,beforeExpr:!0},f={isAssign:!0,beforeExpr:!0},x={postfix:!0,prefix:!0,isUpdate:!0},N={prefix:!0,beforeExpr:!0},ge={binop:1,beforeExpr:!0},Oe={binop:2,beforeExpr:!0},Ht={binop:3,beforeExpr:!0},Sn={binop:4,beforeExpr:!0},Rn={binop:5,beforeExpr:!0},dr={binop:6,beforeExpr:!0},Dr={binop:7,beforeExpr:!0},Pr={binop:8,beforeExpr:!0},Ur={binop:9,prefix:!0,beforeExpr:!0},pi={binop:10,beforeExpr:!0};Y.tokTypes={bracketL:po,bracketR:Za,braceL:ga,braceR:$a,parenL:oa,parenR:Zs,comma:_,semi:he,colon:gt,dot:jt,question:wn,slash:nr,eq:l,name:Lr,eof:Ir,num:cr,regexp:mr,string:Rr};for(var mi in Ll)Y.tokTypes["_"+mi]=Ll[mi];function gi(ke){ke=ke.split(" ");var et="",Nt=[];e:for(var dn=0;dn<ke.length;++dn){for(var Qn=0;Qn<Nt.length;++Qn)if(Nt[Qn][0].length==ke[dn].length){Nt[Qn].push(ke[dn]);continue e}Nt.push([ke[dn]])}function br(Yr){if(Yr.length==1)return et+="return str === "+JSON.stringify(Yr[0])+";";et+="switch(str){";for(var Es=0;Es<Yr.length;++Es)et+="case "+JSON.stringify(Yr[Es])+":";et+="return true}return false;"}if(Nt.length>3){Nt.sort(function(Yr,Es){return Es.length-Yr.length}),et+="switch(str.length){";for(var dn=0;dn<Nt.length;++dn){var wr=Nt[dn];et+="case "+wr[0].length+":",br(wr)}et+="}"}else br(ke);return new Function("str",et)}var xa=gi("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Xn=gi("class enum extends super const export import"),Un=gi("implements interface let package private protected public static yield"),rr=gi("eval arguments"),Nr=gi("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),vi=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,xi="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ri="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Ui=new RegExp("["+xi+"]"),zs=new RegExp("["+xi+Ri+"]"),M=/[\n\r\u2028\u2029]/,Z=/\r\n|[\n\r\u2028\u2029]/g,xe=Y.isIdentifierStart=function(ke){return ke<65?ke===36:ke<91?!0:ke<97?ke===95:ke<123?!0:ke>=170&&Ui.test(String.fromCharCode(ke))},Re=Y.isIdentifierChar=function(ke){return ke<48?ke===36:ke<58?!0:ke<65?!1:ke<91?!0:ke<97?ke===95:ke<123?!0:ke>=170&&zs.test(String.fromCharCode(ke))};function vt(){this.line=Yt,this.column=oe-qt}function Ct(){Yt=1,oe=qt=0,Et=!0,Wn()}function It(ke,et){$e=oe,ie.locations&&(ft=new vt),Ze=ke,Wn(),yt=et,Et=ke.beforeExpr}function Pn(){var ke=ie.onComment&&ie.locations&&new vt,et=oe,Nt=j.indexOf("*/",oe+=2);if(Nt===-1&&An(oe-2,"Unterminated comment"),oe=Nt+2,ie.locations){Z.lastIndex=et;for(var dn;(dn=Z.exec(j))&&dn.index<oe;)++Yt,qt=dn.index+dn[0].length}ie.onComment&&ie.onComment(!0,j.slice(et+2,Nt),et,oe,ke,ie.locations&&new vt)}function xn(){for(var ke=oe,et=ie.onComment&&ie.locations&&new vt,Nt=j.charCodeAt(oe+=2);oe<X&&Nt!==10&&Nt!==13&&Nt!==8232&&Nt!==8233;)++oe,Nt=j.charCodeAt(oe);ie.onComment&&ie.onComment(!1,j.slice(ke+2,oe),ke,oe,et,ie.locations&&new vt)}function Wn(){for(;oe<X;){var ke=j.charCodeAt(oe);if(ke===32)++oe;else if(ke===13){++oe;var et=j.charCodeAt(oe);et===10&&++oe,ie.locations&&(++Yt,qt=oe)}else if(ke===10||ke===8232||ke===8233)++oe,ie.locations&&(++Yt,qt=oe);else if(ke>8&&ke<14)++oe;else if(ke===47){var et=j.charCodeAt(oe+1);if(et===42)Pn();else if(et===47)xn();else break}else if(ke===160)++oe;else if(ke>=5760&&vi.test(String.fromCharCode(ke)))++oe;else break}}function Cr(){var ke=j.charCodeAt(oe+1);return ke>=48&&ke<=57?ps(!0):(++oe,It(jt))}function kr(){var ke=j.charCodeAt(oe+1);return Et?(++oe,Li()):ke===61?is(f,2):is(nr,1)}function hr(){var ke=j.charCodeAt(oe+1);return ke===61?is(f,2):is(pi,1)}function Gr(ke){var et=j.charCodeAt(oe+1);return et===ke?is(ke===124?ge:Oe,2):et===61?is(f,2):is(ke===124?Ht:Rn,1)}function _i(){var ke=j.charCodeAt(oe+1);return ke===61?is(f,2):is(Sn,1)}function ds(ke){var et=j.charCodeAt(oe+1);return et===ke?et==45&&j.charCodeAt(oe+2)==62&&M.test(j.slice(In,oe))?(oe+=3,xn(),Wn(),za()):is(x,2):et===61?is(f,2):is(Ur,1)}function us(ke){var et=j.charCodeAt(oe+1),Nt=1;return et===ke?(Nt=ke===62&&j.charCodeAt(oe+2)===62?3:2,j.charCodeAt(oe+Nt)===61?is(f,Nt+1):is(Pr,Nt)):et==33&&ke==60&&j.charCodeAt(oe+2)==45&&j.charCodeAt(oe+3)==45?(oe+=4,xn(),Wn(),za()):(et===61&&(Nt=j.charCodeAt(oe+2)===61?3:2),is(Dr,Nt))}function So(ke){var et=j.charCodeAt(oe+1);return et===61?is(dr,j.charCodeAt(oe+2)===61?3:2):is(ke===61?l:N,1)}function Ka(ke){switch(ke){case 46:return Cr();case 40:return++oe,It(oa);case 41:return++oe,It(Zs);case 59:return++oe,It(he);case 44:return++oe,It(_);case 91:return++oe,It(po);case 93:return++oe,It(Za);case 123:return++oe,It(ga);case 125:return++oe,It($a);case 58:return++oe,It(gt);case 63:return++oe,It(wn);case 48:var et=j.charCodeAt(oe+1);if(et===120||et===88)return Ms();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ps(!1);case 34:case 39:return ri(ke);case 47:return kr();case 37:case 42:return hr();case 124:case 38:return Gr(ke);case 94:return _i();case 43:case 45:return ds(ke);case 60:case 62:return us(ke);case 61:case 33:return So(ke);case 126:return is(N,1)}return!1}function za(ke){if(ke?oe=Ee+1:Ee=oe,ie.locations&&(Xe=new vt),ke)return Li();if(oe>=X)return It(Ir);var et=j.charCodeAt(oe);if(xe(et)||et===92)return Xo();var Nt=Ka(et);if(Nt===!1){var dn=String.fromCharCode(et);if(dn==="\\"||Ui.test(dn))return Xo();An(oe,"Unexpected character '"+dn+"'")}return Nt}function is(ke,et){var Nt=j.slice(oe,oe+et);oe+=et,It(ke,Nt)}function Li(){for(var Qn="",ke,et,Nt=oe;;){oe>=X&&An(Nt,"Unterminated regular expression");var dn=j.charAt(oe);if(M.test(dn)&&An(Nt,"Unterminated regular expression"),ke)ke=!1;else{if(dn==="[")et=!0;else if(dn==="]"&&et)et=!1;else if(dn==="/"&&!et)break;ke=dn==="\\"}++oe}var Qn=j.slice(Nt,oe);++oe;var br=qi();br&&!/^[gmsiy]*$/.test(br)&&An(Nt,"Invalid regexp flag");try{var wr=new RegExp(Qn,br)}catch(Yr){Yr instanceof SyntaxError&&An(Nt,Yr.message),An(Yr)}return It(mr,wr)}function ko(ke,et){for(var Nt=oe,dn=0,Qn=0,br=et??1/0;Qn<br;++Qn){var wr=j.charCodeAt(oe),Yr;if(wr>=97?Yr=wr-97+10:wr>=65?Yr=wr-65+10:wr>=48&&wr<=57?Yr=wr-48:Yr=1/0,Yr>=ke)break;++oe,dn=dn*ke+Yr}return oe===Nt||et!=null&&oe-Nt!==et?null:dn}function Ms(){oe+=2;var ke=ko(16);return ke==null&&An(Ee+2,"Expected hexadecimal number"),xe(j.charCodeAt(oe))&&An(oe,"Identifier directly after number"),It(cr,ke)}function ps(ke){var et=oe,Nt=!1,dn=j.charCodeAt(oe)===48;!ke&&ko(10)===null&&An(et,"Invalid number"),j.charCodeAt(oe)===46&&(++oe,ko(10),Nt=!0);var Qn=j.charCodeAt(oe);(Qn===69||Qn===101)&&(Qn=j.charCodeAt(++oe),(Qn===43||Qn===45)&&++oe,ko(10)===null&&An(et,"Invalid number"),Nt=!0),xe(j.charCodeAt(oe))&&An(oe,"Identifier directly after number");var br=j.slice(et,oe),wr;return Nt?wr=parseFloat(br):!dn||br.length===1?wr=parseInt(br,10):/[89]/.test(br)||yn?An(et,"Invalid number"):wr=parseInt(br,8),It(cr,wr)}function ri(ke){oe++;for(var et="";;){oe>=X&&An(Ee,"Unterminated string constant");var Nt=j.charCodeAt(oe);if(Nt===ke)return++oe,It(Rr,et);if(Nt===92){Nt=j.charCodeAt(++oe);var dn=/^[0-7]+/.exec(j.slice(oe,oe+3));for(dn&&(dn=dn[0]);dn&&parseInt(dn,8)>255;)dn=dn.slice(0,-1);if(dn==="0"&&(dn=null),++oe,dn)yn&&An(oe-2,"Octal literal in strict mode"),et+=String.fromCharCode(parseInt(dn,8)),oe+=dn.length-1;else switch(Nt){case 110:et+=`
`;break;case 114:et+="\r";break;case 120:et+=String.fromCharCode(Yl(2));break;case 117:et+=String.fromCharCode(Yl(4));break;case 85:et+=String.fromCharCode(Yl(8));break;case 116:et+="	";break;case 98:et+="\b";break;case 118:et+="\v";break;case 102:et+="\f";break;case 48:et+="\0";break;case 13:j.charCodeAt(oe)===10&&++oe;case 10:ie.locations&&(qt=oe,++Yt);break;default:et+=String.fromCharCode(Nt);break}}else(Nt===13||Nt===10||Nt===8232||Nt===8233)&&An(Ee,"Unterminated string constant"),et+=String.fromCharCode(Nt),++oe}}function Yl(ke){var et=ko(16,ke);return et===null&&An(Ee,"Bad character escape sequence"),et}var es;function qi(){es=!1;for(var ke,et=!0,Nt=oe;;){var dn=j.charCodeAt(oe);if(Re(dn))es&&(ke+=j.charAt(oe)),++oe;else if(dn===92){es||(ke=j.slice(Nt,oe)),es=!0,j.charCodeAt(++oe)!=117&&An(oe,"Expecting Unicode escape sequence \\uXXXX"),++oe;var Qn=Yl(4),br=String.fromCharCode(Qn);br||An(oe-1,"Invalid Unicode escape"),(et?xe(Qn):Re(Qn))||An(oe-4,"Invalid Unicode escape"),ke+=br}else break;et=!1}return es?ke:j.slice(Nt,oe)}function Xo(){var ke=qi(),et=Lr;return!es&&Nr(ke)&&(et=Ll[ke]),It(et,ke)}function ii(){ln=Ee,In=$e,Zn=ft,za()}function _l(ke){if(yn=ke,oe=Ee,ie.locations)for(;oe<qt;)qt=j.lastIndexOf(`
`,qt-2)+1,--Yt;Wn(),za()}function Io(){this.type=null,this.start=Ee,this.end=null}function Gu(){this.start=Xe,this.end=null,I!==null&&(this.source=I)}function gs(){var ke=new Io;return ie.locations&&(ke.loc=new Gu),ie.directSourceFile&&(ke.sourceFile=ie.directSourceFile),ie.ranges&&(ke.range=[Ee,0]),ke}function Da(ke){var et=new Io;return et.start=ke.start,ie.locations&&(et.loc=new Gu,et.loc.start=ke.loc.start),ie.ranges&&(et.range=[ke.range[0],0]),et}function $r(ke,et){return ke.type=et,ke.end=In,ie.locations&&(ke.loc.end=Zn),ie.ranges&&(ke.range[1]=In),ke}function Yu(ke){return ie.ecmaVersion>=5&&ke.type==="ExpressionStatement"&&ke.expression.type==="Literal"&&ke.expression.value==="use strict"}function Si(ke){if(Ze===ke)return ii(),!0}function bs(){return!ie.strictSemicolons&&(Ze===Ir||Ze===$a||M.test(j.slice(In,Ee)))}function Pa(){!Si(he)&&!bs()&&Ei()}function qr(ke){Ze===ke?ii():Ei()}function Ei(){An(Ee,"Unexpected token")}function uu(ke){ke.type!=="Identifier"&&ke.type!=="MemberExpression"&&An(ke.start,"Assigning to rvalue"),yn&&ke.type==="Identifier"&&rr(ke.name)&&An(ke.start,"Assigning to "+ke.name+" in strict mode")}function vd(ke){ln=In=oe,ie.locations&&(Zn=new vt),Kn=yn=null,ur=[],za();var et=ke||gs(),Nt=!0;for(ke||(et.body=[]);Ze!==Ir;){var dn=Oa();et.body.push(dn),Nt&&Yu(dn)&&_l(!0),Nt=!1}return $r(et,"Program")}var lc={kind:"loop"},yl={kind:"switch"};function Oa(){(Ze===nr||Ze===f&&yt=="/=")&&za(!0);var ke=Ze,et=gs();switch(ke){case ti:case Vr:ii();var Nt=ke===ti;Si(he)||bs()?et.label=null:Ze!==Lr?Ei():(et.label=En(),Pa());for(var dn=0;dn<ur.length;++dn){var Qn=ur[dn];if((et.label==null||Qn.name===et.label.name)&&(Qn.kind!=null&&(Nt||Qn.kind==="loop")||et.label&&Nt))break}return dn===ur.length&&An(et.start,"Unsyntactic "+ke.keyword),$r(et,Nt?"BreakStatement":"ContinueStatement");case $i:return ii(),Pa(),$r(et,"DebuggerStatement");case Oi:return ii(),ur.push(lc),et.body=Oa(),ur.pop(),qr(ta),et.test=Lo(),Pa(),$r(et,"DoWhileStatement");case ns:if(ii(),ur.push(lc),qr(oa),Ze===he)return xl(et,null);if(Ze===Ca){var br=gs();return ii(),ol(br,!0),$r(br,"VariableDeclaration"),br.declarations.length===1&&Si(Vi)?qa(et,br):xl(et,br)}var br=Us(!1,!0);return Si(Vi)?(uu(br),qa(et,br)):xl(et,br);case As:return ii(),Gt(et,!0);case rs:return ii(),et.test=Lo(),et.consequent=Oa(),et.alternate=Si(Bi)?Oa():null,$r(et,"IfStatement");case Ji:return!Kn&&!ie.allowReturnOutsideFunction&&An(Ee,"'return' outside of function"),ii(),Si(he)||bs()?et.argument=null:(et.argument=Us(),Pa()),$r(et,"ReturnStatement");case Fs:ii(),et.discriminant=Lo(),et.cases=[],qr(ga),ur.push(yl);for(var wr,Yr;Ze!=$a;)if(Ze===Wr||Ze===Qi){var Es=Ze===Wr;wr&&$r(wr,"SwitchCase"),et.cases.push(wr=gs()),wr.consequent=[],ii(),Es?wr.test=Us():(Yr&&An(ln,"Multiple default clauses"),Yr=!0,wr.test=null),qr(gt)}else wr||Ei(),wr.consequent.push(Oa());return wr&&$r(wr,"SwitchCase"),ii(),ur.pop(),$r(et,"SwitchStatement");case Is:return ii(),M.test(j.slice(In,Ee))&&An(In,"Illegal newline after throw"),et.argument=Us(),Pa(),$r(et,"ThrowStatement");case Ws:if(ii(),et.block=wl(),et.handler=null,Ze===ls){var ra=gs();ii(),qr(oa),ra.param=En(),yn&&rr(ra.param.name)&&An(ra.param.start,"Binding "+ra.param.name+" in strict mode"),qr(Zs),ra.guard=null,ra.body=wl(),et.handler=$r(ra,"CatchClause")}return et.guardedHandlers=qn,et.finalizer=Si(ys)?wl():null,!et.handler&&!et.finalizer&&An(et.start,"Missing catch or finally clause"),$r(et,"TryStatement");case Ca:return ii(),ol(et),Pa(),$r(et,"VariableDeclaration");case ta:return ii(),et.test=Lo(),ur.push(lc),et.body=Oa(),ur.pop(),$r(et,"WhileStatement");case Po:return yn&&An(Ee,"'with' in strict mode"),ii(),et.object=Lo(),et.body=Oa(),$r(et,"WithStatement");case ga:return wl();case he:return ii(),$r(et,"EmptyStatement");default:var Xa=yt,ao=Us();if(ke===Lr&&ao.type==="Identifier"&&Si(gt)){for(var dn=0;dn<ur.length;++dn)ur[dn].name===Xa&&An(ao.start,"Label '"+Xa+"' is already declared");var cu=Ze.isLoop?"loop":Ze===Fs?"switch":null;return ur.push({name:Xa,kind:cu}),et.body=Oa(),ur.pop(),et.label=ao,$r(et,"LabeledStatement")}else return et.expression=ao,Pa(),$r(et,"ExpressionStatement")}}function Lo(){qr(oa);var ke=Us();return qr(Zs),ke}function wl(ke){var et=gs(),Nt=!0,dn=!1,Qn;for(et.body=[],qr(ga);!Si($a);){var br=Oa();et.body.push(br),Nt&&ke&&Yu(br)&&(Qn=dn,_l(dn=!0)),Nt=!1}return dn&&!Qn&&_l(!1),$r(et,"BlockStatement")}function xl(ke,et){return ke.init=et,qr(he),ke.test=Ze===he?null:Us(),qr(he),ke.update=Ze===Zs?null:Us(),qr(Zs),ke.body=Oa(),ur.pop(),$r(ke,"ForStatement")}function qa(ke,et){return ke.left=et,ke.right=Us(),qr(Zs),ke.body=Oa(),ur.pop(),$r(ke,"ForInStatement")}function ol(ke,et){for(ke.declarations=[],ke.kind="var";;){var Nt=gs();if(Nt.id=En(),yn&&rr(Nt.id.name)&&An(Nt.id.start,"Binding "+Nt.id.name+" in strict mode"),Nt.init=Si(l)?Us(!0,et):null,ke.declarations.push($r(Nt,"VariableDeclarator")),!Si(_))break}return ke}function Us(ke,et){var Nt=Zu(et);if(!ke&&Ze===_){var dn=Da(Nt);for(dn.expressions=[Nt];Si(_);)dn.expressions.push(Zu(et));return $r(dn,"SequenceExpression")}return Nt}function Zu(ke){var et=Zl(ke);if(Ze.isAssign){var Nt=Da(et);return Nt.operator=yt,Nt.left=et,ii(),Nt.right=Zu(ke),uu(et),$r(Nt,"AssignmentExpression")}return et}function Zl(ke){var et=Gs(ke);if(Si(wn)){var Nt=Da(et);return Nt.test=et,Nt.consequent=Us(!0),qr(gt),Nt.alternate=Us(!0,ke),$r(Nt,"ConditionalExpression")}return et}function Gs(ke){return la(uc(),-1,ke)}function la(ke,et,Nt){var dn=Ze.binop;if(dn!=null&&(!Nt||Ze!==Vi)&&dn>et){var Qn=Da(ke);Qn.left=ke,Qn.operator=yt;var br=Ze;ii(),Qn.right=la(uc(),dn,Nt);var wr=$r(Qn,br===ge||br===Oe?"LogicalExpression":"BinaryExpression");return la(wr,et,Nt)}return ke}function uc(){if(Ze.prefix){var ke=gs(),et=Ze.isUpdate;return ke.operator=yt,ke.prefix=!0,Et=!0,ii(),ke.argument=uc(),et?uu(ke.argument):yn&&ke.operator==="delete"&&ke.argument.type==="Identifier"&&An(ke.start,"Deleting local variable in strict mode"),$r(ke,et?"UpdateExpression":"UnaryExpression")}for(var Nt=Zh();Ze.postfix&&!bs();){var ke=Da(Nt);ke.operator=yt,ke.prefix=!1,ke.argument=Nt,uu(Nt),ii(),Nt=$r(ke,"UpdateExpression")}return Nt}function Zh(){return $l(gn())}function $l(ke,et){if(Si(jt)){var Nt=Da(ke);return Nt.object=ke,Nt.property=En(!0),Nt.computed=!1,$l($r(Nt,"MemberExpression"),et)}else if(Si(po)){var Nt=Da(ke);return Nt.object=ke,Nt.property=Us(),Nt.computed=!0,qr(Za),$l($r(Nt,"MemberExpression"),et)}else if(!et&&Si(oa)){var Nt=Da(ke);return Nt.callee=ke,Nt.arguments=Nn(Zs,!1),$l($r(Nt,"CallExpression"),et)}else return ke}function gn(){switch(Ze){case Oo:var dn=gs();return ii(),$r(dn,"ThisExpression");case Lr:return En();case cr:case Rr:case mr:var dn=gs();return dn.value=yt,dn.raw=j.slice(Ee,$e),ii(),$r(dn,"Literal");case sl:case Ya:case al:var dn=gs();return dn.value=Ze.atomValue,dn.raw=Ze.keyword,ii(),$r(dn,"Literal");case oa:var ke=Xe,et=Ee;ii();var Nt=Us();return Nt.start=et,Nt.end=$e,ie.locations&&(Nt.loc.start=ke,Nt.loc.end=ft),ie.ranges&&(Nt.range=[et,$e]),qr(Zs),Nt;case po:var dn=gs();return ii(),dn.elements=Nn(Za,!0,!0),$r(dn,"ArrayExpression");case ga:return fr();case As:var dn=gs();return ii(),Gt(dn,!1);case il:return jn();default:Ei()}}function jn(){var ke=gs();return ii(),ke.callee=$l(gn(),!0),Si(oa)?ke.arguments=Nn(Zs,!1):ke.arguments=qn,$r(ke,"NewExpression")}function fr(){var ke=gs(),et=!0,Nt=!1;for(ke.properties=[],ii();!Si($a);){if(et)et=!1;else if(qr(_),ie.allowTrailingCommas&&Si($a))break;var dn={key:sr()},Qn=!1,br;if(Si(gt)?(dn.value=Us(!0),br=dn.kind="init"):ie.ecmaVersion>=5&&dn.key.type==="Identifier"&&(dn.key.name==="get"||dn.key.name==="set")?(Qn=Nt=!0,br=dn.kind=dn.key.name,dn.key=sr(),Ze!==oa&&Ei(),dn.value=Gt(gs(),!1)):Ei(),dn.key.type==="Identifier"&&(yn||Nt))for(var wr=0;wr<ke.properties.length;++wr){var Yr=ke.properties[wr];if(Yr.key.name===dn.key.name){var Es=br==Yr.kind||Qn&&Yr.kind==="init"||br==="init"&&(Yr.kind==="get"||Yr.kind==="set");Es&&!yn&&br==="init"&&Yr.kind==="init"&&(Es=!1),Es&&An(dn.key.start,"Redefinition of property")}}ke.properties.push(dn)}return $r(ke,"ObjectExpression")}function sr(){return Ze===cr||Ze===Rr?gn():En(!0)}function Gt(ke,et){Ze===Lr?ke.id=En():et?Ei():ke.id=null,ke.params=[];var Nt=!0;for(qr(oa);!Si(Zs);)Nt?Nt=!1:qr(_),ke.params.push(En());var dn=Kn,Qn=ur;if(Kn=!0,ur=[],ke.body=wl(!0),Kn=dn,ur=Qn,yn||ke.body.body.length&&Yu(ke.body.body[0]))for(var br=ke.id?-1:0;br<ke.params.length;++br){var wr=br<0?ke.id:ke.params[br];if((Un(wr.name)||rr(wr.name))&&An(wr.start,"Defining '"+wr.name+"' in strict mode"),br>=0)for(var Yr=0;Yr<br;++Yr)wr.name===ke.params[Yr].name&&An(wr.start,"Argument name clash in strict mode")}return $r(ke,et?"FunctionDeclaration":"FunctionExpression")}function Nn(ke,et,Nt){for(var dn=[],Qn=!0;!Si(ke);){if(Qn)Qn=!1;else if(qr(_),et&&ie.allowTrailingCommas&&Si(ke))break;Nt&&Ze===_?dn.push(null):dn.push(Us(!0))}return dn}function En(ke){var et=gs();return ke&&ie.forbidReserved=="everywhere"&&(ke=!1),Ze===Lr?(!ke&&(ie.forbidReserved&&(ie.ecmaVersion===3?xa:Xn)(yt)||yn&&Un(yt))&&j.slice(Ee,$e).indexOf("\\")==-1&&An(Ee,"The keyword '"+yt+"' is reserved"),et.name=yt):ke&&Ze.keyword?et.name=Ze.keyword:Ei(),Et=!1,ii(),$r(et,"Identifier")}}),i.version||(i=null)}function d(Y,ie){return(t.acorn||i).parse(Y,ie)}var v={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},D={"-":"__negate","+":"__self"},A=u.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(Y){this["__"+Y]="#"+Y},{__self:function(){return this}});re.inject(A),nt.inject(A),Zi.inject(A);function T(Y,ie,j){var X=v[ie];if(Y&&Y[X]){var I=Y[X](j);return ie==="!="?!I:I}switch(ie){case"+":return Y+j;case"-":return Y-j;case"*":return Y*j;case"/":return Y/j;case"%":return Y%j;case"==":return Y==j;case"!=":return Y!=j}}function P(Y,ie){var j=D[Y];if(ie&&ie[j])return ie[j]();switch(Y){case"+":return+ie;case"-":return-ie}}function F(Y,ie){if(!Y)return"";ie=ie||{};var j=[];function X(yn){for(var An=0,qn=j.length;An<qn;An++){var cr=j[An];if(cr[0]>=yn)break;yn+=cr[1]}return yn}function I(yn){return Y.substring(X(yn.range[0]),X(yn.range[1]))}function G(yn,An){return Y.substring(X(yn.range[1]),X(An.range[0]))}function te(yn,An){for(var qn=X(yn.range[0]),cr=X(yn.range[1]),mr=0,Rr=j.length-1;Rr>=0;Rr--)if(qn>j[Rr][0]){mr=Rr+1;break}j.splice(mr,0,[qn,An.length-cr+qn]),Y=Y.substring(0,qn)+An+Y.substring(cr)}function pe(yn,An){switch(yn.type){case"UnaryExpression":if(yn.operator in D&&yn.argument.type!=="Literal"){var qn=I(yn.argument);te(yn,'$__("'+yn.operator+'", '+qn+")")}break;case"BinaryExpression":if(yn.operator in v&&yn.left.type!=="Literal"){var cr=I(yn.left),mr=I(yn.right),Rr=G(yn.left,yn.right),Lr=yn.operator;te(yn,"__$__("+cr+","+Rr.replace(new RegExp("\\"+Lr),'"'+Lr+'"')+", "+mr+")")}break;case"UpdateExpression":case"AssignmentExpression":var Ir=An&&An.type;if(!(Ir==="ForStatement"||Ir==="BinaryExpression"&&/^[=!<>]/.test(An.operator)||Ir==="MemberExpression"&&An.computed)){if(yn.type==="UpdateExpression"){var qn=I(yn.argument),ti="__$__("+qn+', "'+yn.operator[0]+'", 1)',Wr=qn+" = "+ti;yn.prefix?Wr="("+Wr+")":(Ir==="AssignmentExpression"||Ir==="VariableDeclarator"||Ir==="BinaryExpression")&&(I(An.left||An.id)===qn&&(Wr=ti),Wr=qn+"; "+Wr),te(yn,Wr)}else if(/^.=$/.test(yn.operator)&&yn.left.type!=="Literal"){var cr=I(yn.left),mr=I(yn.right),ti=cr+" = __$__("+cr+', "'+yn.operator[0]+'", '+mr+")";te(yn,/^\(.*\)$/.test(I(yn))?"("+ti+")":ti)}}break}}function oe(yn){switch(yn.type){case"ExportDefaultDeclaration":te({range:[yn.start,yn.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var An=yn.declaration,qn=yn.specifiers;if(An){var cr=An.declarations;cr&&(cr.forEach(function(Rr){te(Rr,"module.exports."+I(Rr))}),te({range:[yn.start,An.start+An.kind.length]},""))}else if(qn){var mr=qn.map(function(Rr){var Lr=I(Rr);return"module.exports."+Lr+" = "+Lr+"; "}).join("");mr&&te(yn,mr)}break}}function Ee(yn,An,qn){if(yn){for(var cr in yn)if(cr!=="range"&&cr!=="loc"){var mr=yn[cr];if(Array.isArray(mr))for(var Rr=0,Lr=mr.length;Rr<Lr;Rr++)Ee(mr[Rr],yn,qn);else mr&&typeof mr=="object"&&Ee(mr,yn,qn)}qn.operatorOverloading!==!1&&pe(yn,An),qn.moduleExports!==!1&&oe(yn)}}function $e(yn){var An="",qn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(yn=(Math.abs(yn)<<1)+(yn<0?1:0);yn||!An;){var cr=yn&31;yn>>=5,yn&&(cr|=32),An+=qn[cr]}return An}var Xe=ie.url||"",ft=ie.sourceMaps,Ze=ie.paperFeatures||{},yt=ie.source||Y,Et=ie.offset||0,Yt=ar.agent,qt=Yt.versionNumber,ln=!1,In=/\r\n|\n|\r/mg,Zn;if(ft&&(Yt.chrome&&qt>=30||Yt.webkit&&qt>=537.76||Yt.firefox&&qt>=23||Yt.node)){if(Yt.node)Et-=2;else if(s&&Xe&&!s.location.href.indexOf(Xe)){var Kn=c.getElementsByTagName("html")[0].innerHTML;Et=Kn.substr(0,Kn.indexOf(Y)+1).match(In).length+1}ln=Et>0&&!(Yt.chrome&&qt>=36||Yt.safari&&qt>=600||Yt.firefox&&qt>=40||Yt.node);var ur=["AA"+$e(ln?0:Et)+"A"];ur.length=(Y.match(In)||[]).length+1+(ln?Et:0),Zn={version:3,file:Xe,names:[],mappings:ur.join(";AACA"),sourceRoot:"",sources:[Xe],sourcesContent:[yt]}}return(Ze.operatorOverloading!==!1||Ze.moduleExports!==!1)&&Ee(d(Y,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,Ze),Zn&&(ln&&(Y=new Array(Et+1).join(`
`)+Y),/^(inline|both)$/.test(ft)&&(Y+=`
//# sourceMappingURL=data:application/json;base64,`+e.btoa(unescape(encodeURIComponent(JSON.stringify(Zn))))),Y+=`
//# sourceURL=`+(Xe||"paperscript")),{url:Xe,source:yt,code:Y,map:Zn}}function V(Y,ie,j){ar=ie;var X=ie.getView(),I=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(Y)&&!/\bnew\s+Tool\b/.test(Y)?new ea:null,G=I?I._events:[],te=["onFrame","onResize"].concat(G),pe=[],oe=[],Ee,$e=typeof Y=="object"?Y:F(Y,j);Y=$e.code;function Xe(qt,ln){for(var In in qt)(ln||!/^_/.test(In))&&new RegExp("([\\b\\s\\W]|^)"+In.replace(/\$/g,"\\$")+"\\b").test(Y)&&(pe.push(In),oe.push(qt[In]))}Xe({__$__:T,$__:P,paper:ie,tool:I},!0),Xe(ie),Y="var module = { exports: {} }; "+Y;var Et=u.each(te,function(qt){new RegExp("\\s+"+qt+"\\b").test(Y)&&(pe.push(qt),this.push("module.exports."+qt+" = "+qt+";"))},[]).join(`
`);Et&&(Y+=`
`+Et),Y+=`
return module.exports;`;var ft=ar.agent;if(c&&(ft.chrome||ft.firefox&&ft.versionNumber<40)){var Ze=c.createElement("script"),yt=c.head||c.getElementsByTagName("head")[0];ft.firefox&&(Y=`
`+Y),Ze.appendChild(c.createTextNode("document.__paperscript__ = function("+pe+") {"+Y+`
}`)),yt.appendChild(Ze),Ee=c.__paperscript__,delete c.__paperscript__,yt.removeChild(Ze)}else Ee=Function(pe,Y);var Et=Ee&&Ee.apply(ie,oe),Yt=Et||{};return u.each(G,function(qt){var ln=Yt[qt];ln&&(I[qt]=ln)}),X&&(Yt.onResize&&X.setOnResize(Yt.onResize),X.emit("resize",{size:X.size,delta:new re}),Yt.onFrame&&X.setOnFrame(Yt.onFrame),X.requestUpdate()),Et}function z(Y){if(/^text\/(?:x-|)paperscript$/.test(Y.type)&&b.getAttribute(Y,"ignore")!=="true"){var ie=b.getAttribute(Y,"canvas"),j=c.getElementById(ie),X=Y.src||Y.getAttribute("data-src"),I=b.hasAttribute(Y,"async"),G="data-paper-scope";if(!j)throw new Error('Unable to find canvas with id "'+ie+'"');var te=b.get(j.getAttribute(G))||new b().setup(j);return j.setAttribute(G,te._id),X?Ds.request({url:X,async:I,mimeType:"text/plain",onLoad:function(pe){V(pe,te,X)}}):V(Y.innerHTML,te,Y.baseURI),Y.setAttribute("data-paper-ignore","true"),te}}function R(){u.each(c&&c.getElementsByTagName("script"),z)}function J(Y){return Y?z(Y):R()}return s&&(c.readyState==="complete"?setTimeout(R):Fi.add(s,{load:R})),{compile:F,execute:V,load:J,parse:d,calculateBinary:T,calculateUnary:P}}).call(this);var ar=new(b.inject(u.exports,{Base:u,Numerical:Ae,Key:Uo,DomEvent:Fi,DomElement:Ti,document:c,window:s,Symbol:ei,PlacedSymbol:Mi}));return ar.agent.node&&Co(ar),typeof n=="function"&&n.amd?n("paper",ar):y&&(y.exports=ar),ar}).call(as,typeof self=="object"?self:null)})($u);var Mu=$u.exports;const Ha=Ss(Mu);class vh{constructor(){Ni(this,"_paperScope",new Ha.PaperScope),Ni(this,"_baseMaterial",null),Ni(this,"_borderMaterial",null);const e=document.createElement("canvas");e.width=1,e.height=1,this._paperScope.setup(new Ha.Size(1,1))}generatePreview3D(e,n){if(!e.columns||isNaN(e.columns)||e.columns<1||e.rows<1||!e.rows||isNaN(e.rows))throw new Error("Invalid columns or rows value. Columns and rows must be greater than 0 and must be a number.");console.log("Generating 3D preview for resizable canvas...",e),this._baseMaterial||(this._baseMaterial=new window.BABYLON.PBRMaterial("baseMaterial",n)),this._borderMaterial||(this._borderMaterial=new window.BABYLON.PBRMaterial("borderMaterial",n)),this._baseMaterial.albedoColor=new window.BABYLON.Color3(1,1,1),this._baseMaterial.metallic=0,this._baseMaterial.roughness=.5,this._borderMaterial.albedoColor=window.BABYLON.Color3.FromHexString(e.borderColor),this._borderMaterial.metallic=0,this._borderMaterial.roughness=.5,e.useCheckerTexture&&(this._baseMaterial.albedoTexture=new window.BABYLON.Texture("https://zakekecdn.blob.core.windows.net/cdn/Test/checker_texture.png",n),this._baseMaterial.albedoTexture.wrapU=window.BABYLON.Texture.CLAMP_ADDRESSMODE,this._baseMaterial.albedoTexture.wrapV=window.BABYLON.Texture.CLAMP_ADDRESSMODE,this._borderMaterial.albedoTexture=new window.BABYLON.Texture("https://zakekecdn.blob.core.windows.net/cdn/Test/checker_texture.png",n),this._borderMaterial.albedoTexture.wrapU=window.BABYLON.Texture.CLAMP_ADDRESSMODE,this._borderMaterial.albedoTexture.wrapV=window.BABYLON.Texture.CLAMP_ADDRESSMODE);const s=new window.BABYLON.Mesh("groupMesh",n),c=[],u=[],m=[];for(let Ae=0;Ae<e.columns;Ae++)for(let rt=0;rt<e.rows;rt++){const[re,mt,nt]=this.generateCanvasMesh(e,n,Ae,rt);c.push(re),u.push(mt),m.push(nt)}const b=window.BABYLON.Mesh.MergeMeshes(c,!0,!0,void 0,!1,!1),k=window.BABYLON.Mesh.MergeMeshes(u,!0,!0,void 0,!1,!1),W=window.BABYLON.Mesh.MergeMeshes(m,!0,!0,void 0,!1,!1);if(!b||!k||!W)return null;b.material=this._borderMaterial,k.material=this._baseMaterial,W.material=this._baseMaterial,b.parent=s,k.parent=s,W.parent=s,b.name="borders",k.name="back",W.name="front";const ve=window.BABYLON.SceneSerializer.SerializeMesh(s,!1,!0);return s==null||s.dispose(),ve}generateCanvasMesh(e,n,s,c){const u=e.width/e.columns,m=e.height/e.rows,b=u*.1,k=window.BABYLON.MeshBuilder.CreateBox("borders",{width:u,height:m,depth:e.depth},n),W=window.BABYLON.MeshBuilder.CreatePlane("front",{width:u,height:m},n),ve=window.BABYLON.MeshBuilder.CreatePlane("back",{width:u,height:m},n);k.position=new window.BABYLON.Vector3(u/2+s*(u+b),m/2+c*(m+b)),W.position=new window.BABYLON.Vector3(u/2+s*(u+b),m/2+c*(m+b),-e.depth/2),ve.position=new window.BABYLON.Vector3(u/2+s*(u+b),m/2+c*(m+b),e.depth/2),ve.rotate(window.BABYLON.Axis.X,Math.PI,window.BABYLON.Space.WORLD),ve.rotate(window.BABYLON.Axis.Z,Math.PI,window.BABYLON.Space.WORLD),k.material=this._borderMaterial,ve.material=this._borderMaterial,W.material=this._baseMaterial;const Ae=k.getVerticesData(window.BABYLON.VertexBuffer.NormalKind),rt=k.getVerticesData(window.BABYLON.VertexBuffer.UVKind),re=W.getVerticesData(window.BABYLON.VertexBuffer.UVKind),mt=ve.getVerticesData(window.BABYLON.VertexBuffer.UVKind);if(e.borderRadius>0&&console.warn("Mirror canvas effect will not work for border radius > 0"),e.borderRadius===0){const He=e.depth/e.width,_e=e.depth/e.height,Sr=Math.min(He,_e),On=u/e.width,Kr=m/e.height;for(var nt=0;nt<rt.length;nt+=2){const Mi=Math.round(Ae[nt/2*3]),ei=Math.round(Ae[nt/2*3+1]),oi=Math.round(Ae[nt/2*3+2]),xr=Mi==-1&&ei==0&&oi==0,Ts=Mi==1&&ei==0&&oi==0,Fn=Mi==0&&ei==1&&oi==0,si=Mi==0&&ei==-1&&oi==0;if(xr){var tn=rt[nt],Ie=rt[nt+1];rt[nt]=Ie*Sr+On*s,rt[nt+1]=tn*Kr+Kr*c}if(Ts){var tn=rt[nt],Ie=rt[nt+1];rt[nt]=Ie*Sr+(1-Sr)-On*(e.columns-1-s),rt[nt+1]=tn*Kr+Kr*c}if(si){var tn=rt[nt],Ie=rt[nt+1];rt[nt]=Ie*On+On*s,rt[nt+1]=tn*Sr+Kr*c}if(Fn){var tn=rt[nt],Ie=rt[nt+1];rt[nt]=(-Ie+1)*On+On*s,rt[nt+1]=(-tn+1)*Sr+(1-Sr)}}k.setVerticesData(window.BABYLON.VertexBuffer.UVKind,rt);for(var nt=0;nt<re.length;nt+=2){var tn=re[nt],Ie=re[nt+1];re[nt]=tn*On+On*s,re[nt+1]=Ie*Kr+Kr*c}W.setVerticesData(window.BABYLON.VertexBuffer.UVKind,re);for(var nt=0;nt<mt.length;nt+=2){var tn=mt[nt],Ie=mt[nt+1];mt[nt]=tn*On+On*(e.columns-1-s),mt[nt+1]=Ie*Kr+Kr*c}ve.setVerticesData(window.BABYLON.VertexBuffer.UVKind,mt)}W.isVisible=!1,ve.isVisible=!1;const Kt=k.getVerticesData(window.BABYLON.VertexBuffer.PositionKind)??[],At=k.getVerticesData(window.BABYLON.VertexBuffer.NormalKind)??[],an=k.getVerticesData(window.BABYLON.VertexBuffer.UVKind)??[],Cn=k.getIndices()??[];return Kt.splice(0,24),At.splice(0,24),an.splice(0,16),Cn.splice(Cn.length-12,12),k.updateVerticesData(window.BABYLON.VertexBuffer.PositionKind,Kt),k.updateVerticesData(window.BABYLON.VertexBuffer.NormalKind,At),k.updateVerticesData(window.BABYLON.VertexBuffer.UVKind,an),k.updateIndices(Cn),[k,ve,W]}}function mc(y,e){return function(){return y.apply(e,arguments)}}const{toString:Vc}=Object.prototype,{getPrototypeOf:Pu}=Object,Ou=(y=>e=>{const n=Vc.call(e);return y[n]||(y[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Jo=y=>(y=y.toLowerCase(),e=>Ou(e)===y),Ku=y=>e=>typeof e===y,{isArray:ca}=Array,Ql=Ku("undefined");function Jl(y){return y!==null&&!Ql(y)&&y.constructor!==null&&!Ql(y.constructor)&&Sl(y.constructor.isBuffer)&&y.constructor.isBuffer(y)}const qu=Jo("ArrayBuffer");function Xu(y){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(y):e=y&&y.buffer&&qu(y.buffer),e}const _h=Ku("string"),Sl=Ku("function"),wi=Ku("number"),Ja=y=>y!==null&&typeof y=="object",fu=y=>y===!0||y===!1,lo=y=>{if(Ou(y)!=="object")return!1;const e=Pu(y);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in y)&&!(Symbol.iterator in y)},cp=Jo("Date"),Td=Jo("File"),hp=Jo("Blob"),Hc=Jo("FileList"),vc=y=>Ja(y)&&Sl(y.pipe),_c=y=>{let e;return y&&(typeof FormData=="function"&&y instanceof FormData||Sl(y.append)&&((e=Ou(y))==="formdata"||e==="object"&&Sl(y.toString)&&y.toString()==="[object FormData]"))},yh=Jo("URLSearchParams"),ku=y=>y.trim?y.trim():y.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vo(y,e,{allOwnKeys:n=!1}={}){if(y===null||typeof y>"u")return;let s,c;if(typeof y!="object"&&(y=[y]),ca(y))for(s=0,c=y.length;s<c;s++)e.call(null,y[s],s,y);else{const u=n?Object.getOwnPropertyNames(y):Object.keys(y),m=u.length;let b;for(s=0;s<m;s++)b=u[s],e.call(null,y[b],b,y)}}function af(y,e){e=e.toLowerCase();const n=Object.keys(y);let s=n.length,c;for(;s-- >0;)if(c=n[s],e===c.toLowerCase())return c;return null}const Wc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Um,Gc=y=>!Ql(y)&&y!==Wc;function Iu(){const{caseless:y}=Gc(this)&&this||{},e={},n=(s,c)=>{const u=y&&af(e,c)||c;lo(e[u])&&lo(s)?e[u]=Iu(e[u],s):lo(s)?e[u]=Iu({},s):ca(s)?e[u]=s.slice():e[u]=s};for(let s=0,c=arguments.length;s<c;s++)arguments[s]&&Vo(arguments[s],n);return e}const wh=(y,e,n,{allOwnKeys:s}={})=>(Vo(e,(c,u)=>{n&&Sl(c)?y[u]=mc(c,n):y[u]=c},{allOwnKeys:s}),y),Vf=y=>(y.charCodeAt(0)===65279&&(y=y.slice(1)),y),Vs=(y,e,n,s)=>{y.prototype=Object.create(e.prototype,s),y.prototype.constructor=y,Object.defineProperty(y,"super",{value:e.prototype}),n&&Object.assign(y.prototype,n)},Lu=(y,e,n,s)=>{let c,u,m;const b={};if(e=e||{},y==null)return e;do{for(c=Object.getOwnPropertyNames(y),u=c.length;u-- >0;)m=c[u],(!s||s(m,y,e))&&!b[m]&&(e[m]=y[m],b[m]=!0);y=n!==!1&&Pu(y)}while(y&&(!n||n(y,e))&&y!==Object.prototype);return e},xh=(y,e,n)=>{y=String(y),(n===void 0||n>y.length)&&(n=y.length),n-=e.length;const s=y.indexOf(e,n);return s!==-1&&s===n},of=y=>{if(!y)return null;if(ca(y))return y;let e=y.length;if(!wi(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=y[e];return n},yc=(y=>e=>y&&e instanceof y)(typeof Uint8Array<"u"&&Pu(Uint8Array)),Cs=(y,e)=>{const n=(y&&y[Symbol.iterator]).call(y);let s;for(;(s=n.next())&&!s.done;){const c=s.value;e.call(y,c[0],c[1])}},Yc=(y,e)=>{let n;const s=[];for(;(n=y.exec(e))!==null;)s.push(n);return s},lf=Jo("HTMLFormElement"),wc=y=>y.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,s){return n.toUpperCase()+s}),hl=(({hasOwnProperty:y})=>(e,n)=>y.call(e,n))(Object.prototype),Fl=Jo("RegExp"),mo=(y,e)=>{const n=Object.getOwnPropertyDescriptors(y),s={};Vo(n,(c,u)=>{let m;(m=e(c,u,y))!==!1&&(s[u]=m||c)}),Object.defineProperties(y,s)},xc=y=>{mo(y,(e,n)=>{if(Sl(y)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=y[n];if(Sl(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},w=(y,e)=>{const n={},s=c=>{c.forEach(u=>{n[u]=!0})};return ca(y)?s(y):s(String(y).split(e)),n},ne=()=>{},it=(y,e)=>(y=+y,Number.isFinite(y)?y:e),kt="abcdefghijklmnopqrstuvwxyz",mn="0123456789",er={DIGIT:mn,ALPHA:kt,ALPHA_DIGIT:kt+kt.toUpperCase()+mn},gr=(y=16,e=er.ALPHA_DIGIT)=>{let n="";const{length:s}=e;for(;y--;)n+=e[Math.random()*s|0];return n};function ni(y){return!!(y&&Sl(y.append)&&y[Symbol.toStringTag]==="FormData"&&y[Symbol.iterator])}const li=y=>{const e=new Array(10),n=(s,c)=>{if(Ja(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[c]=s;const u=ca(s)?[]:{};return Vo(s,(m,b)=>{const k=n(m,c+1);!Ql(k)&&(u[b]=k)}),e[c]=void 0,u}}return s};return n(y,0)},os=Jo("AsyncFunction"),Xi=y=>y&&(Ja(y)||Sl(y))&&Sl(y.then)&&Sl(y.catch),Ar={isArray:ca,isArrayBuffer:qu,isBuffer:Jl,isFormData:_c,isArrayBufferView:Xu,isString:_h,isNumber:wi,isBoolean:fu,isObject:Ja,isPlainObject:lo,isUndefined:Ql,isDate:cp,isFile:Td,isBlob:hp,isRegExp:Fl,isFunction:Sl,isStream:vc,isURLSearchParams:yh,isTypedArray:yc,isFileList:Hc,forEach:Vo,merge:Iu,extend:wh,trim:ku,stripBOM:Vf,inherits:Vs,toFlatObject:Lu,kindOf:Ou,kindOfTest:Jo,endsWith:xh,toArray:of,forEachEntry:Cs,matchAll:Yc,isHTMLForm:lf,hasOwnProperty:hl,hasOwnProp:hl,reduceDescriptors:mo,freezeMethods:xc,toObjectSet:w,toCamelCase:wc,noop:ne,toFiniteNumber:it,findKey:af,global:Wc,isContextDefined:Gc,ALPHABET:er,generateString:gr,isSpecCompliantForm:ni,toJSONObject:li,isAsyncFn:os,isThenable:Xi};function ss(y,e,n,s,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=y,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),c&&(this.response=c)}Ar.inherits(ss,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ar.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Bu=ss.prototype,eu={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(y=>{eu[y]={value:y}}),Object.defineProperties(ss,eu),Object.defineProperty(Bu,"isAxiosError",{value:!0}),ss.from=(y,e,n,s,c,u)=>{const m=Object.create(Bu);return Ar.toFlatObject(y,m,function(b){return b!==Error.prototype},b=>b!=="isAxiosError"),ss.call(m,y.message,e,n,s,c),m.cause=y,m.name=y.name,u&&Object.assign(m,u),m};const uf=null;function du(y){return Ar.isPlainObject(y)||Ar.isArray(y)}function pu(y){return Ar.endsWith(y,"[]")?y.slice(0,-2):y}function Md(y,e,n){return y?y.concat(e).map(function(s,c){return s=pu(s),!n&&c?"["+s+"]":s}).join(n?".":""):e}function rg(y){return Ar.isArray(y)&&!y.some(du)}const Gi=Ar.toFlatObject(Ar,{},null,function(y){return/^is[A-Z]/.test(y)});function Yi(y,e,n){if(!Ar.isObject(y))throw new TypeError("target must be an object");e=e||new FormData,n=Ar.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(re,mt){return!Ar.isUndefined(mt[re])});const s=n.metaTokens,c=n.visitor||W,u=n.dots,m=n.indexes,b=(n.Blob||typeof Blob<"u"&&Blob)&&Ar.isSpecCompliantForm(e);if(!Ar.isFunction(c))throw new TypeError("visitor must be a function");function k(re){if(re===null)return"";if(Ar.isDate(re))return re.toISOString();if(!b&&Ar.isBlob(re))throw new ss("Blob is not supported. Use a Buffer instead.");return Ar.isArrayBuffer(re)||Ar.isTypedArray(re)?b&&typeof Blob=="function"?new Blob([re]):Buffer.from(re):re}function W(re,mt,nt){let tn=re;if(re&&!nt&&typeof re=="object"){if(Ar.endsWith(mt,"{}"))mt=s?mt:mt.slice(0,-2),re=JSON.stringify(re);else if(Ar.isArray(re)&&rg(re)||(Ar.isFileList(re)||Ar.endsWith(mt,"[]"))&&(tn=Ar.toArray(re)))return mt=pu(mt),tn.forEach(function(Ie,Kt){!(Ar.isUndefined(Ie)||Ie===null)&&e.append(m===!0?Md([mt],Kt,u):m===null?mt:mt+"[]",k(Ie))}),!1}return du(re)?!0:(e.append(Md(nt,mt,u),k(re)),!1)}const ve=[],Ae=Object.assign(Gi,{defaultVisitor:W,convertValue:k,isVisitable:du});function rt(re,mt){if(!Ar.isUndefined(re)){if(ve.indexOf(re)!==-1)throw Error("Circular reference detected in "+mt.join("."));ve.push(re),Ar.forEach(re,function(nt,tn){(!(Ar.isUndefined(nt)||nt===null)&&c.call(e,nt,Ar.isString(tn)?tn.trim():tn,mt,Ae))===!0&&rt(nt,mt?mt.concat(tn):[tn])}),ve.pop()}}if(!Ar.isObject(y))throw new TypeError("data must be an object");return rt(y),e}function Hf(y){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(y).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Pd(y,e){this._pairs=[],y&&Yi(y,this,e)}const Wf=Pd.prototype;Wf.append=function(y,e){this._pairs.push([y,e])},Wf.toString=function(y){const e=y?function(n){return y.call(this,n,Hf)}:Hf;return this._pairs.map(function(n){return e(n[0])+"="+e(n[1])},"").join("&")};function Od(y){return encodeURIComponent(y).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fp(y,e,n){if(!e)return y;const s=n&&n.encode||Od,c=n&&n.serialize;let u;if(c?u=c(e,n):u=Ar.isURLSearchParams(e)?e.toString():new Pd(e,n).toString(s),u){const m=y.indexOf("#");m!==-1&&(y=y.slice(0,m)),y+=(y.indexOf("?")===-1?"?":"&")+u}return y}class tu{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ar.forEach(this.handlers,function(n){n!==null&&e(n)})}}const bc=tu,kd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ls=typeof URLSearchParams<"u"?URLSearchParams:Pd,dp=typeof FormData<"u"?FormData:null,Ru=typeof Blob<"u"?Blob:null,Gf={isBrowser:!0,classes:{URLSearchParams:Ls,FormData:dp,Blob:Ru},protocols:["http","https","file","blob","url","data"]},Qu=typeof window<"u"&&typeof document<"u",La=(y=>Qu&&["ReactNative","NativeScript","NS"].indexOf(y)<0)(typeof navigator<"u"&&navigator.product),Id=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",pp=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Qu,hasStandardBrowserEnv:La,hasStandardBrowserWebWorkerEnv:Id},Symbol.toStringTag,{value:"Module"})),gu={...pp,...Gf};function gp(y,e){return Yi(y,new gu.classes.URLSearchParams,Object.assign({visitor:function(n,s,c,u){return gu.isNode&&Ar.isBuffer(n)?(this.append(s,n.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},e))}function Yf(y){return Ar.matchAll(/\w+|\[(\w*)]/g,y).map(e=>e[0]==="[]"?"":e[1]||e[0])}function mp(y){const e={},n=Object.keys(y);let s;const c=n.length;let u;for(s=0;s<c;s++)u=n[s],e[u]=y[u];return e}function Ba(y){function e(n,s,c,u){let m=n[u++];if(m==="__proto__")return!0;const b=Number.isFinite(+m),k=u>=n.length;return m=!m&&Ar.isArray(c)?c.length:m,k?(Ar.hasOwnProp(c,m)?c[m]=[c[m],s]:c[m]=s,!b):((!c[m]||!Ar.isObject(c[m]))&&(c[m]=[]),e(n,s,c[m],u)&&Ar.isArray(c[m])&&(c[m]=mp(c[m])),!b)}if(Ar.isFormData(y)&&Ar.isFunction(y.entries)){const n={};return Ar.forEachEntry(y,(s,c)=>{e(Yf(s),c,n,0)}),n}return null}function Yg(y,e,n){if(Ar.isString(y))try{return(e||JSON.parse)(y),Ar.trim(y)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(y)}const Wa={transitional:kd,adapter:["xhr","http"],transformRequest:[function(y,e){const n=e.getContentType()||"",s=n.indexOf("application/json")>-1,c=Ar.isObject(y);if(c&&Ar.isHTMLForm(y)&&(y=new FormData(y)),Ar.isFormData(y))return s?JSON.stringify(Ba(y)):y;if(Ar.isArrayBuffer(y)||Ar.isBuffer(y)||Ar.isStream(y)||Ar.isFile(y)||Ar.isBlob(y))return y;if(Ar.isArrayBufferView(y))return y.buffer;if(Ar.isURLSearchParams(y))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),y.toString();let u;if(c){if(n.indexOf("application/x-www-form-urlencoded")>-1)return gp(y,this.formSerializer).toString();if((u=Ar.isFileList(y))||n.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Yi(u?{"files[]":y}:y,m&&new m,this.formSerializer)}}return c||s?(e.setContentType("application/json",!1),Yg(y)):y}],transformResponse:[function(y){const e=this.transitional||Wa.transitional,n=e&&e.forcedJSONParsing,s=this.responseType==="json";if(y&&Ar.isString(y)&&(n&&!this.responseType||s)){const c=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(y)}catch(u){if(c)throw u.name==="SyntaxError"?ss.from(u,ss.ERR_BAD_RESPONSE,this,null,this.response):u}}return y}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gu.classes.FormData,Blob:gu.classes.Blob},validateStatus:function(y){return y>=200&&y<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ar.forEach(["delete","get","head","post","put","patch"],y=>{Wa.headers[y]={}});const vp=Wa,Ld=Ar.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Cl=y=>{const e={};let n,s,c;return y&&y.split(`
`).forEach(function(u){c=u.indexOf(":"),n=u.substring(0,c).trim().toLowerCase(),s=u.substring(c+1).trim(),!(!n||e[n]&&Ld[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},Zc=Symbol("internals");function Sc(y){return y&&String(y).trim().toLowerCase()}function ts(y){return y===!1||y==null?y:Ar.isArray(y)?y.map(ts):String(y)}function el(y){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(y);)e[s[1]]=s[2];return e}const Zf=y=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(y.trim());function _p(y,e,n,s,c){if(Ar.isFunction(s))return s.call(this,e,n);if(c&&(e=n),!!Ar.isString(e)){if(Ar.isString(s))return e.indexOf(s)!==-1;if(Ar.isRegExp(s))return s.test(e)}}function $f(y){return y.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function ig(y,e){const n=Ar.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(y,s+n,{value:function(c,u,m){return this[s].call(this,e,c,u,m)},configurable:!0})})}class Bd{constructor(e){e&&this.set(e)}set(e,n,s){const c=this;function u(b,k,W){const ve=Sc(k);if(!ve)throw new Error("header name must be a non-empty string");const Ae=Ar.findKey(c,ve);(!Ae||c[Ae]===void 0||W===!0||W===void 0&&c[Ae]!==!1)&&(c[Ae||k]=ts(b))}const m=(b,k)=>Ar.forEach(b,(W,ve)=>u(W,ve,k));return Ar.isPlainObject(e)||e instanceof this.constructor?m(e,n):Ar.isString(e)&&(e=e.trim())&&!Zf(e)?m(Cl(e),n):e!=null&&u(n,e,s),this}get(e,n){if(e=Sc(e),e){const s=Ar.findKey(this,e);if(s){const c=this[s];if(!n)return c;if(n===!0)return el(c);if(Ar.isFunction(n))return n.call(this,c,s);if(Ar.isRegExp(n))return n.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Sc(e),e){const s=Ar.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||_p(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let c=!1;function u(m){if(m=Sc(m),m){const b=Ar.findKey(s,m);b&&(!n||_p(s,s[b],b,n))&&(delete s[b],c=!0)}}return Ar.isArray(e)?e.forEach(u):u(e),c}clear(e){const n=Object.keys(this);let s=n.length,c=!1;for(;s--;){const u=n[s];(!e||_p(this,this[u],u,e,!0))&&(delete this[u],c=!0)}return c}normalize(e){const n=this,s={};return Ar.forEach(this,(c,u)=>{const m=Ar.findKey(s,u);if(m){n[m]=ts(c),delete n[u];return}const b=e?$f(u):String(u).trim();b!==u&&delete n[u],n[b]=ts(c),s[b]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ar.forEach(this,(s,c)=>{s!=null&&s!==!1&&(n[c]=e&&Ar.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(c=>s.set(c)),s}static accessor(e){const n=(this[Zc]=this[Zc]={accessors:{}}).accessors,s=this.prototype;function c(u){const m=Sc(u);n[m]||(ig(s,u),n[m]=!0)}return Ar.isArray(e)?e.forEach(c):c(e),this}}Bd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ar.reduceDescriptors(Bd.prototype,({value:y},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>y,set(s){this[n]=s}}}),Ar.freezeMethods(Bd);const Cc=Bd;function Kf(y,e){const n=this||vp,s=e||n,c=Cc.from(s.headers);let u=s.data;return Ar.forEach(y,function(m){u=m.call(n,u,c.normalize(),e?e.status:void 0)}),c.normalize(),u}function $c(y){return!!(y&&y.__CANCEL__)}function Dl(y,e,n){ss.call(this,y??"canceled",ss.ERR_CANCELED,e,n),this.name="CanceledError"}Ar.inherits(Dl,ss,{__CANCEL__:!0});function Zg(y,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?y(n):e(new ss("Request failed with status code "+n.status,[ss.ERR_BAD_REQUEST,ss.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const yp=gu.hasStandardBrowserEnv?{write(y,e,n,s,c,u){const m=[y+"="+encodeURIComponent(e)];Ar.isNumber(n)&&m.push("expires="+new Date(n).toGMTString()),Ar.isString(s)&&m.push("path="+s),Ar.isString(c)&&m.push("domain="+c),u===!0&&m.push("secure"),document.cookie=m.join("; ")},read(y){const e=document.cookie.match(new RegExp("(^|;\\s*)("+y+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(y){this.write(y,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function qf(y){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(y)}function Dc(y,e){return e?y.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):y}function cf(y,e){return y&&!qf(e)?Dc(y,e):e}const Rd=gu.hasStandardBrowserEnv?function(){const y=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function s(c){let u=c;return y&&(e.setAttribute("href",u),u=e.href),e.setAttribute("href",u),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=s(window.location.href),function(c){const u=Ar.isString(c)?s(c):c;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}();function sg(y){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(y);return e&&e[1]||""}function hf(y,e){y=y||10;const n=new Array(y),s=new Array(y);let c=0,u=0,m;return e=e!==void 0?e:1e3,function(b){const k=Date.now(),W=s[u];m||(m=k),n[c]=b,s[c]=k;let ve=u,Ae=0;for(;ve!==c;)Ae+=n[ve++],ve=ve%y;if(c=(c+1)%y,c===u&&(u=(u+1)%y),k-m<e)return;const rt=W&&k-W;return rt?Math.round(Ae*1e3/rt):void 0}}function bh(y,e){let n=0;const s=hf(50,250);return c=>{const u=c.loaded,m=c.lengthComputable?c.total:void 0,b=u-n,k=s(b),W=u<=m;n=u;const ve={loaded:u,total:m,progress:m?u/m:void 0,bytes:b,rate:k||void 0,estimated:k&&m&&W?(m-u)/k:void 0,event:c};ve[e?"download":"upload"]=!0,y(ve)}}const ag=typeof XMLHttpRequest<"u",Kc=ag&&function(y){return new Promise(function(e,n){let s=y.data;const c=Cc.from(y.headers).normalize();let{responseType:u,withXSRFToken:m}=y,b;function k(){y.cancelToken&&y.cancelToken.unsubscribe(b),y.signal&&y.signal.removeEventListener("abort",b)}let W;if(Ar.isFormData(s)){if(gu.hasStandardBrowserEnv||gu.hasStandardBrowserWebWorkerEnv)c.setContentType(!1);else if((W=c.getContentType())!==!1){const[mt,...nt]=W?W.split(";").map(tn=>tn.trim()).filter(Boolean):[];c.setContentType([mt||"multipart/form-data",...nt].join("; "))}}let ve=new XMLHttpRequest;if(y.auth){const mt=y.auth.username||"",nt=y.auth.password?unescape(encodeURIComponent(y.auth.password)):"";c.set("Authorization","Basic "+btoa(mt+":"+nt))}const Ae=cf(y.baseURL,y.url);ve.open(y.method.toUpperCase(),fp(Ae,y.params,y.paramsSerializer),!0),ve.timeout=y.timeout;function rt(){if(!ve)return;const mt=Cc.from("getAllResponseHeaders"in ve&&ve.getAllResponseHeaders()),nt={data:!u||u==="text"||u==="json"?ve.responseText:ve.response,status:ve.status,statusText:ve.statusText,headers:mt,config:y,request:ve};Zg(function(tn){e(tn),k()},function(tn){n(tn),k()},nt),ve=null}if("onloadend"in ve?ve.onloadend=rt:ve.onreadystatechange=function(){!ve||ve.readyState!==4||ve.status===0&&!(ve.responseURL&&ve.responseURL.indexOf("file:")===0)||setTimeout(rt)},ve.onabort=function(){ve&&(n(new ss("Request aborted",ss.ECONNABORTED,y,ve)),ve=null)},ve.onerror=function(){n(new ss("Network Error",ss.ERR_NETWORK,y,ve)),ve=null},ve.ontimeout=function(){let mt=y.timeout?"timeout of "+y.timeout+"ms exceeded":"timeout exceeded";const nt=y.transitional||kd;y.timeoutErrorMessage&&(mt=y.timeoutErrorMessage),n(new ss(mt,nt.clarifyTimeoutError?ss.ETIMEDOUT:ss.ECONNABORTED,y,ve)),ve=null},gu.hasStandardBrowserEnv&&(m&&Ar.isFunction(m)&&(m=m(y)),m||m!==!1&&Rd(Ae))){const mt=y.xsrfHeaderName&&y.xsrfCookieName&&yp.read(y.xsrfCookieName);mt&&c.set(y.xsrfHeaderName,mt)}s===void 0&&c.setContentType(null),"setRequestHeader"in ve&&Ar.forEach(c.toJSON(),function(mt,nt){ve.setRequestHeader(nt,mt)}),Ar.isUndefined(y.withCredentials)||(ve.withCredentials=!!y.withCredentials),u&&u!=="json"&&(ve.responseType=y.responseType),typeof y.onDownloadProgress=="function"&&ve.addEventListener("progress",bh(y.onDownloadProgress,!0)),typeof y.onUploadProgress=="function"&&ve.upload&&ve.upload.addEventListener("progress",bh(y.onUploadProgress)),(y.cancelToken||y.signal)&&(b=mt=>{ve&&(n(!mt||mt.type?new Dl(null,y,ve):mt),ve.abort(),ve=null)},y.cancelToken&&y.cancelToken.subscribe(b),y.signal&&(y.signal.aborted?b():y.signal.addEventListener("abort",b)));const re=sg(Ae);if(re&&gu.protocols.indexOf(re)===-1){n(new ss("Unsupported protocol "+re+":",ss.ERR_BAD_REQUEST,y));return}ve.send(s||null)})},Aa={http:uf,xhr:Kc};Ar.forEach(Aa,(y,e)=>{if(y){try{Object.defineProperty(y,"name",{value:e})}catch{}Object.defineProperty(y,"adapterName",{value:e})}});const ff=y=>`- ${y}`,Ac=y=>Ar.isFunction(y)||y===null||y===!1,Xf={getAdapter:y=>{y=Ar.isArray(y)?y:[y];const{length:e}=y;let n,s;const c={};for(let u=0;u<e;u++){n=y[u];let m;if(s=n,!Ac(n)&&(s=Aa[(m=String(n)).toLowerCase()],s===void 0))throw new ss(`Unknown adapter '${m}'`);if(s)break;c[m||"#"+u]=s}if(!s){const u=Object.entries(c).map(([b,k])=>`adapter ${b} `+(k===!1?"is not supported by the environment":"is not available in the build"));let m=e?u.length>1?`since :
`+u.map(ff).join(`
`):" "+ff(u[0]):"as no adapter specified";throw new ss("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return s},adapters:Aa};function df(y){if(y.cancelToken&&y.cancelToken.throwIfRequested(),y.signal&&y.signal.aborted)throw new Dl(null,y)}function pf(y){return df(y),y.headers=Cc.from(y.headers),y.data=Kf.call(y,y.transformRequest),["post","put","patch"].indexOf(y.method)!==-1&&y.headers.setContentType("application/x-www-form-urlencoded",!1),Xf.getAdapter(y.adapter||vp.adapter)(y).then(function(e){return df(y),e.data=Kf.call(y,y.transformResponse,e),e.headers=Cc.from(e.headers),e},function(e){return $c(e)||(df(y),e&&e.response&&(e.response.data=Kf.call(y,y.transformResponse,e.response),e.response.headers=Cc.from(e.response.headers))),Promise.reject(e)})}const gf=y=>y instanceof Cc?{...y}:y;function mf(y,e){e=e||{};const n={};function s(W,ve,Ae){return Ar.isPlainObject(W)&&Ar.isPlainObject(ve)?Ar.merge.call({caseless:Ae},W,ve):Ar.isPlainObject(ve)?Ar.merge({},ve):Ar.isArray(ve)?ve.slice():ve}function c(W,ve,Ae){if(Ar.isUndefined(ve)){if(!Ar.isUndefined(W))return s(void 0,W,Ae)}else return s(W,ve,Ae)}function u(W,ve){if(!Ar.isUndefined(ve))return s(void 0,ve)}function m(W,ve){if(Ar.isUndefined(ve)){if(!Ar.isUndefined(W))return s(void 0,W)}else return s(void 0,ve)}function b(W,ve,Ae){if(Ae in e)return s(W,ve);if(Ae in y)return s(void 0,W)}const k={url:u,method:u,data:u,baseURL:m,transformRequest:m,transformResponse:m,paramsSerializer:m,timeout:m,timeoutMessage:m,withCredentials:m,withXSRFToken:m,adapter:m,responseType:m,xsrfCookieName:m,xsrfHeaderName:m,onUploadProgress:m,onDownloadProgress:m,decompress:m,maxContentLength:m,maxBodyLength:m,beforeRedirect:m,transport:m,httpAgent:m,httpsAgent:m,cancelToken:m,socketPath:m,responseEncoding:m,validateStatus:b,headers:(W,ve)=>c(gf(W),gf(ve),!0)};return Ar.forEach(Object.keys(Object.assign({},y,e)),function(W){const ve=k[W]||c,Ae=ve(y[W],e[W],W);Ar.isUndefined(Ae)&&ve!==b||(n[W]=Ae)}),n}const Qf="1.6.8",wp={};["object","boolean","number","function","string","symbol"].forEach((y,e)=>{wp[y]=function(n){return typeof n===y||"a"+(e<1?"n ":" ")+y}});const nu={};wp.transitional=function(y,e,n){function s(c,u){return"[Axios v"+Qf+"] Transitional option '"+c+"'"+u+(n?". "+n:"")}return(c,u,m)=>{if(y===!1)throw new ss(s(u," has been removed"+(e?" in "+e:"")),ss.ERR_DEPRECATED);return e&&!nu[u]&&(nu[u]=!0,console.warn(s(u," has been deprecated since v"+e+" and will be removed in the near future"))),y?y(c,u,m):!0}};function xp(y,e,n){if(typeof y!="object")throw new ss("options must be an object",ss.ERR_BAD_OPTION_VALUE);const s=Object.keys(y);let c=s.length;for(;c-- >0;){const u=s[c],m=e[u];if(m){const b=y[u],k=b===void 0||m(b,u,y);if(k!==!0)throw new ss("option "+u+" must be "+k,ss.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ss("Unknown option "+u,ss.ERR_BAD_OPTION)}}const Jf={assertOptions:xp,validators:wp},ru=Jf.validators;class Sh{constructor(e){this.defaults=e,this.interceptors={request:new bc,response:new bc}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let c;Error.captureStackTrace?Error.captureStackTrace(c={}):c=new Error;const u=c.stack?c.stack.replace(/^.+\n/,""):"";s.stack?u&&!String(s.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+u):s.stack=u}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=mf(this.defaults,n);const{transitional:s,paramsSerializer:c,headers:u}=n;s!==void 0&&Jf.assertOptions(s,{silentJSONParsing:ru.transitional(ru.boolean),forcedJSONParsing:ru.transitional(ru.boolean),clarifyTimeoutError:ru.transitional(ru.boolean)},!1),c!=null&&(Ar.isFunction(c)?n.paramsSerializer={serialize:c}:Jf.assertOptions(c,{encode:ru.function,serialize:ru.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let m=u&&Ar.merge(u.common,u[n.method]);u&&Ar.forEach(["delete","get","head","post","put","patch","common"],mt=>{delete u[mt]}),n.headers=Cc.concat(m,u);const b=[];let k=!0;this.interceptors.request.forEach(function(mt){typeof mt.runWhen=="function"&&mt.runWhen(n)===!1||(k=k&&mt.synchronous,b.unshift(mt.fulfilled,mt.rejected))});const W=[];this.interceptors.response.forEach(function(mt){W.push(mt.fulfilled,mt.rejected)});let ve,Ae=0,rt;if(!k){const mt=[pf.bind(this),void 0];for(mt.unshift.apply(mt,b),mt.push.apply(mt,W),rt=mt.length,ve=Promise.resolve(n);Ae<rt;)ve=ve.then(mt[Ae++],mt[Ae++]);return ve}rt=b.length;let re=n;for(Ae=0;Ae<rt;){const mt=b[Ae++],nt=b[Ae++];try{re=mt(re)}catch(tn){nt.call(this,tn);break}}try{ve=pf.call(this,re)}catch(mt){return Promise.reject(mt)}for(Ae=0,rt=W.length;Ae<rt;)ve=ve.then(W[Ae++],W[Ae++]);return ve}getUri(e){e=mf(this.defaults,e);const n=cf(e.baseURL,e.url);return fp(n,e.params,e.paramsSerializer)}}Ar.forEach(["delete","get","head","options"],function(y){Sh.prototype[y]=function(e,n){return this.request(mf(n||{},{method:y,url:e,data:(n||{}).data}))}}),Ar.forEach(["post","put","patch"],function(y){function e(n){return function(s,c,u){return this.request(mf(u||{},{method:y,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:c}))}}Sh.prototype[y]=e(),Sh.prototype[y+"Form"]=e(!0)});const Ro=Sh;class Ec{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const s=this;this.promise.then(c=>{if(!s._listeners)return;let u=s._listeners.length;for(;u-- >0;)s._listeners[u](c);s._listeners=null}),this.promise.then=c=>{let u;const m=new Promise(b=>{s.subscribe(b),u=b}).then(c);return m.cancel=function(){s.unsubscribe(u)},m},e(function(c,u,m){s.reason||(s.reason=new Dl(c,u,m),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Ec(function(n){e=n}),cancel:e}}}const $g=Ec;function Kg(y){return function(e){return y.apply(null,e)}}function qg(y){return Ar.isObject(y)&&y.isAxiosError===!0}const iu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(iu).forEach(([y,e])=>{iu[e]=y});const sa=iu;function qc(y){const e=new Ro(y),n=mc(Ro.prototype.request,e);return Ar.extend(n,Ro.prototype,e,{allOwnKeys:!0}),Ar.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return qc(mf(y,s))},n}const vo=qc(vp);vo.Axios=Ro,vo.CanceledError=Dl,vo.CancelToken=$g,vo.isCancel=$c,vo.VERSION=Qf,vo.toFormData=Yi,vo.AxiosError=ss,vo.Cancel=vo.CanceledError,vo.all=function(y){return Promise.all(y)},vo.spread=Kg,vo.isAxiosError=qg,vo.mergeConfig=mf,vo.AxiosHeaders=Cc,vo.formToJSON=y=>Ba(Ar.isHTMLForm(y)?new FormData(y):y),vo.getAdapter=Xf.getAdapter,vo.HttpStatusCode=sa,vo.default=vo;const bp=vo;var vf=globalThis&&globalThis.__awaiter||function(y,e,n,s){function c(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function b(ve){try{W(s.next(ve))}catch(Ae){m(Ae)}}function k(ve){try{W(s.throw(ve))}catch(Ae){m(Ae)}}function W(ve){ve.done?u(ve.value):c(ve.value).then(b,k)}W((s=s.apply(y,e||[])).next())})},_f=globalThis&&globalThis.__generator||function(y,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,c,u,m;return m={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function b(W){return function(ve){return k([W,ve])}}function k(W){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,c&&(u=W[0]&2?c.return:W[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,W[1])).done)return u;switch(c=0,u&&(W=[W[0]&2,u.value]),W[0]){case 0:case 1:u=W;break;case 4:return n.label++,{value:W[1],done:!1};case 5:n.label++,c=W[1],W=[0];continue;case 7:W=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(W[0]===6||W[0]===2)){n=0;continue}if(W[0]===3&&(!u||W[1]>u[0]&&W[1]<u[3])){n.label=W[1];break}if(W[0]===6&&n.label<u[1]){n.label=u[1],u=W;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(W);break}u[2]&&n.ops.pop(),n.trys.pop();continue}W=e.call(y,n)}catch(ve){W=[6,ve],c=0}finally{s=u=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}},Nd=function(){function y(e,n,s){var c=this;s===void 0&&(s=!0),this.tasksUrl=e,this.token=n,this.upload=function(u,m){return vf(c,void 0,void 0,function(){return _f(this,function(b){switch(b.label){case 0:return[4,this.uploadFileChunked(u,u.type,Zakeke.generateUUID(),m)];case 1:return[2,b.sent()]}})})},this.uploadFileChunked=function(u,m,b,k,W){return vf(c,void 0,void 0,function(){var ve,Ae,rt;return _f(this,function(re){switch(re.label){case 0:return[4,this.resumableUpload(u,m,b,W)];case 1:return ve=re.sent(),ve!=="OK"?[3,5]:[4,this.createTask(b,k)];case 2:return Ae=re.sent(),Ae===-1?[3,4]:[4,this.getResultFromTask(Ae)];case 3:return rt=re.sent(),rt?[2,rt.files]:[3,5];case 4:throw"Upload failed";case 5:return[2,null]}})})},this.resumableUpload=function(u,m,b,k){return vf(c,void 0,void 0,function(){var W=this;return _f(this,function(ve){return[2,new Promise(function(Ae,rt){var re=new Resumable({target:Zakeke.config.baseApiUrl+"filechunks/upload",generateUniqueIdentifier:function(){return b},maxFiles:1,testChunks:!1,headers:W.headers,query:{resumableType:m},simultaneousUploads:3});re.addFile(u),re.on("fileError",function(mt,nt){Ae("KO"),console.error("fileError",mt,nt)}),re.on("error",function(mt,nt){Ae("KO"),console.error("error",mt,nt)}),re.on("progress",function(){var mt=re.progress()*100;k&&k(mt)}),re.on("fileAdded",function(mt,nt){re.upload()}),re.on("complete",function(){Ae("OK")})})]})})},this.createTask=function(u,m){return vf(c,void 0,void 0,function(){var b,k;return _f(this,function(W){switch(W.label){case 0:return b={fileID:u,options:m},[4,bp.post(Zakeke.config.baseApiUrl+this.tasksUrl,b,{headers:this.headers})];case 1:return k=W.sent(),[2,k?k.data.taskID:-1]}})})},this.getResultFromTask=function(u){return vf(c,void 0,void 0,function(){var m,b;return _f(this,function(k){switch(k.label){case 0:m=0,k.label=1;case 1:return k.trys.push([1,3,,4]),[4,bp.get(Zakeke.config.baseApiUrl+this.tasksUrl+"/results/"+u,{headers:this.headers})];case 2:return b=k.sent(),b&&b.data.state===2?[2,b.data]:b&&b.data.state===3?[2,null]:[3,4];case 3:return k.sent(),[2,null];case 4:return m++,m>100?[2,null]:[4,new Promise(function(W){return setTimeout(W,1e3)})];case 5:k.sent(),k.label=6;case 6:return[3,1];case 7:return[2]}})})},s?this.headers={Authorization:"Bearer "+this.token,"Accept-Language":"en-US"}:this.headers={"X-Auth-Token":this.token,"Accept-Language":"en-US"}}return y}();class Ii{}Ii.Environment={EnvironmentTextureName:"environmentSpecular_0af79b7524dc4cd4825eae49c5d9e22fae220fd.env",GroundTextureCDNUrl:"https://cdn.zakeke.com/cdn/3d/assets/environments/backgroundGround9.png",SkyboxTextureCDNUrl:"https://cdn.zakeke.com/cdn/3d/assets/environments/backgroundSkybox.dds",EnvironmentTextureCDNUrl:"https://zakekecdn.blob.core.windows.net/cdn/3d/assets/environments/environmentSpecular_0af79b7524dc4cd4825eae49c5d9e22fae220fd.env"},Ii.TryonReferences={RootUrl:"https://cdn.zakeke.com/cdn/3d/assets/tryon/references/",ReferenceGlassesFrameName:"Reference Glasses Frame",ReferenceGlassesFrameFileName:"Reference_Glasses_Frame_001.json",EyewearName:"glasses_VTO_Reference",EyewearURL:"Eyewear_VTO_Reference.babylon",EyewearDownloadableURL:"Eyewear_VTO_Reference.glb",ScarvesName:"scarves_VTO_Reference",ScarvesURL:"Scarves_VTO_Reference.babylon",ScarvesDownloadableURL:"Scarves_VTO_Reference.glb",EarringsName:"earrings_VTO_Reference",EarringsURL:"Earrings_VTO_Reference.babylon",EarringsDownloadableURL:"Earrings_VTO_Reference.glb",HeadwearName:"headwear_VTO_Reference",HeadwearURL:"Headwear_VTO_Reference.babylon",HeadwearDownloadableURL:"Headwear_VTO_Reference.glb",NecklaceName:"necklace_VTO_Reference",NecklaceURL:"Necklace_VTO_Reference.babylon",NecklaceDownloadableURL:"Necklace_VTO_Reference.glb",ShoeName:"foot_VTO_Reference",ShoeURL:"Foot_VTO_Reference.babylon",ShoeDownloadableURL:"Foot_VTO_Reference.glb"},Ii.Shapes={RootUrl:"https://cdn.zakeke.com/cdn/3d/assets/shapes/",RoundedCubeName:"Rounded Cube",RoundedCubeFileName:"rounded_cube.babylon",RoundedCylinderName:"Rounded Cylinder",RoundedCylinderFileName:"rounded_cylinder.babylon",MatBallName:"Mat Ball",MatBallFileName:"mat_ball.babylon",MaleHeadName:"Group48944",MaleHeadFileName:"DemoHead.babylon",FemaleHeadName:"Group12208",FemaleHeadFileName:"FemaleHead.babylon",PokemonBallName:"PokemonBall",PokemonBallFileName:"PokemonBall.babylon",ShaderBallName:"Elements",ShaderBallFileName:"ShaderBall.babylon",BootsFolder:"boots/",BootsName:"shoe",BootsFileName:"boots.incremental.babylon",SuzanneName:"Suzanne",SuzanneFileName:"suzanne.babylon",StepPyramidName:"Pyramid",StepPyramidFileName:"step-pyramid.babylon",TeapotName:"Teapot",TeapotFileName:"teapot.babylon",AlloyWheelName:"Wheel",AlloyWheelFolder:"alloy_wheel/",AlloyWheelFileName:"alloy_wheel.incremental.babylon"};class Xt{static EndsWith(e,n){return e.indexOf(n,e.length-n.length)!==-1}static StartsWith(e,n){return e.indexOf(n)===0}static Decode(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let s=0;s<e.byteLength;s++)n+=String.fromCharCode(e[s]);return n}static EncodeArrayBufferToBase64(e){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="",c,u,m,b,k,W,ve,Ae=0,rt=ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e);Ae<rt.length;)c=rt[Ae++],u=Ae<rt.length?rt[Ae++]:Number.NaN,m=Ae<rt.length?rt[Ae++]:Number.NaN,b=c>>2,k=(c&3)<<4|u>>4,W=(u&15)<<2|m>>6,ve=m&63,isNaN(u)?W=ve=64:isNaN(m)&&(ve=64),s+=n.charAt(b)+n.charAt(k)+n.charAt(W)+n.charAt(ve);return s}}class Dn{constructor(){this._mesh=null,this._scene=null,this._facesOfVertices=null,this._meshVerticesPositions=null,this._meshVerticesNormals=null,this._meshIndices=null,this._meshPositions=null,this._meshFacesNormals=null,this._sharedFacesOfVertices={}}dispose(){}resetDataModel(){this._facesOfVertices=null,this._meshVerticesPositions=null,this._meshVerticesNormals=null,this._meshIndices=null,this._meshPositions=null,this._meshFacesNormals=null,this._sharedFacesOfVertices={}}prepareDataModel(){if(this.resetDataModel(),this._mesh&&this._scene&&(this._facesOfVertices=[],this._sharedFacesOfVertices={},this._meshVerticesPositions=this._mesh.getVerticesData(window.BABYLON.VertexBuffer.PositionKind),this._meshVerticesNormals=this._mesh.getVerticesData(window.BABYLON.VertexBuffer.NormalKind),this._meshIndices=this._mesh.getIndices(),this._meshPositions=[],this._meshFacesNormals=[],this._meshVerticesPositions&&this._meshVerticesNormals&&this._meshIndices)){for(let e=0;e<this._meshVerticesPositions.length;e+=3)this._meshPositions.push(new window.BABYLON.Vector3(this._meshVerticesPositions[e],this._meshVerticesPositions[e+1],this._meshVerticesPositions[e+2]));for(let e=0;e<this._mesh.getTotalIndices()/3;e++)this._computeFaceNormal(e);this._getFacesOfVertices()}}_getFaceVerticesIndex(e){return this._meshIndices?{v1:this._meshIndices[e*3],v2:this._meshIndices[e*3+1],v3:this._meshIndices[e*3+2]}:null}_computeFaceNormal(e){if(this._meshPositions&&this._meshIndices&&this._meshFacesNormals){const n=this._getFaceVerticesIndex(e);if(n){const s=this._meshPositions[n.v1].subtract(this._meshPositions[n.v2]),c=this._meshPositions[n.v3].subtract(this._meshPositions[n.v2]);this._meshFacesNormals[e]=window.BABYLON.Vector3.Normalize(window.BABYLON.Vector3.Cross(s,c))}}}_getPositionKey(e){return`${e.x}_${e.y}_${e.z}`}_getFacesOfVertices(){if(this._mesh&&this._meshPositions&&this._meshIndices){this._sharedFacesOfVertices={},this._facesOfVertices=[];for(let e=0;e<this._meshPositions.length;e++){this._facesOfVertices[e]=[];const n=this._meshPositions[e],s=this._getPositionKey(n);this._sharedFacesOfVertices.hasOwnProperty(s)||(this._sharedFacesOfVertices[s]=new Set)}for(let e=0;e<this._meshIndices.length;e++){const n=this._meshIndices[e],s=e/3|0;this._facesOfVertices[n].push(s);const c=this._meshPositions[n],u=this._getPositionKey(c);this._sharedFacesOfVertices.hasOwnProperty(u)&&this._sharedFacesOfVertices[u].add(s)}}}expandMesh(e,n=.01){if(e instanceof window.BABYLON.Mesh&&(this._mesh=e,this._scene=e.getScene(),this.prepareDataModel(),this._meshPositions&&this._meshVerticesPositions&&this._meshVerticesNormals)){for(let s=0;s<this._meshPositions.length;s++){const c=this._meshPositions[s],u=this._getVertexComputedNormal(s);if(u){const m=u.scale(n);c.addInPlace(m),this._meshVerticesPositions[s*3]=c.x,this._meshVerticesPositions[s*3+1]=c.y,this._meshVerticesPositions[s*3+2]=c.z}}this._mesh.markVerticesDataAsUpdatable(window.BABYLON.VertexBuffer.PositionKind,!0),this._mesh.updateVerticesData(window.BABYLON.VertexBuffer.PositionKind,this._meshVerticesPositions),this._mesh.computeWorldMatrix(!0)}}_reComputeNormals(){const e=[];if(this._meshPositions&&this._facesOfVertices){for(let s=0;s<this._meshPositions.length;s++){const c=this._facesOfVertices[s];for(let u=0;u<c.length;u++)e[c[u]]=!0}let n;for(n in e)this._computeFaceNormal(n);for(n in e){const s=this._getFaceVerticesIndex(n);s&&(this._computeNormal(s.v1),this._computeNormal(s.v2),this._computeNormal(s.v3))}}}_getVertexComputedNormal(e){let n=null;if(this._meshPositions&&this._meshFacesNormals){const s=this._meshPositions,c=this._meshFacesNormals,u=s[e],m=this._getPositionKey(u);if(this._sharedFacesOfVertices.hasOwnProperty(m)){const b=this._sharedFacesOfVertices[m];n=window.BABYLON.Vector3.Zero(),b.forEach(k=>{const W=c[k];n&&W&&(n=n.add(W))}),n=window.BABYLON.Vector3.Normalize(n.scale(1/b.size))}}return n}_computeNormal(e){const n=this._getVertexComputedNormal(e);n&&this._meshVerticesNormals&&(this._meshVerticesNormals[e*3]=n.x,this._meshVerticesNormals[e*3+1]=n.y,this._meshVerticesNormals[e*3+2]=n.z)}}class vn{static async convertGlbToUsdz(e){return new Promise((n,s)=>{let c=null;new THREE.GLTFLoader().load(e,async function(u){u.scene.updateWorldMatrix(!0,!0);const m=await new THREE.USDZExporter().parse(u.scene);c=new Blob([m],{type:"model/vnd.usdz+zip"}),n(c)})})}}const Er=class Qo{constructor(e){this._hemiLight=null,this._pointLight=null,this._onPrePointerObservableObserver=null,this._isPointerDown=!1,this._radiusScale=.85,this._positionScale=.5,this._limitLowerRadius=!0,this._zoomEnabled=!0,this._minZoomPerc=null,this._maxZoomPerc=null,this._cameraZoom=null,this._cameraPivot=null,this._resizableCanvas3DGenerator=new vh,this.parentNode=null,this.enableShadows=!1,this.areShadowVisible=!0,this.setInitialZoomToBoundingBox=!0,this.changeRotationDirection=!1,this.initialZoomToBBInertiaDamping=.68,this._initialZoomToBBModelSizeRadius=.7,this.initialZoomToBBScrollZoomEnabled=!0,this.initialZoomToBBScrollLowerLimit=2,this.initialZoomToBBScrollUpperLimit=2,this.animateIntro=!1,this._defHemiLightID="f90aba65-3b60-44ac-87f4-1b6441aee44b",this._defPointLightID="b6491635-c471-45a4-bbb8-3f08556e5b3c",this._targetAnimationID="6225769c-0113-4236-ab17-c39d24013de4",this._radiusAnimationID="6f946c2f-af8d-46ab-9bea-9e22dedc4e9d",this._alphaAnimationID="10713520-fe06-4cbf-bc6a-bab881d516e6",this._betaAnimationID="6096ba34-852a-4423-bab3-dc97c1a9268f",this._dummyMaterialID="081796b8-0908-44dc-a38a-d786b14cA6fc",this._loadingMaterials={},this.getVTOMeshes=()=>{const n=["vto_reference","ground","shadowGround","shadow","skybox","environment","axes","grid","boundingbox","highlight","EditControl","guideCtl","bxAxis","byAxis","bzAxis","xAxis","yAxis","zAxis","pALL","pXZ","pZY","pYX","pickPlanes","tarnsCtl","X","Y","Z","XZ","ZY","YX","ALL","tEndX","tEndY","tEndZ","XZ","ZY","YX","tEndAll"],s=b=>n.filter(k=>b.toLowerCase()===k.toLowerCase()).length>0,c=b=>b.toLowerCase().includes("vto_reference"),u=this._scene.meshes.filter(b=>c(b.name)),m=this._scene.meshes.filter(b=>!s(b.name)&&!c(b.name));return{tryonReferencesModels:u,userMeshes:m}},this._loadedMeshes=[],this._isLoading=!1,this._lastVisibilityStates=new Map,this._scene=e,this._engine=e.getEngine(),this._camera=e.activeCamera,this._canvas=e.getEngine().getRenderingCanvas(),this.init()}get initialZoomToBBModelSizeRadius(){return console.log("Getting initialZoomToBBModelSizeRadius: ",this._initialZoomToBBModelSizeRadius),this._initialZoomToBBModelSizeRadius}set initialZoomToBBModelSizeRadius(e){console.log("Setting initialZoomToBBModelSizeRadius to: ",e),this._initialZoomToBBModelSizeRadius=e}get camera(){return this._camera}static checkAllMaterialTextureReady(e){const n=e.getActiveTextures();for(let s=0;s<n.length;s++){const c=n[s];if(c.isReady())c instanceof window.BABYLON.ProceduralTexture&&c.getEffect();else return!1}return!0}removeDefaultBackground(e){e&&(this._scene.clearColor=new window.BABYLON.Color4(0,0,0,0))}setUpSceneToneMapping(e){var n,s,c,u;const m=(n=e==null?void 0:e.getCameraConfig())==null?void 0:n.get("toneMappingEnabled");m!=null&&(this._scene.imageProcessingConfiguration.toneMappingEnabled=m);const b=(s=e==null?void 0:e.getCameraConfig())==null?void 0:s.get("toneMappingType");b!=null&&(this._scene.imageProcessingConfiguration.toneMappingType=b);const k=(c=e==null?void 0:e.getGeneralConfig())==null?void 0:c.get("exposure"),W=(u=e==null?void 0:e.getGeneralConfig())==null?void 0:u.get("contrast");W&&(this._scene.imageProcessingConfiguration.contrast=W),k&&(this._scene.imageProcessingConfiguration.exposure=k)}static whenAllMaterialTexturesAreReady(e){return new Promise((n,s)=>{if(this.checkAllMaterialTextureReady(e))n();else{let c=setInterval(()=>{this.checkAllMaterialTextureReady(e)&&(clearInterval(c),n())},5)}})}static whenTextureIsReadyAsync(e){return new Promise((n,s)=>{if(e.isReady())n();else{let c=setInterval(()=>{e.isReady()&&(clearInterval(c),e instanceof window.BABYLON.ProceduralTexture&&e.getEffect(),n())},5)}})}static whenMeshMaterialIsReady(e){return new Promise((n,s)=>{let c=setInterval(()=>{(!e.material||e.material.isReady(e))&&(clearInterval(c),n())},5)})}static whenMaterialIsReadyForSubMeshAsync(e,n,s){return new Promise((c,u)=>{if(e.isReadyForSubMesh(n,s))Logger.info(`Material ${e.name} ready`),c();else{Logger.info(`Material ${e.name} NOT ready`);let m=setInterval(()=>{e.isReadyForSubMesh(n,s)&&(!n.material||n.material!=e||n.material.isReady(n))&&(Logger.info(`Material ${e.name} ready`),clearInterval(m),c())},5)}})}static getMeshGeometry(e){if(e.geometry)return e.geometry;const n=e.getScene().getGeometries();for(let s=0;s<n.length;s++){const c=n[s];if(c.meshes.find(u=>u===e))return c}return null}static checkMeshIsReady(e){if(e instanceof window.BABYLON.Mesh){if(e._checkDelayState(),e.delayLoadState===window.BABYLON.Constants.DELAYLOADSTATE_NOTLOADED)return!1;if(!e.geometry){const n=e.getScene().getGeometries();for(let s=0;s<n.length;s++){const c=n[s];if(c.meshes.find(u=>u===e)&&!c.isReady())return!1}}if(e.geometry&&!e.geometry.isReady())return!1;for(let n=0;n<e.getChildMeshes().length;n++){const s=e.getChildMeshes()[n];if(!this.checkMeshIsReady(s))return!1}}return e.isReady(!0)}static checkAllMeshesAreReady(e){let n=!0;for(let s=0;s<e.length;s++)this.checkMeshIsReady(e[s])||(n=!1);return n}static whenAllMeshesAreReadyAsync(e){return new Promise((n,s)=>{if(this.checkAllMeshesAreReady(e))n();else{let c=setInterval(()=>{this.checkAllMeshesAreReady(e)&&(clearInterval(c),n())},5)}})}static async whenAllVisibleMeshesAreReadyAsync(e){await this.whenAllMeshesAreReadyAsync(e)}static whenMeshIsReadyAsync(e){return new Promise((n,s)=>{if(this.checkMeshIsReady(e))n();else{let c=setInterval(()=>{this.checkMeshIsReady(e)&&(clearInterval(c),n())},100)}})}static visibleMeshesRequireDelayedLoading(e){const n=e.meshes.filter(s=>s.isVisible);for(let s=0;s<n.length;s++)if(this.meshRequiresDelayedLoading(n[s]))return!0;return!1}static meshRequiresDelayedLoading(e){if(e instanceof window.BABYLON.Mesh){if(e.delayLoadState===window.BABYLON.Constants.DELAYLOADSTATE_NOTLOADED||e.delayLoadState===window.BABYLON.Constants.DELAYLOADSTATE_LOADING)return!0;const n=Qo.getMeshGeometry(e);if(n&&(n.delayLoadState===window.BABYLON.Constants.DELAYLOADSTATE_LOADING||n.delayLoadState===window.BABYLON.Constants.DELAYLOADSTATE_NOTLOADED))return!0}return!1}materialRequiresDelayedLoading(e){return this._scene.getMaterialByID(e)?!1:!!(this._scene.metadata&&this._scene.metadata.delayedMaterials&&this._scene.metadata.delayedMaterials.hasOwnProperty(e)||this._scene.metadata&&this._scene.metadata.offloadedMaterials&&this._scene.metadata.offloadedMaterials.hasOwnProperty(e))}init(){this._onPrePointerObservableObserver=this._scene.onPrePointerObservable.add(e=>{if(e.type===window.BABYLON.PointerEventTypes.POINTERDOWN){this._isPointerDown=!0;return}e.type===window.BABYLON.PointerEventTypes.POINTERUP&&(this._isPointerDown=!1)})}dispose(){this._scene&&this._onPrePointerObservableObserver&&this._scene.onPrePointerObservable.remove(this._onPrePointerObservableObserver)}switchFullScreen(e){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?this.quitFullscreen(e||this._canvas):this.launchFullscreen(e||this._canvas),this._canvas&&(this._canvas.width=document.body.clientWidth,this._canvas.height=document.body.clientHeight,this.adjustCamera(void 0,!0,!0,!1))}quitFullscreen(e){let n=document.exitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen;n&&n.call(document)}launchFullscreen(e){let n=e.requestFullscreen||e.webkitRequestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen;n&&n.call(e)}getMeshHierarchySize(e){let n=e.getHierarchyBoundingVectors(!0);return n.max.subtract(n.min)}getMeshHierarchyCenter(e){const n=e.getHierarchyBoundingVectors(!0),s=n.max.subtract(n.min);return n.min.add(s.scale(.5))}getSceneBoundingInfo(){if(!this._scene)return null;const e=this.getWorldExtends();return e?new window.BABYLON.BoundingInfo(e.min,e.max):null}setupShadows(e){var n,s,c,u,m,b,k,W,ve,Ae,rt,re,mt,nt,tn,Ie,Kt;if(!e)return;const At=(n=e==null?void 0:e.getShadowsConfig())==null?void 0:n.get("enableShadows");At!=null&&(this.enableShadows=At),this.areShadowVisible||(this.enableShadows=!1);const an=(s=e==null?void 0:e.getShadowsConfig())==null?void 0:s.get("shadowMapSize"),Cn=(c=e==null?void 0:e.getShadowsConfig())==null?void 0:c.get("contactHardeningUVRatio"),He=(u=e==null?void 0:e.getShadowsConfig())==null?void 0:u.get("useContactHardeningShadow"),_e=(m=e==null?void 0:e.getShadowsConfig())==null?void 0:m.get("useBlurCloseExponentialShadowMap"),Sr=(b=e==null?void 0:e.getShadowsConfig())==null?void 0:b.get("usePercentageCloserFiltering"),On=(k=e==null?void 0:e.getShadowsConfig())==null?void 0:k.get("usePoissonSampling"),Kr=(W=e==null?void 0:e.getShadowsConfig())==null?void 0:W.get("useKernelBlur"),Mi=(ve=e==null?void 0:e.getShadowsConfig())==null?void 0:ve.get("blurBoxOffset"),ei=(Ae=e==null?void 0:e.getShadowsConfig())==null?void 0:Ae.get("blurScale"),oi=(rt=e==null?void 0:e.getShadowsConfig())==null?void 0:rt.get("blurKernel"),xr=(re=e==null?void 0:e.getShadowsConfig())==null?void 0:re.get("depthScale"),Ts=(mt=e==null?void 0:e.getShadowsConfig())==null?void 0:mt.get("shadowDarkness"),Fn=(nt=e==null?void 0:e.getShadowsConfig())==null?void 0:nt.get("shadowMinZ"),si=(tn=e==null?void 0:e.getShadowsConfig())==null?void 0:tn.get("shadowMaxZ");if(!this.enableShadows){const Hs=(Ie=this._scene)==null?void 0:Ie.getMeshByName("shadowGround");Hs&&Hs.dispose();const Ns=(Kt=this._scene)==null?void 0:Kt.getMaterialByName("shadowMaterial");Ns&&Ns.dispose();const da=this._scene.getLightByName("shadowDirectionalLight");da&&da.dispose();return}if(!this._scene)throw new Error("Scene is not defined");const Pi=this._scene.getLightByName("shadowDirectionalLight"),ai=new window.BABYLON.Vector3(0,-2,0),hs=Pi??new window.BABYLON.DirectionalLight("shadowDirectionalLight",ai,this._scene);hs.intensity=0,hs.shadowMinZ=Fn??void 0,hs.shadowMaxZ=si??void 0,Qo._shadowGenerator=new window.BABYLON.ShadowGenerator(Number(an),hs),Qo._shadowGenerator.usePoissonSampling=!!On,Qo._shadowGenerator.usePercentageCloserFiltering=!!Sr,Qo._shadowGenerator.useBlurCloseExponentialShadowMap=!!_e,Qo._shadowGenerator.useKernelBlur=!!Kr,Qo._shadowGenerator.blurBoxOffset=Number(Mi),Qo._shadowGenerator.blurScale=Number(ei),Qo._shadowGenerator.blurKernel=Number(oi),Qo._shadowGenerator.depthScale=Number(xr),Qo._shadowGenerator.setDarkness(Number(Ts)),Qo._shadowGenerator.useContactHardeningShadow=!!He,Qo._shadowGenerator.contactHardeningLightSizeUVRatio=Number(Cn),Qo._shadowGenerator.transparencyShadow=!0,Qo._shadowGenerator.enableSoftTransparentShadow=!0;const fa=Qo._shadowGenerator.getShadowMap();this._scene.meshes.forEach(Hs=>{var Ns;(Ns=fa==null?void 0:fa.renderList)==null||Ns.push(Hs)}),this.createGroundFromBoundingBox(e)}setShadowsVisibility(e){Qo._shadowGenerator&&(this.areShadowVisible=e)}setupAnimations(e){var n;const s=e==null?void 0:e.getAnimationsConfig(),c=!!(s!=null&&s.get("runAtStart")),u=!!(s!=null&&s.get("loop")),m=(s==null?void 0:s.get("speed"))||1,b=(n=this._scene)==null?void 0:n.animationGroups,k=b&&this._scene.animationGroups.length>0;if(b&&b.forEach(W=>{W.stop(),W.reset()}),c&&k){const W=b[0];W.start(u,m,W.from,W.to,!1)}}createGroundFromBoundingBox(e){var n,s,c,u,m,b,k,W,ve;if(!e)return;const Ae=(n=this._scene)==null?void 0:n.getMeshByName("shadowGround");Ae&&Ae.dispose();const rt=(s=this._scene)==null?void 0:s.getMaterialByName("shadowMaterial");rt&&rt.dispose();const re=(c=e==null?void 0:e.getShadowsConfig())==null?void 0:c.get("enableShadows");if(re!=null&&(this.enableShadows=re),!this.enableShadows){console.log("Shadows are not enabled");return}const mt=this.getSceneBoundingInfo();if(!mt||!mt.boundingBox){console.error("Cannot create ground: No bounding box information available.");return}const nt=(u=e==null?void 0:e.getShadowsConfig())==null?void 0:u.get("shadowHexColor"),tn=(m=e==null?void 0:e.getShadowsConfig())==null?void 0:m.get("groundSizeMultiplierWidth"),Ie=(b=e==null?void 0:e.getShadowsConfig())==null?void 0:b.get("groundSizeMultiplierLength"),Kt=mt.boundingBox.minimumWorld,At=mt.boundingBox.maximumWorld.subtract(Kt),an=Kt.add(At.scale(.5));if(this._scene!==null){const Cn=window.BABYLON.MeshBuilder.CreateGround("shadowGround",{width:At.x*Number(tn),height:At.z*Number(Ie)},this._scene);Cn.position=new window.BABYLON.Vector3(an.x,Kt.y,an.z),Cn.rotation.y=Math.PI;const He=new window.BABYLON.ShadowOnlyMaterial("bbmat",this._scene);Cn.material=He,Cn.receiveShadows=!0,Cn.material.shadowColor=window.BABYLON.Color3.FromHexString(String(nt)),Cn.metadata={AR:!1,isRealMesh:!1};const _e=(k=Qo._shadowGenerator)==null?void 0:k.getShadowMap();Qo._shadowGenerator&&_e?((W=_e.renderList)==null||W.push(Cn),Cn.receiveShadows=!0):console.error("Failed to add ground mesh to shadow map render list.")}else console.error("Cannot create ground: Scene is null.");console.log("Shadow ground created"),(ve=this._scene)==null||ve.render()}userIsMoving(){return!this._camera||!(this._camera instanceof window.BABYLON.ArcRotateCamera)?!1:this._camera.inertialAlphaOffset!==0||this._camera.inertialBetaOffset!==0||this._camera.inertialRadiusOffset!==0||this._camera.inertialPanningX!==0||this._camera.inertialPanningY!==0||this._isPointerDown}cameraIsMoving(){return!this._camera||!(this._camera instanceof window.BABYLON.ArcRotateCamera)?!1:this._camera.inertialAlphaOffset!==0||this._camera.inertialBetaOffset!==0||this._camera.inertialRadiusOffset!==0||this._camera.inertialPanningX!==0||this._camera.inertialPanningY!==0}cameraLimitsReached(){return!this._camera||!(this._camera instanceof window.BABYLON.ArcRotateCamera)?!1:this._camera.lowerRadiusLimit!==void 0&&this._camera.lowerRadiusLimit!==null&&this._camera.radius===this._camera.lowerRadiusLimit||this._camera.upperRadiusLimit!==void 0&&this._camera.upperRadiusLimit!==null&&this._camera.radius===this._camera.upperRadiusLimit}restoreCameraState(){this._camera&&this._camera.restoreState()}isTextureWithUrl(e){return e&&(e instanceof window.BABYLON.Texture||e instanceof window.BABYLON.CubeTexture||e instanceof window.BABYLON.HDRCubeTexture||e instanceof window.BABYLON.ColorGradingTexture||e instanceof window.BABYLON.EquiRectangularCubeTexture)}getTextureUrl(e){if(e&&(e instanceof window.BABYLON.Texture||e instanceof window.BABYLON.CubeTexture||e instanceof window.BABYLON.HDRCubeTexture||e instanceof window.BABYLON.ColorGradingTexture||e instanceof window.BABYLON.EquiRectangularCubeTexture)){let n=e.url;if(e.getInternalTexture){const s=e.getInternalTexture();s&&s.url&&(n=s.url)}return n}return null}isEditControl(e){return e&&(e.name=="EditoControl"||e.metadata&&e.metadata.isEditControl)}isRealMesh(e){return!(this.isEditControl(e)||e.metadata&&(e.metadata.boundingBox||e.metadata.isAxis||e.metadata.isGround||e.metadata.isEnvironmentNode||e.metadata.hasOwnProperty("isRealMesh")&&!e.metadata.isRealMesh))}meshFineTuningSettings(e){return e.metadata&&e.metadata.hasOwnProperty("tryOnFineTuningSettings")&&e.metadata.tryOnFineTuningSettings?e.metadata.tryOnFineTuningSettings:null}meshHasParent(e,n){if(this._scene){let s=this._scene.getMeshById(e);if(s)for(;s.parent;){if(s.parent.id===n)return!0;s=s.parent}}return!1}countSceneMeshes(){let e=0;return this._scene&&this._scene.meshes.forEach(n=>{this.isRealMesh(n)&&e++}),e}sceneHasRealMeshes(){for(let e=0;e<this._scene.meshes.length;e++)if(this.isRealMesh(this._scene.meshes[e]))return!0;return!1}getSceneMeshes(){const e=[];return this._scene&&this._scene.meshes.forEach(n=>{this.isRealMesh(n)&&e.push(n)}),e}getSceneMeshesByName(e){let n=[];if(this._scene){const c=function(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")};if(e){var s=new RegExp(c(e).replace(/\\\*/g,".*"),"i");for(let u=0;u<this._scene.meshes.length;u++){const m=this._scene.meshes[u];this.isRealMesh(m)&&m.name&&s.test(m.name)&&n.push(m)}}}return n}isVisibleMesh(e){return this.isRealMesh(e)&&e.isVisible}getVisibleMeshes(){const e=[];return this._scene.meshes.forEach(n=>{this.isVisibleMesh(n)&&e.push(n)}),e}getInvisibleMeshes(){const e=[];return this._scene.meshes.forEach(n=>{this.isRealMesh(n)&&!n.isVisible&&e.push(n)}),e}getSubMesh(e,n){return e.subMeshes&&e.subMeshes.length>0&&n>=0&&n<e.subMeshes.length?e.subMeshes[n]:null}getMeshHierarchy(e){const n=[];let s=this._scene.getMeshById(e);if(!s)return n;let c=u=>{n.push(u);let m=u.getChildMeshes(!0);for(let b=0;b<m.length;b++)c(m[b])};return c(s),n}getTryOnMeshHierarchy(e){const n=[];let s=this._scene.getMeshById(e);if(!s)return n;let c=u=>{n.push(u);let m=u.getChildMeshes(!0);for(const b of m)(this.isVisibleCanvasMesh(b)||this.isVisibleTryOnMesh(b))&&c(b)};return c(s),n}isVisibleCanvasMesh(e){return this.isCanvasMesh(e)&&e.isVisible}isCanvasMesh(e){return!e||!e.metadata?!1:e.metadata.hasOwnProperty("iscanvasMesh")&&typeof e.metadata.iscanvasMesh=="boolean"?e.metadata.iscanvasMesh:!1}isAREnabledForMesh(e){return e?!e.metadata||e.metadata.AR===void 0||e.metadata.AR===null||typeof e.metadata.AR!="boolean"?!0:e.metadata.AR:!1}isTryOnEnabledForMesh(e){return e?!e.metadata||e.metadata.TryOn===void 0||e.metadata.TryOn===null||typeof e.metadata.TryOn!="boolean"?!0:e.metadata.TryOn:!1}isVisibleTryOnMesh(e){return this.isTryOnEnabledForMesh(e)&&this.isVisibleMesh(e)}getMeshesForAR(){const e=[];return this._scene&&this._scene.meshes.forEach(n=>{(this.isRealMesh(n)||this.isCanvasMesh(n))&&n.isVisible&&this.isAREnabledForMesh(n)&&e.push(n)}),e}checkMaterialsForAR(){const e=this.getMeshesMaterials(this.getMeshesForAR());for(let n=0;n<e.length;n++){const s=e[n];if(!(s instanceof window.BABYLON.PBRMaterial)&&!(s instanceof window.BABYLON.PBRMetallicRoughnessMaterial)&&!(s instanceof window.BABYLON.StandardMaterial))return!1}return!0}getMeshesMaterials(e){const n=[],s=[];for(let c=0;c<e.length;c++){let u=e[c];if(u.material)if(u.material instanceof window.BABYLON.MultiMaterial)for(let m=0;m<u.material.subMaterials.length;m++){let b=u.material.subMaterials[m];b&&n.indexOf(b.id)===-1&&(s.push(b),n.push(b.id))}else n.indexOf(u.material.id)===-1&&(s.push(u.material),n.push(u.material.id))}return s}getMeshMaterials(e){const n=[];if(e&&e.material)if(e.material instanceof window.BABYLON.MultiMaterial)for(let s=0;s<e.material.subMaterials.length;s++){let c=e.material.subMaterials[s];c&&n.push(c)}else n.push(e.material);return n}getHiddenMeshTotalVertices(){return this.getTotalVertices(e=>!e.isVisible)}getTotalVertices(e){let n=0;return this._scene&&this._scene.meshes.forEach(s=>{this.isRealMesh(s)&&(e&&!e(s)||(n+=s.getTotalVertices()))}),n}getHiddenMeshTotalIndices(){return this.getTotalIndices(e=>!e.isVisible)}getTotalIndices(e){let n=0;return this._scene&&this._scene.meshes.forEach(s=>{this.isRealMesh(s)&&(e&&!e(s)||(n+=s.getTotalIndices()))}),n}getAllMaterials(){const e=[];return this._scene&&this._scene.materials.forEach(n=>{n.metadata&&(n.metadata.isRealMaterial!==void 0&&!n.metadata.isRealMaterial||n.metadata.isEnvironmentNode!==void 0&&n.metadata.isEnvironmentNode)||n.id!=="groundMaterial"&&n.id!=="default material"&&e.push(n)}),e}getMeshesUsingMaterial(e){const n=[],s=this.getSceneMeshes();for(let c=0;c<s.length;c++){const u=s[c];this.isMeshUsingMaterial(u,e)&&n.push(u)}return n}isMeshUsingMaterial(e,n){if(e.material){if(e.material.id===n)return!0;if(e.material instanceof window.BABYLON.MultiMaterial)for(let s=0;s<e.material.subMaterials.length;s++){const c=e.material.subMaterials[s];if(c&&c.id===n)return!0}}return!1}getAllUnusedMaterials(){const e=this.getAllMaterials(),n=[];for(let s=0;s<e.length;s++){const c=e[s];this.getMeshesUsingMaterial(c.id).length===0&&n.push(c)}return n}async getSceneScreenshotAsync(e,n){if(!this._camera)return"";let s={width:e,height:n};return await window.BABYLON.Tools.CreateScreenshotAsync(this._engine,this._camera,s,"image/png")}containsPBRMaterials(){if(this._scene){for(let e=0;e<this._scene.materials.length;e++)if(this._scene.materials[e]instanceof window.BABYLON.PBRBaseMaterial)return!0}return!1}getMeshesForTryOn(){const e=[];return this._scene&&this._scene.meshes.forEach(n=>{(this.isRealMesh(n)||this.isCanvasMesh(n))&&n.isVisible&&this.isTryOnEnabledForMesh(n)&&e.push(n)}),e}setupLights(){this._hemiLight=null,this._pointLight=null;let e=null,n=null;this._scene.lights.forEach(s=>{s instanceof window.BABYLON.HemisphericLight&&(e===null&&(e=s),s.id===this._defHemiLightID&&(this._hemiLight=s)),s instanceof window.BABYLON.PointLight&&(n===null&&(n=s),s.id===this._defPointLightID&&(this._pointLight=s))}),this._hemiLight===null&&(e!==null?this._hemiLight=e:(this._hemiLight=new window.BABYLON.HemisphericLight("Default Hemispheric Light",window.BABYLON.Vector3.Up(),this._scene),this._hemiLight.intensity=.5),this._hemiLight&&(this._hemiLight.id=this._defHemiLightID)),this._pointLight===null&&(n!==null?this._pointLight=n:(this._pointLight=new window.BABYLON.PointLight("Default Point Light",new window.BABYLON.Vector3(0,5,0),this._scene),this._pointLight.intensity=.5),this._pointLight&&(this._pointLight.id=this._defPointLightID))}setUpCustomLights(e){Object.entries(e).forEach(n=>{const s=n[0],c=n[1].position,u=n[1].general.intensity,m=n[1].general.visible,b={position:c,intensity:u,visible:m};this.createOrUpdateLight(s,b)})}createOrUpdateLight(e,n){const s=this._scene.getLightByName(e);if(s&&(this._scene.removeLight(s),s.dispose()),!n.visible)return;const c=new window.BABYLON.Vector3(n.position.x,n.position.y,n.position.z);let u;e.match(/directional/i)?(u=new window.BABYLON.DirectionalLight(e,c,this._scene),u.intensity=n.intensity,u.id=Zakeke.generateUUID()):e.match(/pointLight/i)?(u=new window.BABYLON.PointLight(e,c,this._scene),u.intensity=n.intensity,u.id=Zakeke.generateUUID()):e.match(/hemisphere/i)&&(u=new window.BABYLON.HemisphericLight(e,c,this._scene),u.intensity=n.intensity,u.id=Zakeke.generateUUID())}getDefaultHemisphericLight(){return this._hemiLight}getDefaultPointLight(){return this._pointLight}isDefaultLight(e){return e.id==this._defHemiLightID||e.id==this._defPointLightID}setUpCameraByOptions(e){if(e&&this._scene){let n=this._scene.cameras.find(s=>s instanceof window.BABYLON.ArcRotateCamera);e&&n instanceof window.BABYLON.ArcRotateCamera&&(n.beta=e.beta??n.beta,n.alpha=e.alpha??n.alpha,n.fov=e.fov??n.fov)}}setupCamera(){if(this._scene){let e=this._scene.cameras.find(n=>n instanceof window.BABYLON.ArcRotateCamera);e?this._camera=e:(this._camera=new window.BABYLON.ArcRotateCamera("camera1",0,0,0,window.BABYLON.Vector3.Zero(),this._scene),this._camera.setPosition(new window.BABYLON.Vector3(0,3,-8))),this.setupCameraLimits(),this._canvas&&this._camera.attachControl(this._canvas,!1)}}setCameraRadiusParameters(e){this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera&&(this._camera.lowerRadiusLimit=e*(this._zoomEnabled?.01:1),this._camera.upperRadiusLimit=e*(this._zoomEnabled?3:1),this._camera.wheelPrecision=100/e,this._camera.pinchPrecision=100/e,this._camera.minZ=e*.01,this._camera.maxZ=e*1e3,this._camera.speed=e*.2,this._camera.wheelDeltaPercentage=.01,this._camera.pinchDeltaPercentage=6e-4,this._camera.panningSensibility=1e-6,this._camera.wheelPrecision=100/e,this._camera.panningAxis=window.BABYLON.Vector3.Zero(),this._camera.panningInertia=0,this._camera.radius=e)}removeCameraLimits(){this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera&&(this._camera.lowerRadiusLimit=null,this._camera.upperRadiusLimit=null,this._camera.minZ=1,this._camera.maxZ=1e4)}getWorldExtends(){return this._scene?this._scene.getWorldExtends(e=>this.isRealMesh(e)&&e.isVisible):null}getCameraWorldExtends(){let e=null;if(this._scene){let n=this._cameraPivot;if(!n)for(let s=0;s<this._scene.meshes.length;s++){const c=this._scene.meshes[s];if(c.metadata&&c.metadata.isCameraPivot!==void 0&&c.metadata.isCameraPivot){n=c;break}}n&&(e=this._scene.getWorldExtends(s=>s===n||this.meshHasParent(s.id,n.id)))}return e||(e=this.getWorldExtends()),e}setupCameraLimits(e){if(this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){if(e==null){let s=this.getCameraWorldExtends();s&&(e=s)}if(!e)return;const n=e.max.subtract(e.min);if(isFinite(n.length())){this.removeCameraLimits();const s=this.calculateCameraRadius(e);if(this.setCameraRadiusParameters(s),this._limitLowerRadius){if(this._scene.meshes.length&&this._zoomEnabled){this._camera.useFramingBehavior=!0;const c=this._camera.getBehaviorByName("Framing");c&&c instanceof window.BABYLON.FramingBehavior&&(c.elevationReturnTime=-1,this._camera.lowerRadiusLimit=null,this._minZoomPerc!==null&&this._minZoomPerc!==void 0&&this._minZoomPerc>0&&(this._camera.lowerRadiusLimit=s*this._minZoomPerc),this._maxZoomPerc!==null&&this._maxZoomPerc!==void 0&&this._maxZoomPerc>0&&(this._camera.upperRadiusLimit=s*this._maxZoomPerc))}}else this._camera.lowerRadiusLimit=null}}}adjustCamera(e,n=!0,s=!0,c=!0,u=!1){if(!this._camera||!(this._camera instanceof window.BABYLON.ArcRotateCamera))return;let m=this.getCameraWorldExtends();if(!m)return;const b=m.max.subtract(m.min);if(!isFinite(b.length()))return;const k=m.min.add(b.scale(.5));this.removeCameraLimits();const W=this.calculateCameraRadius(m);let ve=this._camera.alpha;n||(ve=-(Math.PI/2),e&&e==="gltf"&&(ve+=Math.PI));let Ae=this._camera.beta;s||(Ae=Math.PI/2-.3);let rt=k.clone(),re=m.min.y,mt=m.max.y,nt=re+(mt-re)*this._positionScale;if(rt.y=nt,!c)this._camera.alpha=ve,this._camera.beta=Ae,this._camera.radius=W,this._camera.target=rt,this.setupCameraLimits(m);else{if(u){const tn=this.calculateCameraRadius(m);this._camera.radius=tn}this.animateCameraToFinalParamters(ve,Ae,W,rt,2,()=>{this.setupCameraLimits(m)})}}normalizeAngleOfView(e,n){const s=window.BABYLON.Vector3.Zero(),c=new window.BABYLON.ArcRotateCamera("ghostCamera",e,n,1,s,this._scene),u=c.position;return c.dispose(),this.computeCameraAngleOfView(s,u)}computeCameraAngleOfView(e,n){const s=new window.BABYLON.ArcRotateCamera("ghostCamera",0,0,0,e,this._scene);s.setPosition(n);const c=s.alpha,u=s.beta;return s.dispose(),{alpha:c,beta:u}}moveCamera(e,n){var s=new window.BABYLON.ArcRotateCamera("ghostCamera",0,0,0,e,this._scene);s.setPosition(n);var c=s.alpha,u=s.beta,m=s.radius;s.dispose(),this.moveCameraToFinalParameters(c,u,m,e)}animateCamera(e,n,s,c){var u=new window.BABYLON.ArcRotateCamera("ghostCamera",0,0,0,e,this._scene);u.setPosition(n);var m=u.alpha,b=u.beta,k=u.radius;u.dispose(),this.animateCameraToFinalParamters(m,b,k,e,s,c)}wrapPi(e){if(Math.abs(e)>Math.PI){var n=2*Math.PI,s=Math.floor((e+Math.PI)*(1/n));e-=s*n}return e}wrap2Pi(e){let n=e%(Math.PI*2);return n<0&&(n+=Math.PI*2),n}zoomIn(){this.zoom(.85)}zoomOut(){this.zoom(1.15)}zoom(e){if(this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){let s=this._camera.radius,c=this._camera.lowerRadiusLimit!==null&&this._camera.lowerRadiusLimit!==void 0?this._camera.lowerRadiusLimit:0,u=Math.max(0,c),m=Number.MAX_VALUE;this._camera.upperRadiusLimit!=null&&(m=this._camera.upperRadiusLimit);var n=Math.max(u,Math.min(m,s*e));n!==s&&this.animateCameraToFinalParamters(this._camera.alpha,this._camera.beta,n,this._camera.target,.5)}}moveCameraToFinalParameters(e,n,s,c){!this._camera||!(this._camera instanceof window.BABYLON.ArcRotateCamera)||(this._camera.target=c,this._camera.alpha=e,this._camera.beta=n,this._camera.radius=s)}animateCameraToFinalParamters(e,n,s,c,u,m){if(!this._camera||!(this._camera instanceof window.BABYLON.ArcRotateCamera))return;let b=this._camera.radius,k=()=>{if(this._camera){this._scene.stopAnimation(this._camera);for(let Kr=0;Kr<this._camera.animations.length;Kr++)this._camera.animations[Kr],this._camera.animations.splice(Kr--,1)}};k();let W=this._camera.alpha;!this._camera.lowerAlphaLimit&&!this._camera.upperAlphaLimit&&(W=this.wrap2Pi(this._camera.alpha));let ve=this._camera.beta;!this._camera.lowerBetaLimit&&!this._camera.upperBetaLimit&&(ve=this.wrap2Pi(this._camera.beta));let Ae=isFinite(e)?this.wrapPi(e):W;Math.abs(W-Ae)>Math.PI&&(Ae+=Math.PI*2);let rt=isFinite(n)?this.wrapPi(n):ve;Math.abs(ve-rt)>Math.PI&&(rt+=Math.PI*2);let re=2;u&&typeof u=="number"&&u>0&&(re=u);let mt=60,nt=Math.floor(re*mt),tn=this._camera.target.subtract(c).length()/this._camera.radius,Ie=[],Kt=new window.BABYLON.CubicEase;Kt.setEasingMode(window.BABYLON.EasingFunction.EASINGMODE_EASEINOUT);let At=null;this._camera.target!==c&&(tn>=.005?(At=new window.BABYLON.Animation("camTargetAnimation","target",mt,window.BABYLON.Animation.ANIMATIONTYPE_VECTOR3,window.BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),Ie=[{frame:0,value:this._camera.target},{frame:nt,value:c}],At.setKeys(Ie),At.setEasingFunction(Kt)):this._camera.target=c);let an=null;W!==Ae&&(an=new window.BABYLON.Animation("camAlphaAnimation","alpha",mt,window.BABYLON.Animation.ANIMATIONTYPE_FLOAT,window.BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),Ie=[{frame:0,value:W},{frame:nt,value:Ae}],an.setKeys(Ie),an.setEasingFunction(Kt));let Cn=null;ve!==rt&&(Cn=new window.BABYLON.Animation("camBetaAnimation","beta",mt,window.BABYLON.Animation.ANIMATIONTYPE_FLOAT,window.BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),Ie=[{frame:0,value:ve},{frame:nt,value:rt}],Cn.setKeys(Ie),Cn.setEasingFunction(Kt));let He=Math.abs(this._camera.radius-s)/this._camera.radius,_e=null;this._camera.radius!==s&&(He>=.005?(_e=new window.BABYLON.Animation("camRadiusAnimation","radius",mt,window.BABYLON.Animation.ANIMATIONTYPE_FLOAT,window.BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),Ie=[{frame:0,value:b},{frame:nt,value:s}],_e.setKeys(Ie),_e.setEasingFunction(Kt)):this._camera.radius=s);let Sr=this._camera.animations.length;if(At&&this._camera.animations.push(At),an&&this._camera.animations.push(an),Cn&&this._camera.animations.push(Cn),_e&&this._camera.animations.push(_e),this._camera.animations.length>Sr){var On=this._scene.beginAnimation(this._camera,0,nt,!1,1);On.onAnimationEnd=()=>{k(),this.setupShaderMaterialsCameraPosition(),m&&m()}}else m&&m()}getFrustumSlope(){let e=this._camera;if(!e)return window.BABYLON.Vector2.Zero();let n=this._engine.getAspectRatio(e),s=Math.tan(e.fov/2),c=s*n;return new window.BABYLON.Vector2(c,s)}calculateCameraRadius(e){if(e==null){let s=this.getCameraWorldExtends();s&&(e=s)}if(!e)return 1;var n=this.calculateLowerRadiusFromModelBoundingSphere(e.min,e.max);return isFinite(n)||(n=1),n+(this._cameraZoom??0)}calculateLowerRadiusFromModelBoundingSphere(e,n){const s=n.subtract(e).length(),c=this.getFrustumSlope(),u=s*.5,m=this._radiusScale,b=u*m,k=b*Math.sqrt(1+1/(c.x*c.x)),W=b*Math.sqrt(1+1/(c.y*c.y));let ve=Math.max(k,W);var Ae=this._camera;return!Ae||!(Ae instanceof window.BABYLON.ArcRotateCamera)?0:(Ae.upperRadiusLimit&&(ve=ve>Ae.upperRadiusLimit?Ae.upperRadiusLimit:ve),ve)}getWorldCenter(e){if(e==null){let s=this.getCameraWorldExtends();s&&(e=s)}if(!e)return null;let n=e.max.subtract(e.min);return isFinite(n.length())?e.min.add(n.scale(.5)):null}getCameraWorldCenter(e){if(e==null){let s=this.getCameraWorldExtends();s&&(e=s)}if(!e)return null;let n=e.max.subtract(e.min);return isFinite(n.length())?e.min.add(n.scale(.5)):null}getCameraRadius(e){if(e==null){let s=this.getCameraWorldExtends();s&&(e=s)}if(!e)return null;let n=e.max.subtract(e.min);return isFinite(n.length())?this.calculateCameraRadius(e):null}setCameraLimitLowerRadius(e,n=!1){if(this._limitLowerRadius=e,this.setupCameraLimits(),n&&this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera&&this.sceneHasRealMeshes()){let s=this._camera.target.clone(),c=this.getCameraWorldExtends();if(c){let u=c.min.y,m=c.max.y,b=u+(m-u)*this._positionScale;s.y=b,this.animateCameraToFinalParamters(this._camera.alpha,this._camera.beta,this._camera.radius,s,.5)}}}setCameraPositionScale(e,n=!1){if(this._positionScale=e,n&&this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera&&this.sceneHasRealMeshes()){var s=this._camera.target.clone(),c=this.getCameraWorldExtends();if(c){var u=c.min.y,m=c.max.y,b=u+(m-u)*this._positionScale;s.y=b,this.animateCameraToFinalParamters(this._camera.alpha,this._camera.beta,this._camera.radius,s,.5)}}}getCameraPivot(){return this._cameraPivot}setCameraPivot(e){this._cameraPivot=e,this.adjustCamera(void 0,!0,!0,!0)}setZoomEnabled(e){this._zoomEnabled=e,this.adjustCamera(void 0,!0,!0,!0)}setMinZoomPerc(e){const n=e??null;n!==this._minZoomPerc&&(this._minZoomPerc=n,this.adjustCamera(void 0,!0,!0,!1))}setMaxZoomPerc(e){const n=e??null;n!==this._maxZoomPerc&&(this._maxZoomPerc=n,this.adjustCamera(void 0,!0,!0,!1))}setCameraZoom(e){e!=null&&this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera&&(this._cameraZoom=-(e/10),this.adjustCamera(void 0,!0,!0,!1))}setCameraAlphaLimits(e,n){if(this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){const s=this.normalizeAngleOfView(this._camera.alpha,this._camera.beta).alpha;this.setCameraLowerAlphaLimit(e),this.setCameraUpperAlphaLimit(n),this._camera.alpha=s}}setCameraLowerAlphaLimit(e){if(this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera)if(e==null)this._camera.lowerAlphaLimit=null;else{let n=this.normalizeAngleOfView(e,this._camera.beta).alpha;this._camera.upperAlphaLimit&&n>this._camera.upperAlphaLimit&&(this._camera.upperAlphaLimit+=Math.PI*2),this._camera.lowerAlphaLimit=n}}setCameraUpperAlphaLimit(e){if(this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera)if(e==null)this._camera.upperAlphaLimit=null;else{let n=this.normalizeAngleOfView(e,this._camera.beta).alpha;this._camera.lowerAlphaLimit&&n<this._camera.lowerAlphaLimit&&(n+=Math.PI*2),this._camera.upperAlphaLimit=n}}setCameraLowerBetaLimit(e){if(this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera)if(e==null)this._camera.lowerBetaLimit=.01;else{let n=this.normalizeAngleOfView(this._camera.alpha,e).beta;this._camera.upperBetaLimit&&n>this._camera.upperBetaLimit&&(this._camera.upperBetaLimit+=Math.PI*2),this._camera.lowerBetaLimit=n}}setCameraUpperBetaLimit(e){if(this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera)if(e==null)this._camera.upperBetaLimit=Math.PI-.01;else{let n=this.normalizeAngleOfView(this._camera.alpha,e).beta;this._camera.lowerBetaLimit&&n<this._camera.lowerBetaLimit&&(this._camera.lowerBetaLimit-=Math.PI*2),this._camera.upperBetaLimit=n}}setCameraBetaLimits(e,n){if(this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){const s=this.normalizeAngleOfView(this._camera.alpha,this._camera.beta).beta;this.setCameraLowerBetaLimit(e),this.setCameraUpperBetaLimit(n),this._camera.beta=s}}zoomOnMesh(e){if(this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){this._camera.useFramingBehavior=!0;const n=this._camera.getBehaviorByName("Framing");n&&n instanceof window.BABYLON.FramingBehavior&&(n.framingTime=0,n.elevationReturnTime=-1,n.radiusScale=this._radiusScale,n.positionScale=this._positionScale,n.zoomOnMeshHierarchy(e))}}async takeScreenshotAsync(e,n){if(!this._camera)return"";const s={width:e,height:n};return await window.BABYLON.Tools.CreateScreenshotAsync(this._engine,this._camera,s,"image/png")}async takeContentScreenshotAsync(e,n){if(!this._camera)return"";var s=this._scene.clearColor.clone();this._scene.clearColor=new window.BABYLON.Color4(0,0,0,0),this._scene.render();let c={width:e,height:n};const u=window.BABYLON.Tools.CreateScreenshotAsync(this._engine,this._camera,c,"image/png");this._scene.render(),this._scene.getEngine().endFrame();const m=await u;return this._scene.clearColor=s,m}async takeMaterialScreenshotAsync(e,n,s){let c=this._scene.getMaterialByID(e);if(!c)return"";let u=this.getVisibleMeshes();for(let rt=0;rt<u.length;rt++){var m=u[rt];m.isVisible=!1}let b=this._scene.clearColor.clone();this._scene.clearColor=new window.BABYLON.Color4(0,0,0,0);let k=window.BABYLON.Mesh.CreateSphere("temp_sphere",32,2,this._scene);k.material=c;let W=new window.BABYLON.ArcRotateCamera("temp_camera",0,0,0,window.BABYLON.Vector3.Zero(),this._scene);W.setPosition(new window.BABYLON.Vector3(0,0,-4)),this._scene.activeCamera=W,this._scene.render();let ve={width:n,height:s},Ae=await window.BABYLON.Tools.CreateScreenshotAsync(this._engine,W,ve,"image/png");this._scene.clearColor=b,k.dispose();for(let rt=0;rt<u.length;rt++){var m=u[rt];m.isVisible=!0}return this._scene.activeCamera=this._camera,W.dispose(),Ae}getScenePBRMaterials(){const e=[];return this._scene&&this._scene.materials.forEach(n=>{n instanceof window.BABYLON.PBRBaseMaterial&&e.push(n)}),e}resetPBRMaterialsImageProcessingConfiguration(){var e=this.getScenePBRMaterials();e.forEach(n=>{this.adjustPBRMaterialImageProcessingConfiguration(n)})}adjustPBRMaterialImageProcessingConfiguration(e){e instanceof window.BABYLON.PBRMaterial&&e.imageProcessingConfiguration&&(e.imageProcessingConfiguration.colorGradingWithGreenDepth=!1,e.imageProcessingConfiguration.colorGradingBGR=!1,e.imageProcessingConfiguration.exposure=1,e.imageProcessingConfiguration.toneMappingEnabled=!1,e.imageProcessingConfiguration.contrast=1)}animateMeshToFinalParameters(e,n,s,c,u,m=2,b){if(this._scene&&e){e.id;const ve=()=>{this._scene.stopAnimation(e);for(let an=0;an<e.animations.length;an++)e.animations.splice(an--,1)};ve();const Ae=m,rt=60,re=Math.floor(Ae*rt);let mt,nt=null;e.position!==n&&(nt=new window.BABYLON.Animation("positionAnimation","position",rt,window.BABYLON.Animation.ANIMATIONTYPE_VECTOR3,window.BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),mt=[{frame:0,value:e.position},{frame:re,value:n}],nt.setKeys(mt));let tn=null,Ie=null;if(e.rotationQuaternion==null){var k;s!=null?k=s.clone():k=c.toEulerAngles().clone(),e.rotation!=k&&(tn=new window.BABYLON.Animation("eulerAnimation","rotation",rt,window.BABYLON.Animation.ANIMATIONTYPE_VECTOR3,window.BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),mt=[{frame:0,value:e.rotation},{frame:re,value:k}],tn.setKeys(mt))}else{let an;c!=null?an=c.clone():(an=window.BABYLON.Quaternion.Identity(),an.copyFrom(window.BABYLON.Quaternion.RotationYawPitchRoll(s.y,s.x,s.z))),Ie=new window.BABYLON.Animation("quaternionAnimation","rotationQuaternion",rt,window.BABYLON.Animation.ANIMATIONTYPE_QUATERNION,window.BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),mt=[{frame:0,value:e.rotationQuaternion},{frame:re,value:an}],Ie.setKeys(mt)}let Kt=null;e.scaling!==u&&(Kt=new window.BABYLON.Animation("scalingAnimation","scaling",rt,window.BABYLON.Animation.ANIMATIONTYPE_VECTOR3,window.BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),mt=[{frame:0,value:e.scaling},{frame:re,value:u}],Kt.setKeys(mt));let At=e.animations.length;if(nt&&e.animations.push(nt),tn&&e.animations.push(tn),Ie&&e.animations.push(Ie),Kt&&e.animations.push(Kt),e.animations.length>At){var W=this._scene.beginAnimation(e,0,re,!1,1);W.onAnimationEnd=()=>{ve(),b&&b()}}}}getMaterialsUsingTexture(e){var n=this.getTextureMaterialsMap();return this._scene.materials.forEach(s=>{var c=this.getTexturesForMaterial(s);c.forEach(u=>{n.hasOwnProperty(u.uid)||(n[u.uid]=[]),n[u.uid].push(s)})}),n.hasOwnProperty(e.uid)?n[e.uid]:[]}getTextureMaterialsMap(){let e={};return this._scene&&this._scene.materials.forEach(n=>{var s=this.getTexturesForMaterial(n);s.forEach(c=>{e.hasOwnProperty(c.uid)||(e[c.uid]=[]),e[c.uid].push(n)})}),e}getTexturesForMaterial(e){return e.getActiveTextures()}getTexturesExclusivelyForMaterial(e){let n=this.getTexturesForMaterial(e),s=this.getTextureMaterialsMap();for(var c=0;c<n.length;c++){let m=n[c];var u=s.hasOwnProperty(m.uid)?s[m.uid]:[];u.length>1&&n.splice(c--,1)}return n}getStandardMaterialTextures(e){return e.getActiveTextures()}getPBRBaseSimpleMaterialTextures(e){return e.getActiveTextures()}getPBRMaterialTextures(e){return e.getActiveTextures()}getPBRMetallicRoughnessMaterialTextures(e){return e.getActiveTextures()}getPBRSpecularGlossinessMaterialTextures(e){return e.getActiveTextures()}getNewPBRMaterialTextures(e){return e.getActiveTextures()}createMeshesFromSubMeshes(e){let n=e.getChildMeshes(!0);for(let u=0;u<n.length;u++)this.createMeshesFromSubMeshes(n[u]);let s=[];if(e.subMeshes&&e.subMeshes.length>0)for(let u=0;u<e.subMeshes.length;u++){let m=this.createMeshFromSubMesh(e,u);m&&s.push(m)}let c=new window.BABYLON.VertexData;c.positions=[],c.indices=[],c.normals=[],c.uvs=[],c.uvs2=[],c.applyToMesh(e,!0),e.subMeshes=[],e.material=null,s.forEach(u=>{u.parent=e})}createMeshFromSubMesh(e,n,s){let c=null,u=e.subMeshes[n],m=e.getVerticesData(window.BABYLON.VertexBuffer.PositionKind),b=e.getVerticesData(window.BABYLON.VertexBuffer.NormalKind),k=e.getIndices();if(m&&b&&k){let ve=m.slice(3*u.verticesStart,3*(u.verticesStart+u.verticesCount)),Ae=b.slice(3*u.verticesStart,3*(u.verticesStart+u.verticesCount)),rt=k.slice(u.indexStart,u.indexStart+u.indexCount),re=null;if(e.isVerticesDataPresent(window.BABYLON.VertexBuffer.UVKind)){let tn=e.getVerticesData(window.BABYLON.VertexBuffer.UVKind);tn&&(re=tn.slice(2*u.verticesStart,2*(u.verticesStart+u.verticesCount)))}var W=null;if(e.isVerticesDataPresent(window.BABYLON.VertexBuffer.UV2Kind)){let tn=e.getVerticesData(window.BABYLON.VertexBuffer.UV2Kind);tn&&(W=tn.slice(2*u.verticesStart,2*(u.verticesStart+u.verticesCount)))}for(let tn=0;tn<rt.length;tn++)rt[tn]-=u.verticesStart;let mt=new window.BABYLON.Mesh(s||e.name+"_part_"+u._id,this._scene),nt=new window.BABYLON.VertexData;nt.positions=ve,nt.normals=Ae,nt.indices=rt,re&&(nt.uvs=re),W&&(nt.uvs2=W),nt.applyToMesh(mt),e.material&&(mt.material=e.material instanceof window.BABYLON.MultiMaterial?e.material.subMaterials[u.materialIndex]:e.material)}return c}getNextIncrementalName(e){let n=e;if(e){let b;for(var s=0;this._scene.getMeshByName(n);){if(!b){b=e;var c=e.lastIndexOf("_");if(c>0){var u=e.substring(c+1),m=parseInt(u);m.toString()===u&&(b=e.substring(0,c))}}s++,n=b+"_"+s}}return n}createBox(e,n){let s=n||"Box";s=this.getNextIncrementalName(s);let c=window.BABYLON.Mesh.CreateBox(s,5,this._scene);return c.id=Zakeke.generateUUID(),e&&(c.parent=e),c}createBoundingBox(e,n){let s=n||"BoundingBox";s=this.getNextIncrementalName(s);const c=e?e.getHierarchyBoundingVectors():this.getWorldExtends();if(!c)return this.createBox(e,n);const u=c.min,m=c.max,b=new window.BABYLON.BoundingInfo(u,m),k=m.subtract(u);if(!isFinite(k.length()))return this.createBox(e,n);const W=m.x-u.x,ve=m.y-u.y,Ae=m.z-u.z,rt=window.BABYLON.VertexData.CreateBox({width:W,height:ve,depth:Ae}),re=new window.BABYLON.Mesh(s,this._scene);return rt.applyToMesh(re),re.position.copyFrom(b.boundingBox.centerWorld),re.refreshBoundingInfo(),e&&e.parent&&(re.parent=e.parent),re}createSphere(e,n){let s=n||"Sphere";s=this.getNextIncrementalName(s);const c=window.BABYLON.Mesh.CreateSphere(s,30,5,this._scene);return c.id=Zakeke.generateUUID(),e&&(c.parent=e),c}createPlane(e,n){let s=n||"Plane";s=this.getNextIncrementalName(s);const c=window.BABYLON.Mesh.CreatePlane(s,10,this._scene);return c.id=Zakeke.generateUUID(),e&&(c.parent=e),c}createDisc(e,n){let s=n||"Disc";s=this.getNextIncrementalName(s);const c=window.BABYLON.MeshBuilder.CreateDisc(s,{tessellation:70},this._scene);return c.id=Zakeke.generateUUID(),e&&(c.parent=e),c}createCylinder(e,n){let s=n||"Cylinder";s=this.getNextIncrementalName(s);const c=window.BABYLON.Mesh.CreateCylinder(s,6,6,6,30,1,this._scene,!1);return c.id=Zakeke.generateUUID(),e&&(c.parent=e),c}createTorus(e,n){let s=n||"Torus";s=this.getNextIncrementalName(s);const c=window.BABYLON.Mesh.CreateTorus(s,8,1,50,this._scene,!1);return c.id=Zakeke.generateUUID(),e&&(c.parent=e),c}createKnot(e,n){let s=n||"Knot";s=this.getNextIncrementalName(s);const c=window.BABYLON.Mesh.CreateTorusKnot(s,2,.5,128,64,2,3,this._scene);return c.id=Zakeke.generateUUID(),e&&(c.parent=e),c}createRibbon(e,n){let s=n||"Ribbon";s=this.getNextIncrementalName(s);const c=function(k){for(var W=[],ve=-10;ve<10;ve++)W.push(new window.BABYLON.Vector3(k,ve,Math.sin(k/3)*5*Math.exp(-(ve-k)*(ve-k)/60)+ve/3));return W};for(var u=[],m=0;m<20;m++)u[m]=c(m);const b=window.BABYLON.Mesh.CreateRibbon("ribbon",u,!1,!1,0,this._scene);return b.id=Zakeke.generateUUID(),e&&(b.parent=e),b}async createRoundedCubeAsync(e,n,s){const c=Ii.Shapes.RoundedCubeName,u=Ii.Shapes.RootUrl,m=Ii.Shapes.RoundedCubeFileName;let b=n||"Rounded Cube";return b=this.getNextIncrementalName(b),await this.importPrimitiveShapeAsync(c,u,m,e,b,s)}async createRoundedCylinderAsync(e,n,s){const c=Ii.Shapes.RoundedCylinderName,u=Ii.Shapes.RootUrl,m=Ii.Shapes.RoundedCylinderFileName;let b=n||"Rounded Cylinder";return b=this.getNextIncrementalName(b),await this.importPrimitiveShapeAsync(c,u,m,e,b,s)}async createMatBallAsync(e,n,s){const c=Ii.Shapes.MatBallName,u=Ii.Shapes.RootUrl,m=Ii.Shapes.MatBallFileName;let b=n||"Mat Ball";return b=this.getNextIncrementalName(b),await this.importPrimitiveShapeAsync(c,u,m,e,b,s)}async createMaleHeadAsync(e,n,s){const c=Ii.Shapes.MaleHeadName,u=Ii.Shapes.RootUrl,m=Ii.Shapes.MaleHeadFileName;let b=n||"Male Head";return b=this.getNextIncrementalName(b),await this.importPrimitiveShapeAsync(c,u,m,e,b,s)}async createFemaleHeadAsync(e,n,s){const c=Ii.Shapes.FemaleHeadName,u=Ii.Shapes.RootUrl,m=Ii.Shapes.FemaleHeadFileName;let b=n||"Female Head";return b=this.getNextIncrementalName(b),await this.importPrimitiveShapeAsync(c,u,m,e,b,s)}async createPokemonBallAsync(e,n,s){const c=Ii.Shapes.PokemonBallName,u=Ii.Shapes.RootUrl,m=Ii.Shapes.PokemonBallFileName;let b=n||"Pokemon Ball";return b=this.getNextIncrementalName(b),await this.importPrimitiveShapeAsync(c,u,m,e,b,s)}async createShaderBallAsync(e,n,s){const c=Ii.Shapes.ShaderBallName,u=Ii.Shapes.RootUrl,m=Ii.Shapes.ShaderBallFileName;let b=n||"Shader Ball";return b=this.getNextIncrementalName(b),await this.importPrimitiveShapeAsync(c,u,m,e,b,s)}async createBootsAsync(e,n,s){const c=Ii.Shapes.BootsName,u=Ii.Shapes.RootUrl,m=Ii.Shapes.BootsFolder,b=Ii.Shapes.BootsFileName;let k=n||"Boots";return k=this.getNextIncrementalName(k),await this.importPrimitiveShapeAsync(c,u+m,b,e,k,s)}async createSuzanneAsync(e,n,s){const c=Ii.Shapes.SuzanneName,u=Ii.Shapes.RootUrl,m=Ii.Shapes.SuzanneFileName;let b=n||"Suzanne";return b=this.getNextIncrementalName(b),await this.importPrimitiveShapeAsync(c,u,m,e,b,s)}async createStepPyramidAsync(e,n,s){const c=Ii.Shapes.StepPyramidName,u=Ii.Shapes.RootUrl,m=Ii.Shapes.StepPyramidFileName;let b=n||"Step Pyramid";return b=this.getNextIncrementalName(b),await this.importPrimitiveShapeAsync(c,u,m,e,b,s)}async createTeapotAsync(e,n,s){const c=Ii.Shapes.TeapotName,u=Ii.Shapes.RootUrl,m=Ii.Shapes.TeapotFileName;let b=n||"Teapot";return b=this.getNextIncrementalName(b),await this.importPrimitiveShapeAsync(c,u,m,e,b,s)}async createAlloyWheelAsync(e,n,s){const c=Ii.Shapes.AlloyWheelName,u=Ii.Shapes.RootUrl,m=Ii.Shapes.AlloyWheelFolder,b=Ii.Shapes.AlloyWheelFileName;let k=n||"Wheel";return k=this.getNextIncrementalName(k),await this.importPrimitiveShapeAsync(c,u+m,b,e,k,s)}async createTryonReferenceGlassesFrameAsync(e,n,s){const c=Ii.TryonReferences.ReferenceGlassesFrameName,u=Ii.TryonReferences.RootUrl,m=Ii.TryonReferences.ReferenceGlassesFrameFileName;let b=n||"Reference Glasses Frame";return b=this.getNextIncrementalName(b),await this.importPrimitiveShapeAsync(c,u,m,e,b,s)}async createTryOnReferenceModelsAsync(e,n,s,c){return await this.importPrimitiveShapeAsync("",Ii.TryonReferences.RootUrl,s,e,n,c,!0)}async importPrimitiveShapeAsync(e,n,s,c,u,m,b=!1){let k=[],W=await window.BABYLON.SceneLoader.ImportMeshAsync(e,n,s,this._scene,m);if(W&&W.meshes){k=W.meshes;for(let ve=0;ve<k.length;ve++){let Ae=k[ve];if(Ae.name==="__root__"){let rt=Ae.getChildMeshes();for(let re=0;re<rt.length;re++){let mt=rt[re];mt.parent=null}Ae.dispose(),k.splice(ve--,1);continue}Ae.id=Zakeke.generateUUID(),c&&(Ae.parent=c)}}return k}setTryOnReferenceVisible(e){const{tryonReferencesModels:n}=this.getVTOMeshes();n.forEach(s=>{s.isVisible=e})}setTryOnReferenceEnabled(e){const{tryonReferencesModels:n}=this.getVTOMeshes();n.forEach(s=>{s.setEnabled(e)})}isTryOnReferenceVisible(){const{tryonReferencesModels:e}=this.getVTOMeshes();return e.length>0&&e[0].isVisible}transformEntireScene(e,n,s,c){var u;const m=(u=this._scene)==null?void 0:u.meshes;m==null||m.forEach(b=>{b.parent==null&&b.setParent(c)}),e&&(c.position=new window.BABYLON.Vector3(e.x,e.y,e.z)),n&&(c.rotation=new window.BABYLON.Vector3(n.x,n.y,n.z)),s&&(c.scaling=new window.BABYLON.Vector3(s.x,s.y,s.z)),m==null||m.forEach(b=>{b.parent==c&&b.setParent(null)})}scaleSceneToTryonReferenceModels(e){this.setSceneScalePercentageForVTO(100,e),this.setScenePositionPercentageForVTO(0,0,0,e)}getSceneScalingPercentageForVTO(){const{userMeshes:e,tryonReferencesModels:n}=this.getVTOMeshes();if(n.length===0||e.length===0)return 100;const s=this._scene.getWorldExtends(Ae=>n.includes(Ae)),c=this._scene.getWorldExtends(Ae=>e.includes(Ae)),u=s.max.x-s.min.x,m=s.max.y-s.min.y,b=s.max.z-s.min.z,k=c.max.x-c.min.x,W=c.max.y-c.min.y,ve=c.max.z-c.min.z;return 1/Math.min(u/k,m/W,b/ve)*100}setSceneScalePercentageForVTO(e,n){const{userMeshes:s,tryonReferencesModels:c}=this.getVTOMeshes();if(c.length===0||s.length===0)return;const u=this._scene.getWorldExtends(Ie=>c.includes(Ie)),m=this._scene.getWorldExtends(Ie=>s.includes(Ie)),b=u.max.x-u.min.x,k=u.max.y-u.min.y,W=u.max.z-u.min.z,ve=m.max.x-m.min.x,Ae=m.max.y-m.min.y,rt=m.max.z-m.min.z,re=Math.min(b/ve,k/Ae,W/rt),{x:mt,y:nt,z:tn}=this.getScenePositionPercentageForVTO();s.filter(Ie=>!Ie.parent).forEach(Ie=>{Ie.scaling.scaleInPlace(re),Ie.scaling.scaleInPlace(e/100),n==="shoes"&&Ie.scaling.scaleInPlace(1.3)}),this.setScenePositionPercentageForVTO(mt,nt,tn)}getScenePositionPercentageForVTO(){const{userMeshes:e,tryonReferencesModels:n}=this.getVTOMeshes();if(n.length===0||e.length===0)return{x:0,y:0,z:0};const s=this._scene.getWorldExtends(b=>n.includes(b)),c=this._scene.getWorldExtends(b=>e.includes(b)),u=s.max.add(s.min).scale(.5),m=c.max.add(c.min).scale(.5).subtract(u);return{x:m.x/(s.max.x-s.min.x)*100,y:m.y/(s.max.y-s.min.y)*100,z:m.z/(s.max.z-s.min.z)*100}}setScenePositionPercentageForVTO(e,n,s,c){const{userMeshes:u,tryonReferencesModels:m}=this.getVTOMeshes();if(m.length===0||u.length===0)return;const b=this._scene.getWorldExtends(re=>m.includes(re)),k=this._scene.getWorldExtends(re=>u.includes(re)),W=b.max.add(b.min).scale(.5),ve=k.max.add(k.min).scale(.5),Ae=W.subtract(ve),rt=new window.BABYLON.Vector3(e/100*(b.max.x-b.min.x),n/100*(b.max.y-b.min.y),s/100*(b.max.z-b.min.z));u.filter(re=>!re.parent).forEach(re=>{re.position.addInPlace(Ae),re.position.addInPlace(rt),c==="shoes"&&(console.log("shoes down and scale up to 0.3"),re.position.y=0)})}getSceneRotationForVTO(){var e;const{userMeshes:n,tryonReferencesModels:s}=this.getVTOMeshes();if(s.length===0||n.length===0)return{x:0,y:0,z:0};const c=n.filter(b=>!b.parent)[0],u=((e=c.rotationQuaternion)==null?void 0:e.toEulerAngles())??c.rotation,m={x:u.x/Math.PI*180,y:u.y/Math.PI*180,z:u.z/Math.PI*180};return m.x=m.x<0?360+m.x:m.x,m.y=m.y<0?360+m.y:m.y,m.z=m.z<0?360+m.z:m.z,m}setSceneRotationForVTO(e,n,s){const{userMeshes:c,tryonReferencesModels:u}=this.getVTOMeshes();if(u.length===0||c.length===0)return;const m=new window.BABYLON.Vector3(e/180*Math.PI,n/180*Math.PI,s/180*Math.PI);c.filter(b=>!b.parent).forEach(b=>{b.rotation=m})}setVTOReferenceVisible(e){const{tryonReferencesModels:n}=this.getVTOMeshes();n.forEach(s=>{s.isVisible=e})}replaceTransformNodeWithMesh(e){let n=null;if(this._scene){const s=e.parent,c=e.getChildren();n=new window.BABYLON.Mesh(e.name,this._scene,s),n.id=Zakeke.generateUUID(),n.scaling=e.scaling.clone(),n.position=e.position.clone(),n.rotation=e.rotation.clone(),e.rotationQuaternion&&(n.rotationQuaternion=e.rotationQuaternion.clone()),c.forEach(u=>u.parent=n),e.dispose(),e.animations.forEach(u=>{n.animations.push(u.clone())}),this._scene.animationGroups.forEach(u=>{u.targetedAnimations.forEach(m=>{m.target===e&&(m.target=n)})}),this._scene.skeletons.forEach(u=>{u.bones.forEach(m=>{m.getTransformNode()===e&&m.linkTransformNode(n)})})}return n}async importMeshesFromUrlAsync(e,n,s,c,u,m){let b;window.BABYLON.GLTFFileLoader.IncrementalLoading=!1,window.BABYLON.SceneLoader.OnPluginActivatedObservable.add(mt=>{b=mt.name});let k=[];const W=await window.BABYLON.SceneLoader.ImportMeshAsync("",e,void 0,this._scene,s,u);W&&(W.meshes.forEach(mt=>{mt.id=Zakeke.generateUUID(),k.push(mt),this.getMeshMaterials(mt).forEach(nt=>nt.id=Zakeke.generateUUID())}),W.transformNodes.forEach(mt=>{mt.id=Zakeke.generateUUID();const nt=this.replaceTransformNodeWithMesh(mt);nt&&k.push(nt)}),W.geometries.forEach(mt=>mt.id=Zakeke.generateUUID()));let ve=window.BABYLON.Tools.GetFilename(e),Ae=ve,rt=ve.lastIndexOf(".");rt!==-1&&(Ae=ve.substr(0,rt));const re=k.filter(mt=>!mt.parent);if(re.length>1||re.length===1&&re[0].name!=="__root__"){const mt=new window.BABYLON.Mesh(Ae,this._scene);mt.id=Zakeke.generateUUID(),mt.metadata={isRealMesh:!0,isGroup:!0},k.push(mt),re.forEach(nt=>{nt.setParent(mt)}),b==="obj"&&(mt.scaling=new window.BABYLON.Vector3(-mt.scaling.x,mt.scaling.y,mt.scaling.z),mt.rotation=new window.BABYLON.Vector3(0,Math.PI,0))}else if(re.length===1){const mt=re[0];if(mt.name==="__root__"){let nt=window.BABYLON.Tools.GetFilename(e),tn=ve.lastIndexOf(".");tn!==-1&&(nt=ve.substring(0,tn)),mt.name=nt,b==="obj"&&(mt.scaling=new window.BABYLON.Vector3(-mt.scaling.x,mt.scaling.y,-mt.scaling.z),mt.rotation=new window.BABYLON.Vector3(0,Math.PI,0))}if(["gltf","glb","obj"].includes(b)){mt.name+="_transforms",mt.metadata={isGltfTransformNode:!0};const nt=new window.BABYLON.Mesh(Ae,this._scene);nt.id=Zakeke.generateUUID(),nt.metadata={isRealMesh:!0,isGroup:!0},k.push(nt),mt.parent=nt}}if(!m&&b==="gltf"||b==="glb"){const mt=[];k.forEach(nt=>{if(nt instanceof window.BABYLON.Mesh){const tn=window.BABYLON.VertexData.ExtractFromMesh(nt),Ie=["uvs","uvs2","uvs3","uvs4","uvs5","uvs6"];for(const Kt of Ie)if(tn&&tn[Kt]&&tn[Kt].length>0)for(let At=0;At<tn[Kt].length;At+=2)tn[Kt][At+1]=1-tn[Kt][At+1];tn.applyToMesh(nt)}this.getMeshMaterials(nt).forEach(tn=>{mt.includes(tn)||mt.push(tn)})}),mt.forEach(nt=>{nt.getActiveTextures().forEach(tn=>{tn instanceof window.BABYLON.Texture&&(tn.vScale*=-1)})})}return this.adjustCamera(b,!1,!1,c,!0),this.setupShaderMaterialsCameraPosition(),k}setupShaderMaterialsCameraPosition(){if(this._scene)for(let n=0;n<this._scene.materials.length;n++){var e=this._scene.materials[n];this.setupShaderMaterialCameraPosition(e)}}setupShaderMaterialCameraPosition(e){if(this._scene&&e&&e instanceof window.BABYLON.ShaderMaterial){const n=this._scene.activeCamera;n&&e.setVector3("cameraPosition",n.position)}}getSceneCmScalingFactor(e=null,n=null){let s=null;if(this._scene){let u=null;for(let m=0;m<this._scene.meshes.length;m++){var c=this._scene.meshes[m];if(c.metadata&&c.metadata.sizecm){u=c;break}}if(e&&n&&(u=n),u){const m=u.getHierarchyBoundingVectors(),b=m.min,k=m.max,W=k.subtract(b);if(isFinite(W.length())){const ve=k.x-b.x,Ae=k.y-b.y,rt=k.z-b.z,re=e||u.metadata.sizecm;return re.width!==void 0&&typeof re.width=="number"&&!isNaN(re.width)&&ve!==0?s=re.width/ve:re.height!==void 0&&typeof re.height=="number"&&!isNaN(re.height)&&Ae!==0?s=re.height/Ae:re.depth!==void 0&&typeof re.depth=="number"&&!isNaN(re.depth)&&rt!==0&&(s=re.depth/rt),s}}}return s}async exportSceneToUsdzAsync(e,n,s,c,u=null,m=null,b=!0){const k=this.getMeshesForAR();let W=e||"scene";return W=W.replace(/[^a-z0-9]/gi,"_").toLowerCase(),await this.exportMeshesToARAsync(W,n,k,s,c,"usdz",u,m,b)}async exportMeshToUsdzAsync(e,n,s=null,c=null,u=!0){const m=this.getMeshHierarchy(n.id);let b=n.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();return await this.exportMeshesToARAsync(b,e,m,void 0,void 0,"usdz",s,c,u)}async exportSceneToRemoteGlTFAsync(e,n,s,c,u=null,m=null,b=!0){const k=this.getMeshesForAR();let W=e||"scene";return W=W.replace(/[^a-z0-9]/gi,"_").toLowerCase(),await this.exportMeshesToARAsync(W,n,k,s,c,"glTF",u,m,b)}async exportMeshToRemoteGlTFAsync(e,n,s=null,c=null,u=!0){const m=this.getMeshHierarchy(n.id);let b=n.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();return await this.exportMeshesToARAsync(b,e,m,void 0,void 0,"glTF",s,c,u)}async exportSceneToRemoteGLBAsync(e,n,s,c,u=null,m=null,b=!0){const k=this.getMeshesForAR();let W=e||"scene";return W=W.replace(/[^a-z0-9]/gi,"_").toLowerCase(),await this.exportMeshesToARAsync(W,n,k,s,c,"glb",u,m,b)}async exportMeshToRemoteGLBAsync(e,n,s=null,c=null,u=!0){const m=this.getMeshHierarchy(n.id);let b=n.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();return await this.exportMeshesToARAsync(b,e,m,void 0,void 0,"glb",s,c,u)}async exportSceneToARMultiformatAsync(e,n,s=["usdz","glb","png"],c,u,m=null,b=null,k=!0){const W=this.getMeshesForAR();let ve=e||"scene";return ve=ve.replace(/[^a-z0-9]/gi,"_").toLowerCase(),await this.exportMeshesToARMultiformatAsync(ve,n,W,s,m,b,k,c,u)}async exportMeshToARMultiformatAsync(e,n,s=["usdz","glb","png"],c=null,u=null,m=!0,b,k){const W=this.getMeshHierarchy(n.id);let ve=n.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();return await this.exportMeshesToARMultiformatAsync(ve,e,W,s,c,u,m,b,k)}convertGltfTransformNodes(e){const n=[];return e.filter(s=>s.metadata&&s.metadata.isGltfTransformNode).forEach(s=>{const c=new window.BABYLON.TransformNode(s.name+"-transform-node",this._scene);c.scaling.z=-1;const u=new window.BABYLON.Quaternion;u.set(0,1,0,0),c.rotationQuaternion=u,n.push([s,s.parent,c]),s.setParent(c)}),n}restoreGltfTransformNodes(e){e.forEach(([n,s,c])=>{n.setParent(s),c.dispose()})}async getGltfBlobForARExport(e,n,s){var c;const u=this.convertGltfTransformNodes(s);(c=this._scene)==null||c.render();const m={meshes:s,materials:this.getMeshesMaterials(s),transformNodes:this._scene.transformNodes,lights:void 0,exportTextureUrls:n!=null,rootUrl:n,shouldExportNode:W=>{for(let ve=0;ve<s.length;ve++)if(s[ve]===W)return!0;return!1}},b=await window.BABYLON.GLTF2Export.GLTFAsync(this._scene,e,m);if(b){const W=new JSZip,ve=b.serverImages&&b.glTFFiles.hasOwnProperty("TextureUrls.txt")?b.serverImages:[];for(var k in b.glTFFiles)if(ve.indexOf(k)===-1){let rt=b.glTFFiles[k];Xt.EndsWith(k,".gltf")||Xt.EndsWith(k,".bin")?W.file(k,rt,{compression:"DEFLATE",compressionOptions:{level:9}}):W.file(k,rt,{compression:"STORE"})}this.restoreGltfTransformNodes(u),this._scene.render();let Ae=await W.generateAsync({type:"blob"});if(Ae)return Ae=Ae,Ae.lastModifiedDate=new Date,Ae.name="arobj.zip",Ae}return null}async exportMeshToGLBBlob(e,n){const s=this.getTryOnMeshHierarchy(n),c=this.convertGltfTransformNodes(s),u={meshes:s,materials:this.getMeshesMaterials(s),transformNodes:void 0,lights:void 0,exportTextureUrls:e!=null,rootUrl:e,shouldExportNode:k=>{for(let W=0;W<s.length;W++)if(s[W]===k)return!0;return!1}},m=await window.BABYLON.GLTF2Export.GLBAsync(this._scene,"model",u).catch(k=>(console.error(k),null));let b=null;if(m&&m.glTFFiles){for(let k in m.glTFFiles)if(Xt.EndsWith(k,".glb")){const W=new Hn,ve=await m.glTFFiles[k].arrayBuffer(),Ae=W.readBinary(ve);Ae.getRoot().listNodes().filter(re=>re.getParent()===null||re.getParent()instanceof Vt).forEach(re=>{});const rt=W.writeBinary(Ae);b=new Blob([rt],{type:"model/gltf-binary"})}}return this.restoreGltfTransformNodes(c),b}async exportMeshesToARAsync(e,n,s,c,u,m="usdz",b=null,k=null,W=!0){let ve="";if(c&&u&&Zakeke.config){const Ae=Zakeke.config.baseApiUrl+"artasks/cachedresults/"+c+"/"+u+"/"+m;try{ve=await jQuery.ajax({url:Ae,cache:!1,contentType:!1,processData:!1,type:"GET"})}catch{ve=""}}if(!ve){let Ae=this.getSceneCmScalingFactor(b,k);const rt=await this.getGltfBlobForARExport(e,n,s);if(rt){const re={flipTextures:!0,formats:[m]};c&&(re.sceneID=c),u&&(re.sceneCode=u),Ae&&(re.scale=Ae);let mt=!0;window.isOwin!=null&&(mt=window.isOwin);const nt=await new Nd("artasks",window.token,mt).upload(rt,re);nt&&nt.length>0&&(ve=nt[0].arFileUrl)}}return ve}async exportMeshesToARMultiformatAsync(e,n,s,c=["usdz","glb","png"],u=null,m=null,b=!0,k,W){let ve=[],Ae=[];if(k&&W&&Zakeke.config)for(let rt=0;rt<c.length;rt++){const re=c[rt],mt=Zakeke.config.baseApiUrl+"artasks/cachedresults/"+k+"/"+W+"/"+re;try{const nt=await jQuery.ajax({url:mt,cache:!1,contentType:!1,processData:!1,type:"GET"});nt&&Ae.push({format:re,arFileUrl:nt})}catch{}ve=Ae}if(Ae.length!==c.length){const rt=this.getSceneCmScalingFactor(u,m),re=Ae.map(tn=>tn.format),mt=c.filter(tn=>!re.includes(tn)),nt=await this.getGltfBlobForARExport(e,n,s);if(nt){const tn={flipTextures:!0,formats:mt};k&&(tn.sceneID=k),W&&(tn.sceneCode=W),rt&&(tn.scale=rt);let Ie=!0;window.isOwin!==void 0&&(Ie=window.isOwin);const Kt=await new Nd("artasks",window.token,Ie).upload(nt,tn);if(Kt&&Kt.length>0)for(const At of Kt)At&&At.arFileUrl&&ve.push({format:At.format,arFileUrl:At.arFileUrl})}}return ve}async exportSceneToLocalGlTFBlobsAsync(){const e=Zakeke.generateUUID(),n=this.getSceneToGltfExportOptions(),s=await window.BABYLON.GLTF2Export.GLTFAsync(this._scene,e,n);let c=[];for(let u in s.glTFFiles)c.push(s.glTFFiles[u]);return c}async exportSceneToLocalGlTFUrlsAsync(){const e=[],n=Zakeke.generateUUID(),s=this.getSceneToGltfExportOptions(),c=await window.BABYLON.GLTF2Export.GLTFAsync(this._scene,n,s);if(c)for(let m in c.glTFFiles){var u=c.glTFFiles[m];e.push(this.getGltfFileUrl(m,u))}return e}async downloadSceneLocalGltfAsync(){const e=Zakeke.generateUUID(),n=this.getSceneToGltfExportOptions(),s=await window.BABYLON.GLTF2Export.GLTFAsync(this._scene,e,n);s&&s.downloadFiles()}async exportSceneToLocalGLBBlobAsync(){const e=await this.getSceneLocalGLBBlobInfoAsync();return e?e.blob:null}async exportSceneToLocalGLBBase64Async(){let e=null;const n=await this.getSceneLocalGLBBlobInfoAsync();if(n&&n.blob instanceof Blob){let s=new FileReader;s.readAsDataURL(n.blob),s.onloadend=()=>{let c=s.result;typeof c=="string"&&(e=c)}}return e}async exportSceneToLocalGLBUrlAsync(){let e=null;const n=await this.getSceneLocalGLBBlobInfoAsync();return n&&n.name&&n.blob instanceof Blob&&(e=this.getGltfFileUrl(n.name,n.blob)),e}async downloadSceneLocalGLBAsync(){var e;(e=this._scene)==null||e.meshes.forEach(c=>{c.isVisible=!0});const n=await this.getSceneLocalGLBBlobInfoAsync();if(n&&n.name&&n.blob instanceof Blob){let c=this.getGltfFileUrl(n.name,n.blob);var s=document.createElement("a");document.body.appendChild(s),s.setAttribute("type","hidden"),s.download=n.name,s.href=c,s.click(),document.body.removeChild(s),URL.revokeObjectURL(c)}}async getSceneLocalGLBBlobInfoAsync(e=null,n=null){let s={name:null,blob:null};const c=Zakeke.generateUUID(),u=this.getSceneToGltfExportOptions();let m=await window.BABYLON.GLTF2Export.GLBAsync(this._scene,c,u).catch(b=>(console.error(b),null));if(m&&m.glTFFiles){for(let b in m.glTFFiles)if(Xt.EndsWith(b,".glb")){let k=this.getSceneCmScalingFactor(),W=1;k&&(W=k/100);const ve=window.BABYLON.Quaternion.RotationAxis(window.BABYLON.Axis.Y,2*Math.PI),Ae=new Hn,rt=await m.glTFFiles[b].arrayBuffer(),re=Ae.readBinary(rt),mt=re.getRoot().listNodes().filter(At=>At.getParent()===null||At.getParent()instanceof Vt),nt=[0,1,0,0],tn=mt.every(At=>{const an=At.getRotation();return nt.length===an.length&&nt.every((Cn,He)=>Cn===an[He])});mt.forEach(At=>{At.setScale([W,W,W]),tn&&At.setRotation([ve.x,ve.y,ve.z,ve.w])});const Ie=Ae.writeBinary(re),Kt=new Blob([Ie],{type:"model/gltf-binary"});s.name=b,s.blob=Kt;break}}return s}async exportSceneToLocalUSDZBlobAsync(){const e=await this.getSceneLocalUSDZBlobInfoAsync();return e?e.blob:null}async exportSceneToLocalUSDZBase64Async(){let e=null;const n=await this.getSceneLocalUSDZBlobInfoAsync();if(n&&n.blob instanceof Blob){let s=new FileReader;s.readAsDataURL(n.blob),s.onloadend=()=>{let c=s.result;typeof c=="string"&&(e=c)}}return e}async exportSceneToLocalUSDZUrlAsync(){let e=null;const n=await this.getSceneLocalUSDZBlobInfoAsync();return n&&n.name&&n.blob instanceof Blob&&(e=this.getUsdzFileUrl(n.name,n.blob)),e}async downloadSceneLocalUSDZAsync(){const e=await this.getSceneLocalUSDZBlobInfoAsync();if(e&&e.name&&e.blob instanceof Blob){let s=this.getUsdzFileUrl(e.name,e.blob);var n=document.createElement("a");document.body.appendChild(n),n.setAttribute("type","hidden"),n.download=e.name,n.href=s,n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}}async getSceneLocalUSDZBlobInfoAsync(){let e={name:null,blob:null};const n=await this.getSceneLocalGLBBlobInfoAsync();if(n&&n.name&&n.blob&&n.blob instanceof Blob){const s=this.getGltfFileUrl(n.name,n.blob),c=await vn.convertGlbToUsdz(s);e.name=n.name.replace(".glb",".usdz"),e.blob=c}return e}getSceneToGltfExportOptions(){var e=this.getMeshesForAR(),n={meshes:e,materials:this.getMeshesMaterials(e),transformNodes:void 0,lights:void 0,exportTextureUrls:!1,rootUrl:null,shouldExportNode:s=>{for(var c=0;c<e.length;c++)if(e[c]===s)return!0;return!1}};return n}getGltfFileUrl(e,n){var s=void 0;return Xt.EndsWith(e,".glb")?s={type:"model/gltf-binary"}:Xt.EndsWith(e,".bin")?s={type:"application/octet-stream"}:Xt.EndsWith(e,".gltf")?s={type:"model/gltf+json"}:Xt.EndsWith(e,".jpeg")?s={type:"image/jpeg"}:Xt.EndsWith(e,".png")&&(s={type:"image/png"}),window.URL.createObjectURL(new Blob([n],s))}getUsdzFileUrl(e,n){var s={type:"model/vnd.usdz+zip"};return window.URL.createObjectURL(new Blob([n],s))}exportSceneToBabylon(){const e=window.BABYLON.SceneSerializer.Serialize(this._scene);return JSON.stringify(e)}exportVisibleMeshesToBabylon(){const e=this.getVisibleMeshes(),n=window.BABYLON.SceneSerializer.SerializeMesh(e,!1,!1);return JSON.stringify(n)}downloadImageFromBase64(e,n,s){var c=document.createElement("a");c.href=e,c.download=n,c.click(),c.remove()}getStandardMaterialTextureType(e,n){return e.diffuseTexture===n?"diffuse":e.emissiveTexture===n?"emissive":e.ambientTexture===n?"ambient":e.lightmapTexture===n?"lightmap":e.opacityTexture===n?"opacity":e.specularTexture===n?"specular":e.reflectionTexture===n?"reflection":e.refractionTexture===n?"refraction":e.bumpTexture===n?"bump":null}getPBRMetallicRoughnessMaterialTextureType(e,n){return e.environmentTexture===n?"environment":e.normalTexture===n?"normal":e.emissiveTexture===n?"emissive":e.occlusionTexture===n?"occlusion":e.baseTexture===n?"base":e.metallicRoughnessTexture===n?"metallicRoughness":null}getPBRSpecularGlossinessMaterialTextureType(e,n){return e.environmentTexture===n?"environment":e.normalTexture===n?"normal":e.emissiveTexture===n?"emissive":e.occlusionTexture===n?"occlusion":e.diffuseTexture===n?"diffuse":e.specularGlossinessTexture===n?"specularGlossiness":null}getPBRMaterialTextureType(e,n){if(e.cameraColorGradingTexture===n)return"cameraColorGrading";if(e.albedoTexture===n)return"albedo";if(e.ambientTexture===n)return"ambient";if(e.opacityTexture===n)return"opacity";if(e.reflectionTexture===n)return"reflection";if(e.emissiveTexture===n)return"emissive";if(e.reflectivityTexture===n)return"reflectivity";if(e.metallicTexture===n)return"metallic";if(e.microSurfaceTexture===n)return"microSurface";if(e.bumpTexture===n)return"bump";if(e.lightmapTexture===n)return"lightmap";if(e.refractionTexture===n)return"refraction";if(e.clearCoat){if(e.clearCoat.texture===n)return"clearCoat";if(e.clearCoat.bumpTexture===n)return"clearCoat_bump";if(e.clearCoat.tintTexture===n)return"clearCoat_tint";if(e.clearCoat.textureRoughness===n)return"clearCoat_textureRoughness";if(e.clearCoat.texture===n)return"clearCoat_texture"}if(e.anisotropy&&e.anisotropy.texture===n)return"anisotropy_texture";if(e.sheen){if(e.sheen.texture===n)return"sheen_texture";if(e.sheen.textureRoughness===n)return"sheen_textureRoughness"}if(e.subSurface){if(e.subSurface.thicknessTexture===n)return"subSurface_thickness";if(e.subSurface.refractionIntensityTexture===n)return"subSurface_refractionIntensity";if(e.subSurface.translucencyIntensityTexture===n)return"subSurface_translucencyIntensity"}return null}getZakekePBRMaterialTextureType(e,n){return e.albedoTexture===n?"albedo":e.bumpTexture===n?"bump":e.reflectionTexture===n?"reflection":e.matCapReflectionTexture===n?"matCapReflection":e.reflectivityTexture===n?"reflectivity":e.microsurfaceTexture===n?"microsurface":e.ambientTexture===n?"ambient":e.aoTexture===n?"ao":e.opacityTexture===n?"opacity":null}getMaterialTextureType(e,n){return e instanceof window.BABYLON.StandardMaterial?this.getStandardMaterialTextureType(e,n):e instanceof window.BABYLON.PBRMetallicRoughnessMaterial?this.getPBRMetallicRoughnessMaterialTextureType(e,n):e instanceof window.BABYLON.PBRSpecularGlossinessMaterial?this.getPBRSpecularGlossinessMaterialTextureType(e,n):e instanceof window.BABYLON.PBRMaterial?this.getPBRMaterialTextureType(e,n):e instanceof Zakeke.PBRMaterial?this.getZakekePBRMaterialTextureType(e,n):null}getMaterialTexture(e,n){if(e instanceof window.BABYLON.StandardMaterial)switch(n){case"diffuse":return e.diffuseTexture;case"emissive":return e.emissiveTexture;case"ambient":return e.ambientTexture;case"lightmap":return e.lightmapTexture;case"opacity":return e.opacityTexture;case"specular":return e.specularTexture;case"reflection":return e.reflectionTexture;case"refraction":return e.refractionTexture;case"bump":return e.bumpTexture}else if(e instanceof window.BABYLON.PBRMetallicRoughnessMaterial)switch(n){case"environment":case"normal":case"emissive":case"occlusion":case"base":case"metallicRoughness":return e[`${n}Texture`]}else if(e instanceof window.BABYLON.PBRSpecularGlossinessMaterial)switch(n){case"environment":case"normal":case"emissive":case"occlusion":case"diffuse":case"specularGlossiness":return e[`${n}Texture`]}else if(e instanceof window.BABYLON.PBRMaterial)switch(n){case"cameraColorGrading":return e.cameraColorGradingTexture;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":return e[`${n}Texture`];case"refraction":return e.refractionTexture;case"environmentBRDF":return e.environmentBRDFTexture;case"clearCoat_texture":return e.clearCoat.texture;case"clearCoat_bump":return e.clearCoat.bumpTexture;case"clearCoat_tint":return e.clearCoat.tintTexture;case"clearCoat_textureRoughness":return e.clearCoat.textureRoughness;case"anisotropy_texture":return e.anisotropy.texture;case"sheen_texture":return e.sheen.texture;case"sheen_textureRoughness":return e.sheen.textureRoughness;case"subSurface_thickness":return e.subSurface.thicknessTexture;case"subSurface_translucencyIntensity":return e.subSurface.translucencyIntensityTexture;case"subSurface_refractionIntensity":return e.subSurface.refractionIntensityTexture}else if(e instanceof Zakeke.PBRMaterial)switch(n){case"albedo":return e.albedoTexture;case"bump":return e.bumpTexture;case"reflection":return e.reflectionTexture;case"matCapReflection":return e.matCapReflectionTexture;case"reflectivity":return e.reflectivityTexture;case"microsurface":return e.microsurfaceTexture;case"ambient":return e.ambientTexture;case"ao":return e.aoTexture;case"opacity":return e.opacityTexture}return null}applyTexture(e,n,s){if(e&&s=="lightmap"&&(e.coordinatesIndex=1,(n instanceof window.BABYLON.StandardMaterial||n instanceof window.BABYLON.PBRMaterial||n instanceof window.BABYLON.PBRBaseSimpleMaterial)&&(n.useLightmapAsShadowmap=!0)),n instanceof window.BABYLON.StandardMaterial)switch(s){case"diffuse":n.diffuseTexture=e;break;case"emissive":n.emissiveTexture=e;break;case"ambient":n.ambientTexture=e;break;case"lightmap":n.lightmapTexture=e;break;case"opacity":n.opacityTexture=e;break;case"specular":n.specularTexture=e;break;case"reflection":n.reflectionTexture=e;break;case"refraction":n.refractionTexture=e;break;case"bump":n.bumpTexture=e;break}else if(n instanceof window.BABYLON.PBRMetallicRoughnessMaterial)switch(s){case"environment":case"normal":case"emissive":case"occlusion":case"base":case"metallicRoughness":n[`${s}Texture`]=e;break}else if(n instanceof window.BABYLON.PBRSpecularGlossinessMaterial)switch(s){case"environment":case"normal":case"emissive":case"occlusion":case"diffuse":case"specularGlossiness":n[`${s}Texture`]=e;break}else if(n instanceof window.BABYLON.PBRMaterial)switch(s){case"cameraColorGrading":n.cameraColorGradingTexture=e;break;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":n[`${s}Texture`]=e;break;case"refraction":n.refractionTexture=e;break;case"environmentBRDF":n.environmentBRDFTexture=e;break;case"clearCoat_texture":n.clearCoat.texture=e;break;case"clearCoat_bump":n.clearCoat.bumpTexture=e;break;case"clearCoat_tint":n.clearCoat.tintTexture=e;break;case"clearCoat_textureRoughness":n.clearCoat.textureRoughness=e;break;case"anisotropy_texture":n.anisotropy.texture=e;break;case"sheen_texture":n.sheen.texture=e;break;case"sheen_textureRoughness":n.sheen.textureRoughness=e;break;case"subSurface_thickness":n.subSurface.thicknessTexture=e;break;case"subSurface_translucencyIntensity":n.subSurface.translucencyIntensityTexture=e;break;case"subSurface_refractionIntensity":n.subSurface.refractionIntensityTexture=e;break}else if(n instanceof window.BABYLON.ShaderMaterial)e&&e instanceof window.BABYLON.Texture?n.setTexture(s,e):n.removeTexture(s);else if(n instanceof Zakeke.PBRMaterial)switch(s){case"albedo":n.albedoTexture=e;break;case"bump":n.bumpTexture=e;break;case"reflection":n.reflectionTexture=e;break;case"matCapReflection":n.matCapReflectionTexture=e;break;case"reflectivity":n.reflectivityTexture=e;break;case"microsurface":n.microsurfaceTexture=e;break;case"ambient":n.ambientTexture=e;break;case"ao":n.aoTexture=e;break;case"opacity":n.opacityTexture=e;break}}applyTextureOnSerializedMaterial(e,n,s,c){if(e&&s=="lightmap"&&(e.coordinatesIndex=1,(c==="BABYLON.StandardMaterial"||c==="BABYLON.PBRMaterial"||c==="BABYLON.PBRBaseSimpleMaterial")&&(n.useLightmapAsShadowmap=!0)),c==="BABYLON.StandardMaterial")n[`${s}Texture`]=e;else if(c==="BABYLON.PBRMetallicRoughnessMaterial")n[`${s}Texture`]=e;else if(c==="BABYLON.PBRSpecularGlossinessMaterial")n[`${s}Texture`]=e;else if(c==="BABYLON.PBRMaterial")switch(s){case"cameraColorGrading":n.cameraColorGradingTexture=e;break;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":case"refraction":n[`${s}Texture`]=e;break;case"environmentBRDF":n.environmentBRDFTexture=e;break;case"clearCoat_texture":n.clearCoat.texture=e;break;case"clearCoat_bump":n.clearCoat.bumpTexture=e;break;case"clearCoat_tint":n.clearCoat.tintTexture=e;break;case"clearCoat_textureRoughness":n.clearCoat.textureRoughness=e;break;case"anisotropy_texture":n.anisotropy.texture=e;break;case"sheen_texture":n.sheen.texture=e;break;case"sheen_textureRoughness":n.sheen.textureRoughness=e;break;case"subSurface_thickness":n.subSurface.thicknessTexture=e;break;case"subSurface_translucencyIntensity":n.subSurface.translucencyIntensityTexture=e;break;case"subSurface_refractionIntensity":n.subSurface.refractionIntensityTexture=e;break}else c==="Zakeke.PBRMaterial"&&(n[`${s}Texture`]=e)}getSerializedMaterialTexture(e,n,s){if(s==="BABYLON.StandardMaterial")return e[`${n}Texture`];if(s==="BABYLON.PBRMetallicRoughnessMaterial")return e[`${n}Texture`];if(s==="BABYLON.PBRSpecularGlossinessMaterial")return e[`${n}Texture`];if(s==="BABYLON.PBRMaterial")switch(n){case"cameraColorGrading":return e.cameraColorGradingTexture;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":case"refraction":return e[`${n}Texture`];case"environmentBRDF":return e.environmentBRDFTexture;case"clearCoat_texture":return e.clearCoat.texture;case"clearCoat_bump":return e.clearCoat.bumpTexture;case"clearCoat_tint":return e.clearCoat.tintTexture;case"clearCoat_textureRoughness":return e.clearCoat.textureRoughness;case"anisotropy_texture":return e.anisotropy.texture;case"sheen_texture":return e.sheen.texture;case"sheen_textureRoughness":return e.sheen.textureRoughness;case"subSurface_thickness":return e.subSurface.thicknessTexture;case"subSurface_translucencyIntensity":return e.subSurface.translucencyIntensityTexture;case"subSurface_refractionIntensity":return e.subSurface.refractionIntensityTexture}else if(s==="Zakeke.PBRMaterial")return e[`${n}Texture`];return null}getMaterialTypeName(e){return e instanceof window.BABYLON.StandardMaterial?"BABYLON.StandardMaterial":e instanceof window.BABYLON.PBRMetallicRoughnessMaterial?"BABYLON.PBRMetallicRoughnessMaterial":e instanceof window.BABYLON.PBRSpecularGlossinessMaterial?"BABYLON.PBRSpecularGlossinessMaterial":e instanceof window.BABYLON.PBRMaterial?"BABYLON.PBRMaterial":e instanceof window.BABYLON.ShaderMaterial?"BABYLON.ShaderMaterial":e instanceof Zakeke.PBRMaterial?"Zakeke.PBRMaterial":"BABYLON.StandardMaterial"}async exportMeshToBabylon(e){const n=this.getMeshHierarchy(e.id);return await this.exportMeshesToBabylon(n)}async exportMeshesToBabylon(e){const n=this.getMeshesMaterials(e),s=e.map(u=>({id:u.id,doNotSerialize:u.doNotSerialize})),c=n.map(u=>({id:u.id,doNotSerialize:u.doNotSerialize}));e.forEach(u=>u.doNotSerialize=!1),n.forEach(u=>u.doNotSerialize=!1);try{const u={};for(let k=0;k<n.length;k++){const W=n[k],ve=W.id,Ae=this.getMaterialDynamicTextures(W);if(Ae.length>0){u[ve]={materialType:this.getMaterialTypeName(W),textures:[]};for(let rt=0;rt<Ae.length;rt++){const re=Ae[rt],mt=Zakeke.generateUUID(),nt=this.getMaterialTextureType(W,re),tn=await this.exportTextureToBase64Async(re,"image/png");if(nt&&tn){const Ie={id:mt,type:nt,base64String:tn,isProcedural:re instanceof window.BABYLON.ProceduralTexture};u[ve].textures.push(Ie)}}}}const m=window.BABYLON.SceneSerializer.SerializeMesh(e,!1,!1);for(const k of m.materials){const W=Object.getOwnPropertyNames(k).filter(Ae=>Ae.slice(-7)==="Texture"&&typeof k[Ae]=="object"),ve=k.id;if(u.hasOwnProperty(ve)){const Ae=u[ve],rt=Ae.materialType,re=Ae.textures;for(const mt of re){const nt=this.getSerializedMaterialTexture(k,mt.type,Ae.materialType);if(nt){if(mt.isProcedural){const tn=new window.BABYLON.Texture(mt.base64String,this._scene,void 0,void 0,void 0,void 0);await Qo.whenTextureIsReadyAsync(tn),tn.uScale=nt.uScale,tn.vScale=nt.vScale,tn.uOffset=nt.uOffset,tn.vOffset=nt.vOffset,tn.uAng=nt.uAng,tn.vAng=nt.vAng,tn.level=nt.level,tn.coordinatesIndex=nt.coordinatesIndex,tn.coordinatesMode=nt.coordinatesMode,tn.wrapU=nt.wrapU,tn.wrapV=nt.wrapV;const Ie=tn.serialize();Ie.url=mt.base64String,Ie.name="prcedural texture",this.applyTextureOnSerializedMaterial(Ie,k,mt.type,rt),tn.dispose()}}else nt.url=mt.base64String,nt.name="dynamic texture"}}}let b=JSON.stringify(m);return e.forEach(k=>{var W;return k.doNotSerialize=(W=s.find(ve=>ve.id===k.id))==null?void 0:W.doNotSerialize}),n.forEach(k=>k.doNotSerialize=c.find(W=>W.id===k.id).doNotSerialize),b}finally{e.forEach(u=>{var m;return u.doNotSerialize=(m=s.find(b=>b.id===u.id))==null?void 0:m.doNotSerialize}),n.forEach(u=>u.doNotSerialize=c.find(m=>m.id===u.id).doNotSerialize)}}async exportMeshesForTyOnToBabylon(){const e=this.getMeshesForTryOn();return await this.exportMeshesToBabylon(e)}downloadBlob(e){const n=URL.createObjectURL(e),s=document.createElement("a");s.download="mesh.json",s.href=n,s.click(),URL.revokeObjectURL(n)}async downloadMeshBabylonAsync(e){const n=await this.exportMeshToBabylon(e);if(n){const s=new Blob([n],{type:"application/json"});this.downloadBlob(s)}}async downloadMeshesBabylonAsync(e){const n=await this.exportMeshesToBabylon(e);if(n){const s=new Blob([n],{type:"application/json"});this.downloadBlob(s)}}async loadAllDelayedMaterialsAsync(e,n){let s=[];if(this._scene&&this._scene.metadata&&this._scene.metadata.delayedMaterials){var c={};for(var u in this._scene.metadata.delayedMaterials)c[u]={name:this._scene.metadata.delayedMaterials[u].name,file:this._scene.metadata.delayedMaterials[u].file};s=await this.loadMaterialsAsync(e,c,n)}return s}async loadDelayedMaterialsAsync(e,n){let s=[];if(this._scene&&this._scene.metadata&&this._scene.metadata.delayedMaterials){for(var c={},u=0;u<n.length;u++)this._scene.metadata.delayedMaterials.hasOwnProperty(n[u])&&(c[n[u]]={name:this._scene.metadata.delayedMaterials[n[u]].name,file:this._scene.metadata.delayedMaterials[n[u]].file});s=await this.loadMaterialsAsync(e,c)}return s}async loadDelayedMaterialAsync(e,n){if(this._scene&&this._scene.metadata&&this._scene.metadata.delayedMaterials){var s={};if(this._scene.metadata.delayedMaterials.hasOwnProperty(n)){s[n]={name:this._scene.metadata.delayedMaterials[n].name,file:this._scene.metadata.delayedMaterials[n].file};let c=await this.loadMaterialsAsync(e,s);if(c.length>0)return c[0]}}return null}async loadMaterialsAsync(e,n,s){const c=[];let u=[];for(let b in n){const k=this._scene.getMaterialByID(b);if(k)c.push(k);else{const W=n[b];u.push(this.loadMaterialInternalAsync(b,e,W.file))}}const m=await Promise.all(u);for(let b=0;b<m.length;b++){const k=m[b],W=JSON.parse(k),ve=window.BABYLON.Material.Parse(W,this._scene,e);ve&&(Logger.info("Waiting for material ready: "+ve.id+" - "+ve.name),await Qo.whenAllMaterialTexturesAreReady(ve),Logger.info("Material ready: "+ve.id+" - "+ve.name),c.push(ve),await(s==null?void 0:s(b+1,m.length)))}return this.setupShaderMaterialsCameraPosition(),c}loadMaterialInternalAsync(e,n,s){if(Logger.info("Loading delayed material: "+e),this._loadingMaterials.hasOwnProperty(e))return this._loadingMaterials[e];let c=Xt.EndsWith(n,"/")?"":"/";var u=n+c+s;let m=new Promise((b,k)=>{window.BABYLON.Tools.LoadFile(u,W=>{Logger.info("Loaded delayed material: "+e),b(W),delete this._loadingMaterials[e]},void 0,void 0,!1,(W,ve)=>{k(ve),delete this._loadingMaterials[e]})});return this._loadingMaterials[e]=m,m}showMesh(e){this.showHideMesh(e,!0)}hideMesh(e){this.showHideMesh(e,!1)}showHideMesh(e,n){var s=(u,m)=>{u.isVisible=m;var b=u.getChildMeshes(!0);b&&b.forEach(k=>{s(k,m)})},c=this._scene.getMeshById(e);c&&s(c,n)}changeMaterialColor(e,n,s){for(let c=0;c<this._scene.meshes.length&&this._scene.meshes[c].material!==e;c++);n&&e[n]!==void 0&&(e[n]=s)}applyMaterialByName(e,n){if(this._scene){let s=this._scene.getMaterialByName(e);s&&this.applyMaterial(s,n)}}applyMaterial(e,n){var s=c=>{if(c.subMeshes&&c.subMeshes.length>0&&c.material&&c.material instanceof window.BABYLON.MultiMaterial)for(let m=0;m<c.subMeshes.length;m++){let b=c.subMeshes[m];this.applyMaterialToSubMesh(e,c,b)}else c.material=e;var u=c.getChildMeshes(!0);u&&u.forEach(m=>{s(m)})};n&&s(n)}applyMaterialToSubMeshByName(e,n,s){var c=this._scene.getMaterialByName(e);c&&this.applyMaterialToSubMesh(c,n,s)}applyMaterialToSubMesh(e,n,s){const c=s.materialIndex,u=n||s.getMesh();u.material instanceof window.BABYLON.MultiMaterial&&c>=0&&c<u.material.subMaterials.length&&(u.material.subMaterials[c]=e)}getSubMeshMaterial(e,n){const s=n.materialIndex,c=e||n.getMesh();return c.material instanceof window.BABYLON.MultiMaterial&&s>=0&&s<c.material.subMaterials.length?c.material.subMaterials[s]:null}async prefetchTexturesFormMeshAsync(e){e.material&&await this.prefetchTexturesForMaterialAsync(e.material);var n=e.getChildMeshes(!0);for(let s=0;s<n.length;s++){let c=n[s];c.material&&await this.prefetchTexturesForMaterialAsync(c.material)}}async prefetchTexturesForMaterialAsync(e){if(e){var n=this.getTexturesForMaterial(e);for(let s=0;s<n.length;s++)await Qo.whenTextureIsReadyAsync(n[s])}}checkDelayState(e){e instanceof window.BABYLON.Mesh&&e._checkDelayState();var n=e.getChildMeshes(!0);n.forEach(s=>this.checkDelayState(s))}createEnvelopeMesh(e){let n=.01;const s=e.getHierarchyBoundingVectors();if(s){const u=s.min,m=s.max;n=new window.BABYLON.BoundingInfo(u,m).boundingSphere.radius*.005}const c=this.cloneMesh(e.id,!0,!0);return c&&c instanceof window.BABYLON.Mesh&&this.expandMesh(c,n),c}expandMesh(e,n){const s=new Dn;if(e&&e instanceof window.BABYLON.Mesh){s.expandMesh(e,n);const c=e.getChildMeshes();for(const u of c)u instanceof window.BABYLON.Mesh&&s.expandMesh(u,n)}}cloneMesh(e,n=!1,s=!1){let c=null;if(this._scene){const u=this._scene.getMeshById(e);if(u){const m=this.getNextIncrementalName(u.name);if(c=u.clone(m,u.parent),c){c.id=Zakeke.generateUUID(),n&&this.duplicateGeometry(u,c,s);const b=c.getChildMeshes();for(const k of b){const W=this._scene.getMeshById(k.id);k.id=Zakeke.generateUUID();const ve=k.parent?k.parent.name:null;if(ve){const Ae=k.name.indexOf(ve+".")+ve.length+1;k.name=k.name.substr(Ae)}W&&n&&this.duplicateGeometry(W,k,s)}}}}return c}duplicateGeometry(e,n,s=!1){if(e instanceof window.BABYLON.Mesh&&n instanceof window.BABYLON.Mesh){const c=window.BABYLON.VertexData.ExtractFromMesh(e,!0,!0);return new window.BABYLON.Geometry(Zakeke.generateUUID(),n.getScene(),c,s,n)}return null}getSceneMaterialMetadata(e){return this._scene&&this._scene.metadata&&this._scene.metadata.materialsMetadata&&this._scene.metadata.materialsMetadata.hasOwnProperty(e)?this._scene.metadata.materialsMetadata[e]:null}getOrCreateSceneMaterialMetadata(e){let n=this.getSceneMaterialMetadata(e);return n||(n={},this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.materialsMetadata||(this._scene.metadata.materialsMetadata={}),this._scene.metadata.materialsMetadata[e]=n),n}removeSceneMaterialMetadata(e){this._scene.metadata&&this._scene.metadata.materialsMetadata&&this._scene.metadata.materialsMetadata.hasOwnProperty(e)&&delete this._scene.metadata.materialsMetadata[e]}offloadAllUnusedMaterials(){this.getAllUnusedMaterials().forEach(e=>this.offloadMaterial(e.id))}offloadMaterial(e){const n=this._scene.getMaterialByID(e);n&&n.id!=="default material"&&this.getMeshesUsingMaterial(e).length===0&&(Logger.info("Offloading material: "+n.id+" - "+n.name),this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.offloadedMaterials||(this._scene.metadata.offloadedMaterials={}),this._scene.metadata.offloadedMaterials[e]=this.getOffloadedMaterialInfo(n),Logger.info("Disposing material: "+e),n.dispose(!1,!0))}getOffloadedMaterialInfo(e){return{name:e.name,data:e.serialize()}}loadAllOffloadedMaterials(e){let n=[];return this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&(n=this.loadOffloadedMaterials(e,this._scene.metadata.offloadedMaterials)),n}loadOffloadedMaterialsByIDs(e,n){let s=[];if(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){const c={};for(let u=0;u<n.length;u++)this._scene.metadata.offloadedMaterials.hasOwnProperty(n[u])&&(c[n[u]]={name:this._scene.metadata.offloadedMaterials[n[u]].name,data:this._scene.metadata.offloadedMaterials[n[u]].data});s=this.loadOffloadedMaterials(e,c)}return s}loadOffloadedMaterial(e,n){if(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){const s={};if(this._scene.metadata.offloadedMaterials.hasOwnProperty(n)){s[n]={name:this._scene.metadata.offloadedMaterials[n].name,data:this._scene.metadata.offloadedMaterials[n].data};const c=this.loadOffloadedMaterials(e,s);if(c.length>0)return c[0]}}return null}loadOffloadedMaterials(e,n){const s=[];for(const c in n){const u=n[c],m=this.loadOffloadedMaterialInternal(c,u.name,e,u.data);m&&s.push(m)}return s}loadOffloadedMaterialInternal(e,n,s,c){const u=this._scene.getMaterialByID(e);if(u)return u;const m=n?` - ${n}`:"";return Logger.info("Loading offloaded material: "+e+m),window.BABYLON.Material.Parse(c,this._scene,s)}async loadAllOffloadedMaterialsAsync(e){let n=[];return this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&(n=await this.loadOffloadedMaterialsAsync(e,this._scene.metadata.offloadedMaterials)),n}async loadOffloadedMaterialsByIDsAsync(e,n){let s=[];if(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){const c={};for(let u=0;u<n.length;u++)this._scene.metadata.offloadedMaterials.hasOwnProperty(n[u])&&(c[n[u]]={name:this._scene.metadata.offloadedMaterials[n[u]].name,data:this._scene.metadata.offloadedMaterials[n[u]].data});s=await this.loadOffloadedMaterialsAsync(e,c)}return s}async loadOffloadedMaterialAsync(e,n){if(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){const s={};if(this._scene.metadata.offloadedMaterials.hasOwnProperty(n)){s[n]={name:this._scene.metadata.offloadedMaterials[n].name,data:this._scene.metadata.offloadedMaterials[n].data};const c=await this.loadOffloadedMaterialsAsync(e,s);if(c.length>0)return c[0]}}return null}async loadOffloadedMaterialsAsync(e,n){const s=[],c=[];for(const u in n){const m=n[u];c.push(this.loadOffloadedMaterialInternalAsync(u,m.name,e,m.data))}return(await Promise.all(c)).forEach(u=>{u&&s.push(u)}),s}async loadOffloadedMaterialInternalAsync(e,n,s,c){const u=this._scene.getMaterialByID(e);if(u)return u;const m=n?` - ${n}`:"";Logger.info("Loading offloaded material: "+e+m);const b=window.BABYLON.Material.Parse(c,this._scene,s);return b?(Logger.info("Waiting for material ready: "+e+m),await Qo.whenAllMaterialTexturesAreReady(b),Logger.info("Material ready: "+e+m)):Logger.info("No material was created from offloaded material: "+e+m),b}loadTextureFiles(e,n){if(e)for(let s=0;s<n.length;s++){const c=n[s],u=/^(?:\/|[a-z]+:\/\/)/.test(c);let m=c;u||(m=e+c);const b=m.lastIndexOf("."),k=b>-1?m.substring(b).toLowerCase():"";k===".dds"||k===".env"||k===".hdr"?window.BABYLON.Tools.LoadFile(m,()=>{}):(k===".png"||k===".jpg")&&window.BABYLON.Tools.LoadImage(m,W=>{},function(){},null)}}async getOrLoadMaterialAsync(e,n){let s=this._scene.getMaterialByID(e);return!s&&this._scene.metadata&&(this._scene.metadata.offloadedMaterials&&this._scene.metadata.offloadedMaterials.hasOwnProperty(e)?s=await this.loadOffloadedMaterialAsync(n,e):this._scene.metadata.delayedMaterials&&this._scene.metadata.delayedMaterials.hasOwnProperty(e)&&(s=await this.loadDelayedMaterialAsync(n,e))),s}getOrCreateDummyMaterial(){let e=this._scene.getMaterialByID(this._dummyMaterialID);return e||(e=new window.BABYLON.StandardMaterial("Dummy Material",this._scene),e.id=this._dummyMaterialID,e.metadata={isRealMaterial:!1}),e}isDummyMaterial(e){return e.id===this._dummyMaterialID}meshHasDummyMaterial(e,n){var s;if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof window.BABYLON.MultiMaterial)for(let c=0;c<e.subMeshes.length;c++){const u=e.subMeshes[c].materialIndex;if(e.material.subMaterials[u]&&((s=e.material.subMaterials[u])==null?void 0:s.id)===this._dummyMaterialID)return!0}else if(e.material&&e.material.id===this._dummyMaterialID)return!0;if(n){const c=e.getChildMeshes(!0);for(const u of c)if(this.meshHasDummyMaterial(u,!0))return!0}return!1}getMeshDelayedMaterialIDs(e){var n;const s=[];if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof window.BABYLON.MultiMaterial)for(let c=0;c<e.subMeshes.length;c++){const u=e.subMeshes[c].materialIndex;if(e.material.subMaterials[u]&&((n=e.material.subMaterials[u])==null?void 0:n.id)===this._dummyMaterialID){const m=`${e.id}_${u}`;if(this._scene.metadata&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(m)){const b=this._scene.metadata.originalMeshMaterials[m];this._scene.metadata.delayedMaterials.hasOwnProperty(b)&&s.indexOf(b)===-1&&s.push(b)}}}else if(e.material&&e.material.id===this._dummyMaterialID&&this._scene.metadata&&this._scene.metadata.delayedMaterials&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(e.id)){const c=this._scene.metadata.originalMeshMaterials[e.id];this._scene.metadata.delayedMaterials.hasOwnProperty(c)&&s.indexOf(c)===-1&&s.push(c)}return e.getChildMeshes().forEach(c=>Array.prototype.push.apply(s,this.getMeshDelayedMaterialIDs(c))),s}getMeshOffloadedMaterialIDs(e){var n;const s=[];if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof window.BABYLON.MultiMaterial)for(let c=0;c<e.subMeshes.length;c++){const u=e.subMeshes[c].materialIndex;if(e.material.subMaterials[u]&&((n=e.material.subMaterials[u])==null?void 0:n.id)===this._dummyMaterialID){const m=`${e.id}_${u}`;if(this._scene.metadata&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(m)){const b=this._scene.metadata.originalMeshMaterials[m];this._scene.metadata.offloadedMaterials.hasOwnProperty(b)&&s.indexOf(b)===-1&&s.push(b)}}}else if(e.material&&e.material.id===this._dummyMaterialID&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(e.id)){const c=this._scene.metadata.originalMeshMaterials[e.id];this._scene.metadata.offloadedMaterials.hasOwnProperty(c)&&s.indexOf(c)===-1&&s.push(c)}return e.getChildMeshes().forEach(c=>Array.prototype.push.apply(s,this.getMeshOffloadedMaterialIDs(c))),s}setDummyMaterialToInvisibleMeshes(){this.getInvisibleMeshes().forEach(e=>{this.setMeshDummyMaterial(e,!1)})}setMeshDummyMaterial(e,n){this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.originalMeshMaterials||(this._scene.metadata.originalMeshMaterials={});const s=this.getOrCreateDummyMaterial();if(e.material)if(e.subMeshes&&e.subMeshes.length>0&&e.material instanceof window.BABYLON.MultiMaterial)for(let c=0;c<e.subMeshes.length;c++){const u=e.subMeshes[c].materialIndex,m=e.material.subMaterials[u];if(m&&!this.isDummyMaterial(m)){const b=`${e.id}_${u}`;this._scene.metadata.originalMeshMaterials[b]=m.id,e.material.subMaterials[u]=s}}else e.material&&!this.isDummyMaterial(e.material)&&(this._scene.metadata.originalMeshMaterials[e.id]=e.material.id,e.material=s);n&&e.getChildMeshes().forEach(c=>this.setMeshDummyMaterial(c,!0))}unsetAllDummyMaterials(){for(let e=0;e<this._scene.meshes.length;e++)this.unsetMeshDummyMaterial(this._scene.meshes[e],!1)}async unsetAllDummyMaterialsAsync(e){for(let n=0;n<this._scene.meshes.length;n++)await this.unsetMeshDummyMaterialAsync(this._scene.meshes[n],e,!1)}unsetMeshDummyMaterial(e,n){var s;if(this._scene.metadata&&this._scene.metadata.originalMeshMaterials){if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof window.BABYLON.MultiMaterial)for(let c=0;c<e.subMeshes.length;c++){const u=e.subMeshes[c].materialIndex;if(e.material.subMaterials[u]&&((s=e.material.subMaterials[u])==null?void 0:s.id)===this._dummyMaterialID){const m=`${e.id}_${u}`;if(this._scene.metadata.originalMeshMaterials.hasOwnProperty(m)){const b=this._scene.metadata.originalMeshMaterials[m],k=this._scene.getMaterialByID(b);k&&(e.material.subMaterials[u]=k,delete this._scene.metadata.originalMeshMaterials[m])}}}else if(e.material&&e.material.id===this._dummyMaterialID&&this._scene.metadata&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(e.id)){const c=this._scene.metadata.originalMeshMaterials[e.id],u=this._scene.getMaterialByID(c);u&&(e.material=u,delete this._scene.metadata.originalMeshMaterials[e.id])}n&&e.getChildMeshes().forEach(c=>this.unsetMeshDummyMaterial(c,!0))}}async unsetMeshDummyMaterialAsync(e,n,s){var c;if(this._scene.metadata&&this._scene.metadata.originalMeshMaterials){if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof window.BABYLON.MultiMaterial)for(let u=0;u<e.subMeshes.length;u++){const m=e.subMeshes[u].materialIndex;if(e.material.subMaterials[m]&&((c=e.material.subMaterials[m])==null?void 0:c.id)===this._dummyMaterialID){const b=`${e.id}_${m}`;if(this._scene.metadata.originalMeshMaterials.hasOwnProperty(b)){const k=this._scene.metadata.originalMeshMaterials[b],W=await this.getOrLoadMaterialAsync(k,n);e.material.subMaterials[m]=W,delete this._scene.metadata.originalMeshMaterials[b]}}}else if(e.material&&e.material.id===this._dummyMaterialID&&this._scene.metadata&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(e.id)){const u=this._scene.metadata.originalMeshMaterials[e.id],m=await this.getOrLoadMaterialAsync(u,n);e.material=m,delete this._scene.metadata.originalMeshMaterials[e.id]}if(s){const u=e.getChildMeshes();for(const m of u)await this.unsetMeshDummyMaterialAsync(m,n,!0)}}}async reloadAllLoadingErrorTexturesAsync(e){for(const n of this._scene.textures)await this.reloadLoadingErrorTextureAsync(e,n)}async reloadMaterialLoadingErrorTexturesAsync(e,n){for(const s of n.getActiveTextures())await this.reloadLoadingErrorTextureAsync(e,s)}reloadLoadingErrorTextureAsync(e,n){if(n instanceof window.BABYLON.Texture&&n.url){const c=n.getInternalTexture();if(n.loadingError||c&&c.loadingError){const u=n.url,m=/^(?:\/|[a-z]+:\/\/)/.test(n.url);var s=n.url;return m||(s=e+n.url),new Promise((b,k)=>{n.updateURL(s,null,()=>{n.url=u,b()},void 0,()=>{n.url=u,k()})})}}return Promise.resolve()}isTextureLoadingError(e){if(e.loadingError)return!0;const n=e.getInternalTexture();return n!==null&&n.loadingError}materialHasLoadingErrorTextues(e){return e.getActiveTextures().some(n=>this.isTextureLoadingError(n))}getMaterialDynamicTextures(e){return e.getActiveTextures().filter(n=>n instanceof window.BABYLON.ProceduralTexture||n instanceof window.BABYLON.Texture&&n.url&&n.url.indexOf("blob:")!==-1)}exportTextureToBase64Async(e,n="image/png",s=!1){return Promise.resolve().then(async()=>{const c=await this.getPixelsFromTexture(e);if(!c)return null;const u=e.getSize();if(e.mimeType)switch(e.mimeType){case"image/jpeg":n="image/jpeg";break;case"image/png":n="image/png";break}return this.createBase64FromCanvasAsync(c,u.width,u.height,n,s)})}createBase64FromCanvasAsync(e,n,s,c,u=!1){return new Promise(async(m,b)=>{const k=window.BABYLON.Constants.TEXTURETYPE_UNSIGNED_INT,W=this._scene,ve=W.getEngine(),Ae=ve.createRawTexture(e,n,s,window.BABYLON.Constants.TEXTUREFORMAT_RGBA,!1,u,window.BABYLON.Texture.NEAREST_SAMPLINGMODE,null,k);await window.BABYLON.TextureTools.ApplyPostProcess("pass",Ae,W,k,window.BABYLON.Constants.TEXTURE_NEAREST_SAMPLINGMODE,window.BABYLON.Constants.TEXTUREFORMAT_RGBA);const rt=await ve._readTexturePixels(Ae,n,s),re=await window.BABYLON.Tools.DumpDataAsync(n,s,rt,c,void 0,!0,!1);m(re)})}getPixelsFromTexture(e){return e.textureType,window.BABYLON.Constants.TEXTURETYPE_UNSIGNED_INT,e.readPixels()}comparePBRMaterials(e,n){(e.albedoColor&&!n.albedoColor||!e.albedoColor&&n.albedoColor||e.albedoColor&&n.albedoColor&&!e.albedoColor.equals(n.albedoColor))&&console.log("albedoColor"),e.allowShaderHotSwapping!==n.allowShaderHotSwapping&&console.log("allowShaderHotSwapping"),e.alphaCutOff!==n.alphaCutOff&&console.log("alphaCutOff"),(e.ambientColor&&!n.ambientColor||!e.ambientColor&&n.ambientColor||e.ambientColor&&n.ambientColor&&!e.ambientColor.equals(n.ambientColor))&&console.log("ambientColor"),e.ambientTextureStrength!==n.ambientTextureStrength&&console.log("ambientTextureStrength"),this.compareAnisotropy(e.anisotropy,n.anisotropy),this.compareBRDF(e.brdf,n.brdf),this.compareClearCoat(e.clearCoat,n.clearCoat),e.depthFunction!==n.depthFunction&&console.log("depthFunction"),this.compareDetailMap(e.detailMap,n.detailMap),e.directIntensity!==n.directIntensity&&console.log("directIntensity"),e.disableBumpMap!==n.disableBumpMap&&console.log("disableBumpMap"),e.disableColorWrite!==n.disableColorWrite&&console.log("disableColorWrite"),e.disableDepthWrite!==n.disableDepthWrite&&console.log("disableDepthWrite"),e.disableLighting!==n.disableLighting&&console.log("disableLighting"),(e.emissiveColor&&!n.emissiveColor||!e.emissiveColor&&n.emissiveColor||e.emissiveColor&&n.emissiveColor&&!e.emissiveColor.equals(n.emissiveColor))&&console.log("emissiveColor"),e.emissiveIntensity!==n.emissiveIntensity&&console.log("emissiveIntensity"),e.enableSpecularAntiAliasing!==n.enableSpecularAntiAliasing&&console.log("enableSpecularAntiAliasing"),e.environmentIntensity!==n.environmentIntensity&&console.log("environmentIntensity"),e.forceAlphaTest!==n.forceAlphaTest&&console.log("forceAlphaTest"),e.forceDepthWrite!==n.forceDepthWrite&&console.log("forceDepthWrite"),e.forceIrradianceInFragment!==n.forceIrradianceInFragment&&console.log("forceIrradianceInFragment"),e.forceNormalForward!==n.forceNormalForward&&console.log("forceNormalForward"),e.invertNormalMapX!==n.invertNormalMapX&&console.log("invertNormalMapX"),e.invertNormalMapY!==n.invertNormalMapY&&console.log("invertNormalMapY"),e.maxSimultaneousLights!==n.maxSimultaneousLights&&console.log("maxSimultaneousLights"),e.metallic!==n.metallic&&console.log("metallic"),e.metallicF0Factor!==n.metallicF0Factor&&console.log("metallicF0Factor"),(e.metallicReflectanceColor&&!n.metallicReflectanceColor||!e.metallicReflectanceColor&&n.metallicReflectanceColor||e.metallicReflectanceColor&&n.metallicReflectanceColor&&!e.metallicReflectanceColor.equals(n.metallicReflectanceColor))&&console.log("metallicReflectanceColor"),e.microSurface!==n.microSurface&&console.log("microSurface"),e.parallaxScaleBias!==n.parallaxScaleBias&&console.log("parallaxScaleBias"),e.pointSize!==n.pointSize&&console.log("pointSize"),this.comparePrePassConfiguration(e.prePassConfiguration,n.prePassConfiguration),(e.reflectionColor&&!n.reflectionColor||!e.reflectionColor&&n.reflectionColor||e.reflectionColor&&n.reflectionColor&&!e.reflectionColor.equals(n.reflectionColor))&&console.log("reflectionColor"),(e.reflectivityColor&&!n.reflectivityColor||!e.reflectivityColor&&n.reflectivityColor||e.reflectivityColor&&n.reflectivityColor&&!e.reflectivityColor.equals(n.reflectivityColor))&&console.log("reflectivityColor"),e.roughness!==n.roughness&&console.log("roughness"),e.separateCullingPass!==n.separateCullingPass&&console.log("separateCullingPass"),this.compareSheen(e.sheen,n.sheen),e.sideOrientation!==n.sideOrientation&&console.log("sideOrientation"),e.specularIntensity!==n.specularIntensity&&console.log("specularIntensity"),this.compareSubSurface(e.subSurface,n.subSurface),e.twoSidedLighting!==n.twoSidedLighting&&console.log("twoSidedLighting"),e.unlit!==n.unlit&&console.log("unlit"),e.useAlphaFresnel!==n.useAlphaFresnel&&console.log("useAlphaFresnel"),e.useAlphaFromAlbedoTexture!==n.useAlphaFromAlbedoTexture&&console.log("useAlphaFromAlbedoTexture"),e.useAmbientInGrayScale!==n.useAmbientInGrayScale&&console.log("useAmbientInGrayScale"),e.useAmbientOcclusionFromMetallicTextureRed!==n.useAmbientOcclusionFromMetallicTextureRed&&console.log("useAmbientOcclusionFromMetallicTextureRed"),e.useAutoMicroSurfaceFromReflectivityMap!==n.useAutoMicroSurfaceFromReflectivityMap&&console.log("useAutoMicroSurfaceFromReflectivityMap"),e.useHorizonOcclusion!==n.useHorizonOcclusion&&console.log("useHorizonOcclusion"),e.useLightmapAsShadowmap!==n.useLightmapAsShadowmap&&console.log("useLightmapAsShadowmap"),e.useLinearAlphaFresnel!==n.useLinearAlphaFresnel&&console.log("useLinearAlphaFresnel"),e.useMetallnessFromMetallicTextureBlue!==n.useMetallnessFromMetallicTextureBlue&&console.log("useMetallnessFromMetallicTextureBlue"),e.useMicroSurfaceFromReflectivityMapAlpha!==n.useMicroSurfaceFromReflectivityMapAlpha&&console.log("useMicroSurfaceFromReflectivityMapAlpha"),e.useObjectSpaceNormalMap!==n.useObjectSpaceNormalMap&&console.log("useObjectSpaceNormalMap"),e.useOnlyMetallicFromMetallicReflectanceTexture!==n.useOnlyMetallicFromMetallicReflectanceTexture&&console.log("useOnlyMetallicFromMetallicReflectanceTexture"),e.useParallax!==n.useParallax&&console.log("useParallax"),e.useParallaxOcclusion!==n.useParallaxOcclusion&&console.log("useParallaxOcclusion"),e.useRadianceOcclusion!==n.useRadianceOcclusion&&console.log("useRadianceOcclusion"),e.useRadianceOverAlpha!==n.useRadianceOverAlpha&&console.log("useRadianceOverAlpha"),e.useRoughnessFromMetallicTextureAlpha!==n.useRoughnessFromMetallicTextureAlpha&&console.log("useRoughnessFromMetallicTextureAlpha"),e.useRoughnessFromMetallicTextureGreen!==n.useRoughnessFromMetallicTextureGreen&&console.log("useRoughnessFromMetallicTextureGreen"),e.useSpecularOverAlpha!==n.useSpecularOverAlpha&&console.log("useSpecularOverAlpha"),e.zOffset!==n.zOffset&&console.log("zOffset"),e.zOffsetUnits!==n.zOffsetUnits&&console.log("zOffsetUnits"),e.alpha!==n.alpha&&console.log("alpha"),e.alphaMode!==n.alphaMode&&console.log("alphaMode"),e.backFaceCulling!==n.backFaceCulling&&console.log("backFaceCulling"),this.compareCameraCurve("",e.cameraColorCurves,n.cameraColorCurves),e.cameraColorCurvesEnabled!==n.cameraColorCurvesEnabled&&console.log("cameraColorCurvesEnabled"),e.cameraColorGradingEnabled!==n.cameraColorGradingEnabled&&console.log("cameraColorGradingEnabled"),e.cameraContrast!==n.cameraContrast&&console.log("cameraContrast"),e.cameraExposure!==n.cameraExposure&&console.log("cameraExposure"),e.cameraToneMappingEnabled!==n.cameraToneMappingEnabled&&console.log("cameraToneMappingEnabled"),e.canRenderToMRT!==n.canRenderToMRT&&console.log("canRenderToMRT"),e.cullBackFaces!==n.cullBackFaces&&console.log("cullBackFaces"),e.fillMode!==n.fillMode&&console.log("fillMode"),e.fogEnabled!==n.fogEnabled&&console.log("fogEnabled"),e.hasRenderTargetTextures!==n.hasRenderTargetTextures&&console.log("hasRenderTargetTextures"),this.compareImageProcessingConfiguration(e.imageProcessingConfiguration,n.imageProcessingConfiguration),e.indexOfRefraction!==n.indexOfRefraction&&console.log("indexOfRefraction"),e.invertRefractionY!==n.invertRefractionY&&console.log("invertRefractionY"),e.isFrozen!==n.isFrozen&&console.log("isFrozen"),e.isPrePassCapable!==n.isPrePassCapable&&console.log("isPrePassCapable"),e.linkRefractionWithTransparency!==n.linkRefractionWithTransparency&&console.log("linkRefractionWithTransparency"),e.needDepthPrePass!==n.needDepthPrePass&&console.log("needDepthPrePass"),e.realTimeFiltering!==n.realTimeFiltering&&console.log("realTimeFiltering"),e.realTimeFilteringQuality!==n.realTimeFilteringQuality&&console.log("realTimeFilteringQuality"),e.transparencyMode!==n.transparencyMode&&console.log("transparencyMode"),e.useGLTFLightFalloff!==n.useGLTFLightFalloff&&console.log("useGLTFLightFalloff"),e.useLogarithmicDepth!==n.useLogarithmicDepth&&console.log("useLogarithmicDepth"),e.usePhysicalLightFalloff!==n.usePhysicalLightFalloff&&console.log("usePhysicalLightFalloff"),this.compareTexture("albedo",e.albedoTexture,n.albedoTexture),this.compareTexture("emissive",e.emissiveTexture,n.emissiveTexture)}compareAnisotropy(e,n){const s="anisotropy";(e.direction&&!n.direction||!e.direction&&n.direction||e.direction&&n.direction&&!e.direction.equals(n.direction))&&console.log(s+" - direction"),e.intensity!==n.intensity&&console.log(s+" - intensity"),e.isEnabled!==n.isEnabled&&console.log(s+" - isEnabled")}compareBRDF(e,n){const s="brdf";e.useEnergyConservation!==n.useEnergyConservation&&console.log(s+" - useEnergyConservation"),e.useSmithVisibilityHeightCorrelated!==n.useSmithVisibilityHeightCorrelated&&console.log(s+" - useSmithVisibilityHeightCorrelated"),e.useSpecularGlossinessInputEnergyConservation!==n.useSpecularGlossinessInputEnergyConservation&&console.log(s+" - useSpecularGlossinessInputEnergyConservation"),e.useSphericalHarmonics!==n.useSphericalHarmonics&&console.log(s+" - useSphericalHarmonics")}compareClearCoat(e,n){const s="clearCoat";e.indexOfRefraction!==n.indexOfRefraction&&console.log(s+" - indexOfRefraction"),e.intensity!==n.intensity&&console.log(s+" - intensity"),e.isEnabled!==n.isEnabled&&console.log(s+" - isEnabled"),e.isTintEnabled!==n.isTintEnabled&&console.log(s+" - isTintEnabled"),e.roughness!==n.roughness&&console.log(s+" - roughness"),(e.tintColor&&!n.tintColor||!e.tintColor&&n.tintColor||e.tintColor&&n.tintColor&&!e.tintColor.equals(n.tintColor))&&console.log(s+" - tintColor"),e.tintColorAtDistance!==n.tintColorAtDistance&&console.log(s+" - tintColorAtDistance"),e.tintThickness!==n.tintThickness&&console.log(s+" - tintThickness"),e.useRoughnessFromMainTexture!=n.useRoughnessFromMainTexture&&console.log(s+" - useRoughnessFromMainTexture")}compareDetailMap(e,n){const s="detailMap";e.bumpLevel!==n.bumpLevel&&console.log(s+" - bumpLevel"),e.diffuseBlendLevel!==n.diffuseBlendLevel&&console.log(s+" - diffuseBlendLevel"),e.isEnabled!==n.isEnabled&&console.log(s+" - isEnabled"),e.normalBlendMethod!==n.normalBlendMethod&&console.log(s+" - normalBlendMethod"),e.roughnessBlendLevel!==n.roughnessBlendLevel&&console.log(s+" - roughnessBlendLevel")}comparePrePassConfiguration(e,n){const s="PrePassConfiguration";(e.currentViewProjection&&!n.currentViewProjection||!e.currentViewProjection&&n.currentViewProjection||e.currentViewProjection&&n.currentViewProjection&&!e.currentViewProjection.equals(n.currentViewProjection))&&console.log(s+" - currentViewProjection"),(e.previousViewProjection&&!n.previousViewProjection||!e.previousViewProjection&&n.previousViewProjection||e.previousViewProjection&&n.previousViewProjection&&!e.previousViewProjection.equals(n.previousViewProjection))&&console.log(s+" - previousViewProjection")}compareSheen(e,n){const s="Sheen";e.albedoScaling!==n.albedoScaling&&console.log(s+" - albedoScaling"),(e.color&&!n.color||!e.color&&n.color||e.color&&n.color&&!e.color.equals(n.color))&&console.log(s+" - color"),e.intensity!==n.intensity&&console.log(s+" - intensity"),e.isEnabled!==n.isEnabled&&console.log(s+" - isEnabled"),e.linkSheenWithAlbedo!==n.linkSheenWithAlbedo&&console.log(s+" - linkSheenWithAlbedo"),e.roughness!==n.roughness&&console.log(s+" - roughness"),e.useRoughnessFromMainTexture!==n.useRoughnessFromMainTexture&&console.log(s+" - useRoughnessFromMainTexture")}compareSubSurface(e,n){const s="SubSurface";(e.diffusionDistance&&!n.diffusionDistance||!e.diffusionDistance&&n.diffusionDistance||e.diffusionDistance&&n.diffusionDistance&&!e.diffusionDistance.equals(n.diffusionDistance))&&console.log(s+" - diffusionDistance"),e.indexOfRefraction!==n.indexOfRefraction&&console.log(s+" - indexOfRefraction"),e.invertRefractionY!==n.invertRefractionY&&console.log(s+" - invertRefractionY"),e.isRefractionEnabled!==n.isRefractionEnabled&&console.log(s+" - isRefractionEnabled"),e.isScatteringEnabled!==n.isScatteringEnabled&&console.log(s+" - isScatteringEnabled"),e.isTranslucencyEnabled!==n.isTranslucencyEnabled&&console.log(s+" - isTranslucencyEnabled"),e.linkRefractionWithTransparency!==n.linkRefractionWithTransparency&&console.log(s+" - linkRefractionWithTransparency"),e.maximumThickness!==n.maximumThickness&&console.log(s+" - maximumThickness"),e.minimumThickness!==n.minimumThickness&&console.log(s+" - minimumThickness"),e.refractionIntensity!==n.refractionIntensity&&console.log(s+" - refractionIntensity"),(e.tintColor&&!n.tintColor||!e.tintColor&&n.tintColor||e.tintColor&&n.tintColor&&!e.tintColor.equals(n.tintColor))&&console.log(s+" - tintColor"),e.tintColorAtDistance!==n.tintColorAtDistance&&console.log(s+" - tintColorAtDistance"),e.translucencyIntensity!==n.translucencyIntensity&&console.log(s+" - translucencyIntensity"),e.useAlbedoToTintRefraction!==n.useAlbedoToTintRefraction&&console.log(s+" - useAlbedoToTintRefraction"),e.useAlbedoToTintTranslucency!==n.useAlbedoToTintTranslucency&&console.log(s+" - useAlbedoToTintTranslucency"),e.useGltfStyleTextures!==n.useGltfStyleTextures&&console.log(s+" - useGltfStyleTextures"),e.useMaskFromThicknessTexture!==n.useMaskFromThicknessTexture&&console.log(s+" - useMaskFromThicknessTexture"),e.useThicknessAsDepth!==n.useThicknessAsDepth&&console.log(s+" - useThicknessAsDepth")}compareCameraCurve(e,n,s){if((n===null&&s!==null||n!==null&&s===null)&&console.log("cameraColorCurves"),n&&s){const c=e?e+" - cameraColorCurves":"cameraColorCurves";n.globalDensity!==s.globalDensity&&console.log(c+" - globalDensity"),n.globalExposure!==s.globalExposure&&console.log(c+"- globalExposure"),n.globalHue!==s.globalHue&&console.log(c+" - globalHue"),n.globalSaturation!==s.globalSaturation&&console.log(c+" - globalSaturation"),n.highlightsDensity!==s.highlightsDensity&&console.log(c+" - highlightsDensity"),n.highlightsExposure!==s.highlightsExposure&&console.log(c+" - highlightsExposure"),n.highlightsHue!==s.highlightsHue&&console.log(c+" - highlightsHue"),n.highlightsSaturation!==s.highlightsSaturation&&console.log(c+" - highlightsSaturation"),n.midtonesDensity!==s.midtonesDensity&&console.log(c+" - midtonesDensity"),n.midtonesExposure!==s.midtonesExposure&&console.log(c+" - midtonesExposure"),n.midtonesHue!==s.midtonesHue&&console.log(c+" - midtonesHue"),n.midtonesSaturation!==s.midtonesSaturation&&console.log(c+" - midtonesSaturation"),n.shadowsDensity!==s.shadowsDensity&&console.log(c+" - shadowsDensity"),n.shadowsExposure!==s.shadowsExposure&&console.log(c+" - shadowsExposure"),n.shadowsHue!==s.shadowsHue&&console.log(c+" - shadowsHue"),n.shadowsSaturation!==s.shadowsSaturation&&console.log(c+" - shadowsSaturation")}}compareImageProcessingConfiguration(e,n){const s="imageProcessingConfiguration";this.compareCameraCurve(s,e.colorCurves,n.colorCurves),e.vignetteCameraFov!==n.vignetteCameraFov&&console.log(s+" - vignetteCameraFov"),e.vignetteCentreX!==n.vignetteCentreX&&console.log(s+" - vignetteCentreX"),e.vignetteCentreY!==n.vignetteCentreY&&console.log(s+" - vignetteCentreY"),(e.vignetteColor&&!n.vignetteColor||!e.vignetteColor&&n.vignetteColor||e.vignetteColor&&n.vignetteColor&&!e.vignetteColor.equals(n.vignetteColor))&&console.log(s+" - vignetteColor"),e.vignetteStretch!==n.vignetteStretch&&console.log(s+" - vignetteStretch"),e.vignetteWeight!==n.vignetteWeight&&console.log(s+" - vignetteWeight"),e.applyByPostProcess!==n.applyByPostProcess&&console.log(s+" - applyByPostProcess"),e.colorCurvesEnabled!==n.colorCurvesEnabled&&console.log(s+" - colorCurvesEnabled"),e.colorGradingBGR!==n.colorGradingBGR&&console.log(s+" - colorGradingBGR"),e.colorGradingEnabled!==n.colorGradingEnabled&&console.log(s+" - colorGradingEnabled"),e.colorGradingWithGreenDepth!==n.colorGradingWithGreenDepth&&console.log(s+" - colorGradingWithGreenDepth"),e.contrast!==n.contrast&&console.log(s+" - contrast"),e.exposure!==n.exposure&&console.log(s+" - exposure"),e.isEnabled!==n.isEnabled&&console.log(s+" - isEnabled"),e.toneMappingEnabled!==n.toneMappingEnabled&&console.log(s+" - toneMappingEnabled"),e.toneMappingType!==n.toneMappingType&&console.log(s+" - toneMappingType"),e.vignetteBlendMode!==n.vignetteBlendMode&&console.log(s+" - vignetteBlendMode"),e.vignetteEnabled!==n.vignetteEnabled&&console.log(s+" - vignetteEnabled")}compareTexture(e,n,s){if(n&&!s||!n&&s){console.log(e);return}if(n instanceof window.BABYLON.Texture&&!(s instanceof window.BABYLON.Texture)||s instanceof window.BABYLON.Texture&&!(n instanceof window.BABYLON.Texture)){console.log(e);return}n&&s&&(n.anisotropicFilteringLevel!==s.anisotropicFilteringLevel&&console.log(e+" - anisotropicFilteringLevel"),n instanceof window.BABYLON.Texture&&s instanceof window.BABYLON.Texture&&(n.homogeneousRotationInUVTransform!==s.homogeneousRotationInUVTransform&&console.log(e+" - homogeneousRotationInUVTransform"),n.uAng!==s.uAng&&console.log(e+" - uAng"),n.uOffset!==s.uOffset&&console.log(e+" - uOffset"),n.uRotationCenter!==s.uRotationCenter&&console.log(e+" - uRotationCenterSearch"),n.uScale!==s.uScale&&console.log(e+" - uScale"),n.vAng!==s.vAng&&console.log(e+" - vAng"),n.vOffset!==s.vOffset&&console.log(e+" - vOffset"),n.vRotationCenter!==s.vRotationCenter&&console.log(e+" - vRotationCenterSearch"),n.vScale!==s.vScale&&console.log(e+" - vScale"),n.wAng!==s.wAng&&console.log(e+" - wAng"),n.wRotationCenter!==s.wRotationCenter&&console.log(e+" - wRotationCenterSearch"),n.invertY!==s.invertY&&console.log(e+" - invertY"),n.mimeType!==s.mimeType&&console.log(e+" - mimeType")),n.invertZ!==s.invertZ&&console.log(e+" - invertZ"),n.isRenderTarget!==s.isRenderTarget&&console.log(e+" - isRenderTarget"),n.level!==s.level&&console.log(e+" - level"),n.wrapR!==s.wrapR&&console.log(e+" - wrapR"),n.canRescale!==s.canRescale&&console.log(e+" - canRescale"),n.coordinatesIndex!==s.coordinatesIndex&&console.log(e+" - coordinatesIndex"),n.coordinatesMode!==s.coordinatesMode&&console.log(e+" - coordinatesMode"),n.gammaSpace!==s.gammaSpace&&console.log(e+" - gammaSpace"),n.getAlphaFromRGB!==s.getAlphaFromRGB&&console.log(e+" - getAlphaFromRGB"),n.hasAlpha!==s.hasAlpha&&console.log(e+"- hasAlpha"),n.is2DArray!==s.is2DArray&&console.log(e+" - is2DArray"),n.is3D!==s.is3D&&console.log(e+" - is3D"),n.isBlocking!==s.isBlocking&&console.log(e+" - isBlocking"),n.isCube!==s.isCube&&console.log(e+" - isCube"),n.isRGBD!==s.isRGBD&&console.log(e+" - isRGBD"),n.linearSpecularLOD!==s.linearSpecularLOD&&console.log(e+" - linearSpecularLOD"),n.lodGenerationOffset!==s.lodGenerationOffset&&console.log(e+" - lodGenerationOffset"),n.lodGenerationScale!==s.lodGenerationScale&&console.log(e+" - lodGenerationScale"),n.noMipmap!==s.noMipmap&&console.log(e+" - noMipmap"),n.samplingMode!==s.samplingMode&&console.log(e+" - samplingMode"),n.textureFormat!==s.textureFormat&&console.log(e+" - textureFormat"),n.textureType!==s.textureType&&console.log(e+" - textureType"),n.wrapU!==s.wrapU&&console.log(e+" - wrapU"),n.wrapV!==s.wrapV&&console.log(e+" - wrapV"))}async showResizableCanvas(e,n,s,c,u,m,b,k,W){if(!this._isLoading){if(this._isLoading=!0,this._scene){this.clearResizableMeshes();const ve=this._resizableCanvas3DGenerator.generatePreview3D({width:e,height:n,depth:s,borderRadius:c,radiusResolution:.1,type:u,borderColor:m,columns:b,rows:k,useCheckerTexture:!1},this._scene),Ae=await window.BABYLON.SceneLoader.ImportMeshAsync("","","data:"+JSON.stringify(ve));this._loadedMeshes.push(...Ae.meshes);const rt=Ae.meshes[0],re=2/Math.max(e,n);if(rt.scaling.scaleInPlace(re),rt.position.z=0,rt.rotate(window.BABYLON.Axis.Y,Math.PI,window.BABYLON.Space.LOCAL),this.camera&&this.camera instanceof window.BABYLON.ArcRotateCamera&&this.camera.setPosition(new window.BABYLON.Vector3(0,1,4)),!this._scene.lights.find(nt=>nt.name==="resizableLight")){console.log("Creating light...");const nt=new window.BABYLON.HemisphericLight("resizableLight",new window.BABYLON.Vector3(.1,1,.1),this._scene);nt.groundColor=new window.BABYLON.Color3(.6,.6,.6),nt.intensity=1;const tn=this.getDefaultHemisphericLight();tn&&this._scene.removeLight(tn)}const mt=Ae.meshes.find(nt=>!nt.parent);return mt.metadata={isResizable:!0,AR:!0,sizecm:{height:n/W}},this._isLoading=!1,Ae.meshes}return this._isLoading=!1,null}}clearResizableMeshes(){this._scene.meshes.filter(e=>{var n;return(n=e.metadata)==null?void 0:n.isResizable}).forEach(e=>e.dispose())}switchMode(e){var n;console.log("Switch 3D mode",e);const s=this._scene.lights.find(u=>u.name==="resizableLight"),c=this.getDefaultHemisphericLight();e==="resizable"?this._lastVisibilityStates.size===0&&((n=this._scene)==null||n.meshes.forEach(u=>{(!u.metadata||!u.metadata.isResizable)&&(this._lastVisibilityStates.set(u,u.isVisible),u.isVisible=!1)})):(s&&(s.dispose(),this._scene.removeLight(s)),c&&this._scene.addLight(c),this._lastVisibilityStates.forEach((u,m)=>m.isVisible=u),this._lastVisibilityStates.clear(),this.clearResizableMeshes())}async rotate(e,n,s){return new Promise(c=>{if(this._scene){console.log(`Rotating scene on axis ${n} by ${e} degrees`);const u=e*Math.PI/180;this._scene.meshes.filter(m=>!m.parent).forEach(m=>{if(!s)m.rotate(n,u,window.BABYLON.Space.WORLD),c();else{const b=m.rotationQuaternion??m.rotation.toQuaternion(),k=window.BABYLON.Quaternion.RotationAxis(n,u).multiply(b),W=window.BABYLON.Animation.CreateAndStartAnimation(m.id+"rotation",m,"rotationQuaternion",60,20,b,k,window.BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT,void 0,()=>{W==null||W.stop(),c()})}})}})}};Er._shadowGenerator=null;let Tr=Er;class bi extends window.BABYLON.ProceduralTexture{constructor(e,n,s,c,u,m,b){super(e,n,s,c,m,b),this._initializing=!1,this._baseTexture=u,this.updateShaderUniforms()}get initializing(){return this._initializing}get baseTexture(){return this._baseTexture}set baseTexture(e){this._baseTexture=e,this.updateShaderUniforms()}isReadyAsync(){return Tr.whenTextureIsReadyAsync(this)}dispose(){super.dispose(),this._baseTexture&&this._baseTexture.dispose()}beginInit(){this._initializing=!0}endInit(){this._initializing=!1,this.updateShaderUniforms()}updateShaderUniforms(){this._initializing||this.setBaseTextureUniform()}setBaseTextureUniform(){this.setTexture("uSampler",this._baseTexture)}}const xs=class a1 extends bi{constructor(e,n,s,c,u,m){super(e,n,a1.FRAGMENT_SHADER,s,c,u,m),this._blur=1/512,this.updateShaderUniforms()}get blur(){return this._blur/(1/7e3)}set blur(e){this._blur=1/7e3*e,this.updateShaderUniforms()}dispose(){super.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),this.initializing)return;const e=this._blur!=null?this._blur:1/512;this.setFloat("blur",e)}render(e){super.render(e)}resize(e,n){super.resize(e,n),this.updateShaderUniforms()}};xs.FRAGMENT_SHADER="zakeke_BlurXProceduralTexture",xs.CUSTOM_TYPE="Zakeke.BlurXProceduralTexture";let ki=xs;const Ch=["precision mediump float;","varying vec2 vUV;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vUV.x - 4.0*blur, vUV.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vUV.x - 3.0*blur, vUV.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vUV.x - 2.0*blur, vUV.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vUV.x - blur, vUV.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vUV.x + blur, vUV.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vUV.x + 2.0*blur, vUV.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vUV.x + 3.0*blur, vUV.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vUV.x + 4.0*blur, vUV.y)) * 0.05;","   gl_FragColor = sum;","}"],og=Ch.join(`
`);window.BABYLON.Effect.ShadersStore[`${ki.FRAGMENT_SHADER}PixelShader`]=og;const Sa=class o1 extends bi{constructor(e,n,s,c,u,m){super(e,n,o1.FRAGMENT_SHADER,s,c,u,m),this._blur=1/512,this.updateShaderUniforms()}get blur(){return this._blur/(1/7e3)}set blur(e){this._blur=1/7e3*e,this.updateShaderUniforms()}dispose(){super.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),this.initializing)return;const e=this._blur!=null?this._blur:1/512;this.setFloat("blur",e)}render(e){super.render(e)}resize(e,n){super.resize(e,n),this.updateShaderUniforms()}};Sa.FRAGMENT_SHADER="zakeke_BlurYProceduralTexture",Sa.CUSTOM_TYPE="Zakeke.BlurYProceduralTexture";let su=Sa;const lg=["precision mediump float;","varying vec2 vUV;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"],mu=lg.join(`
`);window.BABYLON.Effect.ShadersStore[`${su.FRAGMENT_SHADER}PixelShader`]=mu;const Ju=class l1 extends bi{constructor(e,n,s,c,u,m){super(e,n,l1.FRAGMENT_SHADER,s,c,u,m),this._foreColor=new window.BABYLON.Vector3(1,1,1),this._backColor=new window.BABYLON.Vector3(0,0,0),this.updateShaderUniforms()}get foreColor(){return this._foreColor}set foreColor(e){this._foreColor=e,this.updateShaderUniforms()}get backColor(){return this._backColor}set backColor(e){this._backColor=e,this.updateShaderUniforms()}dispose(){super.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),this.initializing)return;const e=this._foreColor||new window.BABYLON.Vector3(1,1,1),n=this._backColor||new window.BABYLON.Vector3(0,0,0);this.setVector3("foreColor",e),this.setVector3("backColor",n)}render(e){super.render(e)}resize(e,n){super.resize(e,n),this.updateShaderUniforms()}};Ju.FRAGMENT_SHADER="zakeke_ForegroundBackgroundProceduralTexture",Ju.CUSTOM_TYPE="Zakeke.ForegroundBackgroundProceduralTexture";let au=Ju;const ji=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform vec3 foreColor;","uniform vec3 backColor;","void main(void) {","   // background color","   vec4 background = vec4(backColor.xyz, 1);","   vec4 foreground = vec4(foreColor.xyz, 1);","   // texel","	vec4 t0 = texture2D(uSampler, vUV.xy);","   // change in white","   t0 = vec4(foreground.xyz, t0.a);","   gl_FragColor = mix(background, t0, t0.a);","}"],Xc=ji.join(`
`);window.BABYLON.Effect.ShadersStore[`${au.FRAGMENT_SHADER}PixelShader`]=Xc;const Dh=class u1 extends bi{constructor(e,n,s,c,u,m){super(e,n,u1.FRAGMENT_SHADER,s,c,u,m),this._offset=new window.BABYLON.Vector2(0,0),this.updateShaderUniforms()}get offset(){return this._offset}set offset(e){this._offset=e,this.updateShaderUniforms()}dispose(){super.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),this.initializing)return;const e=this.getRenderSize(),n=this._offset||new window.BABYLON.Vector2;this.setVector2("offset",new window.BABYLON.Vector2(n.x/e,n.y/e))}render(e){super.render(e)}resize(e,n){super.resize(e,n),this.updateShaderUniforms()}};Dh.FRAGMENT_SHADER="zakeke_MoveProceduralTexture",Dh.CUSTOM_TYPE="Zakeke.MoveProceduralTexture";let vu=Dh;const Xg=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform vec2 offset;","void main(void) {","   // translated texel","   gl_FragColor = texture2D(uSampler, vec2(vUV.x - offset.x, vUV.y + offset.y));","}"],Qg=Xg.join(`
`);window.BABYLON.Effect.ShadersStore[`${vu.FRAGMENT_SHADER}PixelShader`]=Qg;const Ah=class c1 extends bi{constructor(e,n,s,c,u,m,b){super(e,n,c1.FRAGMENT_SHADER,s,c,m,b),this._blendTexture=u,this.updateShaderUniforms()}get blendTexture(){return this._blendTexture}set blendTexture(e){this._blendTexture=e,this.updateShaderUniforms()}dispose(){super.dispose(),this._blendTexture&&this._blendTexture.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),!this.initializing){var e=new window.BABYLON.Vector2(1,1);this.baseTexture&&(e=new window.BABYLON.Vector2(this.baseTexture.uScale,this.baseTexture.vScale)),this.setVector2("uSamplerScale",e),this.setTexture("uBlendSampler",this._blendTexture);var n=new window.BABYLON.Vector2(1,1);this._blendTexture&&(n=new window.BABYLON.Vector2(this._blendTexture.uScale,this._blendTexture.vScale)),this.setVector2("uBlendScale",n)}}render(e){super.render(e)}resize(e,n){super.resize(e,n),this.updateShaderUniforms()}};Ah.FRAGMENT_SHADER="zakeke_MultiplyProceduralTexture",Ah.CUSTOM_TYPE="Zakeke.MultiplyProceduralTexture";let _u=Ah;const fl=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform sampler2D uBlendSampler;","uniform vec2 uSamplerScale;","uniform vec2 uBlendScale;","void main(void) {","	vec4 base = texture2D(uSampler, vUV.xy*uSamplerScale);","	vec4 blend = texture2D(uBlendSampler, vUV.xy*uBlendScale);","   gl_FragColor = base * blend;","}"],Qc=fl.join(`
`);window.BABYLON.Effect.ShadersStore[`${_u.FRAGMENT_SHADER}PixelShader`]=Qc;const va=class h1 extends bi{constructor(e,n,s,c,u,m){super(e,n,h1.FRAGMENT_SHADER,s,c,u,m),this._bias=50,this._invertR=!1,this._invertG=!1,this._bevel=!1,this._intensity=.5,this.updateShaderUniforms()}get bias(){return this._bias==null?50:this._bias}set bias(e){this._bias=e,this.updateShaderUniforms()}get invertR(){return this._invertR==null?!1:this._invertR}set invertR(e){this._invertR=e,this.updateShaderUniforms()}get invertG(){return this._invertG==null?!1:this._invertG}set invertG(e){this._invertG=e,this.updateShaderUniforms()}get bevel(){return this._bevel==null?!1:this._bevel}set bevel(e){this._bevel=e,this.updateShaderUniforms()}get intensity(){return this._intensity==null?.5:this._intensity}set intensity(e){this._intensity=e,this.updateShaderUniforms()}dispose(){super.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),!this.initializing){var e=this.getRenderSize(),n=e<1024?e*2:e;this.setFloat("size",e),this.setVector2("u_textureSize",new window.BABYLON.Vector2(e,e)),this.setVector3("dimensions",new window.BABYLON.Vector3(n,n,0)),this.setFloat("bias",this.bias),this.setFloat("invertR",this.invertR?-1:1),this.setFloat("invertG",this.invertG?-1:1),this.setFloat("bevel",this.bevel?1:0),this.setFloat("intensity",this.intensity)}}render(e){super.render(e)}resize(e,n){super.resize(e,n),this.updateShaderUniforms()}};va.FRAGMENT_SHADER="zakeke_normalMapProceduralTexture",va.CUSTOM_TYPE="Zakeke.NormalMapProceduralTexture";let Nu=va;const yf=["precision mediump float;","varying vec2 vUV;","uniform vec3 dimensions;","uniform sampler2D uSampler;","uniform vec2 u_textureSize;","uniform float bias;","uniform float invertR;","uniform float invertG;","uniform float bevel;","uniform float intensity;","void main(void) {","   vec2 step = vec2(1.0, 1.0) / dimensions.xy;","   vec4 black = vec4(0, 0, 0, 1);","	vec4 bk = vec4(1, 1, 1, 1);","	vec4 t0 = texture2D(uSampler, vUV.xy + vec2(0.0, 0.0));","	vec4 t1 = texture2D(uSampler, vUV.xy + vec2(step.x, 0.0));","	vec4 t2 = texture2D(uSampler, vUV.xy + vec2(-step.x, 0.0));","	vec4 t3 = texture2D(uSampler, vUV.xy + vec2(0.0, step.y));","	vec4 t4 = texture2D(uSampler, vUV.xy + vec2(0.0, -step.y));","   if (bevel != 0.0) ","   {","      t0 = vec4(0, 0, 0, t0.a);","      t1 = vec4(0, 0, 0, t1.a);","      t2 = vec4(0, 0, 0, t2.a);","      t3 = vec4(0, 0, 0, t3.a);","      t4 = vec4(0, 0, 0, t4.a);","   }","	t0 = mix(bk, t0, t0.a);","	t1 = mix(bk, t1, t1.a);","	t2 = mix(bk, t2, t2.a);","	t3 = mix(bk, t3, t3.a);","	t4 = mix(bk, t4, t4.a);","	float d0 = abs(t0.r);","	float d1 = abs(t1.r);","	float d2 = abs(t2.r);","	float d3 = abs(t3.r);","	float d4 = abs(t4.r);","	float dx = ((d2 - d0) + (d0 - d1)) * intensity;","	float dy = ((d4 - d0) + (d0 - d3)) * intensity;","	vec4 normal = vec4(normalize(vec3(dx * invertR, dy * invertG, 1.0 - ((bias - 0.1) / 100.0))), 1.0);","	gl_FragColor = vec4(normal.xyz * 0.5 + 0.5, 1.0);","}"],Eh=yf.join(`
`);window.BABYLON.Effect.ShadersStore[`${Nu.FRAGMENT_SHADER}PixelShader`]=Eh;const ec=class f1 extends bi{constructor(e,n,s,c,u,m,b){super(e,n,f1.FRAGMENT_SHADER,s,c,m,b),this._opacity=1,this.updateShaderUniforms()}get opacity(){return this._opacity==null?1:this._opacity}set opacity(e){this._opacity=e,this.updateShaderUniforms()}dispose(){super.dispose()}updateShaderUniforms(){super.updateShaderUniforms(),!this.initializing&&this.setFloat("opacity",this.opacity)}render(e){super.render(e)}resize(e,n){super.resize(e,n),this.updateShaderUniforms()}};ec.FRAGMENT_SHADER="zakeke_OpacityProceduralTexture",ec.CUSTOM_TYPE="Zakeke.OpacityProceduralTexture";let wf=ec;const ou=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform float opacity;","void main(void) {","	vec4 color = texture2D(uSampler, vUV.xy);","   color.a = opacity;","   gl_FragColor = color;","}"],dl=ou.join(`
`);window.BABYLON.Effect.ShadersStore[`${wf.FRAGMENT_SHADER}PixelShader`]=dl;const zl=class d1 extends bi{constructor(e,n,s,c,u,m,b){super(e,n,d1.FRAGMENT_SHADER,s,c,m,b),this._blendTexture=u,this.updateShaderUniforms()}get blendTexture(){return this._blendTexture}set blendTexture(e){this._blendTexture=e,this.updateShaderUniforms()}dispose(){super.dispose(),this._blendTexture&&this._blendTexture.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),!this.initializing){var e=new window.BABYLON.Vector2(1,1);this.baseTexture&&(e=new window.BABYLON.Vector2(this.baseTexture.uScale,this.baseTexture.vScale)),this.setVector2("uSamplerScale",e),this.setTexture("uBlendSampler",this._blendTexture);var n=new window.BABYLON.Vector2(1,1);this._blendTexture&&(n=new window.BABYLON.Vector2(this._blendTexture.uScale,this._blendTexture.vScale)),this.setVector2("uBlendScale",n)}}render(e){super.render(e)}resize(e,n){super.resize(e,n),this.updateShaderUniforms()}};zl.FRAGMENT_SHADER="zakeke_OverlayProceduralTexture",zl.CUSTOM_TYPE="Zakeke.OverlayProceduralTexture";let xf=zl;var Jg=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform sampler2D uBlendSampler;","uniform vec2 uSamplerScale;","uniform vec2 uBlendScale;","float BlendOverlayf(float base, float blend)","{","   return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));","}","vec4 BlendOverlay(vec4 base, vec4 blend)","{","   return vec4(BlendOverlayf(base.r, blend.r), BlendOverlayf(base.g, blend.g), BlendOverlayf(base.b, blend.b), BlendOverlayf(base.a, blend.a));","}","void main(void) {","	vec4 base = texture2D(uSampler, vUV.xy*uSamplerScale);","	vec4 blend = texture2D(uBlendSampler, vUV.xy*uBlendScale);","   gl_FragColor = BlendOverlay(base, blend);","}"],em=Jg.join(`
`);window.BABYLON.Effect.ShadersStore[`${xf.FRAGMENT_SHADER}PixelShader`]=em;const tc=class F_ extends window.BABYLON.ProceduralTexture{constructor(e,n,s=null,c,u){super(e,n,F_.FRAGMENT_SHADER,s,c,u),this._baseTexture=null,this._blendTexture=null,this.updateShaderUniforms()}dispose(){this._baseTexture&&this._baseTexture.dispose(),this._blendTexture&&this._blendTexture.dispose()}updateShaderUniforms(){this._baseTexture?(this.setTexture("uSampler",this._baseTexture),this.setInt("hasSampler",1),this.setVector2("uSamplerScale",new window.BABYLON.Vector2(this._baseTexture.uScale,this._baseTexture.vScale))):(this.setInt("hasSampler",0),this.setVector2("uSamplerScale",new window.BABYLON.Vector2(1,1))),this._blendTexture?(this.setTexture("uBlendSampler",this._blendTexture),this.setInt("hasBlend",1),this.setVector2("uBlendScale",new window.BABYLON.Vector2(this._blendTexture.uScale,this._blendTexture.vScale))):(this.setInt("hasBlend",0),this.setVector2("uBlendScale",new window.BABYLON.Vector2(1,1))),this.setFloat("size",this.getRenderSize())}render(e){super.render(e)}resize(e,n){super.resize(e,n),this.updateShaderUniforms()}isReady(){return this._baseTexture&&!this._baseTexture.isReady()||this._blendTexture&&!this._blendTexture.isReady()?!1:super.isReady()}get baseTexture(){return this._baseTexture}set baseTexture(e){this._baseTexture=e,this.updateShaderUniforms()}get blendTexture(){return this._blendTexture}set blendTexture(e){this._blendTexture=e,this.updateShaderUniforms()}serialize(){var e=window.BABYLON.SerializationHelper.Serialize(this,super.serialize());return e.customType=F_.CUSTOM_TYPE,this.baseTexture?e.baseTexture=this.baseTexture.serialize():e.baseTexture=null,this.blendTexture?e.blendTexture=this.blendTexture.serialize():e.blendTexture=null,e}static Parse(e,n,s){var c=window.BABYLON.SerializationHelper.Parse(()=>new F_(e.name,e._size,n,void 0,e._generateMipMaps),e,n,s);return e.baseTexture&&(c.baseTexture=window.BABYLON.Texture.Parse(e.baseTexture,n,s)),e.blendTexture&&(c.blendTexture=window.BABYLON.Texture.Parse(e.blendTexture,n,s)),c}};tc.FRAGMENT_SHADER="zakeke_BlendProceduralTexture",tc.CUSTOM_TYPE="Zakeke.BlendProceduralTexture";let yu=tc;var Jc=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform sampler2D uBlendSampler;","uniform vec2 uSamplerScale;","uniform vec2 uBlendScale;","uniform bool hasSampler;","uniform bool hasBlend;","float BlendOverlayf(float base, float blend)","{","   return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));","}","vec4 BlendOverlay(vec4 base, vec4 blend)","{","   return vec4(BlendOverlayf(base.r, blend.r), BlendOverlayf(base.g, blend.g), BlendOverlayf(base.b, blend.b), BlendOverlayf(base.a, blend.a));","}","void main(void) {","   if (!hasSampler && !hasBlend)","   {","       gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","       return;","   }","   if (hasSampler && !hasBlend)","   {","       gl_FragColor = texture2D(uSampler, vUV.xy*uSamplerScale);","       return;","   }","   if (!hasSampler && hasBlend)","   {","       gl_FragColor = texture2D(uBlendSampler, vUV.xy*uBlendScale);","       return;","   }","   vec4 base = texture2D(uSampler, vUV.xy*uSamplerScale);","   vec4 blend = texture2D(uBlendSampler, vUV.xy*uBlendScale);","   gl_FragColor = BlendOverlay(base, blend);","}"],Sp=Jc.join(`
`);window.BABYLON.Effect.ShadersStore[`${yu.FRAGMENT_SHADER}PixelShader`]=Sp,window.BABYLON.RegisterClass("Zakeke.BlendProceduralTexture",yu);class Th{constructor(){}getSubmeshIdx(e){let n=e.lastIndexOf("-");if(n!=-1){e=e.substring(0,n);let s=Number(e.substring(n+1));if(s&&!isNaN(s))return s}return null}getRegExp(e,n){if((n&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){let s=e.lastIndexOf("-");s!=-1&&(e=e.substring(0,s),Number(e.substring(s+1)))}return new RegExp(this.escapeRegExp(e).replace(/\\\*/g,".*"),"i")}getElements(e,n,s,c,u){const m=[],b=c.split(";");for(let k=0;k<b.length;k++){const W=b[k];let ve=W,Ae=this.getRegExp(W,u);if((u&MPlaza.SceneElementType.Mesh)==MPlaza.SceneElementType.Mesh){const rt=this.getMeshes(e,n,s,Ae,ve);Array.prototype.push.apply(m,rt)}if((u&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){let rt=this.getSubmeshIdx(ve);if(rt){const re=this.getSubMeshes(e,n,s,Ae,ve,rt);Array.prototype.push.apply(m,re)}}if((u&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){const rt=this.getMaterials(e,n,s,Ae,ve);Array.prototype.push.apply(m,rt)}if((u&MPlaza.SceneElementType.Light)==MPlaza.SceneElementType.Light){const rt=this.getLights(e,n,s,Ae,ve);Array.prototype.push.apply(m,rt)}if((u&MPlaza.SceneElementType.Camera)==MPlaza.SceneElementType.Camera){const rt=this.getCameras(e,n,s,Ae,ve);Array.prototype.push.apply(m,rt)}if((u&MPlaza.SceneElementType.CameraLocation)==MPlaza.SceneElementType.CameraLocation){const rt=this.getCameraLocations(e,n,s,Ae);Array.prototype.push.apply(m,rt)}}return m}getMeshElements(e,n,s,c,u){const m=[],b=c.split(";");for(let k=0;k<b.length;k++){const W=b[k];let ve=W,Ae=this.getRegExp(W,u);if((u&MPlaza.SceneElementType.Mesh)==MPlaza.SceneElementType.Mesh){const rt=this.getMeshes(e,n,s,Ae,ve);Array.prototype.push.apply(m,rt)}}return m}getSubMeshElements(e,n,s,c,u){const m=[],b=c.split(";");for(let k=0;k<b.length;k++){const W=b[k];let ve=W,Ae=this.getRegExp(W,u);if((u&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){let rt=this.getSubmeshIdx(ve);if(rt){const re=this.getSubMeshes(e,n,s,Ae,ve,rt);Array.prototype.push.apply(m,re)}}}return m}getMaterialElements(e,n,s,c,u){const m=[],b=c.split(";");for(let k=0;k<b.length;k++){const W=b[k];let ve=W,Ae=this.getRegExp(W,u);if((u&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){const rt=this.getMaterials(e,n,s,Ae,ve);Array.prototype.push.apply(m,rt)}}return m}getLightElements(e,n,s,c,u){const m=[],b=c.split(";");for(let k=0;k<b.length;k++){const W=b[k];let ve=W,Ae=this.getRegExp(W,u);if((u&MPlaza.SceneElementType.Light)==MPlaza.SceneElementType.Light){const rt=this.getLights(e,n,s,Ae,ve);Array.prototype.push.apply(m,rt)}}return m}getCameraElements(e,n,s,c,u){const m=[],b=c.split(";");for(let k=0;k<b.length;k++){const W=b[k];let ve=W,Ae=this.getRegExp(W,u);if((u&MPlaza.SceneElementType.Camera)==MPlaza.SceneElementType.Camera){const rt=this.getCameras(e,n,s,Ae,ve);Array.prototype.push.apply(m,rt)}}return m}getCameraLocationElements(e,n,s,c,u){const m=[],b=c.split(";");for(let k=0;k<b.length;k++){const W=b[k];let ve=this.getRegExp(W,u);if((u&MPlaza.SceneElementType.CameraLocation)==MPlaza.SceneElementType.CameraLocation){const Ae=this.getCameraLocations(e,n,s,ve);Array.prototype.push.apply(m,Ae)}}return m}getOffloadedElementIDs(e,n,s,c,u){const m=[],b=c.split(";");for(let Ae=0;Ae<b.length;Ae++){const rt=b[Ae];let re=rt;if((u&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){var k=rt.lastIndexOf("-");k!=-1&&(re=rt.substring(0,k),Number(rt.substring(k+1)))}var W=new RegExp(this.escapeRegExp(re).replace(/\\\*/g,".*"),"i");if((u&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){var ve=this.getOffloadedMaterialIDs(e,n,s,W,re);Array.prototype.push.apply(m,ve)}}return m}getDelayedElementIDs(e,n,s,c,u){const m=[],b=c.split(";");for(let Ae=0;Ae<b.length;Ae++){const rt=b[Ae];let re=rt;if((u&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){var k=rt.lastIndexOf("-");k!=-1&&(re=rt.substring(0,k),Number(rt.substring(k+1)))}var W=new RegExp(this.escapeRegExp(re).replace(/\\\*/g,".*"),"i");if((u&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){var ve=this.getDelayedMaterialIDs(e,n,s,W,re);Array.prototype.push.apply(m,ve)}}return m}getMeshes(e,n,s,c,u){const m=[];if(n&&n instanceof window.BABYLON.Scene)for(let b=0;b<n.meshes.length;b++){const k=n.meshes[b];(k.name&&c.test(k.name)||k.id&&k.id==u)&&this.verifyFilter(k.id,s)&&m.push(k)}return m}getSubMeshes(e,n,s,c,u,m){const b=[];if(n&&n instanceof window.BABYLON.Scene)for(let k=0;k<n.meshes.length;k++){const W=n.meshes[k];(W.name&&c.test(W.name)||W.id&&W.id==u)&&this.verifyFilter(W.id,s)&&m<W.subMeshes.length&&m>=0&&b.push(W.subMeshes[m])}return b}getMaterials(e,n,s,c,u){const m=[];if(n&&n instanceof window.BABYLON.Scene)for(let b=0;b<n.materials.length;b++){const k=n.materials[b];(k.name&&c.test(k.name)||k.id&&k.id==u||k.metadata&&!k.metadata.isRealMaterial&&k.metadata.originalMaterialID==u)&&this.verifyFilter(k.id,s)&&m.push(k)}return m}getOffloadedMaterialIDs(e,n,s,c,u){const m=[];if(n&&n instanceof window.BABYLON.Scene&&n.metadata&&n.metadata.offloadedMaterials)for(let b in n.metadata.offloadedMaterials){const k=n.metadata.offloadedMaterials[b];(k.name&&c.test(k.name)||b&&b==u)&&this.verifyFilter(b,s)&&m.push(b)}return m}getDelayedMaterialIDs(e,n,s,c,u){const m=[];if(n&&n instanceof window.BABYLON.Scene&&n.metadata&&n.metadata.delayedMaterials)for(let b in n.metadata.delayedMaterials){const k=n.metadata.delayedMaterials[b];(k.name&&c.test(k.name)||b&&b==u)&&this.verifyFilter(b,s)&&m.push(b)}return m}getLights(e,n,s,c,u){const m=[];if(n&&n instanceof window.BABYLON.Scene)for(let b=0;b<n.lights.length;b++){const k=n.lights[b];(k.name&&c.test(k.name)||k.id&&k.id==u)&&this.verifyFilter(k.id,s)&&m.push(k)}return m}getCameras(e,n,s,c,u){const m=[];if(n&&n instanceof window.BABYLON.Scene)for(let b=0;b<n.cameras.length;b++){const k=n.cameras[b];(k.name&&c.test(k.name)||k.id&&k.id==u)&&this.verifyFilter(k.id,s)&&m.push(k)}return m}getCameraLocations(e,n,s,c){var u=[];if(e&&e instanceof Zakeke.Scene)for(var m=0;m<e.get("cameraLocations").length;m++){var b=e.get("cameraLocations").at(m),k=b.getLocationID(),W=b.get("name");(W&&c.test(W)||k&&c.test(k))&&this.verifyFilter(k,s)&&u.push(b)}return u}getYesNoElements(e,n,s,c,u){const m={yes:[],no:[]},b=c.split(";");for(let k=0;k<b.length;k++){const W=b[k];let ve=W,Ae=0;if((u&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){let re=W.lastIndexOf("-");if(re!=-1){ve=W.substring(0,re);let mt=Number(W.substring(re+1));mt&&!isNaN(mt)&&(Ae=mt)}}const rt=new RegExp(this.escapeRegExp(ve).replace(/\\\*/g,".*"),"i");if((u&MPlaza.SceneElementType.Mesh)==MPlaza.SceneElementType.Mesh){const re=this.getYesNoMeshes(e,n,s,rt);Array.prototype.push.apply(m.yes,re.yes),Array.prototype.push.apply(m.no,re.no)}if((u&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){const re=this.getYesNoSubMeshes(e,n,s,rt,Ae);Array.prototype.push.apply(m.yes,re.yes),Array.prototype.push.apply(m.no,re.no)}if((u&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){const re=this.getYesNoMaterials(e,n,s,rt);Array.prototype.push.apply(m.yes,re.yes),Array.prototype.push.apply(m.no,re.no)}if((u&MPlaza.SceneElementType.Light)==MPlaza.SceneElementType.Light){const re=this.getYesNoLights(e,n,s,rt);Array.prototype.push.apply(m.yes,re.yes),Array.prototype.push.apply(m.no,re.no)}if((u&MPlaza.SceneElementType.Camera)==MPlaza.SceneElementType.Camera){const re=this.getYesNoCameras(e,n,s,rt);Array.prototype.push.apply(m.yes,re.yes),Array.prototype.push.apply(m.no,re.no)}if((u&MPlaza.SceneElementType.CameraLocation)==MPlaza.SceneElementType.CameraLocation){const re=this.getYesNoCameraLocations(e,n,s,rt);Array.prototype.push.apply(m.yes,re.yes),Array.prototype.push.apply(m.no,re.no)}}return m}getYesNoMeshes(e,n,s,c){const u={yes:[],no:[]};if(n&&n instanceof window.BABYLON.Scene)for(let m=0;m<n.meshes.length;m++){let b=n.meshes[m],k=u.no;(b.name&&c.test(b.name)||b.id&&c.test(b.id))&&this.verifyFilter(b.id,s)&&(k=u.yes),k.push(b)}return u}getYesNoSubMeshes(e,n,s,c,u){const m={yes:[],no:[]};if(n&&n instanceof window.BABYLON.Scene)for(let b=0;b<n.meshes.length;b++){let k=n.meshes[b];if((k.name&&c.test(k.name)||k.id&&c.test(k.id))&&this.verifyFilter(k.id,s)&&k.subMeshes)for(let W=0;W<k.subMeshes.length;W++)W==u?m.yes.push(k.subMeshes[W]):m.no.push(k.subMeshes[W])}return m}getYesNoMaterials(e,n,s,c){const u={yes:[],no:[]};if(n&&n instanceof window.BABYLON.Scene)for(let m=0;m<n.materials.length;m++){let b=n.materials[m];(b.name&&c.test(b.name)||b.id&&c.test(b.id))&&this.verifyFilter(b.id,s)?u.yes.push(b):u.no.push(b)}return u}getYesNoLights(e,n,s,c){const u={yes:[],no:[]};if(n&&n instanceof window.BABYLON.Scene)for(let m=0;m<n.lights.length;m++){let b=n.lights[m];(b.name&&c.test(b.name)||b.id&&c.test(b.id))&&this.verifyFilter(b.id,s)?u.yes.push(b):u.no.push(b)}return u}getYesNoCameras(e,n,s,c){const u={yes:[],no:[]};if(n&&n instanceof window.BABYLON.Scene)for(let m=0;m<n.cameras.length;m++){let b=n.cameras[m];(b.name&&c.test(b.name)||b.id&&c.test(b.id))&&this.verifyFilter(b.id,s)?u.yes.push(b):u.no.push(b)}return u}getYesNoCameraLocations(e,n,s,c){const u={yes:[],no:[]};if(e&&e instanceof Zakeke.Scene)for(let m=0;m<e.get("cameraLocations").length;m++){let b=e.get("cameraLocations").at(m),k=b.getLocationID(),W=b.get("name");(W&&c.test(W)||k&&c.test(k))&&this.verifyFilter(k,s)?u.yes.push(b):u.no.push(b)}return u}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}verifyFilter(e,n){return!n||n.length==0?!0:n.indexOf(e)!==-1}}var _a=globalThis&&globalThis.__awaiter||function(y,e,n,s){function c(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function b(ve){try{W(s.next(ve))}catch(Ae){m(Ae)}}function k(ve){try{W(s.throw(ve))}catch(Ae){m(Ae)}}function W(ve){ve.done?u(ve.value):c(ve.value).then(b,k)}W((s=s.apply(y,e||[])).next())})},ya=globalThis&&globalThis.__generator||function(y,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,c,u,m;return m={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function b(W){return function(ve){return k([W,ve])}}function k(W){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,c&&(u=W[0]&2?c.return:W[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,W[1])).done)return u;switch(c=0,u&&(W=[W[0]&2,u.value]),W[0]){case 0:case 1:u=W;break;case 4:return n.label++,{value:W[1],done:!1};case 5:n.label++,c=W[1],W=[0];continue;case 7:W=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(W[0]===6||W[0]===2)){n=0;continue}if(W[0]===3&&(!u||W[1]>u[0]&&W[1]<u[3])){n.label=W[1];break}if(W[0]===6&&n.label<u[1]){n.label=u[1],u=W;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(W);break}u[2]&&n.ops.pop(),n.trys.pop();continue}W=e.call(y,n)}catch(ve){W=[6,ve],c=0}finally{s=u=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}},ks=function(){function y(e,n,s){this._zkModel=null,this._sceneHelper=null,this._deviceType=MPlaza.DeviceType.All,this._meshDesignRefreshRequiredListeners=[],this._beginAssetsLoadingListeners=[],this._endAssetsLoadingListeners=[],this._useMaterialOffloading=!1,this._prefetchMeshes=!0,this._prefetchMaterials=!0,this._zkScene=e,this._scene=n,this._sceneHelper=new Tr(n),this._elementSelector=new Th,s&&(this._zkModel=s)}return Object.defineProperty(y.prototype,"deviceType",{get:function(){return this._deviceType},set:function(e){this._deviceType!=e&&(this._deviceType=e)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"useMaterialOffloading",{get:function(){return this._useMaterialOffloading},set:function(e){this._useMaterialOffloading!=e&&(this._useMaterialOffloading=e)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"prefetchMeshes",{get:function(){return this._prefetchMeshes},set:function(e){this._prefetchMeshes!==e&&(this._prefetchMeshes=e)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"prefetchMaterials",{get:function(){return this._prefetchMaterials},set:function(e){this._prefetchMaterials!==e&&(this._prefetchMaterials=e)},enumerable:!1,configurable:!0}),y.prototype.dispose=function(){this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null)},y.prototype.addMeshDesignRefreshRequiredListeners=function(e){this._meshDesignRefreshRequiredListeners.push(e)},y.prototype.fireMeshDesignRefreshRequiredEvent=function(e,n){for(var s={meshes:e,effect:n},c=0;c<this._meshDesignRefreshRequiredListeners.length;++c)this._meshDesignRefreshRequiredListeners[c](s)},y.prototype.addBeginAssetsLoadingListener=function(e){this._beginAssetsLoadingListeners.push(e)},y.prototype.fireBeginAssetsLoadingEvent=function(){for(var e=0;e<this._beginAssetsLoadingListeners.length;++e)this._beginAssetsLoadingListeners[e]()},y.prototype.addEndAssetsLoadingListener=function(e){this._endAssetsLoadingListeners.push(e)},y.prototype.fireEndAssetsLoadingEvent=function(){for(var e=0;e<this._endAssetsLoadingListeners.length;++e)this._endAssetsLoadingListeners[e]()},y.prototype.isActionForDevice=function(e){var n=e.get("deviceTypes");return n===MPlaza.DeviceType.Any||n===MPlaza.DeviceType.All||(n&this._deviceType)===this._deviceType},y.prototype.setupMeshData=function(e){e.data||(e.data={filters:{},toShow:e.isVisible})},y.prototype.setMeshFilterAsync=function(e,n,s){return _a(this,void 0,void 0,function(){return ya(this,function(c){switch(c.label){case 0:return this.setupMeshData(e),e.data.filters[n]=s,[4,this.chekMeshVisibilityAsync(e)];case 1:return c.sent(),[2]}})})},y.prototype.setMeshVisibilityAsync=function(e,n){return _a(this,void 0,void 0,function(){return ya(this,function(s){switch(s.label){case 0:return this.setupMeshData(e),e.data.toShow=n,[4,this.chekMeshVisibilityAsync(e)];case 1:return s.sent(),[2]}})})},y.prototype.chekMeshVisibilityAsync=function(e){return _a(this,void 0,void 0,function(){var n,s,c;return ya(this,function(u){switch(u.label){case 0:if(n=null,e&&e.data&&(n=e.data.toShow,n))for(s in e.data.filters)n=n&&e.data.filters[s];return n!==null&&this._sceneHelper?n?(c=this._zkScene.get("rootUrl"),c?[4,this._sceneHelper.unsetMeshDummyMaterialAsync(e,c,!0)]:[3,2]):[3,4]:[3,5];case 1:u.sent(),u.label=2;case 2:return[4,Tr.whenMeshIsReadyAsync(e)];case 3:u.sent(),u.label=4;case 4:this._sceneHelper.showHideMesh(e.id,n),u.label=5;case 5:return[2]}})})},y.prototype.getMeshByID=function(e){return this._scene.getMeshByID(e)},y.prototype.getMaterialByID=function(e){return this._scene.getMaterialByID(e)},y.prototype.setCameraLocation=function(e){var n=this._zkScene.getCameraLocation(e);if(n){var s=new window.BABYLON.Vector3(n.get("px"),n.get("py"),n.get("pz")),c=new window.BABYLON.Vector3(n.get("tx"),n.get("ty"),n.get("tz"));this._sceneHelper&&this._sceneHelper.animateCamera(c,s,.5)}},y.prototype.adjustCamera=function(e){this._sceneHelper&&(e!==void 0&&typeof e=="boolean"?this._sceneHelper.adjustCamera(void 0,void 0,void 0,e):this._sceneHelper.adjustCamera())},y.prototype.zoomIn=function(){this._sceneHelper&&this._sceneHelper.zoomIn()},y.prototype.zoomOut=function(){this._sceneHelper&&this._sceneHelper.zoomOut()},y.prototype.zoom=function(e){this._sceneHelper&&this._sceneHelper.zoom(e)},y.prototype.setCameraPivot=function(e){if(this._sceneHelper){var n=e?this._scene.getMeshByID(e):null;this._sceneHelper.setCameraPivot(n)}},y.prototype.setCameraZoomEnabled=function(e){this._sceneHelper&&this._sceneHelper.setZoomEnabled(e)},y.prototype.setMeshMaterial=function(e,n){return _a(this,void 0,void 0,function(){var s;return ya(this,function(c){switch(c.label){case 0:return this._sceneHelper?[4,Tr.whenAllMaterialTexturesAreReady(e)]:[3,2];case 1:c.sent(),s=n.material,Logger.info("Setting material to mesh | mesh: "+n.id+" - "+n.name+" | material: "+e.id+" - "+e.name),this._sceneHelper.applyMaterial(e,n),this._useMaterialOffloading&&s&&this._sceneHelper.offloadMaterial(s.id),c.label=2;case 2:return[2]}})})},y.prototype.setSubmeshMaterial=function(e,n,s){return _a(this,void 0,void 0,function(){var c;return ya(this,function(u){switch(u.label){case 0:return this._sceneHelper?[4,Tr.whenAllMaterialTexturesAreReady(e)]:[3,2];case 1:u.sent(),c=this._sceneHelper.getSubMeshMaterial(n,s),this._sceneHelper.applyMaterialToSubMesh(e,n,s),this._useMaterialOffloading&&c&&this._sceneHelper.offloadMaterial(c.id),u.label=2;case 2:return[2]}})})},y.prototype.getMaterialFromActionValue=function(e){if(this._elementSelector){var n=e.get("value");if(n!=null&&n!=null){var s=this._scene.getMaterialByID(n);return s||(s=this._scene.getMaterialByName(n)),s}}return null},y.prototype.getDelayedMaterialIDFromAction=function(e){if(this._zkScene&&this._scene&&this._elementSelector&&e&&e instanceof MPlaza.AttributeSceneAction&&this._scene.metadata&&this._scene.metadata.delayedMaterials){var n=e.get("value");if(n!=null&&n!=null){if(this._scene.metadata.delayedMaterials.hasOwnProperty(n))return n;for(var s in this._scene.metadata.delayedMaterials)if(this._scene.metadata.delayedMaterials[s].name===n)return s}}return null},y.prototype.checkDelayedMaterial=function(e){return _a(this,void 0,void 0,function(){var n,s;return ya(this,function(c){switch(c.label){case 0:return n=this.getMaterialByID(e),!n&&this._sceneHelper?(s=this._zkScene.get("rootUrl"),s!=null&&s!=null?[4,this._sceneHelper.loadDelayedMaterialAsync(s,e)]:[3,2]):[3,2];case 1:n=c.sent(),c.label=2;case 2:return[2,n]}})})},y.prototype.getOffloadedMaterialIDFromAction=function(e){if(this._zkScene&&this._scene&&this._elementSelector&&e&&e instanceof MPlaza.AttributeSceneAction&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){var n=e.get("value");if(n!=null){if(this._scene.metadata.offloadedMaterials.hasOwnProperty(n))return n;for(var s in this._scene.metadata.offloadedMaterials)if(this._scene.metadata.offloadedMaterials[s].name===n)return s}}return null},y.prototype.checkOffloadedMaterialAsync=function(e){return _a(this,void 0,void 0,function(){var n,s;return ya(this,function(c){switch(c.label){case 0:return n=this.getMaterialByID(e),!n&&this._sceneHelper?(s=this._zkScene.get("rootUrl"),s==null?[3,2]:[4,this._sceneHelper.loadOffloadedMaterialAsync(s,e)]):[3,2];case 1:n=c.sent(),c.label=2;case 2:return[2,n]}})})},y.prototype.getDeepMaterialFromActionValueAsync=function(e){return _a(this,void 0,void 0,function(){var n,s,c;return ya(this,function(u){switch(u.label){case 0:return n=this.getMaterialFromActionValue(e),!n&&this._sceneHelper?(s=this._zkScene.get("rootUrl"),s==null?[3,4]:(c=this.getOffloadedMaterialIDFromAction(e),c?(Logger.info("Requesting offloaded material - id: ",c),[4,this._sceneHelper.loadOffloadedMaterialAsync(s,c)]):[3,2])):[3,4];case 1:return n=u.sent(),Logger.info("Obtained offloaded material - id: ",c),[3,4];case 2:return c=this.getDelayedMaterialIDFromAction(e),c?(Logger.info("Requesting delayed material - id: ",c),[4,this._sceneHelper.loadDelayedMaterialAsync(s,c)]):[3,4];case 3:n=u.sent(),Logger.info("Obtained delayed material - id: ",c),u.label=4;case 4:return[2,n]}})})},y.prototype.scriptRequiresDelayedLoading=function(e){for(var n=0;n<e.length;n++){var s=e[n];if(this.actionsRequireDelayedLoading(s.actions))return!0}return!1},y.prototype.actionsRequireDelayedLoading=function(e){for(var n=0;n<e.length;n++)if(this.actionRequiresDelayedLoading(e[n]))return!0;return!1},y.prototype.actionRequiresDelayedLoading=function(e){if(this._sceneHelper&&e.get("actionTypeID")===MPlaza.SceneActionType.ShowHideMesh&&e.get("value")==="show"){var n=e.get("selector");if(n!=null)for(var s=this._elementSelector.getElements(this._zkScene,this._scene,null,n,MPlaza.SceneElementType.Mesh),c=0;c<s.length;c++){var u=s[c];if(u instanceof window.BABYLON.AbstractMesh&&!u.isVisible){var m=this._sceneHelper.getMeshDelayedMaterialIDs(u),b=this._sceneHelper.getMeshOffloadedMaterialIDs(u);if(m.length>0||b.length>0||Tr.meshRequiresDelayedLoading(u))return!0}}}if(e.get("actionTypeID")===MPlaza.SceneActionType.SetMeshMaterial||e.get("actionTypeID")===MPlaza.SceneActionType.SetSubMeshMaterial||e.get("actionTypeID")===MPlaza.SceneActionType.SetMaterialColor||e.get("actionTypeID")===MPlaza.SceneActionType.SetMeshDesignMaterial){var k=this.getMaterialFromActionValue(e);if(!k){var W=this.getDelayedMaterialIDFromAction(e);if(W)return!0;var ve=this.getOffloadedMaterialIDFromAction(e);if(ve)return!0}}if(e.get("actionTypeID")===MPlaza.SceneActionType.SetMaterialColor){var n=e.get("selector");if(n!=null){var Ae=this._elementSelector.getDelayedElementIDs(this._zkScene,this._scene,null,n,MPlaza.SceneElementType.Material),rt=this._elementSelector.getOffloadedElementIDs(this._zkScene,this._scene,null,n,MPlaza.SceneElementType.Material);if(Ae.length>0||rt.length>0)return!0}}return!1},y.prototype.getAllMaterialElementsAsync=function(e){return _a(this,void 0,void 0,function(){var n,s,c,u,m,b,k,W,ve,Ae;return ya(this,function(rt){switch(rt.label){case 0:return n=[],this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector?(s=this._elementSelector.getMaterialElements(this._zkScene,this._scene,null,e,MPlaza.SceneElementType.Material),Array.prototype.push.apply(n,s),c=s.map(function(re){return re.id}),u=this._elementSelector.getDelayedElementIDs(this._zkScene,this._scene,null,e,MPlaza.SceneElementType.Material),m=this._elementSelector.getOffloadedElementIDs(this._zkScene,this._scene,null,e,MPlaza.SceneElementType.Material),b=this._zkScene.get("rootUrl"),b==null?[3,4]:(k=[],u.forEach(function(re){c.indexOf(re)===-1&&k.push(re)}),k.length>0?[4,this._sceneHelper.loadDelayedMaterialsAsync(b,k)]:[3,2])):[3,4];case 1:W=rt.sent(),Array.prototype.push.apply(n,W),rt.label=2;case 2:return ve=[],m.forEach(function(re){c.indexOf(re)===-1&&ve.push(re)}),ve.length>0?[4,this._sceneHelper.loadOffloadedMaterialsByIDsAsync(b,ve)]:[3,4];case 3:Ae=rt.sent(),Array.prototype.push.apply(n,Ae),rt.label=4;case 4:return[2,n]}})})},y.prototype.executeScriptAsync=function(e){return _a(this,void 0,void 0,function(){var n,s,c;return ya(this,function(u){switch(u.label){case 0:n=this.scriptRequiresDelayedLoading(e),n&&this.fireBeginAssetsLoadingEvent(),s=0,u.label=1;case 1:return s<e.length?(c=e[s],[4,this.executeActionsAsync(c.attributeID,c.selectedValue,c.actions,!1)]):[3,4];case 2:u.sent(),u.label=3;case 3:return s++,[3,1];case 4:return n&&this.fireEndAssetsLoadingEvent(),[2]}})})},y.prototype.executeActionsAsync=function(e,n,s,c){return c===void 0&&(c=!0),_a(this,void 0,void 0,function(){var u,m;return ya(this,function(b){switch(b.label){case 0:return s.length>0?(u=this.actionsRequireDelayedLoading(s),c&&u&&this.fireBeginAssetsLoadingEvent(),[4,this.checkActionsAssetsAreReadyAsync(s)]):[3,6];case 1:b.sent(),m=0,b.label=2;case 2:return m<s.length?[4,this.executeActionAsync(e,n,s[m])]:[3,5];case 3:b.sent(),b.label=4;case 4:return m++,[3,2];case 5:c&&u&&this.fireEndAssetsLoadingEvent(),b.label=6;case 6:return[2]}})})},y.prototype.executeActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){var c;return ya(this,function(u){switch(u.label){case 0:if(!this.isActionForDevice(s))return[2];if(!s)return[3,25];switch(c=s.get("actionTypeID"),c){case MPlaza.SceneActionType.Filter:return[3,1];case MPlaza.SceneActionType.ShowHideMesh:return[3,3];case MPlaza.SceneActionType.SetMeshMaterial:return[3,5];case MPlaza.SceneActionType.SetSubMeshMaterial:return[3,7];case MPlaza.SceneActionType.SetMaterialColor:return[3,9];case MPlaza.SceneActionType.SetCameraLocation:return[3,11];case MPlaza.SceneActionType.AdjustCamera:return[3,13];case MPlaza.SceneActionType.SetCameraPivot:return[3,15];case MPlaza.SceneActionType.ResetCameraPivot:return[3,17];case MPlaza.SceneActionType.EnableDiableZoom:return[3,19];case MPlaza.SceneActionType.SetMeshDesignMaterial:return[3,21];case MPlaza.SceneActionType.SetMeshDesignEffect:return[3,23]}return[3,25];case 1:return[4,this.executeFilterActionAsync(e,n,s)];case 2:return u.sent(),[3,25];case 3:return[4,this.executeShowHideActionAsync(e,n,s)];case 4:return u.sent(),[3,25];case 5:return[4,this.executeSetMeshMaterialActionAsync(e,n,s)];case 6:return u.sent(),[3,25];case 7:return[4,this.executeSetSubMeshMaterialActionAsync(e,n,s)];case 8:return u.sent(),[3,25];case 9:return[4,this.executeSetMaterialColorActionAsync(e,n,s)];case 10:return u.sent(),[3,25];case 11:return[4,this.executeSetCameraLocationActionAsync(e,n,s)];case 12:return u.sent(),[3,25];case 13:return[4,this.executeAdjustCameraActionAsync(e,n,s)];case 14:return u.sent(),[3,25];case 15:return[4,this.executeSetCameraPivotActionAsync(e,n,s)];case 16:return u.sent(),[3,25];case 17:return[4,this.executeResetCameraPivotActionAsync(e,n,s)];case 18:return u.sent(),[3,25];case 19:return[4,this.executeEnableDisableZoomActionAsync(e,n,s)];case 20:return u.sent(),[3,25];case 21:return[4,this.executeSetMeshDesignMaterialActionAsync(e,n,s)];case 22:return u.sent(),[3,25];case 23:return[4,this.executeSetMeshDesignEffectActionAsync(e,n,s)];case 24:return u.sent(),[3,25];case 25:return[2]}})})},y.prototype.executeFilterActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){var c,u,m,b,b;return ya(this,function(k){switch(k.label){case 0:if(!this.isActionForDevice(s))return[2];if(!(e!==null&&this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&s&&s instanceof MPlaza.AttributeSceneAction))return[3,8];if(c=s.get("selector"),c==null)return[3,8];u=this._elementSelector.getYesNoElements(this._zkScene,this._scene,null,c,MPlaza.SceneElementType.Mesh),m=s.get("value")==="enable",b=0,k.label=1;case 1:return b<u.yes.length?[4,this.setMeshFilterAsync(u.yes[b],e,m)]:[3,4];case 2:k.sent(),k.label=3;case 3:return b++,[3,1];case 4:b=0,k.label=5;case 5:return b<u.no.length?[4,this.setMeshFilterAsync(u.yes[b],e,!m)]:[3,8];case 6:k.sent(),k.label=7;case 7:return b++,[3,5];case 8:return[2]}})})},y.prototype.executeShowHideActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){var c,u,m,b;return ya(this,function(k){switch(k.label){case 0:if(!this.isActionForDevice(s))return[2];if(!(this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&s&&s instanceof MPlaza.AttributeSceneAction))return[3,4];if(c=s.get("selector"),c==null)return[3,4];u=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,c,MPlaza.SceneElementType.Mesh),m=s.get("value")==="show",b=0,k.label=1;case 1:return b<u.length?[4,this.setMeshVisibilityAsync(u[b],m)]:[3,4];case 2:k.sent(),k.label=3;case 3:return b++,[3,1];case 4:return[2]}})})},y.prototype.executeSetMeshMaterialActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){var c,u,m,b;return ya(this,function(k){switch(k.label){case 0:return this.isActionForDevice(s)?this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&s&&s instanceof MPlaza.AttributeSceneAction?(c=s.get("selector"),c==null?[3,5]:(u=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,c,MPlaza.SceneElementType.Mesh),[4,this.getDeepMaterialFromActionValueAsync(s)])):[3,5]:[2];case 1:if(m=k.sent(),!m)return[3,5];b=0,k.label=2;case 2:return b<u.length?[4,this.setMeshMaterial(m,u[b])]:[3,5];case 3:k.sent(),k.label=4;case 4:return b++,[3,2];case 5:return[2]}})})},y.prototype.executeSetSubMeshMaterialActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){var c,u,m,b;return ya(this,function(k){switch(k.label){case 0:return this.isActionForDevice(s)?this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&s&&s instanceof MPlaza.AttributeSceneAction?(c=s.get("selector"),c==null?[3,5]:(u=this._elementSelector.getSubMeshElements(this._zkScene,this._scene,null,c,MPlaza.SceneElementType.SubMesh),[4,this.getDeepMaterialFromActionValueAsync(s)])):[3,5]:[2];case 1:if(m=k.sent(),!m)return[3,5];b=0,k.label=2;case 2:return b<u.length?[4,this.setSubmeshMaterial(m,null,u[b])]:[3,5];case 3:k.sent(),k.label=4;case 4:return b++,[3,2];case 5:return[2]}})})},y.prototype.executeSetMaterialColorActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){var c,u,m,b,k,W;return ya(this,function(ve){switch(ve.label){case 0:return this.isActionForDevice(s)?this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&s&&s instanceof MPlaza.AttributeSceneAction?(c=s.get("selector"),c==null?[3,2]:[4,this.getAllMaterialElementsAsync(c)]):[3,2]:[2];case 1:if(u=ve.sent(),m=s.get("propertyName"),b=s.get("value"),m&&b)for(n&&(b=b.replace(/%value%/g,n)),k=window.BABYLON.Color3.FromHexString(b),W=0;W<u.length;W++)this._sceneHelper.changeMaterialColor(u[W],m,k);ve.label=2;case 2:return[2]}})})},y.prototype.executeSetCameraLocationActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){var c,u,m,b;return ya(this,function(k){if(!this.isActionForDevice(s))return[2];if(this._zkScene&&this._scene&&this._elementSelector&&s&&s instanceof MPlaza.AttributeSceneAction){if(c=s.get("value"),u=null,c){for(m=0;m<this._zkScene.get("cameraLocations").length;m++)if(b=this._zkScene.get("cameraLocations").at(m),b.get("locationID")===c||b.get("name")===c){u=b;break}}u!==null&&this.setCameraLocation(u.get("locationID"))}return[2]})})},y.prototype.executeAdjustCameraActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){return ya(this,function(c){return this.isActionForDevice(s)?(this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&s&&s instanceof MPlaza.AttributeSceneAction&&this._sceneHelper.adjustCamera(),[2]):[2]})})},y.prototype.executeSetCameraPivotActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){var c,u,m,b;return ya(this,function(k){if(!this.isActionForDevice(s))return[2];if(this._zkScene&&this._scene&&this._elementSelector&&s&&s instanceof MPlaza.AttributeSceneAction){if(c=s.get("value"),u=null,c){for(m=0;m<this._scene.meshes.length;m++)if(b=this._scene.meshes[m],b.id===c||b.name===c){u=b;break}}u&&this.setCameraPivot(u.id)}return[2]})})},y.prototype.executeResetCameraPivotActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){return ya(this,function(c){return this.isActionForDevice(s)?(this.setCameraPivot(null),[2]):[2]})})},y.prototype.executeEnableDisableZoomActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){var c;return ya(this,function(u){return this.isActionForDevice(s)?(this._zkScene&&this._scene&&this._elementSelector&&s&&s instanceof MPlaza.AttributeSceneAction&&(c=s.get("value")==="enable",this.setCameraZoomEnabled(c)),[2]):[2]})})},y.prototype.executeSetMeshDesignMaterialActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){var c,u,m,b,k;return ya(this,function(W){switch(W.label){case 0:return this._zkScene&&this._scene&&this._elementSelector&&s&&s instanceof MPlaza.AttributeSceneAction?(c=s.get("selector"),c!=null&&c!=null?(u=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,c,MPlaza.SceneElementType.Mesh),[4,this.getDeepMaterialFromActionValueAsync(s)]):[3,2]):[3,2];case 1:if(m=W.sent(),m){for(b=0;b<u.length;b++)k=u[b],k.metadata=k.metadata||{},k.metadata.designMaterialID=m.id;this.fireMeshDesignRefreshRequiredEvent(u,null)}W.label=2;case 2:return[2]}})})},y.prototype.executeSetMeshDesignEffectActionAsync=function(e,n,s){return _a(this,void 0,void 0,function(){var c,u,m,b,k,W,ve,Ae,rt,re,mt;return ya(this,function(nt){switch(nt.label){case 0:if(!this.isActionForDevice(s))return[2];if(!(this._zkScene&&this._scene&&this._elementSelector&&s&&s instanceof MPlaza.AttributeSceneAction))return[3,4];if(c=s.get("selector"),!(c!=null&&c!=null))return[3,4];if(u=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,c,MPlaza.SceneElementType.Mesh),m=s.get("value"),b=null,m!=null&&m!=null&&this._zkModel)for(k=0;k<this._zkModel.get("scenes").length;k++){if(W=this._zkModel.get("scenes").at(k),W.get("isDefault")&&(ve=W.get("meshDesignEffects"),ve)){for(Ae=0;Ae<ve.length;Ae++)if(rt=ve.at(Ae),rt.get("effectID")===m||rt.get("name")===m){b=rt;break}}if(b)break}return re=null,b?(mt=b.get("materialID"),mt?[4,this.checkOffloadedMaterialAsync(mt)]:[3,3]):[3,3];case 1:return re=nt.sent(),re?[3,3]:[4,this.checkDelayedMaterial(mt)];case 2:re=nt.sent(),nt.label=3;case 3:this.fireMeshDesignRefreshRequiredEvent(u,b),nt.label=4;case 4:return[2]}})})},y.prototype.prefetchMeshesForUnselectedOptionsAsync=function(e){return _a(this,void 0,void 0,function(){var n,s,c,u,m,b,k;return ya(this,function(W){switch(W.label){case 0:if(!(this._zkScene&&this._scene&&this._elementSelector&&this._sceneHelper&&this._prefetchMeshes))return[3,6];n=0,W.label=1;case 1:if(!(n<e.length))return[3,6];if(s=e[n],!(s&&s instanceof MPlaza.AttributeSceneAction))return[3,5];if(!(s.get("actionTypeID")===MPlaza.SceneActionType.ShowHideMesh&&s.get("value")=="show"))return[3,5];if(c=s.get("selector"),!(c!=null&&c!=null))return[3,5];u=this._elementSelector.getElements(this._zkScene,this._scene,null,c,MPlaza.SceneElementType.Mesh),m=0,W.label=2;case 2:return m<u.length?(b=u[m],b instanceof window.BABYLON.AbstractMesh&&!b.isVisible?(this._sceneHelper.checkDelayState(b),k=b.material,k?[4,this._sceneHelper.prefetchTexturesForMaterialAsync(k)]:[3,4]):[3,4]):[3,5];case 3:W.sent(),W.label=4;case 4:return m++,[3,2];case 5:return n++,[3,1];case 6:return[2]}})})},y.prototype.checkActionsAssetsAreReadyAsync=function(e){return _a(this,void 0,void 0,function(){var W,ve,n,rt,s,c,u,m,b,k,W,ve,Ae,rt;return ya(this,function(re){switch(re.label){case 0:if(!(this._zkScene&&this._scene&&this._elementSelector&&this._sceneHelper))return[3,17];W=0,re.label=1;case 1:if(!(W<e.length))return[3,11];if(ve=e[W],n=[],!(ve&&ve instanceof MPlaza.AttributeSceneAction))return[3,8];if(!(ve.get("actionTypeID")===MPlaza.SceneActionType.ShowHideMesh&&ve.get("value")==="show"))return[3,8];if(rt=ve.get("selector"),rt==null)return[3,8];s=this._elementSelector.getElements(this._zkScene,this._scene,null,rt,MPlaza.SceneElementType.Mesh),c=0,re.label=2;case 2:return c<s.length?(u=s[c],u instanceof window.BABYLON.AbstractMesh&&!u.isVisible?(m=this._zkScene.get("rootUrl"),m?(b=this._sceneHelper.getMeshDelayedMaterialIDs(u),k=this._sceneHelper.getMeshOffloadedMaterialIDs(u),b.length>0?[4,this._sceneHelper.loadDelayedMaterialsAsync(m,b)]:[3,4]):[3,6]):[3,7]):[3,8];case 3:re.sent(),re.label=4;case 4:return k.length>0?[4,this._sceneHelper.loadOffloadedMaterialsByIDsAsync(m,k)]:[3,6];case 5:re.sent(),re.label=6;case 6:n.push(u),re.label=7;case 7:return c++,[3,2];case 8:return[4,Tr.whenAllMeshesAreReadyAsync(n)];case 9:re.sent(),re.label=10;case 10:return W++,[3,1];case 11:W=0,re.label=12;case 12:return W<e.length?(ve=e[W],ve&&ve instanceof MPlaza.AttributeSceneAction?ve.get("actionTypeID")===MPlaza.SceneActionType.SetMeshMaterial||ve.get("actionTypeID")===MPlaza.SceneActionType.SetSubMeshMaterial?(Ae=this.getMaterialFromActionValue(ve),Ae?[3,14]:[4,this.getDeepMaterialFromActionValueAsync(ve)]):[3,14]:[3,16]):[3,17];case 13:Ae=re.sent(),re.label=14;case 14:return ve.get("actionTypeID")!==MPlaza.SceneActionType.SetMaterialColor?[3,16]:(rt=ve.get("selector"),rt==null?[3,16]:[4,this.getAllMaterialElementsAsync(rt)]);case 15:re.sent(),re.label=16;case 16:return W++,[3,12];case 17:return[2]}})})},y.prototype.prefetchDataForUnselectedOptionsAsync=function(e){return _a(this,void 0,void 0,function(){return ya(this,function(n){return[2]})})},y}();class Qs{constructor(){this._zkScene=null,this._scene=null,this._sceneHelper=null,this._meshLocationCache={},this._cameraAnimationCompletedListeners=[],this._meshAnimationCompletedListeners=[],this._beforeSaveMeshLocationListeners=[],this._afterSaveMeshLocationListeners=[]}dispose(){for(;this._cameraAnimationCompletedListeners.length>0;)this._cameraAnimationCompletedListeners.pop();for(;this._meshAnimationCompletedListeners.length>0;)this._meshAnimationCompletedListeners.pop();for(;this._beforeSaveMeshLocationListeners.length>0;)this._beforeSaveMeshLocationListeners.pop();for(;this._afterSaveMeshLocationListeners.length>0;)this._afterSaveMeshLocationListeners.pop();this.disposeSceneHelper()}setScene(e){this._scene=e,this.resetSceneHelper(),this.resetCache()}setModel(e){this._zkScene=e,this.resetCache()}setModelAndScene(e,n){this._zkScene=e,this._scene=n,this.resetSceneHelper(),this.resetCache()}resetCache(){this._meshLocationCache={}}invalidateCache(e){this._meshLocationCache&&delete this._meshLocationCache[e]}disposeSceneHelper(){this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null)}resetSceneHelper(){this.disposeSceneHelper(),this._scene&&(this._sceneHelper=new Tr(this._scene))}clearMeshLocations(){if(this._zkScene){const e=this._zkScene.get("meshLocations");for(;e.length>0;)e.remove(e.at(0))}}async setMeshLocationByID(e){if(this._zkScene&&this._scene){const n=this._zkScene.getMeshLocation(e);n&&await this.setMeshLocation(n)}}async setMeshLocation(e){if(this._zkScene&&this._scene&&this._sceneHelper){let W,ve=!0;if(e){let Ae=e.get("locationID");if(ve=e.get("adjustCamera"),this._meshLocationCache.hasOwnProperty(Ae))W=this._meshLocationCache[Ae];else{let rt=e.get("data"),re=null;if(typeof rt=="string"){let mt=window.atob(rt),nt=mt.length,tn=new Uint8Array(nt);for(let Kt=0;Kt<nt;Kt++)tn[Kt]=mt.charCodeAt(Kt);let Ie=tn.buffer;re=new Uint8Array(Ie)}else Object.prototype.toString.call(rt)==="[object Array]"&&(re=Uint8Array.from(rt));if(re!=null){let mt=LZString.decompressFromUint8Array(re);if(W=JSON.parse(mt),W){for(var n in W){var s=W[n];s.p&&(s.p=new window.BABYLON.Vector3(s.p.x,s.p.y,s.p.z)),s.rE&&(s.rE=new window.BABYLON.Vector3(s.rE.x,s.rE.y,s.rE.z)),s.rQ&&(s.rQ=new window.BABYLON.Quaternion(s.rQ.x,s.rQ.y,s.rQ.z,s.rQ.w)),s.s&&(s.s=new window.BABYLON.Vector3(s.s.x,s.s.y,s.s.z))}this._meshLocationCache[Ae]=W}}}}if(W){const Ae=[];if(ve&&W.hasOwnProperty("wemin")&&W.hasOwnProperty("wemax")){var c={min:new window.BABYLON.Vector3(W.wemin.x,W.wemin.y,W.wemin.z),max:new window.BABYLON.Vector3(W.wemax.x,W.wemax.y,W.wemax.z)};let rt=this._sceneHelper.camera;if(rt&&rt instanceof window.BABYLON.ArcRotateCamera){rt.upperRadiusLimit=null;var u=this._sceneHelper.calculateCameraRadius(c),m=this._sceneHelper.getWorldCenter(c);m&&(this._sceneHelper.setCameraRadiusParameters(u),Ae.push(new Promise(re=>{rt&&rt instanceof window.BABYLON.ArcRotateCamera&&this._sceneHelper.animateCameraToFinalParamters(rt.alpha,rt.beta,u,m,1,()=>{this._sceneHelper&&(this._sceneHelper.setupCameraLimits(c),this.fireCameraAnimationCompletedEvent(),re())})})))}}for(var b=0;b<this._scene.meshes.length;b++){var k=this._scene.meshes[b],n=k.id;if(W.hasOwnProperty(n)){var s=W[n];Ae.push(new Promise(mt=>{this._sceneHelper.animateMeshToFinalParameters(k,s.p,s.rE,s.rQ,s.s,1,()=>{this.fireMeshAnimationCompletedEvent(),mt()})}))}}await Promise.all(Ae)}}}saveMeshLocation(e){if(this._zkScene&&this._scene){var n=new Zakeke.SceneMeshLocation;n.set("name",e),this.updateMeshLocation(n),this._zkScene.get("meshLocations").push(n)}}saveExplodedMeshLocation(){if(this._zkScene&&this._scene){var e=this._zkScene.getOrCreateExplodedMeshLocation();this.updateMeshLocation(e)}}saveCollapsedMeshLocation(){if(this._zkScene&&this._scene){var e=this._zkScene.getOrCreateCollapsedMeshLocation();this.updateMeshLocation(e)}}updateMeshLocation(e){if(this.fireBeforeSaveMeshLocationEvent(),this._scene&&this._sceneHelper){var n=this.getMeshPRSs(),s=this._sceneHelper.getWorldExtends();if(s){let b={x:s.min.x,y:s.min.y,z:s.min.z},k={x:s.max.x,y:s.max.y,z:s.max.z};n.wemin=b,n.wemax=k}var c=JSON.stringify(n);let u=LZString.compressToUint8Array(c),m=[].slice.call(u);e.set("data",m),this.invalidateCache(e.get("locationID"))}this.fireAfterSaveMeshLocationEvent()}getMeshPRSs(){let e={wemin:void 0,wemax:void 0};if(this._scene&&this._sceneHelper)for(let n=0;n<this._scene.meshes.length;n++){const s=this._scene.meshes[n];if(this._sceneHelper.isRealMesh(s)){let c=s.id,u={p:void 0,rQ:void 0,rE:void 0,s:void 0},m={x:s.position.x,y:s.position.y,z:s.position.z};if(u.p=m,s.rotationQuaternion==null){u.rQ=null;let k={x:s.rotation.x,y:s.rotation.y,z:s.rotation.z};u.rE=k}else{let k={w:s.rotationQuaternion.w,x:s.rotationQuaternion.x,y:s.rotationQuaternion.y,z:s.rotationQuaternion.z};u.rQ=k,u.rE=null}let b={x:s.scaling.x,y:s.scaling.y,z:s.scaling.z};u.s=b,e[c]=u}}return e}async explodeMeshes(){if(this._zkScene){let e=this._zkScene.getFirstExplodedMeshLocation();e&&await this.setMeshLocation(e)}}async collapseMeshes(){if(this._zkScene){let e=this._zkScene.getFirstCollapsedMeshLocation();e&&await this.setMeshLocation(e)}}fireCameraAnimationCompletedEvent(){for(let e=0;e<this._cameraAnimationCompletedListeners.length;++e)this._cameraAnimationCompletedListeners[e]()}addCameraAnimationCompletedListener(e){this._cameraAnimationCompletedListeners.push(e)}fireMeshAnimationCompletedEvent(){for(let e=0;e<this._meshAnimationCompletedListeners.length;++e)this._meshAnimationCompletedListeners[e]()}addMeshAnimationCompletedListener(e){this._meshAnimationCompletedListeners.push(e)}fireBeforeSaveMeshLocationEvent(){for(let e=0;e<this._beforeSaveMeshLocationListeners.length;++e)this._beforeSaveMeshLocationListeners[e]()}addBeforeSaveMeshLocationListener(e){this._beforeSaveMeshLocationListeners.push(e)}fireAfterSaveMeshLocationEvent(){for(let e=0;e<this._afterSaveMeshLocationListeners.length;++e)this._afterSaveMeshLocationListeners[e]()}addAfterSaveMeshLocationListener(e){this._afterSaveMeshLocationListeners.push(e)}}class ug{constructor(e,n){this._glowLayer=null,this._zkScene=e,this._scene=n,this._sceneHelper=new Tr(this._scene),this._glowLayer=this._scene.getGlowLayerByName("glow")}get enabled(){const e=this.getGlowConfig();return e&&e.get("enabled")!=null&&typeof e.get("enabled")=="boolean"&&e.get("enabled"),!1}set enabled(e){var n=this.getOrCreateGlowConfig();n&&n.set("enabled",e),this.update()}get intensity(){const e=this.getGlowConfig();return e&&e.get("intensity")!=null&&typeof e.get("intensity")=="number"&&e.get("intensity"),1}set intensity(e){var n=this.getOrCreateGlowConfig();n&&n.set("intensity",e),this.update()}get blurSize(){const e=this.getGlowConfig();return e&&e.get("blurSize")!=null&&typeof e.get("blurSize")=="number"&&e.get("blurSize"),1}set blurSize(e){var n=this.getOrCreateGlowConfig();n&&n.set("blurSize",e),this.update()}dispose(){this.destroyGlowLayer()}destroyGlowLayer(){this._glowLayer&&(this._glowLayer.dispose(),this._glowLayer=null)}createOrUpdateGlowLayer(e,n){this._glowLayer||(this._glowLayer=new window.BABYLON.GlowLayer("glow",this._scene)),this._glowLayer&&(this._glowLayer.intensity=e,this._glowLayer.blurKernelSize=n)}update(){if(this._scene){var e=this.getGlowConfig();if(e){const n=this.enabled,s=this.intensity,c=this.blurSize;n?this.createOrUpdateGlowLayer(s,c):this.destroyGlowLayer()}else this.destroyGlowLayer()}}turnOffGlow(){this.destroyGlowLayer()}turnOnGlow(){this.update()}sanityCheck(){return this._scene&&this._scene instanceof window.BABYLON.Scene&&this._zkScene&&this._zkScene instanceof Zakeke.Scene&&this._zkScene.get("config")!=null&&this._zkScene.get("config")!=null&&this._zkScene.get("config")instanceof Zakeke.SceneConfig}isGlowEnabledForMesh(e){return e?e.metadata&&e.metadata.enableGlow:!1}enableGlowForMesh(e){}disableGlowForMesh(e){}getGlowConfig(){if(this.sanityCheck()){let e=this._zkScene.getGlowConfig();if(e)return e}return null}getOrCreateGlowConfig(){return this.sanityCheck()?this._zkScene.getOrCreateGlowConfig():null}}class Fd{constructor(e){this._pendingActions=new Array,this._workerInfos=e.map(n=>({worker:n,active:!1}))}dispose(){for(const e of this._workerInfos)e.worker.terminate();delete this._workerInfos,delete this._pendingActions}push(e){for(const n of this._workerInfos)if(!n.active){this._execute(n,e);return}this._pendingActions.push(e)}_execute(e,n){e.active=!0,n(e.worker,()=>{e.active=!1;const s=this._pendingActions.shift();s&&this._execute(e,s)})}}function bf(y){return typeof importScripts=="function"?(importScripts(y),Promise.resolve()):new Promise((e,n)=>{window.BABYLON.Tools.LoadScript(y,()=>{e()},s=>{n(new Error(s))})})}function Tc(y){if(y.length==0)return Promise.resolve();let e=[];for(let n=0;n<y.length;n++)e.push(bf(y[n]));return new Promise(n=>{Promise.all(e).then(()=>n())})}function Mh(y,e,n){return new MakeIncremental().getSceneIncrementalFiles(y,e,n)}function Ul(){let y;onmessage=e=>{const n=e.data;switch(n.id){case"init":{const s=n.urls;y=Tc(s),postMessage("done");break}case"makeIncremental":{if(!y)throw new Error("Worker not initialized");y.then(()=>{const s=n.sceneJson,c=n.version,u=n.options,m=Mh(s,c,u);postMessage({id:"result",files:m}),postMessage("done")});break}}}}function jl(y){return typeof document!="object"||typeof y!="string"?y:window.BABYLON.Tools.GetAbsoluteUrl(y)}const Ho=class Gm{static GetDefaultNumWorkers(){return typeof navigator!="object"||!navigator.hardwareConcurrency?1:Math.min(Math.floor(navigator.hardwareConcurrency*.5),2)}static get Default(){return Gm._Default||(Gm._Default=new Gm([])),Gm._Default}constructor(e,n=Gm.DefaultNumWorkers){const s=e.map(c=>jl(c));if(n&&typeof Worker=="function"){const c=`${bf}${Tc}${Mh}(${Ul})()`,u=URL.createObjectURL(new Blob([c],{type:"application/javascript"})),m=new Array(n);for(let b=0;b<m.length;b++)m[b]=new Promise((k,W)=>{const ve=new Worker(u),Ae=re=>{ve.removeEventListener("error",Ae),ve.removeEventListener("message",rt),W(re)},rt=re=>{re.data==="done"&&(ve.removeEventListener("error",Ae),ve.removeEventListener("message",rt),k(ve))};ve.addEventListener("error",Ae),ve.addEventListener("message",rt),ve.postMessage({id:"init",urls:s})});this._workerPoolPromise=Promise.all(m).then(b=>new Fd(b))}}dispose(){}whenReadyAsync(){return this._workerPoolPromise?this._workerPoolPromise.then(()=>{}):Promise.resolve()}getIncrementalFilesAsync(e,n,s){if(this._workerPoolPromise)return this._workerPoolPromise.then(c=>new Promise((u,m)=>{c.push((b,k)=>{let W=[];const ve=rt=>{b.removeEventListener("error",ve),b.removeEventListener("message",Ae),m(rt),k()},Ae=rt=>{rt.data==="done"?(b.removeEventListener("error",ve),b.removeEventListener("message",Ae),u(W),k()):rt.data.id==="result"&&(W=rt.data.files)};b.addEventListener("error",ve),b.addEventListener("message",Ae),b.postMessage({id:"makeIncremental",sceneJson:e,version:n,options:s})})}));throw new Error("Incremental file worker is not available")}};Ho.DefaultNumWorkers=Ho.GetDefaultNumWorkers(),Ho._Default=null;let Wo=Ho;var Go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Um<"u"?Um:typeof self<"u"?self:{};function eh(y){return y&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y}function Fu(y){if(y.__esModule)return y;var e=y.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(y).forEach(function(s){var c=Object.getOwnPropertyDescriptor(y,s);Object.defineProperty(n,s,c.get?c:{enumerable:!0,get:function(){return y[s]}})}),n}var th={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(y){(function(e,n){y.exports=e.document?n(e,!0):function(s){if(!s.document)throw new Error("jQuery requires a window with a document");return n(s)}})(typeof window<"u"?window:Go,function(e,n){var s=[],c=Object.getPrototypeOf,u=s.slice,m=s.flat?function(M){return s.flat.call(M)}:function(M){return s.concat.apply([],M)},b=s.push,k=s.indexOf,W={},ve=W.toString,Ae=W.hasOwnProperty,rt=Ae.toString,re=rt.call(Object),mt={},nt=function(M){return typeof M=="function"&&typeof M.nodeType!="number"&&typeof M.item!="function"},tn=function(M){return M!=null&&M===M.window},Ie=e.document,Kt={type:!0,src:!0,nonce:!0,noModule:!0};function At(M,Z,xe){xe=xe||Ie;var Re,vt,Ct=xe.createElement("script");if(Ct.text=M,Z)for(Re in Kt)vt=Z[Re]||Z.getAttribute&&Z.getAttribute(Re),vt&&Ct.setAttribute(Re,vt);xe.head.appendChild(Ct).parentNode.removeChild(Ct)}function an(M){return M==null?M+"":typeof M=="object"||typeof M=="function"?W[ve.call(M)]||"object":typeof M}var Cn="3.7.1",He=/HTML$/i,_e=function(M,Z){return new _e.fn.init(M,Z)};_e.fn=_e.prototype={jquery:Cn,constructor:_e,length:0,toArray:function(){return u.call(this)},get:function(M){return M==null?u.call(this):M<0?this[M+this.length]:this[M]},pushStack:function(M){var Z=_e.merge(this.constructor(),M);return Z.prevObject=this,Z},each:function(M){return _e.each(this,M)},map:function(M){return this.pushStack(_e.map(this,function(Z,xe){return M.call(Z,xe,Z)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_e.grep(this,function(M,Z){return(Z+1)%2}))},odd:function(){return this.pushStack(_e.grep(this,function(M,Z){return Z%2}))},eq:function(M){var Z=this.length,xe=+M+(M<0?Z:0);return this.pushStack(xe>=0&&xe<Z?[this[xe]]:[])},end:function(){return this.prevObject||this.constructor()},push:b,sort:s.sort,splice:s.splice},_e.extend=_e.fn.extend=function(){var M,Z,xe,Re,vt,Ct,It=arguments[0]||{},Pn=1,xn=arguments.length,Wn=!1;for(typeof It=="boolean"&&(Wn=It,It=arguments[Pn]||{},Pn++),typeof It!="object"&&!nt(It)&&(It={}),Pn===xn&&(It=this,Pn--);Pn<xn;Pn++)if((M=arguments[Pn])!=null)for(Z in M)Re=M[Z],!(Z==="__proto__"||It===Re)&&(Wn&&Re&&(_e.isPlainObject(Re)||(vt=Array.isArray(Re)))?(xe=It[Z],vt&&!Array.isArray(xe)?Ct=[]:!vt&&!_e.isPlainObject(xe)?Ct={}:Ct=xe,vt=!1,It[Z]=_e.extend(Wn,Ct,Re)):Re!==void 0&&(It[Z]=Re));return It},_e.extend({expando:"jQuery"+(Cn+Math.random()).replace(/\D/g,""),isReady:!0,error:function(M){throw new Error(M)},noop:function(){},isPlainObject:function(M){var Z,xe;return!M||ve.call(M)!=="[object Object]"?!1:(Z=c(M),Z?(xe=Ae.call(Z,"constructor")&&Z.constructor,typeof xe=="function"&&rt.call(xe)===re):!0)},isEmptyObject:function(M){var Z;for(Z in M)return!1;return!0},globalEval:function(M,Z,xe){At(M,{nonce:Z&&Z.nonce},xe)},each:function(M,Z){var xe,Re=0;if(Sr(M))for(xe=M.length;Re<xe&&Z.call(M[Re],Re,M[Re])!==!1;Re++);else for(Re in M)if(Z.call(M[Re],Re,M[Re])===!1)break;return M},text:function(M){var Z,xe="",Re=0,vt=M.nodeType;if(!vt)for(;Z=M[Re++];)xe+=_e.text(Z);return vt===1||vt===11?M.textContent:vt===9?M.documentElement.textContent:vt===3||vt===4?M.nodeValue:xe},makeArray:function(M,Z){var xe=Z||[];return M!=null&&(Sr(Object(M))?_e.merge(xe,typeof M=="string"?[M]:M):b.call(xe,M)),xe},inArray:function(M,Z,xe){return Z==null?-1:k.call(Z,M,xe)},isXMLDoc:function(M){var Z=M&&M.namespaceURI,xe=M&&(M.ownerDocument||M).documentElement;return!He.test(Z||xe&&xe.nodeName||"HTML")},merge:function(M,Z){for(var xe=+Z.length,Re=0,vt=M.length;Re<xe;Re++)M[vt++]=Z[Re];return M.length=vt,M},grep:function(M,Z,xe){for(var Re,vt=[],Ct=0,It=M.length,Pn=!xe;Ct<It;Ct++)Re=!Z(M[Ct],Ct),Re!==Pn&&vt.push(M[Ct]);return vt},map:function(M,Z,xe){var Re,vt,Ct=0,It=[];if(Sr(M))for(Re=M.length;Ct<Re;Ct++)vt=Z(M[Ct],Ct,xe),vt!=null&&It.push(vt);else for(Ct in M)vt=Z(M[Ct],Ct,xe),vt!=null&&It.push(vt);return m(It)},guid:1,support:mt}),typeof Symbol=="function"&&(_e.fn[Symbol.iterator]=s[Symbol.iterator]),_e.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(M,Z){W["[object "+Z+"]"]=Z.toLowerCase()});function Sr(M){var Z=!!M&&"length"in M&&M.length,xe=an(M);return nt(M)||tn(M)?!1:xe==="array"||Z===0||typeof Z=="number"&&Z>0&&Z-1 in M}function On(M,Z){return M.nodeName&&M.nodeName.toLowerCase()===Z.toLowerCase()}var Kr=s.pop,Mi=s.sort,ei=s.splice,oi="[\\x20\\t\\r\\n\\f]",xr=new RegExp("^"+oi+"+|((?:^|[^\\\\])(?:\\\\.)*)"+oi+"+$","g");_e.contains=function(M,Z){var xe=Z&&Z.parentNode;return M===xe||!!(xe&&xe.nodeType===1&&(M.contains?M.contains(xe):M.compareDocumentPosition&&M.compareDocumentPosition(xe)&16))};var Ts=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Fn(M,Z){return Z?M==="\0"?"�":M.slice(0,-1)+"\\"+M.charCodeAt(M.length-1).toString(16)+" ":"\\"+M}_e.escapeSelector=function(M){return(M+"").replace(Ts,Fn)};var si=Ie,Pi=b;(function(){var M,Z,xe,Re,vt,Ct=Pi,It,Pn,xn,Wn,Cr,kr=_e.expando,hr=0,Gr=0,_i=Pa(),ds=Pa(),us=Pa(),So=Pa(),Ka=function(gn,jn){return gn===jn&&(vt=!0),0},za="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",is="(?:\\\\[\\da-fA-F]{1,6}"+oi+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Li="\\["+oi+"*("+is+")(?:"+oi+"*([*^$|!~]?=)"+oi+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+is+"))|)"+oi+"*\\]",ko=":("+is+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Li+")*)|.*)\\)|)",Ms=new RegExp(oi+"+","g"),ps=new RegExp("^"+oi+"*,"+oi+"*"),ri=new RegExp("^"+oi+"*([>+~]|"+oi+")"+oi+"*"),Yl=new RegExp(oi+"|>"),es=new RegExp(ko),qi=new RegExp("^"+is+"$"),Xo={ID:new RegExp("^#("+is+")"),CLASS:new RegExp("^\\.("+is+")"),TAG:new RegExp("^("+is+"|[*])"),ATTR:new RegExp("^"+Li),PSEUDO:new RegExp("^"+ko),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+oi+"*(even|odd|(([+-]|)(\\d*)n|)"+oi+"*(?:([+-]|)"+oi+"*(\\d+)|))"+oi+"*\\)|)","i"),bool:new RegExp("^(?:"+za+")$","i"),needsContext:new RegExp("^"+oi+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+oi+"*((?:-\\d)?\\d*)"+oi+"*\\)|)(?=[^-]|$)","i")},ii=/^(?:input|select|textarea|button)$/i,_l=/^h\d$/i,Io=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Gu=/[+~]/,gs=new RegExp("\\\\[\\da-fA-F]{1,6}"+oi+"?|\\\\([^\\r\\n\\f])","g"),Da=function(gn,jn){var fr="0x"+gn.slice(1)-65536;return jn||(fr<0?String.fromCharCode(fr+65536):String.fromCharCode(fr>>10|55296,fr&1023|56320))},$r=function(){Lo()},Yu=ol(function(gn){return gn.disabled===!0&&On(gn,"fieldset")},{dir:"parentNode",next:"legend"});function Si(){try{return It.activeElement}catch{}}try{Ct.apply(s=u.call(si.childNodes),si.childNodes),s[si.childNodes.length].nodeType}catch{Ct={apply:function(gn,jn){Pi.apply(gn,u.call(jn))},call:function(gn){Pi.apply(gn,u.call(arguments,1))}}}function bs(gn,jn,fr,sr){var Gt,Nn,En,ke,et,Nt,dn,Qn=jn&&jn.ownerDocument,br=jn?jn.nodeType:9;if(fr=fr||[],typeof gn!="string"||!gn||br!==1&&br!==9&&br!==11)return fr;if(!sr&&(Lo(jn),jn=jn||It,xn)){if(br!==11&&(et=Io.exec(gn)))if(Gt=et[1]){if(br===9)if(En=jn.getElementById(Gt)){if(En.id===Gt)return Ct.call(fr,En),fr}else return fr;else if(Qn&&(En=Qn.getElementById(Gt))&&bs.contains(jn,En)&&En.id===Gt)return Ct.call(fr,En),fr}else{if(et[2])return Ct.apply(fr,jn.getElementsByTagName(gn)),fr;if((Gt=et[3])&&jn.getElementsByClassName)return Ct.apply(fr,jn.getElementsByClassName(Gt)),fr}if(!So[gn+" "]&&(!Wn||!Wn.test(gn))){if(dn=gn,Qn=jn,br===1&&(Yl.test(gn)||ri.test(gn))){for(Qn=Gu.test(gn)&&Oa(jn.parentNode)||jn,(Qn!=jn||!mt.scope)&&((ke=jn.getAttribute("id"))?ke=_e.escapeSelector(ke):jn.setAttribute("id",ke=kr)),Nt=xl(gn),Nn=Nt.length;Nn--;)Nt[Nn]=(ke?"#"+ke:":scope")+" "+qa(Nt[Nn]);dn=Nt.join(",")}try{return Ct.apply(fr,Qn.querySelectorAll(dn)),fr}catch{So(gn,!0)}finally{ke===kr&&jn.removeAttribute("id")}}}return $l(gn.replace(xr,"$1"),jn,fr,sr)}function Pa(){var gn=[];function jn(fr,sr){return gn.push(fr+" ")>Z.cacheLength&&delete jn[gn.shift()],jn[fr+" "]=sr}return jn}function qr(gn){return gn[kr]=!0,gn}function Ei(gn){var jn=It.createElement("fieldset");try{return!!gn(jn)}catch{return!1}finally{jn.parentNode&&jn.parentNode.removeChild(jn),jn=null}}function uu(gn){return function(jn){return On(jn,"input")&&jn.type===gn}}function vd(gn){return function(jn){return(On(jn,"input")||On(jn,"button"))&&jn.type===gn}}function lc(gn){return function(jn){return"form"in jn?jn.parentNode&&jn.disabled===!1?"label"in jn?"label"in jn.parentNode?jn.parentNode.disabled===gn:jn.disabled===gn:jn.isDisabled===gn||jn.isDisabled!==!gn&&Yu(jn)===gn:jn.disabled===gn:"label"in jn?jn.disabled===gn:!1}}function yl(gn){return qr(function(jn){return jn=+jn,qr(function(fr,sr){for(var Gt,Nn=gn([],fr.length,jn),En=Nn.length;En--;)fr[Gt=Nn[En]]&&(fr[Gt]=!(sr[Gt]=fr[Gt]))})})}function Oa(gn){return gn&&typeof gn.getElementsByTagName<"u"&&gn}function Lo(gn){var jn,fr=gn?gn.ownerDocument||gn:si;return fr==It||fr.nodeType!==9||!fr.documentElement||(It=fr,Pn=It.documentElement,xn=!_e.isXMLDoc(It),Cr=Pn.matches||Pn.webkitMatchesSelector||Pn.msMatchesSelector,Pn.msMatchesSelector&&si!=It&&(jn=It.defaultView)&&jn.top!==jn&&jn.addEventListener("unload",$r),mt.getById=Ei(function(sr){return Pn.appendChild(sr).id=_e.expando,!It.getElementsByName||!It.getElementsByName(_e.expando).length}),mt.disconnectedMatch=Ei(function(sr){return Cr.call(sr,"*")}),mt.scope=Ei(function(){return It.querySelectorAll(":scope")}),mt.cssHas=Ei(function(){try{return It.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),mt.getById?(Z.filter.ID=function(sr){var Gt=sr.replace(gs,Da);return function(Nn){return Nn.getAttribute("id")===Gt}},Z.find.ID=function(sr,Gt){if(typeof Gt.getElementById<"u"&&xn){var Nn=Gt.getElementById(sr);return Nn?[Nn]:[]}}):(Z.filter.ID=function(sr){var Gt=sr.replace(gs,Da);return function(Nn){var En=typeof Nn.getAttributeNode<"u"&&Nn.getAttributeNode("id");return En&&En.value===Gt}},Z.find.ID=function(sr,Gt){if(typeof Gt.getElementById<"u"&&xn){var Nn,En,ke,et=Gt.getElementById(sr);if(et){if(Nn=et.getAttributeNode("id"),Nn&&Nn.value===sr)return[et];for(ke=Gt.getElementsByName(sr),En=0;et=ke[En++];)if(Nn=et.getAttributeNode("id"),Nn&&Nn.value===sr)return[et]}return[]}}),Z.find.TAG=function(sr,Gt){return typeof Gt.getElementsByTagName<"u"?Gt.getElementsByTagName(sr):Gt.querySelectorAll(sr)},Z.find.CLASS=function(sr,Gt){if(typeof Gt.getElementsByClassName<"u"&&xn)return Gt.getElementsByClassName(sr)},Wn=[],Ei(function(sr){var Gt;Pn.appendChild(sr).innerHTML="<a id='"+kr+"' href='' disabled='disabled'></a><select id='"+kr+"-\r\\' disabled='disabled'><option selected=''></option></select>",sr.querySelectorAll("[selected]").length||Wn.push("\\["+oi+"*(?:value|"+za+")"),sr.querySelectorAll("[id~="+kr+"-]").length||Wn.push("~="),sr.querySelectorAll("a#"+kr+"+*").length||Wn.push(".#.+[+~]"),sr.querySelectorAll(":checked").length||Wn.push(":checked"),Gt=It.createElement("input"),Gt.setAttribute("type","hidden"),sr.appendChild(Gt).setAttribute("name","D"),Pn.appendChild(sr).disabled=!0,sr.querySelectorAll(":disabled").length!==2&&Wn.push(":enabled",":disabled"),Gt=It.createElement("input"),Gt.setAttribute("name",""),sr.appendChild(Gt),sr.querySelectorAll("[name='']").length||Wn.push("\\["+oi+"*name"+oi+"*="+oi+`*(?:''|"")`)}),mt.cssHas||Wn.push(":has"),Wn=Wn.length&&new RegExp(Wn.join("|")),Ka=function(sr,Gt){if(sr===Gt)return vt=!0,0;var Nn=!sr.compareDocumentPosition-!Gt.compareDocumentPosition;return Nn||(Nn=(sr.ownerDocument||sr)==(Gt.ownerDocument||Gt)?sr.compareDocumentPosition(Gt):1,Nn&1||!mt.sortDetached&&Gt.compareDocumentPosition(sr)===Nn?sr===It||sr.ownerDocument==si&&bs.contains(si,sr)?-1:Gt===It||Gt.ownerDocument==si&&bs.contains(si,Gt)?1:Re?k.call(Re,sr)-k.call(Re,Gt):0:Nn&4?-1:1)}),It}bs.matches=function(gn,jn){return bs(gn,null,null,jn)},bs.matchesSelector=function(gn,jn){if(Lo(gn),xn&&!So[jn+" "]&&(!Wn||!Wn.test(jn)))try{var fr=Cr.call(gn,jn);if(fr||mt.disconnectedMatch||gn.document&&gn.document.nodeType!==11)return fr}catch{So(jn,!0)}return bs(jn,It,null,[gn]).length>0},bs.contains=function(gn,jn){return(gn.ownerDocument||gn)!=It&&Lo(gn),_e.contains(gn,jn)},bs.attr=function(gn,jn){(gn.ownerDocument||gn)!=It&&Lo(gn);var fr=Z.attrHandle[jn.toLowerCase()],sr=fr&&Ae.call(Z.attrHandle,jn.toLowerCase())?fr(gn,jn,!xn):void 0;return sr!==void 0?sr:gn.getAttribute(jn)},bs.error=function(gn){throw new Error("Syntax error, unrecognized expression: "+gn)},_e.uniqueSort=function(gn){var jn,fr=[],sr=0,Gt=0;if(vt=!mt.sortStable,Re=!mt.sortStable&&u.call(gn,0),Mi.call(gn,Ka),vt){for(;jn=gn[Gt++];)jn===gn[Gt]&&(sr=fr.push(Gt));for(;sr--;)ei.call(gn,fr[sr],1)}return Re=null,gn},_e.fn.uniqueSort=function(){return this.pushStack(_e.uniqueSort(u.apply(this)))},Z=_e.expr={cacheLength:50,createPseudo:qr,match:Xo,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(gn){return gn[1]=gn[1].replace(gs,Da),gn[3]=(gn[3]||gn[4]||gn[5]||"").replace(gs,Da),gn[2]==="~="&&(gn[3]=" "+gn[3]+" "),gn.slice(0,4)},CHILD:function(gn){return gn[1]=gn[1].toLowerCase(),gn[1].slice(0,3)==="nth"?(gn[3]||bs.error(gn[0]),gn[4]=+(gn[4]?gn[5]+(gn[6]||1):2*(gn[3]==="even"||gn[3]==="odd")),gn[5]=+(gn[7]+gn[8]||gn[3]==="odd")):gn[3]&&bs.error(gn[0]),gn},PSEUDO:function(gn){var jn,fr=!gn[6]&&gn[2];return Xo.CHILD.test(gn[0])?null:(gn[3]?gn[2]=gn[4]||gn[5]||"":fr&&es.test(fr)&&(jn=xl(fr,!0))&&(jn=fr.indexOf(")",fr.length-jn)-fr.length)&&(gn[0]=gn[0].slice(0,jn),gn[2]=fr.slice(0,jn)),gn.slice(0,3))}},filter:{TAG:function(gn){var jn=gn.replace(gs,Da).toLowerCase();return gn==="*"?function(){return!0}:function(fr){return On(fr,jn)}},CLASS:function(gn){var jn=_i[gn+" "];return jn||(jn=new RegExp("(^|"+oi+")"+gn+"("+oi+"|$)"))&&_i(gn,function(fr){return jn.test(typeof fr.className=="string"&&fr.className||typeof fr.getAttribute<"u"&&fr.getAttribute("class")||"")})},ATTR:function(gn,jn,fr){return function(sr){var Gt=bs.attr(sr,gn);return Gt==null?jn==="!=":jn?(Gt+="",jn==="="?Gt===fr:jn==="!="?Gt!==fr:jn==="^="?fr&&Gt.indexOf(fr)===0:jn==="*="?fr&&Gt.indexOf(fr)>-1:jn==="$="?fr&&Gt.slice(-fr.length)===fr:jn==="~="?(" "+Gt.replace(Ms," ")+" ").indexOf(fr)>-1:jn==="|="?Gt===fr||Gt.slice(0,fr.length+1)===fr+"-":!1):!0}},CHILD:function(gn,jn,fr,sr,Gt){var Nn=gn.slice(0,3)!=="nth",En=gn.slice(-4)!=="last",ke=jn==="of-type";return sr===1&&Gt===0?function(et){return!!et.parentNode}:function(et,Nt,dn){var Qn,br,wr,Yr,Es,ra=Nn!==En?"nextSibling":"previousSibling",Xa=et.parentNode,ao=ke&&et.nodeName.toLowerCase(),cu=!dn&&!ke,ws=!1;if(Xa){if(Nn){for(;ra;){for(wr=et;wr=wr[ra];)if(ke?On(wr,ao):wr.nodeType===1)return!1;Es=ra=gn==="only"&&!Es&&"nextSibling"}return!0}if(Es=[En?Xa.firstChild:Xa.lastChild],En&&cu){for(br=Xa[kr]||(Xa[kr]={}),Qn=br[gn]||[],Yr=Qn[0]===hr&&Qn[1],ws=Yr&&Qn[2],wr=Yr&&Xa.childNodes[Yr];wr=++Yr&&wr&&wr[ra]||(ws=Yr=0)||Es.pop();)if(wr.nodeType===1&&++ws&&wr===et){br[gn]=[hr,Yr,ws];break}}else if(cu&&(br=et[kr]||(et[kr]={}),Qn=br[gn]||[],Yr=Qn[0]===hr&&Qn[1],ws=Yr),ws===!1)for(;(wr=++Yr&&wr&&wr[ra]||(ws=Yr=0)||Es.pop())&&!((ke?On(wr,ao):wr.nodeType===1)&&++ws&&(cu&&(br=wr[kr]||(wr[kr]={}),br[gn]=[hr,ws]),wr===et)););return ws-=Gt,ws===sr||ws%sr===0&&ws/sr>=0}}},PSEUDO:function(gn,jn){var fr,sr=Z.pseudos[gn]||Z.setFilters[gn.toLowerCase()]||bs.error("unsupported pseudo: "+gn);return sr[kr]?sr(jn):sr.length>1?(fr=[gn,gn,"",jn],Z.setFilters.hasOwnProperty(gn.toLowerCase())?qr(function(Gt,Nn){for(var En,ke=sr(Gt,jn),et=ke.length;et--;)En=k.call(Gt,ke[et]),Gt[En]=!(Nn[En]=ke[et])}):function(Gt){return sr(Gt,0,fr)}):sr}},pseudos:{not:qr(function(gn){var jn=[],fr=[],sr=Zh(gn.replace(xr,"$1"));return sr[kr]?qr(function(Gt,Nn,En,ke){for(var et,Nt=sr(Gt,null,ke,[]),dn=Gt.length;dn--;)(et=Nt[dn])&&(Gt[dn]=!(Nn[dn]=et))}):function(Gt,Nn,En){return jn[0]=Gt,sr(jn,null,En,fr),jn[0]=null,!fr.pop()}}),has:qr(function(gn){return function(jn){return bs(gn,jn).length>0}}),contains:qr(function(gn){return gn=gn.replace(gs,Da),function(jn){return(jn.textContent||_e.text(jn)).indexOf(gn)>-1}}),lang:qr(function(gn){return qi.test(gn||"")||bs.error("unsupported lang: "+gn),gn=gn.replace(gs,Da).toLowerCase(),function(jn){var fr;do if(fr=xn?jn.lang:jn.getAttribute("xml:lang")||jn.getAttribute("lang"))return fr=fr.toLowerCase(),fr===gn||fr.indexOf(gn+"-")===0;while((jn=jn.parentNode)&&jn.nodeType===1);return!1}}),target:function(gn){var jn=e.location&&e.location.hash;return jn&&jn.slice(1)===gn.id},root:function(gn){return gn===Pn},focus:function(gn){return gn===Si()&&It.hasFocus()&&!!(gn.type||gn.href||~gn.tabIndex)},enabled:lc(!1),disabled:lc(!0),checked:function(gn){return On(gn,"input")&&!!gn.checked||On(gn,"option")&&!!gn.selected},selected:function(gn){return gn.parentNode&&gn.parentNode.selectedIndex,gn.selected===!0},empty:function(gn){for(gn=gn.firstChild;gn;gn=gn.nextSibling)if(gn.nodeType<6)return!1;return!0},parent:function(gn){return!Z.pseudos.empty(gn)},header:function(gn){return _l.test(gn.nodeName)},input:function(gn){return ii.test(gn.nodeName)},button:function(gn){return On(gn,"input")&&gn.type==="button"||On(gn,"button")},text:function(gn){var jn;return On(gn,"input")&&gn.type==="text"&&((jn=gn.getAttribute("type"))==null||jn.toLowerCase()==="text")},first:yl(function(){return[0]}),last:yl(function(gn,jn){return[jn-1]}),eq:yl(function(gn,jn,fr){return[fr<0?fr+jn:fr]}),even:yl(function(gn,jn){for(var fr=0;fr<jn;fr+=2)gn.push(fr);return gn}),odd:yl(function(gn,jn){for(var fr=1;fr<jn;fr+=2)gn.push(fr);return gn}),lt:yl(function(gn,jn,fr){var sr;for(fr<0?sr=fr+jn:fr>jn?sr=jn:sr=fr;--sr>=0;)gn.push(sr);return gn}),gt:yl(function(gn,jn,fr){for(var sr=fr<0?fr+jn:fr;++sr<jn;)gn.push(sr);return gn})}},Z.pseudos.nth=Z.pseudos.eq;for(M in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Z.pseudos[M]=uu(M);for(M in{submit:!0,reset:!0})Z.pseudos[M]=vd(M);function wl(){}wl.prototype=Z.filters=Z.pseudos,Z.setFilters=new wl;function xl(gn,jn){var fr,sr,Gt,Nn,En,ke,et,Nt=ds[gn+" "];if(Nt)return jn?0:Nt.slice(0);for(En=gn,ke=[],et=Z.preFilter;En;){(!fr||(sr=ps.exec(En)))&&(sr&&(En=En.slice(sr[0].length)||En),ke.push(Gt=[])),fr=!1,(sr=ri.exec(En))&&(fr=sr.shift(),Gt.push({value:fr,type:sr[0].replace(xr," ")}),En=En.slice(fr.length));for(Nn in Z.filter)(sr=Xo[Nn].exec(En))&&(!et[Nn]||(sr=et[Nn](sr)))&&(fr=sr.shift(),Gt.push({value:fr,type:Nn,matches:sr}),En=En.slice(fr.length));if(!fr)break}return jn?En.length:En?bs.error(gn):ds(gn,ke).slice(0)}function qa(gn){for(var jn=0,fr=gn.length,sr="";jn<fr;jn++)sr+=gn[jn].value;return sr}function ol(gn,jn,fr){var sr=jn.dir,Gt=jn.next,Nn=Gt||sr,En=fr&&Nn==="parentNode",ke=Gr++;return jn.first?function(et,Nt,dn){for(;et=et[sr];)if(et.nodeType===1||En)return gn(et,Nt,dn);return!1}:function(et,Nt,dn){var Qn,br,wr=[hr,ke];if(dn){for(;et=et[sr];)if((et.nodeType===1||En)&&gn(et,Nt,dn))return!0}else for(;et=et[sr];)if(et.nodeType===1||En)if(br=et[kr]||(et[kr]={}),Gt&&On(et,Gt))et=et[sr]||et;else{if((Qn=br[Nn])&&Qn[0]===hr&&Qn[1]===ke)return wr[2]=Qn[2];if(br[Nn]=wr,wr[2]=gn(et,Nt,dn))return!0}return!1}}function Us(gn){return gn.length>1?function(jn,fr,sr){for(var Gt=gn.length;Gt--;)if(!gn[Gt](jn,fr,sr))return!1;return!0}:gn[0]}function Zu(gn,jn,fr){for(var sr=0,Gt=jn.length;sr<Gt;sr++)bs(gn,jn[sr],fr);return fr}function Zl(gn,jn,fr,sr,Gt){for(var Nn,En=[],ke=0,et=gn.length,Nt=jn!=null;ke<et;ke++)(Nn=gn[ke])&&(!fr||fr(Nn,sr,Gt))&&(En.push(Nn),Nt&&jn.push(ke));return En}function Gs(gn,jn,fr,sr,Gt,Nn){return sr&&!sr[kr]&&(sr=Gs(sr)),Gt&&!Gt[kr]&&(Gt=Gs(Gt,Nn)),qr(function(En,ke,et,Nt){var dn,Qn,br,wr,Yr=[],Es=[],ra=ke.length,Xa=En||Zu(jn||"*",et.nodeType?[et]:et,[]),ao=gn&&(En||!jn)?Zl(Xa,Yr,gn,et,Nt):Xa;if(fr?(wr=Gt||(En?gn:ra||sr)?[]:ke,fr(ao,wr,et,Nt)):wr=ao,sr)for(dn=Zl(wr,Es),sr(dn,[],et,Nt),Qn=dn.length;Qn--;)(br=dn[Qn])&&(wr[Es[Qn]]=!(ao[Es[Qn]]=br));if(En){if(Gt||gn){if(Gt){for(dn=[],Qn=wr.length;Qn--;)(br=wr[Qn])&&dn.push(ao[Qn]=br);Gt(null,wr=[],dn,Nt)}for(Qn=wr.length;Qn--;)(br=wr[Qn])&&(dn=Gt?k.call(En,br):Yr[Qn])>-1&&(En[dn]=!(ke[dn]=br))}}else wr=Zl(wr===ke?wr.splice(ra,wr.length):wr),Gt?Gt(null,ke,wr,Nt):Ct.apply(ke,wr)})}function la(gn){for(var jn,fr,sr,Gt=gn.length,Nn=Z.relative[gn[0].type],En=Nn||Z.relative[" "],ke=Nn?1:0,et=ol(function(Qn){return Qn===jn},En,!0),Nt=ol(function(Qn){return k.call(jn,Qn)>-1},En,!0),dn=[function(Qn,br,wr){var Yr=!Nn&&(wr||br!=xe)||((jn=br).nodeType?et(Qn,br,wr):Nt(Qn,br,wr));return jn=null,Yr}];ke<Gt;ke++)if(fr=Z.relative[gn[ke].type])dn=[ol(Us(dn),fr)];else{if(fr=Z.filter[gn[ke].type].apply(null,gn[ke].matches),fr[kr]){for(sr=++ke;sr<Gt&&!Z.relative[gn[sr].type];sr++);return Gs(ke>1&&Us(dn),ke>1&&qa(gn.slice(0,ke-1).concat({value:gn[ke-2].type===" "?"*":""})).replace(xr,"$1"),fr,ke<sr&&la(gn.slice(ke,sr)),sr<Gt&&la(gn=gn.slice(sr)),sr<Gt&&qa(gn))}dn.push(fr)}return Us(dn)}function uc(gn,jn){var fr=jn.length>0,sr=gn.length>0,Gt=function(Nn,En,ke,et,Nt){var dn,Qn,br,wr=0,Yr="0",Es=Nn&&[],ra=[],Xa=xe,ao=Nn||sr&&Z.find.TAG("*",Nt),cu=hr+=Xa==null?1:Math.random()||.1,ws=ao.length;for(Nt&&(xe=En==It||En||Nt);Yr!==ws&&(dn=ao[Yr])!=null;Yr++){if(sr&&dn){for(Qn=0,!En&&dn.ownerDocument!=It&&(Lo(dn),ke=!xn);br=gn[Qn++];)if(br(dn,En||It,ke)){Ct.call(et,dn);break}Nt&&(hr=cu)}fr&&((dn=!br&&dn)&&wr--,Nn&&Es.push(dn))}if(wr+=Yr,fr&&Yr!==wr){for(Qn=0;br=jn[Qn++];)br(Es,ra,En,ke);if(Nn){if(wr>0)for(;Yr--;)Es[Yr]||ra[Yr]||(ra[Yr]=Kr.call(et));ra=Zl(ra)}Ct.apply(et,ra),Nt&&!Nn&&ra.length>0&&wr+jn.length>1&&_e.uniqueSort(et)}return Nt&&(hr=cu,xe=Xa),Es};return fr?qr(Gt):Gt}function Zh(gn,jn){var fr,sr=[],Gt=[],Nn=us[gn+" "];if(!Nn){for(jn||(jn=xl(gn)),fr=jn.length;fr--;)Nn=la(jn[fr]),Nn[kr]?sr.push(Nn):Gt.push(Nn);Nn=us(gn,uc(Gt,sr)),Nn.selector=gn}return Nn}function $l(gn,jn,fr,sr){var Gt,Nn,En,ke,et,Nt=typeof gn=="function"&&gn,dn=!sr&&xl(gn=Nt.selector||gn);if(fr=fr||[],dn.length===1){if(Nn=dn[0]=dn[0].slice(0),Nn.length>2&&(En=Nn[0]).type==="ID"&&jn.nodeType===9&&xn&&Z.relative[Nn[1].type]){if(jn=(Z.find.ID(En.matches[0].replace(gs,Da),jn)||[])[0],jn)Nt&&(jn=jn.parentNode);else return fr;gn=gn.slice(Nn.shift().value.length)}for(Gt=Xo.needsContext.test(gn)?0:Nn.length;Gt--&&(En=Nn[Gt],!Z.relative[ke=En.type]);)if((et=Z.find[ke])&&(sr=et(En.matches[0].replace(gs,Da),Gu.test(Nn[0].type)&&Oa(jn.parentNode)||jn))){if(Nn.splice(Gt,1),gn=sr.length&&qa(Nn),!gn)return Ct.apply(fr,sr),fr;break}}return(Nt||Zh(gn,dn))(sr,jn,!xn,fr,!jn||Gu.test(gn)&&Oa(jn.parentNode)||jn),fr}mt.sortStable=kr.split("").sort(Ka).join("")===kr,Lo(),mt.sortDetached=Ei(function(gn){return gn.compareDocumentPosition(It.createElement("fieldset"))&1}),_e.find=bs,_e.expr[":"]=_e.expr.pseudos,_e.unique=_e.uniqueSort,bs.compile=Zh,bs.select=$l,bs.setDocument=Lo,bs.tokenize=xl,bs.escape=_e.escapeSelector,bs.getText=_e.text,bs.isXML=_e.isXMLDoc,bs.selectors=_e.expr,bs.support=_e.support,bs.uniqueSort=_e.uniqueSort})();var ai=function(M,Z,xe){for(var Re=[],vt=xe!==void 0;(M=M[Z])&&M.nodeType!==9;)if(M.nodeType===1){if(vt&&_e(M).is(xe))break;Re.push(M)}return Re},hs=function(M,Z){for(var xe=[];M;M=M.nextSibling)M.nodeType===1&&M!==Z&&xe.push(M);return xe},fa=_e.expr.match.needsContext,Hs=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Ns(M,Z,xe){return nt(Z)?_e.grep(M,function(Re,vt){return!!Z.call(Re,vt,Re)!==xe}):Z.nodeType?_e.grep(M,function(Re){return Re===Z!==xe}):typeof Z!="string"?_e.grep(M,function(Re){return k.call(Z,Re)>-1!==xe}):_e.filter(Z,M,xe)}_e.filter=function(M,Z,xe){var Re=Z[0];return xe&&(M=":not("+M+")"),Z.length===1&&Re.nodeType===1?_e.find.matchesSelector(Re,M)?[Re]:[]:_e.find.matches(M,_e.grep(Z,function(vt){return vt.nodeType===1}))},_e.fn.extend({find:function(M){var Z,xe,Re=this.length,vt=this;if(typeof M!="string")return this.pushStack(_e(M).filter(function(){for(Z=0;Z<Re;Z++)if(_e.contains(vt[Z],this))return!0}));for(xe=this.pushStack([]),Z=0;Z<Re;Z++)_e.find(M,vt[Z],xe);return Re>1?_e.uniqueSort(xe):xe},filter:function(M){return this.pushStack(Ns(this,M||[],!1))},not:function(M){return this.pushStack(Ns(this,M||[],!0))},is:function(M){return!!Ns(this,typeof M=="string"&&fa.test(M)?_e(M):M||[],!1).length}});var da,Zi=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,fo=_e.fn.init=function(M,Z,xe){var Re,vt;if(!M)return this;if(xe=xe||da,typeof M=="string")if(M[0]==="<"&&M[M.length-1]===">"&&M.length>=3?Re=[null,M,null]:Re=Zi.exec(M),Re&&(Re[1]||!Z))if(Re[1]){if(Z=Z instanceof _e?Z[0]:Z,_e.merge(this,_e.parseHTML(Re[1],Z&&Z.nodeType?Z.ownerDocument||Z:Ie,!0)),Hs.test(Re[1])&&_e.isPlainObject(Z))for(Re in Z)nt(this[Re])?this[Re](Z[Re]):this.attr(Re,Z[Re]);return this}else return vt=Ie.getElementById(Re[2]),vt&&(this[0]=vt,this.length=1),this;else return!Z||Z.jquery?(Z||xe).find(M):this.constructor(Z).find(M);else{if(M.nodeType)return this[0]=M,this.length=1,this;if(nt(M))return xe.ready!==void 0?xe.ready(M):M(_e)}return _e.makeArray(M,this)};fo.prototype=_e.fn,da=_e(Ie);var io=/^(?:parents|prev(?:Until|All))/,qo={children:!0,contents:!0,next:!0,prev:!0};_e.fn.extend({has:function(M){var Z=_e(M,this),xe=Z.length;return this.filter(function(){for(var Re=0;Re<xe;Re++)if(_e.contains(this,Z[Re]))return!0})},closest:function(M,Z){var xe,Re=0,vt=this.length,Ct=[],It=typeof M!="string"&&_e(M);if(!fa.test(M)){for(;Re<vt;Re++)for(xe=this[Re];xe&&xe!==Z;xe=xe.parentNode)if(xe.nodeType<11&&(It?It.index(xe)>-1:xe.nodeType===1&&_e.find.matchesSelector(xe,M))){Ct.push(xe);break}}return this.pushStack(Ct.length>1?_e.uniqueSort(Ct):Ct)},index:function(M){return M?typeof M=="string"?k.call(_e(M),this[0]):k.call(this,M.jquery?M[0]:M):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(M,Z){return this.pushStack(_e.uniqueSort(_e.merge(this.get(),_e(M,Z))))},addBack:function(M){return this.add(M==null?this.prevObject:this.prevObject.filter(M))}});function Ti(M,Z){for(;(M=M[Z])&&M.nodeType!==1;);return M}_e.each({parent:function(M){var Z=M.parentNode;return Z&&Z.nodeType!==11?Z:null},parents:function(M){return ai(M,"parentNode")},parentsUntil:function(M,Z,xe){return ai(M,"parentNode",xe)},next:function(M){return Ti(M,"nextSibling")},prev:function(M){return Ti(M,"previousSibling")},nextAll:function(M){return ai(M,"nextSibling")},prevAll:function(M){return ai(M,"previousSibling")},nextUntil:function(M,Z,xe){return ai(M,"nextSibling",xe)},prevUntil:function(M,Z,xe){return ai(M,"previousSibling",xe)},siblings:function(M){return hs((M.parentNode||{}).firstChild,M)},children:function(M){return hs(M.firstChild)},contents:function(M){return M.contentDocument!=null&&c(M.contentDocument)?M.contentDocument:(On(M,"template")&&(M=M.content||M),_e.merge([],M.childNodes))}},function(M,Z){_e.fn[M]=function(xe,Re){var vt=_e.map(this,Z,xe);return M.slice(-5)!=="Until"&&(Re=xe),Re&&typeof Re=="string"&&(vt=_e.filter(Re,vt)),this.length>1&&(qo[M]||_e.uniqueSort(vt),io.test(M)&&vt.reverse()),this.pushStack(vt)}});var Fi=/[^\x20\t\r\n\f]+/g;function zi(M){var Z={};return _e.each(M.match(Fi)||[],function(xe,Re){Z[Re]=!0}),Z}_e.Callbacks=function(M){M=typeof M=="string"?zi(M):_e.extend({},M);var Z,xe,Re,vt,Ct=[],It=[],Pn=-1,xn=function(){for(vt=vt||M.once,Re=Z=!0;It.length;Pn=-1)for(xe=It.shift();++Pn<Ct.length;)Ct[Pn].apply(xe[0],xe[1])===!1&&M.stopOnFalse&&(Pn=Ct.length,xe=!1);M.memory||(xe=!1),Z=!1,vt&&(xe?Ct=[]:Ct="")},Wn={add:function(){return Ct&&(xe&&!Z&&(Pn=Ct.length-1,It.push(xe)),function Cr(kr){_e.each(kr,function(hr,Gr){nt(Gr)?(!M.unique||!Wn.has(Gr))&&Ct.push(Gr):Gr&&Gr.length&&an(Gr)!=="string"&&Cr(Gr)})}(arguments),xe&&!Z&&xn()),this},remove:function(){return _e.each(arguments,function(Cr,kr){for(var hr;(hr=_e.inArray(kr,Ct,hr))>-1;)Ct.splice(hr,1),hr<=Pn&&Pn--}),this},has:function(Cr){return Cr?_e.inArray(Cr,Ct)>-1:Ct.length>0},empty:function(){return Ct&&(Ct=[]),this},disable:function(){return vt=It=[],Ct=xe="",this},disabled:function(){return!Ct},lock:function(){return vt=It=[],!xe&&!Z&&(Ct=xe=""),this},locked:function(){return!!vt},fireWith:function(Cr,kr){return vt||(kr=kr||[],kr=[Cr,kr.slice?kr.slice():kr],It.push(kr),Z||xn()),this},fire:function(){return Wn.fireWith(this,arguments),this},fired:function(){return!!Re}};return Wn};function wo(M){return M}function xo(M){throw M}function Fa(M,Z,xe,Re){var vt;try{M&&nt(vt=M.promise)?vt.call(M).done(Z).fail(xe):M&&nt(vt=M.then)?vt.call(M,Z,xe):Z.apply(void 0,[M].slice(Re))}catch(Ct){xe.apply(void 0,[Ct])}}_e.extend({Deferred:function(M){var Z=[["notify","progress",_e.Callbacks("memory"),_e.Callbacks("memory"),2],["resolve","done",_e.Callbacks("once memory"),_e.Callbacks("once memory"),0,"resolved"],["reject","fail",_e.Callbacks("once memory"),_e.Callbacks("once memory"),1,"rejected"]],xe="pending",Re={state:function(){return xe},always:function(){return vt.done(arguments).fail(arguments),this},catch:function(Ct){return Re.then(null,Ct)},pipe:function(){var Ct=arguments;return _e.Deferred(function(It){_e.each(Z,function(Pn,xn){var Wn=nt(Ct[xn[4]])&&Ct[xn[4]];vt[xn[1]](function(){var Cr=Wn&&Wn.apply(this,arguments);Cr&&nt(Cr.promise)?Cr.promise().progress(It.notify).done(It.resolve).fail(It.reject):It[xn[0]+"With"](this,Wn?[Cr]:arguments)})}),Ct=null}).promise()},then:function(Ct,It,Pn){var xn=0;function Wn(Cr,kr,hr,Gr){return function(){var _i=this,ds=arguments,us=function(){var Ka,za;if(!(Cr<xn)){if(Ka=hr.apply(_i,ds),Ka===kr.promise())throw new TypeError("Thenable self-resolution");za=Ka&&(typeof Ka=="object"||typeof Ka=="function")&&Ka.then,nt(za)?Gr?za.call(Ka,Wn(xn,kr,wo,Gr),Wn(xn,kr,xo,Gr)):(xn++,za.call(Ka,Wn(xn,kr,wo,Gr),Wn(xn,kr,xo,Gr),Wn(xn,kr,wo,kr.notifyWith))):(hr!==wo&&(_i=void 0,ds=[Ka]),(Gr||kr.resolveWith)(_i,ds))}},So=Gr?us:function(){try{us()}catch(Ka){_e.Deferred.exceptionHook&&_e.Deferred.exceptionHook(Ka,So.error),Cr+1>=xn&&(hr!==xo&&(_i=void 0,ds=[Ka]),kr.rejectWith(_i,ds))}};Cr?So():(_e.Deferred.getErrorHook?So.error=_e.Deferred.getErrorHook():_e.Deferred.getStackHook&&(So.error=_e.Deferred.getStackHook()),e.setTimeout(So))}}return _e.Deferred(function(Cr){Z[0][3].add(Wn(0,Cr,nt(Pn)?Pn:wo,Cr.notifyWith)),Z[1][3].add(Wn(0,Cr,nt(Ct)?Ct:wo)),Z[2][3].add(Wn(0,Cr,nt(It)?It:xo))}).promise()},promise:function(Ct){return Ct!=null?_e.extend(Ct,Re):Re}},vt={};return _e.each(Z,function(Ct,It){var Pn=It[2],xn=It[5];Re[It[1]]=Pn.add,xn&&Pn.add(function(){xe=xn},Z[3-Ct][2].disable,Z[3-Ct][3].disable,Z[0][2].lock,Z[0][3].lock),Pn.add(It[3].fire),vt[It[0]]=function(){return vt[It[0]+"With"](this===vt?void 0:this,arguments),this},vt[It[0]+"With"]=Pn.fireWith}),Re.promise(vt),M&&M.call(vt,vt),vt},when:function(M){var Z=arguments.length,xe=Z,Re=Array(xe),vt=u.call(arguments),Ct=_e.Deferred(),It=function(Pn){return function(xn){Re[Pn]=this,vt[Pn]=arguments.length>1?u.call(arguments):xn,--Z||Ct.resolveWith(Re,vt)}};if(Z<=1&&(Fa(M,Ct.done(It(xe)).resolve,Ct.reject,!Z),Ct.state()==="pending"||nt(vt[xe]&&vt[xe].then)))return Ct.then();for(;xe--;)Fa(vt[xe],It(xe),Ct.reject);return Ct.promise()}});var Uo=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_e.Deferred.exceptionHook=function(M,Z){e.console&&e.console.warn&&M&&Uo.test(M.name)&&e.console.warn("jQuery.Deferred exception: "+M.message,M.stack,Z)},_e.readyException=function(M){e.setTimeout(function(){throw M})};var so=_e.Deferred();_e.fn.ready=function(M){return so.then(M).catch(function(Z){_e.readyException(Z)}),this},_e.extend({isReady:!1,readyWait:1,ready:function(M){(M===!0?--_e.readyWait:_e.isReady)||(_e.isReady=!0,!(M!==!0&&--_e.readyWait>0)&&so.resolveWith(Ie,[_e]))}}),_e.ready.then=so.then;function pa(){Ie.removeEventListener("DOMContentLoaded",pa),e.removeEventListener("load",pa),_e.ready()}Ie.readyState==="complete"||Ie.readyState!=="loading"&&!Ie.documentElement.doScroll?e.setTimeout(_e.ready):(Ie.addEventListener("DOMContentLoaded",pa),e.addEventListener("load",pa));var ea=function(M,Z,xe,Re,vt,Ct,It){var Pn=0,xn=M.length,Wn=xe==null;if(an(xe)==="object"){vt=!0;for(Pn in xe)ea(M,Z,Pn,xe[Pn],!0,Ct,It)}else if(Re!==void 0&&(vt=!0,nt(Re)||(It=!0),Wn&&(It?(Z.call(M,Re),Z=null):(Wn=Z,Z=function(Cr,kr,hr){return Wn.call(_e(Cr),hr)})),Z))for(;Pn<xn;Pn++)Z(M[Pn],xe,It?Re:Re.call(M[Pn],Pn,Z(M[Pn],xe)));return vt?M:Wn?Z.call(M):xn?Z(M[0],xe):Ct},fs=/^-ms-/,Ds=/-([a-z])/g;function di(M,Z){return Z.toUpperCase()}function Ai(M){return M.replace(fs,"ms-").replace(Ds,di)}var ui=function(M){return M.nodeType===1||M.nodeType===9||!+M.nodeType};function bo(){this.expando=_e.expando+bo.uid++}bo.uid=1,bo.prototype={cache:function(M){var Z=M[this.expando];return Z||(Z={},ui(M)&&(M.nodeType?M[this.expando]=Z:Object.defineProperty(M,this.expando,{value:Z,configurable:!0}))),Z},set:function(M,Z,xe){var Re,vt=this.cache(M);if(typeof Z=="string")vt[Ai(Z)]=xe;else for(Re in Z)vt[Ai(Re)]=Z[Re];return vt},get:function(M,Z){return Z===void 0?this.cache(M):M[this.expando]&&M[this.expando][Ai(Z)]},access:function(M,Z,xe){return Z===void 0||Z&&typeof Z=="string"&&xe===void 0?this.get(M,Z):(this.set(M,Z,xe),xe!==void 0?xe:Z)},remove:function(M,Z){var xe,Re=M[this.expando];if(Re!==void 0){if(Z!==void 0)for(Array.isArray(Z)?Z=Z.map(Ai):(Z=Ai(Z),Z=Z in Re?[Z]:Z.match(Fi)||[]),xe=Z.length;xe--;)delete Re[Z[xe]];(Z===void 0||_e.isEmptyObject(Re))&&(M.nodeType?M[this.expando]=void 0:delete M[this.expando])}},hasData:function(M){var Z=M[this.expando];return Z!==void 0&&!_e.isEmptyObject(Z)}};var ar=new bo,t=new bo,i=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,o=/[A-Z]/g;function h(M){return M==="true"?!0:M==="false"?!1:M==="null"?null:M===+M+""?+M:i.test(M)?JSON.parse(M):M}function d(M,Z,xe){var Re;if(xe===void 0&&M.nodeType===1)if(Re="data-"+Z.replace(o,"-$&").toLowerCase(),xe=M.getAttribute(Re),typeof xe=="string"){try{xe=h(xe)}catch{}t.set(M,Z,xe)}else xe=void 0;return xe}_e.extend({hasData:function(M){return t.hasData(M)||ar.hasData(M)},data:function(M,Z,xe){return t.access(M,Z,xe)},removeData:function(M,Z){t.remove(M,Z)},_data:function(M,Z,xe){return ar.access(M,Z,xe)},_removeData:function(M,Z){ar.remove(M,Z)}}),_e.fn.extend({data:function(M,Z){var xe,Re,vt,Ct=this[0],It=Ct&&Ct.attributes;if(M===void 0){if(this.length&&(vt=t.get(Ct),Ct.nodeType===1&&!ar.get(Ct,"hasDataAttrs"))){for(xe=It.length;xe--;)It[xe]&&(Re=It[xe].name,Re.indexOf("data-")===0&&(Re=Ai(Re.slice(5)),d(Ct,Re,vt[Re])));ar.set(Ct,"hasDataAttrs",!0)}return vt}return typeof M=="object"?this.each(function(){t.set(this,M)}):ea(this,function(Pn){var xn;if(Ct&&Pn===void 0)return xn=t.get(Ct,M),xn!==void 0||(xn=d(Ct,M),xn!==void 0)?xn:void 0;this.each(function(){t.set(this,M,Pn)})},null,Z,arguments.length>1,null,!0)},removeData:function(M){return this.each(function(){t.remove(this,M)})}}),_e.extend({queue:function(M,Z,xe){var Re;if(M)return Z=(Z||"fx")+"queue",Re=ar.get(M,Z),xe&&(!Re||Array.isArray(xe)?Re=ar.access(M,Z,_e.makeArray(xe)):Re.push(xe)),Re||[]},dequeue:function(M,Z){Z=Z||"fx";var xe=_e.queue(M,Z),Re=xe.length,vt=xe.shift(),Ct=_e._queueHooks(M,Z),It=function(){_e.dequeue(M,Z)};vt==="inprogress"&&(vt=xe.shift(),Re--),vt&&(Z==="fx"&&xe.unshift("inprogress"),delete Ct.stop,vt.call(M,It,Ct)),!Re&&Ct&&Ct.empty.fire()},_queueHooks:function(M,Z){var xe=Z+"queueHooks";return ar.get(M,xe)||ar.access(M,xe,{empty:_e.Callbacks("once memory").add(function(){ar.remove(M,[Z+"queue",xe])})})}}),_e.fn.extend({queue:function(M,Z){var xe=2;return typeof M!="string"&&(Z=M,M="fx",xe--),arguments.length<xe?_e.queue(this[0],M):Z===void 0?this:this.each(function(){var Re=_e.queue(this,M,Z);_e._queueHooks(this,M),M==="fx"&&Re[0]!=="inprogress"&&_e.dequeue(this,M)})},dequeue:function(M){return this.each(function(){_e.dequeue(this,M)})},clearQueue:function(M){return this.queue(M||"fx",[])},promise:function(M,Z){var xe,Re=1,vt=_e.Deferred(),Ct=this,It=this.length,Pn=function(){--Re||vt.resolveWith(Ct,[Ct])};for(typeof M!="string"&&(Z=M,M=void 0),M=M||"fx";It--;)xe=ar.get(Ct[It],M+"queueHooks"),xe&&xe.empty&&(Re++,xe.empty.add(Pn));return Pn(),vt.promise(Z)}});var v=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,D=new RegExp("^(?:([+-])=|)("+v+")([a-z%]*)$","i"),A=["Top","Right","Bottom","Left"],T=Ie.documentElement,P=function(M){return _e.contains(M.ownerDocument,M)},F={composed:!0};T.getRootNode&&(P=function(M){return _e.contains(M.ownerDocument,M)||M.getRootNode(F)===M.ownerDocument});var V=function(M,Z){return M=Z||M,M.style.display==="none"||M.style.display===""&&P(M)&&_e.css(M,"display")==="none"};function z(M,Z,xe,Re){var vt,Ct,It=20,Pn=Re?function(){return Re.cur()}:function(){return _e.css(M,Z,"")},xn=Pn(),Wn=xe&&xe[3]||(_e.cssNumber[Z]?"":"px"),Cr=M.nodeType&&(_e.cssNumber[Z]||Wn!=="px"&&+xn)&&D.exec(_e.css(M,Z));if(Cr&&Cr[3]!==Wn){for(xn=xn/2,Wn=Wn||Cr[3],Cr=+xn||1;It--;)_e.style(M,Z,Cr+Wn),(1-Ct)*(1-(Ct=Pn()/xn||.5))<=0&&(It=0),Cr=Cr/Ct;Cr=Cr*2,_e.style(M,Z,Cr+Wn),xe=xe||[]}return xe&&(Cr=+Cr||+xn||0,vt=xe[1]?Cr+(xe[1]+1)*xe[2]:+xe[2],Re&&(Re.unit=Wn,Re.start=Cr,Re.end=vt)),vt}var R={};function J(M){var Z,xe=M.ownerDocument,Re=M.nodeName,vt=R[Re];return vt||(Z=xe.body.appendChild(xe.createElement(Re)),vt=_e.css(Z,"display"),Z.parentNode.removeChild(Z),vt==="none"&&(vt="block"),R[Re]=vt,vt)}function Y(M,Z){for(var xe,Re,vt=[],Ct=0,It=M.length;Ct<It;Ct++)Re=M[Ct],Re.style&&(xe=Re.style.display,Z?(xe==="none"&&(vt[Ct]=ar.get(Re,"display")||null,vt[Ct]||(Re.style.display="")),Re.style.display===""&&V(Re)&&(vt[Ct]=J(Re))):xe!=="none"&&(vt[Ct]="none",ar.set(Re,"display",xe)));for(Ct=0;Ct<It;Ct++)vt[Ct]!=null&&(M[Ct].style.display=vt[Ct]);return M}_e.fn.extend({show:function(){return Y(this,!0)},hide:function(){return Y(this)},toggle:function(M){return typeof M=="boolean"?M?this.show():this.hide():this.each(function(){V(this)?_e(this).show():_e(this).hide()})}});var ie=/^(?:checkbox|radio)$/i,j=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,X=/^$|^module$|\/(?:java|ecma)script/i;(function(){var M=Ie.createDocumentFragment(),Z=M.appendChild(Ie.createElement("div")),xe=Ie.createElement("input");xe.setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),Z.appendChild(xe),mt.checkClone=Z.cloneNode(!0).cloneNode(!0).lastChild.checked,Z.innerHTML="<textarea>x</textarea>",mt.noCloneChecked=!!Z.cloneNode(!0).lastChild.defaultValue,Z.innerHTML="<option></option>",mt.option=!!Z.lastChild})();var I={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};I.tbody=I.tfoot=I.colgroup=I.caption=I.thead,I.th=I.td,mt.option||(I.optgroup=I.option=[1,"<select multiple='multiple'>","</select>"]);function G(M,Z){var xe;return typeof M.getElementsByTagName<"u"?xe=M.getElementsByTagName(Z||"*"):typeof M.querySelectorAll<"u"?xe=M.querySelectorAll(Z||"*"):xe=[],Z===void 0||Z&&On(M,Z)?_e.merge([M],xe):xe}function te(M,Z){for(var xe=0,Re=M.length;xe<Re;xe++)ar.set(M[xe],"globalEval",!Z||ar.get(Z[xe],"globalEval"))}var pe=/<|&#?\w+;/;function oe(M,Z,xe,Re,vt){for(var Ct,It,Pn,xn,Wn,Cr,kr=Z.createDocumentFragment(),hr=[],Gr=0,_i=M.length;Gr<_i;Gr++)if(Ct=M[Gr],Ct||Ct===0)if(an(Ct)==="object")_e.merge(hr,Ct.nodeType?[Ct]:Ct);else if(!pe.test(Ct))hr.push(Z.createTextNode(Ct));else{for(It=It||kr.appendChild(Z.createElement("div")),Pn=(j.exec(Ct)||["",""])[1].toLowerCase(),xn=I[Pn]||I._default,It.innerHTML=xn[1]+_e.htmlPrefilter(Ct)+xn[2],Cr=xn[0];Cr--;)It=It.lastChild;_e.merge(hr,It.childNodes),It=kr.firstChild,It.textContent=""}for(kr.textContent="",Gr=0;Ct=hr[Gr++];){if(Re&&_e.inArray(Ct,Re)>-1){vt&&vt.push(Ct);continue}if(Wn=P(Ct),It=G(kr.appendChild(Ct),"script"),Wn&&te(It),xe)for(Cr=0;Ct=It[Cr++];)X.test(Ct.type||"")&&xe.push(Ct)}return kr}var Ee=/^([^.]*)(?:\.(.+)|)/;function $e(){return!0}function Xe(){return!1}function ft(M,Z,xe,Re,vt,Ct){var It,Pn;if(typeof Z=="object"){typeof xe!="string"&&(Re=Re||xe,xe=void 0);for(Pn in Z)ft(M,Pn,xe,Re,Z[Pn],Ct);return M}if(Re==null&&vt==null?(vt=xe,Re=xe=void 0):vt==null&&(typeof xe=="string"?(vt=Re,Re=void 0):(vt=Re,Re=xe,xe=void 0)),vt===!1)vt=Xe;else if(!vt)return M;return Ct===1&&(It=vt,vt=function(xn){return _e().off(xn),It.apply(this,arguments)},vt.guid=It.guid||(It.guid=_e.guid++)),M.each(function(){_e.event.add(this,Z,vt,Re,xe)})}_e.event={global:{},add:function(M,Z,xe,Re,vt){var Ct,It,Pn,xn,Wn,Cr,kr,hr,Gr,_i,ds,us=ar.get(M);if(ui(M))for(xe.handler&&(Ct=xe,xe=Ct.handler,vt=Ct.selector),vt&&_e.find.matchesSelector(T,vt),xe.guid||(xe.guid=_e.guid++),(xn=us.events)||(xn=us.events=Object.create(null)),(It=us.handle)||(It=us.handle=function(So){return typeof _e<"u"&&_e.event.triggered!==So.type?_e.event.dispatch.apply(M,arguments):void 0}),Z=(Z||"").match(Fi)||[""],Wn=Z.length;Wn--;)Pn=Ee.exec(Z[Wn])||[],Gr=ds=Pn[1],_i=(Pn[2]||"").split(".").sort(),Gr&&(kr=_e.event.special[Gr]||{},Gr=(vt?kr.delegateType:kr.bindType)||Gr,kr=_e.event.special[Gr]||{},Cr=_e.extend({type:Gr,origType:ds,data:Re,handler:xe,guid:xe.guid,selector:vt,needsContext:vt&&_e.expr.match.needsContext.test(vt),namespace:_i.join(".")},Ct),(hr=xn[Gr])||(hr=xn[Gr]=[],hr.delegateCount=0,(!kr.setup||kr.setup.call(M,Re,_i,It)===!1)&&M.addEventListener&&M.addEventListener(Gr,It)),kr.add&&(kr.add.call(M,Cr),Cr.handler.guid||(Cr.handler.guid=xe.guid)),vt?hr.splice(hr.delegateCount++,0,Cr):hr.push(Cr),_e.event.global[Gr]=!0)},remove:function(M,Z,xe,Re,vt){var Ct,It,Pn,xn,Wn,Cr,kr,hr,Gr,_i,ds,us=ar.hasData(M)&&ar.get(M);if(!(!us||!(xn=us.events))){for(Z=(Z||"").match(Fi)||[""],Wn=Z.length;Wn--;){if(Pn=Ee.exec(Z[Wn])||[],Gr=ds=Pn[1],_i=(Pn[2]||"").split(".").sort(),!Gr){for(Gr in xn)_e.event.remove(M,Gr+Z[Wn],xe,Re,!0);continue}for(kr=_e.event.special[Gr]||{},Gr=(Re?kr.delegateType:kr.bindType)||Gr,hr=xn[Gr]||[],Pn=Pn[2]&&new RegExp("(^|\\.)"+_i.join("\\.(?:.*\\.|)")+"(\\.|$)"),It=Ct=hr.length;Ct--;)Cr=hr[Ct],(vt||ds===Cr.origType)&&(!xe||xe.guid===Cr.guid)&&(!Pn||Pn.test(Cr.namespace))&&(!Re||Re===Cr.selector||Re==="**"&&Cr.selector)&&(hr.splice(Ct,1),Cr.selector&&hr.delegateCount--,kr.remove&&kr.remove.call(M,Cr));It&&!hr.length&&((!kr.teardown||kr.teardown.call(M,_i,us.handle)===!1)&&_e.removeEvent(M,Gr,us.handle),delete xn[Gr])}_e.isEmptyObject(xn)&&ar.remove(M,"handle events")}},dispatch:function(M){var Z,xe,Re,vt,Ct,It,Pn=new Array(arguments.length),xn=_e.event.fix(M),Wn=(ar.get(this,"events")||Object.create(null))[xn.type]||[],Cr=_e.event.special[xn.type]||{};for(Pn[0]=xn,Z=1;Z<arguments.length;Z++)Pn[Z]=arguments[Z];if(xn.delegateTarget=this,!(Cr.preDispatch&&Cr.preDispatch.call(this,xn)===!1)){for(It=_e.event.handlers.call(this,xn,Wn),Z=0;(vt=It[Z++])&&!xn.isPropagationStopped();)for(xn.currentTarget=vt.elem,xe=0;(Ct=vt.handlers[xe++])&&!xn.isImmediatePropagationStopped();)(!xn.rnamespace||Ct.namespace===!1||xn.rnamespace.test(Ct.namespace))&&(xn.handleObj=Ct,xn.data=Ct.data,Re=((_e.event.special[Ct.origType]||{}).handle||Ct.handler).apply(vt.elem,Pn),Re!==void 0&&(xn.result=Re)===!1&&(xn.preventDefault(),xn.stopPropagation()));return Cr.postDispatch&&Cr.postDispatch.call(this,xn),xn.result}},handlers:function(M,Z){var xe,Re,vt,Ct,It,Pn=[],xn=Z.delegateCount,Wn=M.target;if(xn&&Wn.nodeType&&!(M.type==="click"&&M.button>=1)){for(;Wn!==this;Wn=Wn.parentNode||this)if(Wn.nodeType===1&&!(M.type==="click"&&Wn.disabled===!0)){for(Ct=[],It={},xe=0;xe<xn;xe++)Re=Z[xe],vt=Re.selector+" ",It[vt]===void 0&&(It[vt]=Re.needsContext?_e(vt,this).index(Wn)>-1:_e.find(vt,this,null,[Wn]).length),It[vt]&&Ct.push(Re);Ct.length&&Pn.push({elem:Wn,handlers:Ct})}}return Wn=this,xn<Z.length&&Pn.push({elem:Wn,handlers:Z.slice(xn)}),Pn},addProp:function(M,Z){Object.defineProperty(_e.Event.prototype,M,{enumerable:!0,configurable:!0,get:nt(Z)?function(){if(this.originalEvent)return Z(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[M]},set:function(xe){Object.defineProperty(this,M,{enumerable:!0,configurable:!0,writable:!0,value:xe})}})},fix:function(M){return M[_e.expando]?M:new _e.Event(M)},special:{load:{noBubble:!0},click:{setup:function(M){var Z=this||M;return ie.test(Z.type)&&Z.click&&On(Z,"input")&&Ze(Z,"click",!0),!1},trigger:function(M){var Z=this||M;return ie.test(Z.type)&&Z.click&&On(Z,"input")&&Ze(Z,"click"),!0},_default:function(M){var Z=M.target;return ie.test(Z.type)&&Z.click&&On(Z,"input")&&ar.get(Z,"click")||On(Z,"a")}},beforeunload:{postDispatch:function(M){M.result!==void 0&&M.originalEvent&&(M.originalEvent.returnValue=M.result)}}}};function Ze(M,Z,xe){if(!xe){ar.get(M,Z)===void 0&&_e.event.add(M,Z,$e);return}ar.set(M,Z,!1),_e.event.add(M,Z,{namespace:!1,handler:function(Re){var vt,Ct=ar.get(this,Z);if(Re.isTrigger&1&&this[Z]){if(Ct)(_e.event.special[Z]||{}).delegateType&&Re.stopPropagation();else if(Ct=u.call(arguments),ar.set(this,Z,Ct),this[Z](),vt=ar.get(this,Z),ar.set(this,Z,!1),Ct!==vt)return Re.stopImmediatePropagation(),Re.preventDefault(),vt}else Ct&&(ar.set(this,Z,_e.event.trigger(Ct[0],Ct.slice(1),this)),Re.stopPropagation(),Re.isImmediatePropagationStopped=$e)}})}_e.removeEvent=function(M,Z,xe){M.removeEventListener&&M.removeEventListener(Z,xe)},_e.Event=function(M,Z){if(!(this instanceof _e.Event))return new _e.Event(M,Z);M&&M.type?(this.originalEvent=M,this.type=M.type,this.isDefaultPrevented=M.defaultPrevented||M.defaultPrevented===void 0&&M.returnValue===!1?$e:Xe,this.target=M.target&&M.target.nodeType===3?M.target.parentNode:M.target,this.currentTarget=M.currentTarget,this.relatedTarget=M.relatedTarget):this.type=M,Z&&_e.extend(this,Z),this.timeStamp=M&&M.timeStamp||Date.now(),this[_e.expando]=!0},_e.Event.prototype={constructor:_e.Event,isDefaultPrevented:Xe,isPropagationStopped:Xe,isImmediatePropagationStopped:Xe,isSimulated:!1,preventDefault:function(){var M=this.originalEvent;this.isDefaultPrevented=$e,M&&!this.isSimulated&&M.preventDefault()},stopPropagation:function(){var M=this.originalEvent;this.isPropagationStopped=$e,M&&!this.isSimulated&&M.stopPropagation()},stopImmediatePropagation:function(){var M=this.originalEvent;this.isImmediatePropagationStopped=$e,M&&!this.isSimulated&&M.stopImmediatePropagation(),this.stopPropagation()}},_e.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_e.event.addProp),_e.each({focus:"focusin",blur:"focusout"},function(M,Z){function xe(Re){if(Ie.documentMode){var vt=ar.get(this,"handle"),Ct=_e.event.fix(Re);Ct.type=Re.type==="focusin"?"focus":"blur",Ct.isSimulated=!0,vt(Re),Ct.target===Ct.currentTarget&&vt(Ct)}else _e.event.simulate(Z,Re.target,_e.event.fix(Re))}_e.event.special[M]={setup:function(){var Re;if(Ze(this,M,!0),Ie.documentMode)Re=ar.get(this,Z),Re||this.addEventListener(Z,xe),ar.set(this,Z,(Re||0)+1);else return!1},trigger:function(){return Ze(this,M),!0},teardown:function(){var Re;if(Ie.documentMode)Re=ar.get(this,Z)-1,Re?ar.set(this,Z,Re):(this.removeEventListener(Z,xe),ar.remove(this,Z));else return!1},_default:function(Re){return ar.get(Re.target,M)},delegateType:Z},_e.event.special[Z]={setup:function(){var Re=this.ownerDocument||this.document||this,vt=Ie.documentMode?this:Re,Ct=ar.get(vt,Z);Ct||(Ie.documentMode?this.addEventListener(Z,xe):Re.addEventListener(M,xe,!0)),ar.set(vt,Z,(Ct||0)+1)},teardown:function(){var Re=this.ownerDocument||this.document||this,vt=Ie.documentMode?this:Re,Ct=ar.get(vt,Z)-1;Ct?ar.set(vt,Z,Ct):(Ie.documentMode?this.removeEventListener(Z,xe):Re.removeEventListener(M,xe,!0),ar.remove(vt,Z))}}}),_e.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(M,Z){_e.event.special[M]={delegateType:Z,bindType:Z,handle:function(xe){var Re,vt=this,Ct=xe.relatedTarget,It=xe.handleObj;return(!Ct||Ct!==vt&&!_e.contains(vt,Ct))&&(xe.type=It.origType,Re=It.handler.apply(this,arguments),xe.type=Z),Re}}}),_e.fn.extend({on:function(M,Z,xe,Re){return ft(this,M,Z,xe,Re)},one:function(M,Z,xe,Re){return ft(this,M,Z,xe,Re,1)},off:function(M,Z,xe){var Re,vt;if(M&&M.preventDefault&&M.handleObj)return Re=M.handleObj,_e(M.delegateTarget).off(Re.namespace?Re.origType+"."+Re.namespace:Re.origType,Re.selector,Re.handler),this;if(typeof M=="object"){for(vt in M)this.off(vt,Z,M[vt]);return this}return(Z===!1||typeof Z=="function")&&(xe=Z,Z=void 0),xe===!1&&(xe=Xe),this.each(function(){_e.event.remove(this,M,xe,Z)})}});var yt=/<script|<style|<link/i,Et=/checked\s*(?:[^=]|=\s*.checked.)/i,Yt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function qt(M,Z){return On(M,"table")&&On(Z.nodeType!==11?Z:Z.firstChild,"tr")&&_e(M).children("tbody")[0]||M}function ln(M){return M.type=(M.getAttribute("type")!==null)+"/"+M.type,M}function In(M){return(M.type||"").slice(0,5)==="true/"?M.type=M.type.slice(5):M.removeAttribute("type"),M}function Zn(M,Z){var xe,Re,vt,Ct,It,Pn,xn;if(Z.nodeType===1){if(ar.hasData(M)&&(Ct=ar.get(M),xn=Ct.events,xn)){ar.remove(Z,"handle events");for(vt in xn)for(xe=0,Re=xn[vt].length;xe<Re;xe++)_e.event.add(Z,vt,xn[vt][xe])}t.hasData(M)&&(It=t.access(M),Pn=_e.extend({},It),t.set(Z,Pn))}}function Kn(M,Z){var xe=Z.nodeName.toLowerCase();xe==="input"&&ie.test(M.type)?Z.checked=M.checked:(xe==="input"||xe==="textarea")&&(Z.defaultValue=M.defaultValue)}function ur(M,Z,xe,Re){Z=m(Z);var vt,Ct,It,Pn,xn,Wn,Cr=0,kr=M.length,hr=kr-1,Gr=Z[0],_i=nt(Gr);if(_i||kr>1&&typeof Gr=="string"&&!mt.checkClone&&Et.test(Gr))return M.each(function(ds){var us=M.eq(ds);_i&&(Z[0]=Gr.call(this,ds,us.html())),ur(us,Z,xe,Re)});if(kr&&(vt=oe(Z,M[0].ownerDocument,!1,M,Re),Ct=vt.firstChild,vt.childNodes.length===1&&(vt=Ct),Ct||Re)){for(It=_e.map(G(vt,"script"),ln),Pn=It.length;Cr<kr;Cr++)xn=vt,Cr!==hr&&(xn=_e.clone(xn,!0,!0),Pn&&_e.merge(It,G(xn,"script"))),xe.call(M[Cr],xn,Cr);if(Pn)for(Wn=It[It.length-1].ownerDocument,_e.map(It,In),Cr=0;Cr<Pn;Cr++)xn=It[Cr],X.test(xn.type||"")&&!ar.access(xn,"globalEval")&&_e.contains(Wn,xn)&&(xn.src&&(xn.type||"").toLowerCase()!=="module"?_e._evalUrl&&!xn.noModule&&_e._evalUrl(xn.src,{nonce:xn.nonce||xn.getAttribute("nonce")},Wn):At(xn.textContent.replace(Yt,""),xn,Wn))}return M}function yn(M,Z,xe){for(var Re,vt=Z?_e.filter(Z,M):M,Ct=0;(Re=vt[Ct])!=null;Ct++)!xe&&Re.nodeType===1&&_e.cleanData(G(Re)),Re.parentNode&&(xe&&P(Re)&&te(G(Re,"script")),Re.parentNode.removeChild(Re));return M}_e.extend({htmlPrefilter:function(M){return M},clone:function(M,Z,xe){var Re,vt,Ct,It,Pn=M.cloneNode(!0),xn=P(M);if(!mt.noCloneChecked&&(M.nodeType===1||M.nodeType===11)&&!_e.isXMLDoc(M))for(It=G(Pn),Ct=G(M),Re=0,vt=Ct.length;Re<vt;Re++)Kn(Ct[Re],It[Re]);if(Z)if(xe)for(Ct=Ct||G(M),It=It||G(Pn),Re=0,vt=Ct.length;Re<vt;Re++)Zn(Ct[Re],It[Re]);else Zn(M,Pn);return It=G(Pn,"script"),It.length>0&&te(It,!xn&&G(M,"script")),Pn},cleanData:function(M){for(var Z,xe,Re,vt=_e.event.special,Ct=0;(xe=M[Ct])!==void 0;Ct++)if(ui(xe)){if(Z=xe[ar.expando]){if(Z.events)for(Re in Z.events)vt[Re]?_e.event.remove(xe,Re):_e.removeEvent(xe,Re,Z.handle);xe[ar.expando]=void 0}xe[t.expando]&&(xe[t.expando]=void 0)}}}),_e.fn.extend({detach:function(M){return yn(this,M,!0)},remove:function(M){return yn(this,M)},text:function(M){return ea(this,function(Z){return Z===void 0?_e.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=Z)})},null,M,arguments.length)},append:function(){return ur(this,arguments,function(M){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var Z=qt(this,M);Z.appendChild(M)}})},prepend:function(){return ur(this,arguments,function(M){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var Z=qt(this,M);Z.insertBefore(M,Z.firstChild)}})},before:function(){return ur(this,arguments,function(M){this.parentNode&&this.parentNode.insertBefore(M,this)})},after:function(){return ur(this,arguments,function(M){this.parentNode&&this.parentNode.insertBefore(M,this.nextSibling)})},empty:function(){for(var M,Z=0;(M=this[Z])!=null;Z++)M.nodeType===1&&(_e.cleanData(G(M,!1)),M.textContent="");return this},clone:function(M,Z){return M=M??!1,Z=Z??M,this.map(function(){return _e.clone(this,M,Z)})},html:function(M){return ea(this,function(Z){var xe=this[0]||{},Re=0,vt=this.length;if(Z===void 0&&xe.nodeType===1)return xe.innerHTML;if(typeof Z=="string"&&!yt.test(Z)&&!I[(j.exec(Z)||["",""])[1].toLowerCase()]){Z=_e.htmlPrefilter(Z);try{for(;Re<vt;Re++)xe=this[Re]||{},xe.nodeType===1&&(_e.cleanData(G(xe,!1)),xe.innerHTML=Z);xe=0}catch{}}xe&&this.empty().append(Z)},null,M,arguments.length)},replaceWith:function(){var M=[];return ur(this,arguments,function(Z){var xe=this.parentNode;_e.inArray(this,M)<0&&(_e.cleanData(G(this)),xe&&xe.replaceChild(Z,this))},M)}}),_e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(M,Z){_e.fn[M]=function(xe){for(var Re,vt=[],Ct=_e(xe),It=Ct.length-1,Pn=0;Pn<=It;Pn++)Re=Pn===It?this:this.clone(!0),_e(Ct[Pn])[Z](Re),b.apply(vt,Re.get());return this.pushStack(vt)}});var An=new RegExp("^("+v+")(?!px)[a-z%]+$","i"),qn=/^--/,cr=function(M){var Z=M.ownerDocument.defaultView;return(!Z||!Z.opener)&&(Z=e),Z.getComputedStyle(M)},mr=function(M,Z,xe){var Re,vt,Ct={};for(vt in Z)Ct[vt]=M.style[vt],M.style[vt]=Z[vt];Re=xe.call(M);for(vt in Z)M.style[vt]=Ct[vt];return Re},Rr=new RegExp(A.join("|"),"i");(function(){function M(){if(Wn){xn.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Wn.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",T.appendChild(xn).appendChild(Wn);var Cr=e.getComputedStyle(Wn);xe=Cr.top!=="1%",Pn=Z(Cr.marginLeft)===12,Wn.style.right="60%",Ct=Z(Cr.right)===36,Re=Z(Cr.width)===36,Wn.style.position="absolute",vt=Z(Wn.offsetWidth/3)===12,T.removeChild(xn),Wn=null}}function Z(Cr){return Math.round(parseFloat(Cr))}var xe,Re,vt,Ct,It,Pn,xn=Ie.createElement("div"),Wn=Ie.createElement("div");Wn.style&&(Wn.style.backgroundClip="content-box",Wn.cloneNode(!0).style.backgroundClip="",mt.clearCloneStyle=Wn.style.backgroundClip==="content-box",_e.extend(mt,{boxSizingReliable:function(){return M(),Re},pixelBoxStyles:function(){return M(),Ct},pixelPosition:function(){return M(),xe},reliableMarginLeft:function(){return M(),Pn},scrollboxSize:function(){return M(),vt},reliableTrDimensions:function(){var Cr,kr,hr,Gr;return It==null&&(Cr=Ie.createElement("table"),kr=Ie.createElement("tr"),hr=Ie.createElement("div"),Cr.style.cssText="position:absolute;left:-11111px;border-collapse:separate",kr.style.cssText="box-sizing:content-box;border:1px solid",kr.style.height="1px",hr.style.height="9px",hr.style.display="block",T.appendChild(Cr).appendChild(kr).appendChild(hr),Gr=e.getComputedStyle(kr),It=parseInt(Gr.height,10)+parseInt(Gr.borderTopWidth,10)+parseInt(Gr.borderBottomWidth,10)===kr.offsetHeight,T.removeChild(Cr)),It}}))})();function Lr(M,Z,xe){var Re,vt,Ct,It,Pn=qn.test(Z),xn=M.style;return xe=xe||cr(M),xe&&(It=xe.getPropertyValue(Z)||xe[Z],Pn&&It&&(It=It.replace(xr,"$1")||void 0),It===""&&!P(M)&&(It=_e.style(M,Z)),!mt.pixelBoxStyles()&&An.test(It)&&Rr.test(Z)&&(Re=xn.width,vt=xn.minWidth,Ct=xn.maxWidth,xn.minWidth=xn.maxWidth=xn.width=It,It=xe.width,xn.width=Re,xn.minWidth=vt,xn.maxWidth=Ct)),It!==void 0?It+"":It}function Ir(M,Z){return{get:function(){if(M()){delete this.get;return}return(this.get=Z).apply(this,arguments)}}}var ti=["Webkit","Moz","ms"],Wr=Ie.createElement("div").style,ls={};function Vr(M){for(var Z=M[0].toUpperCase()+M.slice(1),xe=ti.length;xe--;)if(M=ti[xe]+Z,M in Wr)return M}function $i(M){var Z=_e.cssProps[M]||ls[M];return Z||(M in Wr?M:ls[M]=Vr(M)||M)}var Qi=/^(none|table(?!-c[ea]).+)/,Oi={position:"absolute",visibility:"hidden",display:"block"},Bi={letterSpacing:"0",fontWeight:"400"};function ys(M,Z,xe){var Re=D.exec(Z);return Re?Math.max(0,Re[2]-(xe||0))+(Re[3]||"px"):Z}function ns(M,Z,xe,Re,vt,Ct){var It=Z==="width"?1:0,Pn=0,xn=0,Wn=0;if(xe===(Re?"border":"content"))return 0;for(;It<4;It+=2)xe==="margin"&&(Wn+=_e.css(M,xe+A[It],!0,vt)),Re?(xe==="content"&&(xn-=_e.css(M,"padding"+A[It],!0,vt)),xe!=="margin"&&(xn-=_e.css(M,"border"+A[It]+"Width",!0,vt))):(xn+=_e.css(M,"padding"+A[It],!0,vt),xe!=="padding"?xn+=_e.css(M,"border"+A[It]+"Width",!0,vt):Pn+=_e.css(M,"border"+A[It]+"Width",!0,vt));return!Re&&Ct>=0&&(xn+=Math.max(0,Math.ceil(M["offset"+Z[0].toUpperCase()+Z.slice(1)]-Ct-xn-Pn-.5))||0),xn+Wn}function As(M,Z,xe){var Re=cr(M),vt=!mt.boxSizingReliable()||xe,Ct=vt&&_e.css(M,"boxSizing",!1,Re)==="border-box",It=Ct,Pn=Lr(M,Z,Re),xn="offset"+Z[0].toUpperCase()+Z.slice(1);if(An.test(Pn)){if(!xe)return Pn;Pn="auto"}return(!mt.boxSizingReliable()&&Ct||!mt.reliableTrDimensions()&&On(M,"tr")||Pn==="auto"||!parseFloat(Pn)&&_e.css(M,"display",!1,Re)==="inline")&&M.getClientRects().length&&(Ct=_e.css(M,"boxSizing",!1,Re)==="border-box",It=xn in M,It&&(Pn=M[xn])),Pn=parseFloat(Pn)||0,Pn+ns(M,Z,xe||(Ct?"border":"content"),It,Re,Pn)+"px"}_e.extend({cssHooks:{opacity:{get:function(M,Z){if(Z){var xe=Lr(M,"opacity");return xe===""?"1":xe}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(M,Z,xe,Re){if(!(!M||M.nodeType===3||M.nodeType===8||!M.style)){var vt,Ct,It,Pn=Ai(Z),xn=qn.test(Z),Wn=M.style;if(xn||(Z=$i(Pn)),It=_e.cssHooks[Z]||_e.cssHooks[Pn],xe!==void 0){if(Ct=typeof xe,Ct==="string"&&(vt=D.exec(xe))&&vt[1]&&(xe=z(M,Z,vt),Ct="number"),xe==null||xe!==xe)return;Ct==="number"&&!xn&&(xe+=vt&&vt[3]||(_e.cssNumber[Pn]?"":"px")),!mt.clearCloneStyle&&xe===""&&Z.indexOf("background")===0&&(Wn[Z]="inherit"),(!It||!("set"in It)||(xe=It.set(M,xe,Re))!==void 0)&&(xn?Wn.setProperty(Z,xe):Wn[Z]=xe)}else return It&&"get"in It&&(vt=It.get(M,!1,Re))!==void 0?vt:Wn[Z]}},css:function(M,Z,xe,Re){var vt,Ct,It,Pn=Ai(Z),xn=qn.test(Z);return xn||(Z=$i(Pn)),It=_e.cssHooks[Z]||_e.cssHooks[Pn],It&&"get"in It&&(vt=It.get(M,!0,xe)),vt===void 0&&(vt=Lr(M,Z,Re)),vt==="normal"&&Z in Bi&&(vt=Bi[Z]),xe===""||xe?(Ct=parseFloat(vt),xe===!0||isFinite(Ct)?Ct||0:vt):vt}}),_e.each(["height","width"],function(M,Z){_e.cssHooks[Z]={get:function(xe,Re,vt){if(Re)return Qi.test(_e.css(xe,"display"))&&(!xe.getClientRects().length||!xe.getBoundingClientRect().width)?mr(xe,Oi,function(){return As(xe,Z,vt)}):As(xe,Z,vt)},set:function(xe,Re,vt){var Ct,It=cr(xe),Pn=!mt.scrollboxSize()&&It.position==="absolute",xn=Pn||vt,Wn=xn&&_e.css(xe,"boxSizing",!1,It)==="border-box",Cr=vt?ns(xe,Z,vt,Wn,It):0;return Wn&&Pn&&(Cr-=Math.ceil(xe["offset"+Z[0].toUpperCase()+Z.slice(1)]-parseFloat(It[Z])-ns(xe,Z,"border",!1,It)-.5)),Cr&&(Ct=D.exec(Re))&&(Ct[3]||"px")!=="px"&&(xe.style[Z]=Re,Re=_e.css(xe,Z)),ys(xe,Re,Cr)}}}),_e.cssHooks.marginLeft=Ir(mt.reliableMarginLeft,function(M,Z){if(Z)return(parseFloat(Lr(M,"marginLeft"))||M.getBoundingClientRect().left-mr(M,{marginLeft:0},function(){return M.getBoundingClientRect().left}))+"px"}),_e.each({margin:"",padding:"",border:"Width"},function(M,Z){_e.cssHooks[M+Z]={expand:function(xe){for(var Re=0,vt={},Ct=typeof xe=="string"?xe.split(" "):[xe];Re<4;Re++)vt[M+A[Re]+Z]=Ct[Re]||Ct[Re-2]||Ct[0];return vt}},M!=="margin"&&(_e.cssHooks[M+Z].set=ys)}),_e.fn.extend({css:function(M,Z){return ea(this,function(xe,Re,vt){var Ct,It,Pn={},xn=0;if(Array.isArray(Re)){for(Ct=cr(xe),It=Re.length;xn<It;xn++)Pn[Re[xn]]=_e.css(xe,Re[xn],!1,Ct);return Pn}return vt!==void 0?_e.style(xe,Re,vt):_e.css(xe,Re)},M,Z,arguments.length>1)}});function rs(M,Z,xe,Re,vt){return new rs.prototype.init(M,Z,xe,Re,vt)}_e.Tween=rs,rs.prototype={constructor:rs,init:function(M,Z,xe,Re,vt,Ct){this.elem=M,this.prop=xe,this.easing=vt||_e.easing._default,this.options=Z,this.start=this.now=this.cur(),this.end=Re,this.unit=Ct||(_e.cssNumber[xe]?"":"px")},cur:function(){var M=rs.propHooks[this.prop];return M&&M.get?M.get(this):rs.propHooks._default.get(this)},run:function(M){var Z,xe=rs.propHooks[this.prop];return this.options.duration?this.pos=Z=_e.easing[this.easing](M,this.options.duration*M,0,1,this.options.duration):this.pos=Z=M,this.now=(this.end-this.start)*Z+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),xe&&xe.set?xe.set(this):rs.propHooks._default.set(this),this}},rs.prototype.init.prototype=rs.prototype,rs.propHooks={_default:{get:function(M){var Z;return M.elem.nodeType!==1||M.elem[M.prop]!=null&&M.elem.style[M.prop]==null?M.elem[M.prop]:(Z=_e.css(M.elem,M.prop,""),!Z||Z==="auto"?0:Z)},set:function(M){_e.fx.step[M.prop]?_e.fx.step[M.prop](M):M.elem.nodeType===1&&(_e.cssHooks[M.prop]||M.elem.style[$i(M.prop)]!=null)?_e.style(M.elem,M.prop,M.now+M.unit):M.elem[M.prop]=M.now}}},rs.propHooks.scrollTop=rs.propHooks.scrollLeft={set:function(M){M.elem.nodeType&&M.elem.parentNode&&(M.elem[M.prop]=M.now)}},_e.easing={linear:function(M){return M},swing:function(M){return .5-Math.cos(M*Math.PI)/2},_default:"swing"},_e.fx=rs.prototype.init,_e.fx.step={};var Ji,Fs,Is=/^(?:toggle|show|hide)$/,Ws=/queueHooks$/;function Ca(){Fs&&(Ie.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Ca):e.setTimeout(Ca,_e.fx.interval),_e.fx.tick())}function ta(){return e.setTimeout(function(){Ji=void 0}),Ji=Date.now()}function Po(M,Z){var xe,Re=0,vt={height:M};for(Z=Z?1:0;Re<4;Re+=2-Z)xe=A[Re],vt["margin"+xe]=vt["padding"+xe]=M;return Z&&(vt.opacity=vt.width=M),vt}function il(M,Z,xe){for(var Re,vt=(Ya.tweeners[Z]||[]).concat(Ya.tweeners["*"]),Ct=0,It=vt.length;Ct<It;Ct++)if(Re=vt[Ct].call(xe,Z,M))return Re}function Oo(M,Z,xe){var Re,vt,Ct,It,Pn,xn,Wn,Cr,kr="width"in Z||"height"in Z,hr=this,Gr={},_i=M.style,ds=M.nodeType&&V(M),us=ar.get(M,"fxshow");xe.queue||(It=_e._queueHooks(M,"fx"),It.unqueued==null&&(It.unqueued=0,Pn=It.empty.fire,It.empty.fire=function(){It.unqueued||Pn()}),It.unqueued++,hr.always(function(){hr.always(function(){It.unqueued--,_e.queue(M,"fx").length||It.empty.fire()})}));for(Re in Z)if(vt=Z[Re],Is.test(vt)){if(delete Z[Re],Ct=Ct||vt==="toggle",vt===(ds?"hide":"show"))if(vt==="show"&&us&&us[Re]!==void 0)ds=!0;else continue;Gr[Re]=us&&us[Re]||_e.style(M,Re)}if(xn=!_e.isEmptyObject(Z),!(!xn&&_e.isEmptyObject(Gr))){kr&&M.nodeType===1&&(xe.overflow=[_i.overflow,_i.overflowX,_i.overflowY],Wn=us&&us.display,Wn==null&&(Wn=ar.get(M,"display")),Cr=_e.css(M,"display"),Cr==="none"&&(Wn?Cr=Wn:(Y([M],!0),Wn=M.style.display||Wn,Cr=_e.css(M,"display"),Y([M]))),(Cr==="inline"||Cr==="inline-block"&&Wn!=null)&&_e.css(M,"float")==="none"&&(xn||(hr.done(function(){_i.display=Wn}),Wn==null&&(Cr=_i.display,Wn=Cr==="none"?"":Cr)),_i.display="inline-block")),xe.overflow&&(_i.overflow="hidden",hr.always(function(){_i.overflow=xe.overflow[0],_i.overflowX=xe.overflow[1],_i.overflowY=xe.overflow[2]})),xn=!1;for(Re in Gr)xn||(us?"hidden"in us&&(ds=us.hidden):us=ar.access(M,"fxshow",{display:Wn}),Ct&&(us.hidden=!ds),ds&&Y([M],!0),hr.done(function(){ds||Y([M]),ar.remove(M,"fxshow");for(Re in Gr)_e.style(M,Re,Gr[Re])})),xn=il(ds?us[Re]:0,Re,hr),Re in us||(us[Re]=xn.start,ds&&(xn.end=xn.start,xn.start=0))}}function sl(M,Z){var xe,Re,vt,Ct,It;for(xe in M)if(Re=Ai(xe),vt=Z[Re],Ct=M[xe],Array.isArray(Ct)&&(vt=Ct[1],Ct=M[xe]=Ct[0]),xe!==Re&&(M[Re]=Ct,delete M[xe]),It=_e.cssHooks[Re],It&&"expand"in It){Ct=It.expand(Ct),delete M[Re];for(xe in Ct)xe in M||(M[xe]=Ct[xe],Z[xe]=vt)}else Z[Re]=vt}function Ya(M,Z,xe){var Re,vt,Ct=0,It=Ya.prefilters.length,Pn=_e.Deferred().always(function(){delete xn.elem}),xn=function(){if(vt)return!1;for(var kr=Ji||ta(),hr=Math.max(0,Wn.startTime+Wn.duration-kr),Gr=hr/Wn.duration||0,_i=1-Gr,ds=0,us=Wn.tweens.length;ds<us;ds++)Wn.tweens[ds].run(_i);return Pn.notifyWith(M,[Wn,_i,hr]),_i<1&&us?hr:(us||Pn.notifyWith(M,[Wn,1,0]),Pn.resolveWith(M,[Wn]),!1)},Wn=Pn.promise({elem:M,props:_e.extend({},Z),opts:_e.extend(!0,{specialEasing:{},easing:_e.easing._default},xe),originalProperties:Z,originalOptions:xe,startTime:Ji||ta(),duration:xe.duration,tweens:[],createTween:function(kr,hr){var Gr=_e.Tween(M,Wn.opts,kr,hr,Wn.opts.specialEasing[kr]||Wn.opts.easing);return Wn.tweens.push(Gr),Gr},stop:function(kr){var hr=0,Gr=kr?Wn.tweens.length:0;if(vt)return this;for(vt=!0;hr<Gr;hr++)Wn.tweens[hr].run(1);return kr?(Pn.notifyWith(M,[Wn,1,0]),Pn.resolveWith(M,[Wn,kr])):Pn.rejectWith(M,[Wn,kr]),this}}),Cr=Wn.props;for(sl(Cr,Wn.opts.specialEasing);Ct<It;Ct++)if(Re=Ya.prefilters[Ct].call(Wn,M,Cr,Wn.opts),Re)return nt(Re.stop)&&(_e._queueHooks(Wn.elem,Wn.opts.queue).stop=Re.stop.bind(Re)),Re;return _e.map(Cr,il,Wn),nt(Wn.opts.start)&&Wn.opts.start.call(M,Wn),Wn.progress(Wn.opts.progress).done(Wn.opts.done,Wn.opts.complete).fail(Wn.opts.fail).always(Wn.opts.always),_e.fx.timer(_e.extend(xn,{elem:M,anim:Wn,queue:Wn.opts.queue})),Wn}_e.Animation=_e.extend(Ya,{tweeners:{"*":[function(M,Z){var xe=this.createTween(M,Z);return z(xe.elem,M,D.exec(Z),xe),xe}]},tweener:function(M,Z){nt(M)?(Z=M,M=["*"]):M=M.match(Fi);for(var xe,Re=0,vt=M.length;Re<vt;Re++)xe=M[Re],Ya.tweeners[xe]=Ya.tweeners[xe]||[],Ya.tweeners[xe].unshift(Z)},prefilters:[Oo],prefilter:function(M,Z){Z?Ya.prefilters.unshift(M):Ya.prefilters.push(M)}}),_e.speed=function(M,Z,xe){var Re=M&&typeof M=="object"?_e.extend({},M):{complete:xe||!xe&&Z||nt(M)&&M,duration:M,easing:xe&&Z||Z&&!nt(Z)&&Z};return _e.fx.off?Re.duration=0:typeof Re.duration!="number"&&(Re.duration in _e.fx.speeds?Re.duration=_e.fx.speeds[Re.duration]:Re.duration=_e.fx.speeds._default),(Re.queue==null||Re.queue===!0)&&(Re.queue="fx"),Re.old=Re.complete,Re.complete=function(){nt(Re.old)&&Re.old.call(this),Re.queue&&_e.dequeue(this,Re.queue)},Re},_e.fn.extend({fadeTo:function(M,Z,xe,Re){return this.filter(V).css("opacity",0).show().end().animate({opacity:Z},M,xe,Re)},animate:function(M,Z,xe,Re){var vt=_e.isEmptyObject(M),Ct=_e.speed(Z,xe,Re),It=function(){var Pn=Ya(this,_e.extend({},M),Ct);(vt||ar.get(this,"finish"))&&Pn.stop(!0)};return It.finish=It,vt||Ct.queue===!1?this.each(It):this.queue(Ct.queue,It)},stop:function(M,Z,xe){var Re=function(vt){var Ct=vt.stop;delete vt.stop,Ct(xe)};return typeof M!="string"&&(xe=Z,Z=M,M=void 0),Z&&this.queue(M||"fx",[]),this.each(function(){var vt=!0,Ct=M!=null&&M+"queueHooks",It=_e.timers,Pn=ar.get(this);if(Ct)Pn[Ct]&&Pn[Ct].stop&&Re(Pn[Ct]);else for(Ct in Pn)Pn[Ct]&&Pn[Ct].stop&&Ws.test(Ct)&&Re(Pn[Ct]);for(Ct=It.length;Ct--;)It[Ct].elem===this&&(M==null||It[Ct].queue===M)&&(It[Ct].anim.stop(xe),vt=!1,It.splice(Ct,1));(vt||!xe)&&_e.dequeue(this,M)})},finish:function(M){return M!==!1&&(M=M||"fx"),this.each(function(){var Z,xe=ar.get(this),Re=xe[M+"queue"],vt=xe[M+"queueHooks"],Ct=_e.timers,It=Re?Re.length:0;for(xe.finish=!0,_e.queue(this,M,[]),vt&&vt.stop&&vt.stop.call(this,!0),Z=Ct.length;Z--;)Ct[Z].elem===this&&Ct[Z].queue===M&&(Ct[Z].anim.stop(!0),Ct.splice(Z,1));for(Z=0;Z<It;Z++)Re[Z]&&Re[Z].finish&&Re[Z].finish.call(this);delete xe.finish})}}),_e.each(["toggle","show","hide"],function(M,Z){var xe=_e.fn[Z];_e.fn[Z]=function(Re,vt,Ct){return Re==null||typeof Re=="boolean"?xe.apply(this,arguments):this.animate(Po(Z,!0),Re,vt,Ct)}}),_e.each({slideDown:Po("show"),slideUp:Po("hide"),slideToggle:Po("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(M,Z){_e.fn[M]=function(xe,Re,vt){return this.animate(Z,xe,Re,vt)}}),_e.timers=[],_e.fx.tick=function(){var M,Z=0,xe=_e.timers;for(Ji=Date.now();Z<xe.length;Z++)M=xe[Z],!M()&&xe[Z]===M&&xe.splice(Z--,1);xe.length||_e.fx.stop(),Ji=void 0},_e.fx.timer=function(M){_e.timers.push(M),_e.fx.start()},_e.fx.interval=13,_e.fx.start=function(){Fs||(Fs=!0,Ca())},_e.fx.stop=function(){Fs=null},_e.fx.speeds={slow:600,fast:200,_default:400},_e.fn.delay=function(M,Z){return M=_e.fx&&_e.fx.speeds[M]||M,Z=Z||"fx",this.queue(Z,function(xe,Re){var vt=e.setTimeout(xe,M);Re.stop=function(){e.clearTimeout(vt)}})},function(){var M=Ie.createElement("input"),Z=Ie.createElement("select"),xe=Z.appendChild(Ie.createElement("option"));M.type="checkbox",mt.checkOn=M.value!=="",mt.optSelected=xe.selected,M=Ie.createElement("input"),M.value="t",M.type="radio",mt.radioValue=M.value==="t"}();var al,Vi=_e.expr.attrHandle;_e.fn.extend({attr:function(M,Z){return ea(this,_e.attr,M,Z,arguments.length>1)},removeAttr:function(M){return this.each(function(){_e.removeAttr(this,M)})}}),_e.extend({attr:function(M,Z,xe){var Re,vt,Ct=M.nodeType;if(!(Ct===3||Ct===8||Ct===2)){if(typeof M.getAttribute>"u")return _e.prop(M,Z,xe);if((Ct!==1||!_e.isXMLDoc(M))&&(vt=_e.attrHooks[Z.toLowerCase()]||(_e.expr.match.bool.test(Z)?al:void 0)),xe!==void 0){if(xe===null){_e.removeAttr(M,Z);return}return vt&&"set"in vt&&(Re=vt.set(M,xe,Z))!==void 0?Re:(M.setAttribute(Z,xe+""),xe)}return vt&&"get"in vt&&(Re=vt.get(M,Z))!==null?Re:(Re=_e.find.attr(M,Z),Re??void 0)}},attrHooks:{type:{set:function(M,Z){if(!mt.radioValue&&Z==="radio"&&On(M,"input")){var xe=M.value;return M.setAttribute("type",Z),xe&&(M.value=xe),Z}}}},removeAttr:function(M,Z){var xe,Re=0,vt=Z&&Z.match(Fi);if(vt&&M.nodeType===1)for(;xe=vt[Re++];)M.removeAttribute(xe)}}),al={set:function(M,Z,xe){return Z===!1?_e.removeAttr(M,xe):M.setAttribute(xe,xe),xe}},_e.each(_e.expr.match.bool.source.match(/\w+/g),function(M,Z){var xe=Vi[Z]||_e.find.attr;Vi[Z]=function(Re,vt,Ct){var It,Pn,xn=vt.toLowerCase();return Ct||(Pn=Vi[xn],Vi[xn]=It,It=xe(Re,vt,Ct)!=null?xn:null,Vi[xn]=Pn),It}});var Ll=/^(?:input|select|textarea|button)$/i,po=/^(?:a|area)$/i;_e.fn.extend({prop:function(M,Z){return ea(this,_e.prop,M,Z,arguments.length>1)},removeProp:function(M){return this.each(function(){delete this[_e.propFix[M]||M]})}}),_e.extend({prop:function(M,Z,xe){var Re,vt,Ct=M.nodeType;if(!(Ct===3||Ct===8||Ct===2))return(Ct!==1||!_e.isXMLDoc(M))&&(Z=_e.propFix[Z]||Z,vt=_e.propHooks[Z]),xe!==void 0?vt&&"set"in vt&&(Re=vt.set(M,xe,Z))!==void 0?Re:M[Z]=xe:vt&&"get"in vt&&(Re=vt.get(M,Z))!==null?Re:M[Z]},propHooks:{tabIndex:{get:function(M){var Z=_e.find.attr(M,"tabindex");return Z?parseInt(Z,10):Ll.test(M.nodeName)||po.test(M.nodeName)&&M.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),mt.optSelected||(_e.propHooks.selected={get:function(M){var Z=M.parentNode;return Z&&Z.parentNode&&Z.parentNode.selectedIndex,null},set:function(M){var Z=M.parentNode;Z&&(Z.selectedIndex,Z.parentNode&&Z.parentNode.selectedIndex)}}),_e.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_e.propFix[this.toLowerCase()]=this});function Za(M){var Z=M.match(Fi)||[];return Z.join(" ")}function ga(M){return M.getAttribute&&M.getAttribute("class")||""}function $a(M){return Array.isArray(M)?M:typeof M=="string"?M.match(Fi)||[]:[]}_e.fn.extend({addClass:function(M){var Z,xe,Re,vt,Ct,It;return nt(M)?this.each(function(Pn){_e(this).addClass(M.call(this,Pn,ga(this)))}):(Z=$a(M),Z.length?this.each(function(){if(Re=ga(this),xe=this.nodeType===1&&" "+Za(Re)+" ",xe){for(Ct=0;Ct<Z.length;Ct++)vt=Z[Ct],xe.indexOf(" "+vt+" ")<0&&(xe+=vt+" ");It=Za(xe),Re!==It&&this.setAttribute("class",It)}}):this)},removeClass:function(M){var Z,xe,Re,vt,Ct,It;return nt(M)?this.each(function(Pn){_e(this).removeClass(M.call(this,Pn,ga(this)))}):arguments.length?(Z=$a(M),Z.length?this.each(function(){if(Re=ga(this),xe=this.nodeType===1&&" "+Za(Re)+" ",xe){for(Ct=0;Ct<Z.length;Ct++)for(vt=Z[Ct];xe.indexOf(" "+vt+" ")>-1;)xe=xe.replace(" "+vt+" "," ");It=Za(xe),Re!==It&&this.setAttribute("class",It)}}):this):this.attr("class","")},toggleClass:function(M,Z){var xe,Re,vt,Ct,It=typeof M,Pn=It==="string"||Array.isArray(M);return nt(M)?this.each(function(xn){_e(this).toggleClass(M.call(this,xn,ga(this),Z),Z)}):typeof Z=="boolean"&&Pn?Z?this.addClass(M):this.removeClass(M):(xe=$a(M),this.each(function(){if(Pn)for(Ct=_e(this),vt=0;vt<xe.length;vt++)Re=xe[vt],Ct.hasClass(Re)?Ct.removeClass(Re):Ct.addClass(Re);else(M===void 0||It==="boolean")&&(Re=ga(this),Re&&ar.set(this,"__className__",Re),this.setAttribute&&this.setAttribute("class",Re||M===!1?"":ar.get(this,"__className__")||""))}))},hasClass:function(M){var Z,xe,Re=0;for(Z=" "+M+" ";xe=this[Re++];)if(xe.nodeType===1&&(" "+Za(ga(xe))+" ").indexOf(Z)>-1)return!0;return!1}});var oa=/\r/g;_e.fn.extend({val:function(M){var Z,xe,Re,vt=this[0];return arguments.length?(Re=nt(M),this.each(function(Ct){var It;this.nodeType===1&&(Re?It=M.call(this,Ct,_e(this).val()):It=M,It==null?It="":typeof It=="number"?It+="":Array.isArray(It)&&(It=_e.map(It,function(Pn){return Pn==null?"":Pn+""})),Z=_e.valHooks[this.type]||_e.valHooks[this.nodeName.toLowerCase()],(!Z||!("set"in Z)||Z.set(this,It,"value")===void 0)&&(this.value=It))})):vt?(Z=_e.valHooks[vt.type]||_e.valHooks[vt.nodeName.toLowerCase()],Z&&"get"in Z&&(xe=Z.get(vt,"value"))!==void 0?xe:(xe=vt.value,typeof xe=="string"?xe.replace(oa,""):xe??"")):void 0}}),_e.extend({valHooks:{option:{get:function(M){var Z=_e.find.attr(M,"value");return Z??Za(_e.text(M))}},select:{get:function(M){var Z,xe,Re,vt=M.options,Ct=M.selectedIndex,It=M.type==="select-one",Pn=It?null:[],xn=It?Ct+1:vt.length;for(Ct<0?Re=xn:Re=It?Ct:0;Re<xn;Re++)if(xe=vt[Re],(xe.selected||Re===Ct)&&!xe.disabled&&(!xe.parentNode.disabled||!On(xe.parentNode,"optgroup"))){if(Z=_e(xe).val(),It)return Z;Pn.push(Z)}return Pn},set:function(M,Z){for(var xe,Re,vt=M.options,Ct=_e.makeArray(Z),It=vt.length;It--;)Re=vt[It],(Re.selected=_e.inArray(_e.valHooks.option.get(Re),Ct)>-1)&&(xe=!0);return xe||(M.selectedIndex=-1),Ct}}}}),_e.each(["radio","checkbox"],function(){_e.valHooks[this]={set:function(M,Z){if(Array.isArray(Z))return M.checked=_e.inArray(_e(M).val(),Z)>-1}},mt.checkOn||(_e.valHooks[this].get=function(M){return M.getAttribute("value")===null?"on":M.value})});var Zs=e.location,_={guid:Date.now()},he=/\?/;_e.parseXML=function(M){var Z,xe;if(!M||typeof M!="string")return null;try{Z=new e.DOMParser().parseFromString(M,"text/xml")}catch{}return xe=Z&&Z.getElementsByTagName("parsererror")[0],(!Z||xe)&&_e.error("Invalid XML: "+(xe?_e.map(xe.childNodes,function(Re){return Re.textContent}).join(`
`):M)),Z};var gt=/^(?:focusinfocus|focusoutblur)$/,jt=function(M){M.stopPropagation()};_e.extend(_e.event,{trigger:function(M,Z,xe,Re){var vt,Ct,It,Pn,xn,Wn,Cr,kr,hr=[xe||Ie],Gr=Ae.call(M,"type")?M.type:M,_i=Ae.call(M,"namespace")?M.namespace.split("."):[];if(Ct=kr=It=xe=xe||Ie,!(xe.nodeType===3||xe.nodeType===8)&&!gt.test(Gr+_e.event.triggered)&&(Gr.indexOf(".")>-1&&(_i=Gr.split("."),Gr=_i.shift(),_i.sort()),xn=Gr.indexOf(":")<0&&"on"+Gr,M=M[_e.expando]?M:new _e.Event(Gr,typeof M=="object"&&M),M.isTrigger=Re?2:3,M.namespace=_i.join("."),M.rnamespace=M.namespace?new RegExp("(^|\\.)"+_i.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,M.result=void 0,M.target||(M.target=xe),Z=Z==null?[M]:_e.makeArray(Z,[M]),Cr=_e.event.special[Gr]||{},!(!Re&&Cr.trigger&&Cr.trigger.apply(xe,Z)===!1))){if(!Re&&!Cr.noBubble&&!tn(xe)){for(Pn=Cr.delegateType||Gr,gt.test(Pn+Gr)||(Ct=Ct.parentNode);Ct;Ct=Ct.parentNode)hr.push(Ct),It=Ct;It===(xe.ownerDocument||Ie)&&hr.push(It.defaultView||It.parentWindow||e)}for(vt=0;(Ct=hr[vt++])&&!M.isPropagationStopped();)kr=Ct,M.type=vt>1?Pn:Cr.bindType||Gr,Wn=(ar.get(Ct,"events")||Object.create(null))[M.type]&&ar.get(Ct,"handle"),Wn&&Wn.apply(Ct,Z),Wn=xn&&Ct[xn],Wn&&Wn.apply&&ui(Ct)&&(M.result=Wn.apply(Ct,Z),M.result===!1&&M.preventDefault());return M.type=Gr,!Re&&!M.isDefaultPrevented()&&(!Cr._default||Cr._default.apply(hr.pop(),Z)===!1)&&ui(xe)&&xn&&nt(xe[Gr])&&!tn(xe)&&(It=xe[xn],It&&(xe[xn]=null),_e.event.triggered=Gr,M.isPropagationStopped()&&kr.addEventListener(Gr,jt),xe[Gr](),M.isPropagationStopped()&&kr.removeEventListener(Gr,jt),_e.event.triggered=void 0,It&&(xe[xn]=It)),M.result}},simulate:function(M,Z,xe){var Re=_e.extend(new _e.Event,xe,{type:M,isSimulated:!0});_e.event.trigger(Re,null,Z)}}),_e.fn.extend({trigger:function(M,Z){return this.each(function(){_e.event.trigger(M,Z,this)})},triggerHandler:function(M,Z){var xe=this[0];if(xe)return _e.event.trigger(M,Z,xe,!0)}});var wn=/\[\]$/,nr=/\r?\n/g,l=/^(?:submit|button|image|reset|file)$/i,f=/^(?:input|select|textarea|keygen)/i;function x(M,Z,xe,Re){var vt;if(Array.isArray(Z))_e.each(Z,function(Ct,It){xe||wn.test(M)?Re(M,It):x(M+"["+(typeof It=="object"&&It!=null?Ct:"")+"]",It,xe,Re)});else if(!xe&&an(Z)==="object")for(vt in Z)x(M+"["+vt+"]",Z[vt],xe,Re);else Re(M,Z)}_e.param=function(M,Z){var xe,Re=[],vt=function(Ct,It){var Pn=nt(It)?It():It;Re[Re.length]=encodeURIComponent(Ct)+"="+encodeURIComponent(Pn??"")};if(M==null)return"";if(Array.isArray(M)||M.jquery&&!_e.isPlainObject(M))_e.each(M,function(){vt(this.name,this.value)});else for(xe in M)x(xe,M[xe],Z,vt);return Re.join("&")},_e.fn.extend({serialize:function(){return _e.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var M=_e.prop(this,"elements");return M?_e.makeArray(M):this}).filter(function(){var M=this.type;return this.name&&!_e(this).is(":disabled")&&f.test(this.nodeName)&&!l.test(M)&&(this.checked||!ie.test(M))}).map(function(M,Z){var xe=_e(this).val();return xe==null?null:Array.isArray(xe)?_e.map(xe,function(Re){return{name:Z.name,value:Re.replace(nr,`\r
`)}}):{name:Z.name,value:xe.replace(nr,`\r
`)}}).get()}});var N=/%20/g,ge=/#.*$/,Oe=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/mg,Sn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Rn=/^(?:GET|HEAD)$/,dr=/^\/\//,Dr={},Pr={},Ur="*/".concat("*"),pi=Ie.createElement("a");pi.href=Zs.href;function mi(M){return function(Z,xe){typeof Z!="string"&&(xe=Z,Z="*");var Re,vt=0,Ct=Z.toLowerCase().match(Fi)||[];if(nt(xe))for(;Re=Ct[vt++];)Re[0]==="+"?(Re=Re.slice(1)||"*",(M[Re]=M[Re]||[]).unshift(xe)):(M[Re]=M[Re]||[]).push(xe)}}function gi(M,Z,xe,Re){var vt={},Ct=M===Pr;function It(Pn){var xn;return vt[Pn]=!0,_e.each(M[Pn]||[],function(Wn,Cr){var kr=Cr(Z,xe,Re);if(typeof kr=="string"&&!Ct&&!vt[kr])return Z.dataTypes.unshift(kr),It(kr),!1;if(Ct)return!(xn=kr)}),xn}return It(Z.dataTypes[0])||!vt["*"]&&It("*")}function xa(M,Z){var xe,Re,vt=_e.ajaxSettings.flatOptions||{};for(xe in Z)Z[xe]!==void 0&&((vt[xe]?M:Re||(Re={}))[xe]=Z[xe]);return Re&&_e.extend(!0,M,Re),M}function Xn(M,Z,xe){for(var Re,vt,Ct,It,Pn=M.contents,xn=M.dataTypes;xn[0]==="*";)xn.shift(),Re===void 0&&(Re=M.mimeType||Z.getResponseHeader("Content-Type"));if(Re){for(vt in Pn)if(Pn[vt]&&Pn[vt].test(Re)){xn.unshift(vt);break}}if(xn[0]in xe)Ct=xn[0];else{for(vt in xe){if(!xn[0]||M.converters[vt+" "+xn[0]]){Ct=vt;break}It||(It=vt)}Ct=Ct||It}if(Ct)return Ct!==xn[0]&&xn.unshift(Ct),xe[Ct]}function Un(M,Z,xe,Re){var vt,Ct,It,Pn,xn,Wn={},Cr=M.dataTypes.slice();if(Cr[1])for(It in M.converters)Wn[It.toLowerCase()]=M.converters[It];for(Ct=Cr.shift();Ct;)if(M.responseFields[Ct]&&(xe[M.responseFields[Ct]]=Z),!xn&&Re&&M.dataFilter&&(Z=M.dataFilter(Z,M.dataType)),xn=Ct,Ct=Cr.shift(),Ct){if(Ct==="*")Ct=xn;else if(xn!=="*"&&xn!==Ct){if(It=Wn[xn+" "+Ct]||Wn["* "+Ct],!It){for(vt in Wn)if(Pn=vt.split(" "),Pn[1]===Ct&&(It=Wn[xn+" "+Pn[0]]||Wn["* "+Pn[0]],It)){It===!0?It=Wn[vt]:Wn[vt]!==!0&&(Ct=Pn[0],Cr.unshift(Pn[1]));break}}if(It!==!0)if(It&&M.throws)Z=It(Z);else try{Z=It(Z)}catch(kr){return{state:"parsererror",error:It?kr:"No conversion from "+xn+" to "+Ct}}}}return{state:"success",data:Z}}_e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Zs.href,type:"GET",isLocal:Sn.test(Zs.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ur,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(M,Z){return Z?xa(xa(M,_e.ajaxSettings),Z):xa(_e.ajaxSettings,M)},ajaxPrefilter:mi(Dr),ajaxTransport:mi(Pr),ajax:function(M,Z){typeof M=="object"&&(Z=M,M=void 0),Z=Z||{};var xe,Re,vt,Ct,It,Pn,xn,Wn,Cr,kr,hr=_e.ajaxSetup({},Z),Gr=hr.context||hr,_i=hr.context&&(Gr.nodeType||Gr.jquery)?_e(Gr):_e.event,ds=_e.Deferred(),us=_e.Callbacks("once memory"),So=hr.statusCode||{},Ka={},za={},is="canceled",Li={readyState:0,getResponseHeader:function(Ms){var ps;if(xn){if(!Ct)for(Ct={};ps=Ht.exec(vt);)Ct[ps[1].toLowerCase()+" "]=(Ct[ps[1].toLowerCase()+" "]||[]).concat(ps[2]);ps=Ct[Ms.toLowerCase()+" "]}return ps==null?null:ps.join(", ")},getAllResponseHeaders:function(){return xn?vt:null},setRequestHeader:function(Ms,ps){return xn==null&&(Ms=za[Ms.toLowerCase()]=za[Ms.toLowerCase()]||Ms,Ka[Ms]=ps),this},overrideMimeType:function(Ms){return xn==null&&(hr.mimeType=Ms),this},statusCode:function(Ms){var ps;if(Ms)if(xn)Li.always(Ms[Li.status]);else for(ps in Ms)So[ps]=[So[ps],Ms[ps]];return this},abort:function(Ms){var ps=Ms||is;return xe&&xe.abort(ps),ko(0,ps),this}};if(ds.promise(Li),hr.url=((M||hr.url||Zs.href)+"").replace(dr,Zs.protocol+"//"),hr.type=Z.method||Z.type||hr.method||hr.type,hr.dataTypes=(hr.dataType||"*").toLowerCase().match(Fi)||[""],hr.crossDomain==null){Pn=Ie.createElement("a");try{Pn.href=hr.url,Pn.href=Pn.href,hr.crossDomain=pi.protocol+"//"+pi.host!=Pn.protocol+"//"+Pn.host}catch{hr.crossDomain=!0}}if(hr.data&&hr.processData&&typeof hr.data!="string"&&(hr.data=_e.param(hr.data,hr.traditional)),gi(Dr,hr,Z,Li),xn)return Li;Wn=_e.event&&hr.global,Wn&&_e.active++===0&&_e.event.trigger("ajaxStart"),hr.type=hr.type.toUpperCase(),hr.hasContent=!Rn.test(hr.type),Re=hr.url.replace(ge,""),hr.hasContent?hr.data&&hr.processData&&(hr.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(hr.data=hr.data.replace(N,"+")):(kr=hr.url.slice(Re.length),hr.data&&(hr.processData||typeof hr.data=="string")&&(Re+=(he.test(Re)?"&":"?")+hr.data,delete hr.data),hr.cache===!1&&(Re=Re.replace(Oe,"$1"),kr=(he.test(Re)?"&":"?")+"_="+_.guid+++kr),hr.url=Re+kr),hr.ifModified&&(_e.lastModified[Re]&&Li.setRequestHeader("If-Modified-Since",_e.lastModified[Re]),_e.etag[Re]&&Li.setRequestHeader("If-None-Match",_e.etag[Re])),(hr.data&&hr.hasContent&&hr.contentType!==!1||Z.contentType)&&Li.setRequestHeader("Content-Type",hr.contentType),Li.setRequestHeader("Accept",hr.dataTypes[0]&&hr.accepts[hr.dataTypes[0]]?hr.accepts[hr.dataTypes[0]]+(hr.dataTypes[0]!=="*"?", "+Ur+"; q=0.01":""):hr.accepts["*"]);for(Cr in hr.headers)Li.setRequestHeader(Cr,hr.headers[Cr]);if(hr.beforeSend&&(hr.beforeSend.call(Gr,Li,hr)===!1||xn))return Li.abort();if(is="abort",us.add(hr.complete),Li.done(hr.success),Li.fail(hr.error),xe=gi(Pr,hr,Z,Li),!xe)ko(-1,"No Transport");else{if(Li.readyState=1,Wn&&_i.trigger("ajaxSend",[Li,hr]),xn)return Li;hr.async&&hr.timeout>0&&(It=e.setTimeout(function(){Li.abort("timeout")},hr.timeout));try{xn=!1,xe.send(Ka,ko)}catch(Ms){if(xn)throw Ms;ko(-1,Ms)}}function ko(Ms,ps,ri,Yl){var es,qi,Xo,ii,_l,Io=ps;xn||(xn=!0,It&&e.clearTimeout(It),xe=void 0,vt=Yl||"",Li.readyState=Ms>0?4:0,es=Ms>=200&&Ms<300||Ms===304,ri&&(ii=Xn(hr,Li,ri)),!es&&_e.inArray("script",hr.dataTypes)>-1&&_e.inArray("json",hr.dataTypes)<0&&(hr.converters["text script"]=function(){}),ii=Un(hr,ii,Li,es),es?(hr.ifModified&&(_l=Li.getResponseHeader("Last-Modified"),_l&&(_e.lastModified[Re]=_l),_l=Li.getResponseHeader("etag"),_l&&(_e.etag[Re]=_l)),Ms===204||hr.type==="HEAD"?Io="nocontent":Ms===304?Io="notmodified":(Io=ii.state,qi=ii.data,Xo=ii.error,es=!Xo)):(Xo=Io,(Ms||!Io)&&(Io="error",Ms<0&&(Ms=0))),Li.status=Ms,Li.statusText=(ps||Io)+"",es?ds.resolveWith(Gr,[qi,Io,Li]):ds.rejectWith(Gr,[Li,Io,Xo]),Li.statusCode(So),So=void 0,Wn&&_i.trigger(es?"ajaxSuccess":"ajaxError",[Li,hr,es?qi:Xo]),us.fireWith(Gr,[Li,Io]),Wn&&(_i.trigger("ajaxComplete",[Li,hr]),--_e.active||_e.event.trigger("ajaxStop")))}return Li},getJSON:function(M,Z,xe){return _e.get(M,Z,xe,"json")},getScript:function(M,Z){return _e.get(M,void 0,Z,"script")}}),_e.each(["get","post"],function(M,Z){_e[Z]=function(xe,Re,vt,Ct){return nt(Re)&&(Ct=Ct||vt,vt=Re,Re=void 0),_e.ajax(_e.extend({url:xe,type:Z,dataType:Ct,data:Re,success:vt},_e.isPlainObject(xe)&&xe))}}),_e.ajaxPrefilter(function(M){var Z;for(Z in M.headers)Z.toLowerCase()==="content-type"&&(M.contentType=M.headers[Z]||"")}),_e._evalUrl=function(M,Z,xe){return _e.ajax({url:M,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(Re){_e.globalEval(Re,Z,xe)}})},_e.fn.extend({wrapAll:function(M){var Z;return this[0]&&(nt(M)&&(M=M.call(this[0])),Z=_e(M,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&Z.insertBefore(this[0]),Z.map(function(){for(var xe=this;xe.firstElementChild;)xe=xe.firstElementChild;return xe}).append(this)),this},wrapInner:function(M){return nt(M)?this.each(function(Z){_e(this).wrapInner(M.call(this,Z))}):this.each(function(){var Z=_e(this),xe=Z.contents();xe.length?xe.wrapAll(M):Z.append(M)})},wrap:function(M){var Z=nt(M);return this.each(function(xe){_e(this).wrapAll(Z?M.call(this,xe):M)})},unwrap:function(M){return this.parent(M).not("body").each(function(){_e(this).replaceWith(this.childNodes)}),this}}),_e.expr.pseudos.hidden=function(M){return!_e.expr.pseudos.visible(M)},_e.expr.pseudos.visible=function(M){return!!(M.offsetWidth||M.offsetHeight||M.getClientRects().length)},_e.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var rr={0:200,1223:204},Nr=_e.ajaxSettings.xhr();mt.cors=!!Nr&&"withCredentials"in Nr,mt.ajax=Nr=!!Nr,_e.ajaxTransport(function(M){var Z,xe;if(mt.cors||Nr&&!M.crossDomain)return{send:function(Re,vt){var Ct,It=M.xhr();if(It.open(M.type,M.url,M.async,M.username,M.password),M.xhrFields)for(Ct in M.xhrFields)It[Ct]=M.xhrFields[Ct];M.mimeType&&It.overrideMimeType&&It.overrideMimeType(M.mimeType),!M.crossDomain&&!Re["X-Requested-With"]&&(Re["X-Requested-With"]="XMLHttpRequest");for(Ct in Re)It.setRequestHeader(Ct,Re[Ct]);Z=function(Pn){return function(){Z&&(Z=xe=It.onload=It.onerror=It.onabort=It.ontimeout=It.onreadystatechange=null,Pn==="abort"?It.abort():Pn==="error"?typeof It.status!="number"?vt(0,"error"):vt(It.status,It.statusText):vt(rr[It.status]||It.status,It.statusText,(It.responseType||"text")!=="text"||typeof It.responseText!="string"?{binary:It.response}:{text:It.responseText},It.getAllResponseHeaders()))}},It.onload=Z(),xe=It.onerror=It.ontimeout=Z("error"),It.onabort!==void 0?It.onabort=xe:It.onreadystatechange=function(){It.readyState===4&&e.setTimeout(function(){Z&&xe()})},Z=Z("abort");try{It.send(M.hasContent&&M.data||null)}catch(Pn){if(Z)throw Pn}},abort:function(){Z&&Z()}}}),_e.ajaxPrefilter(function(M){M.crossDomain&&(M.contents.script=!1)}),_e.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(M){return _e.globalEval(M),M}}}),_e.ajaxPrefilter("script",function(M){M.cache===void 0&&(M.cache=!1),M.crossDomain&&(M.type="GET")}),_e.ajaxTransport("script",function(M){if(M.crossDomain||M.scriptAttrs){var Z,xe;return{send:function(Re,vt){Z=_e("<script>").attr(M.scriptAttrs||{}).prop({charset:M.scriptCharset,src:M.url}).on("load error",xe=function(Ct){Z.remove(),xe=null,Ct&&vt(Ct.type==="error"?404:200,Ct.type)}),Ie.head.appendChild(Z[0])},abort:function(){xe&&xe()}}}});var vi=[],xi=/(=)\?(?=&|$)|\?\?/;_e.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var M=vi.pop()||_e.expando+"_"+_.guid++;return this[M]=!0,M}}),_e.ajaxPrefilter("json jsonp",function(M,Z,xe){var Re,vt,Ct,It=M.jsonp!==!1&&(xi.test(M.url)?"url":typeof M.data=="string"&&(M.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&xi.test(M.data)&&"data");if(It||M.dataTypes[0]==="jsonp")return Re=M.jsonpCallback=nt(M.jsonpCallback)?M.jsonpCallback():M.jsonpCallback,It?M[It]=M[It].replace(xi,"$1"+Re):M.jsonp!==!1&&(M.url+=(he.test(M.url)?"&":"?")+M.jsonp+"="+Re),M.converters["script json"]=function(){return Ct||_e.error(Re+" was not called"),Ct[0]},M.dataTypes[0]="json",vt=e[Re],e[Re]=function(){Ct=arguments},xe.always(function(){vt===void 0?_e(e).removeProp(Re):e[Re]=vt,M[Re]&&(M.jsonpCallback=Z.jsonpCallback,vi.push(Re)),Ct&&nt(vt)&&vt(Ct[0]),Ct=vt=void 0}),"script"}),mt.createHTMLDocument=function(){var M=Ie.implementation.createHTMLDocument("").body;return M.innerHTML="<form></form><form></form>",M.childNodes.length===2}(),_e.parseHTML=function(M,Z,xe){if(typeof M!="string")return[];typeof Z=="boolean"&&(xe=Z,Z=!1);var Re,vt,Ct;return Z||(mt.createHTMLDocument?(Z=Ie.implementation.createHTMLDocument(""),Re=Z.createElement("base"),Re.href=Ie.location.href,Z.head.appendChild(Re)):Z=Ie),vt=Hs.exec(M),Ct=!xe&&[],vt?[Z.createElement(vt[1])]:(vt=oe([M],Z,Ct),Ct&&Ct.length&&_e(Ct).remove(),_e.merge([],vt.childNodes))},_e.fn.load=function(M,Z,xe){var Re,vt,Ct,It=this,Pn=M.indexOf(" ");return Pn>-1&&(Re=Za(M.slice(Pn)),M=M.slice(0,Pn)),nt(Z)?(xe=Z,Z=void 0):Z&&typeof Z=="object"&&(vt="POST"),It.length>0&&_e.ajax({url:M,type:vt||"GET",dataType:"html",data:Z}).done(function(xn){Ct=arguments,It.html(Re?_e("<div>").append(_e.parseHTML(xn)).find(Re):xn)}).always(xe&&function(xn,Wn){It.each(function(){xe.apply(this,Ct||[xn.responseText,Wn,xn])})}),this},_e.expr.pseudos.animated=function(M){return _e.grep(_e.timers,function(Z){return M===Z.elem}).length},_e.offset={setOffset:function(M,Z,xe){var Re,vt,Ct,It,Pn,xn,Wn,Cr=_e.css(M,"position"),kr=_e(M),hr={};Cr==="static"&&(M.style.position="relative"),Pn=kr.offset(),Ct=_e.css(M,"top"),xn=_e.css(M,"left"),Wn=(Cr==="absolute"||Cr==="fixed")&&(Ct+xn).indexOf("auto")>-1,Wn?(Re=kr.position(),It=Re.top,vt=Re.left):(It=parseFloat(Ct)||0,vt=parseFloat(xn)||0),nt(Z)&&(Z=Z.call(M,xe,_e.extend({},Pn))),Z.top!=null&&(hr.top=Z.top-Pn.top+It),Z.left!=null&&(hr.left=Z.left-Pn.left+vt),"using"in Z?Z.using.call(M,hr):kr.css(hr)}},_e.fn.extend({offset:function(M){if(arguments.length)return M===void 0?this:this.each(function(vt){_e.offset.setOffset(this,M,vt)});var Z,xe,Re=this[0];if(Re)return Re.getClientRects().length?(Z=Re.getBoundingClientRect(),xe=Re.ownerDocument.defaultView,{top:Z.top+xe.pageYOffset,left:Z.left+xe.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var M,Z,xe,Re=this[0],vt={top:0,left:0};if(_e.css(Re,"position")==="fixed")Z=Re.getBoundingClientRect();else{for(Z=this.offset(),xe=Re.ownerDocument,M=Re.offsetParent||xe.documentElement;M&&(M===xe.body||M===xe.documentElement)&&_e.css(M,"position")==="static";)M=M.parentNode;M&&M!==Re&&M.nodeType===1&&(vt=_e(M).offset(),vt.top+=_e.css(M,"borderTopWidth",!0),vt.left+=_e.css(M,"borderLeftWidth",!0))}return{top:Z.top-vt.top-_e.css(Re,"marginTop",!0),left:Z.left-vt.left-_e.css(Re,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var M=this.offsetParent;M&&_e.css(M,"position")==="static";)M=M.offsetParent;return M||T})}}),_e.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(M,Z){var xe=Z==="pageYOffset";_e.fn[M]=function(Re){return ea(this,function(vt,Ct,It){var Pn;if(tn(vt)?Pn=vt:vt.nodeType===9&&(Pn=vt.defaultView),It===void 0)return Pn?Pn[Z]:vt[Ct];Pn?Pn.scrollTo(xe?Pn.pageXOffset:It,xe?It:Pn.pageYOffset):vt[Ct]=It},M,Re,arguments.length)}}),_e.each(["top","left"],function(M,Z){_e.cssHooks[Z]=Ir(mt.pixelPosition,function(xe,Re){if(Re)return Re=Lr(xe,Z),An.test(Re)?_e(xe).position()[Z]+"px":Re})}),_e.each({Height:"height",Width:"width"},function(M,Z){_e.each({padding:"inner"+M,content:Z,"":"outer"+M},function(xe,Re){_e.fn[Re]=function(vt,Ct){var It=arguments.length&&(xe||typeof vt!="boolean"),Pn=xe||(vt===!0||Ct===!0?"margin":"border");return ea(this,function(xn,Wn,Cr){var kr;return tn(xn)?Re.indexOf("outer")===0?xn["inner"+M]:xn.document.documentElement["client"+M]:xn.nodeType===9?(kr=xn.documentElement,Math.max(xn.body["scroll"+M],kr["scroll"+M],xn.body["offset"+M],kr["offset"+M],kr["client"+M])):Cr===void 0?_e.css(xn,Wn,Pn):_e.style(xn,Wn,Cr,Pn)},Z,It?vt:void 0,It)}})}),_e.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(M,Z){_e.fn[Z]=function(xe){return this.on(Z,xe)}}),_e.fn.extend({bind:function(M,Z,xe){return this.on(M,null,Z,xe)},unbind:function(M,Z){return this.off(M,null,Z)},delegate:function(M,Z,xe,Re){return this.on(Z,M,xe,Re)},undelegate:function(M,Z,xe){return arguments.length===1?this.off(M,"**"):this.off(Z,M||"**",xe)},hover:function(M,Z){return this.on("mouseenter",M).on("mouseleave",Z||M)}}),_e.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(M,Z){_e.fn[Z]=function(xe,Re){return arguments.length>0?this.on(Z,null,xe,Re):this.trigger(Z)}});var Ri=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;_e.proxy=function(M,Z){var xe,Re,vt;if(typeof Z=="string"&&(xe=M[Z],Z=M,M=xe),!!nt(M))return Re=u.call(arguments,2),vt=function(){return M.apply(Z||this,Re.concat(u.call(arguments)))},vt.guid=M.guid=M.guid||_e.guid++,vt},_e.holdReady=function(M){M?_e.readyWait++:_e.ready(!0)},_e.isArray=Array.isArray,_e.parseJSON=JSON.parse,_e.nodeName=On,_e.isFunction=nt,_e.isWindow=tn,_e.camelCase=Ai,_e.type=an,_e.now=Date.now,_e.isNumeric=function(M){var Z=_e.type(M);return(Z==="number"||Z==="string")&&!isNaN(M-parseFloat(M))},_e.trim=function(M){return M==null?"":(M+"").replace(Ri,"$1")};var Ui=e.jQuery,zs=e.$;return _e.noConflict=function(M){return e.$===_e&&(e.$=zs),M&&e.jQuery===_e&&(e.jQuery=Ui),_e},typeof n>"u"&&(e.jQuery=e.$=_e),_e})})(th);var ed=th.exports;const wu=eh(ed);function zd(){const y=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,e=window.devicePixelRatio||1,n={width:window.screen.width*e,height:window.screen.height*e};return!!(y&&n.width===1125&&n.height===2436)}function Cp(){return/android/i.test(navigator.userAgent)}function xu(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1}function pl(){const y=navigator.userAgent||navigator.vendor||self.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(y)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(y.substr(0,4))}function Ea(){const y=document.compatMode==="CSS1Compat";return{l:window.pageXOffset||(y?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(y?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(y?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(y?document.documentElement.clientHeight:document.body.clientHeight)}}function ye(y,e,n){var s=(y*299+e*587+n*114)/1e3;return s>=128?"black":"white"}function Yo(y){var e=parseInt(y.substr(0,2),16),n=parseInt(y.substr(2,2),16),s=parseInt(y.substr(4,2),16),c=(e*299+n*587+s*114)/1e3;return c>=128?"black":"white"}function wa(y,e){return typeof e>"u"||typeof e===null?!1:function(n,s){let c=s!==s,u;return!c&&typeof Array.prototype.indexOf=="function"?(u=Array.prototype.indexOf,u.call(n,s)>-1):(u=function(m,b){var k=-1,W=-1;for(k=0;k<m.length;k++){var ve=m[k];if(c&&ve!==ve||ve===b){W=k;break}}return W},u(n,s)>-1)}(y,e)}function Bs(y){y=String(y).replace(/[^0-9a-f]/gi,""),y.length<6&&(y=y[0]+y[0]+y[1]+y[1]+y[2]+y[2]);var e=parseInt(y.substr(0*2,2),16),n=parseInt(y.substr(1*2,2),16),s=parseInt(y.substr(2*2,2),16),c=Math.sqrt(e*e*.241+n*n*.691+s*s*.068);return c}function hi(y){return Bs(y)<130}function Ph(y,e=0){y=String(y).replace(/[^0-9a-f]/gi,""),y.length<6&&(y=y[0]+y[0]+y[1]+y[1]+y[2]+y[2]),e=e||0;var n="#",s,c;for(c=0;c<3;c++)s=parseInt(y.substr(c*2,2),16),s=Math.round(Math.min(Math.max(0,s+s*e),255)).toString(16),n+=("00"+s).substr(s.length);return n}function Al(y,e,n,s){var c=new Image,u=wu("<canvas>"),m=u[0],b=m.getContext("2d");c.crossOrigin="anonymous",c.onload=function(){if(u.attr({width:c.width,height:c.height}),b=m.getContext("2d"),b){b.drawImage(c,0,0);let k=Sf(m,c.width,c.height,e,n);s&&s(k)}else alert("Get a real browser!")},c.src=y}async function Oh(y){return new Promise((e,n)=>{const s=new Image,c=wu("<canvas>");let u=c[0],m=u.getContext("2d");s.crossOrigin="anonymous",s.onload=function(){if(c.attr({width:s.width,height:s.height}),m=u.getContext("2d"),m){m.drawImage(s,0,0);let b=El(u);e(b)}else n(new Error("HTML5 Canvas not supported"))},s.src=y})}function El(y){const e=y.getContext("2d");if(!e)return null;const n=y.width,s=y.height,c=e.getImageData(0,0,y.width,y.height).data,u=(nt,tn)=>c[(n*tn+nt)*4+3],m=nt=>nt<10,b=nt=>{const tn=nt?1:-1;for(var Ie=nt?0:s-1;nt?Ie<s:Ie>-1;Ie+=tn)for(var Kt=0;Kt<n;Kt++)if(!m(u(Kt,Ie)))return Ie;return null},k=nt=>{const tn=nt?1:-1;for(var Ie=nt?0:n-1;nt?Ie<n:Ie>-1;Ie+=tn)for(var Kt=0;Kt<s;Kt++)if(!m(u(Ie,Kt)))return Ie;return null},W=b(!0),ve=b(!1),Ae=k(!0),rt=k(!1);if(W!=null&&ve!=null&&Ae!=null&&rt!=null){const nt=rt-Ae+1,tn=ve-W+1,Ie=wu("<canvas>").attr({width:nt,height:tn})[0];var re=Ie.getContext("2d");if(!re)return null;re.drawImage(y,Ae,W,nt,tn,0,0,nt,tn),re.getImageData(0,0,Ie.width,Ie.height);var mt=Ie.toDataURL();return mt}else return null}async function cg(y,e,n){return new Promise((s,c)=>{const u=new Image,m=wu("<canvas>");let b=m[0],k=b.getContext("2d");u.crossOrigin="anonymous",u.onload=function(){if(m.attr({width:u.width,height:u.height}),k=b.getContext("2d"),k){k.drawImage(u,0,0);let W=Sf(b,u.width,u.height,e,n);s(W)}else c(new Error("HTML5 Canvas not supported"))},u.src=y})}function Sf(y,e,n,s,c){const u=y.getContext("2d");if(!u)return null;const m=u.getImageData(0,0,y.width,y.height).data,b=(Ie,Kt)=>m[(e*Kt+Ie)*4+3],k=Ie=>Ie===0,W=Ie=>{const Kt=Ie?1:-1;for(var At=Ie?0:n-1;Ie?At<n:At>-1;At+=Kt)for(var an=0;an<e;an++)if(!k(b(an,At)))return At;return null},ve=Ie=>{const Kt=Ie?1:-1;for(var At=Ie?0:e-1;Ie?At<e:At>-1;At+=Kt)for(var an=0;an<n;an++)if(!k(b(At,an)))return At;return null},Ae=W(!0),rt=W(!1),re=ve(!0),mt=ve(!1);if(Ae!=null&&rt!=null&&re!=null&&mt!=null){const Ie=mt-re,Kt=rt-Ae,At=s,an=c,Cn=At/Ie,He=an/Kt;let _e=Ie*Cn,Sr=Kt*Cn;Sr>an&&(_e=Ie*He,Sr=Kt*He);const On=wu("<canvas>").attr({width:At,height:an})[0];var nt=On.getContext("2d");if(!nt)return null;nt.drawImage(y,re,Ae,Ie,Kt,(At-_e)/2,(an-Sr)/2,_e,Sr),nt.getImageData(0,0,On.width,On.height);var tn=On.toDataURL();return tn}else return null}async function Dp(y,e,n,s){return new Promise(c=>{const u=new Image;u.crossOrigin="anonymous",u.onload=function(){let m=wu("<canvas>")[0],b=m.getContext("2d");if(b){m.width=e,m.height=n;const k=Math.min(e/u.width,n/u.height),W=u.width*k,ve=u.height*k;b.drawImage(u,0,0,u.width,u.height,(e-W+s)/2,(n-ve+s)/2,W-s,ve-s);const Ae=m.toDataURL();c(Ae)}},u.src=y})}function Mc(y,e,n){var s=wu("<canvas>");s.attr({width:e,height:n});var c=s[0],u=c.getContext("2d");if(u){u.fillStyle=y,u.fillRect(0,0,e,n);var m=c.toDataURL();return m}else return null}function Ud(y,e){return y?y.match(new RegExp(".[^]{1,"+e+"}","g")):null}function No(y){let e=0,n,s;if(y.length===0)return e;for(n=0;n<y.length;n++)s=y.charCodeAt(n),e=(e<<5)-e+s,e|=0;return e}function hg(y){var e=document.createElement("a");return e.href=y,e.href}function Ap(y){for(var e=atob(y.split(",")[1]),n=y.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(e.length),c=new Uint8Array(s),u=0;u<e.length;u++)c[u]=e.charCodeAt(u);var m=new Blob([s],{type:n});return m}function nh(y,e){if(typeof y!="number"&&y<1)throw new RangeError("Length must be a positive integer!");e===void 0&&(e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");let n="";const s=e.length;for(var c=0;c<y;c++)n+=e.charAt(Math.floor(Math.random()*s));return n}async function Cf(y,e){return new Promise(n=>{const s=new Uint8Array(y),c=new Blob([s],{type:e}),u=(window.URL||window.webkitURL).createObjectURL(c),m=new Image;m.src=u,m.onload=async()=>{const b=document.createElement("canvas"),k=b.getContext("2d");b.width=m.width,b.height=m.height,k.translate(0,m.height),k.scale(1,-1),k.drawImage(m,0,0),b.toBlob(W=>{const ve=new FileReader;ve.addEventListener("loadend",()=>{const Ae=ve.result;n(Ae)}),ve.readAsArrayBuffer(W)},e)}})}function nc(y){return y instanceof window.BABYLON.PBRMaterial}function Do(){const y=new URL(window.location.href);return new URLSearchParams(y.search)}class td{constructor(){this.previewFiles={}}downloadFiles(){function e(n,s){return n.indexOf(s,n.length-s.length)!==-1}for(let n in this.previewFiles){let s=null;const c=this.previewFiles[n];if(typeof c=="string"?s=Ap(c):s=c,s){let u=null;if(e(n,".jpeg")?u={type:"image/jpeg"}:e(n,".png")&&(u={type:"image/png"}),u){let m=document.createElement("a");document.body.appendChild(m),m.setAttribute("type","hidden"),m.download=n,m.href=window.URL.createObjectURL(new Blob([s],u)),m.click()}}}}}class tl{static async getPreviewsAsync(e,n,s,c,u=!0){await e.whenReadyAsync();const m=new bu(e,n,s,c),b=await m.getPreviewsAsync(u);return m.dispose(),b}static async downloadPreviewsAsync(e,n,s,c){(await tl.getPreviewsAsync(e,n,s,c)).downloadFiles()}}class bu{constructor(e,n,s,c){this._width=256,this._height=256,this._crop=!1,this._materials=[],this._localEngine=null,this._hostingScene=null,this._hostingSceneHelper=null,this._hostingMesh=null,this._scene=e,this._rootUrl=n,this._materialIDs=s,this._options=c||{},this.setupPreviewSize(),this._options.crop!=null&&(this._crop=this._options.crop),this.readMaterials()}dispose(){this.disposeHostingScene(),this.disposeLocalEngine()}getLocalEngine(){if(!this._localEngine){const e=document.createElement("canvas");e.id="MaterialPreviewCanvas",e.width=1024,e.height=1024,this._localEngine=new window.BABYLON.Engine(e,!0,{premultipliedAlpha:!1,preserveDrawingBuffer:!0}),this._localEngine.setSize(this._width,this._height)}return this._localEngine}disposeLocalEngine(){this._localEngine&&this._localEngine.dispose()}disposeHostingScene(){this._hostingSceneHelper&&(this._hostingSceneHelper.dispose(),this._hostingSceneHelper=null),this._hostingScene&&(this._hostingScene.dispose(),this._hostingScene=null)}setupPreviewSize(){let e=this._options;e.width!=null&&e.height==null?(this._width=e.width,this._height=e.width):e.width==null&&e.height!=null?(this._width=e.height,this._height=e.height):e.width!=null&&e.height!=null&&(this._width=e.width,this._height=e.height)}readMaterials(){this._materialIDs.forEach(e=>{const n=this._scene.getMaterialByID(e);n&&this._materials.push(n)})}async downloadPreviewsAsync(){(await this.getPreviewsAsync()).downloadFiles()}async getPreviewsAsync(e=!0){const n=this.getLocalEngine();this._hostingScene=new window.BABYLON.Scene(n),this._hostingSceneHelper=new Tr(this._hostingScene),this._hostingSceneHelper.setupCamera();const s=this._hostingScene.activeCamera;return s&&(/firefox/i.test(navigator.userAgent)||new window.BABYLON.PassPostProcess("scale_pass",4,s,window.BABYLON.Texture.BILINEAR_SAMPLINGMODE),new window.BABYLON.PassPostProcess("scale_pass",2,s,window.BABYLON.Texture.BILINEAR_SAMPLINGMODE),new window.BABYLON.PassPostProcess("scale_pass",1,s,window.BABYLON.Texture.BILINEAR_SAMPLINGMODE)),new Promise(c=>{const u=new window.BABYLON.CubeTexture(Ii.Environment.EnvironmentTextureCDNUrl,this._hostingScene,null,!1,null,async()=>{if(!this._hostingScene||!this._hostingSceneHelper)return;this._hostingScene.environmentTexture=u,this._hostingSceneHelper.setupLights(),this._hostingMesh=this._hostingSceneHelper.createSphere(null),this._hostingSceneHelper.adjustCamera(void 0,void 0,void 0,!1);const m=new td;for(let b=0;b<this._materials.length;b++){const k=this._materials[b];await this.createMaterialPreviewFileAsync(k,m,e)}this.disposeHostingScene(),this.disposeLocalEngine(),c(m)},null,void 0,!0,void 0,!0)})}async createMaterialPreviewFileAsync(e,n,s=!0){if(this._hostingScene&&this._hostingSceneHelper&&this._hostingMesh){const c=e.serialize(),u=window.BABYLON.Material.Parse(c,this._hostingScene,this._rootUrl);if(u){this._hostingMesh.material=u,await Tr.whenMeshMaterialIsReady(this._hostingMesh),this._hostingScene.render();let m=await this._hostingSceneHelper.takeContentScreenshotAsync(this._width,this._height);if(this._crop){const W=await Oh(m);W&&(m=W)}let b=u.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();b=this.getNextIncrementalName(b,".png",n)+".png",Logger.info("preview: "+b);let k=m;s&&(k=Ap(m)),n.previewFiles[b]=k}}}getNextIncrementalName(e,n,s){let c=e;if(e){let k,W=0;for(;s.previewFiles.hasOwnProperty(c+n);){if(!k){k=e;var u=e.lastIndexOf("_");if(u>0){var m=e.substring(u+1),b=parseInt(m);b.toString()===m&&(k=e.substring(0,u))}}W++,c=k+"_"+W}}return c}}class rh{constructor(e,n,s,c){this._bias=50,this._invertR=!1,this._invertG=!1,this._preBlurEnabled=!1,this._preBlur=3,this._postBlurEnabled=!1,this._postBlur=3,this._bevel=!0,this._intensity=.5,this._activeTextures=[],this._preBlurXTexture=null,this._preBlurYTexture=null,this._normalMapTexture=null,this._postBlurXTexture=null,this._postBlurYTexture=null,this._baseTexture=e,this._size=n,this._scene=c,this.init(s)}init(e){for(this._bias=e.get("bias"),this._invertR=e.get("invertR"),this._invertG=e.get("invertG"),this._bevel=e.get("bevel"),this._intensity=e.get("intensity"),this._preBlurEnabled=e.get("preBlurEnabled"),this._preBlur=e.get("preBlur"),this._postBlurEnabled=e.get("postBlurEnabled"),this._postBlur=e.get("postBlur");this._activeTextures.length>0;)this._activeTextures.pop();this.updateTextures()}updateTextures(){let e=this.updatePreBlurTexture();e=this.updateNormalmapTexture(e),e=this.updatePostBlurTexture(e)}updatePreBlurTexture(){let e=this._baseTexture;return this._preBlurEnabled&&(this._preBlurXTexture?this._preBlurXTexture.baseTexture=this._baseTexture:this._preBlurXTexture=new ki("preBlurX",this._size,this._scene,this._baseTexture,void 0,!1),this._preBlurXTexture.beginInit(),this._preBlurXTexture.blur=this._preBlur,this._preBlurXTexture.refreshRate=0,this._preBlurXTexture.endInit(),this._activeTextures.push(this._preBlurXTexture),this._preBlurYTexture?this._preBlurYTexture.baseTexture=this._preBlurXTexture:this._preBlurYTexture=new su("preBlurY",this._size,this._scene,this._preBlurXTexture,void 0,!1),this._preBlurYTexture.beginInit(),this._preBlurYTexture.blur=this._preBlur,this._preBlurYTexture.refreshRate=0,this._preBlurYTexture.endInit(),this._activeTextures.push(this._preBlurYTexture),e=this._preBlurYTexture),e}updateNormalmapTexture(e){return this._normalMapTexture?this._normalMapTexture.baseTexture=e:this._normalMapTexture=new Nu("procNormal",this._size,this._scene,e,void 0,!1),this._normalMapTexture.beginInit(),this._normalMapTexture.bias=this._bias,this._normalMapTexture.invertR=this._invertR,this._normalMapTexture.invertG=this._invertG,this._normalMapTexture.bevel=this._bevel,this._normalMapTexture.intensity=this._intensity,this._normalMapTexture.refreshRate=0,this._normalMapTexture.endInit(),this._activeTextures.push(this._normalMapTexture),this._normalMapTexture}updatePostBlurTexture(e){let n=e;return this._postBlurEnabled&&(this._postBlurXTexture?this._postBlurXTexture.baseTexture=e:this._postBlurXTexture=new ki("postBlurX",this._size,this._scene,e,void 0,!1),this._postBlurXTexture&&(this._postBlurXTexture.beginInit(),this._postBlurXTexture.blur=this._postBlur,this._postBlurXTexture.refreshRate=0,this._postBlurXTexture.endInit(),this._activeTextures.push(this._postBlurXTexture),this._postBlurYTexture?this._postBlurYTexture.baseTexture=this._postBlurXTexture:this._postBlurYTexture=new su("postBlurY",this._size,this._scene,this._postBlurXTexture,void 0,!1),this._postBlurYTexture&&(this._postBlurYTexture.beginInit(),this._postBlurYTexture.blur=this._postBlur,this._postBlurYTexture.refreshRate=0,this._postBlurYTexture.endInit(),this._activeTextures.push(this._postBlurYTexture),n=this._postBlurYTexture))),n}dispose(){this._preBlurXTexture&&(this._preBlurXTexture.dispose(),this._preBlurXTexture=null),this._preBlurYTexture&&(this._preBlurYTexture.dispose(),this._preBlurYTexture=null),this._normalMapTexture&&(this._normalMapTexture.dispose(),this._normalMapTexture=null),this._postBlurXTexture&&(this._postBlurXTexture.dispose(),this._postBlurXTexture=null),this._postBlurYTexture&&(this._postBlurYTexture.dispose(),this._postBlurYTexture=null)}async getNormalMapTextureAsync(e,n){return await this.updateAsync(e,n),this._activeTextures.length>0?this._activeTextures[this._activeTextures.length-1]:null}async updateAsync(e,n){if(this.init(n),this._activeTextures.length>0){this._activeTextures[0].baseTexture=e;for(var s=0;s<this._activeTextures.length;s++)await this._activeTextures[s].isReadyAsync(),this._activeTextures[s].render()}}}class rc{constructor(e,n,s,c){this._baseTexture=e,this._size=n,this._scene=c,this._mask=new au("mask",this._size,this._scene,this._baseTexture),this._mask.backColor=new window.BABYLON.Vector3(0,0,0),this._mask.foreColor=new window.BABYLON.Vector3(1,1,1),this._mask.refreshRate=0,this._shadow=new au("shadow",this._size,this._scene,this._baseTexture),this._shadow.backColor=new window.BABYLON.Vector3(.1,.1,.1),this._shadow.foreColor=new window.BABYLON.Vector3(1,1,1),this._shadow.refreshRate=0,this._shadowBlurX=new ki("shadow_blurX",this._size,this._scene,this._shadow),this._shadowBlurX.blur=5,this._shadowBlurX.refreshRate=0,this._shadowBlurY=new su("shadow_blurY",this._size,this._scene,this._shadowBlurX),this._shadowBlurY.blur=5,this._shadowBlurY.refreshRate=0,this._shadowMove=new vu("shadow_move",this._size,this._scene,this._shadowBlurY),this._shadowMove.offset=new window.BABYLON.Vector2(2.5,2.5),this._shadowMove.refreshRate=0,this._lightmap=new _u("lightmap",this._size,this._scene,this._shadowMove,this._mask),this._lightmap.refreshRate=0,this.updateParameters(s)}updateParameters(e){if(e){let n=new window.BABYLON.Vector3(0,0,0);if(e.get("color")){const W=window.BABYLON.Color3.FromHexString(e.get("color"));n=new window.BABYLON.Vector3(W.r,W.g,W.b)}this._shadow.backColor=n;let s=1,c=135;e.get("angle")!==void 0&&e.get("angle")!==null&&(c=e.get("angle")),e.get("distance")!=null&&e.get("distance")!==null&&(s=e.get("distance"));let u=c*Math.PI/180;u=this.wrapPi(u);const m=Math.cos(u)*s,b=Math.sin(u)*s;this._shadowMove.offset=new window.BABYLON.Vector2(-m,b);let k=5;e.get("size")!==void 0&&e.get("size")!==null&&(k=Math.max(0,Math.min(100,e.get("size")))),this._shadowBlurX.blur=k,this._shadowBlurY.blur=k}}wrapPi(e){if(Math.abs(e)>Math.PI){var n=2*Math.PI,s=Math.floor((e+Math.PI)*(1/n));e-=s*n}return e}dispose(){this._mask.dispose(),this._shadow.dispose(),this._shadowBlurX.dispose(),this._shadowBlurY.dispose(),this._shadowMove.dispose(),this._lightmap.dispose()}async getInnerShadowTextureAsync(e){return await this.updateAsync(e),this._lightmap}async updateAsync(e,n){this.updateParameters(n),this._baseTexture=e,await Tr.whenTextureIsReadyAsync(this._baseTexture),this._mask.baseTexture=this._baseTexture,await this._mask.isReadyAsync(),this._mask.render(),this._shadow.baseTexture=this._baseTexture,await this._shadow.isReadyAsync(),this._shadow.render(),await this._shadowBlurX.isReadyAsync(),this._shadowBlurX.render(),await this._shadowBlurY.isReadyAsync(),this._shadowBlurY.render(),await this._shadowMove.isReadyAsync(),this._shadowMove.render(),await this._lightmap.isReadyAsync(),this._lightmap.render()}}class uo{constructor(e,n,s,c){this._size=n,this._baseTexture=e,this._scene=c,this._shadow=new au("shadow",this._size,this._scene,this._baseTexture),this._shadow.backColor=new window.BABYLON.Vector3(1,1,1),this._shadow.foreColor=new window.BABYLON.Vector3(.2,.2,.2),this._shadow.refreshRate=0,this._shadowBlurX=new ki("shadow_blurX",this._size,this._scene,this._shadow),this._shadowBlurX.blur=15,this._shadowBlurX.refreshRate=0,this._shadowBlurY=new su("shadow_blurY",this._size,this._scene,this._shadowBlurX),this._shadowBlurY.blur=15,this._shadowBlurY.refreshRate=0,this._shadowMove=new vu("shadow_move",this._size,this._scene,this._shadowBlurY),this._shadowMove.offset=new window.BABYLON.Vector2(2.5,2.5),this._shadowMove.refreshRate=0,this.updateParameters(s)}updateParameters(e){if(e){var n=new window.BABYLON.Vector3(0,0,0);if(e.get("color")){var s=window.BABYLON.Color3.FromHexString(e.get("color"));n=new window.BABYLON.Vector3(s.r,s.g,s.b)}this._shadow.foreColor=n;let c=1,u=135;e.get("angle")!==void 0&&e.get("angle")!==null&&(u=e.get("angle")),e.get("distance")!=null&&e.get("distance")!==null&&(c=e.get("distance"));let m=u*Math.PI/180;m=this.wrapPi(m);const b=Math.cos(m)*c,k=Math.sin(m)*c;this._shadowMove.offset=new window.BABYLON.Vector2(-b,k);let W=5;e.get("size")!==void 0&&e.get("size")!==null&&(W=Math.max(0,Math.min(100,e.get("size")))),this._shadowBlurX.blur=W,this._shadowBlurY.blur=W}}wrapPi(e){if(Math.abs(e)>Math.PI){var n=2*Math.PI,s=Math.floor((e+Math.PI)*(1/n));e-=s*n}return e}dispose(){this._shadow.dispose(),this._shadowBlurX.dispose(),this._shadowBlurY.dispose(),this._shadowMove.dispose()}async getOuterShadowTextureAsync(e){return await this.updateAsync(e),this._shadowMove}async updateAsync(e,n){this.updateParameters(n),this._baseTexture=e,await Tr.whenTextureIsReadyAsync(this._baseTexture),this._shadow.baseTexture=this._baseTexture,await this._shadow.isReadyAsync(),this._shadow.render(),await this._shadowBlurX.isReadyAsync(),this._shadowBlurX.render(),await this._shadowBlurY.isReadyAsync(),this._shadowBlurY.render(),await this._shadowMove.isReadyAsync(),this._shadowMove.render()}}function ic(y,e,n){e===void 0&&(e=50),n===void 0&&(n={isImmediate:!1});var s;return function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var m=this,b=function(){s=void 0,n.isImmediate||y.apply(m,c)},k=n.isImmediate&&s===void 0;s!==void 0&&clearTimeout(s),s=setTimeout(b,e),k&&y.apply(m,c)}}const jd=/android/i.test(navigator.userAgent),Ga=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,Vd=class sp{constructor(e,n,s,c,u,m,b,k=!0,W,ve=0){this._subMesh=null,this._isRefreshing=!1,this._showDesign=!0,this._viewRotation=0,this._designTextureResolution=1024,this._effect=null,this._meshSide=null,this._side=null,this._isDisposed=!1,this._baseWidth=sp.DEFAULT_SIZE,this._baseHeight=sp.DEFAULT_SIZE,this._textureWidth=sp.DEFAULT_SIZE,this._textureHeight=sp.DEFAULT_SIZE,this._coordinatesIndex=0,this._currentVisibliity=!0,this._canvasMesh=null,this._originalCanvasMeshPosition=null,this._originalCanvasMeshScaling=null,this._normalmapMaterial=null,this._originalMaterial=null,this._blankDataUrl=null,this._innerCanvasMesh=null,this._outerCanvasMesh=null,this._ownDynamicMaterial=!1,this._dynamicMaterial=null,this._dynamicTexture=null,this._normalmapTexture=null,this._dynamicOpacityTexture=null,this._ownOldDynamicMaterial=!1,this._oldDynamicMaterial=null,this._originalDiffuseTexture=null,this._combinedDiffuseTexture=null,this._originalMeshNormalmapTexture=null,this._originalDesignNormalmapTexture=null,this._meshCombinedNormalmapTexture=null,this._designCombinedNormalmapTexture=null,this._originalMeshLightmapTexture=null,this._originalDesignLightmapTexture=null,this._meshCombinedLightmapTexture=null,this._designCombinedLightmapTexture=null,this._innerShadowTexture=null,this._outerShadowTexture=null,this._context=null,this._canvas=null,this._canvasID=Zakeke.generateUUID(),this._customizer=null,this._renderingNeededListeners=[],this._proceduralNormalMap=null,this._innerShadowGenerator=null,this._outerShadowGenerator=null,this._debouncedUpdateDynamicTexture=null,this._originalViewMatrixValues=null,this._grids=[],this._lastUpdateTextureWasDynamic=!0,this.isFirstRender=!0,this._scene=e,this._sceneHelper=new Tr(e),this._zkScene=n,this._mesh=s,this._subMesh=c,this._zkModel=u,this._zkDesign=m,this._grids=b,this._showDesign=k,this._viewRotation=ve,W&&(this._effect=W)}get showDesign(){return this._showDesign}set showDesign(e){this._showDesign!=e&&(this._showDesign=e)}get rotation(){return this._viewRotation}set rotation(e){this._viewRotation!=e&&(this._viewRotation=e)}get side(){return this._side}getInternalCustomizer(){return this._customizer}static async createMeshDesignManagerAsync(e,n,s,c,u,m,b,k=!0,W,ve=0){const Ae=new sp(e,n,s,c,u,m,b,k,W,ve);return await Ae.initAsync(),Ae}async initAsync(){const e=this._zkScene.get("rootUrl");e&&await this._sceneHelper.unsetMeshDummyMaterialAsync(this._mesh,e,!0),this.setupMeshSide(),this.setupTextureSize(),this.checkDefaultEffect(),this.refreshModelSide(),await this.setupClonedObjectsAsync(),await this.setupCanvasAsync(),await this.setupDynamicMaterialAsync(),await this.refreshAsync()}isForMesh(e,n){return!e||!this._mesh||e.id!==this._mesh.id?!1:!this._subMesh&&!n?!0:!this._subMesh||!n?!1:n.materialIndex===this._subMesh.materialIndex}getMeshID(){return this._mesh?this._mesh.id:null}getSubMeshIdx(){return this._subMesh?this._subMesh.materialIndex:0}getMaterialIDForDesign(){let e;return this._effect&&this._effect.get("materialID")?e=this._effect.get("materialID"):this._mesh&&this._mesh.metadata&&this._mesh.metadata.designMaterialID?e=this._mesh.metadata.designMaterialID:this._meshSide&&this._meshSide.get("materialID")&&(e=this._meshSide.get("materialID")),e}getDesignConfig(){let e;return this._effect&&this._effect.get("config")?e=this._effect.get("config"):this._meshSide&&this._meshSide.get("config")&&(e=this._meshSide.get("config")),e||(e=new MPlaza.MeshDesignConfig),e}dispose(){this._isDisposed=!0,this._customizer&&(this._customizer.clearMemoryForIOS(),this._customizer=null),this.disposeOuterInnerCanvasMeshes(),this._canvasMesh&&(this._canvasMesh.dispose(),this._canvasMesh=null,this._originalCanvasMeshPosition=null,this._originalCanvasMeshScaling=null),this.disposeDynamicMaterial(),this._dynamicOpacityTexture&&(this._dynamicOpacityTexture.dispose(),this._dynamicOpacityTexture=null),this._dynamicTexture&&(this._dynamicTexture.dispose(),this._dynamicTexture=null),this._renderingNeededListeners=[],$("#"+this._canvasID).remove(),this.restoreOrignalMaterial(),this.disposeNormalmapMaterial(),this._proceduralNormalMap&&(this._proceduralNormalMap.dispose(),this._proceduralNormalMap=null),this._innerShadowGenerator&&(this._innerShadowGenerator.dispose(),this._innerShadowGenerator=null),this._combinedDiffuseTexture&&(this._combinedDiffuseTexture.dispose(),this._combinedDiffuseTexture=null),this._meshCombinedNormalmapTexture&&(this._meshCombinedNormalmapTexture.dispose(),this._meshCombinedNormalmapTexture=null),this._designCombinedNormalmapTexture&&(this._designCombinedNormalmapTexture.dispose(),this._designCombinedNormalmapTexture=null),this._meshCombinedLightmapTexture&&(this._meshCombinedLightmapTexture.dispose(),this._meshCombinedLightmapTexture=null),this._designCombinedLightmapTexture&&(this._designCombinedLightmapTexture.dispose(),this._designCombinedLightmapTexture=null)}disposeOuterInnerCanvasMeshes(){this._innerCanvasMesh&&(this._innerCanvasMesh.dispose(),this._innerCanvasMesh=null),this._outerCanvasMesh&&(this._outerCanvasMesh.dispose(),this._outerCanvasMesh=null)}disposeNormalmapMaterial(){this._normalmapMaterial&&this._originalMaterial&&this._normalmapMaterial.id!==this._originalMaterial.id&&this._sceneHelper.getMeshesUsingMaterial(this._normalmapMaterial.id).length==0&&(this._normalmapMaterial.dispose(),this._normalmapMaterial=null),this._originalMeshNormalmapTexture=null,this._originalMeshLightmapTexture=null}disposeDynamicMaterial(){this._ownDynamicMaterial&&this._dynamicMaterial&&this._dynamicMaterial.dispose(),this._dynamicMaterial=null,this._originalDesignNormalmapTexture=null,this._originalDesignLightmapTexture=null}disposeOldDynamicMaterial(){this._ownOldDynamicMaterial&&this._oldDynamicMaterial&&this._dynamicMaterial&&this._oldDynamicMaterial!=this._dynamicMaterial&&this._oldDynamicMaterial.dispose(),this._oldDynamicMaterial=null}createCanvasMeshClone(e){if(this._canvasMesh){const n=this._canvasMesh.clone(e+" - clone outer",null);if(n)return n.id=Zakeke.generateUUID(),this._canvasMesh.metadata&&this._canvasMesh.metadata.AR!==void 0&&this._canvasMesh.metadata.AR!==null&&(n.metadata||(n.metadata={}),n.metadata.AR=this._canvasMesh.metadata.AR),n}return null}expandCanvasMesh(e){if(!this._mesh||!this._canvasMesh)return;this.disposeOuterInnerCanvasMeshes();const n=this.getMeshHierarchySize(this._mesh),s=this.getMeshHierarchySize(this._canvasMesh);if(!n.equals(s))return;let c=.004;e&&(c+=e);const u=.2;if(this._outerCanvasMesh=this.createCanvasMeshClone(this._mesh.name+" outer clone"),this._canvasMesh.isVisible=!1,this._outerCanvasMesh)if(Math.abs(n.x)<=.01||Math.abs(n.y)<=.01||Math.abs(n.z)<=.01){const b=this._mesh.getVerticesData(window.BABYLON.VertexBuffer.NormalKind),k=window.BABYLON.Vector3.FromArray(b,0).normalize();this._outerCanvasMesh.position=this._outerCanvasMesh.position.add(k.scale(u))}else{const b=[...this._canvasMesh.getVerticesData(window.BABYLON.VertexBuffer.PositionKind)],k=[...this._canvasMesh.getVerticesData(window.BABYLON.VertexBuffer.NormalKind)];for(var m=0;m<b.length;m+=3){const Ae=new window.BABYLON.Vector3(k[m],k[m+1],k[m+2]),rt=new window.BABYLON.Vector3(b[m]+Ae.x*c,b[m+1]+Ae.y*c,b[m+2]+Ae.z*c);b[m]=rt.x,b[m+1]=rt.y,b[m+2]=rt.z}const W=window.BABYLON.VertexData.ExtractFromMesh(this._canvasMesh,!0,!0);W.positions=b;const ve=new window.BABYLON.Geometry(this._canvasMesh.name+" outer geometry",this._scene);W.applyToGeometry(ve),ve.applyToMesh(this._outerCanvasMesh),this._scene.render()}}expandCanvasMesh_old(){if(!this._mesh||!this._canvasMesh)return;const e=.01,n=1+e,s=this.getMeshHierarchySize(this._mesh),c=this.getMeshHierarchySize(this._canvasMesh);if(!s.equals(c))return;const u=.1;if(Math.abs(s.x)<=u||Math.abs(s.y)<=u||Math.abs(s.z)<=u){let m=this._mesh.getVerticesData(window.BABYLON.VertexBuffer.NormalKind),b=window.BABYLON.Vector3.FromArray(m,0).normalize();this._canvasMesh.position=this._canvasMesh.position.add(b.scale(e))}else{let m=this._canvasMesh.scaling;m=m.multiplyByFloats(n,n,n),this._canvasMesh.scaling=m;let b=this.getMeshHierarchyCenter(this._mesh),k=this.getMeshHierarchyCenter(this._canvasMesh);const W=b.subtract(k);W.equals(window.BABYLON.Vector3.Zero())||this._canvasMesh.position.addInPlace(W)}}contractCanvasMesh(){this._canvasMesh&&(this._canvasMesh.isVisible=!0),this.disposeOuterInnerCanvasMeshes()}contractCanvasMesh_old(){if(!this._mesh||!this._canvasMesh||!this._originalCanvasMeshScaling||!this._originalCanvasMeshPosition)return;this._canvasMesh.scaling=this._originalCanvasMeshScaling,this._canvasMesh.position=this._originalCanvasMeshPosition;const e=this.getMeshHierarchyCenter(this._mesh),n=this.getMeshHierarchyCenter(this._canvasMesh),s=e.subtract(n);s.equals(window.BABYLON.Vector3.Zero())||this._canvasMesh.position.addInPlace(s)}setupMeshSide(){if(this._meshSide=null,this._coordinatesIndex=0,this._zkModel&&this._mesh&&this._mesh.id)for(let s=0;s<this._zkModel.get("scenes").length;s++){var e=this._zkModel.get("scenes").at(s);if(e.get("isDefault"))for(let c=0;c<e.get("meshSides").length;c++){var n=e.get("meshSides").at(c);if(n.get("meshID")==this._mesh.id){this._meshSide=n,this._meshSide.get("uvChannel")>=0&&(this._coordinatesIndex=this._meshSide.get("uvChannel"));return}}}}setupTextureSize(){this._meshSide&&(!jd&&!Ga?(this._baseWidth=this._meshSide.getOrCreateConfig().getDesktopTextureResolutionWidth()??sp.DEFAULT_SIZE,this._baseHeight=this._meshSide.getOrCreateConfig().getDesktopTextureResolutionHeight()??sp.DEFAULT_SIZE):jd?(this._baseWidth=this._meshSide.getOrCreateConfig().getMobileTextureResolutionWidth()??sp.DEFAULT_SIZE,this._baseHeight=this._meshSide.getOrCreateConfig().getMobileTextureResolutionHeight()??sp.DEFAULT_SIZE):Ga&&(this._baseWidth=512,this._baseHeight=512)),console.log("Texture size: "+this._baseWidth+"x"+this._baseHeight)}checkDefaultEffect(){if(!this._effect&&this._meshSide){var e=this._meshSide.getParentModel();if(e&&e instanceof MPlaza.ModelScene){let n=this.getMeshID();if(n){let s=e.getDefaultDesignEffect(n,this.getSubMeshIdx());s&&(this._effect=s)}}}}getAllSides(){const e=[];return this._zkModel.get("colors").each(n=>{n.get("sides").each(s=>{e.find(c=>c.get("sideID")==s.get("sideID"))||e.push(s)})}),e}refreshModelSide(){if(this._side=null,this._meshSide&&this._zkDesign){const e=this._meshSide.get("sideID"),n=this._meshSide.tempID;let s=null;if(s=this.getAllSides().find(function(c){return c.get("sideID")==e})||null,s){let c=null;for(const u of this._zkDesign.get("designItems").models)if(c=u,c.isOnSide(s)){const m=c&&c.get("areas").length>0?c.get("areas").at(0).get("colorID"):null;m&&this._zkModel.get("colors").each(function(b){b.get("colorID")==m&&b.get("sides").each(function(k){(k.tempID?k.tempID==n:k.get("sideID")==e)&&(s=k)})});break}this._side=s}}}async setupClonedObjectsAsync(){if(this._side){for(var e=0;e<this._scene.meshes.length;e++){let n=this._scene.meshes[e];if(n&&n.metadata&&n.metadata.originalMeshID&&n.metadata.originalMeshID==this._mesh.id){this._canvasMesh=n,this._canvasMesh.isVisible=this._currentVisibliity,this._normalmapMaterial=this._mesh.material,this._originalMeshNormalmapTexture=this.getMaterialNormalmap(this._normalmapMaterial),this._originalMeshLightmapTexture=this.getMaterialLightmap(this._normalmapMaterial);break}}if(!this._canvasMesh){let n=this._mesh.name+" - clone";this._canvasMesh=this._mesh.clone(n,null),this._canvasMesh&&(this._canvasMesh.id=Zakeke.generateUUID(),this._canvasMesh.isVisible=this._currentVisibliity,this._canvasMesh.doNotSerialize=!0,this._canvasMesh.isPickable=!1,this._canvasMesh.metadata={},this._canvasMesh.metadata.originalMeshID=this._mesh.id,this._canvasMesh.metadata.isRealMesh=!1,this._canvasMesh.metadata.iscanvasMesh=!0,this._mesh.metadata&&this._mesh.metadata.AR!==void 0&&this._mesh.metadata.AR!==null&&(this._canvasMesh.metadata.AR=this._mesh.metadata.AR))}this._canvasMesh&&(this._originalCanvasMeshPosition=this._canvasMesh.position,this._originalCanvasMeshScaling=this._canvasMesh.scaling),this._normalmapMaterial||await this.setupNormalmapMaterialAsync()}}async setupNormalmapMaterialAsync(){this.disposeNormalmapMaterial(),this._originalMaterial=this._mesh.material;let e=Zakeke.generateUUID(),n="normalmapMaterial - "+e;this._originalMaterial?(n=this._originalMaterial.name+" - normalmap",this._normalmapMaterial=await this.cloneMaterialAsync(this._originalMaterial,n)):this._normalmapMaterial=new window.BABYLON.StandardMaterial(n,this._scene),this._normalmapMaterial&&(this._normalmapMaterial.id=e,this._normalmapMaterial.doNotSerialize=!0,this._normalmapMaterial.metadata={},this._originalMaterial?this._normalmapMaterial.metadata.originalMaterialID=this._originalMaterial.id:this._normalmapMaterial.metadata.originalMaterialID=null,this._normalmapMaterial.metadata.isRealMaterial=!1,this._originalMeshNormalmapTexture=this.getMaterialNormalmap(this._normalmapMaterial),this._originalMeshLightmapTexture=this.getMaterialLightmap(this._normalmapMaterial))}getMaterialDiffuseTexturePropertyName(e){return e instanceof window.BABYLON.StandardMaterial?"diffuseTexture":e instanceof window.BABYLON.PBRMetallicRoughnessMaterial?"baseTexture":e instanceof window.BABYLON.PBRSpecularGlossinessMaterial?"diffuseTexture":e instanceof window.BABYLON.PBRMaterial||e instanceof Zakeke.PBRMaterial?"albedoTexture":"diffuseTexture"}getMaterialOpacityTexturePropertyName(e){return e instanceof window.BABYLON.StandardMaterial?"opacityTexture":e instanceof window.BABYLON.PBRMetallicRoughnessMaterial||e instanceof window.BABYLON.PBRSpecularGlossinessMaterial?null:(e instanceof window.BABYLON.PBRMaterial||e instanceof Zakeke.PBRMaterial,"opacityTexture")}getMaterialNormalmapTexturePropertyName(e){return e instanceof window.BABYLON.StandardMaterial?"bumpTexture":e instanceof window.BABYLON.PBRMetallicRoughnessMaterial||e instanceof window.BABYLON.PBRSpecularGlossinessMaterial?"normalTexture":(e instanceof window.BABYLON.PBRMaterial||e instanceof Zakeke.PBRMaterial,"bumpTexture")}getMaterialLightmapTexturePropertyName(e){return e instanceof window.BABYLON.StandardMaterial?"ambientTexture":e instanceof window.BABYLON.PBRMetallicRoughnessMaterial||e instanceof window.BABYLON.PBRSpecularGlossinessMaterial?"occlusionTexture":e instanceof window.BABYLON.PBRMaterial?"ambientTexture":e instanceof Zakeke.PBRMaterial?"aoTexture":"lightmapTexture"}getMaterialDiffuse(e){let n=this.getMaterialDiffuseTexturePropertyName(e);return e[n]}getMaterialNormalmap(e){if(!e)return null;let n=this.getMaterialNormalmapTexturePropertyName(e);return e[n]}getMaterialLightmap(e){if(!e)return null;let n=this.getMaterialLightmapTexturePropertyName(e);return e[n]}getMaterialOpacity(e){if(!e)return null;let n=this.getMaterialOpacityTexturePropertyName(e);return n?e[n]:null}setMaterialLightmap(e,n){if(e){var s=this.getMaterialLightmapTexturePropertyName(e);s&&(e[s]=n,e instanceof Zakeke.PBRMaterial&&(e.useAOTextureAsLightmap=!0))}}setTextureWrapping(e){e&&(e.wrapU=window.BABYLON.Texture.CLAMP_ADDRESSMODE,e.wrapV=window.BABYLON.Texture.CLAMP_ADDRESSMODE)}async setupCanvasAsync(){if(this._side&&this._canvasMesh&&this._meshSide&&!this._isRefreshing){this._isRefreshing=!0;var e=this._baseWidth;this._meshSide.get("percWidth")>0&&(e*=this._meshSide.get("percWidth"));var n=this._baseHeight;this._meshSide.get("percHeight")>0&&(n*=this._meshSide.get("percHeight")),this._textureWidth=e,this._textureHeight=n;var s=$("<canvas>",{id:this._canvasID}).attr({width:e,height:n});this._canvas=s[0],this._context=this._canvas.getContext("2d"),this._context&&(this._context.imageSmoothingQuality="high",this._context.imageSmoothingEnabled=!0,this._customizer=new MPlaza.Customizer(!0,!1,this._canvas,!0),this._blankDataUrl=this._canvas.toDataURL(),this._customizer.showSideImage=!1,this._customizer.model=this._zkModel,this._customizer.fitToScreenMargin=this._zkScene.getFitToScreenMargin(),this._customizer.setGrids(this._grids),this._customizer.setDesign(this._zkDesign),await new Promise(async c=>{var u,m;await((u=this._customizer)==null?void 0:u.setSide(this._side)),(m=this._customizer)==null||m.refresh({boundsToAreas:!0},async()=>{if(this._customizer){if(this._meshSide){let b=this._meshSide.get("matrix");if(b){const k=JSON.parse(b);let W=new this._customizer.paper.Matrix(k);this._customizer.paper.view.matrix=W,this._customizer.paper.view.update()}}await this.updateDynamicTextureAsync(),this._customizer.addItemCreatedListener(async()=>{await this.updateDynamicTextureAsync(),this.fireRenderingNeededEvent()}),this._customizer.addItemChangedListener(async()=>{await this.updateDynamicTextureAsync(),this.fireRenderingNeededEvent()}),this._customizer.addItemRemovedListener(async()=>{await this.updateDynamicTextureAsync(),this.fireRenderingNeededEvent()}),this._customizer.addImageLoadedListener(async()=>{await this.updateDynamicTextureAsync(),this.fireRenderingNeededEvent()})}c()})}))}this._isRefreshing=!1}setCustomizerGrids(e){var n;this._grids=e,(n=this._customizer)==null||n.setGrids(e)}restoreOrignalMaterial(){this._mesh&&this._originalMaterial&&this._mesh.material&&this._normalmapMaterial&&this._mesh.material.id===this._normalmapMaterial.id&&(this._mesh.material=this._originalMaterial)}getMeshesUsingMaterial(e){for(var n=[],s=this._scene.meshes,c=0;c<s.length;c++){var u=s[c];if(u.material){if(u.material.id==e)n.push(u);else if(u.material instanceof window.BABYLON.MultiMaterial)for(var m=0;m<u.material.subMaterials.length;m++){let b=u.material.subMaterials[m];if(b!=null&&b.id===e){n.push(u);break}}}}return n}async checkNormalmapMaterialAsync(){this._mesh&&this._normalmapMaterial&&(!this._mesh.material||this._mesh.material.id!==this._normalmapMaterial.id)&&await this.setupNormalmapMaterialAsync()}async checkDynamicMaterialAsync(){let e=this.getMaterialIDForDesign();e&&this._side&&this._canvasMesh&&this._meshSide&&this._dynamicMaterial&&this._dynamicMaterial.id!=e&&await this.setupDynamicMaterialAsync()}async setupDynamicMaterialAsync(){if(this._side&&this._canvasMesh&&this._meshSide){this._ownOldDynamicMaterial=this._ownDynamicMaterial,this._oldDynamicMaterial=this._dynamicMaterial;var e=this.getMaterialIDForDesign();if(e){this._zkScene.get("rootUrl")&&await this._sceneHelper.loadDelayedMaterialAsync(this._zkScene.get("rootUrl"),e);let n=this._scene.getMaterialById(e);n&&(this._dynamicMaterial=await this.cloneMaterialAsync(n,n.name+" - clone"),this._ownDynamicMaterial=!0)}if(!this._dynamicMaterial){if(this._mesh.material&&this._mesh.material instanceof window.BABYLON.PBRBaseMaterial){const n=new window.BABYLON.PBRMaterial("dynamicMaterial",this._scene);n.enableSpecularAntiAliasing=!0,n.backFaceCulling=!1,n.albedoColor=window.BABYLON.Color3.White(),n.reflectivityColor=window.BABYLON.Color3.Black(),n.transparencyMode=this._zkScene.getDefaultDesignMaterialTransparencyMode(),n.useAlphaFromAlbedoTexture=!0,this._mesh.material.subSurface.indexOfRefraction!=null&&(n.subSurface.indexOfRefraction=this._mesh.material.subSurface.indexOfRefraction),nc(this._mesh.material)&&this._mesh.material.roughness!=null&&(n.roughness=this._mesh.material.roughness),nc(this._mesh.material)&&this._mesh.material.metallic!=null&&(n.metallic=this._mesh.material.metallic),nc(this._mesh.material)&&this._mesh.material.reflectionTexture!=null&&(n.reflectionTexture=this._mesh.material.reflectionTexture),nc(this._mesh.material)&&this._mesh.material.microSurface!=null&&(n.microSurface=this._mesh.material.microSurface),this._dynamicMaterial=n}else this._dynamicMaterial=new window.BABYLON.StandardMaterial("dynamicMaterial",this._scene),this._dynamicMaterial.backFaceCulling=!1,this._dynamicMaterial.specularColor=window.BABYLON.Color3.Black(),this._dynamicMaterial.ambientColor=window.BABYLON.Color3.White(),this._dynamicMaterial.diffuseColor=window.BABYLON.Color3.White();this._dynamicMaterial.id=Zakeke.generateUUID(),this._ownDynamicMaterial=!0}this._dynamicMaterial.zOffset=-1,this._dynamicMaterial.metadata={isRealMaterial:!1},this._dynamicMaterial.doNotSerialize=this._ownDynamicMaterial,this._originalDiffuseTexture=this.getMaterialDiffuse(this._dynamicMaterial),this._originalDesignNormalmapTexture=this.getMaterialNormalmap(this._dynamicMaterial),this._originalDesignLightmapTexture=this.getMaterialLightmap(this._dynamicMaterial)}}async cloneMaterialAsync(e,n){if(e){var s=e.getActiveTextures();s.forEach(async u=>{await Tr.whenTextureIsReadyAsync(u)});var c=n||e.name+" - clone";if(e instanceof window.BABYLON.ShaderMaterial){const u=this._zkScene.get("rootUrl");if(!u)return null;let m=e.serialize();return window.BABYLON.Material.Parse(m,this._scene,u)}else return e.clone(c)}return null}getMeshHierarchySize(e){let n=e.getHierarchyBoundingVectors(!0);return n.max.subtract(n.min)}getMeshHierarchyCenter(e){let n=e.getHierarchyBoundingVectors(!0),s=n.max.subtract(n.min);return n.min.add(s.scale(.5))}async refreshAsync(e){this._isRefreshing||(this._isRefreshing=!0,typeof e<"u"&&(this._effect=e),await this.checkDynamicMaterialAsync(),await this.checkNormalmapMaterialAsync(),this.refreshModelSide(),await new Promise(async n=>{var s,c,u;if(this._meshSide&&this.side&&this._customizer){if(await((s=this._customizer)==null?void 0:s.setSide(this.side)),await((c=this._customizer)==null?void 0:c.updateGrids()),(u=this._customizer)==null||u.adaptZoomToSideAreas(!1),this._meshSide&&this._customizer){let m=this._meshSide.get("matrix");if(m){const b=JSON.parse(m);let k=new this._customizer.paper.Matrix(b);if(this._customizer.paper.view.matrix=k,this._customizer.paper.view.rotation+=-this._viewRotation,this._textureWidth!==1024){const W=1024/this._textureWidth;let ve=new paper.Matrix;ve=ve.scale(1/W,1/W);const Ae=k.prepend(ve);this._customizer.paper.view.matrix=Ae}}else this._customizer.paper.view.rotation=-this._viewRotation;this._customizer.paper.view.update()}await this.updateDynamicTextureAsync(),n()}else n()}),this._isRefreshing=!1)}async updateDynamicTextureAsync(){if(this.isFirstRender){console.log("First render..."),await this.updateDynamicTextureInternalAsync(),this.isFirstRender=!1;return}this._debouncedUpdateDynamicTexture||(this._debouncedUpdateDynamicTexture=ic(this.updateDynamicTextureInternalAsync,10)),this._debouncedUpdateDynamicTexture()}async updateDynamicTextureInternalAsync(e=!0){if(Logger.info("updateDynamicTextureInternal"),!this._side||!this._meshSide||!this._canvas||!this._canvasMesh||!this._dynamicMaterial)return;const n=this.getDesignConfig(),s=this._lastUpdateTextureWasDynamic!=e;this._lastUpdateTextureWasDynamic=e,await this.checkDynamicMaterialAsync(),await this.checkNormalmapMaterialAsync();let c=n.getDiffuseEnabled(),u=n.getDiffuseBlendMode(),m=n.getDiffuseLevel();u!=="normal"&&u!=="multiply"&&u!=="overlay"&&(u="normal");const b=n.getOpacityEnabled();n.getOrCreateOpacityConfig();const k=n.getNormalmapEnabled(),W=n.getOrCreateNormalmapConfig(),ve=n.getInnerShadowEnabled(),Ae=n.getOrCreateInnerShadowConfig(),rt=n.getOuterShadowEnabled(),re=n.getOrCreateOuterShadowConfig();let mt="diffuseTexture";const nt=this._meshSide.get("materialTexture");nt?mt=nt:mt=this.getMaterialDiffuseTexturePropertyName(this._dynamicMaterial);let tn=this.getMaterialOpacityTexturePropertyName(this._dynamicMaterial),Ie=this._dynamicTexture;s&&Ie&&(Ie.dispose(),this._dynamicTexture=null);let Kt=this._canvas.toDataURL(),At=Kt==this._blankDataUrl,an=this.dataURItoBlob(Kt),Cn=(window.URL||window.webkitURL).createObjectURL(an);this._dynamicTexture||(e?(this._dynamicTexture=new window.BABYLON.DynamicTexture("dynamicTexture",this._canvas,this._scene),this._dynamicTexture.hasAlpha=!0):(this._dynamicTexture=new window.BABYLON.Texture(Cn,this._scene),this._dynamicTexture.hasAlpha=!0)),e?this._dynamicTexture.update():await Tr.whenTextureIsReadyAsync(this._dynamicTexture),!At&&this._dynamicTexture&&(k&&await this.updateNormalmapTextureAsync(W),ve&&await this.updateInnerShadowTextureAsync(Ae),rt&&await this.updateOuterShadowTextureAsync(re),b&&await this.updateOpacityTextureAsync(),this._originalDiffuseTexture&&c&&u!=="normal"&&await this.combineDiffuseTexturesAsync(u,m),this._showDesign&&(c&&mt&&(u==="normal"||!this._originalDiffuseTexture||!this._combinedDiffuseTexture?(this._dynamicTexture.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(this._dynamicTexture),this._dynamicMaterial[mt]=this._dynamicTexture):this._combinedDiffuseTexture&&(this._combinedDiffuseTexture.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(this._combinedDiffuseTexture),this._dynamicMaterial[mt]=this._combinedDiffuseTexture),this._dynamicMaterial[mt].hasAlpha=!1,this._dynamicMaterial[mt].hasAlpha=!0),!c&&mt&&!this.compareTextures(this._dynamicMaterial[mt],this._originalDiffuseTexture)&&(this._dynamicMaterial[mt]=this._originalDiffuseTexture),b&&tn&&this._dynamicOpacityTexture&&(this._dynamicOpacityTexture.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(this._dynamicOpacityTexture),this._dynamicMaterial instanceof window.BABYLON.ShaderMaterial?this._dynamicMaterial.setTexture(tn,this._dynamicOpacityTexture):this._dynamicMaterial[tn]=this._dynamicOpacityTexture),!b&&tn&&(this._dynamicMaterial[tn]=null),this._canvasMesh.material!==this._dynamicMaterial&&(this._canvasMesh.material=this._dynamicMaterial),k&&this._normalmapTexture?await this.setNormalmapTextureAsync(W):(this.resetMeshNormalmapTexture(),this.resetDesignNormalmapTexture()),ve&&this._innerShadowTexture?await this.setInnerShadowTextureAsync(Ae):this.removeInnerShadowTexture(),rt&&this._outerShadowTexture?await this.setOuterShadowTextureAsync(re):this.removeOuterShadowTexture(),this.disposeOldDynamicMaterial(),this._canvasMesh.isVisible=this._currentVisibliity&&n.getShowDesign())),At&&(this._canvasMesh.isVisible=!1),this.fireRenderingNeededEvent()}resetDynamicTextures(){if(this._dynamicMaterial){let e="diffuseTexture";const n=this._meshSide?this._meshSide.get("materialTexture"):null;n?e=n:e=this.getMaterialDiffuseTexturePropertyName(this._dynamicMaterial),e&&!this.compareTextures(this._dynamicMaterial[e],this._originalDiffuseTexture)&&(this._dynamicMaterial[e]=this._originalDiffuseTexture||new window.BABYLON.Texture(this._blankDataUrl,this._scene),this._dynamicMaterial[e].hasAlpha=!1,this._dynamicMaterial[e].hasAlpha=!0),this.resetDesignNormalmapTexture();let s=this.getMaterialOpacityTexturePropertyName(this._dynamicMaterial);s&&(this._dynamicMaterial[s]=null),this.removeInnerShadowTexture()}this._normalmapMaterial&&(this.resetMeshNormalmapTexture(),this.removeOuterShadowTexture())}async updateOpacityTextureAsync(){this._dynamicTexture&&(await Tr.whenTextureIsReadyAsync(this._dynamicTexture),this._dynamicOpacityTexture||(this._dynamicOpacityTexture=new au("dynamicOpacity",this._textureWidth,this._scene,this._dynamicTexture),this._dynamicOpacityTexture.backColor=new window.BABYLON.Vector3(0,0,0),this._dynamicOpacityTexture.foreColor=new window.BABYLON.Vector3(1,1,1),this._dynamicOpacityTexture.refreshRate=0,this._dynamicOpacityTexture.getAlphaFromRGB=!0),this._dynamicOpacityTexture&&(this._dynamicOpacityTexture.baseTexture=this._dynamicTexture,await Tr.whenTextureIsReadyAsync(this._dynamicOpacityTexture),this._dynamicOpacityTexture.render()))}async combineDiffuseTexturesAsync(e,n){if(!this._originalDiffuseTexture||!this._dynamicTexture)return;await Tr.whenTextureIsReadyAsync(this._originalDiffuseTexture),await Tr.whenTextureIsReadyAsync(this._dynamicTexture);const s=n===0?this._dynamicTexture:this._originalDiffuseTexture,c=n===0?this._originalDiffuseTexture:this._dynamicTexture;this._combinedDiffuseTexture||(e=="multiply"?this._combinedDiffuseTexture=new _u("multiplyDiffuse",this._textureWidth,this._scene,s,c):this._combinedDiffuseTexture=new xf("overlayDiffuse",this._textureWidth,this._scene,s,c),this._combinedDiffuseTexture.refreshRate=0),this._combinedDiffuseTexture&&(this._combinedDiffuseTexture.baseTexture=s,this._combinedDiffuseTexture.blendTexture=c,await Tr.whenTextureIsReadyAsync(this._combinedDiffuseTexture),this._combinedDiffuseTexture.render())}async updateNormalmapTextureAsync(e){this._dynamicTexture&&(await Tr.whenTextureIsReadyAsync(this._dynamicTexture),this._proceduralNormalMap||(this._proceduralNormalMap=new rh(this._dynamicTexture,this._textureWidth,e,this._scene)),this._normalmapTexture=await this._proceduralNormalMap.getNormalMapTextureAsync(this._dynamicTexture,e),this._normalmapTexture&&(this._normalmapTexture.coordinatesIndex=this._coordinatesIndex))}async setNormalmapTextureAsync(e){var n;let s=this._normalmapTexture,c=this._normalmapTexture;if(e.get("showOnMesh")&&this._originalMeshNormalmapTexture&&this._normalmapTexture&&(await this.combineMeshNormalmapTexturesAsync(),this._meshCombinedNormalmapTexture&&(s=this._meshCombinedNormalmapTexture)),e.get("showOnDesign")&&this._originalDesignNormalmapTexture&&this._normalmapTexture&&(await this.combineDesignNormalmapTexturesAsync(),this._designCombinedNormalmapTexture&&(c=this._designCombinedNormalmapTexture)),this._normalmapMaterial&&s){s.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(s);const u=this.getMaterialNormalmapTexturePropertyName(this._normalmapMaterial);e.get("showOnMesh")?this._normalmapMaterial[u]=s:this.resetMeshNormalmapTexture(),this._mesh.material!==this._normalmapMaterial&&(this._mesh.material=this._normalmapMaterial,this._mesh.metadata||(this._mesh.metadata={}),this._mesh.metadata.originalNormalmapMaterialID=(n=this._originalMaterial)==null?void 0:n.id)}if(this._dynamicMaterial&&c){c.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(c);const u=this.getMaterialNormalmapTexturePropertyName(this._dynamicMaterial);e.get("showOnDesign")?this._dynamicMaterial[u]=c:this.resetDesignNormalmapTexture()}}async combineMeshNormalmapTexturesAsync(){!this._originalMeshNormalmapTexture||!this._normalmapTexture||(await Tr.whenTextureIsReadyAsync(this._originalMeshNormalmapTexture),await Tr.whenTextureIsReadyAsync(this._normalmapTexture),this._meshCombinedNormalmapTexture||(this._meshCombinedNormalmapTexture=new xf("overlayMeshNormal",this._textureWidth,this._scene,this._originalMeshNormalmapTexture,this._normalmapTexture),this._meshCombinedNormalmapTexture.refreshRate=0),this._meshCombinedNormalmapTexture&&(this._meshCombinedNormalmapTexture.baseTexture=this._originalMeshNormalmapTexture,this._meshCombinedNormalmapTexture.blendTexture=this._normalmapTexture,await Tr.whenTextureIsReadyAsync(this._meshCombinedNormalmapTexture),this._meshCombinedNormalmapTexture.render()))}resetMeshNormalmapTexture(){if(this._normalmapMaterial){const e=this.getMaterialNormalmapTexturePropertyName(this._normalmapMaterial);this.compareTextures(this._normalmapMaterial[e],this._originalMeshNormalmapTexture)||(this._originalMeshNormalmapTexture?this._normalmapMaterial[e]=this._originalMeshNormalmapTexture:this._normalmapMaterial[e]=null)}}resetDesignNormalmapTexture(){if(this._dynamicMaterial){const e=this.getMaterialNormalmapTexturePropertyName(this._dynamicMaterial);this.compareTextures(this._dynamicMaterial[e],this._originalDesignNormalmapTexture)||(this._originalDesignNormalmapTexture?this._dynamicMaterial[e]=this._originalDesignNormalmapTexture:this._dynamicMaterial[e]=null)}}async combineDesignNormalmapTexturesAsync(){!this._originalDesignNormalmapTexture||!this._normalmapTexture||(await Tr.whenTextureIsReadyAsync(this._originalDesignNormalmapTexture),await Tr.whenTextureIsReadyAsync(this._normalmapTexture),this._designCombinedNormalmapTexture||(this._designCombinedNormalmapTexture=new xf("overlayDesignNormal",this._textureWidth,this._scene,this._originalDesignNormalmapTexture,this._normalmapTexture),this._designCombinedNormalmapTexture.refreshRate=0),this._designCombinedNormalmapTexture&&(this._designCombinedNormalmapTexture.baseTexture=this._originalDesignNormalmapTexture,this._designCombinedNormalmapTexture.blendTexture=this._normalmapTexture,await Tr.whenTextureIsReadyAsync(this._designCombinedNormalmapTexture),this._designCombinedNormalmapTexture.render()))}async updateInnerShadowTextureAsync(e){this._dynamicTexture&&(await Tr.whenTextureIsReadyAsync(this._dynamicTexture),this._innerShadowGenerator?await this._innerShadowGenerator.updateAsync(this._dynamicTexture,e):(this._innerShadowGenerator=new rc(this._dynamicTexture,this._textureWidth,e,this._scene),this._innerShadowTexture=await this._innerShadowGenerator.getInnerShadowTextureAsync(this._dynamicTexture),this._innerShadowTexture.coordinatesIndex=this._coordinatesIndex))}async setInnerShadowTextureAsync(e){let n=this._innerShadowTexture;this._originalDesignLightmapTexture&&this._innerShadowTexture&&(await this.combineDesignLightmapTexturesAsync(),this._designCombinedLightmapTexture&&(n=this._designCombinedLightmapTexture)),n&&(n.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(n),this.setMaterialLightmap(this._dynamicMaterial,n))}async combineDesignLightmapTexturesAsync(){!this._originalDesignLightmapTexture||!this._innerShadowTexture||(await Tr.whenTextureIsReadyAsync(this._originalDesignLightmapTexture),await Tr.whenTextureIsReadyAsync(this._innerShadowTexture),this._designCombinedLightmapTexture||(this._designCombinedLightmapTexture=new _u("overlayDesignLightmaps",this._textureWidth,this._scene,this._originalDesignLightmapTexture,this._innerShadowTexture),this._designCombinedLightmapTexture.refreshRate=0),this._designCombinedLightmapTexture&&(this._designCombinedLightmapTexture.baseTexture=this._originalDesignLightmapTexture,this._designCombinedLightmapTexture.blendTexture=this._innerShadowTexture,await Tr.whenTextureIsReadyAsync(this._designCombinedLightmapTexture),this._designCombinedLightmapTexture.render()))}removeInnerShadowTexture(){if(this._dynamicMaterial){let e=this.getMaterialLightmap(this._dynamicMaterial),n=this._originalDesignLightmapTexture;this.compareTextures(e,n)||this.setMaterialLightmap(this._dynamicMaterial,n)}}async updateOuterShadowTextureAsync(e){this._dynamicTexture&&(await Tr.whenTextureIsReadyAsync(this._dynamicTexture),this._outerShadowGenerator?await this._outerShadowGenerator.updateAsync(this._dynamicTexture,e):(this._outerShadowGenerator=new uo(this._dynamicTexture,this._textureWidth,e,this._scene),this._outerShadowTexture=await this._outerShadowGenerator.getOuterShadowTextureAsync(this._dynamicTexture),this._outerShadowTexture.coordinatesIndex=this._coordinatesIndex))}async setOuterShadowTextureAsync(e){let n=this._outerShadowTexture;this._originalMeshLightmapTexture&&this._outerShadowTexture&&(await this.combineMeshLightmapTexturesAsync(),this._meshCombinedLightmapTexture&&(n=this._meshCombinedLightmapTexture)),n&&(n.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(n),this.setMaterialLightmap(this._normalmapMaterial,n),this._mesh.material!==this._normalmapMaterial&&(this._mesh.material=this._normalmapMaterial))}async combineMeshLightmapTexturesAsync(){!this._originalMeshLightmapTexture||!this._outerShadowTexture||this._isDisposed||(await Tr.whenTextureIsReadyAsync(this._originalMeshLightmapTexture),await Tr.whenTextureIsReadyAsync(this._outerShadowTexture),this._meshCombinedLightmapTexture||(this._meshCombinedLightmapTexture=new _u("overlayMeshLightmap",this._textureWidth,this._scene,this._originalMeshLightmapTexture,this._outerShadowTexture),this._meshCombinedLightmapTexture.refreshRate=0),this._meshCombinedLightmapTexture&&(this._meshCombinedLightmapTexture.baseTexture=this._originalMeshLightmapTexture,this._meshCombinedLightmapTexture.blendTexture=this._outerShadowTexture,await Tr.whenTextureIsReadyAsync(this._meshCombinedLightmapTexture),this._meshCombinedLightmapTexture.render()))}removeOuterShadowTexture(){if(this._normalmapMaterial){const e=this.getMaterialLightmap(this._normalmapMaterial),n=this._originalMeshLightmapTexture;this.compareTextures(e,n)||this.setMaterialLightmap(this._normalmapMaterial,n)}}compareTextures(e,n){return typeof e>"u"&&typeof n>"u"||e===null&&n===null?!0:!e||!n?!1:e===n}dataURItoBlob(e){let n=atob(e.split(",")[1]),s=e.split(",")[0].split(":")[1].split(";")[0],c=new ArrayBuffer(n.length),u=new Uint8Array(c);for(let m=0;m<n.length;m++)u[m]=n.charCodeAt(m);return new Blob([c],{type:s})}downloadImage(e,n){let s=this.dataURItoBlob(e),c=window.URL.createObjectURL(s),u=n||"image.png",m=document.createElement("a");m.download=u,m.innerHTML="Download File",m.href=c,m.onclick=b=>{document.body.removeChild(m)},m.style.display="none",m.setAttribute("type","hidden"),document.body.appendChild(m),m.click()}setDesignMeshVisibility(e){this._currentVisibliity=e,this._canvasMesh&&(this._canvasMesh.isVisible=e)}getItemsInfo(){return this._customizer?this._customizer.getItemsInfo():[]}removeItem(e){this._customizer&&this._customizer.removeItemByGuid(e)}addItemText(e){this._customizer&&this._customizer.addTextElement(null,e,!1)}setItemText(e,n){this._customizer&&this._customizer.modifyTextElementContentByGuid(e,n)}setItemBold(e,n){if(this._customizer){let s=this._customizer.findItemByGuid(e);if(s){let c=this._customizer.getTextItemInfo(s).fontWeight.split(" "),u=[c.length>1?c[0]:"normal"];u.push(n?"bold":"normal"),this._customizer.modifyTextElementFontWeight(s,u.join(" "))}}}setItemItalic(e,n){if(this._customizer){let s=this._customizer.findItemByGuid(e);if(s){let c=this._customizer.getTextItemInfo(s).fontWeight.split(" "),u=[n?"italic":"normal"];u.push(c.length>1?c[1]:c[0]),this._customizer.modifyTextElementFontWeight(s,u.join(" "))}}}setItemColor(e,n){this._customizer&&this._customizer.modifyTextElementFillColorByGuid(e,n)}setItemFontFamily(e,n){this._customizer&&this._customizer.modifyTextElementFontFamilyByGuid(e,n)}async addItemImage(e){this._customizer&&await this._customizer.insertImageById(e)}async setItemImage(e,n){this._customizer&&await this._customizer.replaceImageByGuid(e,n)}setItemTextOnPath(e,n){if(this._customizer){let s=this._customizer.findItemByGuid(e);n?this._customizer.convertToTextOnPath(s):this._customizer.convertToTextArea(s)}}removeItemImage(e){this._customizer&&this._customizer.removeImageByGuid(e)}containsItem(e){if(this._customizer){const n=this._customizer.findItemByGuid(e);return n!=null&&n!=null}return!1}addNotifyMessageListener(e){if(this._customizer){const n=this._customizer;let s=ic((c,u,m,b,k,W,ve,Ae,rt)=>{e(n.side.getSideID(),c,u,m,b,k,Ae.requiredWidth,Ae.requiredHeight,rt)},50);n.addNotifyMessageListeners(s)}}addRemoveMessageListener(e){if(this._customizer){const n=this._customizer;let s=ic(c=>{e(n.side.getSideID(),c)},50);n.addRemoveMessageListeners(s)}}setEventMessages(e){this._customizer&&this._customizer.setCustomizedMessages(e)}fireRenderingNeededEvent(){for(let e=0;e<this._renderingNeededListeners.length;++e)this._renderingNeededListeners[e]()}addRenderingNeededListener(e){this._renderingNeededListeners.push(e)}translateDesignView(e,n){if(this._meshSide&&this._customizer){let m=this._meshSide.get("matrix")||JSON.stringify(this._customizer.paper.view.matrix.values);var s=JSON.parse(m),c=this._customizer.getTranslatedMatrixValues(s,e,n),u=JSON.stringify(c);this._meshSide.set("matrix",u)}}rotateDesignView(e,n,s){if(this._meshSide&&this._customizer){var c=this._meshSide.get("matrix")||JSON.stringify(this._customizer.paper.view.matrix.values),u=JSON.parse(c),m=this._customizer.getRotatedMatrixValues(u,e,n,s),b=JSON.stringify(m);this._meshSide.set("matrix",b)}}scaleDesignView(e,n,s,c){if(this._meshSide&&this._customizer){var u=this._meshSide.get("matrix")||JSON.stringify(this._customizer.paper.view.matrix.values),m=JSON.parse(u),b=this._customizer.getScaledMatrixValues(m,e,n,s,c),k=JSON.stringify(b);this._meshSide.set("matrix",k)}}async setDesignViewTextureUVChannelAsync(e){this._meshSide&&(this._meshSide.set("uvChannel",e),await this.updateDynamicTextureAsync())}async setDesignViewFormFactorAsync(e,n){this._meshSide&&(this._meshSide.set("percWidth",e),this._meshSide.set("percHeight",n),await this.refreshAsync())}async changeToDynamicTexture(){await this.updateDynamicTextureInternalAsync(!0)}async changeToRasterizedTexture(){await this.updateDynamicTextureInternalAsync(!1)}};Vd.DEFAULT_SIZE=1024;let Tl=Vd;class Vl{constructor(e,n,s,c,u=!0){this._rotation=0,this._grids=[],this._meshDesignManagers=[],this._renderingNeededListeners=[],this._designNotifyMessageListeners=[],this._designRemoveMessageListeners=[],this._designEventMessages=[],this._meshDesignManagersRefreshing=new Set,this._scene=e,this._zkScene=n,this._zkModel=s,this._zkDesign=c,this._showDesign=u,this.init()}get showDesign(){return this._showDesign}set showDesign(e){this._showDesign!=e&&(this._showDesign=e,this._meshDesignManagers.forEach(n=>n.showDesign=e))}get rotation(){return this._rotation}set rotation(e){this._rotation!=e&&(this._rotation=e,this._meshDesignManagers.forEach(n=>n.rotation=e))}dispose(){this._meshDesignManagers.forEach(e=>e.dispose())}init(){}isForModels(e,n,s){return this._scene==e&&this._zkModel==n&&this._zkDesign==s}getDefaultModelScene(){if(this._zkModel){let e=this._zkModel.get("scenes").findWhere({isDefault:!0});if(e)return e}return null}getModelSceneMeshSide(e,n=0){if(this._scene&&this._zkModel){const s=this.getDefaultModelScene();if(s)for(let c=0;c<s.get("meshSides").length;c++){let u=s.get("meshSides").at(c);if(u.get("meshID")==e&&u.get("subMeshID")==n)return u}}return null}async refreshAsync(){if(this._scene&&this._zkModel&&this._zkDesign){const e=this.getDefaultModelScene();if(e){let n=null,s=null,c=null;for(let u=0;u<this._meshDesignManagers.length;u++){n=this._meshDesignManagers[u];let m=!1;for(let k=0;k<e.get("meshSides").length;k++)if(c=e.get("meshSides").at(k),c.get("meshID")==n.getMeshID()&&c.get("subMeshID")==n.getSubMeshIdx()){m=!0;break}let b=!0;if(m){let k=n.getMeshID();k&&(s=this._scene.getMeshByID(k),s&&(b=s.isVisible))}(!m||!b)&&(n.dispose(),this._meshDesignManagers.splice(u--,1))}for(let u=0;u<e.get("meshSides").length;u++){c=e.get("meshSides").at(u);const m=c.get("meshID"),b=c.get("subMeshID");m&&await this.refreshMeshDesignAsync(m,b)}}}}isValidEffectForMesh(e,n,s){if(s&&s instanceof MPlaza.ModelSceneMeshDesignEffect){const c=s.getParentModel();if(c&&c instanceof MPlaza.ModelScene)return c.isEffectForMesh(e,n,s.get("effectID"))}return!1}async refreshMeshDesignAsync(e,n=0,s){const c=this._scene.getMeshByID(e);console.log("Refreshing design manager",this._rotation);let u=s;if(s&&!this.isValidEffectForMesh(e,n,s)&&(u=void 0),c&&c.isVisible){let m=null;c.subMeshes&&c.subMeshes.length>0&&n>=0&&n<c.subMeshes.length&&(m=c.subMeshes[n]);let b=this.getMeshDesignMananger(c,m);if(b)b.showDesign=this._showDesign,b.rotation=this._rotation,await b.refreshAsync(u);else{b=await Tl.createMeshDesignManagerAsync(this._scene,this._zkScene,c,m,this._zkModel,this._zkDesign,this._grids,this._showDesign,u,this.rotation),b.addRenderingNeededListener(()=>this.fireRenderingNeededEvent()),b.setEventMessages(this._designEventMessages);for(let k of this._designNotifyMessageListeners)b.addNotifyMessageListener(k);for(let k of this._designRemoveMessageListeners)b.addRemoveMessageListener(k);this._meshDesignManagers.push(b)}}}getMeshDesignMananger(e,n){for(let s=0;s<this._meshDesignManagers.length;s++){const c=this._meshDesignManagers[s];if(c.isForMesh(e,n))return c}return null}clearMeshDesignManagers(){this._meshDesignManagers=[]}setCustomizerGrids(e){this._grids=e,this._meshDesignManagers.forEach(n=>n.setCustomizerGrids(e))}getItemsInfo(){let e=[];for(let n=0;n<this._meshDesignManagers.length;n++){const s=this._meshDesignManagers[n].getItemsInfo();for(let c=0;c<s.length;c++){const u=s[c];let m=!1;for(let b=0;b<e.length;b++)if(e[b].itemGuid==u.itemGuid){m=!0;break}m||e.push(u)}}return e}async execOnMeshManagersContainingItem(e,n){for(const s of this._meshDesignManagers)s.containsItem(e)&&await n(s)}removeItem(e){this.execOnMeshManagersContainingItem(e,async n=>n.removeItem(e))}addItemText(e,n){let s=this._meshDesignManagers.find(c=>c.side!=null&&c.side.get("sideID")===n);s&&s.addItemText(e)}async addItemImage(e,n){let s=this._meshDesignManagers.find(c=>c.side!=null&&c.side.get("sideID")===n);s&&await s.addItemImage(e)}setItemText(e,n){this.execOnMeshManagersContainingItem(e,async s=>s.setItemText(e,n))}setItemItalic(e,n){this.execOnMeshManagersContainingItem(e,async s=>s.setItemItalic(e,n))}setItemBold(e,n){this.execOnMeshManagersContainingItem(e,async s=>s.setItemBold(e,n))}setItemColor(e,n){this.execOnMeshManagersContainingItem(e,async s=>s.setItemColor(e,n))}setItemFontFamily(e,n){this.execOnMeshManagersContainingItem(e,async s=>s.setItemFontFamily(e,n))}async setItemImage(e,n){await this.execOnMeshManagersContainingItem(e,async s=>s.setItemImage(e,n))}setItemTextOnPath(e,n,s){const c=this._meshDesignManagers.find(u=>u.side!=null&&u.side.get("sideID")===n);c&&c.setItemTextOnPath(e,s)}removeItemImage(e){this.execOnMeshManagersContainingItem(e,async n=>n.removeItemImage(e))}setDesignVisibility(e,n){const s=this._scene.getMeshByID(e);if(s){const c=this.getMeshDesignMananger(s,s.subMeshes.length>0?s.subMeshes[0]:null);c&&c.setDesignMeshVisibility(n)}}getDesignItemsJson(){let e="";for(let n=0;n<this._zkDesign.get("designItems").length;n++)e&&(e+=`
`),e+=this._zkDesign.get("designItems").at(n).get("json");return e}getDesignID(){return this._zkDesign.getDesignID()}fireRenderingNeededEvent(){for(let e=0;e<this._renderingNeededListeners.length;++e)this._renderingNeededListeners[e]()}addRenderingNeededListener(e){this._renderingNeededListeners.push(e)}addNotifyMessageListener(e){this._designNotifyMessageListeners.push(e);for(let n of this._meshDesignManagers)n.addNotifyMessageListener(e)}addRemoveMessageListener(e){this._designRemoveMessageListeners.push(e);for(let n of this._meshDesignManagers)n.addRemoveMessageListener(e)}setEventMessages(e){this._designEventMessages=e;for(let n of this._meshDesignManagers)n.setEventMessages(e)}translateDesignView(e,n,s,c){const u=this.getMeshDesignMananger(e,n);u&&u.translateDesignView(s,c)}rotateDesignView(e,n,s,c,u){const m=this.getMeshDesignMananger(e,n);m&&m.rotateDesignView(s,c,u)}scaleDesignView(e,n,s,c,u,m){const b=this.getMeshDesignMananger(e,n);b&&b.scaleDesignView(s,c,u,m)}async setDesignViewTextureUVChannelAsync(e,n,s){const c=this.getMeshDesignMananger(e,n);c&&await c.setDesignViewTextureUVChannelAsync(s)}async setDesignViewFormFactorAsync(e,n,s,c){const u=this.getMeshDesignMananger(e,n);u&&await u.setDesignViewFormFactorAsync(s,c)}async connectMeshToModelSideAsync(e,n,s){let c=this.getModelSceneMeshSide(e,n);if(!c&&this._scene&&this._zkModel){let u=this._scene.getMeshByID(e);if(u&&u.subMeshes&&u.subMeshes.length>0&&n>=0&&n<u.subMeshes.length){u.subMeshes[n];let m=this.getDefaultModelScene();m&&(c=new MPlaza.ModelSceneMeshSide,c.set("meshID",e),c.set("subMeshID",n),c.set("sideID",s),m.get("meshSides").add(c),await this.refreshAsync())}}}expandCanvasMeshes(e){console.log("expandRatio ",e),this._meshDesignManagers.forEach(n=>n.expandCanvasMesh(e))}contractCanvasMeshes(){this._meshDesignManagers.forEach(e=>e.contractCanvasMesh())}async changeToRasterizedTextures(){for(const e of this._meshDesignManagers)await e.changeToRasterizedTexture();console.log("All tasks for rasterized textures completed.")}async changeToDynamicTextures(){for(const e of this._meshDesignManagers)await e.changeToDynamicTexture();console.log("All dynamic textures changes completed.")}}const Ys="base_model";class zu{constructor(e,n,s){this._zkModel=e,this._zkScene=n,this._scene=s,this._sceneHelper=new Tr(s)}replaceModel(e){this._zkModel=e}getOrCreateMaterialsForVariant(e){const n=this.getVariantMeshes(e),s=[];return n.forEach(c=>{const u=this._scene.getMeshById(c);u&&u.getChildMeshes().forEach(m=>s.push(m))}),this.hasVariantCustomModel(e)?this.getMaterialsForMeshes(s):(this.getMaterialsForMeshes(s).forEach(c=>{this.isSceneMaterialForVariant(c)||this.setVariableMaterialID(c.id)}),this.getVariantMaterials(e))}getPossibleVariableMaterials(){const e=this._sceneHelper.getAllMaterials(),n=[];for(let s=0;s<e.length;s++){const c=e[s],u=this.getMeshesUsingMaterial(c.id),m=this.isSceneMaterialForVariant(c);u.length>0&&!m&&n.push(c)}return n}getVariableMaterials(){const e=[],n=this._zkModel.getPreview3D();if(n){const s=n.getVariantsAttributeOptions();if(s)for(let c=0;c<s.get("variableMaterials").length;c++){let u=s.get("variableMaterials").at(c).get("materialID"),m=this._scene.getMaterialById(u);m&&e.push(m)}}return e}getVariableMaterialsSelection(){const e=this.getVariableMaterials().map(n=>n.id);return this.getPossibleVariableMaterials().map(n=>({id:n.id,name:n.name,selected:e.indexOf(n.id)!=-1}))}getVariantMaterialsWithOriginal(e){const n=[],s=this._zkModel.getPreview3D();if(s&&e&&e instanceof MPlaza.Color){const c=this.getVariantID(e),u=s.getVariantsAttributeOptions();if(u){const m=u.getVariantOption(c);if(m)for(let b=0;b<m.get("materials").length;b++){const k=m.get("materials").at(b),W=k.get("optionMaterialID"),ve=this._scene.getMaterialById(W),Ae=k.get("variableMaterialID"),rt=this._scene.getMaterialById(Ae);ve&&rt&&n.push({material:ve,variableMaterial:rt})}}}return n}updateVariableMaterials(){const e=this._zkModel.getPreview3D();if(e){const n=e.getVariantsAttributeOptions();if(n){const s=[],c=[];for(let u=0;u<n.get("variableMaterials").length;u++){const m=n.get("variableMaterials").at(u).get("materialID");this._scene.getMaterialById(m)?s.push(m):c.push(m)}s.forEach(u=>this.setVariableMaterialID(u)),c.forEach(u=>this.unsetVariableMaterialID(u))}}}unsetVariableMaterialID(e){const n=this._zkModel.getPreview3D();if(n){const s=n.getVariantsAttributeOptions();if(s){const c=this._zkModel.getAttributeByGuid(s.get("attributeGuid")),u=s.get("variableMaterials").getVariableMaterial(e);if(u){const b=this._scene.getMaterialById(e);if(b)for(let k=0;k<u.get("meshes").length;k++){const W=this._scene.getMeshById(u.get("meshes")[k]);W&&this._sceneHelper.applyMaterial(b,W)}}s.removeVariableMaterial(e);const m=[];for(let b=0;b<s.get("variantOptions").length;b++){const k=s.get("variantOptions").at(b);let W=null;c&&(W=c.getOptionByGuid(k.get("optionGuid")));const ve=[];for(let Ae=0;Ae<k.get("materials").length;Ae++){const rt=k.get("materials").at(Ae);if(rt.get("variableMaterialID")===e){for(let re=0;re<rt.get("actions").length;re++){const mt=rt.get("actions").at(re);if(W){const nt=W.get("actions").getActionByGuid(mt.get("actionGuid"));nt&&W.get("actions").remove(nt)}}this.deleteSceneMaterial(rt.get("optionMaterialID")),ve.push(rt)}}k.get("materials").remove(ve),k.get("materials").length===0&&m.push(k)}for(let b=0;b<m.length;b++)this.removeVariantOption(s,m[b])}}}setVariableMaterialID(e){const n=this._scene.getMaterialById(e);if(n){const s=this.getMeshesUsingMaterial(n.id),c=s.map(b=>b.id),u=this._zkModel.getOrCreatePreview3D().getOrCreateVariantsAttributeOptions();u.setVariableMaterial(e,c);const m=[];for(let b=0;b<this._zkModel.get("colors").length;b++){const k=this._zkModel.get("colors").at(b),W=this.getVariantID(k);m.push(W),this.checkVariantOption(u,n,s,k)}for(let b=0;b<u.get("variantOptions").length;b++){const k=u.get("variantOptions").at(b);m.indexOf(k.get("variantID"))===-1&&this.removeVariantOption(u,k)}}}getVariantAttribute(){const e=this._zkModel.getPreview3D();if(!e)return null;const n=e.getVariantsAttributeOptions();if(!n)return null;let s=null;return n.get("attributeGuid")&&(s=this._zkModel.getAttributeByGuid(n.get("attributeGuid"))),s||(s=this._zkModel.get("attributes").getAttributeByCode("variants_attribute")),s}checkVariantOption(e,n,s,c){const u=this.getVariantID(c);let m=e.get("variantOptions").getVariantOption(u);m||(m=this.createVariantOption(e,c)),this.checkVariantOptionMaterial(e,m,n,s,c)}createVariantOption(e,n){const s=this.getVariantID(n),c=this.getOrCreateVariantAttribute(e),u=this.getOrCreateVariantAttributeOption(e,n,c),m=new MPlaza.VariantOption;return m.set("variantID",s),m.set("optionGuid",u.get("optionGuid")),e.get("variantOptions").push(m),m}removeVariantOption(e,n){const s=this._zkModel.getAttributeByGuid(e.get("attributeGuid"));if(s){const c=s.getOptionByGuid(n.get("optionGuid"));c&&s.get("options").remove(c)}for(let c=0;c<n.get("materials").length;c++){const u=n.get("materials").at(c).get("optionMaterialID");this.deleteSceneMaterial(u)}e.get("variantOptions").remove(n)}getOrCreateVariantAttribute(e){let n=this.getVariantAttribute();if(!n){for(let s=0;s<e.get("variantOptions").length;s++)this.removeVariantOption(e,e.get("variantOptions").at(s));n=new MPlaza.Attribute,n.set("attributeGuid",MPlaza.generateUUID()),n.set("name","Variants attribute"),n.set("attributeCode","variants_attribute"),n.set("attributeTypeID",MPlaza.AttributeType.Options),this._zkModel.get("attributes").push(n)}return e.set("attributeGuid",n.get("attributeGuid")),n}getOrCreateVariantAttributeOption(e,n,s){const c=this.getVariantID(n);let u=s.getOptionByCode(c);return u||(u=new MPlaza.AttributeOption,u.set("optionCode",c),u.set("name",n.get("name")),s.get("options").push(u)),u}getVariantID(e){return`${e.getModelID()}_${e.getColorID()}`}checkVariantOptionMaterial(e,n,s,c,u){const m=this.getVariantID(u);let b=null;for(let k=0;k<n.get("materials").length;k++){const W=n.get("materials").at(k);if(W.get("variableMaterialID")===s.id){b=W;break}}if(!b){let k=this.getSceneMaterialForVariant(m,s.id);if(!k){const W=`${s.name} - ${u.get("name")}`;k=this.cloneSceneMaterial(s.id,void 0,W),k&&this.setupSceneMaterialForVariant(k,m,s.id)}k&&(b=new MPlaza.VariantOptionMaterial,b.set("optionMaterialID",k.id),b.set("variableMaterialID",s.id),n.get("materials").push(b))}b&&this.checkVariantOptionActions(e,n,b,s,c,u)}setupSceneMaterialForVariant(e,n,s){const c=this.getOrCreateSceneMaterialMetadata(e.id);c.isForPreview=!0,c.autoCreate=!0,c.variantID=n,c.variableMaterialID=s}getSceneMaterialForVariant(e,n){const s=this._sceneHelper.getAllMaterials();for(let c=0;c<s.length;c++){const u=s[c],m=this.getSceneMaterialMetadata(u.id);if(m&&m.isForPreview&&m.variantID===e&&m.variableMaterialID===n)return s[c]}return null}isSceneMaterialForVariant(e){if(!e)return!1;const n=this.getSceneMaterialMetadata(e.id);return n&&n.isForPreview}canDeleteSceneMaterialForVariant(e){if(!e)return!1;const n=this.getSceneMaterialMetadata(e.id);return!n||n.isForPreview===void 0||n.isForPreview===null||n.autoCreate===void 0||n.autoCreate===null?!0:n.isForPreview&&n.autoCreate}getSceneMaterialMetadata(e){return this._sceneHelper.getSceneMaterialMetadata(e)}getOrCreateSceneMaterialMetadata(e){return this._sceneHelper.getOrCreateSceneMaterialMetadata(e)}removeSceneMaterialMetadata(e){this._sceneHelper.removeSceneMaterialMetadata(e)}cloneSceneMaterial(e,n,s){let c=this._scene.getMaterialById(e),u=null;if(c){const m=s||`${c.name} - clone`;if(u=c.clone(m),u){const b=n||MPlaza.generateUUID();u.id=b;const k=this._zkScene.getMappingForSceneMaterial(c.id);if(k){const W=k.get("libraryMaterialID");this._zkScene.mapLibraryMaterial(W,u.id);const ve=this._sceneHelper.getTexturesForMaterial(u),Ae=this._sceneHelper.getTexturesForMaterial(u);for(let rt=0;rt<Ae.length;rt++){const re=Ae[rt],mt=ve[rt];re.materialMapping=mt.materialMapping}}}}return u}deleteSceneMaterial(e){const n=this._scene.getMaterialByID(e);if(n&&this.canDeleteSceneMaterialForVariant(n)){this.removeSceneMaterialMetadata(e);const s=this._zkScene.getLibraryShaderMaterialIDForSceneMaterial(e);s&&this._zkScene.unregisterShaderMaterial(s),this._zkScene.removeMappingForSceneMaterial(n.id);const c=this._sceneHelper.getTexturesExclusivelyForMaterial(n);n.dispose();for(let u=0;u<c.length;u++)c[u].dispose()}}checkVariantOptionActions(e,n,s,c,u,m){let b=[];u.forEach(Ae=>b.push(Ae.id));let k=this.getOrCreateVariantAttribute(e),W=this.getOrCreateVariantAttributeOption(e,m,k);for(let Ae=0;Ae<u.length;Ae++){let rt=u[Ae],re=s.get("actions").getActionForMesh(rt.id);if(!re){let mt=new MPlaza.AttributeSceneAction;mt.set("name",""),mt.set("actionTypeID",MPlaza.SceneActionType.SetMeshMaterial),mt.set("sceneElementTypeID",MPlaza.SceneElementType.Mesh),mt.set("selector",rt.id),mt.set("value",s.get("optionMaterialID")),W.get("actions").push(mt),re=new MPlaza.VariantOptionMaterialAction,re.set("actionGuid",mt.get("actionGuid")),re.set("meshID",rt.id),s.get("actions").push(re)}}let ve=[];for(let Ae=0;Ae<s.get("actions").length;Ae++){let rt=s.get("actions").at(Ae);if(b.indexOf(rt.get("meshID"))===-1){let re=W.getActionByGuid(rt.get("actionGuid"));re&&W.get("actions").remove(re),ve.push(rt)}}s.get("actions").remove(ve)}isMaterialReal(e){var n,s;const c=((n=e.metadata)==null?void 0:n.isRealMaterial)!==!1&&e.id!=="default material",u=((s=e.metadata)==null?void 0:s.isDesignMaterial)===!0;return c&&!u}getVariantMaterials(e){let n=[];const s=this._zkModel.getPreview3D();if(s&&e&&e instanceof MPlaza.Color){const c=this.getVariantID(e),u=s.getVariantsAttributeOptions();if(u){const m=u.getVariantOption(c);if(m)for(let b=0;b<m.get("materials").length;b++){const k=m.get("materials").at(b).get("optionMaterialID"),W=this._scene.getMaterialById(k);W&&this.isMaterialReal(W)&&n.push(W)}}}return n}getSelectedAttributeOption(e){let n={attributeID:null,attributeGuid:null,optionID:null,optionGuid:null};const s=this._zkModel.getPreview3D();if(s&&e&&e instanceof MPlaza.Color){const c=this.getVariantID(e),u=s.getVariantsAttributeOptions();if(u&&u.get("attributeGuid")){const m=this._zkModel.getAttributeByGuid(u.get("attributeGuid"));if(m){const b=u.getVariantOption(c);if(b){const k=m.getOptionByGuid(b.get("optionGuid"));k&&(n.attributeID=m.get("attributeID"),n.attributeGuid=m.get("attributeGuid"),n.optionID=k.get("optionID"),n.optionGuid=k.get("optionGuid"))}}}}return n}resetOriginaMaterialsOnMeshes(){const e=this._zkModel.getPreview3D();if(e){const n=e.getVariantsAttributeOptions();if(n)for(let s=0;s<n.get("variableMaterials").length;s++){const c=n.get("variableMaterials").at(s),u=c.get("materialID"),m=c.get("meshes"),b=this._scene.getMaterialByID(u);if(b)for(let k=0;k<m.length;k++){const W=this._scene.getMeshById(c.get("meshes")[k]);W&&this._sceneHelper.applyMaterial(b,W)}}}}getMeshesUsingMaterial(e){const n=[],s=this._sceneHelper.getSceneMeshes();for(let c=0;c<s.length;c++){const u=s[c];if(this._sceneHelper.isMeshUsingMaterial(u,e))n.push(u);else{const m=this._sceneHelper.getMeshMaterials(u);for(let b=0;b<m.length;b++){const k=m[b],W=this.getSceneMaterialMetadata(k.id);if(W&&W.isForPreview&&W.variableMaterialID&&W.variableMaterialID===e){n.push(u);break}}}}return n}getMaterialsForMeshes(e){const n=e.map(c=>typeof c=="string"?this._scene.getMeshById(c):c),s=[];for(let c=0;c<n.length;c++){const u=n[c];if(u){const m=this._sceneHelper.getMeshMaterials(u);for(let b=0;b<m.length;b++){const k=m[b];s.indexOf(k)===-1&&this.isMaterialReal(k)&&s.push(k)}}}return s}getVariantMeshes(e){const n=this._zkModel.getPreview3D();if(!n)return[Ys];const s=n==null?void 0:n.getVariantsAttributeOptions();if(!s)return[Ys];const c=this.getVariantID(e),u=s.get("variantOptions").getVariantOption(c);if(!u)return[Ys];const m=u.get("meshes");return m.length>0?m:[Ys]}getVariantByMeshID(e){const n=this._zkModel.getPreview3D();if(!n)return null;const s=n.getVariantsAttributeOptions();if(!s)return null;for(let c=0;c<this._zkModel.get("colors").length;c++){const u=this._zkModel.get("colors").at(c),m=this.getVariantID(u),b=s.getVariantOption(m);if(b&&b.get("meshes").indexOf(e)!==-1)return u}return null}hasVariantCustomModel(e){const n=this.getVariantMeshes(e);return!(n.length===1&&n[0]===Ys)}setVariantMeshes(e,n){const s=this._zkModel.getOrCreatePreview3D().getOrCreateVariantsAttributeOptions(),c=this.getVariantID(e);let u=s.get("variantOptions").getVariantOption(c);u||(u=this.createVariantOption(s,e)),u.set("meshes",n),this.refreshOptionsShowHideVariantModels()}removeVariantMeshes(e){const n=this._zkModel.getOrCreatePreview3D().getOrCreateVariantsAttributeOptions(),s=this.getVariantID(e);let c=n.get("variantOptions").getVariantOption(s);if(c){const u=c.get("meshes");for(const m of u){const b=this._scene.getMeshById(m);b==null||b.dispose(!1,!0)}c.set("meshes",[])}this.updateVariableMaterials(),this.refreshOptionsShowHideVariantModels()}setBaseMeshes(e){let n=this._scene.getMeshById(Ys);n||(n=new window.BABYLON.Mesh(Ys,this._scene),n.id=Ys);for(const s of e){const c=this._scene.getMeshById(s);c&&c.setParent(n)}}removeBaseMeshes(){const e=this._scene.getMeshById(Ys);if(e){const n=e.getChildMeshes(!0);for(const s of n)s.setParent(null)}}upgradeToBaseMeshes(){this._scene.getMeshById(Ys)!==null||this.setBaseMeshes(this._scene.meshes.filter(e=>!e.parent&&e.id!==Ys).map(e=>e.id)??[])}refreshOptionsShowHideVariantModels(){const e=this._zkModel.getOrCreatePreview3D().getOrCreateVariantsAttributeOptions(),n=this.getOrCreateVariantAttribute(e);for(let s=0;s<this._zkModel.get("colors").length;s++){const c=this._zkModel.get("colors").at(s),u=this.getVariantID(c);let m=e.get("variantOptions").getVariantOption(u);m||(m=this.createVariantOption(e,c));const b=this.getOrCreateVariantAttributeOption(e,c,n);let k=b.get("actions").find(W=>W.get("selector")==="*"&&W.get("actionTypeID")===MPlaza.SceneActionType.ShowHideMesh);k||(k=new MPlaza.AttributeSceneAction,k.set("name",""),k.set("actionTypeID",MPlaza.SceneActionType.ShowHideMesh),k.set("sceneElementTypeID",MPlaza.SceneElementType.Mesh),k.set("selector","*"),k.set("value","hide"),b.get("actions").push(k));for(let W=0;W<b.get("actions").length;W++){const ve=b.get("actions").at(W);ve.get("actionTypeID")===MPlaza.SceneActionType.ShowHideMesh&&ve.get("selector")!=="*"&&(b.get("actions").remove(ve),W--)}if((m==null?void 0:m.get("meshes").length)===0){const W=new MPlaza.AttributeSceneAction;W.set("name",""),W.set("actionTypeID",MPlaza.SceneActionType.ShowHideMesh),W.set("sceneElementTypeID",MPlaza.SceneElementType.Mesh),W.set("selector",Ys),W.set("value","show"),b.get("actions").push(W)}else for(const W of m.get("meshes")){const ve=new MPlaza.AttributeSceneAction;ve.set("name",""),ve.set("actionTypeID",MPlaza.SceneActionType.ShowHideMesh),ve.set("sceneElementTypeID",MPlaza.SceneElementType.Mesh),ve.set("selector",W),ve.set("value","show"),b.get("actions").push(ve)}}}setDesignMaterialForVariantEnabled(e,n){var s;const c=this.hasVariantCustomModel(e)?e.get("colorID"):null,u=this._zkModel.get("scenes").at(0).get("meshSides").filter(k=>k.get("colorID")===c),m=(s=u.at(0))==null?void 0:s.get("materialID");let b=m?this._scene.getMaterialById(m):null;n||(u.forEach(k=>{k.set("materialID",null)}),b&&(u.some(k=>k.get("materialID")===b.id)||b.dispose())),n&&!b&&(b=new window.BABYLON.PBRMaterial("Design material",this._scene),b.id=Zakeke.generateUUID(),b.zOffset=-1,b.metallic=.5,b.roughness=.2,u.forEach(k=>{k.set("materialID",b.id)}))}getDesignMaterialForVariant(e){const n=this.hasVariantCustomModel(e)?e.get("colorID"):null,s=this._zkModel.get("scenes").at(0).get("meshSides").find(u=>u.get("colorID")===n),c=s?s.get("materialID"):null;return c?this._scene.getMaterialById(c):null}}function nd(y){return typeof importScripts=="function"?(importScripts(y),Promise.resolve()):new Promise((e,n)=>{window.BABYLON.Tools.LoadScript(y,()=>{e()},s=>{n(new Error(s))})})}function Hd(y){return new Promise((e,n)=>{window.BABYLON.Tools.LoadFile(y,s=>{e(s)},void 0,void 0,!0,(s,c)=>{n(c)})})}function rd(y,e,n){const s=e&&y||n;if(s)return nd(s).then(()=>new Promise(c=>{DracoDecoderModule({wasmBinary:e}).then(u=>{c({module:u})})}))}function id(y,e,n,s,c){const u=new y.DecoderBuffer;u.Init(e,e.byteLength);const m=new y.Decoder;let b,k;try{const ve=m.GetEncodedGeometryType(u);switch(ve){case y.TRIANGULAR_MESH:b=new y.Mesh,k=m.DecodeBufferToMesh(u,b);break;case y.POINT_CLOUD:b=new y.PointCloud,k=m.DecodeBufferToPointCloud(u,b);break;default:throw new Error(`Invalid geometry type ${ve}`)}if(!k.ok()||!b.ptr)throw new Error(k.error_msg());const Ae=b.num_points();if(ve===y.TRIANGULAR_MESH){const re=b.num_faces(),mt=new y.DracoInt32Array;try{const nt=new Uint32Array(re*3);for(let tn=0;tn<re;tn++){m.GetFaceFromMesh(b,tn,mt);const Ie=tn*3;nt[Ie+0]=mt.GetValue(0),nt[Ie+1]=mt.GetValue(1),nt[Ie+2]=mt.GetValue(2)}s(nt)}finally{y.destroy(mt)}}const rt=(re,mt)=>{const nt=new y.DracoFloat32Array;try{m.GetAttributeFloatForAllPoints(b,mt,nt);const tn=new Float32Array(Ae*mt.num_components());for(let Ie=0;Ie<tn.length;Ie++)tn[Ie]=nt.GetValue(Ie);c(re,tn)}finally{y.destroy(nt)}};if(n)for(const re in n){const mt=n[re],nt=m.GetAttributeByUniqueId(b,mt);rt(re,nt)}else{const re={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD",uv2:"TEX_COORD",uv3:"TEX_COORD",uv4:"TEX_COORD",uv5:"TEX_COORD",uv6:"TEX_COORD"},mt=/^uv(\d+)$/;for(const nt in re){const tn=nt.match(mt);let Ie=-1;if(tn&&tn.length>1){var W=parseInt(tn[1],10);const Kt=m.GetAttributeId(b,y.TEX_COORD);Kt!==-1&&(Ie=Kt+W-1)}else Ie=m.GetAttributeId(b,y[re[nt]]);if(Ie!==-1){const Kt=m.GetAttributeByUniqueId(b,Ie);Kt&&Kt.size()>0&&rt(nt,Kt)}}}}finally{b&&y.destroy(b),y.destroy(m),y.destroy(u)}}function Df(){let y;onmessage=e=>{const n=e.data;switch(n.id){case"init":{const s=n.decoder;y=rd(s.wasmUrl,s.wasmBinary,s.fallbackUrl),postMessage("done");break}case"decodeMesh":{if(!y)throw new Error("Draco decoder module is not available");y.then(s=>{id(s.module,n.dataView,n.attributes,c=>{postMessage({id:"indices",value:c},[c.buffer])},(c,u)=>{postMessage({id:c,value:u},[u.buffer])}),postMessage("done")});break}}}}function Hl(y){return typeof document!="object"||typeof y!="string"?y:window.BABYLON.Tools.GetAbsoluteUrl(y)}const Su=class Lg{static get DecoderAvailable(){const e=Lg.Configuration.decoder;return!!(e.wasmUrl&&e.wasmBinaryUrl&&typeof WebAssembly=="object"||e.fallbackUrl)}static GetDefaultNumWorkers(){return typeof navigator!="object"||!navigator.hardwareConcurrency?1:Math.min(Math.floor(navigator.hardwareConcurrency*.5),1)}static get Default(){return Lg._Default||(Lg._Default=new Lg),Lg._Default}constructor(e=Lg.DefaultNumWorkers){const n=Lg.Configuration.decoder,s=n.wasmUrl&&n.wasmBinaryUrl&&typeof WebAssembly=="object"?Hd(Hl(n.wasmBinaryUrl)):Promise.resolve(void 0);e&&typeof Worker=="function"?this._workerPoolPromise=s.then(c=>{const u=`${nd}${rd}${id}(${Df})()`,m=URL.createObjectURL(new Blob([u],{type:"application/javascript"})),b=new Array(e);for(let k=0;k<b.length;k++)b[k]=new Promise((W,ve)=>{const Ae=new Worker(m),rt=mt=>{Ae.removeEventListener("error",rt),Ae.removeEventListener("message",re),ve(mt)},re=mt=>{mt.data==="done"&&(Ae.removeEventListener("error",rt),Ae.removeEventListener("message",re),W(Ae))};Ae.addEventListener("error",rt),Ae.addEventListener("message",re),Ae.postMessage({id:"init",decoder:{wasmUrl:Hl(n.wasmUrl),wasmBinary:c,fallbackUrl:Hl(n.fallbackUrl)}})});return Promise.all(b).then(k=>new Fd(k))}):this._decoderModulePromise=s.then(c=>rd(n.wasmUrl,c,n.fallbackUrl))}dispose(){}whenReadyAsync(){return this._workerPoolPromise?this._workerPoolPromise.then(()=>{}):this._decoderModulePromise?this._decoderModulePromise.then(()=>{}):Promise.resolve()}decodeMeshAsync(e,n){const s=e instanceof ArrayBuffer?new Uint8Array(e):e;if(this._workerPoolPromise)return this._workerPoolPromise.then(c=>new Promise((u,m)=>{c.push((b,k)=>{const W=new window.BABYLON.VertexData,ve=re=>{b.removeEventListener("error",ve),b.removeEventListener("message",Ae),m(re),k()},Ae=re=>{re.data==="done"?(b.removeEventListener("error",ve),b.removeEventListener("message",Ae),u(W),k()):re.data.id==="indices"?W.indices=re.data.value:W.set(re.data.value,re.data.id)};b.addEventListener("error",ve),b.addEventListener("message",Ae);const rt=new Uint8Array(s.byteLength);rt.set(new Uint8Array(s.buffer,s.byteOffset,s.byteLength)),b.postMessage({id:"decodeMesh",dataView:rt,attributes:n},[rt.buffer])})}));if(this._decoderModulePromise)return this._decoderModulePromise.then(c=>{const u=new window.BABYLON.VertexData;return id(c.module,s,n,m=>{u.indices=m},(m,b)=>{u.set(b,m)}),u});throw new Error("Draco decoder module is not available")}};Su.Configuration={decoder:{wasmUrl:"https://cdn.zakeke.com/cdn/Scripts/draco/1.3.4/rev.1/draco_wasm_wrapper.js",wasmBinaryUrl:"https://cdn.zakeke.com/cdn/Scripts/draco/1.3.4/rev.1/draco_decoder.wasm",fallbackUrl:"https://cdn.zakeke.com/cdn/Scripts/draco/1.3.4/rev.1/draco_decoder.js"}},Su.DefaultNumWorkers=Su.GetDefaultNumWorkers(),Su._Default=null;let kh=Su;class Ih{constructor(e,n,s=!1){this._originalSceneClearColor=null,this._originalCameraAutoRotate=null,this._environmentHelper=null,this._shadowLight=null,this._isHologram=!1,this._zkScene=e,this._scene=n,this._sceneHelper=new Tr(this._scene),this._isHologram=s}get scene(){return this._scene}get isHologram(){return this._isHologram}set isHologram(e){this._isHologram=e,this.update()}dispose(){this._shadowLight&&this._shadowLight.dispose(),this._environmentHelper&&(this._environmentHelper.dispose(),this._environmentHelper=null),this.removeOldSkybox()}update(){this.configureScene(),this.configureCamera(),this.configureSkybox()}configureSkybox(){this.removeOldSkybox(),this._isHologram||this.createSkybox()}removeOldSkybox(){const e=this.getSkyboxMesh(),n=this.getSkyboxMaterial();e&&e.dispose(),n&&n.dispose()}createSkybox(){var e,n;this.getGeneralConfig();const s=this.getEnvironmentConfig(),c=this.getSkyboxConfig();if(c&&c.get("createSkybox")!=null&&c.get("createSkybox")){s&&s.get("sizeAuto")!=null&&s.get("sizeAuto")!=null&&typeof s.get("sizeAuto")=="boolean"&&s.get("sizeAuto");let u=null;c.get("size")!=null&&typeof c.get("size")=="number"&&(u=c.get("size"));let m=null;c.get("texture")!=null&&typeof c.get("texture")=="string"&&(m=c.get("texture"));let b=0;c.get("blur")>0&&(b=c.get("blur"));let k=null;c.get("extensions")!=null&&c.get("extensions")!=null&&Object.prototype.toString.call(c.get("extensions"))==="[object Array]"&&((e=c.get("extensions"))==null?void 0:e.length)===6&&(k=c.get("extensions"));let W=null;if(c.get("files")!=null&&c.get("files")!=null&&Object.prototype.toString.call(c.get("files"))==="[object Array]"&&((n=c.get("files"))==null?void 0:n.length)===6&&(W=c.get("files")),m){let ve=null;if(m.endsWith(".dds")?ve=window.BABYLON.CubeTexture.CreateFromPrefilteredData(m,this._scene):m.endsWith(".hdr")?ve=new window.BABYLON.HDRCubeTexture(m,this._scene,256,!1,!0,!1,!0):m.endsWith(".env")?ve=new window.BABYLON.CubeTexture(m,this._scene,null,!1,null,void 0,null,void 0,!0,void 0,!0):m.endsWith(".basis")?ve=window.BABYLON.CubeTexture.CreateFromPrefilteredData(m,this._scene):k&&W?ve=new window.BABYLON.CubeTexture(m,this._scene,k,!1,W,void 0):ve=window.BABYLON.CubeTexture.CreateFromPrefilteredData(m,this._scene),ve){let Ae=1e3;u!=null&&u>0?Ae=u:Ae=(this._scene.activeCamera.maxZ-this._scene.activeCamera.minZ)/2;const rt=this._scene.createDefaultSkybox(ve,!0,Ae,b,!1);if(rt){rt.metadata={isSkyboxMesh:!0,isRealMesh:!1},rt.doNotSerialize=!0;const re=rt.material;re&&(re.metadata={isSkyboxMaterial:!0,isRealMaterial:!1},re.doNotSerialize=!0)}}}}}getSkyboxMesh(){return this._scene.meshes.find(e=>e.metadata&&e.metadata.isSkyboxMesh)||null}getSkyboxMaterial(){return this._scene.materials.find(n=>n.metadata&&n.metadata.isSkyboxMaterial)||null}getSkyboxTexture(){const e=this.getSkyboxMaterial();return e?e.reflectionTexture:null}update_OLD(){this.configureScene(),this.configureCamera(),this.configureEnvironment()}configureScene(){if(this._scene){if(this._scene.clearColor=new window.BABYLON.Color4(0,0,0,0),this._originalSceneClearColor=this._scene.clearColor.clone(),this._isHologram){this._scene.clearColor=new window.BABYLON.Color4(0,0,0,1);return}var e=this.getGeneralConfig();if(e){let n=null;e.get("backgroundAlpha")!=null&&e.get("backgroundAlpha")!=null&&typeof e.get("backgroundAlpha")=="number"&&(n=e.get("backgroundAlpha"));let s=null;if(e.get("backgroundColor")!=null&&typeof e.get("backgroundColor")=="string"&&this.isValidHexColor(e.get("backgroundColor"))&&(s=e.get("backgroundColor")),n||s){this._originalSceneClearColor=this._scene.clearColor;let c=this._scene.clearColor;if(s!=null){let u=window.BABYLON.Color3.FromHexString(s);c.r=u.r,c.g=u.g,c.b=u.b}n!=null&&(c.a=n)}}}}configureEnvironment(){if(this._environmentHelper&&(this._environmentHelper.dispose(),this._environmentHelper=null),this._shadowLight&&(this._shadowLight.dispose(),this._shadowLight=null),this._sceneHelper.countSceneMeshes()!=0){var e=this.buildEnvironmentHelperOptions();if(e){this._environmentHelper=this._scene.createDefaultEnvironment(e);const n=this.getEnvironmentSceneNodes();for(let s=0;s<n.length;s++){const c=n[s];c&&(this.setDoNotSerialize(c),c.metadata||(c.metadata={}),c.metadata.isEnvironmentNode=!0,c instanceof window.BABYLON.AbstractMesh&&(c.isPickable=!1,c.metadata.isRealMesh=!1),c instanceof window.BABYLON.Material&&(c.metadata.isRealMaterial=!1))}}}}buildEnvironmentHelperOptions(){let e=null;const n=this.getGeneralConfig(),s=this.getEnvironmentConfig(),c=this.getSkyboxConfig(),u=this.getGroundConfig(),m=this.getCameraConfig();let b=null;n&&n.get("environmentTexture")!=null&&n.get("environmentTexture")!=null&&(b=n.get("environmentTexture"));let k=null;m&&m.get("contrast")!=null&&typeof m.get("contrast")=="number"&&(k=m.get("contrast"));let W=null;m&&m.get("exposure")!=null&&typeof m.get("exposure")=="number"&&(W=m.get("exposure"));let ve=null;m&&m.get("toneMappingEnabled")!=null&&typeof m.get("toneMappingEnabled")=="boolean"&&(ve=m.get("toneMappingEnabled"));let Ae=null;s&&s.get("sizeAuto")!=null&&s.get("sizeAuto")!=null&&typeof s.get("sizeAuto")=="boolean"&&(Ae=s.get("sizeAuto"));let rt=null;s&&s.get("mainColor")!=null&&typeof s.get("mainColor")=="string"&&this.isValidHexColor(s.get("mainColor"))&&(rt=s.get("mainColor"));let re=null;u&&u.get("size")!=null&&typeof u.get("size")=="number"&&(re=u.get("size"));let mt=null;u&&u.get("color")!=null&&typeof u.get("color")=="string"&&this.isValidHexColor(u.get("color"))&&(mt=u.get("color"));let nt=null;u&&u.get("enableShadow")!=null&&typeof u.get("enableShadow")=="boolean"&&(nt=u.get("enableShadow"));let tn=null;u&&u.get("shadowLevel")!=null&&typeof u.get("shadowLevel")=="number"&&(tn=u.get("shadowLevel"));let Ie=null;u&&u.get("enableMirror")!=null&&typeof u.get("enableMirror")=="boolean"&&(Ie=u.get("enableMirror"));let Kt=null;u&&u.get("texture")!=null&&typeof u.get("texture")=="string"&&(Kt=u.get("texture"));let At=null;u&&u.get("opacity")!=null&&typeof u.get("opacity")=="number"&&(At=u.get("opacity"));let an=null;u&&u.get("mirrorBlurKernel")!=null&&typeof u.get("mirrorBlurKernel")=="number"&&(an=u.get("mirrorBlurKernel"));let Cn=null;c&&c.get("size")!=null&&typeof c.get("size")=="number"&&(Cn=c.get("size"));let He=null;c&&c.get("color")!=null&&typeof c.get("color")=="string"&&this.isValidHexColor(c.get("color"))&&(He=c.get("color"));let _e=null;c&&c.get("texture")!=null&&typeof c.get("texture")=="string"&&(_e=c.get("texture"));let Sr=b!=null||k!=null||W!=null||ve;return(c||u||Sr)&&(e=e||{createSkybox:c&&c.get("createSkybox"),createGround:u&&u.get("createGround")},e.setupImageProcessing=!1,b!=null&&(e.environmentTexture=b),(e.createSkybox||e.createGround)&&(Ae!=null&&(e.sizeAuto=Ae),rt!=null&&(e.mainColor=window.BABYLON.Color3.FromHexString(rt)),e.createGround&&(!e.sizeAuto&&re!=null&&(e.groundSize=re),!e.mainColor&&mt!=null&&(e.groundColor=window.BABYLON.Color3.FromHexString(mt)),nt!=null&&(e.enableGroundShadow=nt),e.enableGroundShadow&&this.createShadowLight(),tn!=null&&(e.groundShadowLevel=tn),Ie!=null&&(e.enableGroundMirror=Ie),Kt!=null&&(e.groundTexture=Kt),At!=null&&(e.groundOpacity=At),e.enableGroundMirror&&an!=null&&(e.groundMirrorBlurKernel=an)),e.createSkybox&&(!e.sizeAuto&&Cn!=null&&(e.skyboxSize=Cn),!e.mainColor&&He!=null&&(e.skyboxColor=window.BABYLON.Color3.FromHexString(He)),_e!=null&&(e.skyboxTexture=_e)),m&&(k!=null&&(e.cameraContrast=k),W!=null&&(e.cameraExposure=W),ve!=null&&(e.toneMappingEnabled=ve)))),e&&(!e.environmentTexture&&!this._scene.environmentTexture&&(e.environmentTexture=Ii.Environment.EnvironmentTextureCDNUrl),e.createGround!=null&&e.createGround&&!e.groundTexture&&(e.groundTexture=Ii.Environment.GroundTextureCDNUrl),e.createSkybox!=null&&e.createSkybox&&!e.skyboxTexture&&(e.skyboxTexture=Ii.Environment.SkyboxTextureCDNUrl)),e}createShadowLight(){if(this._shadowLight&&(this._shadowLight.dispose(),this._shadowLight=null),this._scene&&this._sceneHelper){var e=this._sceneHelper.getSceneBoundingInfo();if(e&&e.boundingBox){const s=e.boundingBox.vectorsWorld,c=Number(s[1].x-s[0].x),u=Number(s[1].y-s[0].y),m=Number(s[1].z-s[0].z),b=e.boundingBox.centerWorld;e.boundingBox.maximumWorld;const k=b.x+c*2.67,W=b.y+u*4.5,ve=b.z+m*1,Ae=new window.BABYLON.Vector3(k,W,ve);let rt=b.subtract(Ae);rt=window.BABYLON.Vector3.Normalize(rt),rt=new window.BABYLON.Vector3(-2,-3,1),this._shadowLight=new window.BABYLON.DirectionalLight("shadowLight",rt,this._scene),this._shadowLight.position=Ae,this._shadowLight.intensity=.1;var n=new window.BABYLON.ShadowGenerator(512,this._shadowLight);n.useBlurExponentialShadowMap=!0,n.useKernelBlur=!0,n.usePercentageCloserFiltering=!0,n.blurKernel=32;for(let re=0;re<this._scene.meshes.length;re++){const mt=this._scene.meshes[re];!this.isEnvironmentNode(mt)&&this._sceneHelper.isRealMesh(mt)&&(mt.receiveShadows=!1,n.addShadowCaster(mt))}}}}configureCamera(){if(!this._scene||!this._scene.activeCamera||!(this._scene.activeCamera instanceof window.BABYLON.ArcRotateCamera))return;const e=this.getCameraConfig();if(e){const n=this._scene.activeCamera;this._originalCameraAutoRotate=n.useAutoRotationBehavior;let s=e.get("autoRotate");n.useAutoRotationBehavior=s!=null&&s;let c=n.getBehaviorByName("AutoRotation"),u=Number(e.get("rotationSpeed")),m=e.get("changeRotationDirection");if(s&&u){let b=m?-1:1;c.idleRotationSpeed=u*b}}}sanityCheck(){return this._scene&&this._scene instanceof window.BABYLON.Scene&&this._zkScene&&this._zkScene instanceof Zakeke.Scene&&this._zkScene.get("config")!=null&&this._zkScene.get("config")!=null&&this._zkScene.get("config")instanceof Zakeke.SceneConfig}getSceneConfig(){if(this.sanityCheck()){let e=this._zkScene.getSceneConfig();if(e!=null&&e!=null)return e}return null}getGeneralConfig(){if(this.sanityCheck()){let e=this._zkScene.getGeneralConfig();if(e!=null&&e!=null)return e}return null}getEnvironmentConfig(){if(this.sanityCheck()){let e=this._zkScene.getEnvironmentConfig();if(e!=null&&e!=null)return e}return null}getSkyboxConfig(){if(this.sanityCheck()){let e=this._zkScene.getSkyboxConfig();if(e!=null&&e!=null)return e}return null}getGroundConfig(){if(this.sanityCheck()){let e=this._zkScene.getGroundConfig();if(e!=null&&e!=null)return e}return null}getCameraConfig(){if(this.sanityCheck()){let e=this._zkScene.getCameraConfig();if(e!=null&&e!=null)return e}return null}isValidHexColor(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}getEnvironmentSceneNodes(){const e=[];return this._environmentHelper&&(this._environmentHelper.rootMesh&&e.push(this._environmentHelper.rootMesh),this._environmentHelper.skybox&&e.push(this._environmentHelper.skybox),this._environmentHelper.skyboxMaterial&&e.push(this._environmentHelper.skyboxMaterial),this._environmentHelper.skyboxTexture&&e.push(this._environmentHelper.skyboxTexture),this._environmentHelper.ground&&e.push(this._environmentHelper.ground),this._environmentHelper.groundMaterial&&e.push(this._environmentHelper.groundMaterial),this._environmentHelper.groundTexture&&e.push(this._environmentHelper.groundTexture),this._environmentHelper.groundMirror&&e.push(this._environmentHelper.groundMirror),this._shadowLight&&e.push(this._shadowLight)),e}isEnvironmentNode(e){const n=this.getEnvironmentSceneNodes();for(let s=0;s<n.length;s++)if(e==n[s])return!0;return!1}setDoNotSerialize(e){(e instanceof window.BABYLON.AbstractMesh||e instanceof window.BABYLON.Material||e instanceof window.BABYLON.Light)&&(e.doNotSerialize=!0)}reset(){this._scene&&(this._originalSceneClearColor&&(this._scene.clearColor=this._originalSceneClearColor),this._originalCameraAutoRotate!=null&&this._scene.activeCamera&&this._scene.activeCamera instanceof window.BABYLON.ArcRotateCamera&&(this._scene.activeCamera.useAutoRotationBehavior=this._originalCameraAutoRotate),this._environmentHelper&&this._environmentHelper.updateOptions({}))}}function fg(y){return typeof importScripts=="function"?(importScripts(y),Promise.resolve()):new Promise((e,n)=>{window.BABYLON.Tools.LoadScript(y,()=>{e()},s=>{n(new Error(s))})})}function co(y){if(y.length==0)return Promise.resolve();let e=[];for(let n=0;n<y.length;n++)e.push(fg(y[n]));return new Promise(n=>{Promise.all(e).then(()=>n())})}function Pc(y,e){return y?y.match(new RegExp(".[^]{1,"+e+"}","g")):null}function Ml(y,e,n){let s="scene_"+e+".babylon",c=y;const u=[];if(c.length<=5e6){let b=!1;c.length>180&&c.length<=1e6&&(c=LZString.compressToUint8Array(c),s="compressed_"+s,b=!0);let k=null;if(!b)k=new Blob([c],{type:"text/plain"});else{let W=c.buffer;k=new Blob([W])}k&&u.push({name:s,blob:k})}else{let b=Pc(c,8e5);if(b)for(let k=0;k<b.length;k++){let W=b[k],ve=s+"_part_"+k,Ae=!1;W.length>180&&(W=LZString.compressToUint8Array(W),ve="compressed_"+ve,Ae=!0);let rt=null;if(!Ae)rt=new Blob([W],{type:"text/plain"});else{var m=W.buffer;rt=new Blob([m])}rt&&u.push({name:ve,blob:rt}),n(k/b.length*100)}}return u}function eo(y){return typeof document!="object"||typeof y!="string"?y:window.BABYLON.Tools.GetAbsoluteUrl(y)}function Af(){let y;onmessage=e=>{const n=e.data;switch(n.id){case"init":{const s=n.urls;y=co(s),postMessage("done");break}case"makeBlobs":{if(!y)throw new Error("Worker not initialized");y.then(()=>{const s=n.json,c=n.version,u=Ml(s,c,m=>{postMessage({id:"progress",perc:m})});postMessage({id:"result",blobInfos:u}),postMessage("done")});break}}}}const Lh=class Ym{static GetDefaultNumWorkers(){return typeof navigator!="object"||!navigator.hardwareConcurrency?1:Math.min(Math.floor(navigator.hardwareConcurrency*.5),2)}static get Default(){return Ym._Default||(Ym._Default=new Ym([])),Ym._Default}constructor(e,n=Ym.DefaultNumWorkers){const s=e.map(c=>eo(c));if(n&&typeof Worker=="function"){const c=`${fg}${co}${Pc}${Ml}(${Af})()`,u=URL.createObjectURL(new Blob([c],{type:"application/javascript"})),m=new Array(n);for(let b=0;b<m.length;b++)m[b]=new Promise((k,W)=>{const ve=new Worker(u),Ae=re=>{ve.removeEventListener("error",Ae),ve.removeEventListener("message",rt),W(re)},rt=re=>{re.data==="done"&&(ve.removeEventListener("error",Ae),ve.removeEventListener("message",rt),k(ve))};ve.addEventListener("error",Ae),ve.addEventListener("message",rt),ve.postMessage({id:"init",urls:s})});this._workerPoolPromise=Promise.all(m).then(b=>new Fd(b))}}dispose(){}whenReadyAsync(){return this._workerPoolPromise?this._workerPoolPromise.then(()=>{}):Promise.resolve()}getSceneBlobsAsync(e,n,s){if(this._workerPoolPromise)return this._workerPoolPromise.then(c=>new Promise((u,m)=>{c.push((b,k)=>{let W=[];const ve=rt=>{b.removeEventListener("error",ve),b.removeEventListener("message",Ae),m(rt),k()},Ae=rt=>{rt.data==="done"?(b.removeEventListener("error",ve),b.removeEventListener("message",Ae),u(W),k()):rt.data.id==="progress"?s(rt.data.perc):rt.data.id==="result"&&(W=rt.data.blobInfos)};b.addEventListener("error",ve),b.addEventListener("message",Ae),b.postMessage({id:"makeBlobs",json:e,version:n})})}));throw new Error("SceneToBlob worker is not available")}};Lh.DefaultNumWorkers=Lh.GetDefaultNumWorkers(),Lh._Default=null;let Bh=Lh;class gl{static openSceneViewer(e,n,s=!0,c=null){if(this._fallbackInvoked)return;const u=self.location.toString(),m=new URL(u),b=new URL(e),k=new URLSearchParams(b.search);if(m.hash=this._noArViewerSigil,k.set("mode","ar_preferred"),k.has("disable_occlusion")||k.set("disable_occlusion","true"),s||k.set("resizable","false"),c&&c.toLowerCase()==="wall"&&k.set("enable_vertical_placement","true"),k.has("sound")){const Ae=new URL(k.get("sound"),u);k.set("sound",Ae.toString())}if(k.has("link")){const Ae=new URL(k.get("link"),u);k.set("link",Ae.toString())}const W=`intent://arvr.google.com/scene-viewer/1.0?${k.toString()+"&file="+encodeURIComponent(b.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(m.toString())};end;`;console.log(W);const ve=()=>{self.location.hash===this._noArViewerSigil&&!this._fallbackInvoked&&(this._fallbackInvoked=!0,n&&n(),self.history.back())};self.addEventListener("hashchange",ve,{once:!0}),this._anchor.setAttribute("href",W),this._anchor.setAttribute("target","_blank"),document.body.appendChild(this._anchor),this._anchor.click()}}gl._anchor=document.createElement("a"),gl._linkOrTitle=/(link|title)(=|&)|(\?|&)(link|title)$/,gl._noArViewerSigil="#model-viewer-no-ar-fallback",gl._fallbackInvoked=!1;class _o{constructor(e,n,s){this._meshesInfoPoints={},this._infoPoints=[],this._imageUrls=[],this._currentIdx=0,this._imagePanel=null,this._loadingText=null,this._image=null,this._closeImageButton=null,this._moveNextImageButton=null,this._movePrevImageButton=null,this._isOnMoveNextButton=!1,this._isOnMovePrevButton=!1,this._lastCameraPosition=null,this.onBeforeShowImages=null,this.onAfterShowImages=null,this._infoPointsShown=!0,this._canShowInfoPointsContent=!0,this._infoPointPickedListeners=[],this._infoPointContentShownListeners=[],this._infoPointContentHiddenListeners=[],this._renderingNeededListeners=[],this.CLOSE_SVG="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg id='mdi-close' style='fill:§color§'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/g%3E%3C/svg%3E",this.CHEVRON_LEFT_SVG="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg id='mdi-chevron-left'%3E%3Cpath fill='§color§' d='M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z' /%3E%3C/g%3E%3C/svg%3E",this.CHEVRON_RIGHT_SVG="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg id='mdi-chevron-right'%3E%3Cpath fill='§color§' d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/g%3E%3C/svg%3E",this._zkScene=e,this._scene=n,this._sceneHelper=new Tr(n),this._style={},this.setDefaultStyle(),s&&this.setStyle(s),this._rootContainer=window.BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI",!0,this._scene)}get infoPointsShown(){return this._infoPointsShown}get canShowInfoPointsContent(){return this._canShowInfoPointsContent}set canShowInfoPointsContent(e){this._canShowInfoPointsContent=e,this.hideImages()}dispose(){this._renderingNeededListeners=[],this._rootContainer.dispose()}setDefaultStyle(){this._style.infoPointsStyle={borderColor:"#ffffff",innerPointColor:"#ffffff",color:"#a01c20",highlightColor:"#bb2025"},this._style.imagePanelStyle={backgroundColor:this._scene.clearColor.toHexString(),loadingTextColor:"#ffffff",buttonsBorderColor:"#a01c20",buttonsColor:"#a01c20",buttonsBorderHighlightColor:"#bb2025",buttonsHighlightColor:"#bb2025",buttonsIconColor:"white"}}setStyle(e){e?(e.infoPointsStyle&&(this._style.infoPointsStyle||(this._style.infoPointsStyle={}),e.infoPointsStyle.borderColor&&(this._style.infoPointsStyle.borderColor=e.infoPointsStyle.borderColor),e.infoPointsStyle.innerPointColor&&(this._style.infoPointsStyle.innerPointColor=e.infoPointsStyle.innerPointColor),e.infoPointsStyle.color&&(this._style.infoPointsStyle.color=e.infoPointsStyle.color),e.infoPointsStyle.highlightColor&&(this._style.infoPointsStyle.highlightColor=e.infoPointsStyle.highlightColor)),e.imagePanelStyle&&(this._style.imagePanelStyle||(this._style.imagePanelStyle={}),e.imagePanelStyle.backgroundColor&&(this._style.imagePanelStyle.backgroundColor=e.imagePanelStyle.backgroundColor),e.imagePanelStyle.loadingTextColor&&(this._style.imagePanelStyle.loadingTextColor=e.imagePanelStyle.loadingTextColor),e.imagePanelStyle.buttonsBorderColor&&(this._style.imagePanelStyle.buttonsBorderColor=e.imagePanelStyle.buttonsBorderColor),e.imagePanelStyle.buttonsColor&&(this._style.imagePanelStyle.buttonsColor=e.imagePanelStyle.buttonsColor),e.imagePanelStyle.buttonsBorderHighlightColor&&(this._style.imagePanelStyle.buttonsBorderHighlightColor=e.imagePanelStyle.buttonsBorderHighlightColor),e.imagePanelStyle.buttonsHighlightColor&&(this._style.imagePanelStyle.buttonsHighlightColor=e.imagePanelStyle.buttonsHighlightColor),e.imagePanelStyle.buttonsIconColor&&(this._style.imagePanelStyle.buttonsIconColor=e.imagePanelStyle.buttonsIconColor))):this.setDefaultStyle()}applyStyle(e){this.setStyle(e),this.refresh()}showInfoPoints(){this.hideImages(),this.getAllInfoPoints().forEach(e=>e.isVisible=!0),this._infoPointsShown=!0,this.fireRenderingNeededEvent()}hideInfoPoints(){this.hideImages(),this.getAllInfoPoints().forEach(e=>e.isVisible=!1),this._infoPointsShown=!1,this.fireRenderingNeededEvent()}refresh(){this.hideImages(),this.refreshInfoPoints(),this.updateGuiElementsStyle(),this.fireRenderingNeededEvent()}getAllInfoPoints(){const e=[];for(const n in this._meshesInfoPoints)e.push(this._meshesInfoPoints[n]);return e}refreshInfoPoints(){for(let e=0;e<this._scene.meshes.length;e++){const n=this._scene.meshes[e],s=n.metadata&&n.metadata.showInfoPoints&&(n.isVisible||n.metadata.forceShowInfoPoints),c=n.material,u=c?this.getMaterialPhotoUrls(c):[];if(s&&u.length>0){const m=this.getOrCreateMeshInfoPoint(n);this.updateInfoPointUrls(m,u)}else this.removeMeshInfoPoints(n)}}removeMeshInfoPoints(e){this._meshesInfoPoints.hasOwnProperty(e.id)&&(this._meshesInfoPoints[e.id].dispose(),delete this._meshesInfoPoints[e.id])}getOrCreateMeshInfoPoint(e){if(this._meshesInfoPoints.hasOwnProperty(e.id))return this._meshesInfoPoints[e.id];const n=this.createMeshInfoPoint(e);return this._meshesInfoPoints[e.id]=n,n}updateInfoPointUrls(e,n){e.metadata||(e.metadata={}),e.metadata.urls=n}createMeshInfoPoint(e){var n,s,c,u;const m=new window.BABYLON.GUI.Ellipse("infoPoint");m.width="29px",m.height="29px",m.color=((n=this._style.infoPointsStyle)==null?void 0:n.borderColor)||"#dddddd",m.thickness=4,m.background=((s=this._style.infoPointsStyle)==null?void 0:s.color)||"#a01c20",m.alpha=1,m.onPointerEnterObservable.add(k=>{var W;m.background=((W=this._style.infoPointsStyle)==null?void 0:W.highlightColor)||"#bb2025",this.fireRenderingNeededEvent()}),m.onPointerOutObservable.add(k=>{var W;m.background=((W=this._style.infoPointsStyle)==null?void 0:W.color)||"#a01c20",this.fireRenderingNeededEvent()}),this._rootContainer.addControl(m);const b=new window.BABYLON.GUI.Ellipse("innerPoint");return b.width=.29,b.height=.29,b.color=((c=this._style.infoPointsStyle)==null?void 0:c.innerPointColor)||"White",b.thickness=0,b.background=((u=this._style.infoPointsStyle)==null?void 0:u.innerPointColor)||"White",m.addControl(b),m.linkWithMesh(e),m.linkOffsetY=0,m.shadowBlur=6,m.shadowOffsetX=2,m.shadowOffsetY=2,m.isPointerBlocker=!0,m.hoverCursor="pointer",m.onPointerClickObservable.add(k=>{if(m.metadata&&m.metadata.urls){const W={meshID:e.id,materialID:e.material?e.material.id:null,materialPhotoUrl:m.metadata.urls};this.fireInfoPointPickedEvent(W),this.showImages(m.metadata.urls)}this.fireRenderingNeededEvent()}),m}getMaterialInfoPoint(e){for(let n=0;n<this._infoPoints.length;n++){const s=this._infoPoints[n];if(s.metadata&&s.metadata.materialID&&s.metadata.materialID===e)return s}return null}getMaterialPhotoUrls(e){return this._zkScene.get("materialPhotos").getMaterialPhotoUrls(e.id)}getOrCreateImagePanel(){return this._imagePanel||this.createImagePanel(),this._imagePanel}createImagePanel(){var e;const n=new window.BABYLON.GUI.Rectangle("imagePanel");return n.background=((e=this._style.imagePanelStyle)==null?void 0:e.backgroundColor)||this._scene.clearColor.toHexString(),n.width=1,n.height=1,n.zIndex=1e4,n.isVisible=!1,this._imagePanel=n,this._rootContainer.addControl(n),this.addCloseButton(n),this.addMoveNextImageButton(n),this.addMovePrevImageButton(n),n}addCloseButton(e){var n,s,c;const u=new window.BABYLON.GUI.StackPanel("closePanel");u.height="48px",u.width="48px",u.horizontalAlignment=window.BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,u.verticalAlignment=window.BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,u.isVertical=!1,u.zIndex=10003,e.addControl(u);const m=new window.BABYLON.GUI.Rectangle("closeRect");m.width="24px",m.height="24px",m.verticalAlignment=window.BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,m.horizontalAlignment=window.BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,m.background=((n=this._style.imagePanelStyle)==null?void 0:n.buttonsColor)||"#a01c20",m.color=((s=this._style.imagePanelStyle)==null?void 0:s.buttonsBorderColor)||"#a01c20",m.isPointerBlocker=!0,m.hoverCursor="pointer",m.onPointerEnterObservable.add(k=>{var W,ve;m.background=((W=this._style.imagePanelStyle)==null?void 0:W.buttonsHighlightColor)||"#bb2025",m.color=((ve=this._style.imagePanelStyle)==null?void 0:ve.buttonsBorderHighlightColor)||"#bb2025",this.fireRenderingNeededEvent()}),m.onPointerOutObservable.add(k=>{var W,ve;m.background=((W=this._style.imagePanelStyle)==null?void 0:W.buttonsColor)||"#a01c20",m.color=((ve=this._style.imagePanelStyle)==null?void 0:ve.buttonsBorderColor)||"#a01c20",this.fireRenderingNeededEvent()}),m.onPointerClickObservable.add(k=>{this.hideImages(),this.fireRenderingNeededEvent()}),u.addControl(m);const b=new window.BABYLON.GUI.Image("close",this.getCloseSvg(((c=this._style.imagePanelStyle)==null?void 0:c.buttonsIconColor)||"white"));b.width=1,b.height=1,b.stretch=window.BABYLON.GUI.Image.STRETCH_UNIFORM,m.addControl(b),this._closeImageButton=u}addMoveNextImageButton(e){var n,s,c;const u=new window.BABYLON.GUI.StackPanel("rightPanel");u.width="48px",u.height="48px",u.paddingRight="24px",u.horizontalAlignment=window.BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,u.verticalAlignment=window.BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,u.isVertical=!1,u.zIndex=10003,u.alpha=.3,u.isVisible=!1,e.addControl(u);const m=new window.BABYLON.GUI.Rectangle("rightRect");m.width="24px",m.height="48px",m.verticalAlignment=window.BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,m.horizontalAlignment=window.BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,m.background=((n=this._style.imagePanelStyle)==null?void 0:n.buttonsColor)||"#a01c20",m.color=((s=this._style.imagePanelStyle)==null?void 0:s.buttonsBorderColor)||"#a01c20",m.isPointerBlocker=!0,m.hoverCursor="pointer",m.onPointerEnterObservable.add(k=>{var W,ve;this._isOnMoveNextButton=!0,m.background=((W=this._style.imagePanelStyle)==null?void 0:W.buttonsHighlightColor)||"#bb2025",m.color=((ve=this._style.imagePanelStyle)==null?void 0:ve.buttonsBorderHighlightColor)||"#bb2025",this.updateMoveNextImageButton(),this.fireRenderingNeededEvent()}),m.onPointerOutObservable.add(k=>{var W,ve;this._isOnMoveNextButton=!1,m.background=((W=this._style.imagePanelStyle)==null?void 0:W.buttonsColor)||"#a01c20",m.color=((ve=this._style.imagePanelStyle)==null?void 0:ve.buttonsBorderColor)||"#a01c20",this.updateMoveNextImageButton(),this.fireRenderingNeededEvent()}),m.onPointerClickObservable.add(k=>{this.moveNextImage(),this.fireRenderingNeededEvent()}),u.addControl(m);const b=new window.BABYLON.GUI.Image("move-next",this.getChevronRightSvg(((c=this._style.imagePanelStyle)==null?void 0:c.buttonsIconColor)||"white"));b.width=1,b.height=1,b.stretch=window.BABYLON.GUI.Image.STRETCH_UNIFORM,b.verticalAlignment=window.BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,m.addControl(b),this._moveNextImageButton=u}addMovePrevImageButton(e){var n,s,c;const u=new window.BABYLON.GUI.StackPanel("leftPanel");u.width="48px",u.height="48px",u.paddingLeft="24px",u.horizontalAlignment=window.BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,u.verticalAlignment=window.BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,u.isVertical=!1,u.alpha=.3,u.zIndex=10003,u.isVisible=!1,e.addControl(u);const m=new window.BABYLON.GUI.Rectangle("leftRect");m.width="24px",m.height="48px",m.verticalAlignment=window.BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,m.horizontalAlignment=window.BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,m.background=((n=this._style.imagePanelStyle)==null?void 0:n.buttonsColor)||"#a01c20",m.color=((s=this._style.imagePanelStyle)==null?void 0:s.buttonsBorderColor)||"#a01c20",m.isPointerBlocker=!0,m.hoverCursor="pointer",m.onPointerEnterObservable.add(k=>{var W,ve;this._isOnMovePrevButton=!0,m.background=((W=this._style.imagePanelStyle)==null?void 0:W.buttonsHighlightColor)||"#bb2025",m.color=((ve=this._style.imagePanelStyle)==null?void 0:ve.buttonsBorderHighlightColor)||"#bb2025",this.updateMovePrevImageButton(),this.fireRenderingNeededEvent()}),m.onPointerOutObservable.add(k=>{var W,ve;this._isOnMovePrevButton=!1,m.background=((W=this._style.imagePanelStyle)==null?void 0:W.buttonsColor)||"#a01c20",m.color=((ve=this._style.imagePanelStyle)==null?void 0:ve.buttonsBorderColor)||"#a01c20",this.updateMovePrevImageButton(),this.fireRenderingNeededEvent()}),m.onPointerClickObservable.add(k=>{this.movePrevImage(),this.fireRenderingNeededEvent()}),u.addControl(m);const b=new window.BABYLON.GUI.Image("move-prev",this.getChevronLeftSvg(((c=this._style.imagePanelStyle)==null?void 0:c.buttonsIconColor)||"white"));b.width=1,b.height=1,b.stretch=window.BABYLON.GUI.Image.STRETCH_UNIFORM,b.verticalAlignment=window.BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,m.addControl(b),this._movePrevImageButton=u}updateMoveNextImageButton(){this._moveNextImageButton&&(this._imageUrls.length<=1?this._moveNextImageButton.isVisible=!1:(this._moveNextImageButton.isVisible=!0,this._moveNextImageButton.alpha=this.canMoveNextImage()?this._isOnMoveNextButton?1:.3:.1))}updateMovePrevImageButton(){this._movePrevImageButton&&(this._imageUrls.length<=1?this._movePrevImageButton.isVisible=!1:(this._movePrevImageButton.isVisible=!0,this._movePrevImageButton.alpha=this.canMovePrevImage()?this._isOnMovePrevButton?1:.3:.1))}showImages(e){this._canShowInfoPointsContent&&(this._currentIdx=0,this._imageUrls=e,this._isOnMoveNextButton=!1,this._isOnMovePrevButton=!1,this.getOrCreateImagePanel(),this._imagePanel&&(this.onBeforeShowImages&&this.onBeforeShowImages(),this.updateMoveNextImageButton(),this.updateMovePrevImageButton(),this._imagePanel.isVisible=!0,this.showCurrentImage(),this.fireInfoPointContentShownEvent()),this.fireRenderingNeededEvent())}moveNextImage(){this.canMoveNextImage()&&(this._currentIdx++,this.showCurrentImage(),this.updateMoveNextImageButton(),this.updateMovePrevImageButton(),this.fireRenderingNeededEvent())}movePrevImage(){this.canMovePrevImage()&&(this._currentIdx--,this.showCurrentImage(),this.updateMoveNextImageButton(),this.updateMovePrevImageButton(),this.fireRenderingNeededEvent())}showCurrentImage(){this._currentIdx>=0&&this._currentIdx<this._imageUrls.length&&this.showImage(this._imageUrls[this._currentIdx])}canMoveNextImage(){return this._imageUrls.length>0&&this._currentIdx<this._imageUrls.length-1}canMovePrevImage(){return this._imageUrls.length>0&&this._currentIdx>0}hideImages(){this._imagePanel&&(this._imagePanel.isVisible=!1,this.onAfterShowImages&&this.onAfterShowImages(),this.fireInfoPointContentHiddenEvent(),this.fireRenderingNeededEvent())}showImage(e){if(this._imagePanel){this._image&&(this._imagePanel.removeControl(this._image),this._image.isVisible=!1,this._image.dispose(),this._image=null),this.showLoadingText();const n=new window.BABYLON.GUI.Image("but",e);n.width=1,n.height=1,n.isVisible=!0,n.zIndex=10002,n.stretch=window.BABYLON.GUI.Image.STRETCH_UNIFORM,n.onImageLoadedObservable.add(s=>{this.hideLoadingText()}),this._imagePanel.addControl(n),this._image=n,this.fireRenderingNeededEvent()}}updateInfoPointsVisibility(){let e=!1;if(this._scene.activeCamera&&(!this._lastCameraPosition||!this._lastCameraPosition.equals(this._scene.activeCamera.position))){this._lastCameraPosition=this._scene.activeCamera.position.clone();for(const n in this._meshesInfoPoints){const s=this._scene.getMeshByID(n);s&&(this.updateMeshInfoPointVisibility(s,this._meshesInfoPoints[n]),e=!0)}}return e}drawRay(e,n){let s=n.subtract(e);s=s.normalize();const c=n.subtract(e).length()*2,u=new window.BABYLON.Ray(e,s,c);window.BABYLON.RayHelper.CreateAndShow(u,this._scene,new window.BABYLON.Color3(1,1,.1))}updateMeshInfoPointVisibility(e,n){if(this._scene.activeCamera){const s=this._sceneHelper.getMeshHierarchyCenter(e),c=this._scene.activeCamera.position;let u=s.subtract(c);u=u.normalize();const m=s.subtract(c).length()*2,b=new window.BABYLON.Ray(c,u,m),k=this._scene.pickWithRay(b);k&&k.pickedMesh&&(n.alpha=k.pickedMesh===e?1:.2)}}getCloseSvg(e){return this.getSvg(this.CLOSE_SVG,e)}getChevronLeftSvg(e){return this.getSvg(this.CHEVRON_LEFT_SVG,e)}getChevronRightSvg(e){return this.getSvg(this.CHEVRON_RIGHT_SVG,e)}getSvg(e,n){return e.replace("§color§",encodeURIComponent(n))}fireInfoPointPickedEvent(e){for(let n=0;n<this._infoPointPickedListeners.length;n++)this._infoPointPickedListeners[n](e)}addInfoPointPickedListener(e){this._infoPointPickedListeners.push(e)}addInfoPointPickedListenerRange(e){this._infoPointPickedListeners.push(...e)}fireInfoPointContentShownEvent(){for(let e=0;e<this._infoPointContentShownListeners.length;e++)this._infoPointContentShownListeners[e]()}addInfoPointContentShownListener(e){this._infoPointContentShownListeners.push(e)}addInfoPointContentShownListenerRange(e){this._infoPointContentShownListeners.push(...e)}fireInfoPointContentHiddenEvent(){for(let e=0;e<this._infoPointContentHiddenListeners.length;e++)this._infoPointContentHiddenListeners[e]()}addInfoPointContentHiddenListener(e){this._infoPointContentHiddenListeners.push(e)}addInfoPointContentHiddenListenerRange(e){this._infoPointContentHiddenListeners.push(...e)}fireRenderingNeededEvent(){for(let e=0;e<this._renderingNeededListeners.length;++e)this._renderingNeededListeners[e]()}addRenderingNeededListener(e){this._renderingNeededListeners.push(e)}showLoadingText(){var e;if(this._loadingText){this._loadingText.isVisible=!0;return}this._imagePanel&&(this._loadingText=new window.BABYLON.GUI.TextBlock("loading"),this._loadingText.text="Loading...",this._loadingText.left=.5,this._loadingText.top=.7,this._loadingText.zIndex=10001,this._loadingText.color=((e=this._style.imagePanelStyle)==null?void 0:e.loadingTextColor)||"white",this._imagePanel.addControl(this._loadingText),this.fireRenderingNeededEvent())}hideLoadingText(){this._loadingText&&(this._loadingText.isVisible=!1),this.fireRenderingNeededEvent()}updateGuiElementsStyle(){this.updateMeshInfoPointsStyle(),this.updateImagePanelStyle(),this.fireRenderingNeededEvent()}updateMeshInfoPointsStyle(){this.getAllInfoPoints().forEach(e=>{var n,s,c;e.color=((n=this._style.infoPointsStyle)==null?void 0:n.borderColor)||"#dddddd",e.background=((s=this._style.infoPointsStyle)==null?void 0:s.color)||"#a01c20";const u=e.getChildByName("innerPoint");u&&u instanceof window.BABYLON.GUI.Container&&(u.background=((c=this._style.infoPointsStyle)==null?void 0:c.innerPointColor)||"White")})}updateImagePanelStyle(){var e,n,s,c,u,m,b,k;if(this._imagePanel){this._imagePanel.background=((e=this._style.imagePanelStyle)==null?void 0:e.backgroundColor)||this._scene.clearColor.toHexString();const W=this._imagePanel.getChildByName("closePanel");if(W&&W instanceof window.BABYLON.GUI.Container){const rt=W.getChildByName("closeRect");rt&&rt instanceof window.BABYLON.GUI.Container&&(rt.background=((n=this._style.imagePanelStyle)==null?void 0:n.buttonsColor)||"#a01c20",rt.color=((s=this._style.imagePanelStyle)==null?void 0:s.buttonsBorderColor)||"#a01c20")}const ve=this._imagePanel.getChildByName("rightPanel");if(ve&&ve instanceof window.BABYLON.GUI.Container){const rt=ve.getChildByName("rightRect");rt&&rt instanceof window.BABYLON.GUI.Container&&(rt.background=((c=this._style.imagePanelStyle)==null?void 0:c.buttonsColor)||"#a01c20",rt.color=((u=this._style.imagePanelStyle)==null?void 0:u.buttonsBorderColor)||"#a01c20")}const Ae=this._imagePanel.getChildByName("leftPanel");if(Ae&&Ae instanceof window.BABYLON.GUI.Container){const rt=Ae.getChildByName("leftRect");rt&&rt instanceof window.BABYLON.GUI.Container&&(rt.background=((m=this._style.imagePanelStyle)==null?void 0:m.buttonsColor)||"#a01c20",rt.color=((b=this._style.imagePanelStyle)==null?void 0:b.buttonsBorderColor)||"#a01c20")}this._loadingText&&(this._loadingText.color=((k=this._style.imagePanelStyle)==null?void 0:k.loadingTextColor)||"white")}}}var Rh=(y=>(y[y.NotSelected=0]="NotSelected",y[y.Eyewear=1]="Eyewear",y[y.Scarves=2]="Scarves",y[y.Earrings=3]="Earrings",y[y.Headwear=4]="Headwear",y[y.Necklace=5]="Necklace",y[y.Shoes=6]="Shoes",y[y.Watches=7]="Watches",y[y.Bracelet=8]="Bracelet",y))(Rh||{}),sd=(y=>(y[y.NotSelected=0]="NotSelected",y[y.Mazing=1]="Mazing",y[y.Banuba=2]="Banuba",y[y.DeepAR=3]="DeepAR",y))(sd||{}),Zo=(y=>(y.VirtualTryOn="try_on",y.GlassPupillaryDistanceTool="pd",y.StyleButton="styleButton",y.MandatoryPupillaryDistance="mandatoryPD",y))(Zo||{}),Wd=(y=>(y.Neutral="neutral.hdr",y.Light="light.hdr",y.Bright="bright.hdr",y.Studio="studio.hdr",y.Court="court.hdr",y))(Wd||{}),Oc=(y=>(y.ViewProduct="VIEW_PRODUCT",y.ViewArProdutc="VIEW_AR_PRODUCT",y))(Oc||{}),cs=function(){function y(e){var n=this;if(this._axisRoot=null,this._axes=[],this._sceneEditor=e,!e.engine)throw Error("LightsLayer requires a valid Babylon JS 3D Engine");var s=e.engine;if(!e.scene)throw Error("LightsLayer requires a valid Babylon JS 3D Scene");this._editorScene=e.scene,this._scene=new window.BABYLON.Scene(s),this._scene.autoClear=!1,this._scene.postProcessesEnabled=!1,this._sceneEditor.addPreUpdateListener(function(){return n.onPreUpdate()}),this._sceneEditor.addPostUpdateListener(function(){return n.onPostUpdate()}),this.createAxes()}return y.prototype.dispose=function(){this._scene&&(this._scene.dispose(),delete this._scene)},y.prototype.onPreUpdate=function(){if(this._scene){var e=this._editorScene.activeCamera;if(e&&(this._scene.activeCamera=e,this._axisRoot)){var n=window.BABYLON.Vector3.Distance(e.position,this._axisRoot.position)*.03;this._axisRoot.scaling=new window.BABYLON.Vector3(n,n,n),this._axisRoot.computeWorldMatrix(!0)}}},y.prototype.onPostUpdate=function(){},y.prototype.createAxes=function(){var e=this,n=10,s=this._scene,c=new window.BABYLON.Mesh("axisRoot",s);c.isVisible=this._sceneEditor.canShowAxes();var u=function(rt,re,mt){var nt=new window.BABYLON.DynamicTexture("DynamicTexture",50,s,!0);nt.hasAlpha=!0,nt.drawText(rt,5,40,"bold 36px Arial",re,"transparent",!0);var tn=window.BABYLON.MeshBuilder.CreatePlane("TextPlane",{size:mt,updatable:!0},s),Ie=new window.BABYLON.StandardMaterial("TextPlaneMaterial",s);return Ie.metadata={isRealMaterial:!1},Ie.backFaceCulling=!1,Ie.specularColor=new window.BABYLON.Color3(0,0,0),Ie.diffuseTexture=nt,tn.material=Ie,tn.metadata={isRealMesh:!1,isAxis:!0},tn.parent=c,tn.isVisible=e._sceneEditor.canShowAxes(),tn},m=window.BABYLON.Mesh.CreateLines("axisX",[window.BABYLON.Vector3.Zero(),new window.BABYLON.Vector3(n,0,0),new window.BABYLON.Vector3(n*.95,.05*n,0),new window.BABYLON.Vector3(n,0,0),new window.BABYLON.Vector3(n*.95,-.05*n,0)],s);m.metadata={isRealMesh:!1,isAxis:!0},m.color=new window.BABYLON.Color3(1,0,0),m.parent=c,m.isVisible=this._sceneEditor.canShowAxes();var b=u("X","red",n/10);b.position=new window.BABYLON.Vector3(.9*n,-.05*n,0);var k=window.BABYLON.Mesh.CreateLines("axisY",[window.BABYLON.Vector3.Zero(),new window.BABYLON.Vector3(0,n,0),new window.BABYLON.Vector3(-.05*n,n*.95,0),new window.BABYLON.Vector3(0,n,0),new window.BABYLON.Vector3(.05*n,n*.95,0)],s);k.metadata={isRealMesh:!1,isAxis:!0},k.color=new window.BABYLON.Color3(0,1,0),k.parent=c,k.isVisible=this._sceneEditor.canShowAxes();var W=u("Y","green",n/10);W.position=new window.BABYLON.Vector3(0,.9*n,-.05*n);var ve=window.BABYLON.Mesh.CreateLines("axisZ",[window.BABYLON.Vector3.Zero(),new window.BABYLON.Vector3(0,0,n),new window.BABYLON.Vector3(0,-.05*n,n*.95),new window.BABYLON.Vector3(0,0,n),new window.BABYLON.Vector3(0,.05*n,n*.95)],s);ve.metadata={isRealMesh:!1,isAxis:!0},ve.color=new window.BABYLON.Color3(0,0,1),ve.parent=c,ve.isVisible=this._sceneEditor.canShowAxes();var Ae=u("Z","blue",n/10);Ae.position=new window.BABYLON.Vector3(0,.05*n,.9*n),this._axisRoot=c,this._axes.push(c,m,k,ve,b,W,Ae)},y.prototype.refresh=function(){for(var e=0;e<this._axes.length;e++){var n=this._axes[e];n.isVisible=this._sceneEditor.canShowAxes()}},y.prototype.render=function(){this._scene&&this._scene.activeCamera&&this._scene.render()},y.prototype.getScene=function(){return this._scene},y}(),Cu=function(){function y(e){var n=this;if(this._lightMeshes=[],this._lightSelectedListeners=[],this._sceneEditor=e,!e.engine)throw Error("LightsLayer requires a valid Babylon JS 3D Engine");var s=e.engine;if(!e.scene)throw Error("LightsLayer requires a valid Babylon JS 3D Scene");this._editorScene=e.scene,this._scene=new window.BABYLON.Scene(s),this._scene.autoClear=!1,this._scene.postProcessesEnabled=!1,this._scene.onPointerDown=this.onPointerDown,this._sceneEditorPreUpdate=function(){return n.onPreUpdate()},this._sceneEditorPostUpdate=function(){return n.onPostUpdate()},this._sceneEditor.addPreUpdateListener(this._sceneEditorPreUpdate),this._sceneEditor.addPostUpdateListener(this._sceneEditorPostUpdate)}return y.prototype.dispose=function(){this._sceneEditor&&(this._sceneEditor.removePreUpdateListener(this._sceneEditorPreUpdate),this._sceneEditor.removePostUpdateListener(this._sceneEditorPostUpdate)),this._scene&&(this._scene.dispose(),delete this._scene)},y.prototype.onPreUpdate=function(){this._scene.activeCamera=this._editorScene.activeCamera},y.prototype.onPostUpdate=function(){this._scene.getEngine();for(var e=0;e<this._lightMeshes.length;e++){var n=this._lightMeshes[e],s=this._editorScene.getLightByID(n.id);s&&this.configureLightMesh(n,s)}},y.prototype.onPointerDown=function(e,n,s){if(n.hit&&n.pickedMesh){var c={name:n.pickedMesh.name,id:n.pickedMesh.id};this.fireLightSelectedEvent(c)}},y.prototype.refresh=function(){this.updateLightMeshes()},y.prototype.updateLightMeshes=function(){if(this._scene&&this._sceneEditor){for(var e=0;e<this._editorScene.lights.length;e++){var n=this._editorScene.lights[e],s=this._scene.getMeshByID(n.id);s?this.configureLightMesh(s,n):this._lightMeshes.push(this.createLightMesh(n))}for(var e=0;e<this._lightMeshes.length;e++){var s=this._lightMeshes[e],n=this._editorScene.getLightByID(s.id);n||(s.dispose(),this._lightMeshes.splice(e--,1))}}},y.prototype.createLightMesh=function(e){var n=new window.BABYLON.Texture(y._lightTexture,this._scene);n.hasAlpha=!0;var s=new window.BABYLON.StandardMaterial("LightMeshMaterial_"+e.id,this._scene);s.emissiveColor=window.BABYLON.Color3.White(),s.useAlphaFromDiffuseTexture=!0,s.disableDepthWrite=!1,s.diffuseTexture=n;var c=window.BABYLON.Mesh.CreatePlane(e.name,1,this._scene);return c.id=e.id,c.billboardMode=window.BABYLON.Mesh.BILLBOARDMODE_ALL,c.material=s,this.configureLightMesh(c,e),c},y.prototype.clearLightMeshes=function(){if(this._scene)for(;this._lightMeshes.length>0;){var e=this._lightMeshes.pop();e&&e.dispose()}},y.prototype.configureLightMesh=function(e,n){var s=this._editorScene.activeCamera;if(s&&e&&n){e.position=n.getAbsolutePosition();var c=window.BABYLON.Vector3.Distance(s.position,e.position)*.03;e.scaling=new window.BABYLON.Vector3(c,c,c),e.computeWorldMatrix(!0),e.isVisible=this._sceneEditor.canShowLights()}},y.prototype.render=function(){this._scene&&this._scene.render()},y.prototype.getScene=function(){return this._scene},y.prototype.fireLightSelectedEvent=function(e){for(var n=0;n<this._lightSelectedListeners.length;++n)this._lightSelectedListeners[n](e)},y.prototype.addLightSelectedListener=function(e){this._lightSelectedListeners.push(e)},y._lightTexture="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALkAAAC5CAMAAABDc25uAAAC/VBMVEUAAAD6ggT5kgH6igH3nA78nwD8ogD8pQD8owD8nQD8oQD9qgD8pgD8pAD8pQD8qwD8qQD8pwD8mAD8qQD8qwD8pwD9qgD8qAH8pgD8pwD8qAD8qAD8qAH8qQD8qQD8qQD8qAD8qgD5lED9qgL6lzb6lTn6mDL6nyP6nSj6ohvMyL/5my/8qQX6pBb8pg78pwn9lCVzc3OnoZabmJC1trXBs5e/v7r1sFuoq6mwvczp6uK1t7qZl5SxsKqqo5fltnWcmJDZwZfiq1qtn4Ocl4/NpVeprana4+y7wsMAAAC+rou3nnSIiIjPmTrWqFEgICAODg4LCwsAAAAAAAAAAAD+vQP+wwb+ugL+wAT+yQP+xwb/+uf+7Qb+6Qf/+N3+5An/9tP/9Ln/9c3/7rL+6Gr/6IH+71z/85IBAQH+3lT+zgf+8gX+xAH/rAH/5Ij//O/f3dr/9LH/6Hn+4nX+72r/32X/7pn+7mL+6VL+2Qj+9ID+9mz+9mL+42z+3gn/8sb/9KD/3kz/9MD/76j/53L+6Frv7urm5eLa2db+twL///7//fb/99j/9Jn/9sb+71f/65L+91j+4EPj4d7+6WL++E793Tvr6ub/5Hz+3VvLzMz+2kT/9Kv/66f/9Ib+0ir+0wf/5GL+1jP/64v+5Ur+60XV1dPAwcH/77v+41v++kL+ziD/5FH+3jH/84z++Df/6Jj/7p/+8E/+8Dv6mzf9tg3z8u7Fx8f/7oLQ0dD/8sr/5ZH7pSf+5zr/9Kf+80X+5xb9sBT5lj3/34H+9Xj+7DD+xyv++Bj+9Q/+yA/+8yL++yL+9HL+1lL+5i/7oC/8qh/+vxL+73r+3ST+8RfZ1c3+7nP+/jP+zRT/6KD+4yS7vLz+4BfT0Mn+1j3+6SP/z3D/uSf/3W//12D+yzX+8Az/8MHHw7quqqHPzMTDvbP+xCD/1xj/zGK2sab+zj/Qxa7+0kn9sxmwsK7/1Hn/yFK9t6f49/W9ua/f0rTs38H06M0gIB9jYl8/Pj1icJHzAAAAVXRSTlMAAgUDCAsPFxIJDU8fFBpWSiMGRVkpUywdJS81Mjs+QThd/mPk8Natupv+yGyNf3T7/v77/v7dw3v86LEe1TXBzMKvnFNJZPxH0bXFUh5uakItgH0Y/skKLQAAHplJREFUeNrEl81OGlEYhtvSWhXtVEqnaqv8yG/48WromJAQhH1J0wvAwIpCegWyZ2kT2CAxYUjcNQNLtkrcuGhMegF9v+8cOUhrVX7sewZSKdBnnr7nm/HJdHlKsdmeIY7nyNILZJmzgGOBDsoLyhK9w+F49sxms+FjT3D8nzxV2A4JvUy0C4uU1WH4R7zMZ7BE+IAHPX36v8Df4F4CN1Mz8svxrCKMz/qv2f8LueJ2OGBbyJbQr5B1ZGX4RK+8RJhempfiHx1eccM3WNg1QRPsyhqysbYhskZZWVmhEyD7VJwXzM7o4H4kdCWcayJaIrAZGqxvkXcjwY94lfAVPEpD3h9XO2OzcKo3t4RtQzWowby5+QF5L0N/3txkftCTeqo92Nk71R3e586uwKVw6CZuxgY1oEHsdru3tra2ZbYQtxtnwPiAZ/PMvgx20v4o6PQ/ywPl+fMX5Ht1FbqpJOT6A6CB7HK9QV6LvKG4XDgD4IMe8FQbyc6VeZwxIxuOwSb6zTUBN2MTtIuQ7YguY0fwEuNvAR7sKD2XZpH36qO0HV/OO5OEM/dNbBINZE1zjkXTcAJMz/BCPLOTdmK3zVc7g9toZ0I4F2XITdhMzaBg93h2RDxOTacXJD3BMzvQadCQdm7MPMvOTeFLjxJO3Kwb2MB1AnFnNx4OhiKBQMDn8+E5EgzH4lGPRmcFepiHePautPOQsSnp86k4wDEJZVHgW3Dr7HonHg5FfF6zXq9bVotiWfW6afp9kWAs6iT5il1Whqb7Et2JzavrYhjytR7CZVGIGzURuqOxYADQVqvbbhhG4jqG0Wh3W1bd64+E4x4dJ2gHPHdGaYd1UfZ5gcO4bIoQ7mbfVANPPOgzTavbNgT03t7HHvJxb28vYRB+qd2qm4CPUu1ReNe2+z3XfdgYh+j63Iwvi6ZAOAouuD3aTjjiNa12gxD3Lq/OPlXzmUoKqaSbtaPO+aDH+I2uZfpDcU2Hd+xVVEa2XaKLG/e5GFfg7zYxUIRvcAe89S41ZG9w1s/nvv6ZVPb4xyVOy2i3ID7uFOysfYO1MzpfTmdODnDem9wUbjiE6+zb57XaRsLYuzpulr/enmT2yynUN7p1bySOSaPbof09tAv0BaDPfJtChDQ+BEfDIRz9jgXADd2DTob5yreF/jJXPe8ZiVK37g9FdU1oZ/R1KrssDDzNwfjiEFwIj4a8ddqUP/vlMejb6Ctnl2Bvmb4w6q4z+qbcp8r6LMEdI+CbsilOZ9hvtog7S7Jz9wngkx2wNyxvZNeuicYAXXWdJ8wMr0A8DleH4GgKGg7hDaN0Ct/AvnfIOzZr1/TH0BiFLiaMGOuznIc8VRQ4mhIPeLuG0eskv5aTDwrY81esPYQrk/01o2+g64uLy7iJEfcBM+zKTXCnHvObbaM0uAD3g4OT7fQMo+WN7Nhpn45Yn13V5e4cN+4MU1MSX3LlZIoXjvuE34iV+9oclBJt07drZ+sSfYa7dNiVxdVX68q4M+i1SkavCu5JU06eM3oc1iX6OqPTjSPIp+8K/6pMuxPg76RxT8jbSpRO8+VU5QGsFSyVSrLcwd1Y3R8X1mmu01jHb6cObvrMuoJLPua4640w3kLF07nKVEnljhICHROG0DcIfdiX6bsidydushhc8wAcxq8qyfSUqeT6vaH1bTfQqeo81aeVDnJZ8pei5AB3amEC/5lOZTKZtFr3TObGSrJ1X5Ssb4tdugp0JX1q5eiKKLnu0WNeC1Vpppogb8r1wPCHmvScPMZgNwM7ui5n4zqPxmk3KStfWlpGV7jktDu1uN8yjMtaqjkeZvo2tnCMM48mn0l+oQkTcWo6dums+oKPCuWiK+5t2p3RAM3xfio/mm9i3R3x5tE0Kz9Kia43yH1xi74sqL5MBy6Ui5I7I952ovQrlb/g5MdyK3IBK18AteKWX5FunpYSLW/suuor6/J6RNKnajlGOa5B3BWddmcXY6WZvximcFF4ePCpYdJ93H/VfVR1F+bLmujLNE1XynmuUFe0XSp5L5upjaZQK+wX9kdS4KfxxS/X9gv0fv7UddJnVPWQxtLlJlVNn7gsdNlfgfItviOPmI1E6axZU9mnhYMfBSb+d/ittIa5uEBfutQXzBdsUjkZ+Uo6+WBRymmuxKgrg1otO8y+OD5nmeozP/6Z7Ge8/3P2RpqfDNkX2qRK+hTk3HJsT1au0VzBP9HJZ1UAgQMLx90R75NrJLWf6AvNFxrqLH1BNn3yy6dULrZnkObKAMarWNkiDkYX4IeK71Ae4wuHZMchv4C/6+LYMBIt/y5tUiWdB+Pk+1Mqd5FynwXlZ7WqSLFavM4hjsPDIta/U6TFTxx8BQcaBiVcSkO6br9u+sR1ATnfsUjl3PKgCeWncPQn+gk/Dk8OT07w+PtiYnpGFLhI7UxIt0vpGIyT7lF1+aTBopSXzrPVPtYo/feT4kHx5ODkPjkoYuEjI9h9Oo4uhXQxXtZGpE+zP+UsD6PlRuJTti/yvf9d5UCsuyLfp4JvEclelUh6VOeZzoNxsj0KcBuXRe3PnYBloCz9/hHC6EP2A4mO4w5wxa3A+QurHVhpm0GuywexR1GXCcnlvRaNRJrlZhdX6R/VI5XfrJlLaxNRFMdBceEDgi5cKPjAN74+zaQx6xgJhFmYJyZZCM1SkoCBBEGJj4VWpAwKwgguUgQhg9pF0Y2LqTsX0m/g//zvnNxpNbaT+js3behkbn4M555zZ1qtYpB7EttTNWFYllC++Xhst/Dp/Bldo/NWFyYLLrkkC7sQbj1fv8FlCb/5qi3RVfEduFcjd6UL765V/7EgF/2qXHRNl/nM98BcNuaHcQ8n6/P6uXcOtizusk+6llsSSajKGVN8w7cAT9jfvOYaZbqwusxlzs5vk+USSqKz8MGPEVPfqT0/+MqK+xJkOXTAu7OyRlldcC/NXXrybDmibQiVBXstJAvMf/m+KzyxvJLxasfgs12eEuE+ccly6QvMTbqcOG6bUVJz1sQozSVZUtfPIlmchQ2KG3nXyqv7Q4Afs6A32OJN/PFPR9LlQtSMuEtPXNG5QHXPopVFirkT+O4YX3NTArxVHkpgbAc+ZsEEnMd1OekHXBlUl9NMFyb6HBVdd1s2zS8gWUDgjsHNsWhTXeVhdOftne14+xBj6o1hGIwFmDvOZ+wA0Iw00fcnNWcfOqBpLs/jLn+SeTPr7nhguDmw6rBehde23nwhhMibc2FOMXeY6Jc2JfqR5Oa6TzQN9ArSnObj0iDiNljFiLOyuqLcaTD4nqxixMHJZEBKAzFnXWSim4q+bx+LS6IbOW5acM/P1p/CQ5bPGTEPxiXD7dJtIgLWOsYE2owVYv1V24CJImCecaSNplK6X9QlmticfeiYPKw4imou4mIelgyLYG1xLWKCMcGY0misMCYx8Kk4i6REMCvMWdG5ROftReygtrRwgdJ8oxSGYavVovcWd1UmEwR/6ytmr9pq3mph0lL4M5OJlih7Ec0TF/So92tpYR+i+S+YizrJkbUymJRJo9yYDY5OWSzn1nKgRahegTmX6LXI/NA811zL+aHD0kGj0gLxzA98A1BvUM6V1Rqh6s1NIfCYlcd5NKd7BYTDjzSPdVH5PyP6f1Jzs2th75e9+TuH5kuViNEop+pKs9ysNf8FDtesuGE0qhjCII35pbhcOngwbo5rnmSB0lzL+dGUFEWaf1yvVIYiTu4Ltfu1CJhhzNZmKDyXs9B9PfxVhDr7/1Et6MZ87y7MsWv5TPFiOqgMhecxc0O+mc/j1Wzme02EDNJk4IAcr+G1Rfz56DlnrCyp+UWaHzOtKKk5V2h0D3rSmqfTxceRudAm+XZe6eV7s+n0cDiv4DRBphkaPsKcBf1iCuan1Jw3F0nMj1hz3FZY86XhsCBY804n3yE9E0pffyk4SHhCeypeIMONbDGdnpqf3I35AWuOR7hiDvViNoC58BLU2+16vd7pYBDP6/X7Xv9P8Eev53lex+sQOQUnyxwFw/ojiP8f8xnZUnw8NOJG3eApfRn9v8OjpO7VCSaI1INC8HX35naF0lxXaIbm2eJScNdgzaFC4tYvJDDkHb3pTuiu5tFkhe/Z7CZzXaG7ry1qnr3xvfCAX/Y04hnwnnnee8tvUu2mxWkgjAO4eBIFPfh+0/Ud8eNYbWjYszX5AL0UPHrtIZceUgJeHIKg9maxFdJXqEoKhlC2BOxpc8on8P88M9OJrXqI/13o7uxs/Tk7mcxL3u7l81vzs/dUGb+if53fq/tC1KX8uR5brleQI5DTufPFG2Y838nFq2632+m86ii3zh77L3bUQ13A3yh4p4O3e3XSrFuWkj8wdyIpr3T3JznminQP1fJ6wHKOkX+mDwoh/0lnudR3KEwXdZZjEND30Op3f8y4eIOL5Zi3AK7kotv1vA7lzWDAhA9vPuzyTuWHiv7+w7tdFenuDKTb63rdoGnkX55gxgW5fAagmtzMcq88+PhsJ28GkCMDb9AZyJTd2v7W0DVeZfBhoONxqMm13MwVzSy3+tL/Es3Pd/J6cuJpOocof2zwsj2CXLk1vENvQQmaps31/FxvilZazZ3TqzleE5k2bwovpHihIkSRYkfjcfjuBz6Cccjo5c+fIeg/luNsvJQNH1EGMvwmXpCU5LQmqryaQ2gFfd6soGkd6hh502f6MlxSmBL6fhSRL/PhzeTrws/G/EWUjcNxFr1b+iG7URUJZby8WZJ/fXxJys2eaIX9Fj2gY4KOYbEk7wXh7/Qw44yjH3E2hjda8GuWLhayYA59NkYVP6IsWc72IG6W5M8wKJamimjzqjtFJKdLlAeX2mxGciQPJV0GEpiEiOfz+SI+zfwFkp6eio38IhPzxXye+gK14h2c3XEY95R8BrnDSyIaWiDnHfTqu3NmCV0j+UzKe3kYx2mcpikEm80mEkWWQkd0fO4FBfyTTVacbmSWKSUmOMsBZ/nBAvpsFTlvW6hLFPuKDuRJYkl5L4+RlEKQeVwUAri/2FU5V2K4ciMtlmPASmbcze/fvnCh2o6o6S7yEr2K2aK6/7M8kXJD37A8LdCc8xUBJ/NJOfytpIuiiCHnKHrek/KE5bWn6OZmpkhyjHPVdv71gy2XHn58iilRIkSi5K1cydPNEJLvo2K9ktFkY5flw++j/nC1QfWUolocckQIgd7iFEfqDnpzt/Nf/RyXOzpG9KPCITnoSt7K15QhZ5WMRvlK03/HTycTLl2PRjP4ZdaUVovoBFfyT3fvmB2uqmcWfC8q7Yne+8RyprMckfI1yfO+CxZlqjNRr6vpiuX4zyUr4wZcywUFcO4sZjTnbl5BXj5u4W2up05tJhA/0fI202X6bn843SKr7XQ/2+kWn9/d/lrLyU7uFsN9ag8HnQWTFj0moptXPVU03eXWZRpdjr45NUv4CNPxr4LeJvnxcGjbNddtAchh7kv+RFTZ8Wv32XBrD6n+8XrdbnOTIz4Ha38aWdSYWP0kF3QzdeHVBc6gsQyFnOm60dvtY4697bluc9tosPIlZfpSh4oaU1SwtrYt67cRlmu4sGpO/+iR7iz6rOU/n1gw16gz8ylBkGu5pjfarvvUblBeHoaKHfxRtNzA8yCQcsdxcO5PTa47S8UnFkA3z0Kpc4uvjmNJ+CHdtp+5r9tMPHRTsf3afX3cKLW5hiN+gM5i9b88MOe46vD8DMmrjS7mGr324KioOyKQ8WKmG3nDct0eEQ/tXIS/yfPGfmeJvYDz07cci59vUY9aoLNUfmSR5DRf5GuUj1y40WeBpod73QX9uAbigV0VNF23bjoLy/PQU/IT4dT58RZ9fVbsLGZ04WtUP+FCPb1u+SfEDjwkL9PtNrqD3bAN3rApv2g5l9AmoigMC4KCohEMKoqP+KiV+gJRcCGC7hTctWbiG42QMAlojI+FSn0sCoLBhSSoBBMFJQoqEcQqiEGhi9FGRaJIjCa4qSFU0r3/OXOvdzKzm4x/s5CZjP3m9NxzX+fcfrj5XqvJYXAoR+zVHJwFXm7J45qmIov7REuUV3BWEZbRi0GtUGVdh659BLpy9KDZBE3svTZRTDxgBf/2ELM5qErK6hp5uV+1z26y/sQIQAbG2Wa+ohYS4BAm7h+V0fcKf7BYnT4sDpohi8nBTeCSvKJr3afOOY3+Ly034O9dWsaqBX4V1kgADl3/JtH3naG4yLLZm67oaL+CnLnviKUW/s+yIa0s0qFVSHRdzIWneARg9XT/OjTSEWCzxGLRO2IncjjE0Dlgkmzc5CyxcwL82zssbslFIlZBD3lncpBbUhal0X3USLOGIGeB4uVX09NNuzoFdPp7MPirry/vkCzgRi6kPWWTs5erwZb7BHTaRBc5UWaRhT+wrOd1MHqD0dW66OnTd9+9AjkcXbfQWsi5DewD9ru7p09bl0KZHMuh75dbA4u9fbr3dJluCU9fu+IFjD4odUewA/7l92/kLgTqVH9s6Nubl8AW4IP4CBnVkPYHIxaO5Sopd7LsP7tKhxYprqIk5w+MLhfRBx+odfSrT1qY2396dcCO/erT1x8/WtjZsK74C+xBw6hoA8W+AO0O2UzeDbkzeT5AQb2QMSJq00WhRyYmIk+eYIn0jRIWQJ88wQ2DuBlcoEdYRianaS+WohpKVojMMMv+CLz74hZpdI6MFNSrmYhQB/kDANIOVqdwxcArETlLcfM+ywiaZ+8cvyPhX4F3mT4vuiMumntaiYgtuojYX2RdvTwxMXH5qkPi+mUhfgSPkjKZrDaA5smpIVYv75pcJC5O4UpFMzIGaOSVTWZIhA5wqaOwbYZ3Ozt1H38LXBXgkp03cKuaxoUKIh+XRyyiF/KAXIwBRCNdFqCgfkNt6ZIEeYYQncrQCymTk/AkgWdGtDLqoPwyHXemJxV/Ct1abkGNtO91fzSTFOQdOQDNiSbtp3M2AH/4X/WJifu0Ya52zCECT3IoXwcvt3ZCakbhSdGfKnEJBCioFzh34XZSgAOdVG82b4O1Q3ifZh1vINAZHs9RtklOo1DuAzhFROu43ANye40L+wtNj3Kcl0IMkAA/VQfkCTY3JIx/IomLpxQ3g5N+3giRrwT8ombOi0JF5xTD1kh7irp2I5Fknb19RIohT9iF10meOKJ0+2yS3joRGdEwuF0rTS7rzmRg8c5fVPlcIEBBHegyL4p+TIHyyBFw1Vl4rSMn+JrUWalkAukV0T9LV/r+Nc+pshhnklfkHBk7ShaXoZGWtVAk/Q9Ekv1ssmpCTYg8SHLjI+ATyYqObr9nWcA3fbFsnmzy7rpPZ+mCtSf1mY1UCxlp0+yXpD7/bNbaJSQIiyxtpNy28QI/P19S4ifSAA9RKPcFposBi3e+4hwzqp6UGulTLNgDnVIX8RGqtVMnbUq1m4qcvotHwsmKRs2z1x+wVstxOqtn4Gqtjla8ZCNdhulRSNO1ahrsELEfx0+tVhpOdXAPl2q145+PQ0xNSofh4yEO5X4xYFHN02ty1Uil0XkNI6TlEmFmPy70E87RbpdKcVKp1G7DV+i6SmfFAzc0PMqhnHc/RQWRKn7y9ugZVVdsGh3D3QH8fr2SjHOGcVpk6qbbrJpUO/1BYuNLUDyRZXBunmzyubQtxL7ipclVfJGNVA1fRgEQQmBP58NpU4TXvnXw4PnDj4bD4RLUblO+9/EwQTN3PFIhcG6efjK5i/mEq0aqjL66j40OhkImng9Lpdv39uy5cuHiyTxKEYAOcqV8/iwZHNLKxT5ERDlgmWrrPb11dR7uKqNzd6SH2OzZZDyVl+SH9+w5eIjIGb1dktjx4eFENcrgAzpNhGwm9/4wMefwRXl6aIANiISdZPxRCqjhMNn8IGyeAjnF8zjXU8TzqXziBrgZfIAHLMrkM6zHE3juLtyT2j0dEJK9EEkAPhUvCW9JpZi8hCKYVOrRcBrTH5ObntExYPHLTgi+otLkPJfN6IvY0zGb1gldsEezg2fzw8O/iPzYY6CbRU6wfiKTq2hW8HKxN8CdkIspnOvuqHN2BHKFDhWyjS/79x+8cPMxivqo96/VB3OFqMRmbpCPwssx1FJjRFfr/O7DC6akA6YUejBWO//8cPj2g2vXqrnCWDmma0KSG+DBYg95OZt8novlOHfoVqOvfP1UDyp2wEd1kJ+/dekatsajmh4cig1EBbYEDwax87nG51de7oiInvuLzeg8ZESyUQc7yJ+fv3h88OHv3xWkfuyOBUGtuAEOobTPL0zu3IfzXvaOlEa7fcV+gEh2Xde1oJNch4AtuCFsUPjEUMvFDr/78KJGL1wdHZTs4Bsp5Bp28pZRbRRGiN7kxvfRPkWxtprve2tyZ22XbfRC1V1cI0UaeTtu1BOGnZxKeerGeGMkaHKLqiG7yV2Qu47pvHfUWxRnhpYbRp3Uctg8Y/Ado1Xuh1SNGQcWN17uftdLefqc6VTeRezlccMYhwwHeQPXIbo/Rtxc7zyLTN7N1orLmnS1+DKL6gHo2NPGeIs17vDzt7gj7rXKu0mjK1bPtkwoxDmc/1edK14YA8zy97xgmretBqv11kGOO1Im+Yse32wearkYl3fv6eQvdETk4t7i0G789I+9NTUWa1+5cujZg4cfgU7kY423UgAfGkLlbd/sRewr0stdBBZX7sJGl/6ycM3rF4ABfHmMVY41v3yJ16vZCpkcfSiuizvAHsI3R5euWiKPPIPJXZC7HwLIFa/5dNbvthXvR58ye3+ZFLOpLMTmxpG/619vnLUAccUcak1z0Qu5Dy/WM/QWLdi+s7eI04mBReoHYKf4jGKIsUfXr+/ZuGXhAnVUm6uQ6H5yJPyF0Ofu2rBzzcrl64t0IPQQsTtF0HQ89Pr1y/u2btq8Y744sNX9cpz7yRHvNfIJtH+rO5sdpaEwDJ8oOmriwoWJf0sZFTczbakg/8OA//9eBEuuAhpddkHSC2ivQBoSL8INq6ZraBcNCUnBwZn4ntOWgoJjYlLPvKvZzdOP93u/0y7Od+t2VRRfHDy4t5ve28MN3HgAqi+h6N/fvn0F9F5692GlJufz+efXcHEoAw9KnhA50CO/MPRb1+qiIIxLzw8ODu7dv797N53eW1c6fXf34cNHFYZtWFK+foPdeBp5JRGzxN9eLi8vLN5pUPLxVJJkuVarVPAEj1ZVAXJNzmiQaRiWlZcbN1auJUbJkyNHMkZ3LVOGmiuC3PPmc8swtcFA15XHK3pCpegDgFPyfOnOzs0QHLmSkMtjvwTReAnoV153F74ogNyfu6NRxrF1pa12e53+bNbvdHrdrtpWdH2wJG9cRnOGF7Yn5pX1C11p1aHaYnHkr5IPhyF6BN5WlCW5UdrZucHAL+CklYBXtt7jfuWVvDg6Opp4478jt0pXL8aLCZIEj9FTtE1B8HxB0b+7nncqOdB97zpBHIa7T5Le8xMvWoBjSMMCOdC/T9zTa+5npcLV1PoqiCS1tueHNOAXgEOTCSNn4CAHeq8H8qhDNSOb9a18jqTADY//0+34/74y50KKNKbfl+hQxhkqYc0Zd0AOdDebnSPQC+R8yJ10xeOqAx3lI69EwZ9E4NlQPh7BHsI5jBzoIx8Fp5OoTMI1M8mTr68QI+WqJwiIFneyKmfIPIOq07LrGXC7pknznFDs8/9xcRv91yAgr6rjvoMhGmdLPIlgF9qiQ1rvUTD9C4QAPPGCr6MzkUNx+Kk/ErbkeU9V7JHrZmz4nE0ikCe6bG573UlO7KK4Doq+iVwd2jbOA/G5BeT/nzuAz4ntWafTUVzP35TnKjV6PEMlkHPBDTXF+axPW5G64rRJJI1LRcKLUnUxA3S0YnuQyfyBHOjSeGrJZcKN6qLb64TDUnNshEuULSxclpPImI4ly5KeEm50OBY8Rw0O4ixC8H5BD+lqMPhRcSpWcLSoxFHNm31HFDzXGYAvsLMF0RckTQc48NuKZk3BbSIVn/LRnqzkjz/1XSFIxYwDt4RO78DnHTZEA25TA7jMT4MSUlWDPPfnUbawBg0nUbetm5ZkmeEkknMpwo2q7Rk49fnGPMcIZa7Xozwv8WMWUl3m+dz9nbytrkwidGmB8KPDurM1z5nN4zy3xiWOkoWQojjq9VHdZZ6H4PFXC0Y+oLmYIzypKIqeHee5Zmo2y/Ow3Ah0hcalhUFk8EWeqgqC4I1sHaIRYoR5bqA3KTYeCEaZ0mA0moQr1ZHma3kefuaCWQK3aAYbTCZfcQ6V2StRnOfxu3944gp/DJMzs1D00t99neMOHE1aB7qboWb5lTx4hVbbmiZzdEpcZc8VSmCHU2AUGomfg+15s9mso+raVC7wyc1Ubv04OT7e3xemeGNWVJxYcCQX9/ePT05+tN4SnvWhFesH1Ir1nnCtc89aW/TsPOFbb7eBfyS8681m8HeEf73Z36CzAE7IU9lYk6kVOJv4W5VqFkrSNJJUfUnOkFLFl80cVfPlWal3pHPFcvkQKhd5T8PE9RMPum6Sc/ZY0gAAAABJRU5ErkJggg==",y}();class Ef{constructor(e,n=!1,s,c){this.skipNextObservers=!1,this.mask=0,this.initalize(e,n,s,c)}initalize(e,n=!1,s,c){return this.mask=e,this.skipNextObservers=n,this.target=s,this.currentTarget=c,this}}class yo{constructor(e,n,s=null){this.callback=e,this.mask=n,this.scope=s,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1}}class Pl{constructor(){this._observers=null,this._observables=null}dispose(){if(this._observers&&this._observables)for(var e=0;e<this._observers.length;e++)this._observables[e].remove(this._observers[e]);this._observers=null,this._observables=null}static Watch(e,n,s=0,c=null){let u=new Pl;u._observers=new Array,u._observables=e;for(var m of e){let b=m.add(n,s,!1,c);b&&u._observers.push(b)}return u}}class ml{constructor(e){this._observers=new Array,this._onObserverAdded=null,this._eventState=new Ef(0),e&&(this._onObserverAdded=e)}get observers(){return this._observers}add(e,n=0,s=!1,c=null,u=!1){if(!e)return null;var m=new yo(e,n,c);return m.unregisterOnNextCall=u,s?this._observers.unshift(m):this._observers.push(m),this._onObserverAdded&&this._onObserverAdded(m),m}addOnce(e){return this.add(e,void 0,void 0,void 0,!0)}remove(e){if(!e)return!1;var n=this._observers.indexOf(e);return n!==-1?(this._deferUnregister(e),!0):!1}removeCallback(e,n){for(var s=0;s<this._observers.length;s++){const c=this._observers[s];if(!c._willBeUnregistered&&c.callback===e&&(!n||n===c.scope))return this._deferUnregister(c),!0}return!1}_deferUnregister(e){e.unregisterOnNextCall=!1,e._willBeUnregistered=!0,setTimeout(()=>{this._remove(e)},0)}_remove(e){if(!e)return!1;var n=this._observers.indexOf(e);return n!==-1?(this._observers.splice(n,1),!0):!1}makeObserverTopPriority(e){this._remove(e),this._observers.unshift(e)}makeObserverBottomPriority(e){this._remove(e),this._observers.push(e)}notifyObservers(e,n=0,s,c){if(!this._observers.length)return!0;let u=this._eventState;u.mask=n,u.target=s,u.currentTarget=c,u.skipNextObservers=!1,u.lastReturnValue=e;for(var m of this._observers)if(!m._willBeUnregistered&&(m.mask&n&&(m.scope?u.lastReturnValue=m.callback.apply(m.scope,[e,u]):u.lastReturnValue=m.callback(e,u),m.unregisterOnNextCall&&this._deferUnregister(m)),u.skipNextObservers))return!1;return!0}notifyObserversWithPromise(e,n=0,s,c){let u=Promise.resolve(e);if(!this._observers.length)return u;let m=this._eventState;return m.mask=n,m.target=s,m.currentTarget=c,m.skipNextObservers=!1,this._observers.forEach(b=>{m.skipNextObservers||b._willBeUnregistered||b.mask&n&&(b.scope?u=u.then(k=>(m.lastReturnValue=k,b.callback.apply(b.scope,[e,m]))):u=u.then(k=>(m.lastReturnValue=k,b.callback(e,m))),b.unregisterOnNextCall&&this._deferUnregister(b))}),u.then(()=>e)}notifyObserver(e,n,s=0){let c=this._eventState;c.mask=s,c.skipNextObservers=!1,e.callback(n,c)}hasObservers(){return this._observers.length>0}clear(){this._observers=new Array,this._onObserverAdded=null}clone(){var e=new ml;return e._observers=this._observers.slice(0),e}hasSpecificMask(e=0){for(var n of this._observers)if(n.mask&e||n.mask===e)return!0;return!1}}class nl{constructor(){this._idbFactory=typeof window<"u"?window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB:indexedDB,this._db=null,this._hasReachedQuota=!1,this._isSupported=!0}openAsync(){return new Promise((e,n)=>this.open(e,n))}open(e,n){const s=()=>{this._isSupported=!1,n&&n()};if(!this._idbFactory)this._isSupported=!1,n&&n();else if(this._db)e&&e();else{this._hasReachedQuota=!1,this._isSupported=!0;const c=this._idbFactory.open("zakeke",1);c.onerror=()=>{s()},c.onblocked=()=>{Logger.info("IDB request blocked. Please reload the page."),s()},c.onsuccess=()=>{this._db=c.result,e()},c.onupgradeneeded=u=>{if(this._db=u.target.result,this._db)try{this._db.createObjectStore("files",{keyPath:"fileId"})}catch(m){Logger.info("Error while creating object stores. Exception: "+m.message),s()}}}}loadFileAsync(e){return new Promise((n,s)=>{if(this._isSupported&&this._db){const c="files";let u;const m=this._db.transaction([c]);m.oncomplete=()=>{n(u?u.data:null)},m.onabort=()=>{n(null)};const b=m.objectStore(c).get(e);b.onsuccess=k=>{u=k.target.result},b.onerror=()=>{Logger.info("Error loading file "+e+" from DB."),n(null)}}else Logger.info("Error: IndexedDB not supported by your browser or Zakeke database is not open."),s("IndexedDB not supported or Db is not open")})}saveFileAsync(e,n){return new Promise((s,c)=>{if(this._isSupported){const u="files";if(!this._hasReachedQuota&&this._db){const m=this._db.transaction([u],"readwrite");m.onabort=W=>{const ve=W.srcElement.error;ve&&ve.name==="QuotaExceededError"&&(this._hasReachedQuota=!0,c("Quota Exceeded"))},m.oncomplete=()=>{Logger.info("File saved successfully"),s()};const b={fileId:e,data:n},k=m.objectStore(u).put(b);k.onsuccess=()=>{},k.onerror=()=>{Logger.info("Error in DB add file request in Zakeke3D.Database."),c("Error in DB add file request")}}else{const m=this._hasReachedQuota?"Quota has been reached":"Database closed";c(m)}}else Logger.info("Error: IndexedDB not supported by your browser or Zakeke database is not open."),c("IndexedDB not supported or Db is not open")})}deleteFileAsync(e){return new Promise((n,s)=>{if(this._isSupported&&this._db){const c="files",u=this._db.transaction([c]);u.oncomplete=()=>{n()},u.onabort=()=>{s("aborted cancellation")};const m=u.objectStore(c).get(e);m.onerror=()=>{Logger.info("Error deleting file "+e+" from DB."),s("Error deleting file from DB")}}else Logger.info("Error: IndexedDB not supported by your browser or Zakeke database is not open."),s("IndexedDB not supported or Db is not open")})}}var Nh={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Nh.exports,function(y,e){(function(){var n,s="4.17.21",c=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",m="Expected a function",b="Invalid `variable` option passed into `_.template`",k="__lodash_hash_undefined__",W=500,ve="__lodash_placeholder__",Ae=1,rt=2,re=4,mt=1,nt=2,tn=1,Ie=2,Kt=4,At=8,an=16,Cn=32,He=64,_e=128,Sr=256,On=512,Kr=30,Mi="...",ei=800,oi=16,xr=1,Ts=2,Fn=3,si=1/0,Pi=9007199254740991,ai=17976931348623157e292,hs=NaN,fa=4294967295,Hs=fa-1,Ns=fa>>>1,da=[["ary",_e],["bind",tn],["bindKey",Ie],["curry",At],["curryRight",an],["flip",On],["partial",Cn],["partialRight",He],["rearg",Sr]],Zi="[object Arguments]",fo="[object Array]",io="[object AsyncFunction]",qo="[object Boolean]",Ti="[object Date]",Fi="[object DOMException]",zi="[object Error]",wo="[object Function]",xo="[object GeneratorFunction]",Fa="[object Map]",Uo="[object Number]",so="[object Null]",pa="[object Object]",ea="[object Promise]",fs="[object Proxy]",Ds="[object RegExp]",di="[object Set]",Ai="[object String]",ui="[object Symbol]",bo="[object Undefined]",ar="[object WeakMap]",t="[object WeakSet]",i="[object ArrayBuffer]",o="[object DataView]",h="[object Float32Array]",d="[object Float64Array]",v="[object Int8Array]",D="[object Int16Array]",A="[object Int32Array]",T="[object Uint8Array]",P="[object Uint8ClampedArray]",F="[object Uint16Array]",V="[object Uint32Array]",z=/\b__p \+= '';/g,R=/\b(__p \+=) '' \+/g,J=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,ie=/[&<>"']/g,j=RegExp(Y.source),X=RegExp(ie.source),I=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,te=/<%=([\s\S]+?)%>/g,pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oe=/^\w*$/,Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$e=/[\\^$.*+?()[\]{}|]/g,Xe=RegExp($e.source),ft=/^\s+/,Ze=/\s/,yt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Et=/\{\n\/\* \[wrapped with (.+)\] \*/,Yt=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ln=/[()=,{}\[\]\/\s]/,In=/\\(\\)?/g,Zn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Kn=/\w*$/,ur=/^[-+]0x[0-9a-f]+$/i,yn=/^0b[01]+$/i,An=/^\[object .+?Constructor\]$/,qn=/^0o[0-7]+$/i,cr=/^(?:0|[1-9]\d*)$/,mr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Rr=/($^)/,Lr=/['\n\r\u2028\u2029\\]/g,Ir="\\ud800-\\udfff",ti="\\u0300-\\u036f",Wr="\\ufe20-\\ufe2f",ls="\\u20d0-\\u20ff",Vr=ti+Wr+ls,$i="\\u2700-\\u27bf",Qi="a-z\\xdf-\\xf6\\xf8-\\xff",Oi="\\xac\\xb1\\xd7\\xf7",Bi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ys="\\u2000-\\u206f",ns=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",As="A-Z\\xc0-\\xd6\\xd8-\\xde",rs="\\ufe0e\\ufe0f",Ji=Oi+Bi+ys+ns,Fs="['’]",Is="["+Ir+"]",Ws="["+Ji+"]",Ca="["+Vr+"]",ta="\\d+",Po="["+$i+"]",il="["+Qi+"]",Oo="[^"+Ir+Ji+ta+$i+Qi+As+"]",sl="\\ud83c[\\udffb-\\udfff]",Ya="(?:"+Ca+"|"+sl+")",al="[^"+Ir+"]",Vi="(?:\\ud83c[\\udde6-\\uddff]){2}",Ll="[\\ud800-\\udbff][\\udc00-\\udfff]",po="["+As+"]",Za="\\u200d",ga="(?:"+il+"|"+Oo+")",$a="(?:"+po+"|"+Oo+")",oa="(?:"+Fs+"(?:d|ll|m|re|s|t|ve))?",Zs="(?:"+Fs+"(?:D|LL|M|RE|S|T|VE))?",_=Ya+"?",he="["+rs+"]?",gt="(?:"+Za+"(?:"+[al,Vi,Ll].join("|")+")"+he+_+")*",jt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",nr=he+_+gt,l="(?:"+[Po,Vi,Ll].join("|")+")"+nr,f="(?:"+[al+Ca+"?",Ca,Vi,Ll,Is].join("|")+")",x=RegExp(Fs,"g"),N=RegExp(Ca,"g"),ge=RegExp(sl+"(?="+sl+")|"+f+nr,"g"),Oe=RegExp([po+"?"+il+"+"+oa+"(?="+[Ws,po,"$"].join("|")+")",$a+"+"+Zs+"(?="+[Ws,po+ga,"$"].join("|")+")",po+"?"+ga+"+"+oa,po+"+"+Zs,wn,jt,ta,l].join("|"),"g"),Ht=RegExp("["+Za+Ir+Vr+rs+"]"),Sn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Rn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],dr=-1,Dr={};Dr[h]=Dr[d]=Dr[v]=Dr[D]=Dr[A]=Dr[T]=Dr[P]=Dr[F]=Dr[V]=!0,Dr[Zi]=Dr[fo]=Dr[i]=Dr[qo]=Dr[o]=Dr[Ti]=Dr[zi]=Dr[wo]=Dr[Fa]=Dr[Uo]=Dr[pa]=Dr[Ds]=Dr[di]=Dr[Ai]=Dr[ar]=!1;var Pr={};Pr[Zi]=Pr[fo]=Pr[i]=Pr[o]=Pr[qo]=Pr[Ti]=Pr[h]=Pr[d]=Pr[v]=Pr[D]=Pr[A]=Pr[Fa]=Pr[Uo]=Pr[pa]=Pr[Ds]=Pr[di]=Pr[Ai]=Pr[ui]=Pr[T]=Pr[P]=Pr[F]=Pr[V]=!0,Pr[zi]=Pr[wo]=Pr[ar]=!1;var Ur={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},pi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mi={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},gi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xa=parseFloat,Xn=parseInt,Un=typeof Go=="object"&&Go&&Go.Object===Object&&Go,rr=typeof self=="object"&&self&&self.Object===Object&&self,Nr=Un||rr||Function("return this")(),vi=e&&!e.nodeType&&e,xi=vi&&!0&&y&&!y.nodeType&&y,Ri=xi&&xi.exports===vi,Ui=Ri&&Un.process,zs=function(){try{var Gt=xi&&xi.require&&xi.require("util").types;return Gt||Ui&&Ui.binding&&Ui.binding("util")}catch{}}(),M=zs&&zs.isArrayBuffer,Z=zs&&zs.isDate,xe=zs&&zs.isMap,Re=zs&&zs.isRegExp,vt=zs&&zs.isSet,Ct=zs&&zs.isTypedArray;function It(Gt,Nn,En){switch(En.length){case 0:return Gt.call(Nn);case 1:return Gt.call(Nn,En[0]);case 2:return Gt.call(Nn,En[0],En[1]);case 3:return Gt.call(Nn,En[0],En[1],En[2])}return Gt.apply(Nn,En)}function Pn(Gt,Nn,En,ke){for(var et=-1,Nt=Gt==null?0:Gt.length;++et<Nt;){var dn=Gt[et];Nn(ke,dn,En(dn),Gt)}return ke}function xn(Gt,Nn){for(var En=-1,ke=Gt==null?0:Gt.length;++En<ke&&Nn(Gt[En],En,Gt)!==!1;);return Gt}function Wn(Gt,Nn){for(var En=Gt==null?0:Gt.length;En--&&Nn(Gt[En],En,Gt)!==!1;);return Gt}function Cr(Gt,Nn){for(var En=-1,ke=Gt==null?0:Gt.length;++En<ke;)if(!Nn(Gt[En],En,Gt))return!1;return!0}function kr(Gt,Nn){for(var En=-1,ke=Gt==null?0:Gt.length,et=0,Nt=[];++En<ke;){var dn=Gt[En];Nn(dn,En,Gt)&&(Nt[et++]=dn)}return Nt}function hr(Gt,Nn){var En=Gt==null?0:Gt.length;return!!En&&ps(Gt,Nn,0)>-1}function Gr(Gt,Nn,En){for(var ke=-1,et=Gt==null?0:Gt.length;++ke<et;)if(En(Nn,Gt[ke]))return!0;return!1}function _i(Gt,Nn){for(var En=-1,ke=Gt==null?0:Gt.length,et=Array(ke);++En<ke;)et[En]=Nn(Gt[En],En,Gt);return et}function ds(Gt,Nn){for(var En=-1,ke=Nn.length,et=Gt.length;++En<ke;)Gt[et+En]=Nn[En];return Gt}function us(Gt,Nn,En,ke){var et=-1,Nt=Gt==null?0:Gt.length;for(ke&&Nt&&(En=Gt[++et]);++et<Nt;)En=Nn(En,Gt[et],et,Gt);return En}function So(Gt,Nn,En,ke){var et=Gt==null?0:Gt.length;for(ke&&et&&(En=Gt[--et]);et--;)En=Nn(En,Gt[et],et,Gt);return En}function Ka(Gt,Nn){for(var En=-1,ke=Gt==null?0:Gt.length;++En<ke;)if(Nn(Gt[En],En,Gt))return!0;return!1}var za=qi("length");function is(Gt){return Gt.split("")}function Li(Gt){return Gt.match(qt)||[]}function ko(Gt,Nn,En){var ke;return En(Gt,function(et,Nt,dn){if(Nn(et,Nt,dn))return ke=Nt,!1}),ke}function Ms(Gt,Nn,En,ke){for(var et=Gt.length,Nt=En+(ke?1:-1);ke?Nt--:++Nt<et;)if(Nn(Gt[Nt],Nt,Gt))return Nt;return-1}function ps(Gt,Nn,En){return Nn===Nn?Zu(Gt,Nn,En):Ms(Gt,Yl,En)}function ri(Gt,Nn,En,ke){for(var et=En-1,Nt=Gt.length;++et<Nt;)if(ke(Gt[et],Nn))return et;return-1}function Yl(Gt){return Gt!==Gt}function es(Gt,Nn){var En=Gt==null?0:Gt.length;return En?Io(Gt,Nn)/En:hs}function qi(Gt){return function(Nn){return Nn==null?n:Nn[Gt]}}function Xo(Gt){return function(Nn){return Gt==null?n:Gt[Nn]}}function ii(Gt,Nn,En,ke,et){return et(Gt,function(Nt,dn,Qn){En=ke?(ke=!1,Nt):Nn(En,Nt,dn,Qn)}),En}function _l(Gt,Nn){var En=Gt.length;for(Gt.sort(Nn);En--;)Gt[En]=Gt[En].value;return Gt}function Io(Gt,Nn){for(var En,ke=-1,et=Gt.length;++ke<et;){var Nt=Nn(Gt[ke]);Nt!==n&&(En=En===n?Nt:En+Nt)}return En}function Gu(Gt,Nn){for(var En=-1,ke=Array(Gt);++En<Gt;)ke[En]=Nn(En);return ke}function gs(Gt,Nn){return _i(Nn,function(En){return[En,Gt[En]]})}function Da(Gt){return Gt&&Gt.slice(0,uc(Gt)+1).replace(ft,"")}function $r(Gt){return function(Nn){return Gt(Nn)}}function Yu(Gt,Nn){return _i(Nn,function(En){return Gt[En]})}function Si(Gt,Nn){return Gt.has(Nn)}function bs(Gt,Nn){for(var En=-1,ke=Gt.length;++En<ke&&ps(Nn,Gt[En],0)>-1;);return En}function Pa(Gt,Nn){for(var En=Gt.length;En--&&ps(Nn,Gt[En],0)>-1;);return En}function qr(Gt,Nn){for(var En=Gt.length,ke=0;En--;)Gt[En]===Nn&&++ke;return ke}var Ei=Xo(Ur),uu=Xo(pi);function vd(Gt){return"\\"+gi[Gt]}function lc(Gt,Nn){return Gt==null?n:Gt[Nn]}function yl(Gt){return Ht.test(Gt)}function Oa(Gt){return Sn.test(Gt)}function Lo(Gt){for(var Nn,En=[];!(Nn=Gt.next()).done;)En.push(Nn.value);return En}function wl(Gt){var Nn=-1,En=Array(Gt.size);return Gt.forEach(function(ke,et){En[++Nn]=[et,ke]}),En}function xl(Gt,Nn){return function(En){return Gt(Nn(En))}}function qa(Gt,Nn){for(var En=-1,ke=Gt.length,et=0,Nt=[];++En<ke;){var dn=Gt[En];(dn===Nn||dn===ve)&&(Gt[En]=ve,Nt[et++]=En)}return Nt}function ol(Gt){var Nn=-1,En=Array(Gt.size);return Gt.forEach(function(ke){En[++Nn]=ke}),En}function Us(Gt){var Nn=-1,En=Array(Gt.size);return Gt.forEach(function(ke){En[++Nn]=[ke,ke]}),En}function Zu(Gt,Nn,En){for(var ke=En-1,et=Gt.length;++ke<et;)if(Gt[ke]===Nn)return ke;return-1}function Zl(Gt,Nn,En){for(var ke=En+1;ke--;)if(Gt[ke]===Nn)return ke;return ke}function Gs(Gt){return yl(Gt)?$l(Gt):za(Gt)}function la(Gt){return yl(Gt)?gn(Gt):is(Gt)}function uc(Gt){for(var Nn=Gt.length;Nn--&&Ze.test(Gt.charAt(Nn)););return Nn}var Zh=Xo(mi);function $l(Gt){for(var Nn=ge.lastIndex=0;ge.test(Gt);)++Nn;return Nn}function gn(Gt){return Gt.match(ge)||[]}function jn(Gt){return Gt.match(Oe)||[]}var fr=function Gt(Nn){Nn=Nn==null?Nr:sr.defaults(Nr.Object(),Nn,sr.pick(Nr,Rn));var En=Nn.Array,ke=Nn.Date,et=Nn.Error,Nt=Nn.Function,dn=Nn.Math,Qn=Nn.Object,br=Nn.RegExp,wr=Nn.String,Yr=Nn.TypeError,Es=En.prototype,ra=Nt.prototype,Xa=Qn.prototype,ao=Nn["__core-js_shared__"],cu=ra.toString,ws=Xa.hasOwnProperty,sv=0,Sm=function(){var p=/[^.]+$/.exec(ao&&ao.keys&&ao.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),gg=Xa.toString,av=cu.call(Qn),ov=Nr._,Lp=br("^"+cu.call(ws).replace($e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mg=Ri?Nn.Buffer:n,cc=Nn.Symbol,vg=Nn.Uint8Array,Cm=mg?mg.allocUnsafe:n,_g=xl(Qn.getPrototypeOf,Qn),Ks=Qn.create,Ua=Xa.propertyIsEnumerable,yg=Es.splice,Dm=cc?cc.isConcatSpreadable:n,Bp=cc?cc.iterator:n,$h=cc?cc.toStringTag:n,wg=function(){try{var p=hm(Qn,"defineProperty");return p({},"",{}),p}catch{}}(),lv=Nn.clearTimeout!==Nr.clearTimeout&&Nn.clearTimeout,uv=ke&&ke.now!==Nr.Date.now&&ke.now,nm=Nn.setTimeout!==Nr.setTimeout&&Nn.setTimeout,xg=dn.ceil,bg=dn.floor,rm=Qn.getOwnPropertySymbols,im=mg?mg.isBuffer:n,Sg=Nn.isFinite,cv=Es.join,hv=xl(Qn.keys,Qn),ll=dn.max,Kl=dn.min,Fc=ke.now,fv=Nn.parseInt,Am=dn.random,dv=Es.reverse,sm=hm(Nn,"DataView"),Rp=hm(Nn,"Map"),Np=hm(Nn,"Promise"),Bf=hm(Nn,"Set"),Fp=hm(Nn,"WeakMap"),zp=hm(Qn,"create"),Cg=Fp&&new Fp,tp={},pv=fm(sm),gv=fm(Rp),mv=fm(Np),vv=fm(Bf),_v=fm(Fp),Dg=cc?cc.prototype:n,Up=Dg?Dg.valueOf:n,Em=Dg?Dg.toString:n;function on(p){if(bl(p)&&!js(p)&&!(p instanceof qs)){if(p instanceof hc)return p;if(ws.call(p,"__wrapped__"))return mx(p)}return new hc(p)}var np=function(){function p(){}return function(S){if(!cl(S))return{};if(Ks)return Ks(S);p.prototype=S;var q=new p;return p.prototype=n,q}}();function Ag(){}function hc(p,S){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=n}on.templateSettings={escape:I,evaluate:G,interpolate:te,variable:"",imports:{_:on}},on.prototype=Ag.prototype,on.prototype.constructor=on,hc.prototype=np(Ag.prototype),hc.prototype.constructor=hc;function qs(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fa,this.__views__=[]}function yv(){var p=new qs(this.__wrapped__);return p.__actions__=fh(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=fh(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=fh(this.__views__),p}function wv(){if(this.__filtered__){var p=new qs(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function xv(){var p=this.__wrapped__.value(),S=this.__dir__,q=js(p),ze=S<0,Ft=q?p.length:0,cn=SD(0,Ft,this.__views__),Mn=cn.start,Vn=cn.end,ir=Vn-Mn,jr=ze?Vn:Mn-1,Hr=this.__iteratees__,Jr=Hr.length,Di=0,Ki=Kl(ir,this.__takeCount__);if(!q||!ze&&Ft==ir&&Ki==ir)return zw(p,this.__actions__);var vs=[];e:for(;ir--&&Di<Ki;){jr+=S;for(var Xs=-1,_s=p[jr];++Xs<Jr;){var ua=Hr[Xs],ba=ua.iteratee,ef=ua.type,jc=ba(_s);if(ef==Ts)_s=jc;else if(!jc){if(ef==xr)continue e;break e}}vs[Di++]=_s}return vs}qs.prototype=np(Ag.prototype),qs.prototype.constructor=qs;function _d(p){var S=-1,q=p==null?0:p.length;for(this.clear();++S<q;){var ze=p[S];this.set(ze[0],ze[1])}}function bv(){this.__data__=zp?zp(null):{},this.size=0}function Sv(p){var S=this.has(p)&&delete this.__data__[p];return this.size-=S?1:0,S}function Cv(p){var S=this.__data__;if(zp){var q=S[p];return q===k?n:q}return ws.call(S,p)?S[p]:n}function Dv(p){var S=this.__data__;return zp?S[p]!==n:ws.call(S,p)}function jp(p,S){var q=this.__data__;return this.size+=this.has(p)?0:1,q[p]=zp&&S===n?k:S,this}_d.prototype.clear=bv,_d.prototype.delete=Sv,_d.prototype.get=Cv,_d.prototype.has=Dv,_d.prototype.set=jp;function zc(p){var S=-1,q=p==null?0:p.length;for(this.clear();++S<q;){var ze=p[S];this.set(ze[0],ze[1])}}function am(){this.__data__=[],this.size=0}function Av(p){var S=this.__data__,q=Rf(S,p);if(q<0)return!1;var ze=S.length-1;return q==ze?S.pop():yg.call(S,q,1),--this.size,!0}function Ev(p){var S=this.__data__,q=Rf(S,p);return q<0?n:S[q][1]}function Tv(p){return Rf(this.__data__,p)>-1}function Vp(p,S){var q=this.__data__,ze=Rf(q,p);return ze<0?(++this.size,q.push([p,S])):q[ze][1]=S,this}zc.prototype.clear=am,zc.prototype.delete=Av,zc.prototype.get=Ev,zc.prototype.has=Tv,zc.prototype.set=Vp;function Kh(p){var S=-1,q=p==null?0:p.length;for(this.clear();++S<q;){var ze=p[S];this.set(ze[0],ze[1])}}function Mv(){this.size=0,this.__data__={hash:new _d,map:new(Rp||zc),string:new _d}}function Pv(p){var S=v_(this,p).delete(p);return this.size-=S?1:0,S}function Qa(p){return v_(this,p).get(p)}function Hp(p){return v_(this,p).has(p)}function Ov(p,S){var q=v_(this,p),ze=q.size;return q.set(p,S),this.size+=q.size==ze?0:1,this}Kh.prototype.clear=Mv,Kh.prototype.delete=Pv,Kh.prototype.get=Qa,Kh.prototype.has=Hp,Kh.prototype.set=Ov;function yd(p){var S=-1,q=p==null?0:p.length;for(this.__data__=new Kh;++S<q;)this.add(p[S])}function kv(p){return this.__data__.set(p,k),this}function Iv(p){return this.__data__.has(p)}yd.prototype.add=yd.prototype.push=kv,yd.prototype.has=Iv;function hu(p){var S=this.__data__=new zc(p);this.size=S.size}function Lv(){this.__data__=new zc,this.size=0}function Wp(p){var S=this.__data__,q=S.delete(p);return this.size=S.size,q}function Bv(p){return this.__data__.get(p)}function Rv(p){return this.__data__.has(p)}function Nv(p,S){var q=this.__data__;if(q instanceof zc){var ze=q.__data__;if(!Rp||ze.length<c-1)return ze.push([p,S]),this.size=++q.size,this;q=this.__data__=new Kh(ze)}return q.set(p,S),this.size=q.size,this}hu.prototype.clear=Lv,hu.prototype.delete=Wp,hu.prototype.get=Bv,hu.prototype.has=Rv,hu.prototype.set=Nv;function Tm(p,S){var q=js(p),ze=!q&&dm(p),Ft=!q&&!ze&&kg(p),cn=!q&&!ze&&!Ft&&Fm(p),Mn=q||ze||Ft||cn,Vn=Mn?Gu(p.length,wr):[],ir=Vn.length;for(var jr in p)(S||ws.call(p,jr))&&!(Mn&&(jr=="length"||Ft&&(jr=="offset"||jr=="parent")||cn&&(jr=="buffer"||jr=="byteLength"||jr=="byteOffset")||$p(jr,ir)))&&Vn.push(jr);return Vn}function Eg(p){var S=p.length;return S?p[Sy(0,S-1)]:n}function Fv(p,S){return __(fh(p),wd(S,0,p.length))}function zv(p){return __(fh(p))}function om(p,S,q){(q!==n&&!xd(p[S],q)||q===n&&!(S in p))&&Xh(p,S,q)}function qh(p,S,q){var ze=p[S];(!(ws.call(p,S)&&xd(ze,q))||q===n&&!(S in p))&&Xh(p,S,q)}function Rf(p,S){for(var q=p.length;q--;)if(xd(p[q][0],S))return q;return-1}function Uv(p,S,q,ze){return Nf(p,function(Ft,cn,Mn){S(ze,Ft,q(Ft),Mn)}),ze}function Mm(p,S){return p&&rp(S,Eu(S),p)}function jv(p,S){return p&&rp(S,ph(S),p)}function Xh(p,S,q){S=="__proto__"&&wg?wg(p,S,{configurable:!0,enumerable:!0,value:q,writable:!0}):p[S]=q}function lm(p,S){for(var q=-1,ze=S.length,Ft=En(ze),cn=p==null;++q<ze;)Ft[q]=cn?n:$y(p,S[q]);return Ft}function wd(p,S,q){return p===p&&(q!==n&&(p=p<=q?p:q),S!==n&&(p=p>=S?p:S)),p}function fc(p,S,q,ze,Ft,cn){var Mn,Vn=S&Ae,ir=S&rt,jr=S&re;if(q&&(Mn=Ft?q(p,ze,Ft,cn):q(p)),Mn!==n)return Mn;if(!cl(p))return p;var Hr=js(p);if(Hr){if(Mn=DD(p),!Vn)return fh(p,Mn)}else{var Jr=dc(p),Di=Jr==wo||Jr==xo;if(kg(p))return Vw(p,Vn);if(Jr==pa||Jr==Zi||Di&&!Ft){if(Mn=ir||Di?{}:ox(p),!Vn)return ir?pD(p,jv(Mn,p)):dD(p,Mm(Mn,p))}else{if(!Pr[Jr])return Ft?p:{};Mn=AD(p,Jr,Vn)}}cn||(cn=new hu);var Ki=cn.get(p);if(Ki)return Ki;cn.set(p,Mn),Rx(p)?p.forEach(function(_s){Mn.add(fc(_s,S,q,_s,p,cn))}):Lx(p)&&p.forEach(function(_s,ua){Mn.set(ua,fc(_s,S,q,ua,p,cn))});var vs=jr?ir?Ly:Iy:ir?ph:Eu,Xs=Hr?n:vs(p);return xn(Xs||p,function(_s,ua){Xs&&(ua=_s,_s=p[ua]),qh(Mn,ua,fc(_s,S,q,ua,p,cn))}),Mn}function Vv(p){var S=Eu(p);return function(q){return Pm(q,p,S)}}function Pm(p,S,q){var ze=q.length;if(p==null)return!ze;for(p=Qn(p);ze--;){var Ft=q[ze],cn=S[Ft],Mn=p[Ft];if(Mn===n&&!(Ft in p)||!cn(Mn))return!1}return!0}function Om(p,S,q){if(typeof p!="function")throw new Yr(m);return $v(function(){p.apply(n,q)},S)}function Gp(p,S,q,ze){var Ft=-1,cn=hr,Mn=!0,Vn=p.length,ir=[],jr=S.length;if(!Vn)return ir;q&&(S=_i(S,$r(q))),ze?(cn=Gr,Mn=!1):S.length>=c&&(cn=Si,Mn=!1,S=new yd(S));e:for(;++Ft<Vn;){var Hr=p[Ft],Jr=q==null?Hr:q(Hr);if(Hr=ze||Hr!==0?Hr:0,Mn&&Jr===Jr){for(var Di=jr;Di--;)if(S[Di]===Jr)continue e;ir.push(Hr)}else cn(S,Jr,ze)||ir.push(Hr)}return ir}var Nf=Zw(hh),km=Zw(r,!0);function Hv(p,S){var q=!0;return Nf(p,function(ze,Ft,cn){return q=!!S(ze,Ft,cn),q}),q}function Tg(p,S,q){for(var ze=-1,Ft=p.length;++ze<Ft;){var cn=p[ze],Mn=S(cn);if(Mn!=null&&(Vn===n?Mn===Mn&&!Jh(Mn):q(Mn,Vn)))var Vn=Mn,ir=cn}return ir}function Wv(p,S,q,ze){var Ft=p.length;for(q=$s(q),q<0&&(q=-q>Ft?0:Ft+q),ze=ze===n||ze>Ft?Ft:$s(ze),ze<0&&(ze+=Ft),ze=q>ze?0:Fx(ze);q<ze;)p[q++]=S;return p}function Im(p,S){var q=[];return Nf(p,function(ze,Ft,cn){S(ze,Ft,cn)&&q.push(ze)}),q}function Bl(p,S,q,ze,Ft){var cn=-1,Mn=p.length;for(q||(q=TD),Ft||(Ft=[]);++cn<Mn;){var Vn=p[cn];S>0&&q(Vn)?S>1?Bl(Vn,S-1,q,ze,Ft):ds(Ft,Vn):ze||(Ft[Ft.length]=Vn)}return Ft}var um=$w(),Lm=$w(!0);function hh(p,S){return p&&um(p,S,Eu)}function r(p,S){return p&&Lm(p,S,Eu)}function a(p,S){return kr(S,function(q){return Kp(p[q])})}function g(p,S){S=Pg(S,p);for(var q=0,ze=S.length;p!=null&&q<ze;)p=p[ip(S[q++])];return q&&q==ze?p:n}function O(p,S,q){var ze=S(p);return js(p)?ze:ds(ze,q(p))}function ue(p){return p==null?p===n?bo:so:$h&&$h in Qn(p)?bD(p):BD(p)}function Me(p,S){return p>S}function dt(p,S){return p!=null&&ws.call(p,S)}function Bt(p,S){return p!=null&&S in Qn(p)}function nn(p,S,q){return p>=Kl(S,q)&&p<ll(S,q)}function kn(p,S,q){for(var ze=q?Gr:hr,Ft=p[0].length,cn=p.length,Mn=cn,Vn=En(cn),ir=1/0,jr=[];Mn--;){var Hr=p[Mn];Mn&&S&&(Hr=_i(Hr,$r(S))),ir=Kl(Hr.length,ir),Vn[Mn]=!q&&(S||Ft>=120&&Hr.length>=120)?new yd(Mn&&Hr):n}Hr=p[0];var Jr=-1,Di=Vn[0];e:for(;++Jr<Ft&&jr.length<ir;){var Ki=Hr[Jr],vs=S?S(Ki):Ki;if(Ki=q||Ki!==0?Ki:0,!(Di?Si(Di,vs):ze(jr,vs,q))){for(Mn=cn;--Mn;){var Xs=Vn[Mn];if(!(Xs?Si(Xs,vs):ze(p[Mn],vs,q)))continue e}Di&&Di.push(vs),jr.push(Ki)}}return jr}function Ln(p,S,q,ze){return hh(p,function(Ft,cn,Mn){S(ze,q(Ft),cn,Mn)}),ze}function zn(p,S,q){S=Pg(S,p),p=hx(p,S);var ze=p==null?p:p[ip(zf(S))];return ze==null?n:It(ze,p,q)}function _r(p){return bl(p)&&ue(p)==Zi}function Fr(p){return bl(p)&&ue(p)==i}function Xr(p){return bl(p)&&ue(p)==Ti}function ci(p,S,q,ze,Ft){return p===S?!0:p==null||S==null||!bl(p)&&!bl(S)?p!==p&&S!==S:Qr(p,S,q,ze,ci,Ft)}function Qr(p,S,q,ze,Ft,cn){var Mn=js(p),Vn=js(S),ir=Mn?fo:dc(p),jr=Vn?fo:dc(S);ir=ir==Zi?pa:ir,jr=jr==Zi?pa:jr;var Hr=ir==pa,Jr=jr==pa,Di=ir==jr;if(Di&&kg(p)){if(!kg(S))return!1;Mn=!0,Hr=!1}if(Di&&!Hr)return cn||(cn=new hu),Mn||Fm(p)?ix(p,S,q,ze,Ft,cn):wD(p,S,ir,q,ze,Ft,cn);if(!(q&mt)){var Ki=Hr&&ws.call(p,"__wrapped__"),vs=Jr&&ws.call(S,"__wrapped__");if(Ki||vs){var Xs=Ki?p.value():p,_s=vs?S.value():S;return cn||(cn=new hu),Ft(Xs,_s,q,ze,cn)}}return Di?(cn||(cn=new hu),xD(p,S,q,ze,Ft,cn)):!1}function yi(p){return bl(p)&&dc(p)==Fa}function Ci(p,S,q,ze){var Ft=q.length,cn=Ft,Mn=!ze;if(p==null)return!cn;for(p=Qn(p);Ft--;){var Vn=q[Ft];if(Mn&&Vn[2]?Vn[1]!==p[Vn[0]]:!(Vn[0]in p))return!1}for(;++Ft<cn;){Vn=q[Ft];var ir=Vn[0],jr=p[ir],Hr=Vn[1];if(Mn&&Vn[2]){if(jr===n&&!(ir in p))return!1}else{var Jr=new hu;if(ze)var Di=ze(jr,Hr,ir,p,S,Jr);if(!(Di===n?ci(Hr,jr,mt|nt,ze,Jr):Di))return!1}}return!0}function to(p){if(!cl(p)||PD(p))return!1;var S=Kp(p)?Lp:An;return S.test(fm(p))}function ka(p){return bl(p)&&ue(p)==Ds}function oo(p){return bl(p)&&dc(p)==di}function Ps(p){return bl(p)&&C_(p.length)&&!!Dr[ue(p)]}function Bo(p){return typeof p=="function"?p:p==null?gh:typeof p=="object"?js(p)?Pw(p[0],p[1]):Mw(p):Kx(p)}function ul(p){if(!Zv(p))return hv(p);var S=[];for(var q in Qn(p))ws.call(p,q)&&q!="constructor"&&S.push(q);return S}function cm(p){if(!cl(p))return LD(p);var S=Zv(p),q=[];for(var ze in p)ze=="constructor"&&(S||!ws.call(p,ze))||q.push(ze);return q}function xy(p,S){return p<S}function Tw(p,S){var q=-1,ze=dh(p)?En(p.length):[];return Nf(p,function(Ft,cn,Mn){ze[++q]=S(Ft,cn,Mn)}),ze}function Mw(p){var S=Ry(p);return S.length==1&&S[0][2]?ux(S[0][0],S[0][1]):function(q){return q===p||Ci(q,p,S)}}function Pw(p,S){return Fy(p)&&lx(S)?ux(ip(p),S):function(q){var ze=$y(q,p);return ze===n&&ze===S?Ky(q,p):ci(S,ze,mt|nt)}}function l_(p,S,q,ze,Ft){p!==S&&um(S,function(cn,Mn){if(Ft||(Ft=new hu),cl(cn))JC(p,S,Mn,q,l_,ze,Ft);else{var Vn=ze?ze(Uy(p,Mn),cn,Mn+"",p,S,Ft):n;Vn===n&&(Vn=cn),om(p,Mn,Vn)}},ph)}function JC(p,S,q,ze,Ft,cn,Mn){var Vn=Uy(p,q),ir=Uy(S,q),jr=Mn.get(ir);if(jr){om(p,q,jr);return}var Hr=cn?cn(Vn,ir,q+"",p,S,Mn):n,Jr=Hr===n;if(Jr){var Di=js(ir),Ki=!Di&&kg(ir),vs=!Di&&!Ki&&Fm(ir);Hr=ir,Di||Ki||vs?js(Vn)?Hr=Vn:Rl(Vn)?Hr=fh(Vn):Ki?(Jr=!1,Hr=Vw(ir,!0)):vs?(Jr=!1,Hr=Hw(ir,!0)):Hr=[]:Kv(ir)||dm(ir)?(Hr=Vn,dm(Vn)?Hr=zx(Vn):(!cl(Vn)||Kp(Vn))&&(Hr=ox(ir))):Jr=!1}Jr&&(Mn.set(ir,Hr),Ft(Hr,ir,ze,cn,Mn),Mn.delete(ir)),om(p,q,Hr)}function Ow(p,S){var q=p.length;if(q)return S+=S<0?q:0,$p(S,q)?p[S]:n}function kw(p,S,q){S.length?S=_i(S,function(cn){return js(cn)?function(Mn){return g(Mn,cn.length===1?cn[0]:cn)}:cn}):S=[gh];var ze=-1;S=_i(S,$r(ms()));var Ft=Tw(p,function(cn,Mn,Vn){var ir=_i(S,function(jr){return jr(cn)});return{criteria:ir,index:++ze,value:cn}});return _l(Ft,function(cn,Mn){return fD(cn,Mn,q)})}function eD(p,S){return Iw(p,S,function(q,ze){return Ky(p,ze)})}function Iw(p,S,q){for(var ze=-1,Ft=S.length,cn={};++ze<Ft;){var Mn=S[ze],Vn=g(p,Mn);q(Vn,Mn)&&Gv(cn,Pg(Mn,p),Vn)}return cn}function tD(p){return function(S){return g(S,p)}}function by(p,S,q,ze){var Ft=ze?ri:ps,cn=-1,Mn=S.length,Vn=p;for(p===S&&(S=fh(S)),q&&(Vn=_i(p,$r(q)));++cn<Mn;)for(var ir=0,jr=S[cn],Hr=q?q(jr):jr;(ir=Ft(Vn,Hr,ir,ze))>-1;)Vn!==p&&yg.call(Vn,ir,1),yg.call(p,ir,1);return p}function Lw(p,S){for(var q=p?S.length:0,ze=q-1;q--;){var Ft=S[q];if(q==ze||Ft!==cn){var cn=Ft;$p(Ft)?yg.call(p,Ft,1):Ay(p,Ft)}}return p}function Sy(p,S){return p+bg(Am()*(S-p+1))}function nD(p,S,q,ze){for(var Ft=-1,cn=ll(xg((S-p)/(q||1)),0),Mn=En(cn);cn--;)Mn[ze?cn:++Ft]=p,p+=q;return Mn}function Cy(p,S){var q="";if(!p||S<1||S>Pi)return q;do S%2&&(q+=p),S=bg(S/2),S&&(p+=p);while(S);return q}function na(p,S){return jy(cx(p,S,gh),p+"")}function rD(p){return Eg(zm(p))}function iD(p,S){var q=zm(p);return __(q,wd(S,0,q.length))}function Gv(p,S,q,ze){if(!cl(p))return p;S=Pg(S,p);for(var Ft=-1,cn=S.length,Mn=cn-1,Vn=p;Vn!=null&&++Ft<cn;){var ir=ip(S[Ft]),jr=q;if(ir==="__proto__"||ir==="constructor"||ir==="prototype")return p;if(Ft!=Mn){var Hr=Vn[ir];jr=ze?ze(Hr,ir,Vn):n,jr===n&&(jr=cl(Hr)?Hr:$p(S[Ft+1])?[]:{})}qh(Vn,ir,jr),Vn=Vn[ir]}return p}var Bw=Cg?function(p,S){return Cg.set(p,S),p}:gh,sD=wg?function(p,S){return wg(p,"toString",{configurable:!0,enumerable:!1,value:Xy(S),writable:!0})}:gh;function aD(p){return __(zm(p))}function Ff(p,S,q){var ze=-1,Ft=p.length;S<0&&(S=-S>Ft?0:Ft+S),q=q>Ft?Ft:q,q<0&&(q+=Ft),Ft=S>q?0:q-S>>>0,S>>>=0;for(var cn=En(Ft);++ze<Ft;)cn[ze]=p[ze+S];return cn}function oD(p,S){var q;return Nf(p,function(ze,Ft,cn){return q=S(ze,Ft,cn),!q}),!!q}function u_(p,S,q){var ze=0,Ft=p==null?ze:p.length;if(typeof S=="number"&&S===S&&Ft<=Ns){for(;ze<Ft;){var cn=ze+Ft>>>1,Mn=p[cn];Mn!==null&&!Jh(Mn)&&(q?Mn<=S:Mn<S)?ze=cn+1:Ft=cn}return Ft}return Dy(p,S,gh,q)}function Dy(p,S,q,ze){var Ft=0,cn=p==null?0:p.length;if(cn===0)return 0;S=q(S);for(var Mn=S!==S,Vn=S===null,ir=Jh(S),jr=S===n;Ft<cn;){var Hr=bg((Ft+cn)/2),Jr=q(p[Hr]),Di=Jr!==n,Ki=Jr===null,vs=Jr===Jr,Xs=Jh(Jr);if(Mn)var _s=ze||vs;else jr?_s=vs&&(ze||Di):Vn?_s=vs&&Di&&(ze||!Ki):ir?_s=vs&&Di&&!Ki&&(ze||!Xs):Ki||Xs?_s=!1:_s=ze?Jr<=S:Jr<S;_s?Ft=Hr+1:cn=Hr}return Kl(cn,Hs)}function Rw(p,S){for(var q=-1,ze=p.length,Ft=0,cn=[];++q<ze;){var Mn=p[q],Vn=S?S(Mn):Mn;if(!q||!xd(Vn,ir)){var ir=Vn;cn[Ft++]=Mn===0?0:Mn}}return cn}function Nw(p){return typeof p=="number"?p:Jh(p)?hs:+p}function Qh(p){if(typeof p=="string")return p;if(js(p))return _i(p,Qh)+"";if(Jh(p))return Em?Em.call(p):"";var S=p+"";return S=="0"&&1/p==-1/0?"-0":S}function Mg(p,S,q){var ze=-1,Ft=hr,cn=p.length,Mn=!0,Vn=[],ir=Vn;if(q)Mn=!1,Ft=Gr;else if(cn>=c){var jr=S?null:_D(p);if(jr)return ol(jr);Mn=!1,Ft=Si,ir=new yd}else ir=S?[]:Vn;e:for(;++ze<cn;){var Hr=p[ze],Jr=S?S(Hr):Hr;if(Hr=q||Hr!==0?Hr:0,Mn&&Jr===Jr){for(var Di=ir.length;Di--;)if(ir[Di]===Jr)continue e;S&&ir.push(Jr),Vn.push(Hr)}else Ft(ir,Jr,q)||(ir!==Vn&&ir.push(Jr),Vn.push(Hr))}return Vn}function Ay(p,S){return S=Pg(S,p),p=hx(p,S),p==null||delete p[ip(zf(S))]}function Fw(p,S,q,ze){return Gv(p,S,q(g(p,S)),ze)}function c_(p,S,q,ze){for(var Ft=p.length,cn=ze?Ft:-1;(ze?cn--:++cn<Ft)&&S(p[cn],cn,p););return q?Ff(p,ze?0:cn,ze?cn+1:Ft):Ff(p,ze?cn+1:0,ze?Ft:cn)}function zw(p,S){var q=p;return q instanceof qs&&(q=q.value()),us(S,function(ze,Ft){return Ft.func.apply(Ft.thisArg,ds([ze],Ft.args))},q)}function Ey(p,S,q){var ze=p.length;if(ze<2)return ze?Mg(p[0]):[];for(var Ft=-1,cn=En(ze);++Ft<ze;)for(var Mn=p[Ft],Vn=-1;++Vn<ze;)Vn!=Ft&&(cn[Ft]=Gp(cn[Ft]||Mn,p[Vn],S,q));return Mg(Bl(cn,1),S,q)}function Uw(p,S,q){for(var ze=-1,Ft=p.length,cn=S.length,Mn={};++ze<Ft;){var Vn=ze<cn?S[ze]:n;q(Mn,p[ze],Vn)}return Mn}function Ty(p){return Rl(p)?p:[]}function My(p){return typeof p=="function"?p:gh}function Pg(p,S){return js(p)?p:Fy(p,S)?[p]:gx(no(p))}var lD=na;function Og(p,S,q){var ze=p.length;return q=q===n?ze:q,!S&&q>=ze?p:Ff(p,S,q)}var jw=lv||function(p){return Nr.clearTimeout(p)};function Vw(p,S){if(S)return p.slice();var q=p.length,ze=Cm?Cm(q):new p.constructor(q);return p.copy(ze),ze}function Py(p){var S=new p.constructor(p.byteLength);return new vg(S).set(new vg(p)),S}function uD(p,S){var q=S?Py(p.buffer):p.buffer;return new p.constructor(q,p.byteOffset,p.byteLength)}function cD(p){var S=new p.constructor(p.source,Kn.exec(p));return S.lastIndex=p.lastIndex,S}function hD(p){return Up?Qn(Up.call(p)):{}}function Hw(p,S){var q=S?Py(p.buffer):p.buffer;return new p.constructor(q,p.byteOffset,p.length)}function Ww(p,S){if(p!==S){var q=p!==n,ze=p===null,Ft=p===p,cn=Jh(p),Mn=S!==n,Vn=S===null,ir=S===S,jr=Jh(S);if(!Vn&&!jr&&!cn&&p>S||cn&&Mn&&ir&&!Vn&&!jr||ze&&Mn&&ir||!q&&ir||!Ft)return 1;if(!ze&&!cn&&!jr&&p<S||jr&&q&&Ft&&!ze&&!cn||Vn&&q&&Ft||!Mn&&Ft||!ir)return-1}return 0}function fD(p,S,q){for(var ze=-1,Ft=p.criteria,cn=S.criteria,Mn=Ft.length,Vn=q.length;++ze<Mn;){var ir=Ww(Ft[ze],cn[ze]);if(ir){if(ze>=Vn)return ir;var jr=q[ze];return ir*(jr=="desc"?-1:1)}}return p.index-S.index}function Gw(p,S,q,ze){for(var Ft=-1,cn=p.length,Mn=q.length,Vn=-1,ir=S.length,jr=ll(cn-Mn,0),Hr=En(ir+jr),Jr=!ze;++Vn<ir;)Hr[Vn]=S[Vn];for(;++Ft<Mn;)(Jr||Ft<cn)&&(Hr[q[Ft]]=p[Ft]);for(;jr--;)Hr[Vn++]=p[Ft++];return Hr}function Yw(p,S,q,ze){for(var Ft=-1,cn=p.length,Mn=-1,Vn=q.length,ir=-1,jr=S.length,Hr=ll(cn-Vn,0),Jr=En(Hr+jr),Di=!ze;++Ft<Hr;)Jr[Ft]=p[Ft];for(var Ki=Ft;++ir<jr;)Jr[Ki+ir]=S[ir];for(;++Mn<Vn;)(Di||Ft<cn)&&(Jr[Ki+q[Mn]]=p[Ft++]);return Jr}function fh(p,S){var q=-1,ze=p.length;for(S||(S=En(ze));++q<ze;)S[q]=p[q];return S}function rp(p,S,q,ze){var Ft=!q;q||(q={});for(var cn=-1,Mn=S.length;++cn<Mn;){var Vn=S[cn],ir=ze?ze(q[Vn],p[Vn],Vn,q,p):n;ir===n&&(ir=p[Vn]),Ft?Xh(q,Vn,ir):qh(q,Vn,ir)}return q}function dD(p,S){return rp(p,Ny(p),S)}function pD(p,S){return rp(p,sx(p),S)}function h_(p,S){return function(q,ze){var Ft=js(q)?Pn:Uv,cn=S?S():{};return Ft(q,p,ms(ze,2),cn)}}function Bm(p){return na(function(S,q){var ze=-1,Ft=q.length,cn=Ft>1?q[Ft-1]:n,Mn=Ft>2?q[2]:n;for(cn=p.length>3&&typeof cn=="function"?(Ft--,cn):n,Mn&&Uc(q[0],q[1],Mn)&&(cn=Ft<3?n:cn,Ft=1),S=Qn(S);++ze<Ft;){var Vn=q[ze];Vn&&p(S,Vn,ze,cn)}return S})}function Zw(p,S){return function(q,ze){if(q==null)return q;if(!dh(q))return p(q,ze);for(var Ft=q.length,cn=S?Ft:-1,Mn=Qn(q);(S?cn--:++cn<Ft)&&ze(Mn[cn],cn,Mn)!==!1;);return q}}function $w(p){return function(S,q,ze){for(var Ft=-1,cn=Qn(S),Mn=ze(S),Vn=Mn.length;Vn--;){var ir=Mn[p?Vn:++Ft];if(q(cn[ir],ir,cn)===!1)break}return S}}function gD(p,S,q){var ze=S&tn,Ft=Yv(p);function cn(){var Mn=this&&this!==Nr&&this instanceof cn?Ft:p;return Mn.apply(ze?q:this,arguments)}return cn}function Kw(p){return function(S){S=no(S);var q=yl(S)?la(S):n,ze=q?q[0]:S.charAt(0),Ft=q?Og(q,1).join(""):S.slice(1);return ze[p]()+Ft}}function Rm(p){return function(S){return us(Zx(Yx(S).replace(x,"")),p,"")}}function Yv(p){return function(){var S=arguments;switch(S.length){case 0:return new p;case 1:return new p(S[0]);case 2:return new p(S[0],S[1]);case 3:return new p(S[0],S[1],S[2]);case 4:return new p(S[0],S[1],S[2],S[3]);case 5:return new p(S[0],S[1],S[2],S[3],S[4]);case 6:return new p(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new p(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var q=np(p.prototype),ze=p.apply(q,S);return cl(ze)?ze:q}}function mD(p,S,q){var ze=Yv(p);function Ft(){for(var cn=arguments.length,Mn=En(cn),Vn=cn,ir=Nm(Ft);Vn--;)Mn[Vn]=arguments[Vn];var jr=cn<3&&Mn[0]!==ir&&Mn[cn-1]!==ir?[]:qa(Mn,ir);if(cn-=jr.length,cn<q)return ex(p,S,f_,Ft.placeholder,n,Mn,jr,n,n,q-cn);var Hr=this&&this!==Nr&&this instanceof Ft?ze:p;return It(Hr,this,Mn)}return Ft}function qw(p){return function(S,q,ze){var Ft=Qn(S);if(!dh(S)){var cn=ms(q,3);S=Eu(S),q=function(Vn){return cn(Ft[Vn],Vn,Ft)}}var Mn=p(S,q,ze);return Mn>-1?Ft[cn?S[Mn]:Mn]:n}}function Xw(p){return Zp(function(S){var q=S.length,ze=q,Ft=hc.prototype.thru;for(p&&S.reverse();ze--;){var cn=S[ze];if(typeof cn!="function")throw new Yr(m);if(Ft&&!Mn&&m_(cn)=="wrapper")var Mn=new hc([],!0)}for(ze=Mn?ze:q;++ze<q;){cn=S[ze];var Vn=m_(cn),ir=Vn=="wrapper"?By(cn):n;ir&&zy(ir[0])&&ir[1]==(_e|At|Cn|Sr)&&!ir[4].length&&ir[9]==1?Mn=Mn[m_(ir[0])].apply(Mn,ir[3]):Mn=cn.length==1&&zy(cn)?Mn[Vn]():Mn.thru(cn)}return function(){var jr=arguments,Hr=jr[0];if(Mn&&jr.length==1&&js(Hr))return Mn.plant(Hr).value();for(var Jr=0,Di=q?S[Jr].apply(this,jr):Hr;++Jr<q;)Di=S[Jr].call(this,Di);return Di}})}function f_(p,S,q,ze,Ft,cn,Mn,Vn,ir,jr){var Hr=S&_e,Jr=S&tn,Di=S&Ie,Ki=S&(At|an),vs=S&On,Xs=Di?n:Yv(p);function _s(){for(var ua=arguments.length,ba=En(ua),ef=ua;ef--;)ba[ef]=arguments[ef];if(Ki)var jc=Nm(_s),tf=qr(ba,jc);if(ze&&(ba=Gw(ba,ze,Ft,Ki)),cn&&(ba=Yw(ba,cn,Mn,Ki)),ua-=tf,Ki&&ua<jr){var Nl=qa(ba,jc);return ex(p,S,f_,_s.placeholder,q,ba,Nl,Vn,ir,jr-ua)}var bd=Jr?q:this,Xp=Di?bd[p]:p;return ua=ba.length,Vn?ba=RD(ba,Vn):vs&&ua>1&&ba.reverse(),Hr&&ir<ua&&(ba.length=ir),this&&this!==Nr&&this instanceof _s&&(Xp=Xs||Yv(Xp)),Xp.apply(bd,ba)}return _s}function Qw(p,S){return function(q,ze){return Ln(q,p,S(ze),{})}}function d_(p,S){return function(q,ze){var Ft;if(q===n&&ze===n)return S;if(q!==n&&(Ft=q),ze!==n){if(Ft===n)return ze;typeof q=="string"||typeof ze=="string"?(q=Qh(q),ze=Qh(ze)):(q=Nw(q),ze=Nw(ze)),Ft=p(q,ze)}return Ft}}function Oy(p){return Zp(function(S){return S=_i(S,$r(ms())),na(function(q){var ze=this;return p(S,function(Ft){return It(Ft,ze,q)})})})}function p_(p,S){S=S===n?" ":Qh(S);var q=S.length;if(q<2)return q?Cy(S,p):S;var ze=Cy(S,xg(p/Gs(S)));return yl(S)?Og(la(ze),0,p).join(""):ze.slice(0,p)}function vD(p,S,q,ze){var Ft=S&tn,cn=Yv(p);function Mn(){for(var Vn=-1,ir=arguments.length,jr=-1,Hr=ze.length,Jr=En(Hr+ir),Di=this&&this!==Nr&&this instanceof Mn?cn:p;++jr<Hr;)Jr[jr]=ze[jr];for(;ir--;)Jr[jr++]=arguments[++Vn];return It(Di,Ft?q:this,Jr)}return Mn}function Jw(p){return function(S,q,ze){return ze&&typeof ze!="number"&&Uc(S,q,ze)&&(q=ze=n),S=qp(S),q===n?(q=S,S=0):q=qp(q),ze=ze===n?S<q?1:-1:qp(ze),nD(S,q,ze,p)}}function g_(p){return function(S,q){return typeof S=="string"&&typeof q=="string"||(S=Uf(S),q=Uf(q)),p(S,q)}}function ex(p,S,q,ze,Ft,cn,Mn,Vn,ir,jr){var Hr=S&At,Jr=Hr?Mn:n,Di=Hr?n:Mn,Ki=Hr?cn:n,vs=Hr?n:cn;S|=Hr?Cn:He,S&=~(Hr?He:Cn),S&Kt||(S&=-4);var Xs=[p,S,Ft,Ki,Jr,vs,Di,Vn,ir,jr],_s=q.apply(n,Xs);return zy(p)&&fx(_s,Xs),_s.placeholder=ze,dx(_s,p,S)}function ky(p){var S=dn[p];return function(q,ze){if(q=Uf(q),ze=ze==null?0:Kl($s(ze),292),ze&&Sg(q)){var Ft=(no(q)+"e").split("e"),cn=S(Ft[0]+"e"+(+Ft[1]+ze));return Ft=(no(cn)+"e").split("e"),+(Ft[0]+"e"+(+Ft[1]-ze))}return S(q)}}var _D=Bf&&1/ol(new Bf([,-0]))[1]==si?function(p){return new Bf(p)}:e0;function tx(p){return function(S){var q=dc(S);return q==Fa?wl(S):q==di?Us(S):gs(S,p(S))}}function Yp(p,S,q,ze,Ft,cn,Mn,Vn){var ir=S&Ie;if(!ir&&typeof p!="function")throw new Yr(m);var jr=ze?ze.length:0;if(jr||(S&=-97,ze=Ft=n),Mn=Mn===n?Mn:ll($s(Mn),0),Vn=Vn===n?Vn:$s(Vn),jr-=Ft?Ft.length:0,S&He){var Hr=ze,Jr=Ft;ze=Ft=n}var Di=ir?n:By(p),Ki=[p,S,q,ze,Ft,Hr,Jr,cn,Mn,Vn];if(Di&&ID(Ki,Di),p=Ki[0],S=Ki[1],q=Ki[2],ze=Ki[3],Ft=Ki[4],Vn=Ki[9]=Ki[9]===n?ir?0:p.length:ll(Ki[9]-jr,0),!Vn&&S&(At|an)&&(S&=-25),!S||S==tn)var vs=gD(p,S,q);else S==At||S==an?vs=mD(p,S,Vn):(S==Cn||S==(tn|Cn))&&!Ft.length?vs=vD(p,S,q,ze):vs=f_.apply(n,Ki);var Xs=Di?Bw:fx;return dx(Xs(vs,Ki),p,S)}function nx(p,S,q,ze){return p===n||xd(p,Xa[q])&&!ws.call(ze,q)?S:p}function rx(p,S,q,ze,Ft,cn){return cl(p)&&cl(S)&&(cn.set(S,p),l_(p,S,n,rx,cn),cn.delete(S)),p}function yD(p){return Kv(p)?n:p}function ix(p,S,q,ze,Ft,cn){var Mn=q&mt,Vn=p.length,ir=S.length;if(Vn!=ir&&!(Mn&&ir>Vn))return!1;var jr=cn.get(p),Hr=cn.get(S);if(jr&&Hr)return jr==S&&Hr==p;var Jr=-1,Di=!0,Ki=q&nt?new yd:n;for(cn.set(p,S),cn.set(S,p);++Jr<Vn;){var vs=p[Jr],Xs=S[Jr];if(ze)var _s=Mn?ze(Xs,vs,Jr,S,p,cn):ze(vs,Xs,Jr,p,S,cn);if(_s!==n){if(_s)continue;Di=!1;break}if(Ki){if(!Ka(S,function(ua,ba){if(!Si(Ki,ba)&&(vs===ua||Ft(vs,ua,q,ze,cn)))return Ki.push(ba)})){Di=!1;break}}else if(!(vs===Xs||Ft(vs,Xs,q,ze,cn))){Di=!1;break}}return cn.delete(p),cn.delete(S),Di}function wD(p,S,q,ze,Ft,cn,Mn){switch(q){case o:if(p.byteLength!=S.byteLength||p.byteOffset!=S.byteOffset)return!1;p=p.buffer,S=S.buffer;case i:return!(p.byteLength!=S.byteLength||!cn(new vg(p),new vg(S)));case qo:case Ti:case Uo:return xd(+p,+S);case zi:return p.name==S.name&&p.message==S.message;case Ds:case Ai:return p==S+"";case Fa:var Vn=wl;case di:var ir=ze&mt;if(Vn||(Vn=ol),p.size!=S.size&&!ir)return!1;var jr=Mn.get(p);if(jr)return jr==S;ze|=nt,Mn.set(p,S);var Hr=ix(Vn(p),Vn(S),ze,Ft,cn,Mn);return Mn.delete(p),Hr;case ui:if(Up)return Up.call(p)==Up.call(S)}return!1}function xD(p,S,q,ze,Ft,cn){var Mn=q&mt,Vn=Iy(p),ir=Vn.length,jr=Iy(S),Hr=jr.length;if(ir!=Hr&&!Mn)return!1;for(var Jr=ir;Jr--;){var Di=Vn[Jr];if(!(Mn?Di in S:ws.call(S,Di)))return!1}var Ki=cn.get(p),vs=cn.get(S);if(Ki&&vs)return Ki==S&&vs==p;var Xs=!0;cn.set(p,S),cn.set(S,p);for(var _s=Mn;++Jr<ir;){Di=Vn[Jr];var ua=p[Di],ba=S[Di];if(ze)var ef=Mn?ze(ba,ua,Di,S,p,cn):ze(ua,ba,Di,p,S,cn);if(!(ef===n?ua===ba||Ft(ua,ba,q,ze,cn):ef)){Xs=!1;break}_s||(_s=Di=="constructor")}if(Xs&&!_s){var jc=p.constructor,tf=S.constructor;jc!=tf&&"constructor"in p&&"constructor"in S&&!(typeof jc=="function"&&jc instanceof jc&&typeof tf=="function"&&tf instanceof tf)&&(Xs=!1)}return cn.delete(p),cn.delete(S),Xs}function Zp(p){return jy(cx(p,n,yx),p+"")}function Iy(p){return O(p,Eu,Ny)}function Ly(p){return O(p,ph,sx)}var By=Cg?function(p){return Cg.get(p)}:e0;function m_(p){for(var S=p.name+"",q=tp[S],ze=ws.call(tp,S)?q.length:0;ze--;){var Ft=q[ze],cn=Ft.func;if(cn==null||cn==p)return Ft.name}return S}function Nm(p){var S=ws.call(on,"placeholder")?on:p;return S.placeholder}function ms(){var p=on.iteratee||Qy;return p=p===Qy?Bo:p,arguments.length?p(arguments[0],arguments[1]):p}function v_(p,S){var q=p.__data__;return MD(S)?q[typeof S=="string"?"string":"hash"]:q.map}function Ry(p){for(var S=Eu(p),q=S.length;q--;){var ze=S[q],Ft=p[ze];S[q]=[ze,Ft,lx(Ft)]}return S}function hm(p,S){var q=lc(p,S);return to(q)?q:n}function bD(p){var S=ws.call(p,$h),q=p[$h];try{p[$h]=n;var ze=!0}catch{}var Ft=gg.call(p);return ze&&(S?p[$h]=q:delete p[$h]),Ft}var Ny=rm?function(p){return p==null?[]:(p=Qn(p),kr(rm(p),function(S){return Ua.call(p,S)}))}:t0,sx=rm?function(p){for(var S=[];p;)ds(S,Ny(p)),p=_g(p);return S}:t0,dc=ue;(sm&&dc(new sm(new ArrayBuffer(1)))!=o||Rp&&dc(new Rp)!=Fa||Np&&dc(Np.resolve())!=ea||Bf&&dc(new Bf)!=di||Fp&&dc(new Fp)!=ar)&&(dc=function(p){var S=ue(p),q=S==pa?p.constructor:n,ze=q?fm(q):"";if(ze)switch(ze){case pv:return o;case gv:return Fa;case mv:return ea;case vv:return di;case _v:return ar}return S});function SD(p,S,q){for(var ze=-1,Ft=q.length;++ze<Ft;){var cn=q[ze],Mn=cn.size;switch(cn.type){case"drop":p+=Mn;break;case"dropRight":S-=Mn;break;case"take":S=Kl(S,p+Mn);break;case"takeRight":p=ll(p,S-Mn);break}}return{start:p,end:S}}function CD(p){var S=p.match(Et);return S?S[1].split(Yt):[]}function ax(p,S,q){S=Pg(S,p);for(var ze=-1,Ft=S.length,cn=!1;++ze<Ft;){var Mn=ip(S[ze]);if(!(cn=p!=null&&q(p,Mn)))break;p=p[Mn]}return cn||++ze!=Ft?cn:(Ft=p==null?0:p.length,!!Ft&&C_(Ft)&&$p(Mn,Ft)&&(js(p)||dm(p)))}function DD(p){var S=p.length,q=new p.constructor(S);return S&&typeof p[0]=="string"&&ws.call(p,"index")&&(q.index=p.index,q.input=p.input),q}function ox(p){return typeof p.constructor=="function"&&!Zv(p)?np(_g(p)):{}}function AD(p,S,q){var ze=p.constructor;switch(S){case i:return Py(p);case qo:case Ti:return new ze(+p);case o:return uD(p,q);case h:case d:case v:case D:case A:case T:case P:case F:case V:return Hw(p,q);case Fa:return new ze;case Uo:case Ai:return new ze(p);case Ds:return cD(p);case di:return new ze;case ui:return hD(p)}}function ED(p,S){var q=S.length;if(!q)return p;var ze=q-1;return S[ze]=(q>1?"& ":"")+S[ze],S=S.join(q>2?", ":" "),p.replace(yt,`{
/* [wrapped with `+S+`] */
`)}function TD(p){return js(p)||dm(p)||!!(Dm&&p&&p[Dm])}function $p(p,S){var q=typeof p;return S=S??Pi,!!S&&(q=="number"||q!="symbol"&&cr.test(p))&&p>-1&&p%1==0&&p<S}function Uc(p,S,q){if(!cl(q))return!1;var ze=typeof S;return(ze=="number"?dh(q)&&$p(S,q.length):ze=="string"&&S in q)?xd(q[S],p):!1}function Fy(p,S){if(js(p))return!1;var q=typeof p;return q=="number"||q=="symbol"||q=="boolean"||p==null||Jh(p)?!0:oe.test(p)||!pe.test(p)||S!=null&&p in Qn(S)}function MD(p){var S=typeof p;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?p!=="__proto__":p===null}function zy(p){var S=m_(p),q=on[S];if(typeof q!="function"||!(S in qs.prototype))return!1;if(p===q)return!0;var ze=By(q);return!!ze&&p===ze[0]}function PD(p){return!!Sm&&Sm in p}var OD=ao?Kp:n0;function Zv(p){var S=p&&p.constructor,q=typeof S=="function"&&S.prototype||Xa;return p===q}function lx(p){return p===p&&!cl(p)}function ux(p,S){return function(q){return q==null?!1:q[p]===S&&(S!==n||p in Qn(q))}}function kD(p){var S=b_(p,function(ze){return q.size===W&&q.clear(),ze}),q=S.cache;return S}function ID(p,S){var q=p[1],ze=S[1],Ft=q|ze,cn=Ft<(tn|Ie|_e),Mn=ze==_e&&q==At||ze==_e&&q==Sr&&p[7].length<=S[8]||ze==(_e|Sr)&&S[7].length<=S[8]&&q==At;if(!(cn||Mn))return p;ze&tn&&(p[2]=S[2],Ft|=q&tn?0:Kt);var Vn=S[3];if(Vn){var ir=p[3];p[3]=ir?Gw(ir,Vn,S[4]):Vn,p[4]=ir?qa(p[3],ve):S[4]}return Vn=S[5],Vn&&(ir=p[5],p[5]=ir?Yw(ir,Vn,S[6]):Vn,p[6]=ir?qa(p[5],ve):S[6]),Vn=S[7],Vn&&(p[7]=Vn),ze&_e&&(p[8]=p[8]==null?S[8]:Kl(p[8],S[8])),p[9]==null&&(p[9]=S[9]),p[0]=S[0],p[1]=Ft,p}function LD(p){var S=[];if(p!=null)for(var q in Qn(p))S.push(q);return S}function BD(p){return gg.call(p)}function cx(p,S,q){return S=ll(S===n?p.length-1:S,0),function(){for(var ze=arguments,Ft=-1,cn=ll(ze.length-S,0),Mn=En(cn);++Ft<cn;)Mn[Ft]=ze[S+Ft];Ft=-1;for(var Vn=En(S+1);++Ft<S;)Vn[Ft]=ze[Ft];return Vn[S]=q(Mn),It(p,this,Vn)}}function hx(p,S){return S.length<2?p:g(p,Ff(S,0,-1))}function RD(p,S){for(var q=p.length,ze=Kl(S.length,q),Ft=fh(p);ze--;){var cn=S[ze];p[ze]=$p(cn,q)?Ft[cn]:n}return p}function Uy(p,S){if(!(S==="constructor"&&typeof p[S]=="function")&&S!="__proto__")return p[S]}var fx=px(Bw),$v=nm||function(p,S){return Nr.setTimeout(p,S)},jy=px(sD);function dx(p,S,q){var ze=S+"";return jy(p,ED(ze,ND(CD(ze),q)))}function px(p){var S=0,q=0;return function(){var ze=Fc(),Ft=oi-(ze-q);if(q=ze,Ft>0){if(++S>=ei)return arguments[0]}else S=0;return p.apply(n,arguments)}}function __(p,S){var q=-1,ze=p.length,Ft=ze-1;for(S=S===n?ze:S;++q<S;){var cn=Sy(q,Ft),Mn=p[cn];p[cn]=p[q],p[q]=Mn}return p.length=S,p}var gx=kD(function(p){var S=[];return p.charCodeAt(0)===46&&S.push(""),p.replace(Ee,function(q,ze,Ft,cn){S.push(Ft?cn.replace(In,"$1"):ze||q)}),S});function ip(p){if(typeof p=="string"||Jh(p))return p;var S=p+"";return S=="0"&&1/p==-1/0?"-0":S}function fm(p){if(p!=null){try{return cu.call(p)}catch{}try{return p+""}catch{}}return""}function ND(p,S){return xn(da,function(q){var ze="_."+q[0];S&q[1]&&!hr(p,ze)&&p.push(ze)}),p.sort()}function mx(p){if(p instanceof qs)return p.clone();var S=new hc(p.__wrapped__,p.__chain__);return S.__actions__=fh(p.__actions__),S.__index__=p.__index__,S.__values__=p.__values__,S}function FD(p,S,q){(q?Uc(p,S,q):S===n)?S=1:S=ll($s(S),0);var ze=p==null?0:p.length;if(!ze||S<1)return[];for(var Ft=0,cn=0,Mn=En(xg(ze/S));Ft<ze;)Mn[cn++]=Ff(p,Ft,Ft+=S);return Mn}function zD(p){for(var S=-1,q=p==null?0:p.length,ze=0,Ft=[];++S<q;){var cn=p[S];cn&&(Ft[ze++]=cn)}return Ft}function UD(){var p=arguments.length;if(!p)return[];for(var S=En(p-1),q=arguments[0],ze=p;ze--;)S[ze-1]=arguments[ze];return ds(js(q)?fh(q):[q],Bl(S,1))}var jD=na(function(p,S){return Rl(p)?Gp(p,Bl(S,1,Rl,!0)):[]}),VD=na(function(p,S){var q=zf(S);return Rl(q)&&(q=n),Rl(p)?Gp(p,Bl(S,1,Rl,!0),ms(q,2)):[]}),HD=na(function(p,S){var q=zf(S);return Rl(q)&&(q=n),Rl(p)?Gp(p,Bl(S,1,Rl,!0),n,q):[]});function WD(p,S,q){var ze=p==null?0:p.length;return ze?(S=q||S===n?1:$s(S),Ff(p,S<0?0:S,ze)):[]}function GD(p,S,q){var ze=p==null?0:p.length;return ze?(S=q||S===n?1:$s(S),S=ze-S,Ff(p,0,S<0?0:S)):[]}function YD(p,S){return p&&p.length?c_(p,ms(S,3),!0,!0):[]}function ZD(p,S){return p&&p.length?c_(p,ms(S,3),!0):[]}function $D(p,S,q,ze){var Ft=p==null?0:p.length;return Ft?(q&&typeof q!="number"&&Uc(p,S,q)&&(q=0,ze=Ft),Wv(p,S,q,ze)):[]}function vx(p,S,q){var ze=p==null?0:p.length;if(!ze)return-1;var Ft=q==null?0:$s(q);return Ft<0&&(Ft=ll(ze+Ft,0)),Ms(p,ms(S,3),Ft)}function _x(p,S,q){var ze=p==null?0:p.length;if(!ze)return-1;var Ft=ze-1;return q!==n&&(Ft=$s(q),Ft=q<0?ll(ze+Ft,0):Kl(Ft,ze-1)),Ms(p,ms(S,3),Ft,!0)}function yx(p){var S=p==null?0:p.length;return S?Bl(p,1):[]}function KD(p){var S=p==null?0:p.length;return S?Bl(p,si):[]}function qD(p,S){var q=p==null?0:p.length;return q?(S=S===n?1:$s(S),Bl(p,S)):[]}function XD(p){for(var S=-1,q=p==null?0:p.length,ze={};++S<q;){var Ft=p[S];ze[Ft[0]]=Ft[1]}return ze}function wx(p){return p&&p.length?p[0]:n}function QD(p,S,q){var ze=p==null?0:p.length;if(!ze)return-1;var Ft=q==null?0:$s(q);return Ft<0&&(Ft=ll(ze+Ft,0)),ps(p,S,Ft)}function JD(p){var S=p==null?0:p.length;return S?Ff(p,0,-1):[]}var eA=na(function(p){var S=_i(p,Ty);return S.length&&S[0]===p[0]?kn(S):[]}),tA=na(function(p){var S=zf(p),q=_i(p,Ty);return S===zf(q)?S=n:q.pop(),q.length&&q[0]===p[0]?kn(q,ms(S,2)):[]}),nA=na(function(p){var S=zf(p),q=_i(p,Ty);return S=typeof S=="function"?S:n,S&&q.pop(),q.length&&q[0]===p[0]?kn(q,n,S):[]});function rA(p,S){return p==null?"":cv.call(p,S)}function zf(p){var S=p==null?0:p.length;return S?p[S-1]:n}function iA(p,S,q){var ze=p==null?0:p.length;if(!ze)return-1;var Ft=ze;return q!==n&&(Ft=$s(q),Ft=Ft<0?ll(ze+Ft,0):Kl(Ft,ze-1)),S===S?Zl(p,S,Ft):Ms(p,Yl,Ft,!0)}function sA(p,S){return p&&p.length?Ow(p,$s(S)):n}var aA=na(xx);function xx(p,S){return p&&p.length&&S&&S.length?by(p,S):p}function oA(p,S,q){return p&&p.length&&S&&S.length?by(p,S,ms(q,2)):p}function lA(p,S,q){return p&&p.length&&S&&S.length?by(p,S,n,q):p}var uA=Zp(function(p,S){var q=p==null?0:p.length,ze=lm(p,S);return Lw(p,_i(S,function(Ft){return $p(Ft,q)?+Ft:Ft}).sort(Ww)),ze});function cA(p,S){var q=[];if(!(p&&p.length))return q;var ze=-1,Ft=[],cn=p.length;for(S=ms(S,3);++ze<cn;){var Mn=p[ze];S(Mn,ze,p)&&(q.push(Mn),Ft.push(ze))}return Lw(p,Ft),q}function Vy(p){return p==null?p:dv.call(p)}function hA(p,S,q){var ze=p==null?0:p.length;return ze?(q&&typeof q!="number"&&Uc(p,S,q)?(S=0,q=ze):(S=S==null?0:$s(S),q=q===n?ze:$s(q)),Ff(p,S,q)):[]}function fA(p,S){return u_(p,S)}function dA(p,S,q){return Dy(p,S,ms(q,2))}function pA(p,S){var q=p==null?0:p.length;if(q){var ze=u_(p,S);if(ze<q&&xd(p[ze],S))return ze}return-1}function gA(p,S){return u_(p,S,!0)}function mA(p,S,q){return Dy(p,S,ms(q,2),!0)}function vA(p,S){var q=p==null?0:p.length;if(q){var ze=u_(p,S,!0)-1;if(xd(p[ze],S))return ze}return-1}function _A(p){return p&&p.length?Rw(p):[]}function yA(p,S){return p&&p.length?Rw(p,ms(S,2)):[]}function wA(p){var S=p==null?0:p.length;return S?Ff(p,1,S):[]}function xA(p,S,q){return p&&p.length?(S=q||S===n?1:$s(S),Ff(p,0,S<0?0:S)):[]}function bA(p,S,q){var ze=p==null?0:p.length;return ze?(S=q||S===n?1:$s(S),S=ze-S,Ff(p,S<0?0:S,ze)):[]}function SA(p,S){return p&&p.length?c_(p,ms(S,3),!1,!0):[]}function CA(p,S){return p&&p.length?c_(p,ms(S,3)):[]}var DA=na(function(p){return Mg(Bl(p,1,Rl,!0))}),AA=na(function(p){var S=zf(p);return Rl(S)&&(S=n),Mg(Bl(p,1,Rl,!0),ms(S,2))}),EA=na(function(p){var S=zf(p);return S=typeof S=="function"?S:n,Mg(Bl(p,1,Rl,!0),n,S)});function TA(p){return p&&p.length?Mg(p):[]}function MA(p,S){return p&&p.length?Mg(p,ms(S,2)):[]}function PA(p,S){return S=typeof S=="function"?S:n,p&&p.length?Mg(p,n,S):[]}function Hy(p){if(!(p&&p.length))return[];var S=0;return p=kr(p,function(q){if(Rl(q))return S=ll(q.length,S),!0}),Gu(S,function(q){return _i(p,qi(q))})}function bx(p,S){if(!(p&&p.length))return[];var q=Hy(p);return S==null?q:_i(q,function(ze){return It(S,n,ze)})}var OA=na(function(p,S){return Rl(p)?Gp(p,S):[]}),kA=na(function(p){return Ey(kr(p,Rl))}),IA=na(function(p){var S=zf(p);return Rl(S)&&(S=n),Ey(kr(p,Rl),ms(S,2))}),LA=na(function(p){var S=zf(p);return S=typeof S=="function"?S:n,Ey(kr(p,Rl),n,S)}),BA=na(Hy);function RA(p,S){return Uw(p||[],S||[],qh)}function NA(p,S){return Uw(p||[],S||[],Gv)}var FA=na(function(p){var S=p.length,q=S>1?p[S-1]:n;return q=typeof q=="function"?(p.pop(),q):n,bx(p,q)});function Sx(p){var S=on(p);return S.__chain__=!0,S}function zA(p,S){return S(p),p}function y_(p,S){return S(p)}var UA=Zp(function(p){var S=p.length,q=S?p[0]:0,ze=this.__wrapped__,Ft=function(cn){return lm(cn,p)};return S>1||this.__actions__.length||!(ze instanceof qs)||!$p(q)?this.thru(Ft):(ze=ze.slice(q,+q+(S?1:0)),ze.__actions__.push({func:y_,args:[Ft],thisArg:n}),new hc(ze,this.__chain__).thru(function(cn){return S&&!cn.length&&cn.push(n),cn}))});function jA(){return Sx(this)}function VA(){return new hc(this.value(),this.__chain__)}function HA(){this.__values__===n&&(this.__values__=Nx(this.value()));var p=this.__index__>=this.__values__.length,S=p?n:this.__values__[this.__index__++];return{done:p,value:S}}function WA(){return this}function GA(p){for(var S,q=this;q instanceof Ag;){var ze=mx(q);ze.__index__=0,ze.__values__=n,S?Ft.__wrapped__=ze:S=ze;var Ft=ze;q=q.__wrapped__}return Ft.__wrapped__=p,S}function YA(){var p=this.__wrapped__;if(p instanceof qs){var S=p;return this.__actions__.length&&(S=new qs(this)),S=S.reverse(),S.__actions__.push({func:y_,args:[Vy],thisArg:n}),new hc(S,this.__chain__)}return this.thru(Vy)}function ZA(){return zw(this.__wrapped__,this.__actions__)}var $A=h_(function(p,S,q){ws.call(p,q)?++p[q]:Xh(p,q,1)});function KA(p,S,q){var ze=js(p)?Cr:Hv;return q&&Uc(p,S,q)&&(S=n),ze(p,ms(S,3))}function qA(p,S){var q=js(p)?kr:Im;return q(p,ms(S,3))}var XA=qw(vx),QA=qw(_x);function JA(p,S){return Bl(w_(p,S),1)}function eE(p,S){return Bl(w_(p,S),si)}function tE(p,S,q){return q=q===n?1:$s(q),Bl(w_(p,S),q)}function Cx(p,S){var q=js(p)?xn:Nf;return q(p,ms(S,3))}function Dx(p,S){var q=js(p)?Wn:km;return q(p,ms(S,3))}var nE=h_(function(p,S,q){ws.call(p,q)?p[q].push(S):Xh(p,q,[S])});function rE(p,S,q,ze){p=dh(p)?p:zm(p),q=q&&!ze?$s(q):0;var Ft=p.length;return q<0&&(q=ll(Ft+q,0)),D_(p)?q<=Ft&&p.indexOf(S,q)>-1:!!Ft&&ps(p,S,q)>-1}var iE=na(function(p,S,q){var ze=-1,Ft=typeof S=="function",cn=dh(p)?En(p.length):[];return Nf(p,function(Mn){cn[++ze]=Ft?It(S,Mn,q):zn(Mn,S,q)}),cn}),sE=h_(function(p,S,q){Xh(p,q,S)});function w_(p,S){var q=js(p)?_i:Tw;return q(p,ms(S,3))}function aE(p,S,q,ze){return p==null?[]:(js(S)||(S=S==null?[]:[S]),q=ze?n:q,js(q)||(q=q==null?[]:[q]),kw(p,S,q))}var oE=h_(function(p,S,q){p[q?0:1].push(S)},function(){return[[],[]]});function lE(p,S,q){var ze=js(p)?us:ii,Ft=arguments.length<3;return ze(p,ms(S,4),q,Ft,Nf)}function uE(p,S,q){var ze=js(p)?So:ii,Ft=arguments.length<3;return ze(p,ms(S,4),q,Ft,km)}function cE(p,S){var q=js(p)?kr:Im;return q(p,S_(ms(S,3)))}function hE(p){var S=js(p)?Eg:rD;return S(p)}function fE(p,S,q){(q?Uc(p,S,q):S===n)?S=1:S=$s(S);var ze=js(p)?Fv:iD;return ze(p,S)}function dE(p){var S=js(p)?zv:aD;return S(p)}function pE(p){if(p==null)return 0;if(dh(p))return D_(p)?Gs(p):p.length;var S=dc(p);return S==Fa||S==di?p.size:ul(p).length}function gE(p,S,q){var ze=js(p)?Ka:oD;return q&&Uc(p,S,q)&&(S=n),ze(p,ms(S,3))}var mE=na(function(p,S){if(p==null)return[];var q=S.length;return q>1&&Uc(p,S[0],S[1])?S=[]:q>2&&Uc(S[0],S[1],S[2])&&(S=[S[0]]),kw(p,Bl(S,1),[])}),x_=uv||function(){return Nr.Date.now()};function vE(p,S){if(typeof S!="function")throw new Yr(m);return p=$s(p),function(){if(--p<1)return S.apply(this,arguments)}}function Ax(p,S,q){return S=q?n:S,S=p&&S==null?p.length:S,Yp(p,_e,n,n,n,n,S)}function Ex(p,S){var q;if(typeof S!="function")throw new Yr(m);return p=$s(p),function(){return--p>0&&(q=S.apply(this,arguments)),p<=1&&(S=n),q}}var Wy=na(function(p,S,q){var ze=tn;if(q.length){var Ft=qa(q,Nm(Wy));ze|=Cn}return Yp(p,ze,S,q,Ft)}),Tx=na(function(p,S,q){var ze=tn|Ie;if(q.length){var Ft=qa(q,Nm(Tx));ze|=Cn}return Yp(S,ze,p,q,Ft)});function Mx(p,S,q){S=q?n:S;var ze=Yp(p,At,n,n,n,n,n,S);return ze.placeholder=Mx.placeholder,ze}function Px(p,S,q){S=q?n:S;var ze=Yp(p,an,n,n,n,n,n,S);return ze.placeholder=Px.placeholder,ze}function Ox(p,S,q){var ze,Ft,cn,Mn,Vn,ir,jr=0,Hr=!1,Jr=!1,Di=!0;if(typeof p!="function")throw new Yr(m);S=Uf(S)||0,cl(q)&&(Hr=!!q.leading,Jr="maxWait"in q,cn=Jr?ll(Uf(q.maxWait)||0,S):cn,Di="trailing"in q?!!q.trailing:Di);function Ki(Nl){var bd=ze,Xp=Ft;return ze=Ft=n,jr=Nl,Mn=p.apply(Xp,bd),Mn}function vs(Nl){return jr=Nl,Vn=$v(ua,S),Hr?Ki(Nl):Mn}function Xs(Nl){var bd=Nl-ir,Xp=Nl-jr,qx=S-bd;return Jr?Kl(qx,cn-Xp):qx}function _s(Nl){var bd=Nl-ir,Xp=Nl-jr;return ir===n||bd>=S||bd<0||Jr&&Xp>=cn}function ua(){var Nl=x_();if(_s(Nl))return ba(Nl);Vn=$v(ua,Xs(Nl))}function ba(Nl){return Vn=n,Di&&ze?Ki(Nl):(ze=Ft=n,Mn)}function ef(){Vn!==n&&jw(Vn),jr=0,ze=ir=Ft=Vn=n}function jc(){return Vn===n?Mn:ba(x_())}function tf(){var Nl=x_(),bd=_s(Nl);if(ze=arguments,Ft=this,ir=Nl,bd){if(Vn===n)return vs(ir);if(Jr)return jw(Vn),Vn=$v(ua,S),Ki(ir)}return Vn===n&&(Vn=$v(ua,S)),Mn}return tf.cancel=ef,tf.flush=jc,tf}var _E=na(function(p,S){return Om(p,1,S)}),yE=na(function(p,S,q){return Om(p,Uf(S)||0,q)});function wE(p){return Yp(p,On)}function b_(p,S){if(typeof p!="function"||S!=null&&typeof S!="function")throw new Yr(m);var q=function(){var ze=arguments,Ft=S?S.apply(this,ze):ze[0],cn=q.cache;if(cn.has(Ft))return cn.get(Ft);var Mn=p.apply(this,ze);return q.cache=cn.set(Ft,Mn)||cn,Mn};return q.cache=new(b_.Cache||Kh),q}b_.Cache=Kh;function S_(p){if(typeof p!="function")throw new Yr(m);return function(){var S=arguments;switch(S.length){case 0:return!p.call(this);case 1:return!p.call(this,S[0]);case 2:return!p.call(this,S[0],S[1]);case 3:return!p.call(this,S[0],S[1],S[2])}return!p.apply(this,S)}}function xE(p){return Ex(2,p)}var bE=lD(function(p,S){S=S.length==1&&js(S[0])?_i(S[0],$r(ms())):_i(Bl(S,1),$r(ms()));var q=S.length;return na(function(ze){for(var Ft=-1,cn=Kl(ze.length,q);++Ft<cn;)ze[Ft]=S[Ft].call(this,ze[Ft]);return It(p,this,ze)})}),Gy=na(function(p,S){var q=qa(S,Nm(Gy));return Yp(p,Cn,n,S,q)}),kx=na(function(p,S){var q=qa(S,Nm(kx));return Yp(p,He,n,S,q)}),SE=Zp(function(p,S){return Yp(p,Sr,n,n,n,S)});function CE(p,S){if(typeof p!="function")throw new Yr(m);return S=S===n?S:$s(S),na(p,S)}function DE(p,S){if(typeof p!="function")throw new Yr(m);return S=S==null?0:ll($s(S),0),na(function(q){var ze=q[S],Ft=Og(q,0,S);return ze&&ds(Ft,ze),It(p,this,Ft)})}function AE(p,S,q){var ze=!0,Ft=!0;if(typeof p!="function")throw new Yr(m);return cl(q)&&(ze="leading"in q?!!q.leading:ze,Ft="trailing"in q?!!q.trailing:Ft),Ox(p,S,{leading:ze,maxWait:S,trailing:Ft})}function EE(p){return Ax(p,1)}function TE(p,S){return Gy(My(S),p)}function ME(){if(!arguments.length)return[];var p=arguments[0];return js(p)?p:[p]}function PE(p){return fc(p,re)}function OE(p,S){return S=typeof S=="function"?S:n,fc(p,re,S)}function kE(p){return fc(p,Ae|re)}function IE(p,S){return S=typeof S=="function"?S:n,fc(p,Ae|re,S)}function LE(p,S){return S==null||Pm(p,S,Eu(S))}function xd(p,S){return p===S||p!==p&&S!==S}var BE=g_(Me),RE=g_(function(p,S){return p>=S}),dm=_r(function(){return arguments}())?_r:function(p){return bl(p)&&ws.call(p,"callee")&&!Ua.call(p,"callee")},js=En.isArray,NE=M?$r(M):Fr;function dh(p){return p!=null&&C_(p.length)&&!Kp(p)}function Rl(p){return bl(p)&&dh(p)}function FE(p){return p===!0||p===!1||bl(p)&&ue(p)==qo}var kg=im||n0,zE=Z?$r(Z):Xr;function UE(p){return bl(p)&&p.nodeType===1&&!Kv(p)}function jE(p){if(p==null)return!0;if(dh(p)&&(js(p)||typeof p=="string"||typeof p.splice=="function"||kg(p)||Fm(p)||dm(p)))return!p.length;var S=dc(p);if(S==Fa||S==di)return!p.size;if(Zv(p))return!ul(p).length;for(var q in p)if(ws.call(p,q))return!1;return!0}function VE(p,S){return ci(p,S)}function HE(p,S,q){q=typeof q=="function"?q:n;var ze=q?q(p,S):n;return ze===n?ci(p,S,n,q):!!ze}function Yy(p){if(!bl(p))return!1;var S=ue(p);return S==zi||S==Fi||typeof p.message=="string"&&typeof p.name=="string"&&!Kv(p)}function WE(p){return typeof p=="number"&&Sg(p)}function Kp(p){if(!cl(p))return!1;var S=ue(p);return S==wo||S==xo||S==io||S==fs}function Ix(p){return typeof p=="number"&&p==$s(p)}function C_(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=Pi}function cl(p){var S=typeof p;return p!=null&&(S=="object"||S=="function")}function bl(p){return p!=null&&typeof p=="object"}var Lx=xe?$r(xe):yi;function GE(p,S){return p===S||Ci(p,S,Ry(S))}function YE(p,S,q){return q=typeof q=="function"?q:n,Ci(p,S,Ry(S),q)}function ZE(p){return Bx(p)&&p!=+p}function $E(p){if(OD(p))throw new et(u);return to(p)}function KE(p){return p===null}function qE(p){return p==null}function Bx(p){return typeof p=="number"||bl(p)&&ue(p)==Uo}function Kv(p){if(!bl(p)||ue(p)!=pa)return!1;var S=_g(p);if(S===null)return!0;var q=ws.call(S,"constructor")&&S.constructor;return typeof q=="function"&&q instanceof q&&cu.call(q)==av}var Zy=Re?$r(Re):ka;function XE(p){return Ix(p)&&p>=-9007199254740991&&p<=Pi}var Rx=vt?$r(vt):oo;function D_(p){return typeof p=="string"||!js(p)&&bl(p)&&ue(p)==Ai}function Jh(p){return typeof p=="symbol"||bl(p)&&ue(p)==ui}var Fm=Ct?$r(Ct):Ps;function QE(p){return p===n}function JE(p){return bl(p)&&dc(p)==ar}function eT(p){return bl(p)&&ue(p)==t}var tT=g_(xy),nT=g_(function(p,S){return p<=S});function Nx(p){if(!p)return[];if(dh(p))return D_(p)?la(p):fh(p);if(Bp&&p[Bp])return Lo(p[Bp]());var S=dc(p),q=S==Fa?wl:S==di?ol:zm;return q(p)}function qp(p){if(!p)return p===0?p:0;if(p=Uf(p),p===si||p===-1/0){var S=p<0?-1:1;return S*ai}return p===p?p:0}function $s(p){var S=qp(p),q=S%1;return S===S?q?S-q:S:0}function Fx(p){return p?wd($s(p),0,fa):0}function Uf(p){if(typeof p=="number")return p;if(Jh(p))return hs;if(cl(p)){var S=typeof p.valueOf=="function"?p.valueOf():p;p=cl(S)?S+"":S}if(typeof p!="string")return p===0?p:+p;p=Da(p);var q=yn.test(p);return q||qn.test(p)?Xn(p.slice(2),q?2:8):ur.test(p)?hs:+p}function zx(p){return rp(p,ph(p))}function rT(p){return p?wd($s(p),-9007199254740991,Pi):p===0?p:0}function no(p){return p==null?"":Qh(p)}var iT=Bm(function(p,S){if(Zv(S)||dh(S)){rp(S,Eu(S),p);return}for(var q in S)ws.call(S,q)&&qh(p,q,S[q])}),Ux=Bm(function(p,S){rp(S,ph(S),p)}),A_=Bm(function(p,S,q,ze){rp(S,ph(S),p,ze)}),sT=Bm(function(p,S,q,ze){rp(S,Eu(S),p,ze)}),aT=Zp(lm);function oT(p,S){var q=np(p);return S==null?q:Mm(q,S)}var lT=na(function(p,S){p=Qn(p);var q=-1,ze=S.length,Ft=ze>2?S[2]:n;for(Ft&&Uc(S[0],S[1],Ft)&&(ze=1);++q<ze;)for(var cn=S[q],Mn=ph(cn),Vn=-1,ir=Mn.length;++Vn<ir;){var jr=Mn[Vn],Hr=p[jr];(Hr===n||xd(Hr,Xa[jr])&&!ws.call(p,jr))&&(p[jr]=cn[jr])}return p}),uT=na(function(p){return p.push(n,rx),It(jx,n,p)});function cT(p,S){return ko(p,ms(S,3),hh)}function hT(p,S){return ko(p,ms(S,3),r)}function fT(p,S){return p==null?p:um(p,ms(S,3),ph)}function dT(p,S){return p==null?p:Lm(p,ms(S,3),ph)}function pT(p,S){return p&&hh(p,ms(S,3))}function gT(p,S){return p&&r(p,ms(S,3))}function mT(p){return p==null?[]:a(p,Eu(p))}function vT(p){return p==null?[]:a(p,ph(p))}function $y(p,S,q){var ze=p==null?n:g(p,S);return ze===n?q:ze}function _T(p,S){return p!=null&&ax(p,S,dt)}function Ky(p,S){return p!=null&&ax(p,S,Bt)}var yT=Qw(function(p,S,q){S!=null&&typeof S.toString!="function"&&(S=gg.call(S)),p[S]=q},Xy(gh)),wT=Qw(function(p,S,q){S!=null&&typeof S.toString!="function"&&(S=gg.call(S)),ws.call(p,S)?p[S].push(q):p[S]=[q]},ms),xT=na(zn);function Eu(p){return dh(p)?Tm(p):ul(p)}function ph(p){return dh(p)?Tm(p,!0):cm(p)}function bT(p,S){var q={};return S=ms(S,3),hh(p,function(ze,Ft,cn){Xh(q,S(ze,Ft,cn),ze)}),q}function ST(p,S){var q={};return S=ms(S,3),hh(p,function(ze,Ft,cn){Xh(q,Ft,S(ze,Ft,cn))}),q}var CT=Bm(function(p,S,q){l_(p,S,q)}),jx=Bm(function(p,S,q,ze){l_(p,S,q,ze)}),DT=Zp(function(p,S){var q={};if(p==null)return q;var ze=!1;S=_i(S,function(cn){return cn=Pg(cn,p),ze||(ze=cn.length>1),cn}),rp(p,Ly(p),q),ze&&(q=fc(q,Ae|rt|re,yD));for(var Ft=S.length;Ft--;)Ay(q,S[Ft]);return q});function AT(p,S){return Vx(p,S_(ms(S)))}var ET=Zp(function(p,S){return p==null?{}:eD(p,S)});function Vx(p,S){if(p==null)return{};var q=_i(Ly(p),function(ze){return[ze]});return S=ms(S),Iw(p,q,function(ze,Ft){return S(ze,Ft[0])})}function TT(p,S,q){S=Pg(S,p);var ze=-1,Ft=S.length;for(Ft||(Ft=1,p=n);++ze<Ft;){var cn=p==null?n:p[ip(S[ze])];cn===n&&(ze=Ft,cn=q),p=Kp(cn)?cn.call(p):cn}return p}function MT(p,S,q){return p==null?p:Gv(p,S,q)}function PT(p,S,q,ze){return ze=typeof ze=="function"?ze:n,p==null?p:Gv(p,S,q,ze)}var Hx=tx(Eu),Wx=tx(ph);function OT(p,S,q){var ze=js(p),Ft=ze||kg(p)||Fm(p);if(S=ms(S,4),q==null){var cn=p&&p.constructor;Ft?q=ze?new cn:[]:cl(p)?q=Kp(cn)?np(_g(p)):{}:q={}}return(Ft?xn:hh)(p,function(Mn,Vn,ir){return S(q,Mn,Vn,ir)}),q}function kT(p,S){return p==null?!0:Ay(p,S)}function IT(p,S,q){return p==null?p:Fw(p,S,My(q))}function LT(p,S,q,ze){return ze=typeof ze=="function"?ze:n,p==null?p:Fw(p,S,My(q),ze)}function zm(p){return p==null?[]:Yu(p,Eu(p))}function BT(p){return p==null?[]:Yu(p,ph(p))}function RT(p,S,q){return q===n&&(q=S,S=n),q!==n&&(q=Uf(q),q=q===q?q:0),S!==n&&(S=Uf(S),S=S===S?S:0),wd(Uf(p),S,q)}function NT(p,S,q){return S=qp(S),q===n?(q=S,S=0):q=qp(q),p=Uf(p),nn(p,S,q)}function FT(p,S,q){if(q&&typeof q!="boolean"&&Uc(p,S,q)&&(S=q=n),q===n&&(typeof S=="boolean"?(q=S,S=n):typeof p=="boolean"&&(q=p,p=n)),p===n&&S===n?(p=0,S=1):(p=qp(p),S===n?(S=p,p=0):S=qp(S)),p>S){var ze=p;p=S,S=ze}if(q||p%1||S%1){var Ft=Am();return Kl(p+Ft*(S-p+xa("1e-"+((Ft+"").length-1))),S)}return Sy(p,S)}var zT=Rm(function(p,S,q){return S=S.toLowerCase(),p+(q?Gx(S):S)});function Gx(p){return qy(no(p).toLowerCase())}function Yx(p){return p=no(p),p&&p.replace(mr,Ei).replace(N,"")}function UT(p,S,q){p=no(p),S=Qh(S);var ze=p.length;q=q===n?ze:wd($s(q),0,ze);var Ft=q;return q-=S.length,q>=0&&p.slice(q,Ft)==S}function jT(p){return p=no(p),p&&X.test(p)?p.replace(ie,uu):p}function VT(p){return p=no(p),p&&Xe.test(p)?p.replace($e,"\\$&"):p}var HT=Rm(function(p,S,q){return p+(q?"-":"")+S.toLowerCase()}),WT=Rm(function(p,S,q){return p+(q?" ":"")+S.toLowerCase()}),GT=Kw("toLowerCase");function YT(p,S,q){p=no(p),S=$s(S);var ze=S?Gs(p):0;if(!S||ze>=S)return p;var Ft=(S-ze)/2;return p_(bg(Ft),q)+p+p_(xg(Ft),q)}function ZT(p,S,q){p=no(p),S=$s(S);var ze=S?Gs(p):0;return S&&ze<S?p+p_(S-ze,q):p}function $T(p,S,q){p=no(p),S=$s(S);var ze=S?Gs(p):0;return S&&ze<S?p_(S-ze,q)+p:p}function KT(p,S,q){return q||S==null?S=0:S&&(S=+S),fv(no(p).replace(ft,""),S||0)}function qT(p,S,q){return(q?Uc(p,S,q):S===n)?S=1:S=$s(S),Cy(no(p),S)}function XT(){var p=arguments,S=no(p[0]);return p.length<3?S:S.replace(p[1],p[2])}var QT=Rm(function(p,S,q){return p+(q?"_":"")+S.toLowerCase()});function JT(p,S,q){return q&&typeof q!="number"&&Uc(p,S,q)&&(S=q=n),q=q===n?fa:q>>>0,q?(p=no(p),p&&(typeof S=="string"||S!=null&&!Zy(S))&&(S=Qh(S),!S&&yl(p))?Og(la(p),0,q):p.split(S,q)):[]}var eM=Rm(function(p,S,q){return p+(q?" ":"")+qy(S)});function tM(p,S,q){return p=no(p),q=q==null?0:wd($s(q),0,p.length),S=Qh(S),p.slice(q,q+S.length)==S}function nM(p,S,q){var ze=on.templateSettings;q&&Uc(p,S,q)&&(S=n),p=no(p),S=A_({},S,ze,nx);var Ft=A_({},S.imports,ze.imports,nx),cn=Eu(Ft),Mn=Yu(Ft,cn),Vn,ir,jr=0,Hr=S.interpolate||Rr,Jr="__p += '",Di=br((S.escape||Rr).source+"|"+Hr.source+"|"+(Hr===te?Zn:Rr).source+"|"+(S.evaluate||Rr).source+"|$","g"),Ki="//# sourceURL="+(ws.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++dr+"]")+`
`;p.replace(Di,function(_s,ua,ba,ef,jc,tf){return ba||(ba=ef),Jr+=p.slice(jr,tf).replace(Lr,vd),ua&&(Vn=!0,Jr+=`' +
__e(`+ua+`) +
'`),jc&&(ir=!0,Jr+=`';
`+jc+`;
__p += '`),ba&&(Jr+=`' +
((__t = (`+ba+`)) == null ? '' : __t) +
'`),jr=tf+_s.length,_s}),Jr+=`';
`;var vs=ws.call(S,"variable")&&S.variable;if(!vs)Jr=`with (obj) {
`+Jr+`
}
`;else if(ln.test(vs))throw new et(b);Jr=(ir?Jr.replace(z,""):Jr).replace(R,"$1").replace(J,"$1;"),Jr="function("+(vs||"obj")+`) {
`+(vs?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Vn?", __e = _.escape":"")+(ir?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Jr+`return __p
}`;var Xs=$x(function(){return Nt(cn,Ki+"return "+Jr).apply(n,Mn)});if(Xs.source=Jr,Yy(Xs))throw Xs;return Xs}function rM(p){return no(p).toLowerCase()}function iM(p){return no(p).toUpperCase()}function sM(p,S,q){if(p=no(p),p&&(q||S===n))return Da(p);if(!p||!(S=Qh(S)))return p;var ze=la(p),Ft=la(S),cn=bs(ze,Ft),Mn=Pa(ze,Ft)+1;return Og(ze,cn,Mn).join("")}function aM(p,S,q){if(p=no(p),p&&(q||S===n))return p.slice(0,uc(p)+1);if(!p||!(S=Qh(S)))return p;var ze=la(p),Ft=Pa(ze,la(S))+1;return Og(ze,0,Ft).join("")}function oM(p,S,q){if(p=no(p),p&&(q||S===n))return p.replace(ft,"");if(!p||!(S=Qh(S)))return p;var ze=la(p),Ft=bs(ze,la(S));return Og(ze,Ft).join("")}function lM(p,S){var q=Kr,ze=Mi;if(cl(S)){var Ft="separator"in S?S.separator:Ft;q="length"in S?$s(S.length):q,ze="omission"in S?Qh(S.omission):ze}p=no(p);var cn=p.length;if(yl(p)){var Mn=la(p);cn=Mn.length}if(q>=cn)return p;var Vn=q-Gs(ze);if(Vn<1)return ze;var ir=Mn?Og(Mn,0,Vn).join(""):p.slice(0,Vn);if(Ft===n)return ir+ze;if(Mn&&(Vn+=ir.length-Vn),Zy(Ft)){if(p.slice(Vn).search(Ft)){var jr,Hr=ir;for(Ft.global||(Ft=br(Ft.source,no(Kn.exec(Ft))+"g")),Ft.lastIndex=0;jr=Ft.exec(Hr);)var Jr=jr.index;ir=ir.slice(0,Jr===n?Vn:Jr)}}else if(p.indexOf(Qh(Ft),Vn)!=Vn){var Di=ir.lastIndexOf(Ft);Di>-1&&(ir=ir.slice(0,Di))}return ir+ze}function uM(p){return p=no(p),p&&j.test(p)?p.replace(Y,Zh):p}var cM=Rm(function(p,S,q){return p+(q?" ":"")+S.toUpperCase()}),qy=Kw("toUpperCase");function Zx(p,S,q){return p=no(p),S=q?n:S,S===n?Oa(p)?jn(p):Li(p):p.match(S)||[]}var $x=na(function(p,S){try{return It(p,n,S)}catch(q){return Yy(q)?q:new et(q)}}),hM=Zp(function(p,S){return xn(S,function(q){q=ip(q),Xh(p,q,Wy(p[q],p))}),p});function fM(p){var S=p==null?0:p.length,q=ms();return p=S?_i(p,function(ze){if(typeof ze[1]!="function")throw new Yr(m);return[q(ze[0]),ze[1]]}):[],na(function(ze){for(var Ft=-1;++Ft<S;){var cn=p[Ft];if(It(cn[0],this,ze))return It(cn[1],this,ze)}})}function dM(p){return Vv(fc(p,Ae))}function Xy(p){return function(){return p}}function pM(p,S){return p==null||p!==p?S:p}var gM=Xw(),mM=Xw(!0);function gh(p){return p}function Qy(p){return Bo(typeof p=="function"?p:fc(p,Ae))}function vM(p){return Mw(fc(p,Ae))}function _M(p,S){return Pw(p,fc(S,Ae))}var yM=na(function(p,S){return function(q){return zn(q,p,S)}}),wM=na(function(p,S){return function(q){return zn(p,q,S)}});function Jy(p,S,q){var ze=Eu(S),Ft=a(S,ze);q==null&&!(cl(S)&&(Ft.length||!ze.length))&&(q=S,S=p,p=this,Ft=a(S,Eu(S)));var cn=!(cl(q)&&"chain"in q)||!!q.chain,Mn=Kp(p);return xn(Ft,function(Vn){var ir=S[Vn];p[Vn]=ir,Mn&&(p.prototype[Vn]=function(){var jr=this.__chain__;if(cn||jr){var Hr=p(this.__wrapped__),Jr=Hr.__actions__=fh(this.__actions__);return Jr.push({func:ir,args:arguments,thisArg:p}),Hr.__chain__=jr,Hr}return ir.apply(p,ds([this.value()],arguments))})}),p}function xM(){return Nr._===this&&(Nr._=ov),this}function e0(){}function bM(p){return p=$s(p),na(function(S){return Ow(S,p)})}var SM=Oy(_i),CM=Oy(Cr),DM=Oy(Ka);function Kx(p){return Fy(p)?qi(ip(p)):tD(p)}function AM(p){return function(S){return p==null?n:g(p,S)}}var EM=Jw(),TM=Jw(!0);function t0(){return[]}function n0(){return!1}function MM(){return{}}function PM(){return""}function OM(){return!0}function kM(p,S){if(p=$s(p),p<1||p>Pi)return[];var q=fa,ze=Kl(p,fa);S=ms(S),p-=fa;for(var Ft=Gu(ze,S);++q<p;)S(q);return Ft}function IM(p){return js(p)?_i(p,ip):Jh(p)?[p]:fh(gx(no(p)))}function LM(p){var S=++sv;return no(p)+S}var BM=d_(function(p,S){return p+S},0),RM=ky("ceil"),NM=d_(function(p,S){return p/S},1),FM=ky("floor");function zM(p){return p&&p.length?Tg(p,gh,Me):n}function UM(p,S){return p&&p.length?Tg(p,ms(S,2),Me):n}function jM(p){return es(p,gh)}function VM(p,S){return es(p,ms(S,2))}function HM(p){return p&&p.length?Tg(p,gh,xy):n}function WM(p,S){return p&&p.length?Tg(p,ms(S,2),xy):n}var GM=d_(function(p,S){return p*S},1),YM=ky("round"),ZM=d_(function(p,S){return p-S},0);function $M(p){return p&&p.length?Io(p,gh):0}function KM(p,S){return p&&p.length?Io(p,ms(S,2)):0}return on.after=vE,on.ary=Ax,on.assign=iT,on.assignIn=Ux,on.assignInWith=A_,on.assignWith=sT,on.at=aT,on.before=Ex,on.bind=Wy,on.bindAll=hM,on.bindKey=Tx,on.castArray=ME,on.chain=Sx,on.chunk=FD,on.compact=zD,on.concat=UD,on.cond=fM,on.conforms=dM,on.constant=Xy,on.countBy=$A,on.create=oT,on.curry=Mx,on.curryRight=Px,on.debounce=Ox,on.defaults=lT,on.defaultsDeep=uT,on.defer=_E,on.delay=yE,on.difference=jD,on.differenceBy=VD,on.differenceWith=HD,on.drop=WD,on.dropRight=GD,on.dropRightWhile=YD,on.dropWhile=ZD,on.fill=$D,on.filter=qA,on.flatMap=JA,on.flatMapDeep=eE,on.flatMapDepth=tE,on.flatten=yx,on.flattenDeep=KD,on.flattenDepth=qD,on.flip=wE,on.flow=gM,on.flowRight=mM,on.fromPairs=XD,on.functions=mT,on.functionsIn=vT,on.groupBy=nE,on.initial=JD,on.intersection=eA,on.intersectionBy=tA,on.intersectionWith=nA,on.invert=yT,on.invertBy=wT,on.invokeMap=iE,on.iteratee=Qy,on.keyBy=sE,on.keys=Eu,on.keysIn=ph,on.map=w_,on.mapKeys=bT,on.mapValues=ST,on.matches=vM,on.matchesProperty=_M,on.memoize=b_,on.merge=CT,on.mergeWith=jx,on.method=yM,on.methodOf=wM,on.mixin=Jy,on.negate=S_,on.nthArg=bM,on.omit=DT,on.omitBy=AT,on.once=xE,on.orderBy=aE,on.over=SM,on.overArgs=bE,on.overEvery=CM,on.overSome=DM,on.partial=Gy,on.partialRight=kx,on.partition=oE,on.pick=ET,on.pickBy=Vx,on.property=Kx,on.propertyOf=AM,on.pull=aA,on.pullAll=xx,on.pullAllBy=oA,on.pullAllWith=lA,on.pullAt=uA,on.range=EM,on.rangeRight=TM,on.rearg=SE,on.reject=cE,on.remove=cA,on.rest=CE,on.reverse=Vy,on.sampleSize=fE,on.set=MT,on.setWith=PT,on.shuffle=dE,on.slice=hA,on.sortBy=mE,on.sortedUniq=_A,on.sortedUniqBy=yA,on.split=JT,on.spread=DE,on.tail=wA,on.take=xA,on.takeRight=bA,on.takeRightWhile=SA,on.takeWhile=CA,on.tap=zA,on.throttle=AE,on.thru=y_,on.toArray=Nx,on.toPairs=Hx,on.toPairsIn=Wx,on.toPath=IM,on.toPlainObject=zx,on.transform=OT,on.unary=EE,on.union=DA,on.unionBy=AA,on.unionWith=EA,on.uniq=TA,on.uniqBy=MA,on.uniqWith=PA,on.unset=kT,on.unzip=Hy,on.unzipWith=bx,on.update=IT,on.updateWith=LT,on.values=zm,on.valuesIn=BT,on.without=OA,on.words=Zx,on.wrap=TE,on.xor=kA,on.xorBy=IA,on.xorWith=LA,on.zip=BA,on.zipObject=RA,on.zipObjectDeep=NA,on.zipWith=FA,on.entries=Hx,on.entriesIn=Wx,on.extend=Ux,on.extendWith=A_,Jy(on,on),on.add=BM,on.attempt=$x,on.camelCase=zT,on.capitalize=Gx,on.ceil=RM,on.clamp=RT,on.clone=PE,on.cloneDeep=kE,on.cloneDeepWith=IE,on.cloneWith=OE,on.conformsTo=LE,on.deburr=Yx,on.defaultTo=pM,on.divide=NM,on.endsWith=UT,on.eq=xd,on.escape=jT,on.escapeRegExp=VT,on.every=KA,on.find=XA,on.findIndex=vx,on.findKey=cT,on.findLast=QA,on.findLastIndex=_x,on.findLastKey=hT,on.floor=FM,on.forEach=Cx,on.forEachRight=Dx,on.forIn=fT,on.forInRight=dT,on.forOwn=pT,on.forOwnRight=gT,on.get=$y,on.gt=BE,on.gte=RE,on.has=_T,on.hasIn=Ky,on.head=wx,on.identity=gh,on.includes=rE,on.indexOf=QD,on.inRange=NT,on.invoke=xT,on.isArguments=dm,on.isArray=js,on.isArrayBuffer=NE,on.isArrayLike=dh,on.isArrayLikeObject=Rl,on.isBoolean=FE,on.isBuffer=kg,on.isDate=zE,on.isElement=UE,on.isEmpty=jE,on.isEqual=VE,on.isEqualWith=HE,on.isError=Yy,on.isFinite=WE,on.isFunction=Kp,on.isInteger=Ix,on.isLength=C_,on.isMap=Lx,on.isMatch=GE,on.isMatchWith=YE,on.isNaN=ZE,on.isNative=$E,on.isNil=qE,on.isNull=KE,on.isNumber=Bx,on.isObject=cl,on.isObjectLike=bl,on.isPlainObject=Kv,on.isRegExp=Zy,on.isSafeInteger=XE,on.isSet=Rx,on.isString=D_,on.isSymbol=Jh,on.isTypedArray=Fm,on.isUndefined=QE,on.isWeakMap=JE,on.isWeakSet=eT,on.join=rA,on.kebabCase=HT,on.last=zf,on.lastIndexOf=iA,on.lowerCase=WT,on.lowerFirst=GT,on.lt=tT,on.lte=nT,on.max=zM,on.maxBy=UM,on.mean=jM,on.meanBy=VM,on.min=HM,on.minBy=WM,on.stubArray=t0,on.stubFalse=n0,on.stubObject=MM,on.stubString=PM,on.stubTrue=OM,on.multiply=GM,on.nth=sA,on.noConflict=xM,on.noop=e0,on.now=x_,on.pad=YT,on.padEnd=ZT,on.padStart=$T,on.parseInt=KT,on.random=FT,on.reduce=lE,on.reduceRight=uE,on.repeat=qT,on.replace=XT,on.result=TT,on.round=YM,on.runInContext=Gt,on.sample=hE,on.size=pE,on.snakeCase=QT,on.some=gE,on.sortedIndex=fA,on.sortedIndexBy=dA,on.sortedIndexOf=pA,on.sortedLastIndex=gA,on.sortedLastIndexBy=mA,on.sortedLastIndexOf=vA,on.startCase=eM,on.startsWith=tM,on.subtract=ZM,on.sum=$M,on.sumBy=KM,on.template=nM,on.times=kM,on.toFinite=qp,on.toInteger=$s,on.toLength=Fx,on.toLower=rM,on.toNumber=Uf,on.toSafeInteger=rT,on.toString=no,on.toUpper=iM,on.trim=sM,on.trimEnd=aM,on.trimStart=oM,on.truncate=lM,on.unescape=uM,on.uniqueId=LM,on.upperCase=cM,on.upperFirst=qy,on.each=Cx,on.eachRight=Dx,on.first=wx,Jy(on,function(){var p={};return hh(on,function(S,q){ws.call(on.prototype,q)||(p[q]=S)}),p}(),{chain:!1}),on.VERSION=s,xn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){on[p].placeholder=on}),xn(["drop","take"],function(p,S){qs.prototype[p]=function(q){q=q===n?1:ll($s(q),0);var ze=this.__filtered__&&!S?new qs(this):this.clone();return ze.__filtered__?ze.__takeCount__=Kl(q,ze.__takeCount__):ze.__views__.push({size:Kl(q,fa),type:p+(ze.__dir__<0?"Right":"")}),ze},qs.prototype[p+"Right"]=function(q){return this.reverse()[p](q).reverse()}}),xn(["filter","map","takeWhile"],function(p,S){var q=S+1,ze=q==xr||q==Fn;qs.prototype[p]=function(Ft){var cn=this.clone();return cn.__iteratees__.push({iteratee:ms(Ft,3),type:q}),cn.__filtered__=cn.__filtered__||ze,cn}}),xn(["head","last"],function(p,S){var q="take"+(S?"Right":"");qs.prototype[p]=function(){return this[q](1).value()[0]}}),xn(["initial","tail"],function(p,S){var q="drop"+(S?"":"Right");qs.prototype[p]=function(){return this.__filtered__?new qs(this):this[q](1)}}),qs.prototype.compact=function(){return this.filter(gh)},qs.prototype.find=function(p){return this.filter(p).head()},qs.prototype.findLast=function(p){return this.reverse().find(p)},qs.prototype.invokeMap=na(function(p,S){return typeof p=="function"?new qs(this):this.map(function(q){return zn(q,p,S)})}),qs.prototype.reject=function(p){return this.filter(S_(ms(p)))},qs.prototype.slice=function(p,S){p=$s(p);var q=this;return q.__filtered__&&(p>0||S<0)?new qs(q):(p<0?q=q.takeRight(-p):p&&(q=q.drop(p)),S!==n&&(S=$s(S),q=S<0?q.dropRight(-S):q.take(S-p)),q)},qs.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},qs.prototype.toArray=function(){return this.take(fa)},hh(qs.prototype,function(p,S){var q=/^(?:filter|find|map|reject)|While$/.test(S),ze=/^(?:head|last)$/.test(S),Ft=on[ze?"take"+(S=="last"?"Right":""):S],cn=ze||/^find/.test(S);Ft&&(on.prototype[S]=function(){var Mn=this.__wrapped__,Vn=ze?[1]:arguments,ir=Mn instanceof qs,jr=Vn[0],Hr=ir||js(Mn),Jr=function(ua){var ba=Ft.apply(on,ds([ua],Vn));return ze&&Di?ba[0]:ba};Hr&&q&&typeof jr=="function"&&jr.length!=1&&(ir=Hr=!1);var Di=this.__chain__,Ki=!!this.__actions__.length,vs=cn&&!Di,Xs=ir&&!Ki;if(!cn&&Hr){Mn=Xs?Mn:new qs(this);var _s=p.apply(Mn,Vn);return _s.__actions__.push({func:y_,args:[Jr],thisArg:n}),new hc(_s,Di)}return vs&&Xs?p.apply(this,Vn):(_s=this.thru(Jr),vs?ze?_s.value()[0]:_s.value():_s)})}),xn(["pop","push","shift","sort","splice","unshift"],function(p){var S=Es[p],q=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",ze=/^(?:pop|shift)$/.test(p);on.prototype[p]=function(){var Ft=arguments;if(ze&&!this.__chain__){var cn=this.value();return S.apply(js(cn)?cn:[],Ft)}return this[q](function(Mn){return S.apply(js(Mn)?Mn:[],Ft)})}}),hh(qs.prototype,function(p,S){var q=on[S];if(q){var ze=q.name+"";ws.call(tp,ze)||(tp[ze]=[]),tp[ze].push({name:S,func:q})}}),tp[f_(n,Ie).name]=[{name:"wrapper",func:n}],qs.prototype.clone=yv,qs.prototype.reverse=wv,qs.prototype.value=xv,on.prototype.at=UA,on.prototype.chain=jA,on.prototype.commit=VA,on.prototype.next=HA,on.prototype.plant=GA,on.prototype.reverse=YA,on.prototype.toJSON=on.prototype.valueOf=on.prototype.value=ZA,on.prototype.first=on.prototype.head,Bp&&(on.prototype[Bp]=WA),on},sr=fr();xi?((xi.exports=sr)._=sr,vi._=sr):Nr._=sr}).call(Go)}(Nh,Nh.exports);var Rs=Nh.exports;function Du(y){throw new Error('Could not dynamically require "'+y+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ad={exports:{}};const dg={},Gd=Object.freeze(Object.defineProperty({__proto__:null,default:dg},Symbol.toStringTag,{value:"Module"})),Fh=Fu(Gd);var zh={exports:{}},Fo;function Uh(){return Fo||(Fo=1,function(y,e){(function(n,s){s(e)})(Go,function(n){var s=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],c=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],u="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",m="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",b={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},k="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",W={5:k,"5module":k+" export import",6:k+" const class extends export import super"},ve=/^in(stanceof)?$/,Ae=new RegExp("["+m+"]"),rt=new RegExp("["+m+u+"]");function re(_,he){for(var gt=65536,jt=0;jt<he.length;jt+=2){if(gt+=he[jt],gt>_)return!1;if(gt+=he[jt+1],gt>=_)return!0}return!1}function mt(_,he){return _<65?_===36:_<91?!0:_<97?_===95:_<123?!0:_<=65535?_>=170&&Ae.test(String.fromCharCode(_)):he===!1?!1:re(_,c)}function nt(_,he){return _<48?_===36:_<58?!0:_<65?!1:_<91?!0:_<97?_===95:_<123?!0:_<=65535?_>=170&&rt.test(String.fromCharCode(_)):he===!1?!1:re(_,c)||re(_,s)}var tn=function(_,he){he===void 0&&(he={}),this.label=_,this.keyword=he.keyword,this.beforeExpr=!!he.beforeExpr,this.startsExpr=!!he.startsExpr,this.isLoop=!!he.isLoop,this.isAssign=!!he.isAssign,this.prefix=!!he.prefix,this.postfix=!!he.postfix,this.binop=he.binop||null,this.updateContext=null};function Ie(_,he){return new tn(_,{beforeExpr:!0,binop:he})}var Kt={beforeExpr:!0},At={startsExpr:!0},an={};function Cn(_,he){return he===void 0&&(he={}),he.keyword=_,an[_]=new tn(_,he)}var He={num:new tn("num",At),regexp:new tn("regexp",At),string:new tn("string",At),name:new tn("name",At),privateId:new tn("privateId",At),eof:new tn("eof"),bracketL:new tn("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new tn("]"),braceL:new tn("{",{beforeExpr:!0,startsExpr:!0}),braceR:new tn("}"),parenL:new tn("(",{beforeExpr:!0,startsExpr:!0}),parenR:new tn(")"),comma:new tn(",",Kt),semi:new tn(";",Kt),colon:new tn(":",Kt),dot:new tn("."),question:new tn("?",Kt),questionDot:new tn("?."),arrow:new tn("=>",Kt),template:new tn("template"),invalidTemplate:new tn("invalidTemplate"),ellipsis:new tn("...",Kt),backQuote:new tn("`",At),dollarBraceL:new tn("${",{beforeExpr:!0,startsExpr:!0}),eq:new tn("=",{beforeExpr:!0,isAssign:!0}),assign:new tn("_=",{beforeExpr:!0,isAssign:!0}),incDec:new tn("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new tn("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Ie("||",1),logicalAND:Ie("&&",2),bitwiseOR:Ie("|",3),bitwiseXOR:Ie("^",4),bitwiseAND:Ie("&",5),equality:Ie("==/!=/===/!==",6),relational:Ie("</>/<=/>=",7),bitShift:Ie("<</>>/>>>",8),plusMin:new tn("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Ie("%",10),star:Ie("*",10),slash:Ie("/",10),starstar:new tn("**",{beforeExpr:!0}),coalesce:Ie("??",1),_break:Cn("break"),_case:Cn("case",Kt),_catch:Cn("catch"),_continue:Cn("continue"),_debugger:Cn("debugger"),_default:Cn("default",Kt),_do:Cn("do",{isLoop:!0,beforeExpr:!0}),_else:Cn("else",Kt),_finally:Cn("finally"),_for:Cn("for",{isLoop:!0}),_function:Cn("function",At),_if:Cn("if"),_return:Cn("return",Kt),_switch:Cn("switch"),_throw:Cn("throw",Kt),_try:Cn("try"),_var:Cn("var"),_const:Cn("const"),_while:Cn("while",{isLoop:!0}),_with:Cn("with"),_new:Cn("new",{beforeExpr:!0,startsExpr:!0}),_this:Cn("this",At),_super:Cn("super",At),_class:Cn("class",At),_extends:Cn("extends",Kt),_export:Cn("export"),_import:Cn("import",At),_null:Cn("null",At),_true:Cn("true",At),_false:Cn("false",At),_in:Cn("in",{beforeExpr:!0,binop:7}),_instanceof:Cn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Cn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Cn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Cn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},_e=/\r\n?|\n|\u2028|\u2029/,Sr=new RegExp(_e.source,"g");function On(_){return _===10||_===13||_===8232||_===8233}function Kr(_,he,gt){gt===void 0&&(gt=_.length);for(var jt=he;jt<gt;jt++){var wn=_.charCodeAt(jt);if(On(wn))return jt<gt-1&&wn===13&&_.charCodeAt(jt+1)===10?jt+2:jt+1}return-1}var Mi=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ei=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,oi=Object.prototype,xr=oi.hasOwnProperty,Ts=oi.toString,Fn=Object.hasOwn||function(_,he){return xr.call(_,he)},si=Array.isArray||function(_){return Ts.call(_)==="[object Array]"},Pi=Object.create(null);function ai(_){return Pi[_]||(Pi[_]=new RegExp("^(?:"+_.replace(/ /g,"|")+")$"))}function hs(_){return _<=65535?String.fromCharCode(_):(_-=65536,String.fromCharCode((_>>10)+55296,(_&1023)+56320))}var fa=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Hs=function(_,he){this.line=_,this.column=he};Hs.prototype.offset=function(_){return new Hs(this.line,this.column+_)};var Ns=function(_,he,gt){this.start=he,this.end=gt,_.sourceFile!==null&&(this.source=_.sourceFile)};function da(_,he){for(var gt=1,jt=0;;){var wn=Kr(_,jt,he);if(wn<0)return new Hs(gt,he-jt);++gt,jt=wn}}var Zi={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},fo=!1;function io(_){var he={};for(var gt in Zi)he[gt]=_&&Fn(_,gt)?_[gt]:Zi[gt];if(he.ecmaVersion==="latest"?he.ecmaVersion=1e8:he.ecmaVersion==null?(!fo&&typeof console=="object"&&console.warn&&(fo=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),he.ecmaVersion=11):he.ecmaVersion>=2015&&(he.ecmaVersion-=2009),he.allowReserved==null&&(he.allowReserved=he.ecmaVersion<5),(!_||_.allowHashBang==null)&&(he.allowHashBang=he.ecmaVersion>=14),si(he.onToken)){var jt=he.onToken;he.onToken=function(wn){return jt.push(wn)}}return si(he.onComment)&&(he.onComment=qo(he,he.onComment)),he}function qo(_,he){return function(gt,jt,wn,nr,l,f){var x={type:gt?"Block":"Line",value:jt,start:wn,end:nr};_.locations&&(x.loc=new Ns(this,l,f)),_.ranges&&(x.range=[wn,nr]),he.push(x)}}var Ti=1,Fi=2,zi=4,wo=8,xo=16,Fa=32,Uo=64,so=128,pa=256,ea=Ti|Fi|pa;function fs(_,he){return Fi|(_?zi:0)|(he?wo:0)}var Ds=0,di=1,Ai=2,ui=3,bo=4,ar=5,t=function(_,he,gt){this.options=_=io(_),this.sourceFile=_.sourceFile,this.keywords=ai(W[_.ecmaVersion>=6?6:_.sourceType==="module"?"5module":5]);var jt="";_.allowReserved!==!0&&(jt=b[_.ecmaVersion>=6?6:_.ecmaVersion===5?5:3],_.sourceType==="module"&&(jt+=" await")),this.reservedWords=ai(jt);var wn=(jt?jt+" ":"")+b.strict;this.reservedWordsStrict=ai(wn),this.reservedWordsStrictBind=ai(wn+" "+b.strictBind),this.input=String(he),this.containsEsc=!1,gt?(this.pos=gt,this.lineStart=this.input.lastIndexOf(`
`,gt-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(_e).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=He.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=_.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&_.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Ti),this.regexpState=null,this.privateNameStack=[]},i={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};t.prototype.parse=function(){var _=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(_)},i.inFunction.get=function(){return(this.currentVarScope().flags&Fi)>0},i.inGenerator.get=function(){return(this.currentVarScope().flags&wo)>0&&!this.currentVarScope().inClassFieldInit},i.inAsync.get=function(){return(this.currentVarScope().flags&zi)>0&&!this.currentVarScope().inClassFieldInit},i.canAwait.get=function(){for(var _=this.scopeStack.length-1;_>=0;_--){var he=this.scopeStack[_];if(he.inClassFieldInit||he.flags&pa)return!1;if(he.flags&Fi)return(he.flags&zi)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},i.allowSuper.get=function(){var _=this.currentThisScope(),he=_.flags,gt=_.inClassFieldInit;return(he&Uo)>0||gt||this.options.allowSuperOutsideMethod},i.allowDirectSuper.get=function(){return(this.currentThisScope().flags&so)>0},i.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},i.allowNewDotTarget.get=function(){var _=this.currentThisScope(),he=_.flags,gt=_.inClassFieldInit;return(he&(Fi|pa))>0||gt},i.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&pa)>0},t.extend=function(){for(var _=[],he=arguments.length;he--;)_[he]=arguments[he];for(var gt=this,jt=0;jt<_.length;jt++)gt=_[jt](gt);return gt},t.parse=function(_,he){return new this(he,_).parse()},t.parseExpressionAt=function(_,he,gt){var jt=new this(gt,_,he);return jt.nextToken(),jt.parseExpression()},t.tokenizer=function(_,he){return new this(he,_)},Object.defineProperties(t.prototype,i);var o=t.prototype,h=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;o.strictDirective=function(_){if(this.options.ecmaVersion<5)return!1;for(;;){ei.lastIndex=_,_+=ei.exec(this.input)[0].length;var he=h.exec(this.input.slice(_));if(!he)return!1;if((he[1]||he[2])==="use strict"){ei.lastIndex=_+he[0].length;var gt=ei.exec(this.input),jt=gt.index+gt[0].length,wn=this.input.charAt(jt);return wn===";"||wn==="}"||_e.test(gt[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(wn)||wn==="!"&&this.input.charAt(jt+1)==="=")}_+=he[0].length,ei.lastIndex=_,_+=ei.exec(this.input)[0].length,this.input[_]===";"&&_++}},o.eat=function(_){return this.type===_?(this.next(),!0):!1},o.isContextual=function(_){return this.type===He.name&&this.value===_&&!this.containsEsc},o.eatContextual=function(_){return this.isContextual(_)?(this.next(),!0):!1},o.expectContextual=function(_){this.eatContextual(_)||this.unexpected()},o.canInsertSemicolon=function(){return this.type===He.eof||this.type===He.braceR||_e.test(this.input.slice(this.lastTokEnd,this.start))},o.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},o.semicolon=function(){!this.eat(He.semi)&&!this.insertSemicolon()&&this.unexpected()},o.afterTrailingComma=function(_,he){if(this.type===_)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),he||this.next(),!0},o.expect=function(_){this.eat(_)||this.unexpected()},o.unexpected=function(_){this.raise(_??this.start,"Unexpected token")};var d=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};o.checkPatternErrors=function(_,he){if(_){_.trailingComma>-1&&this.raiseRecoverable(_.trailingComma,"Comma is not permitted after the rest element");var gt=he?_.parenthesizedAssign:_.parenthesizedBind;gt>-1&&this.raiseRecoverable(gt,he?"Assigning to rvalue":"Parenthesized pattern")}},o.checkExpressionErrors=function(_,he){if(!_)return!1;var gt=_.shorthandAssign,jt=_.doubleProto;if(!he)return gt>=0||jt>=0;gt>=0&&this.raise(gt,"Shorthand property assignments are valid only in destructuring patterns"),jt>=0&&this.raiseRecoverable(jt,"Redefinition of __proto__ property")},o.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},o.isSimpleAssignTarget=function(_){return _.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(_.expression):_.type==="Identifier"||_.type==="MemberExpression"};var v=t.prototype;v.parseTopLevel=function(_){var he=Object.create(null);for(_.body||(_.body=[]);this.type!==He.eof;){var gt=this.parseStatement(null,!0,he);_.body.push(gt)}if(this.inModule)for(var jt=0,wn=Object.keys(this.undefinedExports);jt<wn.length;jt+=1){var nr=wn[jt];this.raiseRecoverable(this.undefinedExports[nr].start,"Export '"+nr+"' is not defined")}return this.adaptDirectivePrologue(_.body),this.next(),_.sourceType=this.options.sourceType,this.finishNode(_,"Program")};var D={kind:"loop"},A={kind:"switch"};v.isLet=function(_){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ei.lastIndex=this.pos;var he=ei.exec(this.input),gt=this.pos+he[0].length,jt=this.input.charCodeAt(gt);if(jt===91||jt===92)return!0;if(_)return!1;if(jt===123||jt>55295&&jt<56320)return!0;if(mt(jt,!0)){for(var wn=gt+1;nt(jt=this.input.charCodeAt(wn),!0);)++wn;if(jt===92||jt>55295&&jt<56320)return!0;var nr=this.input.slice(gt,wn);if(!ve.test(nr))return!0}return!1},v.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ei.lastIndex=this.pos;var _=ei.exec(this.input),he=this.pos+_[0].length,gt;return!_e.test(this.input.slice(this.pos,he))&&this.input.slice(he,he+8)==="function"&&(he+8===this.input.length||!(nt(gt=this.input.charCodeAt(he+8))||gt>55295&&gt<56320))},v.parseStatement=function(_,he,gt){var jt=this.type,wn=this.startNode(),nr;switch(this.isLet(_)&&(jt=He._var,nr="let"),jt){case He._break:case He._continue:return this.parseBreakContinueStatement(wn,jt.keyword);case He._debugger:return this.parseDebuggerStatement(wn);case He._do:return this.parseDoStatement(wn);case He._for:return this.parseForStatement(wn);case He._function:return _&&(this.strict||_!=="if"&&_!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(wn,!1,!_);case He._class:return _&&this.unexpected(),this.parseClass(wn,!0);case He._if:return this.parseIfStatement(wn);case He._return:return this.parseReturnStatement(wn);case He._switch:return this.parseSwitchStatement(wn);case He._throw:return this.parseThrowStatement(wn);case He._try:return this.parseTryStatement(wn);case He._const:case He._var:return nr=nr||this.value,_&&nr!=="var"&&this.unexpected(),this.parseVarStatement(wn,nr);case He._while:return this.parseWhileStatement(wn);case He._with:return this.parseWithStatement(wn);case He.braceL:return this.parseBlock(!0,wn);case He.semi:return this.parseEmptyStatement(wn);case He._export:case He._import:if(this.options.ecmaVersion>10&&jt===He._import){ei.lastIndex=this.pos;var l=ei.exec(this.input),f=this.pos+l[0].length,x=this.input.charCodeAt(f);if(x===40||x===46)return this.parseExpressionStatement(wn,this.parseExpression())}return this.options.allowImportExportEverywhere||(he||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),jt===He._import?this.parseImport(wn):this.parseExport(wn,gt);default:if(this.isAsyncFunction())return _&&this.unexpected(),this.next(),this.parseFunctionStatement(wn,!0,!_);var N=this.value,ge=this.parseExpression();return jt===He.name&&ge.type==="Identifier"&&this.eat(He.colon)?this.parseLabeledStatement(wn,N,ge,_):this.parseExpressionStatement(wn,ge)}},v.parseBreakContinueStatement=function(_,he){var gt=he==="break";this.next(),this.eat(He.semi)||this.insertSemicolon()?_.label=null:this.type!==He.name?this.unexpected():(_.label=this.parseIdent(),this.semicolon());for(var jt=0;jt<this.labels.length;++jt){var wn=this.labels[jt];if((_.label==null||wn.name===_.label.name)&&(wn.kind!=null&&(gt||wn.kind==="loop")||_.label&&gt))break}return jt===this.labels.length&&this.raise(_.start,"Unsyntactic "+he),this.finishNode(_,gt?"BreakStatement":"ContinueStatement")},v.parseDebuggerStatement=function(_){return this.next(),this.semicolon(),this.finishNode(_,"DebuggerStatement")},v.parseDoStatement=function(_){return this.next(),this.labels.push(D),_.body=this.parseStatement("do"),this.labels.pop(),this.expect(He._while),_.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(He.semi):this.semicolon(),this.finishNode(_,"DoWhileStatement")},v.parseForStatement=function(_){this.next();var he=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(D),this.enterScope(0),this.expect(He.parenL),this.type===He.semi)return he>-1&&this.unexpected(he),this.parseFor(_,null);var gt=this.isLet();if(this.type===He._var||this.type===He._const||gt){var jt=this.startNode(),wn=gt?"let":this.value;return this.next(),this.parseVar(jt,!0,wn),this.finishNode(jt,"VariableDeclaration"),(this.type===He._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&jt.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===He._in?he>-1&&this.unexpected(he):_.await=he>-1),this.parseForIn(_,jt)):(he>-1&&this.unexpected(he),this.parseFor(_,jt))}var nr=this.isContextual("let"),l=!1,f=new d,x=this.parseExpression(he>-1?"await":!0,f);return this.type===He._in||(l=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===He._in?he>-1&&this.unexpected(he):_.await=he>-1),nr&&l&&this.raise(x.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(x,!1,f),this.checkLValPattern(x),this.parseForIn(_,x)):(this.checkExpressionErrors(f,!0),he>-1&&this.unexpected(he),this.parseFor(_,x))},v.parseFunctionStatement=function(_,he,gt){return this.next(),this.parseFunction(_,P|(gt?0:F),!1,he)},v.parseIfStatement=function(_){return this.next(),_.test=this.parseParenExpression(),_.consequent=this.parseStatement("if"),_.alternate=this.eat(He._else)?this.parseStatement("if"):null,this.finishNode(_,"IfStatement")},v.parseReturnStatement=function(_){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(He.semi)||this.insertSemicolon()?_.argument=null:(_.argument=this.parseExpression(),this.semicolon()),this.finishNode(_,"ReturnStatement")},v.parseSwitchStatement=function(_){this.next(),_.discriminant=this.parseParenExpression(),_.cases=[],this.expect(He.braceL),this.labels.push(A),this.enterScope(0);for(var he,gt=!1;this.type!==He.braceR;)if(this.type===He._case||this.type===He._default){var jt=this.type===He._case;he&&this.finishNode(he,"SwitchCase"),_.cases.push(he=this.startNode()),he.consequent=[],this.next(),jt?he.test=this.parseExpression():(gt&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),gt=!0,he.test=null),this.expect(He.colon)}else he||this.unexpected(),he.consequent.push(this.parseStatement(null));return this.exitScope(),he&&this.finishNode(he,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(_,"SwitchStatement")},v.parseThrowStatement=function(_){return this.next(),_e.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),_.argument=this.parseExpression(),this.semicolon(),this.finishNode(_,"ThrowStatement")};var T=[];v.parseCatchClauseParam=function(){var _=this.parseBindingAtom(),he=_.type==="Identifier";return this.enterScope(he?Fa:0),this.checkLValPattern(_,he?bo:Ai),this.expect(He.parenR),_},v.parseTryStatement=function(_){if(this.next(),_.block=this.parseBlock(),_.handler=null,this.type===He._catch){var he=this.startNode();this.next(),this.eat(He.parenL)?he.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),he.param=null,this.enterScope(0)),he.body=this.parseBlock(!1),this.exitScope(),_.handler=this.finishNode(he,"CatchClause")}return _.finalizer=this.eat(He._finally)?this.parseBlock():null,!_.handler&&!_.finalizer&&this.raise(_.start,"Missing catch or finally clause"),this.finishNode(_,"TryStatement")},v.parseVarStatement=function(_,he,gt){return this.next(),this.parseVar(_,!1,he,gt),this.semicolon(),this.finishNode(_,"VariableDeclaration")},v.parseWhileStatement=function(_){return this.next(),_.test=this.parseParenExpression(),this.labels.push(D),_.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(_,"WhileStatement")},v.parseWithStatement=function(_){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),_.object=this.parseParenExpression(),_.body=this.parseStatement("with"),this.finishNode(_,"WithStatement")},v.parseEmptyStatement=function(_){return this.next(),this.finishNode(_,"EmptyStatement")},v.parseLabeledStatement=function(_,he,gt,jt){for(var wn=0,nr=this.labels;wn<nr.length;wn+=1){var l=nr[wn];l.name===he&&this.raise(gt.start,"Label '"+he+"' is already declared")}for(var f=this.type.isLoop?"loop":this.type===He._switch?"switch":null,x=this.labels.length-1;x>=0;x--){var N=this.labels[x];if(N.statementStart===_.start)N.statementStart=this.start,N.kind=f;else break}return this.labels.push({name:he,kind:f,statementStart:this.start}),_.body=this.parseStatement(jt?jt.indexOf("label")===-1?jt+"label":jt:"label"),this.labels.pop(),_.label=gt,this.finishNode(_,"LabeledStatement")},v.parseExpressionStatement=function(_,he){return _.expression=he,this.semicolon(),this.finishNode(_,"ExpressionStatement")},v.parseBlock=function(_,he,gt){for(_===void 0&&(_=!0),he===void 0&&(he=this.startNode()),he.body=[],this.expect(He.braceL),_&&this.enterScope(0);this.type!==He.braceR;){var jt=this.parseStatement(null);he.body.push(jt)}return gt&&(this.strict=!1),this.next(),_&&this.exitScope(),this.finishNode(he,"BlockStatement")},v.parseFor=function(_,he){return _.init=he,this.expect(He.semi),_.test=this.type===He.semi?null:this.parseExpression(),this.expect(He.semi),_.update=this.type===He.parenR?null:this.parseExpression(),this.expect(He.parenR),_.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(_,"ForStatement")},v.parseForIn=function(_,he){var gt=this.type===He._in;return this.next(),he.type==="VariableDeclaration"&&he.declarations[0].init!=null&&(!gt||this.options.ecmaVersion<8||this.strict||he.kind!=="var"||he.declarations[0].id.type!=="Identifier")&&this.raise(he.start,(gt?"for-in":"for-of")+" loop variable declaration may not have an initializer"),_.left=he,_.right=gt?this.parseExpression():this.parseMaybeAssign(),this.expect(He.parenR),_.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(_,gt?"ForInStatement":"ForOfStatement")},v.parseVar=function(_,he,gt,jt){for(_.declarations=[],_.kind=gt;;){var wn=this.startNode();if(this.parseVarId(wn,gt),this.eat(He.eq)?wn.init=this.parseMaybeAssign(he):!jt&&gt==="const"&&!(this.type===He._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!jt&&wn.id.type!=="Identifier"&&!(he&&(this.type===He._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):wn.init=null,_.declarations.push(this.finishNode(wn,"VariableDeclarator")),!this.eat(He.comma))break}return _},v.parseVarId=function(_,he){_.id=this.parseBindingAtom(),this.checkLValPattern(_.id,he==="var"?di:Ai,!1)};var P=1,F=2,V=4;v.parseFunction=function(_,he,gt,jt,wn){this.initFunction(_),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!jt)&&(this.type===He.star&&he&F&&this.unexpected(),_.generator=this.eat(He.star)),this.options.ecmaVersion>=8&&(_.async=!!jt),he&P&&(_.id=he&V&&this.type!==He.name?null:this.parseIdent(),_.id&&!(he&F)&&this.checkLValSimple(_.id,this.strict||_.generator||_.async?this.treatFunctionsAsVar?di:Ai:ui));var nr=this.yieldPos,l=this.awaitPos,f=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(fs(_.async,_.generator)),he&P||(_.id=this.type===He.name?this.parseIdent():null),this.parseFunctionParams(_),this.parseFunctionBody(_,gt,!1,wn),this.yieldPos=nr,this.awaitPos=l,this.awaitIdentPos=f,this.finishNode(_,he&P?"FunctionDeclaration":"FunctionExpression")},v.parseFunctionParams=function(_){this.expect(He.parenL),_.params=this.parseBindingList(He.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},v.parseClass=function(_,he){this.next();var gt=this.strict;this.strict=!0,this.parseClassId(_,he),this.parseClassSuper(_);var jt=this.enterClassBody(),wn=this.startNode(),nr=!1;for(wn.body=[],this.expect(He.braceL);this.type!==He.braceR;){var l=this.parseClassElement(_.superClass!==null);l&&(wn.body.push(l),l.type==="MethodDefinition"&&l.kind==="constructor"?(nr&&this.raiseRecoverable(l.start,"Duplicate constructor in the same class"),nr=!0):l.key&&l.key.type==="PrivateIdentifier"&&z(jt,l)&&this.raiseRecoverable(l.key.start,"Identifier '#"+l.key.name+"' has already been declared"))}return this.strict=gt,this.next(),_.body=this.finishNode(wn,"ClassBody"),this.exitClassBody(),this.finishNode(_,he?"ClassDeclaration":"ClassExpression")},v.parseClassElement=function(_){if(this.eat(He.semi))return null;var he=this.options.ecmaVersion,gt=this.startNode(),jt="",wn=!1,nr=!1,l="method",f=!1;if(this.eatContextual("static")){if(he>=13&&this.eat(He.braceL))return this.parseClassStaticBlock(gt),gt;this.isClassElementNameStart()||this.type===He.star?f=!0:jt="static"}if(gt.static=f,!jt&&he>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===He.star)&&!this.canInsertSemicolon()?nr=!0:jt="async"),!jt&&(he>=9||!nr)&&this.eat(He.star)&&(wn=!0),!jt&&!nr&&!wn){var x=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?l=x:jt=x)}if(jt?(gt.computed=!1,gt.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),gt.key.name=jt,this.finishNode(gt.key,"Identifier")):this.parseClassElementName(gt),he<13||this.type===He.parenL||l!=="method"||wn||nr){var N=!gt.static&&R(gt,"constructor"),ge=N&&_;N&&l!=="method"&&this.raise(gt.key.start,"Constructor can't have get/set modifier"),gt.kind=N?"constructor":l,this.parseClassMethod(gt,wn,nr,ge)}else this.parseClassField(gt);return gt},v.isClassElementNameStart=function(){return this.type===He.name||this.type===He.privateId||this.type===He.num||this.type===He.string||this.type===He.bracketL||this.type.keyword},v.parseClassElementName=function(_){this.type===He.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),_.computed=!1,_.key=this.parsePrivateIdent()):this.parsePropertyName(_)},v.parseClassMethod=function(_,he,gt,jt){var wn=_.key;_.kind==="constructor"?(he&&this.raise(wn.start,"Constructor can't be a generator"),gt&&this.raise(wn.start,"Constructor can't be an async method")):_.static&&R(_,"prototype")&&this.raise(wn.start,"Classes may not have a static property named prototype");var nr=_.value=this.parseMethod(he,gt,jt);return _.kind==="get"&&nr.params.length!==0&&this.raiseRecoverable(nr.start,"getter should have no params"),_.kind==="set"&&nr.params.length!==1&&this.raiseRecoverable(nr.start,"setter should have exactly one param"),_.kind==="set"&&nr.params[0].type==="RestElement"&&this.raiseRecoverable(nr.params[0].start,"Setter cannot use rest params"),this.finishNode(_,"MethodDefinition")},v.parseClassField=function(_){if(R(_,"constructor")?this.raise(_.key.start,"Classes can't have a field named 'constructor'"):_.static&&R(_,"prototype")&&this.raise(_.key.start,"Classes can't have a static field named 'prototype'"),this.eat(He.eq)){var he=this.currentThisScope(),gt=he.inClassFieldInit;he.inClassFieldInit=!0,_.value=this.parseMaybeAssign(),he.inClassFieldInit=gt}else _.value=null;return this.semicolon(),this.finishNode(_,"PropertyDefinition")},v.parseClassStaticBlock=function(_){_.body=[];var he=this.labels;for(this.labels=[],this.enterScope(pa|Uo);this.type!==He.braceR;){var gt=this.parseStatement(null);_.body.push(gt)}return this.next(),this.exitScope(),this.labels=he,this.finishNode(_,"StaticBlock")},v.parseClassId=function(_,he){this.type===He.name?(_.id=this.parseIdent(),he&&this.checkLValSimple(_.id,Ai,!1)):(he===!0&&this.unexpected(),_.id=null)},v.parseClassSuper=function(_){_.superClass=this.eat(He._extends)?this.parseExprSubscripts(null,!1):null},v.enterClassBody=function(){var _={declared:Object.create(null),used:[]};return this.privateNameStack.push(_),_.declared},v.exitClassBody=function(){var _=this.privateNameStack.pop(),he=_.declared,gt=_.used;if(this.options.checkPrivateFields)for(var jt=this.privateNameStack.length,wn=jt===0?null:this.privateNameStack[jt-1],nr=0;nr<gt.length;++nr){var l=gt[nr];Fn(he,l.name)||(wn?wn.used.push(l):this.raiseRecoverable(l.start,"Private field '#"+l.name+"' must be declared in an enclosing class"))}};function z(_,he){var gt=he.key.name,jt=_[gt],wn="true";return he.type==="MethodDefinition"&&(he.kind==="get"||he.kind==="set")&&(wn=(he.static?"s":"i")+he.kind),jt==="iget"&&wn==="iset"||jt==="iset"&&wn==="iget"||jt==="sget"&&wn==="sset"||jt==="sset"&&wn==="sget"?(_[gt]="true",!1):jt?!0:(_[gt]=wn,!1)}function R(_,he){var gt=_.computed,jt=_.key;return!gt&&(jt.type==="Identifier"&&jt.name===he||jt.type==="Literal"&&jt.value===he)}v.parseExportAllDeclaration=function(_,he){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(_.exported=this.parseModuleExportName(),this.checkExport(he,_.exported,this.lastTokStart)):_.exported=null),this.expectContextual("from"),this.type!==He.string&&this.unexpected(),_.source=this.parseExprAtom(),this.semicolon(),this.finishNode(_,"ExportAllDeclaration")},v.parseExport=function(_,he){if(this.next(),this.eat(He.star))return this.parseExportAllDeclaration(_,he);if(this.eat(He._default))return this.checkExport(he,"default",this.lastTokStart),_.declaration=this.parseExportDefaultDeclaration(),this.finishNode(_,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())_.declaration=this.parseExportDeclaration(_),_.declaration.type==="VariableDeclaration"?this.checkVariableExport(he,_.declaration.declarations):this.checkExport(he,_.declaration.id,_.declaration.id.start),_.specifiers=[],_.source=null;else{if(_.declaration=null,_.specifiers=this.parseExportSpecifiers(he),this.eatContextual("from"))this.type!==He.string&&this.unexpected(),_.source=this.parseExprAtom();else{for(var gt=0,jt=_.specifiers;gt<jt.length;gt+=1){var wn=jt[gt];this.checkUnreserved(wn.local),this.checkLocalExport(wn.local),wn.local.type==="Literal"&&this.raise(wn.local.start,"A string literal cannot be used as an exported binding without `from`.")}_.source=null}this.semicolon()}return this.finishNode(_,"ExportNamedDeclaration")},v.parseExportDeclaration=function(_){return this.parseStatement(null)},v.parseExportDefaultDeclaration=function(){var _;if(this.type===He._function||(_=this.isAsyncFunction())){var he=this.startNode();return this.next(),_&&this.next(),this.parseFunction(he,P|V,!1,_)}else if(this.type===He._class){var gt=this.startNode();return this.parseClass(gt,"nullableID")}else{var jt=this.parseMaybeAssign();return this.semicolon(),jt}},v.checkExport=function(_,he,gt){_&&(typeof he!="string"&&(he=he.type==="Identifier"?he.name:he.value),Fn(_,he)&&this.raiseRecoverable(gt,"Duplicate export '"+he+"'"),_[he]=!0)},v.checkPatternExport=function(_,he){var gt=he.type;if(gt==="Identifier")this.checkExport(_,he,he.start);else if(gt==="ObjectPattern")for(var jt=0,wn=he.properties;jt<wn.length;jt+=1){var nr=wn[jt];this.checkPatternExport(_,nr)}else if(gt==="ArrayPattern")for(var l=0,f=he.elements;l<f.length;l+=1){var x=f[l];x&&this.checkPatternExport(_,x)}else gt==="Property"?this.checkPatternExport(_,he.value):gt==="AssignmentPattern"?this.checkPatternExport(_,he.left):gt==="RestElement"&&this.checkPatternExport(_,he.argument)},v.checkVariableExport=function(_,he){if(_)for(var gt=0,jt=he;gt<jt.length;gt+=1){var wn=jt[gt];this.checkPatternExport(_,wn.id)}},v.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},v.parseExportSpecifier=function(_){var he=this.startNode();return he.local=this.parseModuleExportName(),he.exported=this.eatContextual("as")?this.parseModuleExportName():he.local,this.checkExport(_,he.exported,he.exported.start),this.finishNode(he,"ExportSpecifier")},v.parseExportSpecifiers=function(_){var he=[],gt=!0;for(this.expect(He.braceL);!this.eat(He.braceR);){if(gt)gt=!1;else if(this.expect(He.comma),this.afterTrailingComma(He.braceR))break;he.push(this.parseExportSpecifier(_))}return he},v.parseImport=function(_){return this.next(),this.type===He.string?(_.specifiers=T,_.source=this.parseExprAtom()):(_.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),_.source=this.type===He.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(_,"ImportDeclaration")},v.parseImportSpecifier=function(){var _=this.startNode();return _.imported=this.parseModuleExportName(),this.eatContextual("as")?_.local=this.parseIdent():(this.checkUnreserved(_.imported),_.local=_.imported),this.checkLValSimple(_.local,Ai),this.finishNode(_,"ImportSpecifier")},v.parseImportDefaultSpecifier=function(){var _=this.startNode();return _.local=this.parseIdent(),this.checkLValSimple(_.local,Ai),this.finishNode(_,"ImportDefaultSpecifier")},v.parseImportNamespaceSpecifier=function(){var _=this.startNode();return this.next(),this.expectContextual("as"),_.local=this.parseIdent(),this.checkLValSimple(_.local,Ai),this.finishNode(_,"ImportNamespaceSpecifier")},v.parseImportSpecifiers=function(){var _=[],he=!0;if(this.type===He.name&&(_.push(this.parseImportDefaultSpecifier()),!this.eat(He.comma)))return _;if(this.type===He.star)return _.push(this.parseImportNamespaceSpecifier()),_;for(this.expect(He.braceL);!this.eat(He.braceR);){if(he)he=!1;else if(this.expect(He.comma),this.afterTrailingComma(He.braceR))break;_.push(this.parseImportSpecifier())}return _},v.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===He.string){var _=this.parseLiteral(this.value);return fa.test(_.value)&&this.raise(_.start,"An export name cannot include a lone surrogate."),_}return this.parseIdent(!0)},v.adaptDirectivePrologue=function(_){for(var he=0;he<_.length&&this.isDirectiveCandidate(_[he]);++he)_[he].directive=_[he].expression.raw.slice(1,-1)},v.isDirectiveCandidate=function(_){return this.options.ecmaVersion>=5&&_.type==="ExpressionStatement"&&_.expression.type==="Literal"&&typeof _.expression.value=="string"&&(this.input[_.start]==='"'||this.input[_.start]==="'")};var J=t.prototype;J.toAssignable=function(_,he,gt){if(this.options.ecmaVersion>=6&&_)switch(_.type){case"Identifier":this.inAsync&&_.name==="await"&&this.raise(_.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":_.type="ObjectPattern",gt&&this.checkPatternErrors(gt,!0);for(var jt=0,wn=_.properties;jt<wn.length;jt+=1){var nr=wn[jt];this.toAssignable(nr,he),nr.type==="RestElement"&&(nr.argument.type==="ArrayPattern"||nr.argument.type==="ObjectPattern")&&this.raise(nr.argument.start,"Unexpected token")}break;case"Property":_.kind!=="init"&&this.raise(_.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(_.value,he);break;case"ArrayExpression":_.type="ArrayPattern",gt&&this.checkPatternErrors(gt,!0),this.toAssignableList(_.elements,he);break;case"SpreadElement":_.type="RestElement",this.toAssignable(_.argument,he),_.argument.type==="AssignmentPattern"&&this.raise(_.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":_.operator!=="="&&this.raise(_.left.end,"Only '=' operator can be used for specifying default value."),_.type="AssignmentPattern",delete _.operator,this.toAssignable(_.left,he);break;case"ParenthesizedExpression":this.toAssignable(_.expression,he,gt);break;case"ChainExpression":this.raiseRecoverable(_.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!he)break;default:this.raise(_.start,"Assigning to rvalue")}else gt&&this.checkPatternErrors(gt,!0);return _},J.toAssignableList=function(_,he){for(var gt=_.length,jt=0;jt<gt;jt++){var wn=_[jt];wn&&this.toAssignable(wn,he)}if(gt){var nr=_[gt-1];this.options.ecmaVersion===6&&he&&nr&&nr.type==="RestElement"&&nr.argument.type!=="Identifier"&&this.unexpected(nr.argument.start)}return _},J.parseSpread=function(_){var he=this.startNode();return this.next(),he.argument=this.parseMaybeAssign(!1,_),this.finishNode(he,"SpreadElement")},J.parseRestBinding=function(){var _=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==He.name&&this.unexpected(),_.argument=this.parseBindingAtom(),this.finishNode(_,"RestElement")},J.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case He.bracketL:var _=this.startNode();return this.next(),_.elements=this.parseBindingList(He.bracketR,!0,!0),this.finishNode(_,"ArrayPattern");case He.braceL:return this.parseObj(!0)}return this.parseIdent()},J.parseBindingList=function(_,he,gt,jt){for(var wn=[],nr=!0;!this.eat(_);)if(nr?nr=!1:this.expect(He.comma),he&&this.type===He.comma)wn.push(null);else{if(gt&&this.afterTrailingComma(_))break;if(this.type===He.ellipsis){var l=this.parseRestBinding();this.parseBindingListItem(l),wn.push(l),this.type===He.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(_);break}else wn.push(this.parseAssignableListItem(jt))}return wn},J.parseAssignableListItem=function(_){var he=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(he),he},J.parseBindingListItem=function(_){return _},J.parseMaybeDefault=function(_,he,gt){if(gt=gt||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(He.eq))return gt;var jt=this.startNodeAt(_,he);return jt.left=gt,jt.right=this.parseMaybeAssign(),this.finishNode(jt,"AssignmentPattern")},J.checkLValSimple=function(_,he,gt){he===void 0&&(he=Ds);var jt=he!==Ds;switch(_.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(_.name)&&this.raiseRecoverable(_.start,(jt?"Binding ":"Assigning to ")+_.name+" in strict mode"),jt&&(he===Ai&&_.name==="let"&&this.raiseRecoverable(_.start,"let is disallowed as a lexically bound name"),gt&&(Fn(gt,_.name)&&this.raiseRecoverable(_.start,"Argument name clash"),gt[_.name]=!0),he!==ar&&this.declareName(_.name,he,_.start));break;case"ChainExpression":this.raiseRecoverable(_.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":jt&&this.raiseRecoverable(_.start,"Binding member expression");break;case"ParenthesizedExpression":return jt&&this.raiseRecoverable(_.start,"Binding parenthesized expression"),this.checkLValSimple(_.expression,he,gt);default:this.raise(_.start,(jt?"Binding":"Assigning to")+" rvalue")}},J.checkLValPattern=function(_,he,gt){switch(he===void 0&&(he=Ds),_.type){case"ObjectPattern":for(var jt=0,wn=_.properties;jt<wn.length;jt+=1){var nr=wn[jt];this.checkLValInnerPattern(nr,he,gt)}break;case"ArrayPattern":for(var l=0,f=_.elements;l<f.length;l+=1){var x=f[l];x&&this.checkLValInnerPattern(x,he,gt)}break;default:this.checkLValSimple(_,he,gt)}},J.checkLValInnerPattern=function(_,he,gt){switch(he===void 0&&(he=Ds),_.type){case"Property":this.checkLValInnerPattern(_.value,he,gt);break;case"AssignmentPattern":this.checkLValPattern(_.left,he,gt);break;case"RestElement":this.checkLValPattern(_.argument,he,gt);break;default:this.checkLValPattern(_,he,gt)}};var Y=function(_,he,gt,jt,wn){this.token=_,this.isExpr=!!he,this.preserveSpace=!!gt,this.override=jt,this.generator=!!wn},ie={b_stat:new Y("{",!1),b_expr:new Y("{",!0),b_tmpl:new Y("${",!1),p_stat:new Y("(",!1),p_expr:new Y("(",!0),q_tmpl:new Y("`",!0,!0,function(_){return _.tryReadTemplateToken()}),f_stat:new Y("function",!1),f_expr:new Y("function",!0),f_expr_gen:new Y("function",!0,!1,null,!0),f_gen:new Y("function",!1,!1,null,!0)},j=t.prototype;j.initialContext=function(){return[ie.b_stat]},j.curContext=function(){return this.context[this.context.length-1]},j.braceIsBlock=function(_){var he=this.curContext();return he===ie.f_expr||he===ie.f_stat?!0:_===He.colon&&(he===ie.b_stat||he===ie.b_expr)?!he.isExpr:_===He._return||_===He.name&&this.exprAllowed?_e.test(this.input.slice(this.lastTokEnd,this.start)):_===He._else||_===He.semi||_===He.eof||_===He.parenR||_===He.arrow?!0:_===He.braceL?he===ie.b_stat:_===He._var||_===He._const||_===He.name?!1:!this.exprAllowed},j.inGeneratorContext=function(){for(var _=this.context.length-1;_>=1;_--){var he=this.context[_];if(he.token==="function")return he.generator}return!1},j.updateContext=function(_){var he,gt=this.type;gt.keyword&&_===He.dot?this.exprAllowed=!1:(he=gt.updateContext)?he.call(this,_):this.exprAllowed=gt.beforeExpr},j.overrideContext=function(_){this.curContext()!==_&&(this.context[this.context.length-1]=_)},He.parenR.updateContext=He.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var _=this.context.pop();_===ie.b_stat&&this.curContext().token==="function"&&(_=this.context.pop()),this.exprAllowed=!_.isExpr},He.braceL.updateContext=function(_){this.context.push(this.braceIsBlock(_)?ie.b_stat:ie.b_expr),this.exprAllowed=!0},He.dollarBraceL.updateContext=function(){this.context.push(ie.b_tmpl),this.exprAllowed=!0},He.parenL.updateContext=function(_){var he=_===He._if||_===He._for||_===He._with||_===He._while;this.context.push(he?ie.p_stat:ie.p_expr),this.exprAllowed=!0},He.incDec.updateContext=function(){},He._function.updateContext=He._class.updateContext=function(_){_.beforeExpr&&_!==He._else&&!(_===He.semi&&this.curContext()!==ie.p_stat)&&!(_===He._return&&_e.test(this.input.slice(this.lastTokEnd,this.start)))&&!((_===He.colon||_===He.braceL)&&this.curContext()===ie.b_stat)?this.context.push(ie.f_expr):this.context.push(ie.f_stat),this.exprAllowed=!1},He.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},He.backQuote.updateContext=function(){this.curContext()===ie.q_tmpl?this.context.pop():this.context.push(ie.q_tmpl),this.exprAllowed=!1},He.star.updateContext=function(_){if(_===He._function){var he=this.context.length-1;this.context[he]===ie.f_expr?this.context[he]=ie.f_expr_gen:this.context[he]=ie.f_gen}this.exprAllowed=!0},He.name.updateContext=function(_){var he=!1;this.options.ecmaVersion>=6&&_!==He.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(he=!0),this.exprAllowed=he};var X=t.prototype;X.checkPropClash=function(_,he,gt){if(!(this.options.ecmaVersion>=9&&_.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(_.computed||_.method||_.shorthand))){var jt=_.key,wn;switch(jt.type){case"Identifier":wn=jt.name;break;case"Literal":wn=String(jt.value);break;default:return}var nr=_.kind;if(this.options.ecmaVersion>=6){wn==="__proto__"&&nr==="init"&&(he.proto&&(gt?gt.doubleProto<0&&(gt.doubleProto=jt.start):this.raiseRecoverable(jt.start,"Redefinition of __proto__ property")),he.proto=!0);return}wn="$"+wn;var l=he[wn];if(l){var f;nr==="init"?f=this.strict&&l.init||l.get||l.set:f=l.init||l[nr],f&&this.raiseRecoverable(jt.start,"Redefinition of property")}else l=he[wn]={init:!1,get:!1,set:!1};l[nr]=!0}},X.parseExpression=function(_,he){var gt=this.start,jt=this.startLoc,wn=this.parseMaybeAssign(_,he);if(this.type===He.comma){var nr=this.startNodeAt(gt,jt);for(nr.expressions=[wn];this.eat(He.comma);)nr.expressions.push(this.parseMaybeAssign(_,he));return this.finishNode(nr,"SequenceExpression")}return wn},X.parseMaybeAssign=function(_,he,gt){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(_);this.exprAllowed=!1}var jt=!1,wn=-1,nr=-1,l=-1;he?(wn=he.parenthesizedAssign,nr=he.trailingComma,l=he.doubleProto,he.parenthesizedAssign=he.trailingComma=-1):(he=new d,jt=!0);var f=this.start,x=this.startLoc;(this.type===He.parenL||this.type===He.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=_==="await");var N=this.parseMaybeConditional(_,he);if(gt&&(N=gt.call(this,N,f,x)),this.type.isAssign){var ge=this.startNodeAt(f,x);return ge.operator=this.value,this.type===He.eq&&(N=this.toAssignable(N,!1,he)),jt||(he.parenthesizedAssign=he.trailingComma=he.doubleProto=-1),he.shorthandAssign>=N.start&&(he.shorthandAssign=-1),this.type===He.eq?this.checkLValPattern(N):this.checkLValSimple(N),ge.left=N,this.next(),ge.right=this.parseMaybeAssign(_),l>-1&&(he.doubleProto=l),this.finishNode(ge,"AssignmentExpression")}else jt&&this.checkExpressionErrors(he,!0);return wn>-1&&(he.parenthesizedAssign=wn),nr>-1&&(he.trailingComma=nr),N},X.parseMaybeConditional=function(_,he){var gt=this.start,jt=this.startLoc,wn=this.parseExprOps(_,he);if(this.checkExpressionErrors(he))return wn;if(this.eat(He.question)){var nr=this.startNodeAt(gt,jt);return nr.test=wn,nr.consequent=this.parseMaybeAssign(),this.expect(He.colon),nr.alternate=this.parseMaybeAssign(_),this.finishNode(nr,"ConditionalExpression")}return wn},X.parseExprOps=function(_,he){var gt=this.start,jt=this.startLoc,wn=this.parseMaybeUnary(he,!1,!1,_);return this.checkExpressionErrors(he)||wn.start===gt&&wn.type==="ArrowFunctionExpression"?wn:this.parseExprOp(wn,gt,jt,-1,_)},X.parseExprOp=function(_,he,gt,jt,wn){var nr=this.type.binop;if(nr!=null&&(!wn||this.type!==He._in)&&nr>jt){var l=this.type===He.logicalOR||this.type===He.logicalAND,f=this.type===He.coalesce;f&&(nr=He.logicalAND.binop);var x=this.value;this.next();var N=this.start,ge=this.startLoc,Oe=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,wn),N,ge,nr,wn),Ht=this.buildBinary(he,gt,_,Oe,x,l||f);return(l&&this.type===He.coalesce||f&&(this.type===He.logicalOR||this.type===He.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Ht,he,gt,jt,wn)}return _},X.buildBinary=function(_,he,gt,jt,wn,nr){jt.type==="PrivateIdentifier"&&this.raise(jt.start,"Private identifier can only be left side of binary expression");var l=this.startNodeAt(_,he);return l.left=gt,l.operator=wn,l.right=jt,this.finishNode(l,nr?"LogicalExpression":"BinaryExpression")},X.parseMaybeUnary=function(_,he,gt,jt){var wn=this.start,nr=this.startLoc,l;if(this.isContextual("await")&&this.canAwait)l=this.parseAwait(jt),he=!0;else if(this.type.prefix){var f=this.startNode(),x=this.type===He.incDec;f.operator=this.value,f.prefix=!0,this.next(),f.argument=this.parseMaybeUnary(null,!0,x,jt),this.checkExpressionErrors(_,!0),x?this.checkLValSimple(f.argument):this.strict&&f.operator==="delete"&&f.argument.type==="Identifier"?this.raiseRecoverable(f.start,"Deleting local variable in strict mode"):f.operator==="delete"&&I(f.argument)?this.raiseRecoverable(f.start,"Private fields can not be deleted"):he=!0,l=this.finishNode(f,x?"UpdateExpression":"UnaryExpression")}else if(!he&&this.type===He.privateId)(jt||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),l=this.parsePrivateIdent(),this.type!==He._in&&this.unexpected();else{if(l=this.parseExprSubscripts(_,jt),this.checkExpressionErrors(_))return l;for(;this.type.postfix&&!this.canInsertSemicolon();){var N=this.startNodeAt(wn,nr);N.operator=this.value,N.prefix=!1,N.argument=l,this.checkLValSimple(l),this.next(),l=this.finishNode(N,"UpdateExpression")}}if(!gt&&this.eat(He.starstar))if(he)this.unexpected(this.lastTokStart);else return this.buildBinary(wn,nr,l,this.parseMaybeUnary(null,!1,!1,jt),"**",!1);else return l};function I(_){return _.type==="MemberExpression"&&_.property.type==="PrivateIdentifier"||_.type==="ChainExpression"&&I(_.expression)}X.parseExprSubscripts=function(_,he){var gt=this.start,jt=this.startLoc,wn=this.parseExprAtom(_,he);if(wn.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return wn;var nr=this.parseSubscripts(wn,gt,jt,!1,he);return _&&nr.type==="MemberExpression"&&(_.parenthesizedAssign>=nr.start&&(_.parenthesizedAssign=-1),_.parenthesizedBind>=nr.start&&(_.parenthesizedBind=-1),_.trailingComma>=nr.start&&(_.trailingComma=-1)),nr},X.parseSubscripts=function(_,he,gt,jt,wn){for(var nr=this.options.ecmaVersion>=8&&_.type==="Identifier"&&_.name==="async"&&this.lastTokEnd===_.end&&!this.canInsertSemicolon()&&_.end-_.start===5&&this.potentialArrowAt===_.start,l=!1;;){var f=this.parseSubscript(_,he,gt,jt,nr,l,wn);if(f.optional&&(l=!0),f===_||f.type==="ArrowFunctionExpression"){if(l){var x=this.startNodeAt(he,gt);x.expression=f,f=this.finishNode(x,"ChainExpression")}return f}_=f}},X.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(He.arrow)},X.parseSubscriptAsyncArrow=function(_,he,gt,jt){return this.parseArrowExpression(this.startNodeAt(_,he),gt,!0,jt)},X.parseSubscript=function(_,he,gt,jt,wn,nr,l){var f=this.options.ecmaVersion>=11,x=f&&this.eat(He.questionDot);jt&&x&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var N=this.eat(He.bracketL);if(N||x&&this.type!==He.parenL&&this.type!==He.backQuote||this.eat(He.dot)){var ge=this.startNodeAt(he,gt);ge.object=_,N?(ge.property=this.parseExpression(),this.expect(He.bracketR)):this.type===He.privateId&&_.type!=="Super"?ge.property=this.parsePrivateIdent():ge.property=this.parseIdent(this.options.allowReserved!=="never"),ge.computed=!!N,f&&(ge.optional=x),_=this.finishNode(ge,"MemberExpression")}else if(!jt&&this.eat(He.parenL)){var Oe=new d,Ht=this.yieldPos,Sn=this.awaitPos,Rn=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var dr=this.parseExprList(He.parenR,this.options.ecmaVersion>=8,!1,Oe);if(wn&&!x&&this.shouldParseAsyncArrow())return this.checkPatternErrors(Oe,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Ht,this.awaitPos=Sn,this.awaitIdentPos=Rn,this.parseSubscriptAsyncArrow(he,gt,dr,l);this.checkExpressionErrors(Oe,!0),this.yieldPos=Ht||this.yieldPos,this.awaitPos=Sn||this.awaitPos,this.awaitIdentPos=Rn||this.awaitIdentPos;var Dr=this.startNodeAt(he,gt);Dr.callee=_,Dr.arguments=dr,f&&(Dr.optional=x),_=this.finishNode(Dr,"CallExpression")}else if(this.type===He.backQuote){(x||nr)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Pr=this.startNodeAt(he,gt);Pr.tag=_,Pr.quasi=this.parseTemplate({isTagged:!0}),_=this.finishNode(Pr,"TaggedTemplateExpression")}return _},X.parseExprAtom=function(_,he,gt){this.type===He.slash&&this.readRegexp();var jt,wn=this.potentialArrowAt===this.start;switch(this.type){case He._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),jt=this.startNode(),this.next(),this.type===He.parenL&&!this.allowDirectSuper&&this.raise(jt.start,"super() call outside constructor of a subclass"),this.type!==He.dot&&this.type!==He.bracketL&&this.type!==He.parenL&&this.unexpected(),this.finishNode(jt,"Super");case He._this:return jt=this.startNode(),this.next(),this.finishNode(jt,"ThisExpression");case He.name:var nr=this.start,l=this.startLoc,f=this.containsEsc,x=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!f&&x.name==="async"&&!this.canInsertSemicolon()&&this.eat(He._function))return this.overrideContext(ie.f_expr),this.parseFunction(this.startNodeAt(nr,l),0,!1,!0,he);if(wn&&!this.canInsertSemicolon()){if(this.eat(He.arrow))return this.parseArrowExpression(this.startNodeAt(nr,l),[x],!1,he);if(this.options.ecmaVersion>=8&&x.name==="async"&&this.type===He.name&&!f&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return x=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(He.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(nr,l),[x],!0,he)}return x;case He.regexp:var N=this.value;return jt=this.parseLiteral(N.value),jt.regex={pattern:N.pattern,flags:N.flags},jt;case He.num:case He.string:return this.parseLiteral(this.value);case He._null:case He._true:case He._false:return jt=this.startNode(),jt.value=this.type===He._null?null:this.type===He._true,jt.raw=this.type.keyword,this.next(),this.finishNode(jt,"Literal");case He.parenL:var ge=this.start,Oe=this.parseParenAndDistinguishExpression(wn,he);return _&&(_.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Oe)&&(_.parenthesizedAssign=ge),_.parenthesizedBind<0&&(_.parenthesizedBind=ge)),Oe;case He.bracketL:return jt=this.startNode(),this.next(),jt.elements=this.parseExprList(He.bracketR,!0,!0,_),this.finishNode(jt,"ArrayExpression");case He.braceL:return this.overrideContext(ie.b_expr),this.parseObj(!1,_);case He._function:return jt=this.startNode(),this.next(),this.parseFunction(jt,0);case He._class:return this.parseClass(this.startNode(),!1);case He._new:return this.parseNew();case He.backQuote:return this.parseTemplate();case He._import:return this.options.ecmaVersion>=11?this.parseExprImport(gt):this.unexpected();default:return this.parseExprAtomDefault()}},X.parseExprAtomDefault=function(){this.unexpected()},X.parseExprImport=function(_){var he=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===He.parenL&&!_)return this.parseDynamicImport(he);if(this.type===He.dot){var gt=this.startNodeAt(he.start,he.loc&&he.loc.start);return gt.name="import",he.meta=this.finishNode(gt,"Identifier"),this.parseImportMeta(he)}else this.unexpected()},X.parseDynamicImport=function(_){if(this.next(),_.source=this.parseMaybeAssign(),!this.eat(He.parenR)){var he=this.start;this.eat(He.comma)&&this.eat(He.parenR)?this.raiseRecoverable(he,"Trailing comma is not allowed in import()"):this.unexpected(he)}return this.finishNode(_,"ImportExpression")},X.parseImportMeta=function(_){this.next();var he=this.containsEsc;return _.property=this.parseIdent(!0),_.property.name!=="meta"&&this.raiseRecoverable(_.property.start,"The only valid meta property for import is 'import.meta'"),he&&this.raiseRecoverable(_.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(_.start,"Cannot use 'import.meta' outside a module"),this.finishNode(_,"MetaProperty")},X.parseLiteral=function(_){var he=this.startNode();return he.value=_,he.raw=this.input.slice(this.start,this.end),he.raw.charCodeAt(he.raw.length-1)===110&&(he.bigint=he.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(he,"Literal")},X.parseParenExpression=function(){this.expect(He.parenL);var _=this.parseExpression();return this.expect(He.parenR),_},X.shouldParseArrow=function(_){return!this.canInsertSemicolon()},X.parseParenAndDistinguishExpression=function(_,he){var gt=this.start,jt=this.startLoc,wn,nr=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var l=this.start,f=this.startLoc,x=[],N=!0,ge=!1,Oe=new d,Ht=this.yieldPos,Sn=this.awaitPos,Rn;for(this.yieldPos=0,this.awaitPos=0;this.type!==He.parenR;)if(N?N=!1:this.expect(He.comma),nr&&this.afterTrailingComma(He.parenR,!0)){ge=!0;break}else if(this.type===He.ellipsis){Rn=this.start,x.push(this.parseParenItem(this.parseRestBinding())),this.type===He.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else x.push(this.parseMaybeAssign(!1,Oe,this.parseParenItem));var dr=this.lastTokEnd,Dr=this.lastTokEndLoc;if(this.expect(He.parenR),_&&this.shouldParseArrow(x)&&this.eat(He.arrow))return this.checkPatternErrors(Oe,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Ht,this.awaitPos=Sn,this.parseParenArrowList(gt,jt,x,he);(!x.length||ge)&&this.unexpected(this.lastTokStart),Rn&&this.unexpected(Rn),this.checkExpressionErrors(Oe,!0),this.yieldPos=Ht||this.yieldPos,this.awaitPos=Sn||this.awaitPos,x.length>1?(wn=this.startNodeAt(l,f),wn.expressions=x,this.finishNodeAt(wn,"SequenceExpression",dr,Dr)):wn=x[0]}else wn=this.parseParenExpression();if(this.options.preserveParens){var Pr=this.startNodeAt(gt,jt);return Pr.expression=wn,this.finishNode(Pr,"ParenthesizedExpression")}else return wn},X.parseParenItem=function(_){return _},X.parseParenArrowList=function(_,he,gt,jt){return this.parseArrowExpression(this.startNodeAt(_,he),gt,!1,jt)};var G=[];X.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var _=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===He.dot){var he=this.startNodeAt(_.start,_.loc&&_.loc.start);he.name="new",_.meta=this.finishNode(he,"Identifier"),this.next();var gt=this.containsEsc;return _.property=this.parseIdent(!0),_.property.name!=="target"&&this.raiseRecoverable(_.property.start,"The only valid meta property for new is 'new.target'"),gt&&this.raiseRecoverable(_.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(_.start,"'new.target' can only be used in functions and class static block"),this.finishNode(_,"MetaProperty")}var jt=this.start,wn=this.startLoc;return _.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),jt,wn,!0,!1),this.eat(He.parenL)?_.arguments=this.parseExprList(He.parenR,this.options.ecmaVersion>=8,!1):_.arguments=G,this.finishNode(_,"NewExpression")},X.parseTemplateElement=function(_){var he=_.isTagged,gt=this.startNode();return this.type===He.invalidTemplate?(he||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),gt.value={raw:this.value,cooked:null}):gt.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),gt.tail=this.type===He.backQuote,this.finishNode(gt,"TemplateElement")},X.parseTemplate=function(_){_===void 0&&(_={});var he=_.isTagged;he===void 0&&(he=!1);var gt=this.startNode();this.next(),gt.expressions=[];var jt=this.parseTemplateElement({isTagged:he});for(gt.quasis=[jt];!jt.tail;)this.type===He.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(He.dollarBraceL),gt.expressions.push(this.parseExpression()),this.expect(He.braceR),gt.quasis.push(jt=this.parseTemplateElement({isTagged:he}));return this.next(),this.finishNode(gt,"TemplateLiteral")},X.isAsyncProp=function(_){return!_.computed&&_.key.type==="Identifier"&&_.key.name==="async"&&(this.type===He.name||this.type===He.num||this.type===He.string||this.type===He.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===He.star)&&!_e.test(this.input.slice(this.lastTokEnd,this.start))},X.parseObj=function(_,he){var gt=this.startNode(),jt=!0,wn={};for(gt.properties=[],this.next();!this.eat(He.braceR);){if(jt)jt=!1;else if(this.expect(He.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(He.braceR))break;var nr=this.parseProperty(_,he);_||this.checkPropClash(nr,wn,he),gt.properties.push(nr)}return this.finishNode(gt,_?"ObjectPattern":"ObjectExpression")},X.parseProperty=function(_,he){var gt=this.startNode(),jt,wn,nr,l;if(this.options.ecmaVersion>=9&&this.eat(He.ellipsis))return _?(gt.argument=this.parseIdent(!1),this.type===He.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(gt,"RestElement")):(gt.argument=this.parseMaybeAssign(!1,he),this.type===He.comma&&he&&he.trailingComma<0&&(he.trailingComma=this.start),this.finishNode(gt,"SpreadElement"));this.options.ecmaVersion>=6&&(gt.method=!1,gt.shorthand=!1,(_||he)&&(nr=this.start,l=this.startLoc),_||(jt=this.eat(He.star)));var f=this.containsEsc;return this.parsePropertyName(gt),!_&&!f&&this.options.ecmaVersion>=8&&!jt&&this.isAsyncProp(gt)?(wn=!0,jt=this.options.ecmaVersion>=9&&this.eat(He.star),this.parsePropertyName(gt)):wn=!1,this.parsePropertyValue(gt,_,jt,wn,nr,l,he,f),this.finishNode(gt,"Property")},X.parseGetterSetter=function(_){_.kind=_.key.name,this.parsePropertyName(_),_.value=this.parseMethod(!1);var he=_.kind==="get"?0:1;if(_.value.params.length!==he){var gt=_.value.start;_.kind==="get"?this.raiseRecoverable(gt,"getter should have no params"):this.raiseRecoverable(gt,"setter should have exactly one param")}else _.kind==="set"&&_.value.params[0].type==="RestElement"&&this.raiseRecoverable(_.value.params[0].start,"Setter cannot use rest params")},X.parsePropertyValue=function(_,he,gt,jt,wn,nr,l,f){(gt||jt)&&this.type===He.colon&&this.unexpected(),this.eat(He.colon)?(_.value=he?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,l),_.kind="init"):this.options.ecmaVersion>=6&&this.type===He.parenL?(he&&this.unexpected(),_.kind="init",_.method=!0,_.value=this.parseMethod(gt,jt)):!he&&!f&&this.options.ecmaVersion>=5&&!_.computed&&_.key.type==="Identifier"&&(_.key.name==="get"||_.key.name==="set")&&this.type!==He.comma&&this.type!==He.braceR&&this.type!==He.eq?((gt||jt)&&this.unexpected(),this.parseGetterSetter(_)):this.options.ecmaVersion>=6&&!_.computed&&_.key.type==="Identifier"?((gt||jt)&&this.unexpected(),this.checkUnreserved(_.key),_.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=wn),_.kind="init",he?_.value=this.parseMaybeDefault(wn,nr,this.copyNode(_.key)):this.type===He.eq&&l?(l.shorthandAssign<0&&(l.shorthandAssign=this.start),_.value=this.parseMaybeDefault(wn,nr,this.copyNode(_.key))):_.value=this.copyNode(_.key),_.shorthand=!0):this.unexpected()},X.parsePropertyName=function(_){if(this.options.ecmaVersion>=6){if(this.eat(He.bracketL))return _.computed=!0,_.key=this.parseMaybeAssign(),this.expect(He.bracketR),_.key;_.computed=!1}return _.key=this.type===He.num||this.type===He.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},X.initFunction=function(_){_.id=null,this.options.ecmaVersion>=6&&(_.generator=_.expression=!1),this.options.ecmaVersion>=8&&(_.async=!1)},X.parseMethod=function(_,he,gt){var jt=this.startNode(),wn=this.yieldPos,nr=this.awaitPos,l=this.awaitIdentPos;return this.initFunction(jt),this.options.ecmaVersion>=6&&(jt.generator=_),this.options.ecmaVersion>=8&&(jt.async=!!he),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(fs(he,jt.generator)|Uo|(gt?so:0)),this.expect(He.parenL),jt.params=this.parseBindingList(He.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(jt,!1,!0,!1),this.yieldPos=wn,this.awaitPos=nr,this.awaitIdentPos=l,this.finishNode(jt,"FunctionExpression")},X.parseArrowExpression=function(_,he,gt,jt){var wn=this.yieldPos,nr=this.awaitPos,l=this.awaitIdentPos;return this.enterScope(fs(gt,!1)|xo),this.initFunction(_),this.options.ecmaVersion>=8&&(_.async=!!gt),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,_.params=this.toAssignableList(he,!0),this.parseFunctionBody(_,!0,!1,jt),this.yieldPos=wn,this.awaitPos=nr,this.awaitIdentPos=l,this.finishNode(_,"ArrowFunctionExpression")},X.parseFunctionBody=function(_,he,gt,jt){var wn=he&&this.type!==He.braceL,nr=this.strict,l=!1;if(wn)_.body=this.parseMaybeAssign(jt),_.expression=!0,this.checkParams(_,!1);else{var f=this.options.ecmaVersion>=7&&!this.isSimpleParamList(_.params);(!nr||f)&&(l=this.strictDirective(this.end),l&&f&&this.raiseRecoverable(_.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var x=this.labels;this.labels=[],l&&(this.strict=!0),this.checkParams(_,!nr&&!l&&!he&&!gt&&this.isSimpleParamList(_.params)),this.strict&&_.id&&this.checkLValSimple(_.id,ar),_.body=this.parseBlock(!1,void 0,l&&!nr),_.expression=!1,this.adaptDirectivePrologue(_.body.body),this.labels=x}this.exitScope()},X.isSimpleParamList=function(_){for(var he=0,gt=_;he<gt.length;he+=1){var jt=gt[he];if(jt.type!=="Identifier")return!1}return!0},X.checkParams=function(_,he){for(var gt=Object.create(null),jt=0,wn=_.params;jt<wn.length;jt+=1){var nr=wn[jt];this.checkLValInnerPattern(nr,di,he?null:gt)}},X.parseExprList=function(_,he,gt,jt){for(var wn=[],nr=!0;!this.eat(_);){if(nr)nr=!1;else if(this.expect(He.comma),he&&this.afterTrailingComma(_))break;var l=void 0;gt&&this.type===He.comma?l=null:this.type===He.ellipsis?(l=this.parseSpread(jt),jt&&this.type===He.comma&&jt.trailingComma<0&&(jt.trailingComma=this.start)):l=this.parseMaybeAssign(!1,jt),wn.push(l)}return wn},X.checkUnreserved=function(_){var he=_.start,gt=_.end,jt=_.name;if(this.inGenerator&&jt==="yield"&&this.raiseRecoverable(he,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&jt==="await"&&this.raiseRecoverable(he,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&jt==="arguments"&&this.raiseRecoverable(he,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(jt==="arguments"||jt==="await")&&this.raise(he,"Cannot use "+jt+" in class static initialization block"),this.keywords.test(jt)&&this.raise(he,"Unexpected keyword '"+jt+"'"),!(this.options.ecmaVersion<6&&this.input.slice(he,gt).indexOf("\\")!==-1)){var wn=this.strict?this.reservedWordsStrict:this.reservedWords;wn.test(jt)&&(!this.inAsync&&jt==="await"&&this.raiseRecoverable(he,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(he,"The keyword '"+jt+"' is reserved"))}},X.parseIdent=function(_){var he=this.parseIdentNode();return this.next(!!_),this.finishNode(he,"Identifier"),_||(this.checkUnreserved(he),he.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=he.start)),he},X.parseIdentNode=function(){var _=this.startNode();return this.type===He.name?_.name=this.value:this.type.keyword?(_.name=this.type.keyword,(_.name==="class"||_.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=He.name):this.unexpected(),_},X.parsePrivateIdent=function(){var _=this.startNode();return this.type===He.privateId?_.name=this.value:this.unexpected(),this.next(),this.finishNode(_,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(_.start,"Private field '#"+_.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(_)),_},X.parseYield=function(_){this.yieldPos||(this.yieldPos=this.start);var he=this.startNode();return this.next(),this.type===He.semi||this.canInsertSemicolon()||this.type!==He.star&&!this.type.startsExpr?(he.delegate=!1,he.argument=null):(he.delegate=this.eat(He.star),he.argument=this.parseMaybeAssign(_)),this.finishNode(he,"YieldExpression")},X.parseAwait=function(_){this.awaitPos||(this.awaitPos=this.start);var he=this.startNode();return this.next(),he.argument=this.parseMaybeUnary(null,!0,!1,_),this.finishNode(he,"AwaitExpression")};var te=t.prototype;te.raise=function(_,he){var gt=da(this.input,_);he+=" ("+gt.line+":"+gt.column+")";var jt=new SyntaxError(he);throw jt.pos=_,jt.loc=gt,jt.raisedAt=this.pos,jt},te.raiseRecoverable=te.raise,te.curPosition=function(){if(this.options.locations)return new Hs(this.curLine,this.pos-this.lineStart)};var pe=t.prototype,oe=function(_){this.flags=_,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};pe.enterScope=function(_){this.scopeStack.push(new oe(_))},pe.exitScope=function(){this.scopeStack.pop()},pe.treatFunctionsAsVarInScope=function(_){return _.flags&Fi||!this.inModule&&_.flags&Ti},pe.declareName=function(_,he,gt){var jt=!1;if(he===Ai){var wn=this.currentScope();jt=wn.lexical.indexOf(_)>-1||wn.functions.indexOf(_)>-1||wn.var.indexOf(_)>-1,wn.lexical.push(_),this.inModule&&wn.flags&Ti&&delete this.undefinedExports[_]}else if(he===bo){var nr=this.currentScope();nr.lexical.push(_)}else if(he===ui){var l=this.currentScope();this.treatFunctionsAsVar?jt=l.lexical.indexOf(_)>-1:jt=l.lexical.indexOf(_)>-1||l.var.indexOf(_)>-1,l.functions.push(_)}else for(var f=this.scopeStack.length-1;f>=0;--f){var x=this.scopeStack[f];if(x.lexical.indexOf(_)>-1&&!(x.flags&Fa&&x.lexical[0]===_)||!this.treatFunctionsAsVarInScope(x)&&x.functions.indexOf(_)>-1){jt=!0;break}if(x.var.push(_),this.inModule&&x.flags&Ti&&delete this.undefinedExports[_],x.flags&ea)break}jt&&this.raiseRecoverable(gt,"Identifier '"+_+"' has already been declared")},pe.checkLocalExport=function(_){this.scopeStack[0].lexical.indexOf(_.name)===-1&&this.scopeStack[0].var.indexOf(_.name)===-1&&(this.undefinedExports[_.name]=_)},pe.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},pe.currentVarScope=function(){for(var _=this.scopeStack.length-1;;_--){var he=this.scopeStack[_];if(he.flags&ea)return he}},pe.currentThisScope=function(){for(var _=this.scopeStack.length-1;;_--){var he=this.scopeStack[_];if(he.flags&ea&&!(he.flags&xo))return he}};var Ee=function(_,he,gt){this.type="",this.start=he,this.end=0,_.options.locations&&(this.loc=new Ns(_,gt)),_.options.directSourceFile&&(this.sourceFile=_.options.directSourceFile),_.options.ranges&&(this.range=[he,0])},$e=t.prototype;$e.startNode=function(){return new Ee(this,this.start,this.startLoc)},$e.startNodeAt=function(_,he){return new Ee(this,_,he)};function Xe(_,he,gt,jt){return _.type=he,_.end=gt,this.options.locations&&(_.loc.end=jt),this.options.ranges&&(_.range[1]=gt),_}$e.finishNode=function(_,he){return Xe.call(this,_,he,this.lastTokEnd,this.lastTokEndLoc)},$e.finishNodeAt=function(_,he,gt,jt){return Xe.call(this,_,he,gt,jt)},$e.copyNode=function(_){var he=new Ee(this,_.start,this.startLoc);for(var gt in _)he[gt]=_[gt];return he};var ft="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ze=ft+" Extended_Pictographic",yt=Ze,Et=yt+" EBase EComp EMod EPres ExtPict",Yt=Et,qt=Yt,ln={9:ft,10:Ze,11:yt,12:Et,13:Yt,14:qt},In="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Zn={9:"",10:"",11:"",12:"",13:"",14:In},Kn="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ur="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",yn=ur+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",An=yn+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",qn=An+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",cr=qn+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",mr=cr+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",Rr={9:ur,10:yn,11:An,12:qn,13:cr,14:mr},Lr={};function Ir(_){var he=Lr[_]={binary:ai(ln[_]+" "+Kn),binaryOfStrings:ai(Zn[_]),nonBinary:{General_Category:ai(Kn),Script:ai(Rr[_])}};he.nonBinary.Script_Extensions=he.nonBinary.Script,he.nonBinary.gc=he.nonBinary.General_Category,he.nonBinary.sc=he.nonBinary.Script,he.nonBinary.scx=he.nonBinary.Script_Extensions}for(var ti=0,Wr=[9,10,11,12,13,14];ti<Wr.length;ti+=1){var ls=Wr[ti];Ir(ls)}var Vr=t.prototype,$i=function(_){this.parser=_,this.validFlags="gim"+(_.options.ecmaVersion>=6?"uy":"")+(_.options.ecmaVersion>=9?"s":"")+(_.options.ecmaVersion>=13?"d":"")+(_.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Lr[_.options.ecmaVersion>=14?14:_.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};$i.prototype.reset=function(_,he,gt){var jt=gt.indexOf("v")!==-1,wn=gt.indexOf("u")!==-1;this.start=_|0,this.source=he+"",this.flags=gt,jt&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=wn&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=wn&&this.parser.options.ecmaVersion>=9)},$i.prototype.raise=function(_){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+_)},$i.prototype.at=function(_,he){he===void 0&&(he=!1);var gt=this.source,jt=gt.length;if(_>=jt)return-1;var wn=gt.charCodeAt(_);if(!(he||this.switchU)||wn<=55295||wn>=57344||_+1>=jt)return wn;var nr=gt.charCodeAt(_+1);return nr>=56320&&nr<=57343?(wn<<10)+nr-56613888:wn},$i.prototype.nextIndex=function(_,he){he===void 0&&(he=!1);var gt=this.source,jt=gt.length;if(_>=jt)return jt;var wn=gt.charCodeAt(_),nr;return!(he||this.switchU)||wn<=55295||wn>=57344||_+1>=jt||(nr=gt.charCodeAt(_+1))<56320||nr>57343?_+1:_+2},$i.prototype.current=function(_){return _===void 0&&(_=!1),this.at(this.pos,_)},$i.prototype.lookahead=function(_){return _===void 0&&(_=!1),this.at(this.nextIndex(this.pos,_),_)},$i.prototype.advance=function(_){_===void 0&&(_=!1),this.pos=this.nextIndex(this.pos,_)},$i.prototype.eat=function(_,he){return he===void 0&&(he=!1),this.current(he)===_?(this.advance(he),!0):!1},$i.prototype.eatChars=function(_,he){he===void 0&&(he=!1);for(var gt=this.pos,jt=0,wn=_;jt<wn.length;jt+=1){var nr=wn[jt],l=this.at(gt,he);if(l===-1||l!==nr)return!1;gt=this.nextIndex(gt,he)}return this.pos=gt,!0},Vr.validateRegExpFlags=function(_){for(var he=_.validFlags,gt=_.flags,jt=!1,wn=!1,nr=0;nr<gt.length;nr++){var l=gt.charAt(nr);he.indexOf(l)===-1&&this.raise(_.start,"Invalid regular expression flag"),gt.indexOf(l,nr+1)>-1&&this.raise(_.start,"Duplicate regular expression flag"),l==="u"&&(jt=!0),l==="v"&&(wn=!0)}this.options.ecmaVersion>=15&&jt&&wn&&this.raise(_.start,"Invalid regular expression flag")},Vr.validateRegExpPattern=function(_){this.regexp_pattern(_),!_.switchN&&this.options.ecmaVersion>=9&&_.groupNames.length>0&&(_.switchN=!0,this.regexp_pattern(_))},Vr.regexp_pattern=function(_){_.pos=0,_.lastIntValue=0,_.lastStringValue="",_.lastAssertionIsQuantifiable=!1,_.numCapturingParens=0,_.maxBackReference=0,_.groupNames.length=0,_.backReferenceNames.length=0,this.regexp_disjunction(_),_.pos!==_.source.length&&(_.eat(41)&&_.raise("Unmatched ')'"),(_.eat(93)||_.eat(125))&&_.raise("Lone quantifier brackets")),_.maxBackReference>_.numCapturingParens&&_.raise("Invalid escape");for(var he=0,gt=_.backReferenceNames;he<gt.length;he+=1){var jt=gt[he];_.groupNames.indexOf(jt)===-1&&_.raise("Invalid named capture referenced")}},Vr.regexp_disjunction=function(_){for(this.regexp_alternative(_);_.eat(124);)this.regexp_alternative(_);this.regexp_eatQuantifier(_,!0)&&_.raise("Nothing to repeat"),_.eat(123)&&_.raise("Lone quantifier brackets")},Vr.regexp_alternative=function(_){for(;_.pos<_.source.length&&this.regexp_eatTerm(_););},Vr.regexp_eatTerm=function(_){return this.regexp_eatAssertion(_)?(_.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(_)&&_.switchU&&_.raise("Invalid quantifier"),!0):(_.switchU?this.regexp_eatAtom(_):this.regexp_eatExtendedAtom(_))?(this.regexp_eatQuantifier(_),!0):!1},Vr.regexp_eatAssertion=function(_){var he=_.pos;if(_.lastAssertionIsQuantifiable=!1,_.eat(94)||_.eat(36))return!0;if(_.eat(92)){if(_.eat(66)||_.eat(98))return!0;_.pos=he}if(_.eat(40)&&_.eat(63)){var gt=!1;if(this.options.ecmaVersion>=9&&(gt=_.eat(60)),_.eat(61)||_.eat(33))return this.regexp_disjunction(_),_.eat(41)||_.raise("Unterminated group"),_.lastAssertionIsQuantifiable=!gt,!0}return _.pos=he,!1},Vr.regexp_eatQuantifier=function(_,he){return he===void 0&&(he=!1),this.regexp_eatQuantifierPrefix(_,he)?(_.eat(63),!0):!1},Vr.regexp_eatQuantifierPrefix=function(_,he){return _.eat(42)||_.eat(43)||_.eat(63)||this.regexp_eatBracedQuantifier(_,he)},Vr.regexp_eatBracedQuantifier=function(_,he){var gt=_.pos;if(_.eat(123)){var jt=0,wn=-1;if(this.regexp_eatDecimalDigits(_)&&(jt=_.lastIntValue,_.eat(44)&&this.regexp_eatDecimalDigits(_)&&(wn=_.lastIntValue),_.eat(125)))return wn!==-1&&wn<jt&&!he&&_.raise("numbers out of order in {} quantifier"),!0;_.switchU&&!he&&_.raise("Incomplete quantifier"),_.pos=gt}return!1},Vr.regexp_eatAtom=function(_){return this.regexp_eatPatternCharacters(_)||_.eat(46)||this.regexp_eatReverseSolidusAtomEscape(_)||this.regexp_eatCharacterClass(_)||this.regexp_eatUncapturingGroup(_)||this.regexp_eatCapturingGroup(_)},Vr.regexp_eatReverseSolidusAtomEscape=function(_){var he=_.pos;if(_.eat(92)){if(this.regexp_eatAtomEscape(_))return!0;_.pos=he}return!1},Vr.regexp_eatUncapturingGroup=function(_){var he=_.pos;if(_.eat(40)){if(_.eat(63)&&_.eat(58)){if(this.regexp_disjunction(_),_.eat(41))return!0;_.raise("Unterminated group")}_.pos=he}return!1},Vr.regexp_eatCapturingGroup=function(_){if(_.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(_):_.current()===63&&_.raise("Invalid group"),this.regexp_disjunction(_),_.eat(41))return _.numCapturingParens+=1,!0;_.raise("Unterminated group")}return!1},Vr.regexp_eatExtendedAtom=function(_){return _.eat(46)||this.regexp_eatReverseSolidusAtomEscape(_)||this.regexp_eatCharacterClass(_)||this.regexp_eatUncapturingGroup(_)||this.regexp_eatCapturingGroup(_)||this.regexp_eatInvalidBracedQuantifier(_)||this.regexp_eatExtendedPatternCharacter(_)},Vr.regexp_eatInvalidBracedQuantifier=function(_){return this.regexp_eatBracedQuantifier(_,!0)&&_.raise("Nothing to repeat"),!1},Vr.regexp_eatSyntaxCharacter=function(_){var he=_.current();return Qi(he)?(_.lastIntValue=he,_.advance(),!0):!1};function Qi(_){return _===36||_>=40&&_<=43||_===46||_===63||_>=91&&_<=94||_>=123&&_<=125}Vr.regexp_eatPatternCharacters=function(_){for(var he=_.pos,gt=0;(gt=_.current())!==-1&&!Qi(gt);)_.advance();return _.pos!==he},Vr.regexp_eatExtendedPatternCharacter=function(_){var he=_.current();return he!==-1&&he!==36&&!(he>=40&&he<=43)&&he!==46&&he!==63&&he!==91&&he!==94&&he!==124?(_.advance(),!0):!1},Vr.regexp_groupSpecifier=function(_){if(_.eat(63)){if(this.regexp_eatGroupName(_)){_.groupNames.indexOf(_.lastStringValue)!==-1&&_.raise("Duplicate capture group name"),_.groupNames.push(_.lastStringValue);return}_.raise("Invalid group")}},Vr.regexp_eatGroupName=function(_){if(_.lastStringValue="",_.eat(60)){if(this.regexp_eatRegExpIdentifierName(_)&&_.eat(62))return!0;_.raise("Invalid capture group name")}return!1},Vr.regexp_eatRegExpIdentifierName=function(_){if(_.lastStringValue="",this.regexp_eatRegExpIdentifierStart(_)){for(_.lastStringValue+=hs(_.lastIntValue);this.regexp_eatRegExpIdentifierPart(_);)_.lastStringValue+=hs(_.lastIntValue);return!0}return!1},Vr.regexp_eatRegExpIdentifierStart=function(_){var he=_.pos,gt=this.options.ecmaVersion>=11,jt=_.current(gt);return _.advance(gt),jt===92&&this.regexp_eatRegExpUnicodeEscapeSequence(_,gt)&&(jt=_.lastIntValue),Oi(jt)?(_.lastIntValue=jt,!0):(_.pos=he,!1)};function Oi(_){return mt(_,!0)||_===36||_===95}Vr.regexp_eatRegExpIdentifierPart=function(_){var he=_.pos,gt=this.options.ecmaVersion>=11,jt=_.current(gt);return _.advance(gt),jt===92&&this.regexp_eatRegExpUnicodeEscapeSequence(_,gt)&&(jt=_.lastIntValue),Bi(jt)?(_.lastIntValue=jt,!0):(_.pos=he,!1)};function Bi(_){return nt(_,!0)||_===36||_===95||_===8204||_===8205}Vr.regexp_eatAtomEscape=function(_){return this.regexp_eatBackReference(_)||this.regexp_eatCharacterClassEscape(_)||this.regexp_eatCharacterEscape(_)||_.switchN&&this.regexp_eatKGroupName(_)?!0:(_.switchU&&(_.current()===99&&_.raise("Invalid unicode escape"),_.raise("Invalid escape")),!1)},Vr.regexp_eatBackReference=function(_){var he=_.pos;if(this.regexp_eatDecimalEscape(_)){var gt=_.lastIntValue;if(_.switchU)return gt>_.maxBackReference&&(_.maxBackReference=gt),!0;if(gt<=_.numCapturingParens)return!0;_.pos=he}return!1},Vr.regexp_eatKGroupName=function(_){if(_.eat(107)){if(this.regexp_eatGroupName(_))return _.backReferenceNames.push(_.lastStringValue),!0;_.raise("Invalid named reference")}return!1},Vr.regexp_eatCharacterEscape=function(_){return this.regexp_eatControlEscape(_)||this.regexp_eatCControlLetter(_)||this.regexp_eatZero(_)||this.regexp_eatHexEscapeSequence(_)||this.regexp_eatRegExpUnicodeEscapeSequence(_,!1)||!_.switchU&&this.regexp_eatLegacyOctalEscapeSequence(_)||this.regexp_eatIdentityEscape(_)},Vr.regexp_eatCControlLetter=function(_){var he=_.pos;if(_.eat(99)){if(this.regexp_eatControlLetter(_))return!0;_.pos=he}return!1},Vr.regexp_eatZero=function(_){return _.current()===48&&!il(_.lookahead())?(_.lastIntValue=0,_.advance(),!0):!1},Vr.regexp_eatControlEscape=function(_){var he=_.current();return he===116?(_.lastIntValue=9,_.advance(),!0):he===110?(_.lastIntValue=10,_.advance(),!0):he===118?(_.lastIntValue=11,_.advance(),!0):he===102?(_.lastIntValue=12,_.advance(),!0):he===114?(_.lastIntValue=13,_.advance(),!0):!1},Vr.regexp_eatControlLetter=function(_){var he=_.current();return ys(he)?(_.lastIntValue=he%32,_.advance(),!0):!1};function ys(_){return _>=65&&_<=90||_>=97&&_<=122}Vr.regexp_eatRegExpUnicodeEscapeSequence=function(_,he){he===void 0&&(he=!1);var gt=_.pos,jt=he||_.switchU;if(_.eat(117)){if(this.regexp_eatFixedHexDigits(_,4)){var wn=_.lastIntValue;if(jt&&wn>=55296&&wn<=56319){var nr=_.pos;if(_.eat(92)&&_.eat(117)&&this.regexp_eatFixedHexDigits(_,4)){var l=_.lastIntValue;if(l>=56320&&l<=57343)return _.lastIntValue=(wn-55296)*1024+(l-56320)+65536,!0}_.pos=nr,_.lastIntValue=wn}return!0}if(jt&&_.eat(123)&&this.regexp_eatHexDigits(_)&&_.eat(125)&&ns(_.lastIntValue))return!0;jt&&_.raise("Invalid unicode escape"),_.pos=gt}return!1};function ns(_){return _>=0&&_<=1114111}Vr.regexp_eatIdentityEscape=function(_){if(_.switchU)return this.regexp_eatSyntaxCharacter(_)?!0:_.eat(47)?(_.lastIntValue=47,!0):!1;var he=_.current();return he!==99&&(!_.switchN||he!==107)?(_.lastIntValue=he,_.advance(),!0):!1},Vr.regexp_eatDecimalEscape=function(_){_.lastIntValue=0;var he=_.current();if(he>=49&&he<=57){do _.lastIntValue=10*_.lastIntValue+(he-48),_.advance();while((he=_.current())>=48&&he<=57);return!0}return!1};var As=0,rs=1,Ji=2;Vr.regexp_eatCharacterClassEscape=function(_){var he=_.current();if(Fs(he))return _.lastIntValue=-1,_.advance(),rs;var gt=!1;if(_.switchU&&this.options.ecmaVersion>=9&&((gt=he===80)||he===112)){_.lastIntValue=-1,_.advance();var jt;if(_.eat(123)&&(jt=this.regexp_eatUnicodePropertyValueExpression(_))&&_.eat(125))return gt&&jt===Ji&&_.raise("Invalid property name"),jt;_.raise("Invalid property name")}return As};function Fs(_){return _===100||_===68||_===115||_===83||_===119||_===87}Vr.regexp_eatUnicodePropertyValueExpression=function(_){var he=_.pos;if(this.regexp_eatUnicodePropertyName(_)&&_.eat(61)){var gt=_.lastStringValue;if(this.regexp_eatUnicodePropertyValue(_)){var jt=_.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(_,gt,jt),rs}}if(_.pos=he,this.regexp_eatLoneUnicodePropertyNameOrValue(_)){var wn=_.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(_,wn)}return As},Vr.regexp_validateUnicodePropertyNameAndValue=function(_,he,gt){Fn(_.unicodeProperties.nonBinary,he)||_.raise("Invalid property name"),_.unicodeProperties.nonBinary[he].test(gt)||_.raise("Invalid property value")},Vr.regexp_validateUnicodePropertyNameOrValue=function(_,he){if(_.unicodeProperties.binary.test(he))return rs;if(_.switchV&&_.unicodeProperties.binaryOfStrings.test(he))return Ji;_.raise("Invalid property name")},Vr.regexp_eatUnicodePropertyName=function(_){var he=0;for(_.lastStringValue="";Is(he=_.current());)_.lastStringValue+=hs(he),_.advance();return _.lastStringValue!==""};function Is(_){return ys(_)||_===95}Vr.regexp_eatUnicodePropertyValue=function(_){var he=0;for(_.lastStringValue="";Ws(he=_.current());)_.lastStringValue+=hs(he),_.advance();return _.lastStringValue!==""};function Ws(_){return Is(_)||il(_)}Vr.regexp_eatLoneUnicodePropertyNameOrValue=function(_){return this.regexp_eatUnicodePropertyValue(_)},Vr.regexp_eatCharacterClass=function(_){if(_.eat(91)){var he=_.eat(94),gt=this.regexp_classContents(_);return _.eat(93)||_.raise("Unterminated character class"),he&&gt===Ji&&_.raise("Negated character class may contain strings"),!0}return!1},Vr.regexp_classContents=function(_){return _.current()===93?rs:_.switchV?this.regexp_classSetExpression(_):(this.regexp_nonEmptyClassRanges(_),rs)},Vr.regexp_nonEmptyClassRanges=function(_){for(;this.regexp_eatClassAtom(_);){var he=_.lastIntValue;if(_.eat(45)&&this.regexp_eatClassAtom(_)){var gt=_.lastIntValue;_.switchU&&(he===-1||gt===-1)&&_.raise("Invalid character class"),he!==-1&&gt!==-1&&he>gt&&_.raise("Range out of order in character class")}}},Vr.regexp_eatClassAtom=function(_){var he=_.pos;if(_.eat(92)){if(this.regexp_eatClassEscape(_))return!0;if(_.switchU){var gt=_.current();(gt===99||Ya(gt))&&_.raise("Invalid class escape"),_.raise("Invalid escape")}_.pos=he}var jt=_.current();return jt!==93?(_.lastIntValue=jt,_.advance(),!0):!1},Vr.regexp_eatClassEscape=function(_){var he=_.pos;if(_.eat(98))return _.lastIntValue=8,!0;if(_.switchU&&_.eat(45))return _.lastIntValue=45,!0;if(!_.switchU&&_.eat(99)){if(this.regexp_eatClassControlLetter(_))return!0;_.pos=he}return this.regexp_eatCharacterClassEscape(_)||this.regexp_eatCharacterEscape(_)},Vr.regexp_classSetExpression=function(_){var he=rs,gt;if(!this.regexp_eatClassSetRange(_))if(gt=this.regexp_eatClassSetOperand(_)){gt===Ji&&(he=Ji);for(var jt=_.pos;_.eatChars([38,38]);){if(_.current()!==38&&(gt=this.regexp_eatClassSetOperand(_))){gt!==Ji&&(he=rs);continue}_.raise("Invalid character in character class")}if(jt!==_.pos)return he;for(;_.eatChars([45,45]);)this.regexp_eatClassSetOperand(_)||_.raise("Invalid character in character class");if(jt!==_.pos)return he}else _.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(_)){if(gt=this.regexp_eatClassSetOperand(_),!gt)return he;gt===Ji&&(he=Ji)}},Vr.regexp_eatClassSetRange=function(_){var he=_.pos;if(this.regexp_eatClassSetCharacter(_)){var gt=_.lastIntValue;if(_.eat(45)&&this.regexp_eatClassSetCharacter(_)){var jt=_.lastIntValue;return gt!==-1&&jt!==-1&&gt>jt&&_.raise("Range out of order in character class"),!0}_.pos=he}return!1},Vr.regexp_eatClassSetOperand=function(_){return this.regexp_eatClassSetCharacter(_)?rs:this.regexp_eatClassStringDisjunction(_)||this.regexp_eatNestedClass(_)},Vr.regexp_eatNestedClass=function(_){var he=_.pos;if(_.eat(91)){var gt=_.eat(94),jt=this.regexp_classContents(_);if(_.eat(93))return gt&&jt===Ji&&_.raise("Negated character class may contain strings"),jt;_.pos=he}if(_.eat(92)){var wn=this.regexp_eatCharacterClassEscape(_);if(wn)return wn;_.pos=he}return null},Vr.regexp_eatClassStringDisjunction=function(_){var he=_.pos;if(_.eatChars([92,113])){if(_.eat(123)){var gt=this.regexp_classStringDisjunctionContents(_);if(_.eat(125))return gt}else _.raise("Invalid escape");_.pos=he}return null},Vr.regexp_classStringDisjunctionContents=function(_){for(var he=this.regexp_classString(_);_.eat(124);)this.regexp_classString(_)===Ji&&(he=Ji);return he},Vr.regexp_classString=function(_){for(var he=0;this.regexp_eatClassSetCharacter(_);)he++;return he===1?rs:Ji},Vr.regexp_eatClassSetCharacter=function(_){var he=_.pos;if(_.eat(92))return this.regexp_eatCharacterEscape(_)||this.regexp_eatClassSetReservedPunctuator(_)?!0:_.eat(98)?(_.lastIntValue=8,!0):(_.pos=he,!1);var gt=_.current();return gt<0||gt===_.lookahead()&&Ca(gt)||ta(gt)?!1:(_.advance(),_.lastIntValue=gt,!0)};function Ca(_){return _===33||_>=35&&_<=38||_>=42&&_<=44||_===46||_>=58&&_<=64||_===94||_===96||_===126}function ta(_){return _===40||_===41||_===45||_===47||_>=91&&_<=93||_>=123&&_<=125}Vr.regexp_eatClassSetReservedPunctuator=function(_){var he=_.current();return Po(he)?(_.lastIntValue=he,_.advance(),!0):!1};function Po(_){return _===33||_===35||_===37||_===38||_===44||_===45||_>=58&&_<=62||_===64||_===96||_===126}Vr.regexp_eatClassControlLetter=function(_){var he=_.current();return il(he)||he===95?(_.lastIntValue=he%32,_.advance(),!0):!1},Vr.regexp_eatHexEscapeSequence=function(_){var he=_.pos;if(_.eat(120)){if(this.regexp_eatFixedHexDigits(_,2))return!0;_.switchU&&_.raise("Invalid escape"),_.pos=he}return!1},Vr.regexp_eatDecimalDigits=function(_){var he=_.pos,gt=0;for(_.lastIntValue=0;il(gt=_.current());)_.lastIntValue=10*_.lastIntValue+(gt-48),_.advance();return _.pos!==he};function il(_){return _>=48&&_<=57}Vr.regexp_eatHexDigits=function(_){var he=_.pos,gt=0;for(_.lastIntValue=0;Oo(gt=_.current());)_.lastIntValue=16*_.lastIntValue+sl(gt),_.advance();return _.pos!==he};function Oo(_){return _>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102}function sl(_){return _>=65&&_<=70?10+(_-65):_>=97&&_<=102?10+(_-97):_-48}Vr.regexp_eatLegacyOctalEscapeSequence=function(_){if(this.regexp_eatOctalDigit(_)){var he=_.lastIntValue;if(this.regexp_eatOctalDigit(_)){var gt=_.lastIntValue;he<=3&&this.regexp_eatOctalDigit(_)?_.lastIntValue=he*64+gt*8+_.lastIntValue:_.lastIntValue=he*8+gt}else _.lastIntValue=he;return!0}return!1},Vr.regexp_eatOctalDigit=function(_){var he=_.current();return Ya(he)?(_.lastIntValue=he-48,_.advance(),!0):(_.lastIntValue=0,!1)};function Ya(_){return _>=48&&_<=55}Vr.regexp_eatFixedHexDigits=function(_,he){var gt=_.pos;_.lastIntValue=0;for(var jt=0;jt<he;++jt){var wn=_.current();if(!Oo(wn))return _.pos=gt,!1;_.lastIntValue=16*_.lastIntValue+sl(wn),_.advance()}return!0};var al=function(_){this.type=_.type,this.value=_.value,this.start=_.start,this.end=_.end,_.options.locations&&(this.loc=new Ns(_,_.startLoc,_.endLoc)),_.options.ranges&&(this.range=[_.start,_.end])},Vi=t.prototype;Vi.next=function(_){!_&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new al(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Vi.getToken=function(){return this.next(),new al(this)},typeof Symbol<"u"&&(Vi[Symbol.iterator]=function(){var _=this;return{next:function(){var he=_.getToken();return{done:he.type===He.eof,value:he}}}}),Vi.nextToken=function(){var _=this.curContext();if((!_||!_.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(He.eof);if(_.override)return _.override(this);this.readToken(this.fullCharCodeAtPos())},Vi.readToken=function(_){return mt(_,this.options.ecmaVersion>=6)||_===92?this.readWord():this.getTokenFromCode(_)},Vi.fullCharCodeAtPos=function(){var _=this.input.charCodeAt(this.pos);if(_<=55295||_>=56320)return _;var he=this.input.charCodeAt(this.pos+1);return he<=56319||he>=57344?_:(_<<10)+he-56613888},Vi.skipBlockComment=function(){var _=this.options.onComment&&this.curPosition(),he=this.pos,gt=this.input.indexOf("*/",this.pos+=2);if(gt===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=gt+2,this.options.locations)for(var jt=void 0,wn=he;(jt=Kr(this.input,wn,this.pos))>-1;)++this.curLine,wn=this.lineStart=jt;this.options.onComment&&this.options.onComment(!0,this.input.slice(he+2,gt),he,this.pos,_,this.curPosition())},Vi.skipLineComment=function(_){for(var he=this.pos,gt=this.options.onComment&&this.curPosition(),jt=this.input.charCodeAt(this.pos+=_);this.pos<this.input.length&&!On(jt);)jt=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(he+_,this.pos),he,this.pos,gt,this.curPosition())},Vi.skipSpace=function(){e:for(;this.pos<this.input.length;){var _=this.input.charCodeAt(this.pos);switch(_){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(_>8&&_<14||_>=5760&&Mi.test(String.fromCharCode(_)))++this.pos;else break e}}},Vi.finishToken=function(_,he){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var gt=this.type;this.type=_,this.value=he,this.updateContext(gt)},Vi.readToken_dot=function(){var _=this.input.charCodeAt(this.pos+1);if(_>=48&&_<=57)return this.readNumber(!0);var he=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&_===46&&he===46?(this.pos+=3,this.finishToken(He.ellipsis)):(++this.pos,this.finishToken(He.dot))},Vi.readToken_slash=function(){var _=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):_===61?this.finishOp(He.assign,2):this.finishOp(He.slash,1)},Vi.readToken_mult_modulo_exp=function(_){var he=this.input.charCodeAt(this.pos+1),gt=1,jt=_===42?He.star:He.modulo;return this.options.ecmaVersion>=7&&_===42&&he===42&&(++gt,jt=He.starstar,he=this.input.charCodeAt(this.pos+2)),he===61?this.finishOp(He.assign,gt+1):this.finishOp(jt,gt)},Vi.readToken_pipe_amp=function(_){var he=this.input.charCodeAt(this.pos+1);if(he===_){if(this.options.ecmaVersion>=12){var gt=this.input.charCodeAt(this.pos+2);if(gt===61)return this.finishOp(He.assign,3)}return this.finishOp(_===124?He.logicalOR:He.logicalAND,2)}return he===61?this.finishOp(He.assign,2):this.finishOp(_===124?He.bitwiseOR:He.bitwiseAND,1)},Vi.readToken_caret=function(){var _=this.input.charCodeAt(this.pos+1);return _===61?this.finishOp(He.assign,2):this.finishOp(He.bitwiseXOR,1)},Vi.readToken_plus_min=function(_){var he=this.input.charCodeAt(this.pos+1);return he===_?he===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||_e.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(He.incDec,2):he===61?this.finishOp(He.assign,2):this.finishOp(He.plusMin,1)},Vi.readToken_lt_gt=function(_){var he=this.input.charCodeAt(this.pos+1),gt=1;return he===_?(gt=_===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+gt)===61?this.finishOp(He.assign,gt+1):this.finishOp(He.bitShift,gt)):he===33&&_===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(he===61&&(gt=2),this.finishOp(He.relational,gt))},Vi.readToken_eq_excl=function(_){var he=this.input.charCodeAt(this.pos+1);return he===61?this.finishOp(He.equality,this.input.charCodeAt(this.pos+2)===61?3:2):_===61&&he===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(He.arrow)):this.finishOp(_===61?He.eq:He.prefix,1)},Vi.readToken_question=function(){var _=this.options.ecmaVersion;if(_>=11){var he=this.input.charCodeAt(this.pos+1);if(he===46){var gt=this.input.charCodeAt(this.pos+2);if(gt<48||gt>57)return this.finishOp(He.questionDot,2)}if(he===63){if(_>=12){var jt=this.input.charCodeAt(this.pos+2);if(jt===61)return this.finishOp(He.assign,3)}return this.finishOp(He.coalesce,2)}}return this.finishOp(He.question,1)},Vi.readToken_numberSign=function(){var _=this.options.ecmaVersion,he=35;if(_>=13&&(++this.pos,he=this.fullCharCodeAtPos(),mt(he,!0)||he===92))return this.finishToken(He.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+hs(he)+"'")},Vi.getTokenFromCode=function(_){switch(_){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(He.parenL);case 41:return++this.pos,this.finishToken(He.parenR);case 59:return++this.pos,this.finishToken(He.semi);case 44:return++this.pos,this.finishToken(He.comma);case 91:return++this.pos,this.finishToken(He.bracketL);case 93:return++this.pos,this.finishToken(He.bracketR);case 123:return++this.pos,this.finishToken(He.braceL);case 125:return++this.pos,this.finishToken(He.braceR);case 58:return++this.pos,this.finishToken(He.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(He.backQuote);case 48:var he=this.input.charCodeAt(this.pos+1);if(he===120||he===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(he===111||he===79)return this.readRadixNumber(8);if(he===98||he===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(_);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(_);case 124:case 38:return this.readToken_pipe_amp(_);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(_);case 60:case 62:return this.readToken_lt_gt(_);case 61:case 33:return this.readToken_eq_excl(_);case 63:return this.readToken_question();case 126:return this.finishOp(He.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+hs(_)+"'")},Vi.finishOp=function(_,he){var gt=this.input.slice(this.pos,this.pos+he);return this.pos+=he,this.finishToken(_,gt)},Vi.readRegexp=function(){for(var _,he,gt=this.pos;;){this.pos>=this.input.length&&this.raise(gt,"Unterminated regular expression");var jt=this.input.charAt(this.pos);if(_e.test(jt)&&this.raise(gt,"Unterminated regular expression"),_)_=!1;else{if(jt==="[")he=!0;else if(jt==="]"&&he)he=!1;else if(jt==="/"&&!he)break;_=jt==="\\"}++this.pos}var wn=this.input.slice(gt,this.pos);++this.pos;var nr=this.pos,l=this.readWord1();this.containsEsc&&this.unexpected(nr);var f=this.regexpState||(this.regexpState=new $i(this));f.reset(gt,wn,l),this.validateRegExpFlags(f),this.validateRegExpPattern(f);var x=null;try{x=new RegExp(wn,l)}catch{}return this.finishToken(He.regexp,{pattern:wn,flags:l,value:x})},Vi.readInt=function(_,he,gt){for(var jt=this.options.ecmaVersion>=12&&he===void 0,wn=gt&&this.input.charCodeAt(this.pos)===48,nr=this.pos,l=0,f=0,x=0,N=he??1/0;x<N;++x,++this.pos){var ge=this.input.charCodeAt(this.pos),Oe=void 0;if(jt&&ge===95){wn&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),f===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),x===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),f=ge;continue}if(ge>=97?Oe=ge-97+10:ge>=65?Oe=ge-65+10:ge>=48&&ge<=57?Oe=ge-48:Oe=1/0,Oe>=_)break;f=ge,l=l*_+Oe}return jt&&f===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===nr||he!=null&&this.pos-nr!==he?null:l};function Ll(_,he){return he?parseInt(_,8):parseFloat(_.replace(/_/g,""))}function po(_){return typeof BigInt!="function"?null:BigInt(_.replace(/_/g,""))}Vi.readRadixNumber=function(_){var he=this.pos;this.pos+=2;var gt=this.readInt(_);return gt==null&&this.raise(this.start+2,"Expected number in radix "+_),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(gt=po(this.input.slice(he,this.pos)),++this.pos):mt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(He.num,gt)},Vi.readNumber=function(_){var he=this.pos;!_&&this.readInt(10,void 0,!0)===null&&this.raise(he,"Invalid number");var gt=this.pos-he>=2&&this.input.charCodeAt(he)===48;gt&&this.strict&&this.raise(he,"Invalid number");var jt=this.input.charCodeAt(this.pos);if(!gt&&!_&&this.options.ecmaVersion>=11&&jt===110){var wn=po(this.input.slice(he,this.pos));return++this.pos,mt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(He.num,wn)}gt&&/[89]/.test(this.input.slice(he,this.pos))&&(gt=!1),jt===46&&!gt&&(++this.pos,this.readInt(10),jt=this.input.charCodeAt(this.pos)),(jt===69||jt===101)&&!gt&&(jt=this.input.charCodeAt(++this.pos),(jt===43||jt===45)&&++this.pos,this.readInt(10)===null&&this.raise(he,"Invalid number")),mt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var nr=Ll(this.input.slice(he,this.pos),gt);return this.finishToken(He.num,nr)},Vi.readCodePoint=function(){var _=this.input.charCodeAt(this.pos),he;if(_===123){this.options.ecmaVersion<6&&this.unexpected();var gt=++this.pos;he=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,he>1114111&&this.invalidStringToken(gt,"Code point out of bounds")}else he=this.readHexChar(4);return he},Vi.readString=function(_){for(var he="",gt=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var jt=this.input.charCodeAt(this.pos);if(jt===_)break;jt===92?(he+=this.input.slice(gt,this.pos),he+=this.readEscapedChar(!1),gt=this.pos):jt===8232||jt===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(On(jt)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return he+=this.input.slice(gt,this.pos++),this.finishToken(He.string,he)};var Za={};Vi.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(_){if(_===Za)this.readInvalidTemplateToken();else throw _}this.inTemplateElement=!1},Vi.invalidStringToken=function(_,he){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Za;this.raise(_,he)},Vi.readTmplToken=function(){for(var _="",he=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var gt=this.input.charCodeAt(this.pos);if(gt===96||gt===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===He.template||this.type===He.invalidTemplate)?gt===36?(this.pos+=2,this.finishToken(He.dollarBraceL)):(++this.pos,this.finishToken(He.backQuote)):(_+=this.input.slice(he,this.pos),this.finishToken(He.template,_));if(gt===92)_+=this.input.slice(he,this.pos),_+=this.readEscapedChar(!0),he=this.pos;else if(On(gt)){switch(_+=this.input.slice(he,this.pos),++this.pos,gt){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:_+=`
`;break;default:_+=String.fromCharCode(gt);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),he=this.pos}else++this.pos}},Vi.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(He.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Vi.readEscapedChar=function(_){var he=this.input.charCodeAt(++this.pos);switch(++this.pos,he){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return hs(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),_){var gt=this.pos-1;this.invalidStringToken(gt,"Invalid escape sequence in template string")}default:if(he>=48&&he<=55){var jt=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],wn=parseInt(jt,8);return wn>255&&(jt=jt.slice(0,-1),wn=parseInt(jt,8)),this.pos+=jt.length-1,he=this.input.charCodeAt(this.pos),(jt!=="0"||he===56||he===57)&&(this.strict||_)&&this.invalidStringToken(this.pos-1-jt.length,_?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(wn)}return On(he)?"":String.fromCharCode(he)}},Vi.readHexChar=function(_){var he=this.pos,gt=this.readInt(16,_);return gt===null&&this.invalidStringToken(he,"Bad character escape sequence"),gt},Vi.readWord1=function(){this.containsEsc=!1;for(var _="",he=!0,gt=this.pos,jt=this.options.ecmaVersion>=6;this.pos<this.input.length;){var wn=this.fullCharCodeAtPos();if(nt(wn,jt))this.pos+=wn<=65535?1:2;else if(wn===92){this.containsEsc=!0,_+=this.input.slice(gt,this.pos);var nr=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var l=this.readCodePoint();(he?mt:nt)(l,jt)||this.invalidStringToken(nr,"Invalid Unicode escape"),_+=hs(l),gt=this.pos}else break;he=!1}return _+this.input.slice(gt,this.pos)},Vi.readWord=function(){var _=this.readWord1(),he=He.name;return this.keywords.test(_)&&(he=an[_]),this.finishToken(he,_)};var ga="8.11.3";t.acorn={Parser:t,version:ga,defaultOptions:Zi,Position:Hs,SourceLocation:Ns,getLineInfo:da,Node:Ee,TokenType:tn,tokTypes:He,keywordTypes:an,TokContext:Y,tokContexts:ie,isIdentifierChar:nt,isIdentifierStart:mt,Token:al,isNewLine:On,lineBreak:_e,lineBreakG:Sr,nonASCIIwhitespace:Mi};function $a(_,he){return t.parse(_,he)}function oa(_,he,gt){return t.parseExpressionAt(_,he,gt)}function Zs(_,he){return t.tokenizer(_,he)}n.Node=Ee,n.Parser=t,n.Position=Hs,n.SourceLocation=Ns,n.TokContext=Y,n.Token=al,n.TokenType=tn,n.defaultOptions=Zi,n.getLineInfo=da,n.isIdentifierChar=nt,n.isIdentifierStart=mt,n.isNewLine=On,n.keywordTypes=an,n.lineBreak=_e,n.lineBreakG=Sr,n.nonASCIIwhitespace=Mi,n.parse=$a,n.parseExpressionAt=oa,n.tokContexts=ie,n.tokTypes=He,n.tokenizer=Zs,n.version=ga})}(zh,zh.exports)),zh.exports}/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(y){(function(e,n){e=e||Fh;var s=e.window,c=e.document,u=new function(){var t=/^(statics|enumerable|beans|preserve)$/,i=[],o=i.slice,h=Object.create,d=Object.getOwnPropertyDescriptor,v=Object.defineProperty,D=i.forEach||function(z,R){for(var J=0,Y=this.length;J<Y;J++)z.call(R,this[J],J,this)},A=function(z,R){for(var J in this)this.hasOwnProperty(J)&&z.call(R,this[J],J,this)},T=Object.assign||function(z){for(var R=1,J=arguments.length;R<J;R++){var Y=arguments[R];for(var ie in Y)Y.hasOwnProperty(ie)&&(z[ie]=Y[ie])}return z},P=function(z,R,J){if(z){var Y=d(z,"length");(Y&&typeof Y.value=="number"?D:A).call(z,R,J=J||z)}return J};function F(z,R,J,Y,ie){var j={};function X(oe,Ee){Ee=Ee||(Ee=d(R,oe))&&(Ee.get?Ee:Ee.value),typeof Ee=="string"&&Ee[0]==="#"&&(Ee=z[Ee.substring(1)]||Ee);var $e=typeof Ee=="function",Xe=Ee,ft=ie||$e&&!Ee.base?Ee&&Ee.get?oe in z:z[oe]:null,Ze;(!ie||!ft)&&($e&&ft&&(Ee.base=ft),$e&&Y!==!1&&(Ze=oe.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(j[Ze[3].toLowerCase()+Ze[4]]=Ze[2]),(!Xe||$e||!Xe.get||typeof Xe.get!="function"||!V.isPlainObject(Xe))&&(Xe={value:Xe,writable:!0}),(d(z,oe)||{configurable:!0}).configurable&&(Xe.configurable=!0,Xe.enumerable=J??!Ze),v(z,oe,Xe))}if(R){for(var I in R)R.hasOwnProperty(I)&&!t.test(I)&&X(I);for(var I in j){var G=j[I],te=z["set"+G],pe=z["get"+G]||te&&z["is"+G];pe&&(Y===!0||pe.length===0)&&X(I,{get:pe,set:te})}}return z}function V(){for(var z=0,R=arguments.length;z<R;z++){var J=arguments[z];J&&T(this,J)}return this}return F(V,{inject:function(z){if(z){var R=z.statics===!0?z:z.statics,J=z.beans,Y=z.preserve;R!==z&&F(this.prototype,z,z.enumerable,J,Y),F(this,R,null,J,Y)}for(var ie=1,j=arguments.length;ie<j;ie++)this.inject(arguments[ie]);return this},extend:function(){for(var z=this,R,J,Y=0,ie,j=arguments.length;Y<j&&!(R&&J);Y++)ie=arguments[Y],R=R||ie.initialize,J=J||ie.prototype;return R=R||function(){z.apply(this,arguments)},J=R.prototype=J||h(this.prototype),v(J,"constructor",{value:R,writable:!0,configurable:!0}),F(R,this),arguments.length&&this.inject.apply(R,arguments),R.base=z,R}}).inject({enumerable:!1,initialize:V,set:V,inject:function(){for(var z=0,R=arguments.length;z<R;z++){var J=arguments[z];J&&F(this,J,J.enumerable,J.beans,J.preserve)}return this},extend:function(){var z=h(this);return z.inject.apply(z,arguments)},each:function(z,R){return P(this,z,R)},clone:function(){return new this.constructor(this)},statics:{set:T,each:P,create:h,define:v,describe:d,clone:function(z){return T(new z.constructor,z)},isPlainObject:function(z){var R=z!=null&&z.constructor;return R&&(R===Object||R===V||R.name==="Object")},pick:function(z,R){return z!==n?z:R},slice:function(z,R,J){return o.call(z,R,J)}}})};y.exports=u,u.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+u.each(this,function(t,i){if(!/^_/.test(i)){var o=typeof t;this.push(i+": "+(o==="number"?ve.instance.number(t):o==="string"?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return u.importJSON(t,this)},exportJSON:function(t){return u.exportJSON(this,t)},toJSON:function(){return u.serialize(this)},set:function(t,i){return t&&u.filter(this,t,i,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var i=t.base.apply(this,arguments),o=i.prototype._class;return o&&!u.exports[o]&&(u.exports[o]=i),i},equals:function(t,i){if(t===i)return!0;if(t&&t.equals)return t.equals(i);if(i&&i.equals)return i.equals(t);if(t&&i&&typeof t=="object"&&typeof i=="object"){if(Array.isArray(t)&&Array.isArray(i)){var o=t.length;if(o!==i.length)return!1;for(;o--;)if(!u.equals(t[o],i[o]))return!1}else{var h=Object.keys(t),o=h.length;if(o!==Object.keys(i).length)return!1;for(;o--;){var d=h[o];if(!(i.hasOwnProperty(d)&&u.equals(t[d],i[d])))return!1}}return!0}return!1},read:function(t,i,o,h){if(this===u){var d=this.peek(t,i);return t.__index++,d}var v=this.prototype,D=v._readIndex,A=i||D&&t.__index||0,T=t.length,P=t[A];if(h=h||T-A,P instanceof this||o&&o.readNull&&P==null&&h<=1)return D&&(t.__index=A+1),P&&o&&o.clone?P.clone():P;if(P=u.create(v),D&&(P.__read=!0),P=P.initialize.apply(P,A>0||A+h<T?u.slice(t,A,A+h):t)||P,D){t.__index=A+P.__read;var F=P.__filtered;F&&(t.__filtered=F,P.__filtered=n),P.__read=n}return P},peek:function(t,i){return t[t.__index=i||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,i,o,h){for(var d=[],v,D=i||0,A=h?D+h:t.length,T=D;T<A;T++)d.push(Array.isArray(v=t[T])?this.read(v,0,o):this.read(t,T,o,1));return d},readNamed:function(t,i,o,h,d){var v=this.getNamed(t,i),D=v!==n;if(D){var A=t.__filtered;if(!A){var T=this.getSource(t);A=t.__filtered=u.create(T),A.__unfiltered=T}A[i]=n}return this.read(D?[v]:t,o,h,d)},readSupported:function(t,i){var o=this.getSource(t),h=this,d=!1;return o&&Object.keys(o).forEach(function(v){if(v in i){var D=h.readNamed(t,v);D!==n&&(i[v]=D),d=!0}}),d},getSource:function(t){var i=t.__source;if(i===n){var o=t.length===1&&t[0];i=t.__source=o&&u.isPlainObject(o)?o:null}return i},getNamed:function(t,i){var o=this.getSource(t);if(o)return i?o[i]:t.__filtered||o},hasNamed:function(t,i){return!!this.getNamed(t,i)},filter:function(t,i,o,h){var d;function v(F){if(!(o&&F in o)&&!(d&&F in d)){var V=i[F];V!==n&&(t[F]=V)}}if(h){for(var D={},A=0,T,P=h.length;A<P;A++)(T=h[A])in i&&(v(T),D[T]=!0);d=D}return Object.keys(i.__unfiltered||i).forEach(v),t},isPlainValue:function(t,i){return u.isPlainObject(t)||Array.isArray(t)||i&&typeof t=="string"},serialize:function(t,i,o,h){i=i||{};var d=!h,v;if(d&&(i.formatter=new ve(i.precision),h={length:0,definitions:{},references:{},add:function(V,z){var R="#"+V._id,J=this.references[R];if(!J){this.length++;var Y=z.call(V),ie=V._class;ie&&Y[0]!==ie&&Y.unshift(ie),this.definitions[R]=Y,J=this.references[R]=[R]}return J}}),t&&t._serialize){v=t._serialize(i,h);var D=t._class;D&&!t._compactSerialize&&(d||!o)&&v[0]!==D&&v.unshift(D)}else if(Array.isArray(t)){v=[];for(var A=0,T=t.length;A<T;A++)v[A]=u.serialize(t[A],i,o,h)}else if(u.isPlainObject(t)){v={};for(var P=Object.keys(t),A=0,T=P.length;A<T;A++){var F=P[A];v[F]=u.serialize(t[F],i,o,h)}}else typeof t=="number"?v=i.formatter.number(t,i.precision):v=t;return d&&h.length>0?[["dictionary",h.definitions],v]:v},deserialize:function(t,i,o,h,d){var v=t,D=!o,A=D&&t&&t.length&&t[0][0]==="dictionary";if(o=o||{},Array.isArray(t)){var T=t[0],P=T==="dictionary";if(t.length==1&&/^#/.test(T))return o.dictionary[T];T=u.exports[T],v=[];for(var F=T?1:0,V=t.length;F<V;F++)v.push(u.deserialize(t[F],i,o,P,A));if(T){var z=v;i?v=i(T,z,D||d):v=new T(z)}}else if(u.isPlainObject(t)){v={},h&&(o.dictionary=v);for(var R in t)v[R]=u.deserialize(t[R],i,o)}return A?v[1]:v},exportJSON:function(t,i){var o=u.serialize(t,i);return i&&i.asString==!1?o:JSON.stringify(o)},importJSON:function(t,i){return u.deserialize(typeof t=="string"?JSON.parse(t):t,function(o,h,d){var v=d&&i&&i.constructor===o,D=v?i:u.create(o.prototype);if(h.length===1&&D instanceof He&&(v||!(D instanceof Sr))){var A=h[0];u.isPlainObject(A)&&(A.insert=!1,v&&(h=h.concat([He.INSERT])))}return(v?D.set:o).apply(D,h),v&&(i=null),D})},push:function(t,i){var o=i.length;if(o<4096)t.push.apply(t,i);else{var h=t.length;t.length+=o;for(var d=0;d<o;d++)t[h+d]=i[d]}return t},splice:function(t,i,o,h){var d=i&&i.length,v=o===n;o=v?t.length:o,o>t.length&&(o=t.length);for(var D=0;D<d;D++)i[D]._index=o+D;if(v)return u.push(t,i),[];var A=[o,h];i&&u.push(A,i);for(var T=t.splice.apply(t,A),D=0,P=T.length;D<P;D++)T[D]._index=n;for(var D=o+d,P=t.length;D<P;D++)t[D]._index=D;return T},capitalize:function(t){return t.replace(/\b[a-z]/g,function(i){return i.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(i,o){return o.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var m={on:function(t,i){if(typeof t!="string")u.each(t,function(v,D){this.on(D,v)},this);else{var o=this._eventTypes,h=o&&o[t],d=this._callbacks=this._callbacks||{};d=d[t]=d[t]||[],d.indexOf(i)===-1&&(d.push(i),h&&h.install&&d.length===1&&h.install.call(this,t))}return this},off:function(t,i){if(typeof t!="string"){u.each(t,function(D,A){this.off(A,D)},this);return}var o=this._eventTypes,h=o&&o[t],d=this._callbacks&&this._callbacks[t],v;return d&&(!i||(v=d.indexOf(i))!==-1&&d.length===1?(h&&h.uninstall&&h.uninstall.call(this,t),delete this._callbacks[t]):v!==-1&&d.splice(v,1)),this},once:function(t,i){return this.on(t,function o(){i.apply(this,arguments),this.off(t,o)})},emit:function(t,i){var o=this._callbacks&&this._callbacks[t];if(!o)return!1;var h=u.slice(arguments,1),d=i&&i.target&&!i.currentTarget;o=o.slice(),d&&(i.currentTarget=this);for(var v=0,D=o.length;v<D;v++)if(o[v].apply(this,h)==!1){i&&i.stop&&i.stop();break}return d&&delete i.currentTarget,!0},responds:function(t){return!!(this._callbacks&&this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var i=this._eventTypes,o=this._callbacks,h=t?"install":"uninstall";if(i){for(var d in o)if(o[d].length>0){var v=i[d],D=v&&v[h];D&&D.call(this,d)}}},statics:{inject:function t(i){var o=i._events;if(o){var h={};u.each(o,function(d,v){var D=typeof d=="string",A=D?d:v,T=u.capitalize(A),P=A.substring(2).toLowerCase();h[P]=D?{}:d,A="_"+A,i["get"+T]=function(){return this[A]},i["set"+T]=function(F){var V=this[A];V&&this.off(P,V),F&&this.on(P,F),this[A]=F}}),i._eventTypes=h}return t.base.apply(this,arguments)}}},b=u.extend({_class:"PaperScope",initialize:function t(){ar=this,this.settings=new u({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var i=t.prototype;if(!this.support){var o=di.getContext(1,1)||{};i.support={nativeDash:"setLineDash"in o||"mozDash"in o,nativeBlendModes:Ai.nativeModes},di.release(o)}if(!this.agent){var h=e.navigator.userAgent.toLowerCase(),d=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(h)||[])[0],v=d==="darwin"?"mac":d,D=i.agent=i.browser={platform:v};v&&(D[v]=!0),h.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(A,T,P,F,V){if(!D.chrome){var z=T==="opera"?F:/^(node|trident)$/.test(T)?V:P;D.version=z,D.versionNumber=parseFloat(z),T={trident:"msie",jsdom:"node"}[T]||T,D.name=T,D[T]=!0}}),D.chrome&&delete D.webkit,D.atom&&delete D.chrome}},version:"0.12.17",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,i){var o=ar.PaperScript.execute(t,this,i);return zi.updateFocus(),o},install:function(t){var i=this;u.each(["project","view","tool"],function(h){u.define(t,h,{configurable:!0,get:function(){return i[h]}})});for(var o in this)!/^_/.test(o)&&this[o]&&(t[o]=this[o])},setup:function(t){return ar=this,this.project=new Cn(t),this},createCanvas:function(t,i){return di.getCanvas(t,i)},activate:function(){ar=this},clear:function(){for(var t=this.projects,i=this.tools,o=t.length-1;o>=0;o--)t[o].remove();for(var o=i.length-1;o>=0;o--)i[o].remove()},remove:function(){this.clear(),delete b._scopes[this._id]},statics:new function(){function t(i){return i+="Attribute",function(o,h){return o[i](h)||o[i]("data-paper-"+h)}}return{_scopes:{},_id:0,get:function(i){return this._scopes[i]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),k=u.extend(m,{initialize:function(t){this._scope=ar,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(u.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),W={findItemBoundsCollisions:function(t,i,o){function h(D){for(var A=new Array(D.length),T=0;T<D.length;T++){var P=D[T].getBounds();A[T]=[P.left,P.top,P.right,P.bottom]}return A}var d=h(t),v=!i||i===t?d:h(i);return this.findBoundsCollisions(d,v,o||0)},findCurveBoundsCollisions:function(t,i,o,h){function d(z){for(var R=Math.min,J=Math.max,Y=new Array(z.length),ie=0;ie<z.length;ie++){var j=z[ie];Y[ie]=[R(j[0],j[2],j[4],j[6]),R(j[1],j[3],j[5],j[7]),J(j[0],j[2],j[4],j[6]),J(j[1],j[3],j[5],j[7])]}return Y}var v=d(t),D=!i||i===t?v:d(i);if(h){for(var A=this.findBoundsCollisions(v,D,o||0,!1,!0),T=this.findBoundsCollisions(v,D,o||0,!0,!0),P=[],F=0,V=A.length;F<V;F++)P[F]={hor:A[F],ver:T[F]};return P}return this.findBoundsCollisions(v,D,o||0)},findBoundsCollisions:function(t,i,o,h,d){var v=!i||t===i,D=v?t:t.concat(i),A=t.length,T=D.length;function P(Zn,Kn,ur){for(var yn=0,An=Zn.length;yn<An;){var qn=An+yn>>>1;D[Zn[qn]][Kn]<ur?yn=qn+1:An=qn}return yn-1}for(var F=h?1:0,V=F+2,z=h?0:1,R=z+2,J=new Array(T),Y=0;Y<T;Y++)J[Y]=Y;J.sort(function(Zn,Kn){return D[Zn][F]-D[Kn][F]});for(var ie=[],j=new Array(A),Y=0;Y<T;Y++){var X=J[Y],I=D[X],G=v?X:X-A,te=X<A,pe=v||!te,oe=te?[]:null;if(ie.length){var Ee=P(ie,V,I[F]-o)+1;if(ie.splice(0,Ee),v&&d){oe=oe.concat(ie);for(var $e=0;$e<ie.length;$e++){var Xe=ie[$e];j[Xe].push(G)}}else for(var ft=I[R],Ze=I[z],$e=0;$e<ie.length;$e++){var Xe=ie[$e],yt=D[Xe],Et=Xe<A,Yt=v||Xe>=A;(d||(te&&Yt||pe&&Et)&&ft>=yt[z]-o&&Ze<=yt[R]+o)&&(te&&Yt&&oe.push(v?Xe:Xe-A),pe&&Et&&j[Xe].push(G))}}if(te&&(t===i&&oe.push(X),j[X]=oe),ie.length){var qt=I[V],ln=P(ie,V,qt);ie.splice(ln+1,0,X)}else ie.push(X)}for(var Y=0;Y<j.length;Y++){var In=j[Y];In&&In.sort(function(Kn,ur){return Kn-ur})}return j}},ve=u.extend({initialize:function(t){this.precision=u.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,i,o){return this.number(t)+(o||",")+this.number(i)},point:function(t,i){return this.number(t.x)+(i||",")+this.number(t.y)},size:function(t,i){return this.number(t.width)+(i||",")+this.number(t.height)},rectangle:function(t,i){return this.point(t,i)+(i||",")+this.size(t,i)}});ve.instance=new ve;var Ae=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],i=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],o=Math.abs,h=Math.sqrt,d=Math.pow,v=Math.log2||function(V){return Math.log(V)*Math.LOG2E},D=1e-12,A=112e-18;function T(V,z,R){return V<z?z:V>R?R:V}function P(V,z,R){function J(Ee){var $e=Ee*134217729,Xe=Ee-$e,ft=Xe+$e,Ze=Ee-ft;return[ft,Ze]}var Y=z*z-V*R,ie=z*z+V*R;if(o(Y)*3<ie){var j=J(V),X=J(z),I=J(R),G=z*z,te=X[0]*X[0]-G+2*X[0]*X[1]+X[1]*X[1],pe=V*R,oe=j[0]*I[0]-pe+j[0]*I[1]+j[1]*I[0]+j[1]*I[1];Y=G-pe+(te-oe)}return Y}function F(){var V=Math.max.apply(Math,arguments);return V&&(V<1e-8||V>1e8)?d(2,-Math.round(v(V))):0}return{EPSILON:D,MACHINE_EPSILON:A,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(h(2)-1)/3,isZero:function(V){return V>=-1e-12&&V<=D},isMachineZero:function(V){return V>=-112e-18&&V<=A},clamp:T,integrate:function(V,z,R,J){for(var Y=t[J-2],ie=i[J-2],j=(R-z)*.5,X=j+z,I=0,G=J+1>>1,te=J&1?ie[I++]*V(X):0;I<G;){var pe=j*Y[I];te+=ie[I++]*(V(X+pe)+V(X-pe))}return j*te},findRoot:function(V,z,R,J,Y,ie,j){for(var X=0;X<ie;X++){var I=V(R),G=I/z(R),te=R-G;if(o(G)<j){R=te;break}I>0?(Y=R,R=te<=J?(J+Y)*.5:te):(J=R,R=te>=Y?(J+Y)*.5:te)}return T(R,J,Y)},solveQuadratic:function(V,z,R,J,Y,ie){var j,X=1/0;if(o(V)<D){if(o(z)<D)return o(R)<D?-1:0;j=-R/z}else{z*=-.5;var I=P(V,z,R);if(I&&o(I)<A){var G=F(o(V),o(z),o(R));G&&(V*=G,z*=G,R*=G,I=P(V,z,R))}if(I>=-112e-18){var te=I<0?0:h(I),pe=z+(z<0?-te:te);pe===0?(j=R/V,X=-j):(j=pe/V,X=R/pe)}}var oe=0,Ee=Y==null,$e=Y-D,Xe=ie+D;return isFinite(j)&&(Ee||j>$e&&j<Xe)&&(J[oe++]=Ee?j:T(j,Y,ie)),X!==j&&isFinite(X)&&(Ee||X>$e&&X<Xe)&&(J[oe++]=Ee?X:T(X,Y,ie)),oe},solveCubic:function(V,z,R,J,Y,ie,j){var X=F(o(V),o(z),o(R),o(J)),I,G,te,pe,oe;X&&(V*=X,z*=X,R*=X,J*=X);function Ee(ln){I=ln;var In=V*I;G=In+z,te=G*I+R,pe=(In+G)*I+te,oe=te*I+J}if(o(V)<D)V=z,G=R,te=J,I=1/0;else if(o(J)<D)G=z,te=R,I=0;else{Ee(-(z/V)/3);var $e=oe/V,Xe=d(o($e),1/3),ft=$e<0?-1:1,Ze=-pe/V,yt=Ze>0?1.324717957244746*Math.max(Xe,h(Ze)):Xe,Et=I-ft*yt;if(Et!==I){do Ee(Et),Et=pe===0?I:I-oe/pe/(1+A);while(ft*Et>ft*I);o(V)*I*I>o(J/I)&&(te=-J/I,G=(te-R)/I)}}var Yt=Ae.solveQuadratic(V,G,te,Y,ie,j),qt=ie==null;return isFinite(I)&&(Yt===0||Yt>0&&I!==Y[0]&&I!==Y[1])&&(qt||I>ie-D&&I<j+D)&&(Y[Yt++]=qt?I:T(I,ie,j)),Yt}}},rt={_id:1,_pools:{},get:function(t){if(t){var i=this._pools[t];return i||(i=this._pools[t]={_id:1}),i._id++}else return this._id++}},re=u.extend({_class:"Point",_readIndex:!0,initialize:function(t,i){var o=typeof t,h=this.__read,d=0;if(o==="number"){var v=typeof i=="number";this._set(t,v?i:t),h&&(d=v?2:1)}else if(o==="undefined"||t===null)this._set(0,0),h&&(d=t===null?1:0);else{var D=o==="string"?t.split(/[\s,]+/)||[]:t;d=1,Array.isArray(D)?this._set(+D[0],+(D.length>1?D[1]:D[0])):"x"in D?this._set(D.x||0,D.y||0):"width"in D?this._set(D.width||0,D.height||0):"angle"in D?(this._set(D.length||0,0),this.setAngle(D.angle||0)):(this._set(0,0),d=0)}return h&&(this.__read=d),this},set:"#initialize",_set:function(t,i){return this.x=t,this.y=i,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new re(this.x,this.y)},toString:function(){var t=ve.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var i=t.formatter;return[i.number(this.x),i.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var i=this._angle||0;this._set(Math.cos(i)*t,Math.sin(i)*t)}else{var o=t/this.getLength();Ae.isZero(o)&&this.getAngle(),this._set(this.x*o,this.y*o)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=re.read(arguments),i=this.getLength()*t.getLength();if(Ae.isZero(i))return NaN;var o=this.dot(t)/i;return Math.acos(o<-1?-1:o>1?1:o)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var i=this.getLength();this._set(Math.cos(t)*i,Math.sin(t)*i)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=re.read(arguments);return Math.atan2(this.cross(t),this.dot(t))*180/Math.PI},getDistance:function(){var t=arguments,i=re.read(t),o=i.x-this.x,h=i.y-this.y,d=o*o+h*h,v=u.read(t);return v?d:Math.sqrt(d)},normalize:function(t){t===n&&(t=1);var i=this.getLength(),o=i!==0?t/i:0,h=new re(this.x*o,this.y*o);return o>=0&&(h._angle=this._angle),h},rotate:function(t,i){if(t===0)return this.clone();t=t*Math.PI/180;var o=i?this.subtract(i):this,h=Math.sin(t),d=Math.cos(t);return o=new re(o.x*d-o.y*h,o.x*h+o.y*d),i?o.add(i):o},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=re.read(arguments);return new re(this.x+t.x,this.y+t.y)},subtract:function(){var t=re.read(arguments);return new re(this.x-t.x,this.y-t.y)},multiply:function(){var t=re.read(arguments);return new re(this.x*t.x,this.y*t.y)},divide:function(){var t=re.read(arguments);return new re(this.x/t.x,this.y/t.y)},modulo:function(){var t=re.read(arguments);return new re(this.x%t.x,this.y%t.y)},negate:function(){return new re(-this.x,-this.y)},isInside:function(){return Ie.read(arguments).contains(this)},isClose:function(){var t=arguments,i=re.read(t),o=u.read(t);return this.getDistance(i)<=o},isCollinear:function(){var t=re.read(arguments);return re.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=re.read(arguments);return re.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=Ae.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=re.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=re.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=re.read(arguments),i=t.isZero()?0:this.dot(t)/t.dot(t);return new re(t.x*i,t.y*i)},statics:{min:function(){var t=arguments,i=re.read(t),o=re.read(t);return new re(Math.min(i.x,o.x),Math.min(i.y,o.y))},max:function(){var t=arguments,i=re.read(t),o=re.read(t);return new re(Math.max(i.x,o.x),Math.max(i.y,o.y))},random:function(){return new re(Math.random(),Math.random())},isCollinear:function(t,i,o,h){return Math.abs(t*h-i*o)<=Math.sqrt((t*t+i*i)*(o*o+h*h))*1e-8},isOrthogonal:function(t,i,o,h){return Math.abs(t*o+i*h)<=Math.sqrt((t*t+i*i)*(o*o+h*h))*1e-8}}},u.each(["round","ceil","floor","abs"],function(t){var i=Math[t];this[t]=function(){return new re(i(this.x),i(this.y))}},{})),mt=re.extend({initialize:function(t,i,o,h){this._x=t,this._y=i,this._owner=o,this._setter=h},_set:function(t,i,o){return this._x=t,this._y=i,o||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),nt=u.extend({_class:"Size",_readIndex:!0,initialize:function(t,i){var o=typeof t,h=this.__read,d=0;if(o==="number"){var v=typeof i=="number";this._set(t,v?i:t),h&&(d=v?2:1)}else if(o==="undefined"||t===null)this._set(0,0),h&&(d=t===null?1:0);else{var D=o==="string"?t.split(/[\s,]+/)||[]:t;d=1,Array.isArray(D)?this._set(+D[0],+(D.length>1?D[1]:D[0])):"width"in D?this._set(D.width||0,D.height||0):"x"in D?this._set(D.x||0,D.y||0):(this._set(0,0),d=0)}return h&&(this.__read=d),this},set:"#initialize",_set:function(t,i){return this.width=t,this.height=i,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new nt(this.width,this.height)},toString:function(){var t=ve.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var i=t.formatter;return[i.number(this.width),i.number(this.height)]},add:function(){var t=nt.read(arguments);return new nt(this.width+t.width,this.height+t.height)},subtract:function(){var t=nt.read(arguments);return new nt(this.width-t.width,this.height-t.height)},multiply:function(){var t=nt.read(arguments);return new nt(this.width*t.width,this.height*t.height)},divide:function(){var t=nt.read(arguments);return new nt(this.width/t.width,this.height/t.height)},modulo:function(){var t=nt.read(arguments);return new nt(this.width%t.width,this.height%t.height)},negate:function(){return new nt(-this.width,-this.height)},isZero:function(){var t=Ae.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,i){return new nt(Math.min(t.width,i.width),Math.min(t.height,i.height))},max:function(t,i){return new nt(Math.max(t.width,i.width),Math.max(t.height,i.height))},random:function(){return new nt(Math.random(),Math.random())}}},u.each(["round","ceil","floor","abs"],function(t){var i=Math[t];this[t]=function(){return new nt(i(this.width),i(this.height))}},{})),tn=nt.extend({initialize:function(t,i,o,h){this._width=t,this._height=i,this._owner=o,this._setter=h},_set:function(t,i,o){return this._width=t,this._height=i,o||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),Ie=u.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,i,o,h){var d=arguments,v=typeof t,D;if(v==="number"?(this._set(t,i,o,h),D=4):v==="undefined"||t===null?(this._set(0,0,0,0),D=t===null?1:0):d.length===1&&(Array.isArray(t)?(this._set.apply(this,t),D=1):t.x!==n||t.width!==n?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),D=1):t.from===n&&t.to===n&&(this._set(0,0,0,0),u.readSupported(d,this)&&(D=1))),D===n){var A=re.readNamed(d,"from"),T=u.peek(d),P=A.x,F=A.y,V,z;if(T&&T.x!==n||u.hasNamed(d,"to")){var R=re.readNamed(d,"to");V=R.x-P,z=R.y-F,V<0&&(P=R.x,V=-V),z<0&&(F=R.y,z=-z)}else{var J=nt.read(d);V=J.width,z=J.height}this._set(P,F,V,z),D=d.__index}var Y=d.__filtered;return Y&&(this.__filtered=Y),this.__read&&(this.__read=D),this},set:"#initialize",_set:function(t,i,o,h){return this.x=t,this.y=i,this.width=o,this.height=h,this},clone:function(){return new Ie(this.x,this.y,this.width,this.height)},equals:function(t){var i=u.isPlainValue(t)?Ie.read(arguments):t;return i===this||i&&this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height||!1},toString:function(){var t=ve.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var i=t.formatter;return[i.number(this.x),i.number(this.y),i.number(this.width),i.number(this.height)]},getPoint:function(t){var i=t?re:mt;return new i(this.x,this.y,this,"setPoint")},setPoint:function(){var t=re.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){var i=t?nt:tn;return new i(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=nt.read(arguments),i=this._sx,o=this._sy,h=t.width,d=t.height;i&&(this.x+=(this.width-h)*i),o&&(this.y+=(this.height-d)*o),this.width=h,this.height=d,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var i=t-this.x;this.width-=this._sx===.5?i*2:i}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var i=t-this.y;this.height-=this._sy===.5?i*2:i}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var i=t-this.x;this.width=this._sx===.5?i*2:i}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var i=t-this.y;this.height=this._sy===.5?i*2:i}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||this._sx===.5?this.x=t-this.width/2:(this._sx&&(this.x+=(t-this.x)*2*this._sx),this.width=(t-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||this._sy===.5?this.y=t-this.height/2:(this._sy&&(this.y+=(t-this.y)*2*this._sy),this.height=(t-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(t){var i=t?re:mt;return new i(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=re.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(t){return t&&t.width!==n||(Array.isArray(t)?t:arguments).length===4?this._containsRectangle(Ie.read(arguments)):this._containsPoint(re.read(arguments))},_containsPoint:function(t){var i=t.x,o=t.y;return i>=this.x&&o>=this.y&&i<=this.x+this.width&&o<=this.y+this.height},_containsRectangle:function(t){var i=t.x,o=t.y;return i>=this.x&&o>=this.y&&i+t.width<=this.x+this.width&&o+t.height<=this.y+this.height},intersects:function(){var t=Ie.read(arguments),i=u.read(arguments)||0;return t.x+t.width>this.x-i&&t.y+t.height>this.y-i&&t.x<this.x+this.width+i&&t.y<this.y+this.height+i},intersect:function(){var t=Ie.read(arguments),i=Math.max(this.x,t.x),o=Math.max(this.y,t.y),h=Math.min(this.x+this.width,t.x+t.width),d=Math.min(this.y+this.height,t.y+t.height);return new Ie(i,o,h-i,d-o)},unite:function(){var t=Ie.read(arguments),i=Math.min(this.x,t.x),o=Math.min(this.y,t.y),h=Math.max(this.x+this.width,t.x+t.width),d=Math.max(this.y+this.height,t.y+t.height);return new Ie(i,o,h-i,d-o)},include:function(){var t=re.read(arguments),i=Math.min(this.x,t.x),o=Math.min(this.y,t.y),h=Math.max(this.x+this.width,t.x),d=Math.max(this.y+this.height,t.y);return new Ie(i,o,h-i,d-o)},expand:function(){var t=nt.read(arguments),i=t.width,o=t.height;return new Ie(this.x-i/2,this.y-o/2,this.width+i,this.height+o)},scale:function(t,i){return this.expand(this.width*t-this.width,this.height*(i===n?t:i)-this.height)}},u.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,i){var o=t.join(""),h=/^[RL]/.test(o);i>=4&&(t[1]+=h?"Y":"X");var d=t[h?0:1],v=t[h?1:0],D="get"+d,A="get"+v,T="set"+d,P="set"+v,F="get"+o,V="set"+o;this[F]=function(z){var R=z?re:mt;return new R(this[D](),this[A](),this,V)},this[V]=function(){var z=re.read(arguments);this[T](z.x),this[P](z.y)}},{beans:!0})),Kt=Ie.extend({initialize:function(t,i,o,h,d,v){this._set(t,i,o,h,!0),this._owner=d,this._setter=v},_set:function(t,i,o,h,d){return this._x=t,this._y=i,this._width=o,this._height=h,d||this._owner[this._setter](this),this}},new function(){var t=Ie.prototype;return u.each(["x","y","width","height"],function(i){var o=u.capitalize(i),h="_"+i;this["get"+o]=function(){return this[h]},this["set"+o]=function(d){this[h]=d,this._dontNotify||this._owner[this._setter](this)}},u.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(i){var o="set"+i;this[o]=function(){this._dontNotify=!0,t[o].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(i){var o=this._owner;o._changeSelection&&o._changeSelection(2,i)}}))}),At=u.extend({_class:"Matrix",initialize:function t(i,o){var h=arguments,d=h.length,v=!0;if(d>=6?this._set.apply(this,h):d===1||d===2?i instanceof t?this._set(i._a,i._b,i._c,i._d,i._tx,i._ty,o):Array.isArray(i)?this._set.apply(this,o?i.concat([o]):i):v=!1:d?v=!1:this.reset(),!v)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,i,o,h,d,v,D){return this._a=t,this._b=i,this._c=o,this._d=h,this._tx=d,this._ty=v,D||this._changed(),this},_serialize:function(t,i){return u.serialize(this.getValues(),t,!0,i)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new At(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=ve.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,i){var o=this._owner;return o?(o.transform(null,u.pick(t,!0),i),this.isIdentity()):!1},translate:function(){var t=re.read(arguments),i=t.x,o=t.y;return this._tx+=i*this._a+o*this._c,this._ty+=i*this._b+o*this._d,this._changed(),this},scale:function(){var t=arguments,i=re.read(t),o=re.read(t,0,{readNull:!0});return o&&this.translate(o),this._a*=i.x,this._b*=i.x,this._c*=i.y,this._d*=i.y,o&&this.translate(o.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var i=re.read(arguments,1),o=i.x,h=i.y,d=Math.cos(t),v=Math.sin(t),D=o-o*d+h*v,A=h-o*v-h*d,T=this._a,P=this._b,F=this._c,V=this._d;return this._a=d*T+v*F,this._b=d*P+v*V,this._c=-v*T+d*F,this._d=-v*P+d*V,this._tx+=D*T+A*F,this._ty+=D*P+A*V,this._changed(),this},shear:function(){var t=arguments,i=re.read(t),o=re.read(t,0,{readNull:!0});o&&this.translate(o);var h=this._a,d=this._b;return this._a+=i.y*this._c,this._b+=i.y*this._d,this._c+=i.x*h,this._d+=i.x*d,o&&this.translate(o.negate()),this._changed(),this},skew:function(){var t=arguments,i=re.read(t),o=re.read(t,0,{readNull:!0}),h=Math.PI/180,d=new re(Math.tan(i.x*h),Math.tan(i.y*h));return this.shear(d,o)},append:function(t,i){if(t){var o=this._a,h=this._b,d=this._c,v=this._d,D=t._a,A=t._c,T=t._b,P=t._d,F=t._tx,V=t._ty;this._a=D*o+T*d,this._c=A*o+P*d,this._b=D*h+T*v,this._d=A*h+P*v,this._tx+=F*o+V*d,this._ty+=F*h+V*v,i||this._changed()}return this},prepend:function(t,i){if(t){var o=this._a,h=this._b,d=this._c,v=this._d,D=this._tx,A=this._ty,T=t._a,P=t._c,F=t._b,V=t._d,z=t._tx,R=t._ty;this._a=T*o+P*h,this._c=T*d+P*v,this._b=F*o+V*h,this._d=F*d+V*v,this._tx=T*D+P*A+z,this._ty=F*D+V*A+R,i||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,i=this._b,o=this._c,h=this._d,d=this._tx,v=this._ty,D=t*h-i*o,A=null;return D&&!isNaN(D)&&isFinite(d)&&isFinite(v)&&(this._a=h/D,this._b=-i/D,this._c=-o/D,this._d=t/D,this._tx=(o*v-h*d)/D,this._ty=(i*d-t*v)/D,A=this),A},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new At(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,i,o){return arguments.length<3?this._transformPoint(re.read(arguments)):this._transformCoordinates(t,i,o)},_transformPoint:function(t,i,o){var h=t.x,d=t.y;return i||(i=new re),i._set(h*this._a+d*this._c+this._tx,h*this._b+d*this._d+this._ty,o)},_transformCoordinates:function(t,i,o){for(var h=0,d=2*o;h<d;h+=2){var v=t[h],D=t[h+1];i[h]=v*this._a+D*this._c+this._tx,i[h+1]=v*this._b+D*this._d+this._ty}return i},_transformCorners:function(t){var i=t.x,o=t.y,h=i+t.width,d=o+t.height,v=[i,o,h,o,h,d,i,d];return this._transformCoordinates(v,v,4)},_transformBounds:function(t,i,o){for(var h=this._transformCorners(t),d=h.slice(0,2),v=d.slice(),D=2;D<8;D++){var A=h[D],T=D&1;A<d[T]?d[T]=A:A>v[T]&&(v[T]=A)}return i||(i=new Ie),i._set(d[0],d[1],v[0]-d[0],v[1]-d[1],o)},inverseTransform:function(){return this._inverseTransform(re.read(arguments))},_inverseTransform:function(t,i,o){var h=this._a,d=this._b,v=this._c,D=this._d,A=this._tx,T=this._ty,P=h*D-d*v,F=null;if(P&&!isNaN(P)&&isFinite(A)&&isFinite(T)){var V=t.x-this._tx,z=t.y-this._ty;i||(i=new re),F=i._set((V*D-z*v)/P,(z*h-V*d)/P,o)}return F},decompose:function(){var t=this._a,i=this._b,o=this._c,h=this._d,d=t*h-i*o,v=Math.sqrt,D=Math.atan2,A=180/Math.PI,T,P,F;if(t!==0||i!==0){var V=v(t*t+i*i);T=Math.acos(t/V)*(i>0?1:-1),P=[V,d/V],F=[D(t*o+i*h,V*V),0]}else if(o!==0||h!==0){var z=v(o*o+h*h);T=Math.asin(o/z)*(h>0?1:-1),P=[d/z,z],F=[0,D(t*o+i*h,z*z)]}else T=0,F=P=[0,0];return{translation:this.getTranslation(),rotation:T*A,scaling:new re(P),skewing:new re(F[0]*A,F[1]*A)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new re(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},u.each(["a","b","c","d","tx","ty"],function(t){var i=u.capitalize(t),o="_"+t;this["get"+i]=function(){return this[o]},this["set"+i]=function(h){this[o]=h,this._changed()}},{})),an=u.extend({_class:"Line",initialize:function(t,i,o,h,d){var v=!1;arguments.length>=4?(this._px=t,this._py=i,this._vx=o,this._vy=h,v=d):(this._px=t.x,this._py=t.y,this._vx=i.x,this._vy=i.y,v=o),v||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new re(this._px,this._py)},getVector:function(){return new re(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,i){return an.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,i)},getSide:function(t,i){return an.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,i)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return an.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return re.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return re.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,i,o,h,d,v,D,A,T,P){T||(o-=t,h-=i,D-=d,A-=v);var F=o*A-h*D;if(!Ae.isMachineZero(F)){var V=t-d,z=i-v,R=(D*z-A*V)/F,J=(o*z-h*V)/F,Y=1e-12,ie=-Y,j=1+Y;if(P||ie<R&&R<j&&ie<J&&J<j)return P||(R=R<=0?0:R>=1?1:R),new re(t+R*o,i+R*h)}},getSide:function(t,i,o,h,d,v,D,A){D||(o-=t,h-=i);var T=d-t,P=v-i,F=T*h-P*o;return!A&&Ae.isMachineZero(F)&&(F=(T*o+T*o)/(o*o+h*h),F>=0&&F<=1&&(F=0)),F<0?-1:F>0?1:0},getSignedDistance:function(t,i,o,h,d,v,D){return D||(o-=t,h-=i),o===0?h>0?d-t:t-d:h===0?o<0?v-i:i-v:((d-t)*h-(v-i)*o)/(h>o?h*Math.sqrt(1+o*o/(h*h)):o*Math.sqrt(1+h*h/(o*o)))},getDistance:function(t,i,o,h,d,v,D){return Math.abs(an.getSignedDistance(t,i,o,h,d,v,D))}}}),Cn=k.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){k.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new qo(null,null,this),this._view=zi.create(this,t||di.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,i){return u.serialize(this._children,t,!0,i)},_changed:function(t,i){if(t&1){var o=this._view;o&&(o._needsUpdate=!0,!o._requested&&o._autoUpdate&&o.requestUpdate())}var h=this._changes;if(h&&i){var d=this._changesById,v=i._id,D=d[v];D?D.flags|=t:h.push(d[v]={item:i,flags:t})}},clear:function(){for(var t=this._children,i=t.length-1;i>=0;i--)t[i].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return t.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Sr({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],i={};return this.getItems({class:Mi,match:function(o){var h=o._definition,d=h._id;return i[d]||(i[d]=!0,t.push(h)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,i=[];for(var o in t){var h=t[o],d=h._selection;d&1&&h.isInserted()?i.push(h):d||this._updateSelection(h)}return i},_updateSelection:function(t){var i=t._id,o=this._selectionItems;t._selection?o[i]!==t&&(this._selectionCount++,o[i]=t):o[i]===t&&(this._selectionCount--,delete o[i])},selectAll:function(){for(var t=this._children,i=0,o=t.length;i<o;i++)t[i].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var i in t)t[i].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(n,t)},insertLayer:function(t,i){if(i instanceof Sr){i._remove(!1,!0),u.splice(this._children,[i],t,0),i._setProject(this,!0);var o=i._name;o&&i.setName(o),this._changes&&i._changed(5),this._activeLayer||(this._activeLayer=i)}else i=null;return i},_insertItem:function(t,i,o){return i=this.insertLayer(t,i)||(this._activeLayer||this._insertItem(n,new Sr(He.NO_INSERT),!0)).insertChild(t,i),o&&i.activate&&i.activate(),i},getItems:function(t){return He._getItems(this,t)},getItem:function(t){return He._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var i=this._activeLayer;return u.importJSON(t,i&&i.isEmpty()&&i)},removeOn:function(t){var i=this._removeSets;if(i){t==="mouseup"&&(i.mousedrag=null);var o=i[t];if(o){for(var h in o){var d=o[h];for(var v in i){var D=i[v];D&&D!=o&&delete D[d._id]}d.remove()}i[t]=null}}},draw:function(t,i,o){this._updateVersion++,t.save(),i.applyToContext(t);for(var h=this._children,d=new u({offset:new re(0,0),pixelRatio:o,viewMatrix:i.isIdentity()?null:i,matrices:[new At],updateMatrix:!0}),v=0,D=h.length;v<D;v++)h[v].draw(t,d);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var A=this._selectionItems,T=this._scope.settings.handleSize,P=this._updateVersion;for(var F in A)A[F]._drawSelection(t,i,T,A,P);t.restore()}}}),He=u.extend(m,{statics:{extend:function t(i){return i._serializeFields&&(i._serializeFields=u.set({},this.prototype._serializeFields,i._serializeFields)),t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new At,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return u.each(t,function(i){this._events[i]={install:function(o){this.getView()._countItemEvent(o,1)},uninstall:function(o){this.getView()._countItemEvent(o,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,i){var o=t&&u.isPlainObject(t),h=o&&t.internal===!0,d=this._matrix=new At,v=o&&t.project||ar.project,D=ar.settings;return this._id=h?null:rt.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&D.applyMatrix,i&&d.translate(i),d._owner=this,this._style=new qo(v._currentStyle,this,v),h||o&&t.insert==!1||!D.insertItems&&!(o&&t.insert==!0)?this._setProject(v):(o&&t.parent||v)._insertItem(n,this,!0),o&&t!==He.NO_INSERT&&t!==He.INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),o},_serialize:function(t,i){var o={},h=this;function d(v){for(var D in v){var A=h[D];u.equals(A,D==="leading"?v.fontSize*1.2:v[D])||(o[D]=u.serialize(A,t,D!=="data",i))}}return d(this._serializeFields),this instanceof _e||d(this._style._defaults),[this._class,o]},_changed:function(t){var i=this._symbol,o=this._parent||i,h=this._project;t&8&&(this._bounds=this._position=this._decomposed=n),t&16&&(this._globalMatrix=n),o&&t&72&&He._clearBoundsCache(o),t&2&&He._clearBoundsCache(this),h&&h._changed(t,this),i&&i._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var i=this._getOwner();if(t&&i){var o=i._children,h=i._namedChildren;(h[t]=h[t]||[]).push(this),t in o||(o[t]=this)}this._name=t||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},u.each(["locked","visible","blendMode","opacity","guide"],function(t){var i=u.capitalize(t),o="_"+t,h={locked:256,visible:265};this["get"+i]=function(){return this[o]},this["set"+i]=function(d){d!=this[o]&&(this[o]=d,this._changed(h[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var i=this._project;i&&(i._updateSelection(this),this._changed(257))}},_changeSelection:function(t,i){var o=this._selection;this.setSelection(i?o|t:o&~t)},isSelected:function(){if(this._selectChildren){for(var t=this._children,i=0,o=t.length;i<o;i++)if(t[i].isSelected())return!0}return!!(this._selection&1)},setSelected:function(t){if(this._selectChildren)for(var i=this._children,o=0,h=i.length;o<h;o++)i[o].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,i=!!(this._selection&1);if(t&&i){for(var o=0,h=t.length;o<h;o++)if(!t[o].isFullySelected())return!1;return!0}return i},setFullySelected:function(t){var i=this._children;if(i)for(var o=0,h=i.length;o<h;o++)i[o].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var i=t?re:mt,o=this._position||(this._position=this._getPositionFromBounds());return new i(o.x,o.y,this,"setPosition")},setPosition:function(){this.translate(re.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new mt(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=re.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},u.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,i){this[i]=function(o){return this.getBounds(o,t)}},{beans:!0,getBounds:function(t,i){var o=i||t instanceof At,h=u.set({},o?i:t,this._boundsOptions);(!h.stroke||this.getStrokeScaling())&&(h.cacheItem=this);var d=this._getCachedBounds(o&&t,h).rect;return arguments.length?d:new Kt(d.x,d.y,d.width,d.height,this,"setBounds")},setBounds:function(){var t=Ie.read(arguments),i=this.getBounds(),o=this._matrix,h=new At,d=t.getCenter();h.translate(d),(t.width!=i.width||t.height!=i.height)&&(o.isInvertible()||(o.set(o._backup||new At().translate(o.getTranslation())),i=this.getBounds()),h.scale(i.width!==0?t.width/i.width:0,i.height!==0?t.height/i.height:0)),d=i.getCenter(),h.translate(-d.x,-d.y),this.transform(h)},_getBounds:function(t,i){var o=this._children;return!o||!o.length?new Ie:(He._updateBoundsCache(this,i.cacheItem),He._getBounds(o,t,i))},_getBoundsCacheKey:function(t,i){return[t.stroke?1:0,t.handle?1:0,i?1:0].join("")},_getCachedBounds:function(t,i,o){t=t&&t._orNullIfIdentity();var h=i.internal&&!o,d=i.cacheItem,v=h?null:this._matrix._orNullIfIdentity(),D=d&&(!t||t.equals(v))&&this._getBoundsCacheKey(i,h),A=this._bounds;if(He._updateBoundsCache(this._parent||this._symbol,d),D&&A&&D in A){var T=A[D];return{rect:T.rect.clone(),nonscaling:T.nonscaling}}var P=this._getBounds(t||v,i),F=P.rect||P,V=this._style,z=P.nonscaling||V.hasStroke()&&!V.getStrokeScaling();if(D){A||(this._bounds=A={});var T=A[D]={rect:F.clone(),nonscaling:z,internal:h}}return{rect:F,nonscaling:z}},_getStrokeMatrix:function(t,i){var o=this.getStrokeScaling()?null:i&&i.internal?this:this._parent||this._symbol&&this._symbol._item,h=o?o.getViewMatrix().invert():t;return h&&h._shiftless()},statics:{_updateBoundsCache:function(t,i){if(t&&i){var o=i._id,h=t._boundsCache=t._boundsCache||{ids:{},list:[]};h.ids[o]||(h.list.push(i),h.ids[o]=i)}},_clearBoundsCache:function(t){var i=t._boundsCache;if(i){t._bounds=t._position=t._boundsCache=n;for(var o=0,h=i.list,d=h.length;o<d;o++){var v=h[o];v!==t&&(v._bounds=v._position=n,v._boundsCache&&He._clearBoundsCache(v))}}},_getBounds:function(t,i,o){var h=1/0,d=-h,v=h,D=d,A=!1;o=o||{};for(var T=0,P=t.length;T<P;T++){var F=t[T];if(F._visible&&!F.isEmpty(!0)){var V=F._getCachedBounds(i&&i.appended(F._matrix),o,!0),z=V.rect;h=Math.min(z.x,h),v=Math.min(z.y,v),d=Math.max(z.x+z.width,d),D=Math.max(z.y+z.height,D),V.nonscaling&&(A=!0)}}return{rect:isFinite(h)?new Ie(h,v,d-h,D-v):new Ie,nonscaling:A}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var i=this.getRotation();if(i!=null&&t!=null){var o=this._decomposed;this.rotate(t-i),o&&(o.rotation=t,this._decomposed=o)}},getScaling:function(){var t=this._decompose(),i=t&&t.scaling;return new mt(i?i.x:1,i?i.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),i=re.read(arguments,0,{clone:!0,readNull:!0});if(t&&i&&!t.equals(i)){var o=this.getRotation(),h=this._decomposed,d=new At,v=Ae.isZero;if(v(t.x)||v(t.y))d.translate(h.translation),o&&d.rotate(o),d.scale(i.x,i.y),this._matrix.set(d);else{var D=this.getPosition(!0);d.translate(D),o&&d.rotate(o),d.scale(i.x/t.x,i.y/t.y),o&&d.rotate(-o),d.translate(D.negate()),this.transform(d)}h&&(h.scaling=i,this._decomposed=h)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var i=this._globalMatrix;if(i)for(var o=this._parent,h=[];o;){if(!o._globalMatrix){i=null;for(var d=0,v=h.length;d<v;d++)h[d]._globalMatrix=null;break}h.push(o),o=o._parent}if(!i){i=this._globalMatrix=this._matrix.clone();var o=this._parent;o&&i.prepend(o.getGlobalMatrix(!0))}return t?i:i.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,i){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var o=this._children,h=0,d=o&&o.length;h<d;h++)o[h]._setProject(t);i=!0}i&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(i){t.base.call(this,i);for(var o=this._children,h=0,d=o&&o.length;h<d;h++)o[h]._installEvents(i)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof Sr)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return u.equals(this._children,t._children)},clone:function(t){var i=new this.constructor(He.NO_INSERT),o=this._children,h=u.pick(t?t.insert:n,t===n||t===!0),d=u.pick(t?t.deep:n,!0);o&&i.copyAttributes(this),(!o||d)&&i.copyContent(this),o||i.copyAttributes(this),h&&i.insertAbove(this);var v=this._name,D=this._parent;if(v&&D){for(var o=D._children,A=v,T=1;o[v];)v=A+" "+T++;v!==A&&i.setName(v)}return i},copyContent:function(t){for(var i=t._children,o=0,h=i&&i.length;o<h;o++)this.addChild(i[o].clone(!1),!0)},copyAttributes:function(t,i){this.setStyle(t._style);for(var o=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],h=0,d=o.length;h<d;h++){var v=o[h];t.hasOwnProperty(v)&&(this[v]=t[v])}i||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var D=t._data,A=t._name;this._data=D?u.clone(D):null,A&&this.setName(A)},rasterize:function(t,i){var o,h,d;u.isPlainObject(t)?(o=t.resolution,h=t.insert,d=t.raster):(o=t,h=i),d||(d=new Kr(He.NO_INSERT));var v=this.getStrokeBounds(),D=(o||this.getView().getResolution())/72,A=v.getTopLeft().floor(),T=v.getBottomRight().ceil(),P=new nt(T.subtract(A)),F=P.multiply(D);if(d.setSize(F,!0),!F.isZero()){var V=d.getContext(!0),z=new At().scale(D).translate(A.negate());V.save(),z.applyToContext(V),this.draw(V,new u({matrices:[z]})),V.restore()}return d._matrix.set(new At().translate(A.add(P.divide(2))).scale(1/D)),(h===n||h)&&d.insertAbove(this),d},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(re.read(arguments)))},_contains:function(t){var i=this._children;if(i){for(var o=i.length-1;o>=0;o--)if(i[o].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return Ie.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new ai.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,i){return t instanceof He?this._asPathItem().getIntersections(t._asPathItem(),null,i,!0).length>0:!1}},new function(){function t(){var h=arguments;return this._hitTest(re.read(h),oi.getOptions(h))}function i(){var h=arguments,d=re.read(h),v=oi.getOptions(h),D=[];return this._hitTest(d,new u({all:D},v)),D}function o(h,d,v,D){var A=this._children;if(A)for(var T=A.length-1;T>=0;T--){var P=A[T],F=P!==D&&P._hitTest(h,d,v);if(F&&!d.all)return F}return null}return Cn.inject({hitTest:t,hitTestAll:i,_hitTest:o}),{hitTest:t,hitTestAll:i,_hitTestChildren:o}},{_hitTest:function(t,i,o){if(this._locked||!this._visible||this._guide&&!i.guides||this.isEmpty())return null;var h=this._matrix,d=o?o.appended(h):this.getGlobalMatrix().prepend(this.getView()._matrix),v=Math.max(i.tolerance,1e-12),D=i._tolerancePadding=new nt(ai._getStrokePadding(v,h._shiftless().invert()));if(t=h._inverseTransform(t),!t||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(D.multiply(2))._containsPoint(t))return null;var A=!(i.guides&&!this._guide||i.selected&&!this.isSelected()||i.type&&i.type!==u.hyphenate(this._class)||i.class&&!(this instanceof i.class)),T=i.match,P=this,F,V;function z(I){return I&&T&&!T(I)&&(I=null),I&&i.all&&i.all.push(I),I}function R(I,G){var te=G?F["get"+G]():P.getPosition();if(t.subtract(te).divide(D).length<=1)return new oi(I,P,{name:G?u.hyphenate(G):I,point:te})}var J=i.position,Y=i.center,ie=i.bounds;if(A&&this._parent&&(J||Y||ie)){if((Y||ie)&&(F=this.getInternalBounds()),V=J&&R("position")||Y&&R("center","Center"),!V&&ie)for(var j=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],X=0;X<8&&!V;X++)V=R("bounds",j[X]);V=z(V)}return V||(V=this._hitTestChildren(t,i,d)||A&&z(this._hitTestSelf(t,i,d,this.getStrokeScaling()?null:d._shiftless().invert()))||null),V&&V.point&&(V.point=h.transform(V.point)),V},_hitTestSelf:function(t,i){if(i.fill&&this.hasFill()&&this._contains(t))return new oi("fill",this)},matches:function(t,i){function o(D,A){for(var T in D)if(D.hasOwnProperty(T)){var P=D[T],F=A[T];if(u.isPlainObject(P)&&u.isPlainObject(F)){if(!o(P,F))return!1}else if(!u.equals(P,F))return!1}return!0}var h=typeof t;if(h==="object"){for(var d in t)if(t.hasOwnProperty(d)&&!this.matches(d,t[d]))return!1;return!0}else{if(h==="function")return t(this);if(t==="match")return i(this);var v=/^(empty|editable)$/.test(t)?this["is"+u.capitalize(t)]():t==="type"?u.hyphenate(this._class):this[t];if(t==="class"){if(typeof i=="function")return this instanceof i;v=this._class}if(typeof i=="function")return!!i(v);if(i){if(i.test)return i.test(v);if(u.isPlainObject(i))return o(i,v)}return u.equals(v,i)}},getItems:function(t){return He._getItems(this,t,this._matrix)},getItem:function(t){return He._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(i,o,h,d,v){if(!d){var D=typeof o=="object"&&o,A=D&&D.overlapping,T=D&&D.inside,P=A||T,z=P&&Ie.read([P]);d={items:[],recursive:D&&D.recursive!==!1,inside:!!T,overlapping:!!A,rect:z,path:A&&new ai.Rectangle({rectangle:z,insert:!1})},D&&(o=u.filter({},o,{recursive:!0,inside:!0,overlapping:!0}))}var F=i._children,V=d.items,z=d.rect;h=z&&(h||new At);for(var R=0,J=F&&F.length;R<J;R++){var Y=F[R],ie=h&&h.appended(Y._matrix),j=!0;if(z){var P=Y.getBounds(ie);if(!z.intersects(P))continue;z.contains(P)||d.overlapping&&(P.contains(z)||d.path.intersects(Y,ie))||(j=!1)}if(j&&Y.matches(o)&&(V.push(Y),v)||(d.recursive!==!1&&t(Y,o,ie,d,v),v&&V.length>0))break}return V}}},{importJSON:function(t){var i=u.importJSON(t,this);return i!==this?this.addChild(i):i},addChild:function(t){return this.insertChild(n,t)},insertChild:function(t,i){var o=i?this.insertChildren(t,[i]):null;return o&&o[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,i){var o=this._children;if(o&&i&&i.length>0){i=u.slice(i);for(var h={},d=i.length-1;d>=0;d--){var v=i[d],D=v&&v._id;!v||h[D]?i.splice(d,1):(v._remove(!1,!0),h[D]=!0)}u.splice(o,i,t,0);for(var A=this._project,T=A._changes,d=0,P=i.length;d<P;d++){var v=i[d],F=v._name;v._parent=this,v._setProject(A,!0),F&&v.setName(F),T&&v._changed(5)}this._changed(11)}else i=null;return i},_insertItem:"#insertChild",_insertAt:function(t,i){var o=t&&t._getOwner(),h=t!==this&&o?this:null;return h&&(h._remove(!1,!0),o._insertItem(t._index+i,h)),h},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(n,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var i=this._children;if(i&&i.length===1){var o=i[0].reduce(t);return this._parent?(o.insertAbove(this),this.remove()):o.remove(),o}return this},_removeNamed:function(){var t=this._getOwner();if(t){var i=t._children,o=t._namedChildren,h=this._name,d=o[h],v=d?d.indexOf(this):-1;v!==-1&&(i[h]==this&&delete i[h],d.splice(v,1),d.length?i[h]=d[0]:delete o[h])}},_remove:function(t,i){var o=this._getOwner(),h=this._project,d=this._index;return this._style&&this._style._dispose(),o?(this._name&&this._removeNamed(),d!=null&&(h._activeLayer===this&&(h._activeLayer=this.getNextSibling()||this.getPreviousSibling()),u.splice(o._children,null,d,1)),this._installEvents(!1),t&&h._changes&&this._changed(5),i&&o._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var i=t&&t.insertBelow(this);return i&&this.remove(),i},removeChildren:function(t,i){if(!this._children)return null;t=t||0,i=u.pick(i,this._children.length);for(var o=u.splice(this._children,null,t,i-t),h=o.length-1;h>=0;h--)o[h]._remove(!0,!1);return o.length>0&&this._changed(11),o},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,i=this._children.length;t<i;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var i=this._children,o=i?i.length:0;if(t){for(var h=0;h<o;h++)if(!i[h].isEmpty(t))return!1;return!0}return!o},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function i(D){var A=[];do A.unshift(D);while(D=D._parent);return A}for(var o=i(this),h=i(t),d=0,v=Math.min(o.length,h.length);d<v;d++)if(o[d]!=h[d])return o[d]._index<h[d]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(t){return this._getOrder(t)===-1},isBelow:function(t){return this._getOrder(t)===1},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var i=this;i=i._parent;)if(i===t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var i=this._parent;i;){if(i._parent&&/^(Group|Layer|CompoundPath)$/.test(i._class)&&t.isDescendant(i))return!0;i=i._parent}return!1}},u.each(["rotate","scale","shear","skew"],function(t){var i=t==="rotate";this[t]=function(){var o=arguments,h=(i?u:re).read(o),d=re.read(o,0,{readNull:!0});return this.transform(new At()[t](h,d||this.getPosition(!0)))}},{translate:function(){var t=new At;return this.transform(t.translate.apply(t,arguments))},transform:function(t,i,o){var h=this._matrix,d=t&&!t.isIdentity(),v=o&&this._canApplyMatrix||this._applyMatrix&&(d||!h.isIdentity()||i&&this._children);if(!d&&!v)return this;if(d){!t.isInvertible()&&h.isInvertible()&&(h._backup=h.getValues()),h.prepend(t,!0);var D=this._style,A=D.getFillColor(!0),T=D.getStrokeColor(!0);A&&A.transform(t),T&&T.transform(t)}if(v&&(v=this._transformContent(h,i,o))){var P=this._pivot;P&&h._transformPoint(P,P,!0),h.reset(!0),o&&this._canApplyMatrix&&(this._applyMatrix=!0)}var F=this._bounds,V=this._position;(d||v)&&this._changed(25);var z=d&&F&&t.decompose();if(z&&z.skewing.isZero()&&z.rotation%90===0){for(var R in F){var J=F[R];if(J.nonscaling)delete F[R];else if(v||!J.internal){var Y=J.rect;t._transformBounds(Y,Y)}}this._bounds=F;var ie=F[this._getBoundsCacheKey(this._boundsOptions||{})];ie&&(this._position=this._getPositionFromBounds(ie.rect))}else d&&V&&this._pivot&&(this._position=t._transformPoint(V,V));return this},_transformContent:function(t,i,o){var h=this._children;if(h){for(var d=0,v=h.length;d<v;d++)h[d].transform(t,i,o);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(re.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(re.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(re.read(arguments))},localToParent:function(){return this._matrix._transformPoint(re.read(arguments))},fitBounds:function(t,i){t=Ie.read(arguments);var o=this.getBounds(),h=o.height/o.width,d=t.height/t.width,v=(i?h>d:h<d)?t.width/o.width:t.height/o.height,D=new Ie(new re,new nt(o.width*v,o.height*v));D.setCenter(t.getCenter()),this.setBounds(D)}}),{_setStyles:function(t,i,o){var h=this._style,d=this._matrix;if(h.hasFill()&&(t.fillStyle=h.getFillColor().toCanvasStyle(t,d)),h.hasStroke()){t.strokeStyle=h.getStrokeColor().toCanvasStyle(t,d),t.lineWidth=h.getStrokeWidth();var v=h.getStrokeJoin(),D=h.getStrokeCap(),A=h.getMiterLimit();if(v&&(t.lineJoin=v),D&&(t.lineCap=D),A&&(t.miterLimit=A),ar.support.nativeDash){var T=h.getDashArray(),P=h.getDashOffset();T&&T.length&&("setLineDash"in t?(t.setLineDash(T),t.lineDashOffset=P):(t.mozDash=T,t.mozDashOffset=P))}}if(h.hasShadow()){var F=i.pixelRatio||1,V=o._shiftless().prepend(new At().scale(F,F)),z=V.transform(new re(h.getShadowBlur(),0)),R=V.transform(this.getShadowOffset());t.shadowColor=h.getShadowColor().toCanvasStyle(t),t.shadowBlur=z.getLength(),t.shadowOffsetX=R.x,t.shadowOffsetY=R.y}},draw:function(t,i,o){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var h=i.matrices,d=i.viewMatrix,v=this._matrix,D=h[h.length-1].appended(v);if(D.isInvertible()){d=d?d.appended(D):D,h.push(D),i.updateMatrix&&(this._globalMatrix=D);var A=this._blendMode,T=Ae.clamp(this._opacity,0,1),P=A==="normal",F=Ai.nativeModes[A],V=P&&T===1||i.dontStart||i.clip||(F||P&&T<1)&&this._canComposite(),z=i.pixelRatio||1,R,J,Y;if(!V){var ie=this.getStrokeBounds(d);if(!ie.width||!ie.height){h.pop();return}Y=i.offset,J=i.offset=ie.getTopLeft().floor(),R=t,t=di.getContext(ie.getSize().ceil().add(1).multiply(z)),z!==1&&t.scale(z,z)}t.save();var j=o?o.appended(v):this._canScaleStroke&&!this.getStrokeScaling(!0)&&d,X=!V&&i.clipItem,I=!j||X;if(V?(t.globalAlpha=T,F&&(t.globalCompositeOperation=A)):I&&t.translate(-J.x,-J.y),I&&(V?v:d).applyToContext(t),X&&i.clipItem.draw(t,i.extend({clip:!0})),j){t.setTransform(z,0,0,z,0,0);var G=i.offset;G&&t.translate(-G.x,-G.y)}this._draw(t,i,d,j),t.restore(),h.pop(),i.clip&&!i.dontFinish&&t.clip(this.getFillRule()),V||(Ai.process(A,t,R,T,J.subtract(Y).multiply(z)),di.release(t),i.offset=Y)}}},_isUpdated:function(t){var i=this._parent;if(i instanceof hs)return i._isUpdated(t);var o=this._updateVersion===t;return!o&&i&&i._visible&&i._isUpdated(t)&&(this._updateVersion=t,o=!0),o},_drawSelection:function(t,i,o,h,d){var v=this._selection,D=v&1,A=v&2||D&&this._selectBounds,T=v&4;if(this._drawSelected||(D=!1),(D||A||T)&&this._isUpdated(d)){var P,F=this.getSelectedColor(!0)||(P=this.getLayer())&&P.getSelectedColor(!0),V=i.appended(this.getGlobalMatrix(!0)),z=o/2;if(t.strokeStyle=t.fillStyle=F?F.toCanvasStyle(t):"#009dec",D&&this._drawSelected(t,V,h),T){var R=this.getPosition(!0),J=this._parent,Y=J?J.localToGlobal(R):R,ie=Y.x,j=Y.y;t.beginPath(),t.arc(ie,j,z,0,Math.PI*2,!0),t.stroke();for(var X=[[0,-1],[1,0],[0,1],[-1,0]],I=z,G=o+1,te=0;te<4;te++){var pe=X[te],oe=pe[0],Ee=pe[1];t.moveTo(ie+oe*I,j+Ee*I),t.lineTo(ie+oe*G,j+Ee*G),t.stroke()}}if(A){var $e=V._transformCorners(this.getInternalBounds());t.beginPath();for(var te=0;te<8;te++)t[te?"lineTo":"moveTo"]($e[te],$e[++te]);t.closePath(),t.stroke();for(var te=0;te<8;te++)t.fillRect($e[te]-z,$e[++te]-z,o,o)}}},_canComposite:function(){return!1}},u.each(["down","drag","up","move"],function(t){this["removeOn"+u.capitalize(t)]=function(){var i={};return i[t]=!0,this.removeOn(i)}},{removeOn:function(t){for(var i in t)if(t[i]){var o="mouse"+i,h=this._project,d=h._removeSets=h._removeSets||{};d[o]=d[o]||{},d[o][this._id]=this}return this}}),{tween:function(t,i,o){o||(o=i,i=t,t=null,o||(o=i,i=null));var h=o&&o.easing,d=o&&o.start,v=o!=null&&(typeof o=="number"?o:o.duration),D=new fs(this,t,i,v,h,d);function A(T){D._handleFrame(T.time*1e3),D.running||this.off("frame",A)}return v&&this.on("frame",A),D},tweenTo:function(t,i){return this.tween(null,t,i)},tweenFrom:function(t,i){return this.tween(t,null,i)}}),_e=He.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(i){t.base.call(this,i),i&2050&&(this._clipItem=n)},_getClipItem:function(){var t=this._clipItem;if(t===n){t=null;for(var i=this._children,o=0,h=i.length;o<h;o++)if(i[o]._clipMask){t=i[o];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var i=this.getFirstChild();i&&i.setClipMask(t)},_getBounds:function t(i,o){var h=this._getClipItem();return h?h._getCachedBounds(h._matrix.prepended(i),u.set({},o,{stroke:!1})):t.base.call(this,i,o)},_hitTestChildren:function t(i,o,h){var d=this._getClipItem();return(!d||d.contains(i))&&t.base.call(this,i,o,h,d)},_draw:function(t,i){var o=i.clip,h=!o&&this._getClipItem();i=i.extend({clipItem:h,clip:!1}),o?(t.beginPath(),i.dontStart=i.dontFinish=!0):h&&h.draw(t,i.extend({clip:!0}));for(var d=this._children,v=0,D=d.length;v<D;v++){var A=d[v];A!==h&&A.draw(t,i)}}}),Sr=_e.extend({_class:"Layer",initialize:function(){_e.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function t(){return this._parent?t.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),On=He.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,i){this._initialize(t,i)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&u.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new tn(t.width,t.height,this,"setSize")},setSize:function(){var t=nt.read(arguments);if(!this._size)this._size=t.clone();else if(!this._size.equals(t)){var i=this._type,o=t.width,h=t.height;i==="rectangle"?this._radius.set(nt.min(this._radius,t.divide(2).abs())):i==="circle"?(o=h=(o+h)/2,this._radius=o/2):i==="ellipse"&&this._radius._set(o/2,h/2),this._size._set(o,h),this._changed(9)}},getRadius:function(){var t=this._radius;return this._type==="circle"?t:new tn(t.width,t.height,this,"setRadius")},setRadius:function(t){var i=this._type;if(i==="circle"){if(t===this._radius)return;var o=t*2;this._radius=t,this._size._set(o,o)}else if(t=nt.read(arguments),!this._radius)this._radius=t.clone();else{if(this._radius.equals(t))return;if(this._radius.set(t),i==="rectangle"){var o=nt.max(this._size,t.multiply(2));this._size.set(o)}else i==="ellipse"&&this._size._set(t.width*2,t.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var i=new ai[u.capitalize(this._type)]({center:new re,size:this._size,radius:this._radius,insert:!1});return i.copyAttributes(this),ar.settings.applyMatrix&&i.setApplyMatrix(!0),(t===n||t)&&i.insertAbove(this),i},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,i,o,h){var d=this._style,v=d.hasFill(),D=d.hasStroke(),A=i.dontFinish||i.clip,T=!h;if(v||D||A){var P=this._type,F=this._radius,V=P==="circle";if(i.dontStart||t.beginPath(),T&&V)t.arc(0,0,F,0,Math.PI*2,!0);else{var z=V?F:F.width,R=V?F:F.height,J=this._size,Y=J.width,ie=J.height;if(T&&P==="rectangle"&&z===0&&R===0)t.rect(-Y/2,-ie/2,Y,ie);else{var j=Y/2,X=ie/2,I=1-.5522847498307936,G=z*I,te=R*I,pe=[-j,-X+R,-j,-X+te,-j+G,-X,-j+z,-X,j-z,-X,j-G,-X,j,-X+te,j,-X+R,j,X-R,j,X-te,j-G,X,j-z,X,-j+z,X,-j+G,X,-j,X-te,-j,X-R];h&&h.transform(pe,pe,32),t.moveTo(pe[0],pe[1]),t.bezierCurveTo(pe[2],pe[3],pe[4],pe[5],pe[6],pe[7]),j!==z&&t.lineTo(pe[8],pe[9]),t.bezierCurveTo(pe[10],pe[11],pe[12],pe[13],pe[14],pe[15]),X!==R&&t.lineTo(pe[16],pe[17]),t.bezierCurveTo(pe[18],pe[19],pe[20],pe[21],pe[22],pe[23]),j!==z&&t.lineTo(pe[24],pe[25]),t.bezierCurveTo(pe[26],pe[27],pe[28],pe[29],pe[30],pe[31])}}t.closePath()}!A&&(v||D)&&(this._setStyles(t,i,o),v&&(t.fill(d.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),D&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,i){var o=new Ie(this._size).setCenter(0,0),h=this._style,d=i.stroke&&h.hasStroke()&&h.getStrokeWidth();return t&&(o=t._transformBounds(o)),d?o.expand(ai._getStrokePadding(d,this._getStrokeMatrix(t,i))):o}},new function(){function t(o,h,d){var v=o._radius;if(!v.isZero())for(var D=o._size.divide(2),A=1;A<=4;A++){var T=new re(A>1&&A<4?-1:1,A>2?-1:1),P=T.multiply(D),F=P.subtract(T.multiply(v)),V=new Ie(d?P.add(T.multiply(d)):P,F);if(V.contains(h))return{point:F,quadrant:A}}}function i(o,h,d,v){var D=o.divide(h);return(!v||D.isInQuadrant(v))&&D.subtract(D.normalize()).multiply(h).divide(d).length<=1}return{_contains:function o(h){if(this._type==="rectangle"){var d=t(this,h);return d?h.subtract(d.point).divide(this._radius).getLength()<=1:o.base.call(this,h)}else return h.divide(this.size).getLength()<=.5},_hitTestSelf:function o(h,d,v,D){var A=!1,T=this._style,P=d.stroke&&T.hasStroke(),F=d.fill&&T.hasFill();if(P||F){var V=this._type,z=this._radius,R=P?T.getStrokeWidth()/2:0,J=d._tolerancePadding.add(ai._getStrokePadding(R,!T.getStrokeScaling()&&D));if(V==="rectangle"){var Y=J.multiply(2),ie=t(this,h,Y);if(ie)A=i(h.subtract(ie.point),z,J,ie.quadrant);else{var j=new Ie(this._size).setCenter(0,0),X=j.expand(Y),I=j.expand(Y.negate());A=X._containsPoint(h)&&!I._containsPoint(h)}}else A=i(h,z,J)}return A?new oi(P?"stroke":"fill",this):o.base.apply(this,arguments)}}},{statics:new function(){function t(i,o,h,d,v){var D=u.create(On.prototype);return D._type=i,D._size=h,D._radius=d,D._initialize(u.getNamed(v),o),D}return{Circle:function(){var i=arguments,o=re.readNamed(i,"center"),h=u.readNamed(i,"radius");return t("circle",o,new nt(h*2),h,i)},Rectangle:function(){var i=arguments,o=Ie.readNamed(i,"rectangle"),h=nt.min(nt.readNamed(i,"radius"),o.getSize(!0).divide(2));return t("rectangle",o.getCenter(!0),o.getSize(!0),h,i)},Ellipse:function(){var i=arguments,o=On._readEllipse(i),h=o.radius;return t("ellipse",o.center,h.multiply(2),h,i)},_readEllipse:function(i){var o,h;if(u.hasNamed(i,"radius"))o=re.readNamed(i,"center"),h=nt.readNamed(i,"radius");else{var d=Ie.readNamed(i,"rectangle");o=d.getCenter(!0),h=d.getSize(!0).divide(2)}return{center:o,radius:h}}}}}),Kr=He.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,i){if(!this._initialize(t,i!==n&&re.read(arguments))){var o,h=typeof t,d=h==="string"?c.getElementById(t):h==="object"?t:null;if(d&&d!==He.NO_INSERT){if(d.getContext||d.naturalHeight!=null)o=d;else if(d){var v=nt.read(arguments);v.isZero()||(o=di.getCanvas(v))}}o?this.setImage(o):this.setSource(t)}this._size||(this._size=new nt,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var i=t._image,o=t._canvas;if(i)this._setImage(i);else if(o){var h=di.getCanvas(t._size);h.getContext("2d").drawImage(o,0,0),this._setImage(h)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new tn(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,i){var o=nt.read(arguments);if(o.equals(this._size))i&&this.clear();else if(o.width>0&&o.height>0){var h=!i&&this.getElement();this._setImage(di.getCanvas(o)),h&&this.getContext(!0).drawImage(h,0,0,o.width,o.height)}else this._canvas&&di.release(this._canvas),this._size=o.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||t.width===0&&t.height===0},getResolution:function(){var t=this._matrix,i=new re(0,0).transform(t),o=new re(1,0).transform(t).subtract(i),h=new re(0,1).transform(t).subtract(i);return new nt(72/o.getLength(),72/h.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var i=this;function o(h){var d=i.getView(),v=h&&h.type||"load";d&&i.responds(v)&&(ar=d._scope,i.emit(v,new xo(h)))}this._setImage(t),this._loaded?setTimeout(o,0):t&&Fi.add(t,{load:function(h){i._setImage(t),o(h)},error:o})},_setImage:function(t){this._canvas&&di.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new nt(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=di.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch{di.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var i=new e.Image,o=this._crossOrigin;o&&(i.crossOrigin=o),t&&(i.src=t),this.setImage(i)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var i=this._image;i&&(i.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=typeof t=="string"?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=Ie.read(arguments),i=di.getContext(t.getSize());return i.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),i.canvas},getSubRaster:function(){var t=Ie.read(arguments),i=new Kr(He.NO_INSERT);return i._setImage(this.getSubCanvas(t)),i.translate(t.getCenter().subtract(this.getSize().divide(2))),i._matrix.prepend(this._matrix),i.insertAbove(this),i},toDataURL:function(){var t=this._image,i=t&&t.src;if(/^data:/.test(i))return i;var o=this.getCanvas();return o?o.toDataURL.apply(o,arguments):null},drawImage:function(t){var i=re.read(arguments,1);this.getContext(!0).drawImage(t,i.x,i.y)},getAverageColor:function(t){var i,o;if(t?t instanceof Pi?(o=t,i=t.getBounds()):typeof t=="object"&&("width"in t?i=new Ie(t):"x"in t&&(i=new Ie(t.x-.5,t.y-.5,1,1))):i=this.getBounds(),!i)return null;var h=32,d=Math.min(i.width,h),v=Math.min(i.height,h),D=Kr._sampleContext;D?D.clearRect(0,0,h+1,h+1):D=Kr._sampleContext=di.getContext(new nt(h)),D.save();var A=new At().scale(d/i.width,v/i.height).translate(-i.x,-i.y);A.applyToContext(D),o&&o.draw(D,new u({clip:!0,matrices:[A]})),this._matrix.applyToContext(D);var T=this.getElement(),P=this._size;T&&D.drawImage(T,-P.width/2,-P.height/2),D.restore();for(var F=D.getImageData(.5,.5,Math.ceil(d),Math.ceil(v)).data,V=[0,0,0],z=0,R=0,J=F.length;R<J;R+=4){var Y=F[R+3];z+=Y,Y/=255,V[0]+=F[R]*Y,V[1]+=F[R+1]*Y,V[2]+=F[R+2]*Y}for(var R=0;R<3;R++)V[R]/=z;return z?Zi.read(V):null},getPixel:function(){var t=re.read(arguments),i=this.getContext().getImageData(t.x,t.y,1,1).data;return new Zi("rgb",[i[0]/255,i[1]/255,i[2]/255],i[3]/255)},setPixel:function(){var t=arguments,i=re.read(t),o=Zi.read(t),h=o._convert("rgb"),d=o._alpha,v=this.getContext(!0),D=v.createImageData(1,1),A=D.data;A[0]=h[0]*255,A[1]=h[1]*255,A[2]=h[2]*255,A[3]=d!=null?d*255:255,v.putImageData(D,i.x,i.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=nt.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=Ie.read(arguments);return t.isEmpty()&&(t=new Ie(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},putImageData:function(t){var i=re.read(arguments,1);this.getContext(!0).putImageData(t,i.x,i.y)},setImageData:function(t){this.setSize(t),this.getContext(!0).putImageData(t,0,0)},_getBounds:function(t,i){var o=new Ie(this._size).setCenter(0,0);return t?t._transformBounds(o):o},_hitTestSelf:function(t){if(this._contains(t)){var i=this;return new oi("pixel",i,{offset:t.add(i._size.divide(2)).round(),color:{get:function(){return i.getPixel(this.offset)}}})}},_draw:function(t,i,o){var h=this.getElement();if(h&&h.width>0&&h.height>0){t.globalAlpha=Ae.clamp(this._opacity,0,1),this._setStyles(t,i,o);var d=this._smoothing,v=d==="off";Ti.setPrefixed(t,v?"imageSmoothingEnabled":"imageSmoothingQuality",v?!1:d),t.drawImage(h,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Mi=He.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,i){this._initialize(t,i!==n&&re.read(arguments,1))||this.setDefinition(t instanceof ei?t:new ei(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,i){var o=this._definition._item;return o._getCachedBounds(o._matrix.prepended(t),i)},_hitTestSelf:function(t,i,o){var h=i.extend({all:!1}),d=this._definition._item._hitTest(t,h,o);return d&&(d.item=this),d},_draw:function(t,i){this._definition._item.draw(t,i)}}),ei=u.extend({_class:"SymbolDefinition",initialize:function(t,i){this._id=rt.get(),this.project=ar.project,t&&this.setItem(t,i)},_serialize:function(t,i){return i.add(this,function(){return u.serialize([this._class,this._item],t,!1,i)})},_changed:function(t){t&8&&He._clearBoundsCache(this),t&1&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,i){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),i||t.setPosition(new re),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new Mi(this,t)},clone:function(){return new ei(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),oi=u.extend({_class:"HitResult",initialize:function(t,i,o){this.type=t,this.item=i,o&&this.inject(o)},statics:{getOptions:function(t){var i=t&&u.read(t);return new u({type:null,tolerance:ar.settings.hitTolerance,fill:!i,stroke:!i,segments:!i,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},i)}}}),xr=u.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,i,o,h,d,v){var D=arguments.length,A,T,P,F;D>0&&(t==null||typeof t=="object"?D===1&&t&&"point"in t?(A=t.point,T=t.handleIn,P=t.handleOut,F=t.selection):(A=t,T=i,P=o,F=h):(A=[t,i],T=o!==n?[o,h]:null,P=d!==n?[d,v]:null)),new Ts(A,this,"_point"),new Ts(T,this,"_handleIn"),new Ts(P,this,"_handleOut"),F&&this.setSelection(F)},_serialize:function(t,i){var o=this._point,h=this._selection,d=h||this.hasHandles()?[o,this._handleIn,this._handleOut]:o;return h&&d.push(h),u.serialize(d,t,!0,i)},_changed:function(t){var i=this._path;if(i){var o=i._curves,h=this._index,d;o&&((!t||t===this._point||t===this._handleIn)&&(d=h>0?o[h-1]:i._closed?o[o.length-1]:null)&&d._changed(),(!t||t===this._point||t===this._handleOut)&&(d=o[h])&&d._changed()),i._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(re.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(re.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(re.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,i=this._handleOut;return!t.isZero()&&!i.isZero()&&t.isCollinear(i)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var i=this._selection,o=this._path;this._selection=t=t||0,o&&t!==i&&(o._updateSelection(this,i,t),o._changed(257))},_changeSelection:function(t,i){var o=this._selection;this.setSelection(i?o|t:o&~t)},isSelected:function(){return!!(this._selection&7)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,i=this._index;return t?(i>0&&!t._closed&&i===t._segments.length-1&&i--,t.getCurves()[i]||null):null},getLocation:function(){var t=this.getCurve();return t?new si(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,i,o){var h=t||{},d=h.type,v=h.factor,D=this.getPrevious(),A=this.getNext(),T=(D||this)._point,P=this._point,F=(A||this)._point,V=T.getDistance(P),z=P.getDistance(F);if(!d||d==="catmull-rom"){var R=v===n?.5:v,J=Math.pow(V,R),Y=J*J,ie=Math.pow(z,R),j=ie*ie;if(!i&&D){var X=2*j+3*ie*J+Y,I=3*ie*(ie+J);this.setHandleIn(I!==0?new re((j*T._x+X*P._x-Y*F._x)/I-P._x,(j*T._y+X*P._y-Y*F._y)/I-P._y):new re)}if(!o&&A){var X=2*Y+3*J*ie+j,I=3*J*(J+ie);this.setHandleOut(I!==0?new re((Y*F._x+X*P._x-j*T._x)/I-P._x,(Y*F._y+X*P._y-j*T._y)/I-P._y):new re)}}else if(d==="geometric"){if(D&&A){var G=T.subtract(F),te=v===n?.4:v,pe=te*V/(V+z);i||this.setHandleIn(G.multiply(pe)),o||this.setHandleOut(G.multiply(pe-te))}}else throw new Error("Smoothing method '"+d+"' not supported.")},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,i=this._handleOut,o=t.clone();t.set(i),i.set(o)},reversed:function(){return new xr(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new xr(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,i,o){var h=1-o,d=o,v=t._point,D=i._point,A=t._handleIn,T=i._handleIn,P=i._handleOut,F=t._handleOut;this._point._set(h*v._x+d*D._x,h*v._y+d*D._y,!0),this._handleIn._set(h*A._x+d*T._x,h*A._y+d*T._y,!0),this._handleOut._set(h*F._x+d*P._x,h*F._y+d*P._y,!0),this._changed()},_transformCoordinates:function(t,i,o){var h=this._point,d=!o||!this._handleIn.isZero()?this._handleIn:null,v=!o||!this._handleOut.isZero()?this._handleOut:null,D=h._x,A=h._y,T=2;return i[0]=D,i[1]=A,d&&(i[T++]=d._x+D,i[T++]=d._y+A),v&&(i[T++]=v._x+D,i[T++]=v._y+A),t&&(t._transformCoordinates(i,i,T/2),D=i[0],A=i[1],o?(h._x=D,h._y=A,T=2,d&&(d._x=i[T++]-D,d._y=i[T++]-A),v&&(v._x=i[T++]-D,v._y=i[T++]-A)):(d||(i[T++]=D,i[T++]=A),v||(i[T++]=D,i[T++]=A))),i}}),Ts=re.extend({initialize:function(t,i,o){var h,d,v;if(!t)h=d=0;else if((h=t[0])!==n)d=t[1];else{var D=t;(h=D.x)===n&&(D=re.read(arguments),h=D.x),d=D.y,v=D.selected}this._x=h,this._y=d,this._owner=i,i[o]=this,v&&this.setSelected(!0)},_set:function(t,i){return this._x=t,this._y=i,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=Ae.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),Fn=u.extend({_class:"Curve",beans:!0,initialize:function(t,i,o,h,d,v,D,A){var T=arguments.length,P,F,V,z,R,J;T===3?(this._path=t,P=i,F=o):T?T===1?"segment1"in t?(P=new xr(t.segment1),F=new xr(t.segment2)):"point1"in t?(V=t.point1,R=t.handle1,J=t.handle2,z=t.point2):Array.isArray(t)&&(V=[t[0],t[1]],z=[t[6],t[7]],R=[t[2]-t[0],t[3]-t[1]],J=[t[4]-t[6],t[5]-t[7]]):T===2?(P=new xr(t),F=new xr(i)):T===4?(V=t,R=i,J=o,z=h):T===8&&(V=[t,i],z=[D,A],R=[o-t,h-i],J=[d-D,v-A]):(P=new xr,F=new xr),this._segment1=P||new xr(V,null,R),this._segment2=F||new xr(z,J,null)},_serialize:function(t,i){return u.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,i)},_changed:function(){this._length=this._bounds=n},clone:function(){return new Fn(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return Fn.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var i=this._segment2,o=i._handleOut;t=i.remove(),t&&this._segment1._handleOut.set(o)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(re.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(re.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(re.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(re.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return Fn.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),i=[],o=0;o<8;o+=2)i.push(new re(t[o],t[o+1]));return i}},{getLength:function(){return this._length==null&&(this._length=Fn.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Fn.getArea(this.getValues())},getLine:function(){return new an(this._segment1._point,this._segment2._point)},getPart:function(t,i){return new Fn(Fn.getPart(this.getValues(),t,i))},getPartLength:function(t,i){return Fn.getLength(this.getValues(),t,i)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,i){var o=1e-8,h=1-o,d=null;if(t>=o&&t<=h){var v=Fn.subdivide(this.getValues(),t),D=v[0],A=v[1],T=i||this.hasHandles(),P=this._segment1,F=this._segment2,V=this._path;T&&(P._handleOut._set(D[2]-D[0],D[3]-D[1]),F._handleIn._set(A[4]-A[6],A[5]-A[7]));var z=D[6],R=D[7],J=new xr(new re(z,R),T&&new re(D[4]-z,D[5]-R),T&&new re(A[2]-z,A[3]-R));V?(V.insert(P._index+1,J),d=this.getNext()):(this._segment2=J,this._changed(),d=new Fn(J,F))}return d},splitAt:function(t){var i=this._path;return i?i.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,i){return this.divideAtTime(t===n?.5:i?t:this.getTimeAt(t))},split:function(t,i){return this.splitAtTime(t===n?.5:i?t:this.getTimeAt(t))},reversed:function(){return new Fn(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,i,o,h){var d=t._point,v=t._handleOut,D=i._handleIn,A=i._point,T=d.x,P=d.y,F=A.x,V=A.y,z=h?[T,P,T,P,F,V,F,V]:[T,P,T+v._x,P+v._y,F+D._x,V+D._y,F,V];return o&&o._transformCoordinates(z,z,4),z},subdivide:function(t,i){var o=t[0],h=t[1],d=t[2],v=t[3],D=t[4],A=t[5],T=t[6],P=t[7];i===n&&(i=.5);var F=1-i,V=F*o+i*d,z=F*h+i*v,R=F*d+i*D,J=F*v+i*A,Y=F*D+i*T,ie=F*A+i*P,j=F*V+i*R,X=F*z+i*J,I=F*R+i*Y,G=F*J+i*ie,te=F*j+i*I,pe=F*X+i*G;return[[o,h,V,z,j,X,te,pe],[te,pe,I,G,Y,ie,T,P]]},getMonoCurves:function(t,i){var o=[],h=i?0:1,d=t[h+0],v=t[h+2],D=t[h+4],A=t[h+6];if(d>=v==v>=D&&v>=D==D>=A||Fn.isStraight(t))o.push(t);else{var T=3*(v-D)-d+A,P=2*(d+D)-4*v,F=v-d,V=1e-8,z=1-V,R=[],J=Ae.solveQuadratic(T,P,F,R,V,z);if(!J)o.push(t);else{R.sort();var Y=R[0],ie=Fn.subdivide(t,Y);o.push(ie[0]),J>1&&(Y=(R[1]-Y)/(1-Y),ie=Fn.subdivide(ie[1],Y),o.push(ie[0])),o.push(ie[1])}}return o},solveCubic:function(t,i,o,h,d,v){var D=t[i],A=t[i+2],T=t[i+4],P=t[i+6],F=0;if(!(D<o&&P<o&&A<o&&T<o||D>o&&P>o&&A>o&&T>o)){var V=3*(A-D),z=3*(T-A)-V,R=P-D-V-z;F=Ae.solveCubic(R,z,V,D-o,h,d,v)}return F},getTimeOf:function(t,i){var o=new re(t[0],t[1]),h=new re(t[6],t[7]),d=1e-12,v=1e-7,D=i.isClose(o,d)?0:i.isClose(h,d)?1:null;if(D===null)for(var A=[i.x,i.y],T=[],P=0;P<2;P++)for(var F=Fn.solveCubic(t,P,A[P],T,0,1),V=0;V<F;V++){var z=T[V];if(i.isClose(Fn.getPoint(t,z),v))return z}return i.isClose(o,v)?0:i.isClose(h,v)?1:null},getNearestTime:function(t,i){if(Fn.isStraight(t)){var o=t[0],h=t[1],d=t[6],v=t[7],D=d-o,A=v-h,T=D*D+A*A;if(T===0)return 0;var P=((i.x-o)*D+(i.y-h)*A)/T;return P<1e-12?0:P>.999999999999?1:Fn.getTimeOf(t,new re(o+P*D,h+P*A))}var F=100,V=1/0,z=0;function R(ie){if(ie>=0&&ie<=1){var j=i.getDistance(Fn.getPoint(t,ie),!0);if(j<V)return V=j,z=ie,!0}}for(var J=0;J<=F;J++)R(J/F);for(var Y=1/(F*2);Y>1e-8;)!R(z-Y)&&!R(z+Y)&&(Y/=2);return z},getPart:function(t,i,o){var h=i>o;if(h){var d=i;i=o,o=d}return i>0&&(t=Fn.subdivide(t,i)[1]),o<1&&(t=Fn.subdivide(t,(o-i)/(1-i))[0]),h?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,i){var o=t[0],h=t[1],d=t[2],v=t[3],D=t[4],A=t[5],T=t[6],P=t[7],F=3*d-2*o-T,V=3*v-2*h-P,z=3*D-2*T-o,R=3*A-2*P-h;return Math.max(F*F,z*z)+Math.max(V*V,R*R)<=16*i*i},getArea:function(t){var i=t[0],o=t[1],h=t[2],d=t[3],v=t[4],D=t[5],A=t[6],T=t[7];return 3*((T-o)*(h+v)-(A-i)*(d+D)+d*(i-v)-h*(o-D)+T*(v+i/3)-A*(D+o/3))/20},getBounds:function(t){for(var i=t.slice(0,2),o=i.slice(),h=[0,0],d=0;d<2;d++)Fn._addBounds(t[d],t[d+2],t[d+4],t[d+6],d,0,i,o,h);return new Ie(i[0],i[1],o[0]-i[0],o[1]-i[1])},_addBounds:function(t,i,o,h,d,v,D,A,T){function P(te,pe){var oe=te-pe,Ee=te+pe;oe<D[d]&&(D[d]=oe),Ee>A[d]&&(A[d]=Ee)}v/=2;var F=D[d]+v,V=A[d]-v;if(t<F||i<F||o<F||h<F||t>V||i>V||o>V||h>V)if(i<t!=i<h&&o<t!=o<h)P(t,0),P(h,0);else{var z=3*(i-o)-t+h,R=2*(t+o)-4*i,J=i-t,Y=Ae.solveQuadratic(z,R,J,T),ie=1e-8,j=1-ie;P(h,0);for(var X=0;X<Y;X++){var I=T[X],G=1-I;ie<=I&&I<=j&&P(G*G*G*t+3*G*G*I*i+3*G*I*I*o+I*I*I*h,v)}}}}},u.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var i=this._bounds[t];return i||(i=this._bounds[t]=ai[t]([this._segment1,this._segment2],!1,this._path)),i.clone()}},{}),u.each({isStraight:function(t,i,o,h){if(i.isZero()&&o.isZero())return!0;var d=h.subtract(t);if(d.isZero())return!1;if(d.isCollinear(i)&&d.isCollinear(o)){var v=new an(t,h),D=1e-7;if(v.getDistance(t.add(i))<D&&v.getDistance(h.add(o))<D){var A=d.dot(d),T=d.dot(i)/A,P=d.dot(o)/A;return T>=0&&T<=1&&P<=0&&P>=-1}}return!1},isLinear:function(t,i,o,h){var d=h.subtract(t).divide(3);return i.equals(d)&&o.negate().equals(d)}},function(t,i){this[i]=function(o){var h=this._segment1,d=this._segment2;return t(h._point,h._handleOut,d._handleIn,d._point,o)},this.statics[i]=function(o,h){var d=o[0],v=o[1],D=o[6],A=o[7];return t(new re(d,v),new re(o[2]-d,o[3]-v),new re(o[4]-D,o[5]-A),new re(D,A),h)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,i){return this.getLocationAtTime(i?t:this.getTimeAt(t))},getLocationAtTime:function(t){return t!=null&&t>=0&&t<=1?new si(this,t):null},getTimeAt:function(t,i){return Fn.getTimeAt(this.getValues(),t,i)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=re.read(arguments);return t.isZero()?[]:Fn.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(re.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return Fn.getTimeOf(this.getValues(),re.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=re.read(arguments),i=this.getValues(),o=Fn.getNearestTime(i,t),h=Fn.getPoint(i,o);return new si(this,o,h,null,t.getDistance(h))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return u.each(t,function(i){this[i+"At"]=function(o,h){var d=this.getValues();return Fn[i](d,h?o:Fn.getTimeAt(d,o))},this[i+"AtTime"]=function(o){return Fn[i](this.getValues(),o)}},{statics:{_evaluateMethods:t}})},new function(){function t(h){var d=h[0],v=h[1],D=h[2],A=h[3],T=h[4],P=h[5],F=h[6],V=h[7],z=9*(D-T)+3*(F-d),R=6*(d+T)-12*D,J=3*(D-d),Y=9*(A-P)+3*(V-v),ie=6*(v+P)-12*A,j=3*(A-v);return function(X){var I=(z*X+R)*X+J,G=(Y*X+ie)*X+j;return Math.sqrt(I*I+G*G)}}function i(h,d){return Math.max(2,Math.min(16,Math.ceil(Math.abs(d-h)*32)))}function o(h,d,v,D){if(d==null||d<0||d>1)return null;var A=h[0],T=h[1],P=h[2],F=h[3],V=h[4],z=h[5],R=h[6],J=h[7],Y=Ae.isZero;Y(P-A)&&Y(F-T)&&(P=A,F=T),Y(V-R)&&Y(z-J)&&(V=R,z=J);var ie=3*(P-A),j=3*(V-P)-ie,X=R-A-ie-j,I=3*(F-T),G=3*(z-F)-I,te=J-T-I-G,pe,oe;if(v===0)pe=d===0?A:d===1?R:((X*d+j)*d+ie)*d+A,oe=d===0?T:d===1?J:((te*d+G)*d+I)*d+T;else{var Ee=1e-8,$e=1-Ee;if(d<Ee?(pe=ie,oe=I):d>$e?(pe=3*(R-V),oe=3*(J-z)):(pe=(3*X*d+2*j)*d+ie,oe=(3*te*d+2*G)*d+I),D){pe===0&&oe===0&&(d<Ee||d>$e)&&(pe=V-P,oe=z-F);var Xe=Math.sqrt(pe*pe+oe*oe);Xe&&(pe/=Xe,oe/=Xe)}if(v===3){var V=6*X*d+2*j,z=6*te*d+2*G,ft=Math.pow(pe*pe+oe*oe,3/2);pe=ft!==0?(pe*z-oe*V)/ft:0,oe=0}}return v===2?new re(oe,-pe):new re(pe,oe)}return{statics:{classify:function(h){var d=h[0],v=h[1],D=h[2],A=h[3],T=h[4],P=h[5],F=h[6],V=h[7],z=d*(V-P)+v*(T-F)+F*P-V*T,R=D*(v-V)+A*(F-d)+d*V-v*F,J=T*(A-v)+P*(d-D)+D*v-A*d,Y=3*J,ie=Y-R,j=ie-R+z,X=Math.sqrt(j*j+ie*ie+Y*Y),I=X!==0?1/X:0,G=Ae.isZero,te="serpentine";j*=I,ie*=I,Y*=I;function pe(Xe,ft,Ze){var yt=ft!==n,Et=yt&&ft>0&&ft<1,Yt=yt&&Ze>0&&Ze<1;return yt&&(!(Et||Yt)||Xe==="loop"&&!(Et&&Yt))&&(Xe="arch",Et=Yt=!1),{type:Xe,roots:Et||Yt?Et&&Yt?ft<Ze?[ft,Ze]:[Ze,ft]:[Et?ft:Ze]:null}}if(G(j))return G(ie)?pe(G(Y)?"line":"quadratic"):pe(te,Y/(3*ie));var oe=3*ie*ie-4*j*Y;if(G(oe))return pe("cusp",ie/(2*j));var Ee=oe>0?Math.sqrt(oe/3):Math.sqrt(-oe),$e=2*j;return pe(oe>0?te:"loop",(ie+Ee)/$e,(ie-Ee)/$e)},getLength:function(h,d,v,D){if(d===n&&(d=0),v===n&&(v=1),Fn.isStraight(h)){var A=h;v<1&&(A=Fn.subdivide(A,v)[0],d/=v),d>0&&(A=Fn.subdivide(A,d)[1]);var T=A[6]-A[0],P=A[7]-A[1];return Math.sqrt(T*T+P*P)}return Ae.integrate(D||t(h),d,v,i(d,v))},getTimeAt:function(h,d,v){if(v===n&&(v=d<0?1:0),d===0)return v;var D=Math.abs,A=1e-12,T=d>0,P=T?v:0,F=T?1:v,V=t(h),z=Fn.getLength(h,P,F,V),R=D(d)-z;if(D(R)<A)return T?F:P;if(R>A)return null;var J=d/z,Y=0;function ie(j){return Y+=Ae.integrate(V,v,j,i(v,j)),v=j,Y-d}return Ae.findRoot(ie,V,v+J,P,F,32,1e-12)},getPoint:function(h,d){return o(h,d,0,!1)},getTangent:function(h,d){return o(h,d,1,!0)},getWeightedTangent:function(h,d){return o(h,d,1,!1)},getNormal:function(h,d){return o(h,d,2,!0)},getWeightedNormal:function(h,d){return o(h,d,2,!1)},getCurvature:function(h,d){return o(h,d,3,!1).x},getPeaks:function(h){var d=h[0],v=h[1],D=h[2],A=h[3],T=h[4],P=h[5],F=h[6],V=h[7],z=-d+3*D-3*T+F,R=3*d-6*D+3*T,J=-3*d+3*D,Y=-v+3*A-3*P+V,ie=3*v-6*A+3*P,j=-3*v+3*A,X=1e-8,I=1-X,G=[];return Ae.solveCubic(9*(z*z+Y*Y),9*(z*R+ie*Y),2*(R*R+ie*ie)+3*(J*z+j*Y),J*R+ie*j,G,X,I),G.sort()}}}},new function(){function t(R,J,Y,ie,j,X,I){var G=!I&&Y.getPrevious()===j,te=!I&&Y!==j&&Y.getNext()===j,pe=1e-8,oe=1-pe;if(ie!==null&&ie>=(G?pe:0)&&ie<=(te?oe:1)&&X!==null&&X>=(te?pe:0)&&X<=(G?oe:1)){var Ee=new si(Y,ie,null,I),$e=new si(j,X,null,I);Ee._intersection=$e,$e._intersection=Ee,(!J||J(Ee))&&si.insert(R,Ee,!0)}}function i(R,J,Y,ie,j,X,I,G,te,pe,oe,Ee,$e){if(++te>=4096||++G>=40)return te;var Xe=1e-9,ft=J[0],Ze=J[1],yt=J[6],Et=J[7],Yt=an.getSignedDistance,qt=Yt(ft,Ze,yt,Et,J[2],J[3]),ln=Yt(ft,Ze,yt,Et,J[4],J[5]),In=qt*ln>0?3/4:4/9,Zn=In*Math.min(0,qt,ln),Kn=In*Math.max(0,qt,ln),ur=Yt(ft,Ze,yt,Et,R[0],R[1]),yn=Yt(ft,Ze,yt,Et,R[2],R[3]),An=Yt(ft,Ze,yt,Et,R[4],R[5]),qn=Yt(ft,Ze,yt,Et,R[6],R[7]),cr=o(ur,yn,An,qn),mr=cr[0],Rr=cr[1],Lr,Ir;if(qt===0&&ln===0&&ur===0&&yn===0&&An===0&&qn===0||(Lr=h(mr,Rr,Zn,Kn))==null||(Ir=h(mr.reverse(),Rr.reverse(),Zn,Kn))==null)return te;var ti=pe+(oe-pe)*Lr,Wr=pe+(oe-pe)*Ir;if(Math.max($e-Ee,Wr-ti)<Xe){var ls=(ti+Wr)/2,Vr=(Ee+$e)/2;t(j,X,I?ie:Y,I?Vr:ls,I?Y:ie,I?ls:Vr)}else{R=Fn.getPart(R,Lr,Ir);var $i=$e-Ee;if(Ir-Lr>.8)if(Wr-ti>$i){var Qi=Fn.subdivide(R,.5),ls=(ti+Wr)/2;te=i(J,Qi[0],ie,Y,j,X,!I,G,te,Ee,$e,ti,ls),te=i(J,Qi[1],ie,Y,j,X,!I,G,te,Ee,$e,ls,Wr)}else{var Qi=Fn.subdivide(J,.5),Vr=(Ee+$e)/2;te=i(Qi[0],R,ie,Y,j,X,!I,G,te,Ee,Vr,ti,Wr),te=i(Qi[1],R,ie,Y,j,X,!I,G,te,Vr,$e,ti,Wr)}else $i===0||$i>=Xe?te=i(J,R,ie,Y,j,X,!I,G,te,Ee,$e,ti,Wr):te=i(R,J,Y,ie,j,X,I,G,te,ti,Wr,Ee,$e)}return te}function o(R,J,Y,ie){var j=[0,R],X=[1/3,J],I=[2/3,Y],G=[1,ie],te=J-(2*R+ie)/3,pe=Y-(R+2*ie)/3,oe;if(te*pe<0)oe=[[j,X,G],[j,I,G]];else{var Ee=te/pe;oe=[Ee>=2?[j,X,G]:Ee<=.5?[j,I,G]:[j,X,I,G],[j,G]]}return(te||pe)<0?oe.reverse():oe}function h(R,J,Y,ie){return R[0][1]<Y?d(R,!0,Y):J[0][1]>ie?d(J,!1,ie):R[0][0]}function d(R,J,Y){for(var ie=R[0][0],j=R[0][1],X=1,I=R.length;X<I;X++){var G=R[X][0],te=R[X][1];if(J?te>=Y:te<=Y)return te===Y?G:ie+(Y-j)*(G-ie)/(te-j);ie=G,j=te}return null}function v(R,J,Y,ie,j){var X=Ae.isZero;if(X(ie)&&X(j)){var I=Fn.getTimeOf(R,new re(J,Y));return I===null?[]:[I]}for(var G=Math.atan2(-j,ie),te=Math.sin(G),pe=Math.cos(G),oe=[],Ee=[],$e=0;$e<8;$e+=2){var Xe=R[$e]-J,ft=R[$e+1]-Y;oe.push(Xe*pe-ft*te,Xe*te+ft*pe)}return Fn.solveCubic(oe,1,0,Ee,0,1),Ee}function D(R,J,Y,ie,j,X,I){for(var G=J[0],te=J[1],pe=J[6],oe=J[7],Ee=v(R,G,te,pe-G,oe-te),$e=0,Xe=Ee.length;$e<Xe;$e++){var ft=Ee[$e],Ze=Fn.getPoint(R,ft),yt=Fn.getTimeOf(J,Ze);yt!==null&&t(j,X,I?ie:Y,I?yt:ft,I?Y:ie,I?ft:yt)}}function A(R,J,Y,ie,j,X){var I=an.intersect(R[0],R[1],R[6],R[7],J[0],J[1],J[6],J[7]);I&&t(j,X,Y,Fn.getTimeOf(R,I),ie,Fn.getTimeOf(J,I))}function T(R,J,Y,ie,j,X){var I=1e-12,G=Math.min,te=Math.max;if(te(R[0],R[2],R[4],R[6])+I>G(J[0],J[2],J[4],J[6])&&G(R[0],R[2],R[4],R[6])-I<te(J[0],J[2],J[4],J[6])&&te(R[1],R[3],R[5],R[7])+I>G(J[1],J[3],J[5],J[7])&&G(R[1],R[3],R[5],R[7])-I<te(J[1],J[3],J[5],J[7])){var pe=V(R,J);if(pe)for(var oe=0;oe<2;oe++){var Ee=pe[oe];t(j,X,Y,Ee[0],ie,Ee[1],!0)}else{var $e=Fn.isStraight(R),Xe=Fn.isStraight(J),ft=$e&&Xe,Ze=$e&&!Xe,yt=j.length;if((ft?A:$e||Xe?D:i)(Ze?J:R,Ze?R:J,Ze?ie:Y,Ze?Y:ie,j,X,Ze,0,0,0,1,0,1),!ft||j.length===yt)for(var oe=0;oe<4;oe++){var Et=oe>>1,Yt=oe&1,qt=Et*6,ln=Yt*6,In=new re(R[qt],R[qt+1]),Zn=new re(J[ln],J[ln+1]);In.isClose(Zn,I)&&t(j,X,Y,Et,ie,Yt)}}}return j}function P(R,J,Y,ie){var j=Fn.classify(R);if(j.type==="loop"){var X=j.roots;t(Y,ie,J,X[0],J,X[1])}return Y}function F(R,J,Y,ie,j,X){var I=1e-7,G=!J;G&&(J=R);for(var te=R.length,pe=J.length,oe=new Array(te),Ee=G?oe:new Array(pe),$e=[],Xe=0;Xe<te;Xe++)oe[Xe]=R[Xe].getValues(ie);if(!G)for(var Xe=0;Xe<pe;Xe++)Ee[Xe]=J[Xe].getValues(j);for(var ft=W.findCurveBoundsCollisions(oe,Ee,I),Ze=0;Ze<te;Ze++){var yt=R[Ze],Et=oe[Ze];G&&P(Et,yt,$e,Y);var Yt=ft[Ze];if(Yt)for(var qt=0;qt<Yt.length;qt++){if(X&&$e.length)return $e;var ln=Yt[qt];if(!G||ln>Ze){var In=J[ln],Zn=Ee[ln];T(Et,Zn,yt,In,$e,Y)}}}return $e}function V(R,J){function Y(qn){var cr=qn[6]-qn[0],mr=qn[7]-qn[1];return cr*cr+mr*mr}var ie=Math.abs,j=an.getDistance,X=1e-8,I=1e-7,G=Fn.isStraight(R),te=Fn.isStraight(J),pe=G&&te,oe=Y(R)<Y(J),Ee=oe?J:R,$e=oe?R:J,Xe=Ee[0],ft=Ee[1],Ze=Ee[6]-Xe,yt=Ee[7]-ft;if(j(Xe,ft,Ze,yt,$e[0],$e[1],!0)<I&&j(Xe,ft,Ze,yt,$e[6],$e[7],!0)<I)!pe&&j(Xe,ft,Ze,yt,Ee[2],Ee[3],!0)<I&&j(Xe,ft,Ze,yt,Ee[4],Ee[5],!0)<I&&j(Xe,ft,Ze,yt,$e[2],$e[3],!0)<I&&j(Xe,ft,Ze,yt,$e[4],$e[5],!0)<I&&(G=te=pe=!0);else if(pe)return null;if(G^te)return null;for(var Et=[R,J],Yt=[],qt=0;qt<4&&Yt.length<2;qt++){var ln=qt&1,In=ln^1,Zn=qt>>1,Kn=Fn.getTimeOf(Et[ln],new re(Et[In][Zn?6:0],Et[In][Zn?7:1]));if(Kn!=null){var ur=ln?[Zn,Kn]:[Kn,Zn];(!Yt.length||ie(ur[0]-Yt[0][0])>X&&ie(ur[1]-Yt[0][1])>X)&&Yt.push(ur)}if(qt>2&&!Yt.length)break}if(Yt.length!==2)Yt=null;else if(!pe){var yn=Fn.getPart(R,Yt[0][0],Yt[1][0]),An=Fn.getPart(J,Yt[0][1],Yt[1][1]);(ie(An[2]-yn[2])>I||ie(An[3]-yn[3])>I||ie(An[4]-yn[4])>I||ie(An[5]-yn[5])>I)&&(Yt=null)}return Yt}function z(R,J){var Y=R[0],ie=R[1],j=R[2],X=R[3],I=R[4],G=R[5],te=R[6],pe=R[7],oe=J.normalize(),Ee=oe.x,$e=oe.y,Xe=3*te-9*I+9*j-3*Y,ft=3*pe-9*G+9*X-3*ie,Ze=6*I-12*j+6*Y,yt=6*G-12*X+6*ie,Et=3*j-3*Y,Yt=3*X-3*ie,qt=2*Xe*$e-2*ft*Ee,ln=[];if(Math.abs(qt)<Ae.CURVETIME_EPSILON){var In=Xe*Yt-ft*Et,qt=Xe*yt-ft*Ze;if(qt!=0){var Zn=-In/qt;Zn>=0&&Zn<=1&&ln.push(Zn)}}else{var Kn=(Ze*Ze-4*Xe*Et)*$e*$e+(-2*Ze*yt+4*ft*Et+4*Xe*Yt)*Ee*$e+(yt*yt-4*ft*Yt)*Ee*Ee,ur=Ze*$e-yt*Ee;if(Kn>=0&&qt!=0){var yn=Math.sqrt(Kn),An=-(ur+yn)/qt,qn=(-ur+yn)/qt;An>=0&&An<=1&&ln.push(An),qn>=0&&qn<=1&&ln.push(qn)}}return ln}return{getIntersections:function(R){var J=this.getValues(),Y=R&&R!==this&&R.getValues();return Y?T(J,Y,this,R,[]):P(J,this,[])},statics:{getOverlaps:V,getIntersections:F,getCurveLineIntersections:v,getTimesWithTangent:z}}}),si=u.extend({_class:"CurveLocation",initialize:function(t,i,o,h,d){if(i>=.99999999){var v=t.getNext();v&&(i=0,t=v)}this._setCurve(t),this._time=i,this._point=o||t.getPointAtTime(i),this._overlap=h,this._distance=d,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var i=t.getCurve();i?this._setCurve(i):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var i=this.getCurve(),o=this.getTime();o===0?t=i._segment1:o===1?t=i._segment2:o!=null&&(t=i.getPartLength(0,o)<i.getPartLength(o,1)?i._segment1:i._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,i=this;t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function o(h){var d=h&&h.getCurve();if(d&&(i._time=d.getTimeOf(i._point))!=null)return i._setCurve(d),d}return this._curve||o(this._segment)||o(this._segment1)||o(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),i=this._time;return t&&i==null?this._time=t.getTimeOf(this._point):i},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(t==null){t=0;var i=this.getPath(),o=this.getIndex();if(i&&o!=null)for(var h=i.getCurves(),d=0;d<o;d++)t+=h[d].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(t==null){var i=this.getCurve(),o=this.getTime();this._curveOffset=t=o!=null&&i&&i.getPartLength(0,o)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),i=t&&t.divideAtTime(this.getTime());return i&&this._setSegment(i._segment1),i},split:function(){var t=this.getCurve(),i=t._path,o=t&&t.splitAtTime(this.getTime());return o&&this._setSegment(i.getLastSegment()),o},equals:function(t,i){var o=this===t;if(!o&&t instanceof si){var h=this.getCurve(),d=t.getCurve(),v=h._path,D=d._path;if(v===D){var A=Math.abs,T=1e-7,P=A(this.getOffset()-t.getOffset()),F=!i&&this._intersection,V=!i&&t._intersection;o=(P<T||v&&A(v.getLength()-P)<T)&&(!F&&!V||F&&V&&F.equals(V,!0))}}return o},toString:function(){var t=[],i=this.getPoint(),o=ve.instance;i&&t.push("point: "+i);var h=this.getIndex();h!=null&&t.push("index: "+h);var d=this.getTime();return d!=null&&t.push("time: "+o.number(d)),this._distance!=null&&t.push("distance: "+o.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var i=this.getCurve(),o=t.getCurve();return!(i.isStraight()&&o.isStraight()&&i.getLine().intersect(o.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var i=this.getTime(),o=t.getTime(),h=1e-8,d=1-h,v=i>=h&&i<=d,D=o>=h&&o<=d;if(v&&D)return!this.isTouching();var A=this.getCurve(),T=A&&i<h?A.getPrevious():A,P=t.getCurve(),F=P&&o<h?P.getPrevious():P;if(i>d&&(A=A.getNext()),o>d&&(P=P.getNext()),!T||!A||!F||!P)return!1;var V=[];function z(Ee,$e){var Xe=Ee.getValues(),ft=Fn.classify(Xe).roots||Fn.getPeaks(Xe),Ze=ft.length,yt=Fn.getLength(Xe,$e&&Ze?ft[Ze-1]:0,!$e&&Ze?ft[0]:1);V.push(Ze?yt:yt/32)}function R(Ee,$e,Xe){return $e<Xe?Ee>$e&&Ee<Xe:Ee>$e||Ee<Xe}v||(z(T,!0),z(A,!1)),D||(z(F,!0),z(P,!1));var J=this.getPoint(),Y=Math.min.apply(Math,V),ie=v?A.getTangentAtTime(i):A.getPointAt(Y).subtract(J),j=v?ie.negate():T.getPointAt(-Y).subtract(J),X=D?P.getTangentAtTime(o):P.getPointAt(Y).subtract(J),I=D?X.negate():F.getPointAt(-Y).subtract(J),G=j.getAngle(),te=ie.getAngle(),pe=I.getAngle(),oe=X.getAngle();return!!(v?R(G,pe,oe)^R(te,pe,oe)&&R(G,oe,pe)^R(te,oe,pe):R(pe,G,te)^R(oe,G,te)&&R(pe,te,G)^R(oe,te,G))},hasOverlap:function(){return!!this._overlap}},u.each(Fn._evaluateMethods,function(t){var i=t+"At";this[t]=function(){var o=this.getCurve(),h=this.getTime();return h!=null&&o&&o[i](h,!0)}},{preserve:!0}),new function(){function t(i,o,h){var d=i.length,v=0,D=d-1;function A(J,Y){for(var ie=J+Y;ie>=-1&&ie<=d;ie+=Y){var j=i[(ie%d+d)%d];if(!o.getPoint().isClose(j.getPoint(),1e-7))break;if(o.equals(j))return j}return null}for(;v<=D;){var T=v+D>>>1,P=i[T],F;if(h&&(F=o.equals(P)?P:A(T,-1)||A(T,1)))return o._overlap&&(F._overlap=F._intersection._overlap=!0),F;var V=o.getPath(),z=P.getPath(),R=V!==z?V._id-z._id:o.getIndex()+o.getTime()-(P.getIndex()+P.getTime());R<0?D=T-1:v=T+1}return i.splice(v,0,o),o}return{statics:{insert:t,expand:function(i){for(var o=i.slice(),h=i.length-1;h>=0;h--)t(o,i[h]._intersection,!1);return o}}}}),Pi=He.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var i,o,h;if(u.isPlainObject(t)?(o=t.segments,i=t.pathData):Array.isArray(t)?o=t:typeof t=="string"&&(i=t),o){var d=o[0];h=d&&Array.isArray(d[0])}else i&&(h=(i.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(i));var v=h?hs:ai;return new v(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var i=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),o,h=!1,d,v,D=new re,A=new re;function T(I,G){var te=+o[I];return h&&(te+=D[G]),te}function P(I){return new re(T(I,"x"),T(I+1,"y"))}this.clear();for(var F=0,V=i&&i.length;F<V;F++){var z=i[F],R=z[0],J=R.toLowerCase();o=z.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var Y=o&&o.length;switch(h=R===J,d==="z"&&!/[mz]/.test(J)&&this.moveTo(D),J){case"m":case"l":for(var ie=J==="m",j=0;j<Y;j+=2)this[ie?"moveTo":"lineTo"](D=P(j)),ie&&(A=D,ie=!1);v=D;break;case"h":case"v":var X=J==="h"?"x":"y";D=D.clone();for(var j=0;j<Y;j++)D[X]=T(j,X),this.lineTo(D);v=D;break;case"c":for(var j=0;j<Y;j+=6)this.cubicCurveTo(P(j),v=P(j+2),D=P(j+4));break;case"s":for(var j=0;j<Y;j+=4)this.cubicCurveTo(/[cs]/.test(d)?D.multiply(2).subtract(v):D,v=P(j),D=P(j+2)),d=J;break;case"q":for(var j=0;j<Y;j+=4)this.quadraticCurveTo(v=P(j),D=P(j+2));break;case"t":for(var j=0;j<Y;j+=2)this.quadraticCurveTo(v=/[qt]/.test(d)?D.multiply(2).subtract(v):D,D=P(j)),d=J;break;case"a":for(var j=0;j<Y;j+=7)this.arcTo(D=P(j+5),new nt(+o[j],+o[j+1]),+o[j+2],+o[j+4],+o[j+3]);break;case"z":this.closePath(1e-12),D=A;break}d=J}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var i=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return i.onPath||!!(this.getFillRule()==="evenodd"?i.windingL&1||i.windingR&1:i.winding)},getIntersections:function(t,i,o,h){var d=this===t||!t,v=this._matrix._orNullIfIdentity(),D=d?v:(o||t._matrix)._orNullIfIdentity();return d||this.getBounds(v).intersects(t.getBounds(D),1e-12)?Fn.getIntersections(this.getCurves(),!d&&t.getCurves(),i,v,D,h):[]},getCrossings:function(t){return this.getIntersections(t,function(i){return i.isCrossing()})},getNearestLocation:function(){for(var t=re.read(arguments),i=this.getCurves(),o=1/0,h=null,d=0,v=i.length;d<v;d++){var D=i[d].getNearestLocation(t);D._distance<o&&(o=D._distance,h=D)}return h},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()},interpolate:function(t,i,o){var h=!this._children,d=h?"_segments":"_children",v=t[d],D=i[d],A=this[d];if(!v||!D||v.length!==D.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+i);var T=A.length,P=D.length;if(T<P)for(var F=h?xr:ai,V=T;V<P;V++)this.add(new F);else T>P&&this[h?"removeSegments":"removeChildren"](P,T);for(var V=0;V<P;V++)A[V].interpolate(v[V],D[V],o);h&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var i=!1;if(t){var o=this._children||[this],h=t._children?t._children.slice():[t],d=o.length,v=h.length,D=[],A=0;i=!0;for(var T=W.findItemBoundsCollisions(o,h,Ae.GEOMETRIC_EPSILON),P=d-1;P>=0&&i;P--){var F=o[P];i=!1;var V=T[P];if(V)for(var z=V.length-1;z>=0&&!i;z--)F.compare(h[V[z]])&&(D[V[z]]||(D[V[z]]=!0,A++),i=!0)}i=i&&A===v}return i}}),ai=Pi.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var i=arguments,o=Array.isArray(t)?typeof t[0]=="object"?t:i:t&&t.size===n&&(t.x!==n||t.point!==n)?i:null;o&&o.length>0?this.setSegments(o):(this._curves=n,this._segmentSelection=0,!o&&typeof t=="string"&&(this.setPathData(t),t=null)),this._initialize(!o&&t)},_equals:function(t){return this._closed===t._closed&&u.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(i){if(t.base.call(this,i),i&8){if(this._length=this._area=n,i&32)this._version++;else if(this._curves)for(var o=0,h=this._curves.length;o<h;o++)this._curves[o]._changed()}else i&64&&(this._bounds=n)},getStyle:function(){var t=this._parent;return(t instanceof hs?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var i=this.isFullySelected(),o=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,o){var h=t[o-1];typeof h=="boolean"&&(this.setClosed(h),o--),this._add(xr.readList(t,0,{},o))}i&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,i=this._segments;if(!t){var o=this._countCurves();t=this._curves=new Array(o);for(var h=0;h<o;h++)t[h]=new Fn(this,i[h],i[h+1]||i[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var i=this._curves.length=this._countCurves();t&&(this._curves[i-1]=new Fn(this,this._segments[i-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,i){var o=this._segments,h=o.length,d=new ve(i),v=new Array(6),D=!0,A,T,P,F,V,z,R,J,Y=[];function ie(X,I){if(X._transformCoordinates(t,v),A=v[0],T=v[1],D)Y.push("M"+d.pair(A,T)),D=!1;else if(V=v[2],z=v[3],V===A&&z===T&&R===P&&J===F){if(!I){var G=A-P,te=T-F;Y.push(G===0?"v"+d.number(te):te===0?"h"+d.number(G):"l"+d.pair(G,te))}}else Y.push("c"+d.pair(R-P,J-F)+" "+d.pair(V-P,z-F)+" "+d.pair(A-P,T-F));P=A,F=T,R=v[4],J=v[5]}if(!h)return"";for(var j=0;j<h;j++)ie(o[j]);return this._closed&&h>0&&(ie(o[0],!0),Y.push("z")),Y.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var i=this._segments,o=new Array(6),h=0,d=i.length;h<d;h++)i[h]._transformCoordinates(t,o,!0);return!0},_add:function(t,i){for(var o=this._segments,h=this._curves,d=t.length,v=i==null,i=v?o.length:i,D=0;D<d;D++){var A=t[D];A._path&&(A=t[D]=A.clone()),A._path=this,A._index=i+D,A._selection&&this._updateSelection(A,0,A._selection)}if(v)u.push(o,t);else{o.splice.apply(o,[i,0].concat(t));for(var D=i+d,T=o.length;D<T;D++)o[D]._index=D}if(h){var P=this._countCurves(),F=i>0&&i+d-1===P?i-1:i,V=F,z=Math.min(F+d,P);t._curves&&(h.splice.apply(h,[F,0].concat(t._curves)),V+=t._curves.length);for(var D=V;D<z;D++)h.splice(D,0,new Fn(this,null,null));this._adjustCurves(F,z)}return this._changed(41),t},_adjustCurves:function(t,i){for(var o=this._segments,h=this._curves,d,v=t;v<i;v++)d=h[v],d._path=this,d._segment1=o[v],d._segment2=o[v+1]||o[0],d._changed();(d=h[this._closed&&!t?o.length-1:t-1])&&(d._segment2=o[t]||o[0],d._changed()),(d=h[i])&&(d._segment1=o[i],d._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var i=arguments;return i.length>1&&typeof t!="number"?this._add(xr.readList(i)):this._add([xr.read(i)])[0]},insert:function(t,i){var o=arguments;return o.length>2&&typeof i!="number"?this._add(xr.readList(o,1),t):this._add([xr.read(o,1)],t)[0]},addSegment:function(){return this._add([xr.read(arguments)])[0]},insertSegment:function(t){return this._add([xr.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(xr.readList(t))},insertSegments:function(t,i){return this._add(xr.readList(i),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,i,o){t=t||0,i=u.pick(i,this._segments.length);var h=this._segments,d=this._curves,v=h.length,D=h.splice(t,i-t),A=D.length;if(!A)return D;for(var T=0;T<A;T++){var P=D[T];P._selection&&this._updateSelection(P,P._selection,0),P._index=P._path=null}for(var T=t,F=h.length;T<F;T++)h[T]._index=T;if(d){for(var V=t>0&&i===v+(this._closed?1:0)?t-1:t,d=d.splice(V,A),T=d.length-1;T>=0;T--)d[T]._path=null;o&&(D._curves=d.slice(1)),this._adjustCurves(V,V)}return this._changed(41),D},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,i=0,o=t.length;i<o;i++)if(t[i].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,i=0,o=t.length;i<o;i++)t[i].clearHandles()},getLength:function(){if(this._length==null){for(var t=this.getCurves(),i=0,o=0,h=t.length;o<h;o++)i+=t[o].getLength();this._length=i}return this._length},getArea:function(){var t=this._area;if(t==null){var i=this._segments,o=this._closed;t=0;for(var h=0,d=i.length;h<d;h++){var v=h+1===d;t+=Fn.getArea(Fn.getValues(i[h],i[v?0:h+1],null,v&&!o))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===t*7},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(i){i&1||this._selectSegments(!1),t.base.call(this,i)},_selectSegments:function(t){var i=this._segments,o=i.length,h=t?7:0;this._segmentSelection=h*o;for(var d=0;d<o;d++)i[d]._selection=h},_updateSelection:function(t,i,o){t._selection=o;var h=this._segmentSelection+=o-i;h>0&&this.setSelected(!0)},divideAt:function(t){var i=this.getLocationAt(t),o;return i&&(o=i.getCurve().divideAt(i.getCurveOffset()))?o._segment1:null},splitAt:function(t){var i=this.getLocationAt(t),o=i&&i.index,h=i&&i.time,d=1e-8,v=1-d;h>v&&(o++,h=0);var D=this.getCurves();if(o>=0&&o<D.length){h>=d&&D[o++].divideAtTime(h);var A=this.removeSegments(o,this._segments.length,!0),T;return this._closed?(this.setClosed(!1),T=this):(T=new ai(He.NO_INSERT),T.insertAbove(this),T.copyAttributes(this)),T._add(A,0),this.addSegment(A[0]),T}return null},split:function(t,i){var o,h=i===n?t:(o=this.getCurves()[t])&&o.getLocationAtTime(i);return h!=null?this.splitAt(h):null},join:function(t,i){var o=i||0;if(t&&t!==this){var h=t._segments,d=this.getLastSegment(),v=t.getLastSegment();if(!v)return this;d&&d._point.isClose(v._point,o)&&t.reverse();var D=t.getFirstSegment();if(d&&d._point.isClose(D._point,o))d.setHandleOut(D._handleOut),this._add(h.slice(1));else{var A=this.getFirstSegment();A&&A._point.isClose(D._point,o)&&t.reverse(),v=t.getLastSegment(),A&&A._point.isClose(v._point,o)?(A.setHandleIn(v._handleIn),this._add(h.slice(0,h.length-1),0)):this._add(h.slice())}t._closed&&this._add([h[0]]),t.remove()}var T=this.getFirstSegment(),P=this.getLastSegment();return T!==P&&T._point.isClose(P._point,o)&&(T.setHandleIn(P._handleIn),P.remove(),this.setClosed(!0)),this},reduce:function(t){for(var i=this.getCurves(),o=t&&t.simplify,h=o?1e-7:0,d=i.length-1;d>=0;d--){var v=i[d];!v.hasHandles()&&(!v.hasLength(h)||o&&v.isCollinear(v.getNext()))&&v.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,i=this._segments.length;t<i;t++){var o=this._segments[t],h=o._handleIn;o._handleIn=o._handleOut,o._handleOut=h,o._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var i=new fa(this,t||.25,256,!0),o=i.parts,h=o.length,d=[],v=0;v<h;v++)d.push(new xr(o[v].curve.slice(0,2)));!this._closed&&h>0&&d.push(new xr(o[h-1].curve.slice(6))),this.setSegments(d)},simplify:function(t){var i=new Hs(this).fit(t||2.5);return i&&this.setSegments(i),!!i},smooth:function(t){var i=this,o=t||{},h=o.type||"asymmetric",d=this._segments,v=d.length,D=this._closed;function A(mr,Rr){var Lr=mr&&mr.index;if(Lr!=null){var Ir=mr.path;if(Ir&&Ir!==i)throw new Error(mr._class+" "+Lr+" of "+Ir+" is not part of "+i);Rr&&mr instanceof Fn&&Lr++}else Lr=typeof mr=="number"?mr:Rr;return Math.min(Lr<0&&D?Lr%v:Lr<0?Lr+v:Lr,v-1)}var T=D&&o.from===n&&o.to===n,P=A(o.from,0),F=A(o.to,v-1);if(P>F)if(D)P-=v;else{var V=P;P=F,F=V}if(/^(?:asymmetric|continuous)$/.test(h)){var z=h==="asymmetric",R=Math.min,J=F-P+1,Y=J-1,ie=T?R(J,4):1,j=ie,X=ie,I=[];if(D||(j=R(1,P),X=R(1,v-F-1)),Y+=j+X,Y<=1)return;for(var G=0,te=P-j;G<=Y;G++,te++)I[G]=d[(te<0?te+v:te)%v]._point;for(var pe=I[0]._x+2*I[1]._x,oe=I[0]._y+2*I[1]._y,Ee=2,$e=Y-1,Xe=[pe],ft=[oe],Ze=[Ee],yt=[],Et=[],G=1;G<Y;G++){var Yt=G<$e,qt=Yt||z?1:2,ln=Yt?4:z?2:7,In=Yt?4:z?3:8,Zn=Yt?2:z?0:1,Kn=qt/Ee;Ee=Ze[G]=ln-Kn,pe=Xe[G]=In*I[G]._x+Zn*I[G+1]._x-Kn*pe,oe=ft[G]=In*I[G]._y+Zn*I[G+1]._y-Kn*oe}yt[$e]=Xe[$e]/Ze[$e],Et[$e]=ft[$e]/Ze[$e];for(var G=Y-2;G>=0;G--)yt[G]=(Xe[G]-yt[G+1])/Ze[G],Et[G]=(ft[G]-Et[G+1])/Ze[G];yt[Y]=(3*I[Y]._x-yt[$e])/2,Et[Y]=(3*I[Y]._y-Et[$e])/2;for(var G=j,ur=Y-X,te=P;G<=ur;G++,te++){var yn=d[te<0?te+v:te],An=yn._point,qn=yt[G]-An._x,cr=Et[G]-An._y;(T||G<ur)&&yn.setHandleOut(qn,cr),(T||G>j)&&yn.setHandleIn(-qn,-cr)}}else for(var G=P;G<=F;G++)d[G<0?G+v:G].smooth(o,!T&&G===P,!T&&G===F)},toShape:function(t){if(!this._closed)return null;var i=this._segments,o,h,d,v;function D(z,R){var J=i[z],Y=J.getNext(),ie=i[R],j=ie.getNext();return J._handleOut.isZero()&&Y._handleIn.isZero()&&ie._handleOut.isZero()&&j._handleIn.isZero()&&Y._point.subtract(J._point).isCollinear(j._point.subtract(ie._point))}function A(z){var R=i[z],J=R.getPrevious(),Y=R.getNext();return J._handleOut.isZero()&&R._handleIn.isZero()&&R._handleOut.isZero()&&Y._handleIn.isZero()&&R._point.subtract(J._point).isOrthogonal(Y._point.subtract(R._point))}function T(z){var R=i[z],J=R.getNext(),Y=R._handleOut,ie=J._handleIn,j=.5522847498307936;if(Y.isOrthogonal(ie)){var X=R._point,I=J._point,G=new an(X,Y,!0).intersect(new an(I,ie,!0),!0);return G&&Ae.isZero(Y.getLength()/G.subtract(X).getLength()-j)&&Ae.isZero(ie.getLength()/G.subtract(I).getLength()-j)}return!1}function P(z,R){return i[z]._point.getDistance(i[R]._point)}if(!this.hasHandles()&&i.length===4&&D(0,2)&&D(1,3)&&A(1)?(o=On.Rectangle,h=new nt(P(0,3),P(0,1)),v=i[1]._point.add(i[2]._point).divide(2)):i.length===8&&T(0)&&T(2)&&T(4)&&T(6)&&D(1,5)&&D(3,7)?(o=On.Rectangle,h=new nt(P(1,6),P(0,3)),d=h.subtract(new nt(P(0,7),P(1,2))).divide(2),v=i[3]._point.add(i[4]._point).divide(2)):i.length===4&&T(0)&&T(1)&&T(2)&&T(3)&&(Ae.isZero(P(0,2)-P(1,3))?(o=On.Circle,d=P(0,2)/2):(o=On.Ellipse,d=new nt(P(2,0)/2,P(3,1)/2)),v=i[1]._point),o){var F=this.getPosition(!0),V=new o({center:F,size:h,radius:d,insert:!1});return V.copyAttributes(this,!0),V._matrix.prepend(this._matrix),V.rotate(v.subtract(F).getAngle()+90),(t===n||t)&&V.insertAbove(this),V}return null},toPath:"#clone",compare:function t(i){if(!i||i instanceof hs)return t.base.call(this,i);var o=this.getCurves(),h=i.getCurves(),d=o.length,v=h.length;if(!d||!v)return d==v;for(var D=o[0].getValues(),A=[],T=0,P,F=0,V,z=0;z<v;z++){var R=h[z].getValues();A.push(R);var J=Fn.getOverlaps(D,R);if(J){P=!z&&J[0][0]>0?v-1:z,V=J[0][1];break}}for(var Y=Math.abs,ie=1e-8,R=A[P],j;D&&R;){var J=Fn.getOverlaps(D,R);if(J){var X=J[0][0];if(Y(X-F)<ie){F=J[1][0],F===1&&(D=++T<d?o[T].getValues():null,F=0);var I=J[0][1];if(Y(I-V)<ie){if(j||(j=[P,I]),V=J[1][1],V===1&&(++P>=v&&(P=0),R=A[P]||h[P].getValues(),V=0),!D)return j[0]===P&&j[1]===V;continue}}}break}return!1},_hitTestSelf:function(t,i,o,h){var d=this,v=this.getStyle(),D=this._segments,A=D.length,T=this._closed,P=i._tolerancePadding,F=P,V,z,R,J,Y,ie,j=i.stroke&&v.hasStroke(),X=i.fill&&v.hasFill(),I=i.curves,G=j?v.getStrokeWidth()/2:X&&i.tolerance>0||I?0:null;G!==null&&(G>0?(V=v.getStrokeJoin(),z=v.getStrokeCap(),R=v.getMiterLimit(),F=F.add(ai._getStrokePadding(G,h))):V=z="round");function te(yt,Et){return t.subtract(yt).divide(Et).length<=1}function pe(yt,Et,Yt){if(!i.selected||Et.isSelected()){var qt=yt._point;if(Et!==qt&&(Et=Et.add(qt)),te(Et,F))return new oi(Yt,d,{segment:yt,point:Et})}}function oe(yt,Et){return(Et||i.segments)&&pe(yt,yt._point,"segment")||!Et&&i.handles&&(pe(yt,yt._handleIn,"handle-in")||pe(yt,yt._handleOut,"handle-out"))}function Ee(yt){J.add(yt)}function $e(yt){var Et=T||yt._index>0&&yt._index<A-1;if((Et?V:z)==="round")return te(yt._point,F);if(J=new ai({internal:!0,closed:!0}),Et?yt.isSmooth()||ai._addBevelJoin(yt,V,G,R,null,h,Ee,!0):z==="square"&&ai._addSquareCap(yt,z,G,null,h,Ee,!0),!J.isEmpty()){var Yt;return J.contains(t)||(Yt=J.getNearestLocation(t))&&te(Yt.getPoint(),P)}}if(i.ends&&!i.segments&&!T){if(ie=oe(D[0],!0)||oe(D[A-1],!0))return ie}else if(i.segments||i.handles){for(var Xe=0;Xe<A;Xe++)if(ie=oe(D[Xe]))return ie}if(G!==null){if(Y=this.getNearestLocation(t),Y){var ft=Y.getTime();ft===0||ft===1&&A>1?$e(Y.getSegment())||(Y=null):te(Y.getPoint(),F)||(Y=null)}if(!Y&&V==="miter"&&A>1)for(var Xe=0;Xe<A;Xe++){var Ze=D[Xe];if(t.getDistance(Ze._point)<=R*G&&$e(Ze)){Y=Ze.getLocation();break}}}return!Y&&X&&this._contains(t)||Y&&!j&&!I?new oi("fill",this):Y?new oi(j?"stroke":"curve",this,{location:Y,point:Y.getPoint()}):null}},u.each(Fn._evaluateMethods,function(t){this[t+"At"]=function(i){var o=this.getLocationAt(i);return o&&o[t]()}},{beans:!1,getLocationOf:function(){for(var t=re.read(arguments),i=this.getCurves(),o=0,h=i.length;o<h;o++){var d=i[o].getLocationOf(t);if(d)return d}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if(typeof t=="number"){for(var i=this.getCurves(),o=0,h=0,d=i.length;h<d;h++){var v=o,D=i[h];if(o+=D.getLength(),o>t)return D.getLocationAt(t-v)}if(i.length>0&&t<=this.getLength())return new si(i[i.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=re.read(arguments);if(t.isZero())return[];for(var i=[],o=0,h=this.getCurves(),d=0,v=h.length;d<v;d++){for(var D=h[d],A=D.getTimesWithTangent(t),T=0,P=A.length;T<P;T++){var F=o+D.getOffsetAtTime(A[T]);i.indexOf(F)<0&&i.push(F)}o+=D.length}return i}}),new function(){function t(o,h,d,v){if(v<=0)return;var D=v/2,A=v-2,T=D-1,P=new Array(6),F,V;function z(X){var I=P[X],G=P[X+1];(F!=I||V!=G)&&(o.beginPath(),o.moveTo(F,V),o.lineTo(I,G),o.stroke(),o.beginPath(),o.arc(I,G,D,0,Math.PI*2,!0),o.fill())}for(var R=0,J=h.length;R<J;R++){var Y=h[R],ie=Y._selection;if(Y._transformCoordinates(d,P),F=P[0],V=P[1],ie&2&&z(2),ie&4&&z(4),o.fillRect(F-D,V-D,v,v),A>0&&!(ie&1)){var j=o.fillStyle;o.fillStyle="#ffffff",o.fillRect(F-T,V-T,A,A),o.fillStyle=j}}}function i(o,h,d){var v=h._segments,D=v.length,A=new Array(6),T=!0,P,F,V,z,R,J,Y,ie;function j(I){if(d)I._transformCoordinates(d,A),P=A[0],F=A[1];else{var G=I._point;P=G._x,F=G._y}if(T)o.moveTo(P,F),T=!1;else{if(d)R=A[2],J=A[3];else{var te=I._handleIn;R=P+te._x,J=F+te._y}R===P&&J===F&&Y===V&&ie===z?o.lineTo(P,F):o.bezierCurveTo(Y,ie,R,J,P,F)}if(V=P,z=F,d)Y=A[4],ie=A[5];else{var te=I._handleOut;Y=V+te._x,ie=z+te._y}}for(var X=0;X<D;X++)j(v[X]);h._closed&&D>0&&j(v[0])}return{_draw:function(o,h,d,v){var D=h.dontStart,A=h.dontFinish||h.clip,T=this.getStyle(),P=T.hasFill(),F=T.hasStroke(),V=T.getDashArray(),z=!ar.support.nativeDash&&F&&V&&V.length;D||o.beginPath(),(P||F&&!z||A)&&(i(o,this,v),this._closed&&o.closePath());function R(I){return V[(I%z+z)%z]}if(!A&&(P||F)&&(this._setStyles(o,h,d),P&&(o.fill(T.getFillRule()),o.shadowColor="rgba(0,0,0,0)"),F)){if(z){D||o.beginPath();for(var J=new fa(this,.25,32,!1,v),Y=J.length,ie=-T.getDashOffset(),j,X=0;ie>0;)ie-=R(X--)+R(X--);for(;ie<Y;)j=ie+R(X++),(ie>0||j>0)&&J.drawPart(o,Math.max(ie,0),Math.max(j,0)),ie=j+R(X++)}o.stroke()}},_drawSelected:function(o,h){o.beginPath(),i(o,this,h),o.stroke(),t(o,this._segments,h,ar.settings.handleSize)}}},new function(){function t(i){var o=i._segments;if(!o.length)throw new Error("Use a moveTo() command first");return o[o.length-1]}return{moveTo:function(){var i=this._segments;i.length===1&&this.removeSegment(0),i.length||this._add([new xr(re.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new xr(re.read(arguments))])},cubicCurveTo:function(){var i=arguments,o=re.read(i),h=re.read(i),d=re.read(i),v=t(this);v.setHandleOut(o.subtract(v._point)),this._add([new xr(d,h.subtract(d))])},quadraticCurveTo:function(){var i=arguments,o=re.read(i),h=re.read(i),d=t(this)._point;this.cubicCurveTo(o.add(d.subtract(o).multiply(1/3)),o.add(h.subtract(o).multiply(1/3)),h)},curveTo:function(){var i=arguments,o=re.read(i),h=re.read(i),d=u.pick(u.read(i),.5),v=1-d,D=t(this)._point,A=o.subtract(D.multiply(v*v)).subtract(h.multiply(d*d)).divide(2*d*v);if(A.isNaN())throw new Error("Cannot put a curve through points with parameter = "+d);this.quadraticCurveTo(A,h)},arcTo:function(){var i=arguments,o=Math.abs,h=Math.sqrt,d=t(this),v=d._point,D=re.read(i),J,A=u.peek(i),T=u.pick(A,!0),P,F,V,z;if(typeof T=="boolean")var R=v.add(D).divide(2),J=R.add(R.subtract(v).rotate(T?-90:90));else if(u.remain(i)<=2)J=D,D=re.read(i);else if(!v.equals(D)){var Y=nt.read(i),ie=Ae.isZero;if(ie(Y.width)||ie(Y.height))return this.lineTo(D);var j=u.read(i),T=!!u.read(i),X=!!u.read(i),R=v.add(D).divide(2),I=v.subtract(R).rotate(-j),G=I.x,te=I.y,pe=o(Y.width),oe=o(Y.height),Ee=pe*pe,$e=oe*oe,Xe=G*G,ft=te*te,Ze=h(Xe/Ee+ft/$e);if(Ze>1&&(pe*=Ze,oe*=Ze,Ee=pe*pe,$e=oe*oe),Ze=(Ee*$e-Ee*ft-$e*Xe)/(Ee*ft+$e*Xe),o(Ze)<1e-12&&(Ze=0),Ze<0)throw new Error("Cannot create an arc with the given arguments");P=new re(pe*te/oe,-oe*G/pe).multiply((X===T?-1:1)*h(Ze)).rotate(j).add(R),z=new At().translate(P).rotate(j).scale(pe,oe),V=z._inverseTransform(v),F=V.getDirectedAngle(z._inverseTransform(D)),!T&&F>0?F-=360:T&&F<0&&(F+=360)}if(J){var yt=new an(v.add(J).divide(2),J.subtract(v).rotate(90),!0),Et=new an(J.add(D).divide(2),D.subtract(J).rotate(90),!0),Yt=new an(v,D),qt=Yt.getSide(J);if(P=yt.intersect(Et,!0),!P){if(!qt)return this.lineTo(D);throw new Error("Cannot create an arc with the given arguments")}V=v.subtract(P),F=V.getDirectedAngle(D.subtract(P));var ln=Yt.getSide(P,!0);ln===0?F=qt*o(F):qt===ln&&(F+=F<0?360:-360)}if(F){for(var In=1e-5,Zn=o(F),Kn=Zn>=360?4:Math.ceil((Zn-In)/90),ur=F/Kn,yn=ur*Math.PI/360,An=4/3*Math.sin(yn)/(1+Math.cos(yn)),qn=[],cr=0;cr<=Kn;cr++){var I=D,mr=null;if(cr<Kn&&(mr=V.rotate(90).multiply(An),z?(I=z._transformPoint(V),mr=z._transformPoint(V.add(mr)).subtract(I)):I=P.add(V)),!cr)d.setHandleOut(mr);else{var Rr=V.rotate(-90).multiply(An);z&&(Rr=z._transformPoint(V.add(Rr)).subtract(I)),qn.push(new xr(I,Rr,mr))}V=V.rotate(ur)}this._add(qn)}},lineBy:function(){var i=re.read(arguments),o=t(this)._point;this.lineTo(o.add(i))},curveBy:function(){var i=arguments,o=re.read(i),h=re.read(i),d=u.read(i),v=t(this)._point;this.curveTo(v.add(o),v.add(h),d)},cubicCurveBy:function(){var i=arguments,o=re.read(i),h=re.read(i),d=re.read(i),v=t(this)._point;this.cubicCurveTo(v.add(o),v.add(h),v.add(d))},quadraticCurveBy:function(){var i=arguments,o=re.read(i),h=re.read(i),d=t(this)._point;this.quadraticCurveTo(d.add(o),d.add(h))},arcBy:function(){var i=arguments,o=t(this)._point,h=o.add(re.read(i)),d=u.pick(u.peek(i),!0);typeof d=="boolean"?this.arcTo(h,d):this.arcTo(h,o.add(re.read(i)))},closePath:function(i){this.setClosed(!0),this.join(this,i)}}},{_getBounds:function(t,i){var o=i.handle?"getHandleBounds":i.stroke?"getStrokeBounds":"getBounds";return ai[o](this._segments,this._closed,this,t,i)},statics:{getBounds:function(t,i,o,h,d,v){var D=t[0];if(!D)return new Ie;var A=new Array(6),T=D._transformCoordinates(h,new Array(6)),P=T.slice(0,2),F=P.slice(),V=new Array(2);function z(Y){Y._transformCoordinates(h,A);for(var ie=0;ie<2;ie++)Fn._addBounds(T[ie],T[ie+4],A[ie+2],A[ie],ie,v?v[ie]:0,P,F,V);var j=T;T=A,A=j}for(var R=1,J=t.length;R<J;R++)z(t[R]);return i&&z(D),new Ie(P[0],P[1],F[0]-P[0],F[1]-P[1])},getStrokeBounds:function(t,i,o,h,d){var v=o.getStyle(),D=v.hasStroke(),A=v.getStrokeWidth(),T=D&&o._getStrokeMatrix(h,d),P=D&&ai._getStrokePadding(A,T),F=ai.getBounds(t,i,o,h,d,P);if(!D)return F;var V=A/2,z=v.getStrokeJoin(),R=v.getStrokeCap(),J=v.getMiterLimit(),Y=new Ie(new nt(P));function ie(pe){F=F.include(pe)}function j(pe){F=F.unite(Y.setCenter(pe._point.transform(h)))}function X(pe,oe){oe==="round"||pe.isSmooth()?j(pe):ai._addBevelJoin(pe,oe,V,J,h,T,ie)}function I(pe,oe){oe==="round"?j(pe):ai._addSquareCap(pe,oe,V,h,T,ie)}var G=t.length-(i?0:1);if(G>0){for(var te=1;te<G;te++)X(t[te],z);i?X(t[0],z):(I(t[0],R),I(t[t.length-1],R))}return F},_getStrokePadding:function(t,i){if(!i)return[t,t];var o=new re(t,0).transform(i),h=new re(0,t).transform(i),d=o.getAngleInRadians(),v=o.getLength(),D=h.getLength(),A=Math.sin(d),T=Math.cos(d),P=Math.tan(d),F=Math.atan2(D*P,v),V=Math.atan2(D,P*v);return[Math.abs(v*Math.cos(F)*T+D*Math.sin(F)*A),Math.abs(D*Math.sin(V)*T+v*Math.cos(V)*A)]},_addBevelJoin:function(t,i,o,h,d,v,D,A){var T=t.getCurve(),P=T.getPrevious(),F=T.getPoint1().transform(d),V=P.getNormalAtTime(1).multiply(o).transform(v),z=T.getNormalAtTime(0).multiply(o).transform(v),R=V.getDirectedAngle(z);if((R<0||R>=180)&&(V=V.negate(),z=z.negate()),A&&D(F),D(F.add(V)),i==="miter"){var J=new an(F.add(V),new re(-V.y,V.x),!0).intersect(new an(F.add(z),new re(-z.y,z.x),!0),!0);J&&F.getDistance(J)<=h*o&&D(J)}D(F.add(z))},_addSquareCap:function(t,i,o,h,d,v,D){var A=t._point.transform(h),T=t.getLocation(),P=T.getNormal().multiply(T.getTime()===0?o:-o).transform(d);i==="square"&&(D&&(v(A.subtract(P)),v(A.add(P))),A=A.add(P.rotate(-90))),v(A.add(P)),v(A.subtract(P))},getHandleBounds:function(t,i,o,h,d){var v=o.getStyle(),D=d.stroke&&v.hasStroke(),A,T;if(D){var P=o._getStrokeMatrix(h,d),F=v.getStrokeWidth()/2,V=F;v.getStrokeJoin()==="miter"&&(V=F*v.getMiterLimit()),v.getStrokeCap()==="square"&&(V=Math.max(V,F*Math.SQRT2)),A=ai._getStrokePadding(F,P),T=ai._getStrokePadding(V,P)}for(var z=new Array(6),R=1/0,J=-R,Y=R,ie=J,j=0,X=t.length;j<X;j++){var I=t[j];I._transformCoordinates(h,z);for(var G=0;G<6;G+=2){var te=G?A:T,pe=te?te[0]:0,oe=te?te[1]:0,Ee=z[G],$e=z[G+1],Xe=Ee-pe,ft=Ee+pe,Ze=$e-oe,yt=$e+oe;Xe<R&&(R=Xe),ft>J&&(J=ft),Ze<Y&&(Y=Ze),yt>ie&&(ie=yt)}}return new Ie(R,Y,J-R,ie-Y)}}});ai.inject({statics:new function(){var t=.5522847498307936,i=[new xr([-1,0],[0,t],[0,-.5522847498307936]),new xr([0,-1],[-.5522847498307936,0],[t,0]),new xr([1,0],[0,-.5522847498307936],[0,t]),new xr([0,1],[t,0],[-.5522847498307936,0])];function o(d,v,D){var A=u.getNamed(D),T=new ai(A&&(A.insert==!0?He.INSERT:A.insert==!1?He.NO_INSERT:null));return T._add(d),T._closed=v,T.set(A,He.INSERT)}function h(d,v,D){for(var A=new Array(4),T=0;T<4;T++){var P=i[T];A[T]=new xr(P._point.multiply(v).add(d),P._handleIn.multiply(v),P._handleOut.multiply(v))}return o(A,!0,D)}return{Line:function(){var d=arguments;return o([new xr(re.readNamed(d,"from")),new xr(re.readNamed(d,"to"))],!1,d)},Circle:function(){var d=arguments,v=re.readNamed(d,"center"),D=u.readNamed(d,"radius");return h(v,new nt(D),d)},Rectangle:function(){var d=arguments,v=Ie.readNamed(d,"rectangle"),D=nt.readNamed(d,"radius",0,{readNull:!0}),A=v.getBottomLeft(!0),T=v.getTopLeft(!0),P=v.getTopRight(!0),F=v.getBottomRight(!0),V;if(!D||D.isZero())V=[new xr(A),new xr(T),new xr(P),new xr(F)];else{D=nt.min(D,v.getSize(!0).divide(2));var z=D.width,R=D.height,J=z*t,Y=R*t;V=[new xr(A.add(z,0),null,[-J,0]),new xr(A.subtract(0,R),[0,Y]),new xr(T.add(0,R),null,[0,-Y]),new xr(T.add(z,0),[-J,0],null),new xr(P.subtract(z,0),null,[J,0]),new xr(P.add(0,R),[0,-Y],null),new xr(F.subtract(0,R),null,[0,Y]),new xr(F.subtract(z,0),[J,0])]}return o(V,!0,d)},RoundRectangle:"#Rectangle",Ellipse:function(){var d=arguments,v=On._readEllipse(d);return h(v.center,v.radius,d)},Oval:"#Ellipse",Arc:function(){var d=arguments,v=re.readNamed(d,"from"),D=re.readNamed(d,"through"),A=re.readNamed(d,"to"),T=u.getNamed(d),P=new ai(T&&T.insert==!1&&He.NO_INSERT);return P.moveTo(v),P.arcTo(D,A),P.set(T)},RegularPolygon:function(){for(var d=arguments,v=re.readNamed(d,"center"),D=u.readNamed(d,"sides"),A=u.readNamed(d,"radius"),T=360/D,P=D%3===0,F=new re(0,P?-A:A),V=P?-1:.5,z=new Array(D),R=0;R<D;R++)z[R]=new xr(v.add(F.rotate((R+V)*T)));return o(z,!0,d)},Star:function(){for(var d=arguments,v=re.readNamed(d,"center"),D=u.readNamed(d,"points")*2,A=u.readNamed(d,"radius1"),T=u.readNamed(d,"radius2"),P=360/D,F=new re(0,-1),V=new Array(D),z=0;z<D;z++)V[z]=new xr(v.add(F.rotate(P*z).multiply(z%2?T:A)));return o(V,!0,d)}}}});var hs=Pi.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(typeof t=="string"?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(i,o){var h=o,d=h[0];d&&typeof d[0]=="number"&&(h=[h]);for(var v=o.length-1;v>=0;v--){var D=h[v];h===o&&!(D instanceof ai)&&(h=u.slice(h)),Array.isArray(D)?h[v]=new ai({segments:D,insert:!1}):D instanceof hs&&(h.splice.apply(h,[v,1].concat(D.removeChildren())),D.remove())}return t.base.call(this,i,h)},reduce:function t(i){for(var o=this._children,h=o.length-1;h>=0;h--){var d=o[h].reduce(i);d.isEmpty()&&d.remove()}if(!o.length){var d=new ai(He.NO_INSERT);return d.copyAttributes(this),d.insertAbove(this),this.remove(),d}return t.base.call(this)},isClosed:function(){for(var t=this._children,i=0,o=t.length;i<o;i++)if(!t[i]._closed)return!1;return!0},setClosed:function(t){for(var i=this._children,o=0,h=i.length;o<h;o++)i[o].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,i=[],o=0,h=t.length;o<h;o++)u.push(i,t[o].getCurves());return i},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,i=0,o=0,h=t.length;o<h;o++)i+=t[o].getArea();return i},getLength:function(){for(var t=this._children,i=0,o=0,h=t.length;o<h;o++)i+=t[o].getLength();return i},getPathData:function(t,i){for(var o=this._children,h=[],d=0,v=o.length;d<v;d++){var D=o[d],A=D._matrix;h.push(D.getPathData(t&&!A.isIdentity()?t.appended(A):t,i))}return h.join("")},_hitTestChildren:function t(i,o,h){return t.base.call(this,i,o.class===ai||o.type==="path"?o:u.set({},o,{fill:!1}),h)},_draw:function(t,i,o,h){var d=this._children;if(d.length){i=i.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var v=0,D=d.length;v<D;v++)d[v].draw(t,i,h);if(!i.clip){this._setStyles(t,i,o);var A=this._style;A.hasFill()&&(t.fill(A.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),A.hasStroke()&&t.stroke()}}},_drawSelected:function(t,i,o){for(var h=this._children,d=0,v=h.length;d<v;d++){var D=h[d],A=D._matrix;o[D._id]||D._drawSelected(t,A.isIdentity()?i:i.appended(A))}}},new function(){function t(i,o){var h=i._children;if(o&&!h.length)throw new Error("Use a moveTo() command first");return h[h.length-1]}return u.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(i){this[i]=function(){var o=t(this,!0);o[i].apply(o,arguments)}},{moveTo:function(){var i=t(this),o=i&&i.isEmpty()?i:new ai(He.NO_INSERT);o!==i&&this.addChild(o),o.moveTo.apply(o,arguments)},moveBy:function(){var i=t(this,!0),o=i&&i.getLastSegment(),h=re.read(arguments);this.moveTo(o?h.add(o._point):h)},closePath:function(i){t(this,!0).closePath(i)}})},u.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(i){for(var o=this._children,h,d=0,v=o.length;d<v;d++)h=o[d][t](i)||h;return h}},{}));Pi.inject(new function(){var t=Math.min,i=Math.max,o=Math.abs,h={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function d(j){return j._children||[j]}function v(j,X){var I=j.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(X){for(var G=d(I),te=0,pe=G.length;te<pe;te++){var j=G[te];!j._closed&&!j.isEmpty()&&(j.closePath(1e-12),j.getFirstSegment().setHandleIn(0,0),j.getLastSegment().setHandleOut(0,0))}I=I.resolveCrossings().reorient(I.getFillRule()==="nonzero",!0)}return I}function D(j,X,I,G,te){var pe=new hs(He.NO_INSERT);return pe.addChildren(j,!0),pe=pe.reduce({simplify:X}),te&&te.insert==!1||pe.insertAbove(G&&I.isSibling(G)&&I.getIndex()<G.getIndex()?G:I),pe.copyAttributes(I,!0),pe}function A(j){return j.hasOverlap()||j.isCrossing()}function T(j,X,I,G){if(G&&(G.trace==!1||G.stroke)&&/^(subtract|intersect)$/.test(I))return P(j,X,I);var te=v(j,!0),pe=X&&j!==X&&v(X,!0),oe=h[I];oe[I]=!0,pe&&(oe.subtract||oe.exclude)^(pe.isClockwise()^te.isClockwise())&&pe.reverse();var Ee=R(si.expand(te.getIntersections(pe,A))),$e=d(te),Xe=pe&&d(pe),ft=[],Ze=[],yt;function Et(mr){for(var Rr=0,Lr=mr.length;Rr<Lr;Rr++){var Ir=mr[Rr];u.push(ft,Ir._segments),u.push(Ze,Ir.getCurves()),Ir._overlapsOnly=!0}}function Yt(mr){for(var Rr=[],Lr=0,Ir=mr&&mr.length;Lr<Ir;Lr++)Rr.push(Ze[mr[Lr]]);return Rr}if(Ee.length){Et($e),Xe&&Et(Xe);for(var qt=new Array(Ze.length),ln=0,In=Ze.length;ln<In;ln++)qt[ln]=Ze[ln].getValues();for(var Zn=W.findCurveBoundsCollisions(qt,qt,0,!0),Kn={},ln=0;ln<Ze.length;ln++){var ur=Ze[ln],yn=ur._path._id,An=Kn[yn]=Kn[yn]||{};An[ur.getIndex()]={hor:Yt(Zn[ln].hor),ver:Yt(Zn[ln].ver)}}for(var ln=0,In=Ee.length;ln<In;ln++)Y(Ee[ln]._segment,te,pe,Kn,oe);for(var ln=0,In=ft.length;ln<In;ln++){var qn=ft[ln],cr=qn._intersection;qn._winding||Y(qn,te,pe,Kn,oe),cr&&cr._overlap||(qn._path._overlapsOnly=!1)}yt=ie(ft,oe)}else yt=z(Xe?$e.concat(Xe):$e.slice(),function(mr){return!!oe[mr]});return D(yt,!0,j,X,G)}function P(j,X,I){var G=v(j),te=v(X),pe=G.getIntersections(te,A),oe=I==="subtract",Ee=I==="divide",$e={},Xe=[];function ft(Et){if(!$e[Et._id]&&(Ee||te.contains(Et.getPointAt(Et.getLength()/2))^oe))return Xe.unshift(Et),$e[Et._id]=!0}for(var Ze=pe.length-1;Ze>=0;Ze--){var yt=pe[Ze].split();yt&&(ft(yt)&&yt.getFirstSegment().setHandleIn(0,0),G.getLastSegment().setHandleOut(0,0))}return ft(G),D(Xe,!1,j,X)}function F(j,X){for(var I=j;I;){if(I===X)return;I=I._previous}for(;j._next&&j._next!==X;)j=j._next;if(!j._next){for(;X._previous;)X=X._previous;j._next=X,X._previous=j}}function V(j){for(var X=j.length-1;X>=0;X--)j[X].clearHandles()}function z(j,X,I){var G=j&&j.length;if(G){var te=u.each(j,function(Zn,Kn){this[Zn._id]={container:null,winding:Zn.isClockwise()?1:-1,index:Kn}},{}),pe=j.slice().sort(function(Zn,Kn){return o(Kn.getArea())-o(Zn.getArea())}),oe=pe[0],Ee=W.findItemBoundsCollisions(pe,null,Ae.GEOMETRIC_EPSILON);I==null&&(I=oe.isClockwise());for(var $e=0;$e<G;$e++){var Xe=pe[$e],ft=te[Xe._id],Ze=0,yt=Ee[$e];if(yt){for(var Et=null,Yt=yt.length-1;Yt>=0;Yt--)if(yt[Yt]<$e){Et=Et||Xe.getInteriorPoint();var qt=pe[yt[Yt]];if(qt.contains(Et)){var ln=te[qt._id];Ze=ln.winding,ft.winding+=Ze,ft.container=ln.exclude?ln.container:qt;break}}}if(X(ft.winding)===X(Ze))ft.exclude=!0,j[ft.index]=null;else{var In=ft.container;Xe.setClockwise(In?!In.isClockwise():I)}}}return j}function R(j,X,I){var G=X&&[],te=1e-8,pe=1-te,oe=!1,Ee=I||[],$e=I&&{},Xe,ft,Ze;function yt(Rr){return Rr._path._id+"."+Rr._segment1._index}for(var Et=(I&&I.length)-1;Et>=0;Et--){var Yt=I[Et];Yt._path&&($e[yt(Yt)]=!0)}for(var Et=j.length-1;Et>=0;Et--){var qt=j[Et],ln=qt._time,In=ln,Zn=X&&!X(qt),Yt=qt._curve,Kn;if(Yt&&(Yt!==ft?(oe=!Yt.hasHandles()||$e&&$e[yt(Yt)],Xe=[],Ze=null,ft=Yt):Ze>=te&&(ln/=Ze)),Zn){Xe&&Xe.push(qt);continue}else X&&G.unshift(qt);if(Ze=In,ln<te)Kn=Yt._segment1;else if(ln>pe)Kn=Yt._segment2;else{var ur=Yt.divideAtTime(ln,!0);oe&&Ee.push(Yt,ur),Kn=ur._segment1;for(var yn=Xe.length-1;yn>=0;yn--){var An=Xe[yn];An._time=(An._time-ln)/(1-ln)}}qt._setSegment(Kn);var qn=Kn._intersection,cr=qt._intersection;if(qn){F(qn,cr);for(var mr=qn;mr;)F(mr._intersection,qn),mr=mr._next}else Kn._intersection=cr}return I||V(Ee),G||j}function J(j,X,I,G,te){var pe=Array.isArray(X)?X:X[I?"hor":"ver"],oe=I?1:0,Ee=oe^1,$e=[j.x,j.y],Xe=$e[oe],ft=$e[Ee],Ze=1e-9,yt=1e-6,Et=Xe-Ze,Yt=Xe+Ze,qt=0,ln=0,In=0,Zn=0,Kn=!1,ur=!1,yn=1,An=[],qn,cr;function mr(Oi){var Bi=Oi[Ee+0],ys=Oi[Ee+6];if(!(ft<t(Bi,ys)||ft>i(Bi,ys))){var ns=Oi[oe+0],As=Oi[oe+2],rs=Oi[oe+4],Ji=Oi[oe+6];if(Bi===ys){(ns<Yt&&Ji>Et||Ji<Yt&&ns>Et)&&(Kn=!0);return}var Fs=ft===Bi?0:ft===ys||Et>i(ns,As,rs,Ji)||Yt<t(ns,As,rs,Ji)?1:Fn.solveCubic(Oi,Ee,ft,An,0,1)>0?An[0]:1,Is=Fs===0?ns:Fs===1?Ji:Fn.getPoint(Oi,Fs)[I?"y":"x"],Ws=Bi>ys?1:-1,Ca=qn[Ee]>qn[Ee+6]?1:-1,ta=qn[oe+6];return ft!==Bi?(Is<Et?In+=Ws:Is>Yt?Zn+=Ws:Kn=!0,Is>Xe-yt&&Is<Xe+yt&&(yn/=2)):(Ws!==Ca?ns<Et?In+=Ws:ns>Yt&&(Zn+=Ws):ns!=ta&&(ta<Yt&&Is>Yt?(Zn+=Ws,Kn=!0):ta>Et&&Is<Et&&(In+=Ws,Kn=!0)),yn/=4),qn=Oi,!te&&Is>Et&&Is<Yt&&Fn.getTangent(Oi,Fs)[I?"x":"y"]===0&&J(j,X,!I,G,!0)}}function Rr(Oi){var Bi=Oi[Ee+0],ys=Oi[Ee+2],ns=Oi[Ee+4],As=Oi[Ee+6];if(ft<=i(Bi,ys,ns,As)&&ft>=t(Bi,ys,ns,As)){for(var rs=Oi[oe+0],Ji=Oi[oe+2],Fs=Oi[oe+4],Is=Oi[oe+6],Ws=Et>i(rs,Ji,Fs,Is)||Yt<t(rs,Ji,Fs,Is)?[Oi]:Fn.getMonoCurves(Oi,I),Ca,ta=0,Po=Ws.length;ta<Po;ta++)if(Ca=mr(Ws[ta]))return Ca}}for(var Lr=0,Ir=pe.length;Lr<Ir;Lr++){var ti=pe[Lr],Wr=ti._path,ls=ti.getValues(),Vr;if((!Lr||pe[Lr-1]._path!==Wr)&&(qn=null,Wr._closed||(cr=Fn.getValues(Wr.getLastCurve().getSegment2(),ti.getSegment1(),null,!G),cr[Ee]!==cr[Ee+6]&&(qn=cr)),!qn)){qn=ls;for(var $i=Wr.getLastCurve();$i&&$i!==ti;){var Qi=$i.getValues();if(Qi[Ee]!==Qi[Ee+6]){qn=Qi;break}$i=$i.getPrevious()}}if(Vr=Rr(ls))return Vr;if(Lr+1===Ir||pe[Lr+1]._path!==Wr){if(cr&&(Vr=Rr(cr)))return Vr;Kn&&!In&&!Zn&&(In=Zn=Wr.isClockwise(G)^I?1:-1),qt+=In,ln+=Zn,In=Zn=0,Kn&&(ur=!0,Kn=!1),cr=null}}return qt=o(qt),ln=o(ln),{winding:i(qt,ln),windingL:qt,windingR:ln,quality:yn,onPath:ur}}function Y(j,X,I,G,te){var pe=[],oe=j,Ee=0,$e;do{var Xe=j.getCurve();if(Xe){var ft=Xe.getLength();pe.push({segment:j,curve:Xe,length:ft}),Ee+=ft}j=j.getNext()}while(j&&!j._intersection&&j!==oe);for(var Ze=[.5,.25,.75],$e={winding:0,quality:-1},yt=.001,Et=1-yt,Yt=0;Yt<Ze.length&&$e.quality<.5;Yt++)for(var ft=Ee*Ze[Yt],qt=0,ln=pe.length;qt<ln;qt++){var In=pe[qt],Zn=In.length;if(ft<=Zn){var Xe=In.curve,Kn=Xe._path,ur=Kn._parent,yn=ur instanceof hs?ur:Kn,An=Ae.clamp(Xe.getTimeAt(ft),yt,Et),qn=Xe.getPointAtTime(An),cr=o(Xe.getTangentAtTime(An).y)<Math.SQRT1_2,mr=null;if(te.subtract&&I){var Rr=yn===X?I:X,Lr=Rr._getWinding(qn,cr,!0);if(yn===X&&Lr.winding||yn===I&&!Lr.winding){if(Lr.quality<1)continue;mr={winding:0,quality:1}}}mr=mr||J(qn,G[Kn._id][Xe.getIndex()],cr,!0),mr.quality>$e.quality&&($e=mr);break}ft-=Zn}for(var qt=pe.length-1;qt>=0;qt--)pe[qt].segment._winding=$e}function ie(j,X){var I=[],G;function te(Ir){var ti;return!!(Ir&&!Ir._visited&&(!X||X[(ti=Ir._winding||{}).winding]&&!(X.unite&&ti.winding===2&&ti.windingL&&ti.windingR)))}function pe(Ir){if(Ir){for(var ti=0,Wr=G.length;ti<Wr;ti++)if(Ir===G[ti])return!0}return!1}function oe(Ir){for(var ti=Ir._segments,Wr=0,ls=ti.length;Wr<ls;Wr++)ti[Wr]._visited=!0}function Ee(Ir,ti){var Wr=Ir._intersection,ls=Wr,Vr=[];ti&&(G=[Ir]);function $i(Qi,Oi){for(;Qi&&Qi!==Oi;){var Bi=Qi._segment,ys=Bi&&Bi._path;if(ys){var ns=Bi.getNext()||ys.getFirstSegment(),As=ns._intersection;Bi!==Ir&&(pe(Bi)||pe(ns)||ns&&te(Bi)&&(te(ns)||As&&te(As._segment)))&&Vr.push(Bi),ti&&G.push(Bi)}Qi=Qi._next}}if(Wr){for($i(Wr);Wr&&Wr._previous;)Wr=Wr._previous;$i(Wr,ls)}return Vr}j.sort(function(Ir,ti){var Wr=Ir._intersection,ls=ti._intersection,Vr=!!(Wr&&Wr._overlap),$i=!!(ls&&ls._overlap),Qi=Ir._path,Oi=ti._path;return Vr^$i?Vr?1:-1:!Wr^!ls?Wr?1:-1:Qi!==Oi?Qi._id-Oi._id:Ir._index-ti._index});for(var $e=0,Xe=j.length;$e<Xe;$e++){var ft=j[$e],Ze=te(ft),yt=null,Et=!1,Yt=!0,qt=[],ln,In,Zn;if(Ze&&ft._path._overlapsOnly){var Kn=ft._path,ur=ft._intersection._segment._path;Kn.compare(ur)&&(Kn.getArea()&&I.push(Kn.clone(!1)),oe(Kn),oe(ur),Ze=!1)}for(;Ze;){var yn=!yt,An=Ee(ft,yn),qn=An.shift(),Et=!yn&&(pe(ft)||pe(qn)),cr=!Et&&qn;if(yn&&(yt=new ai(He.NO_INSERT),ln=null),Et){(ft.isFirst()||ft.isLast())&&(Yt=ft._path._closed),ft._visited=!0;break}if(cr&&ln&&(qt.push(ln),ln=null),ln||(cr&&An.push(ft),ln={start:yt._segments.length,crossings:An,visited:In=[],handleIn:Zn}),cr&&(ft=qn),!te(ft)){yt.removeSegments(ln.start);for(var mr=0,Rr=In.length;mr<Rr;mr++)In[mr]._visited=!1;In.length=0;do ft=ln&&ln.crossings.shift(),(!ft||!ft._path)&&(ft=null,ln=qt.pop(),ln&&(In=ln.visited,Zn=ln.handleIn));while(ln&&!te(ft));if(!ft)break}var Lr=ft.getNext();yt.add(new xr(ft._point,Zn,Lr&&ft._handleOut)),ft._visited=!0,In.push(ft),ft=Lr||ft._path.getFirstSegment(),Zn=Lr&&Lr._handleIn}Et&&(Yt&&(yt.getFirstSegment().setHandleIn(Zn),yt.setClosed(Yt)),yt.getArea()!==0&&I.push(yt))}return I}return{_getWinding:function(j,X,I){return J(j,this.getCurves(),X,I)},unite:function(j,X){return T(this,j,"unite",X)},intersect:function(j,X){return T(this,j,"intersect",X)},subtract:function(j,X){return T(this,j,"subtract",X)},exclude:function(j,X){return T(this,j,"exclude",X)},divide:function(j,X){return X&&(X.trace==!1||X.stroke)?P(this,j,"divide"):D([this.subtract(j,X),this.intersect(j,X)],!0,this,j,X)},resolveCrossings:function(){var j=this._children,X=j||[this];function I(ln,In){var Zn=ln&&ln._intersection;return Zn&&Zn._overlap&&Zn._path===In}var G=!1,te=!1,pe=this.getIntersections(null,function(ln){return ln.hasOverlap()&&(G=!0)||ln.isCrossing()&&(te=!0)}),oe=G&&te&&[];if(pe=si.expand(pe),G)for(var Ee=R(pe,function(ln){return ln.hasOverlap()},oe),$e=Ee.length-1;$e>=0;$e--){var Xe=Ee[$e],ft=Xe._path,Ze=Xe._segment,yt=Ze.getPrevious(),Et=Ze.getNext();I(yt,ft)&&I(Et,ft)&&(Ze.remove(),yt._handleOut._set(0,0),Et._handleIn._set(0,0),yt!==Ze&&!yt.getCurve().hasLength()&&(Et._handleIn.set(yt._handleIn),yt.remove()))}te&&(R(pe,G&&function(ln){var In=ln.getCurve(),Zn=ln.getSegment(),Kn=ln._intersection,ur=Kn._curve,yn=Kn._segment;if(In&&ur&&In._path&&ur._path)return!0;Zn&&(Zn._intersection=null),yn&&(yn._intersection=null)},oe),oe&&V(oe),X=ie(u.each(X,function(ln){u.push(this,ln._segments)},[])));var Yt=X.length,qt;return Yt>1&&j?(X!==j&&this.setChildren(X),qt=this):Yt===1&&!j&&(X[0]!==this&&this.setSegments(X[0].removeSegments()),qt=this),qt||(qt=new hs(He.NO_INSERT),qt.addChildren(X),qt=qt.reduce(),qt.copyAttributes(this),this.replaceWith(qt)),qt},reorient:function(j,X){var I=this._children;return I&&I.length?this.setChildren(z(this.removeChildren(),function(G){return!!(j?G:G&1)},X)):X!==n&&this.setClockwise(X),this},getInteriorPoint:function(){var j=this.getBounds(),X=j.getCenter(!0);if(!this.contains(X)){for(var I=this.getCurves(),G=X.y,te=[],pe=[],oe=0,Ee=I.length;oe<Ee;oe++){var $e=I[oe].getValues(),Xe=$e[1],ft=$e[3],Ze=$e[5],yt=$e[7];if(G>=t(Xe,ft,Ze,yt)&&G<=i(Xe,ft,Ze,yt))for(var Et=Fn.getMonoCurves($e),Yt=0,qt=Et.length;Yt<qt;Yt++){var ln=Et[Yt],In=ln[1],Zn=ln[7];if(In!==Zn&&(G>=In&&G<=Zn||G>=Zn&&G<=In)){var Kn=G===In?ln[0]:G===Zn?ln[6]:Fn.solveCubic(ln,1,G,pe,0,1)===1?Fn.getPoint(ln,pe[0]).x:(ln[0]+ln[6])/2;te.push(Kn)}}}te.length>1&&(te.sort(function(ur,yn){return ur-yn}),X.x=(te[0]+te[1])/2)}return X}}});var fa=u.extend({_class:"PathFlattener",initialize:function(t,i,o,h,d){var v=[],D=[],A=0,T=1/(o||32),P=t._segments,F=P[0],V;function z(ie,j){var X=Fn.getValues(ie,j,d);v.push(X),R(X,ie._index,0,1)}function R(ie,j,X,I){if(I-X>T&&!(h&&Fn.isStraight(ie))&&!Fn.isFlatEnough(ie,i||.25)){var G=Fn.subdivide(ie,.5),te=(X+I)/2;R(G[0],j,X,te),R(G[1],j,te,I)}else{var pe=ie[6]-ie[0],oe=ie[7]-ie[1],Ee=Math.sqrt(pe*pe+oe*oe);Ee>0&&(A+=Ee,D.push({offset:A,curve:ie,index:j,time:I}))}}for(var J=1,Y=P.length;J<Y;J++)V=P[J],z(F,V),F=V;t._closed&&z(V||F,P[0]),this.curves=v,this.parts=D,this.length=A,this.index=0},_get:function(t){for(var i=this.parts,o=i.length,h,d=this.index;h=d,!(!d||i[--d].offset<t););for(;h<o;h++){var v=i[h];if(v.offset>=t){this.index=h;var D=i[h-1],A=D&&D.index===v.index?D.time:0,T=D?D.offset:0;return{index:v.index,time:A+(v.time-A)*(t-T)/(v.offset-T)}}}return{index:i[o-1].index,time:1}},drawPart:function(t,i,o){for(var h=this._get(i),d=this._get(o),v=h.index,D=d.index;v<=D;v++){var A=Fn.getPart(this.curves[v],v===h.index?h.time:0,v===d.index?d.time:1);v===h.index&&t.moveTo(A[0],A[1]),t.bezierCurveTo.apply(t,A.slice(2))}}},u.each(Fn._evaluateMethods,function(t){this[t+"At"]=function(i){var o=this._get(i);return Fn[t](this.curves[o.index],o.time)}},{})),Hs=u.extend({initialize:function(t){for(var i=this.points=[],o=t._segments,h=t._closed,d=0,v,D=o.length;d<D;d++){var A=o[d].point;(!v||!v.equals(A))&&i.push(v=A.clone())}h&&(i.unshift(i[i.length-1]),i.push(i[1])),this.closed=h},fit:function(t){var i=this.points,o=i.length,h=null;return o>0&&(h=[new xr(i[0])],o>1&&(this.fitCubic(h,t,0,o-1,i[1].subtract(i[0]),i[o-2].subtract(i[o-1])),this.closed&&(h.shift(),h.pop()))),h},fitCubic:function(t,i,o,h,d,v){var D=this.points;if(h-o===1){var A=D[o],T=D[h],P=A.getDistance(T)/3;this.addCurve(t,[A,A.add(d.normalize(P)),T.add(v.normalize(P)),T]);return}for(var F=this.chordLengthParameterize(o,h),V=Math.max(i,i*i),z,R=!0,J=0;J<=4;J++){var Y=this.generateBezier(o,h,F,d,v),ie=this.findMaxError(o,h,Y,F);if(ie.error<i&&R){this.addCurve(t,Y);return}if(z=ie.index,ie.error>=V)break;R=this.reparameterize(o,h,F,Y),V=ie.error}var j=D[z-1].subtract(D[z+1]);this.fitCubic(t,i,o,z,d,j),this.fitCubic(t,i,z,h,j.negate(),v)},addCurve:function(t,i){var o=t[t.length-1];o.setHandleOut(i[1].subtract(i[0])),t.push(new xr(i[3],i[2].subtract(i[3])))},generateBezier:function(t,i,o,h,d){for(var v=1e-12,D=Math.abs,A=this.points,T=A[t],P=A[i],F=[[0,0],[0,0]],V=[0,0],z=0,R=i-t+1;z<R;z++){var J=o[z],Y=1-J,ie=3*J*Y,j=Y*Y*Y,X=ie*Y,I=ie*J,G=J*J*J,te=h.normalize(X),pe=d.normalize(I),oe=A[t+z].subtract(T.multiply(j+X)).subtract(P.multiply(I+G));F[0][0]+=te.dot(te),F[0][1]+=te.dot(pe),F[1][0]=F[0][1],F[1][1]+=pe.dot(pe),V[0]+=te.dot(oe),V[1]+=pe.dot(oe)}var Ee=F[0][0]*F[1][1]-F[1][0]*F[0][1],$e,Xe;if(D(Ee)>v){var ft=F[0][0]*V[1]-F[1][0]*V[0],Ze=V[0]*F[1][1]-V[1]*F[0][1];$e=Ze/Ee,Xe=ft/Ee}else{var yt=F[0][0]+F[0][1],Et=F[1][0]+F[1][1];$e=Xe=D(yt)>v?V[0]/yt:D(Et)>v?V[1]/Et:0}var Yt=P.getDistance(T),qt=v*Yt,ln,In;if($e<qt||Xe<qt)$e=Xe=Yt/3;else{var Zn=P.subtract(T);ln=h.normalize($e),In=d.normalize(Xe),ln.dot(Zn)-In.dot(Zn)>Yt*Yt&&($e=Xe=Yt/3,ln=In=null)}return[T,T.add(ln||h.normalize($e)),P.add(In||d.normalize(Xe)),P]},reparameterize:function(t,i,o,h){for(var d=t;d<=i;d++)o[d-t]=this.findRoot(h,this.points[d],o[d-t]);for(var d=1,v=o.length;d<v;d++)if(o[d]<=o[d-1])return!1;return!0},findRoot:function(t,i,o){for(var h=[],d=[],v=0;v<=2;v++)h[v]=t[v+1].subtract(t[v]).multiply(3);for(var v=0;v<=1;v++)d[v]=h[v+1].subtract(h[v]).multiply(2);var D=this.evaluate(3,t,o),A=this.evaluate(2,h,o),T=this.evaluate(1,d,o),P=D.subtract(i),F=A.dot(A)+P.dot(T);return Ae.isMachineZero(F)?o:o-P.dot(A)/F},evaluate:function(t,i,o){for(var h=i.slice(),d=1;d<=t;d++)for(var v=0;v<=t-d;v++)h[v]=h[v].multiply(1-o).add(h[v+1].multiply(o));return h[0]},chordLengthParameterize:function(t,i){for(var o=[0],h=t+1;h<=i;h++)o[h-t]=o[h-t-1]+this.points[h].getDistance(this.points[h-1]);for(var h=1,d=i-t;h<=d;h++)o[h]/=o[d];return o},findMaxError:function(t,i,o,h){for(var d=Math.floor((i-t+1)/2),v=0,D=t+1;D<i;D++){var A=this.evaluate(3,o,h[D-t]),T=A.subtract(this.points[D]),P=T.x*T.x+T.y*T.y;P>=v&&(v=P,d=D)}return{error:v,index:d}}}),Ns=He.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var i=t&&u.isPlainObject(t)&&t.x===n&&t.y===n;this._initialize(i&&t,!i&&re.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),da=Ns.extend({_class:"PointText",initialize:function(){Ns.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new mt(t.x,t.y,this,"setPoint")},setPoint:function(){var t=re.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,i,o){if(this._content){this._setStyles(t,i,o);var h=this._lines,d=this._style,v=d.hasFill(),D=d.hasStroke(),A=d.getLeading(),T=t.shadowColor;t.font=d.getFontStyle(),t.textAlign=d.getJustification();for(var P=0,F=h.length;P<F;P++){t.shadowColor=T;var V=h[P];v&&(t.fillText(V,0,0),t.shadowColor="rgba(0,0,0,0)"),D&&t.strokeText(V,0,0),t.translate(0,A)}}},_getBounds:function(t,i){var o=this._style,h=this._lines,d=h.length,v=o.getJustification(),D=o.getLeading(),A=this.getView().getTextWidth(o.getFontStyle(),h),T=0;v!=="left"&&(T-=A/(v==="center"?2:1));var P=new Ie(T,d?-.75*D:0,A,d*D);return t?t._transformBounds(P,P):P}}),Zi=u.extend(new function(){var t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},i={},o={transparent:[0,0,0,0]},h;function d(A){var T=A.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||A.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),P="rgb",F;if(T){var V=T[4]?4:3;F=new Array(V);for(var z=0;z<V;z++){var R=T[z+1];F[z]=parseInt(R.length==1?R+R:R,16)/255}}else if(T=A.match(/^(rgb|hsl)a?\((.*)\)$/)){P=T[1],F=T[2].trim().split(/[,\s]+/g);for(var J=P==="hsl",z=0,Y=Math.min(F.length,4);z<Y;z++){var ie=F[z],R=parseFloat(ie);if(J)if(z===0){var j=ie.match(/([a-z]*)$/)[1];R*={turn:360,rad:180/Math.PI,grad:.9}[j]||1}else z<3&&(R/=100);else z<3&&(R/=/%$/.test(ie)?100:255);F[z]=R}}else{var X=o[A];if(!X)if(s){h||(h=di.getContext(1,1,{willReadFrequently:!0}),h.globalCompositeOperation="copy"),h.fillStyle="rgba(0,0,0,0)",h.fillStyle=A,h.fillRect(0,0,1,1);var I=h.getImageData(0,0,1,1).data;X=o[A]=[I[0]/255,I[1]/255,I[2]/255]}else X=[0,0,0];F=X.slice()}return[P,F]}var v=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],D={"rgb-hsb":function(A,T,P){var F=Math.max(A,T,P),V=Math.min(A,T,P),z=F-V,R=z===0?0:(F==A?(T-P)/z+(T<P?6:0):F==T?(P-A)/z+2:(A-T)/z+4)*60;return[R,F===0?0:z/F,F]},"hsb-rgb":function(A,T,P){A=(A/60%6+6)%6;var V=Math.floor(A),F=A-V,V=v[V],z=[P,P*(1-T),P*(1-T*F),P*(1-T*(1-F))];return[z[V[0]],z[V[1]],z[V[2]]]},"rgb-hsl":function(A,T,P){var F=Math.max(A,T,P),V=Math.min(A,T,P),z=F-V,R=z===0,J=R?0:(F==A?(T-P)/z+(T<P?6:0):F==T?(P-A)/z+2:(A-T)/z+4)*60,Y=(F+V)/2,ie=R?0:Y<.5?z/(F+V):z/(2-F-V);return[J,ie,Y]},"hsl-rgb":function(A,T,P){if(A=(A/360%1+1)%1,T===0)return[P,P,P];for(var F=[A+1/3,A,A-1/3],V=P<.5?P*(1+T):P+T-P*T,z=2*P-V,R=[],J=0;J<3;J++){var Y=F[J];Y<0&&(Y+=1),Y>1&&(Y-=1),R[J]=6*Y<1?z+(V-z)*6*Y:2*Y<1?V:3*Y<2?z+(V-z)*(2/3-Y)*6:z}return R},"rgb-gray":function(A,T,P){return[A*.2989+T*.587+P*.114]},"gray-rgb":function(A){return[A,A,A]},"gray-hsb":function(A){return[0,0,A]},"gray-hsl":function(A){return[0,0,A]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return u.each(t,function(A,T){i[T]=[],u.each(A,function(P,F){var V=u.capitalize(P),z=/^(hue|saturation)$/.test(P),R=i[T][F]=T==="gradient"?P==="gradient"?function(J){var Y=this._components[0];return J=fo.read(Array.isArray(J)?J:arguments,0,{readNull:!0}),Y!==J&&(Y&&Y._removeOwner(this),J&&J._addOwner(this)),J}:function(){return re.read(arguments,0,{readNull:P==="highlight",clone:!0})}:function(J){return J==null||isNaN(J)?0:+J};this["get"+V]=function(){return this._type===T||z&&/^hs[bl]$/.test(this._type)?this._components[F]:this._convert(T)[F]},this["set"+V]=function(J){this._type!==T&&!(z&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(T),this._properties=t[T],this._type=T),this._components[F]=R.call(this,J),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function A(T){var P=arguments,F=this.__read,V=0,z,R,J,Y;Array.isArray(T)&&(P=T,T=P[0]);var ie=T!=null&&typeof T;if(ie==="string"&&T in t&&(z=T,T=P[1],Array.isArray(T)?(R=T,J=P[2]):(F&&(V=1),P=u.slice(P,1),ie=typeof T)),!R){if(Y=ie==="number"?P:ie==="object"&&T.length!=null?T:null,Y){z||(z=Y.length>=3?"rgb":"gray");var j=t[z].length;J=Y[j],F&&(V+=Y===arguments?j+(J!=null?1:0):1),Y.length>j&&(Y=u.slice(Y,0,j))}else if(ie==="string"){var X=d(T);z=X[0],R=X[1],R.length===4&&(J=R[3],R.length--)}else if(ie==="object")if(T.constructor===A){if(z=T._type,R=T._components.slice(),J=T._alpha,z==="gradient")for(var I=1,G=R.length;I<G;I++){var te=R[I];te&&(R[I]=te.clone())}}else if(T.constructor===fo)z="gradient",Y=P;else{z="hue"in T?"lightness"in T?"hsl":"hsb":"gradient"in T||"stops"in T||"radial"in T?"gradient":"gray"in T?"gray":"rgb";var pe=t[z],oe=i[z];this._components=R=[];for(var I=0,G=pe.length;I<G;I++){var Ee=T[pe[I]];Ee==null&&!I&&z==="gradient"&&"stops"in T&&(Ee={stops:T.stops,radial:T.radial}),Ee=oe[I].call(this,Ee),Ee!=null&&(R[I]=Ee)}J=T.alpha}F&&z&&(V=1)}if(this._type=z||"rgb",!R){this._components=R=[];for(var oe=i[this._type],I=0,G=oe.length;I<G;I++){var Ee=oe[I].call(this,Y&&Y[I]);Ee!=null&&(R[I]=Ee)}}return this._components=R,this._properties=t[this._type],this._alpha=J,F&&(this.__read=V),this},set:"#initialize",_serialize:function(A,T){var P=this.getComponents();return u.serialize(/^(gray|rgb)$/.test(this._type)?P:[this._type].concat(P),A,!0,T)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(A){var T;return this._type===A?this._components.slice():(T=D[this._type+"-"+A])?T.apply(this,this._components):D["rgb-"+A].apply(this,D[this._type+"-rgb"].apply(this,this._components))},convert:function(A){return new Zi(A,this._convert(A),this._alpha)},getType:function(){return this._type},setType:function(A){this._components=this._convert(A),this._properties=t[A],this._type=A},getComponents:function(){var A=this._components.slice();return this._alpha!=null&&A.push(this._alpha),A},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(A){this._alpha=A==null?null:Math.min(Math.max(A,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(A){var T=u.isPlainValue(A,!0)?Zi.read(arguments):A;return T===this||T&&this._class===T._class&&this._type===T._type&&this.getAlpha()===T.getAlpha()&&u.equals(this._components,T._components)||!1},toString:function(){for(var A=this._properties,T=[],P=this._type==="gradient",F=ve.instance,V=0,z=A.length;V<z;V++){var R=this._components[V];R!=null&&T.push(A[V]+": "+(P?R:F.number(R)))}return this._alpha!=null&&T.push("alpha: "+F.number(this._alpha)),"{ "+T.join(", ")+" }"},toCSS:function(A){var T=this._convert("rgb"),P=A||this._alpha==null?1:this._alpha;function F(V){return Math.round((V<0?0:V>1?1:V)*255)}return T=[F(T[0]),F(T[1]),F(T[2])],P<1&&T.push(P<0?0:P),A?"#"+((1<<24)+(T[0]<<16)+(T[1]<<8)+T[2]).toString(16).slice(1):(T.length==4?"rgba(":"rgb(")+T.join(",")+")"},toCanvasStyle:function(A,T){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var P=this._components,F=P[0],V=F._stops,z=P[1],R=P[2],J=P[3],Y=T&&T.inverted(),ie;if(Y&&(z=Y._transformPoint(z),R=Y._transformPoint(R),J&&(J=Y._transformPoint(J))),F._radial){var j=R.getDistance(z);if(J){var X=J.subtract(z);X.getLength()>j&&(J=z.add(X.normalize(j-.1)))}var I=J||z;ie=A.createRadialGradient(I.x,I.y,0,z.x,z.y,j)}else ie=A.createLinearGradient(z.x,z.y,R.x,R.y);for(var G=0,te=V.length;G<te;G++){var pe=V[G],oe=pe._offset;ie.addColorStop(oe??G/(te-1),pe._color.toCanvasStyle())}return this._canvasStyle=ie},transform:function(A){if(this._type==="gradient"){for(var T=this._components,P=1,F=T.length;P<F;P++){var V=T[P];A._transformPoint(V,V,!0)}this._changed()}},statics:{_types:t,random:function(){var A=Math.random;return new Zi(A(),A(),A())},_setOwner:function(A,T,P){return A&&(A._owner&&T&&A._owner!==T&&(A=A.clone()),!A._owner^!T&&(A._owner=T||null,A._setter=P||null)),A}}})},new function(){var t={add:function(i,o){return i+o},subtract:function(i,o){return i-o},multiply:function(i,o){return i*o},divide:function(i,o){return i/o}};return u.each(t,function(i,o){this[o]=function(h){h=Zi.read(arguments);for(var d=this._type,v=this._components,D=h._convert(d),A=0,T=v.length;A<T;A++)D[A]=i(v[A],D[A]);return new Zi(d,D,this._alpha!=null?i(this._alpha,h.getAlpha()):null)}},{})}),fo=u.extend({_class:"Gradient",initialize:function(t,i){this._id=rt.get(),t&&u.isPlainObject(t)&&(this.set(t),t=i=null),this._stops==null&&this.setStops(t||["white","black"]),this._radial==null&&this.setRadial(typeof i=="string"&&i==="radial"||i||!1)},_serialize:function(t,i){return i.add(this,function(){return u.serialize([this._stops,this._radial],t,!0,i)})},_changed:function(){for(var t=0,i=this._owners&&this._owners.length;t<i;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var i=this._owners?this._owners.indexOf(t):-1;i!=-1&&(this._owners.splice(i,1),this._owners.length||(this._owners=n))},clone:function(){for(var t=[],i=0,o=this._stops.length;i<o;i++)t[i]=this._stops[i].clone();return new fo(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var i=this._stops;if(i)for(var o=0,h=i.length;o<h;o++)i[o]._owner=n;i=this._stops=io.readList(t,0,{clone:!0});for(var o=0,h=i.length;o<h;o++)i[o]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var i=this._stops,o=t._stops,h=i.length;if(h===o.length){for(var d=0;d<h;d++)if(!i[d].equals(o[d]))return!1;return!0}}return!1}}),io=u.extend({_class:"GradientStop",initialize:function(t,i){var o=t,h=i;typeof t=="object"&&i===n&&(Array.isArray(t)&&typeof t[0]!="number"?(o=t[0],h=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(o=t.color,h=t.offset||t.rampPoint||0)),this.setColor(o),this.setOffset(h)},clone:function(){return new io(this._color.clone(),this._offset)},_serialize:function(t,i){var o=this._color,h=this._offset;return u.serialize(h==null?[o]:[o,h],t,!0,i)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Zi._setOwner(this._color,null),this._color=Zi._setOwner(Zi.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),qo=u.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new re,selectedColor:null},i=u.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),o=u.set({},i,{fillColor:new Zi}),h={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},d={beans:!0},v={_class:"Style",beans:!0,initialize:function(D,A,T){this._values={},this._owner=A,this._project=A&&A._project||T||ar.project,this._defaults=!A||A instanceof _e?i:A instanceof Ns?o:t,D&&this.set(D)}};return u.each(i,function(D,A){var T=/Color$/.test(A),P=A==="shadowOffset",F=u.capitalize(A),V=h[A],z="set"+F,R="get"+F;v[z]=function(J){var Y=this._owner,ie=Y&&Y._children,j=ie&&ie.length>0&&!(Y instanceof hs);if(j)for(var X=0,I=ie.length;X<I;X++)ie[X]._style[z](J);if((A==="selectedColor"||!j)&&A in this._defaults){var G=this._values[A];G!==J&&(T&&(G&&(Zi._setOwner(G,null),G._canvasStyle=null),J&&J.constructor===Zi&&(J=Zi._setOwner(J,Y,j&&z))),this._values[A]=J,Y&&Y._changed(V||129))}},v[R]=function(J){var Y=this._owner,ie=Y&&Y._children,j=ie&&ie.length>0&&!(Y instanceof hs),X;if(j&&!J)for(var I=0,G=ie.length;I<G;I++){var te=ie[I]._style[R]();if(!I)X=te;else if(!u.equals(X,te))return n}else if(A in this._defaults){var X=this._values[A];if(X===n)X=this._defaults[A],X&&X.clone&&(X=X.clone());else{var pe=T?Zi:P?re:null;pe&&!(X&&X.constructor===pe)&&(this._values[A]=X=pe.read([X],0,{readNull:!0,clone:!0}))}}return X&&T&&(X=Zi._setOwner(X,Y,j&&z)),X},d[R]=function(J){return this._style[R](J)},d[z]=function(J){this._style[z](J)}}),u.each({Font:"FontFamily",WindingRule:"FillRule"},function(D,A){var T="get"+A,P="set"+A;v[T]=d[T]="#get"+D,v[P]=d[P]="#set"+D}),He.inject(d),v},{set:function(t){var i=t instanceof qo,o=i?t._values:t;if(o){for(var h in o)if(h in this._defaults){var d=o[h];this[h]=d&&i&&d.clone?d.clone():d}}},equals:function(t){function i(o,h,d){var v=o._values,D=h._values,A=h._defaults;for(var T in v){var P=v[T],F=D[T];if(!(d&&T in D)&&!u.equals(P,F===n?A[T]:F))return!1}return!0}return t===this||t&&this._class===t._class&&i(this,t)&&i(t,this,!0)||!1},_dispose:function(){var t;t=this.getFillColor(),t&&(t._canvasStyle=null),t=this.getStrokeColor(),t&&(t._canvasStyle=null),t=this.getShadowColor(),t&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var i=t.base.call(this),o=this.getFontSize();return/pt|em|%|px/.test(o)&&(o=this.getView().getPixelSize(o)),i??o*1.2}}),Ti=new function(){function t(i,o,h,d){for(var v=["","webkit","moz","Moz","ms","o"],D=o[0].toUpperCase()+o.substring(1),A=0;A<6;A++){var T=v[A],P=T?T+D:o;if(P in i){if(h)i[P]=d;else return i[P];break}}}return{getStyles:function(i){var o=i&&i.nodeType!==9?i.ownerDocument:i,h=o&&o.defaultView;return h&&h.getComputedStyle(i,"")},getBounds:function(i,o){var h=i.ownerDocument,d=h.body,v=h.documentElement,D;try{D=i.getBoundingClientRect()}catch{D={left:0,top:0,width:0,height:0}}var A=D.left-(v.clientLeft||d.clientLeft||0),T=D.top-(v.clientTop||d.clientTop||0);if(!o){var P=h.defaultView;A+=P.pageXOffset||v.scrollLeft||d.scrollLeft,T+=P.pageYOffset||v.scrollTop||d.scrollTop}return new Ie(A,T,D.width,D.height)},getViewportBounds:function(i){var o=i.ownerDocument,h=o.defaultView,d=o.documentElement;return new Ie(0,0,h.innerWidth||d.clientWidth,h.innerHeight||d.clientHeight)},getOffset:function(i,o){return Ti.getBounds(i,o).getPoint()},getSize:function(i){return Ti.getBounds(i,!0).getSize()},isInvisible:function(i){return Ti.getSize(i).equals(new nt(0,0))},isInView:function(i){return!Ti.isInvisible(i)&&Ti.getViewportBounds(i).intersects(Ti.getBounds(i,!0))},isInserted:function(i){return c.body.contains(i)},getPrefixed:function(i,o){return i&&t(i,o)},setPrefixed:function(i,o,h){if(typeof o=="object")for(var d in o)t(i,d,!0,o[d]);else t(i,o,!0,h)}}},Fi={add:function(t,i){if(t)for(var o in i)for(var h=i[o],d=o.split(/[\s,]+/g),v=0,D=d.length;v<D;v++){var A=d[v],T=t===c&&(A==="touchstart"||A==="touchmove")?{passive:!1}:!1;t.addEventListener(A,h,T)}},remove:function(t,i){if(t)for(var o in i)for(var h=i[o],d=o.split(/[\s,]+/g),v=0,D=d.length;v<D;v++)t.removeEventListener(d[v],h,!1)},getPoint:function(t){var i=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new re(i.pageX||i.clientX+c.documentElement.scrollLeft,i.pageY||i.clientY+c.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,i){return Fi.getPoint(t).subtract(Ti.getOffset(i||Fi.getTarget(t)))}};Fi.requestAnimationFrame=new function(){var t=Ti.getPrefixed(s,"requestAnimationFrame"),i=!1,o=[],h;function d(){var v=o;o=[];for(var D=0,A=v.length;D<A;D++)v[D]();i=t&&o.length,i&&t(d)}return function(v){o.push(v),t?i||(t(d),i=!0):h||(h=setInterval(d,16.666666666666668))}};var zi=u.extend(m,{_class:"View",initialize:function t(i,o){function h(V){return o[V]||parseInt(o.getAttribute(V),10)}function d(){var V=Ti.getSize(o);return V.isNaN()||V.isZero()?new nt(h("width"),h("height")):V}var v;if(s&&o){this._id=o.getAttribute("id"),this._id==null&&o.setAttribute("id",this._id="paper-view-"+t._id++),Fi.add(o,this._viewEvents);var D="none";if(Ti.setPrefixed(o.style,{userDrag:D,userSelect:D,touchCallout:D,contentZooming:D,tapHighlightColor:"rgba(0,0,0,0)"}),b.hasAttribute(o,"resize")){var A=this;Fi.add(s,this._windowEvents={resize:function(){A.setViewSize(d())}})}if(v=d(),b.hasAttribute(o,"stats")&&typeof Stats<"u"){this._stats=new Stats;var T=this._stats.domElement,P=T.style,F=Ti.getOffset(o);P.position="absolute",P.left=F.x+"px",P.top=F.y+"px",c.body.appendChild(T)}}else v=new nt(o),o=null;this._project=i,this._scope=i._scope,this._element=o,this._pixelRatio||(this._pixelRatio=s&&s.devicePixelRatio||1),this._setElementSize(v.width,v.height),this._viewSize=v,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new At)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ar.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;zi._focused===this&&(zi._focused=null),zi._views.splice(zi._views.indexOf(this),1),delete zi._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Fi.remove(this._element,this._viewEvents),Fi.remove(s,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:u.each(He._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Fi.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var i=t._element;(!Ti.getPrefixed(c,"hidden")||b.getAttribute(i,"keepalive")==="true")&&Ti.isInView(i)&&t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ar=this._scope;var t=Date.now()/1e3,i=this._last?t-this._last:0;this._last=t,this.emit("frame",new u({delta:i,time:this._time+=i,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,i){var o=this._frameItems;i?(o[t._id]={item:t,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete o[t._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var i in this._frameItems){var o=this._frameItems[i];o.item.emit("frame",new u(t,{time:o.time+=t.delta,count:o.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var t=this._viewSize;return new tn(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=nt.read(arguments),i=t.subtract(this._viewSize);i.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:i}),this._autoUpdate&&this.update())},_setElementSize:function(t,i){var o=this._element;o&&(o.width!==t&&(o.width=t),o.height!==i&&(o.height=i))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new Ie(new re,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Ti.isInView(this._element)},isInserted:function(){return Ti.isInserted(this._element)},getPixelSize:function(t){var i=this._element,o;if(i){var h=i.parentNode,d=c.createElement("div");d.style.fontSize=t,h.appendChild(d),o=parseFloat(Ti.getStyles(d).fontSize),h.removeChild(d)}else o=parseFloat(o);return o},getTextWidth:function(t,i){return 0}},u.each(["rotate","scale","shear","skew"],function(t){var i=t==="rotate";this[t]=function(){var o=arguments,h=(i?u:re).read(o),d=re.read(o,0,{readNull:!0});return this.transform(new At()[t](h,d||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new At;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=re.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform(new At().scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var i=this.getRotation();i!=null&&t!=null&&this.rotate(t-i)},getScaling:function(){var t=this._decompose().scaling;return new mt(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),i=re.read(arguments,0,{clone:!0,readNull:!0});t&&i&&this.scale(i.x/t.x,i.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(re.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(re.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(re.read(arguments))},getEventPoint:function(t){return this.viewToProject(Fi.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,i){c&&typeof i=="string"&&(i=c.getElementById(i));var o=s?wo:zi;return new o(t,i)}}},new function(){if(!s)return;var t,i,o=!1,h=!1;function d(Ze){var yt=Fi.getTarget(Ze);return yt.getAttribute&&zi._viewsById[yt.getAttribute("id")]}function v(){var Ze=zi._focused;if(!Ze||!Ze.isVisible()){for(var yt=0,Et=zi._views.length;yt<Et;yt++)if((Ze=zi._views[yt]).isVisible()){zi._focused=i=Ze;break}}}function D(Ze,yt,Et){Ze._handleMouseEvent("mousemove",yt,Et)}var A=s.navigator,T,P,F;A.pointerEnabled||A.msPointerEnabled?(T="pointerdown MSPointerDown",P="pointermove MSPointerMove",F="pointerup pointercancel MSPointerUp MSPointerCancel"):(T="touchstart",P="touchmove",F="touchend touchcancel","ontouchstart"in s&&A.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(T+=" mousedown",P+=" mousemove",F+=" mouseup"));var V={},z={mouseout:function(Ze){var yt=zi._focused,Et=Fi.getRelatedTarget(Ze);if(yt&&(!Et||Et.nodeName==="HTML")){var Yt=Fi.getOffset(Ze,yt._element),qt=Yt.x,ln=Math.abs,In=ln(qt),Zn=1<<25,Kn=In-Zn;Yt.x=ln(Kn)<In?Kn*(qt<0?-1:1):qt,D(yt,Ze,yt.viewToProject(Yt))}},scroll:v};V[T]=function(Ze){var yt=zi._focused=d(Ze);o||(o=!0,yt._handleMouseEvent("mousedown",Ze))},z[P]=function(Ze){var yt=zi._focused;if(!h){var Et=d(Ze);Et?yt!==Et&&(yt&&D(yt,Ze),t||(t=yt),yt=zi._focused=i=Et):i&&i===yt&&(t&&!t.isInserted()&&(t=null),yt=zi._focused=t,t=null,v())}yt&&D(yt,Ze)},z[T]=function(){h=!0},z[F]=function(Ze){var yt=zi._focused;yt&&o&&yt._handleMouseEvent("mouseup",Ze),h=o=!1},Fi.add(c,z),Fi.add(s,{load:v});var R=!1,J=!1,Y={doubleclick:"click",mousedrag:"mousemove"},ie=!1,j,X,I,G,te,pe,oe,Ee;function $e(Ze,yt,Et,Yt,qt,ln,In){var Zn=!1,Kn;function ur(yn,An){if(yn.responds(An)){if(Kn||(Kn=new so(An,Yt,qt,yt||yn,ln?qt.subtract(ln):null)),yn.emit(An,Kn)&&(R=!0,Kn.prevented&&(J=!0),Kn.stopped))return Zn=!0}else{var qn=Y[An];if(qn)return ur(yn,qn)}}for(;Ze&&Ze!==In&&!ur(Ze,Et);)Ze=Ze._parent;return Zn}function Xe(Ze,yt,Et,Yt,qt,ln){return Ze._project.removeOn(Et),J=R=!1,te&&$e(te,null,Et,Yt,qt,ln)||yt&&yt!==te&&!yt.isDescendant(te)&&$e(yt,null,Et==="mousedrag"?"mousemove":Et,Yt,qt,ln,te)||$e(Ze,te||yt||Ze,Et,Yt,qt,ln)}var ft={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:V,_handleMouseEvent:function(Ze,yt,Et){var Yt=this._itemEvents,qt=Yt.native[Ze],ln=Ze==="mousemove",In=this._scope.tool,Zn=this;function Kn(Rr){return Yt.virtual[Rr]||Zn.responds(Rr)||In&&In.responds(Rr)}ln&&o&&Kn("mousedrag")&&(Ze="mousedrag"),Et||(Et=this.getEventPoint(yt));var ur=this.getBounds().contains(Et),yn=qt&&ur&&Zn._project.hitTest(Et,{tolerance:0,fill:!0,stroke:!0}),An=yn&&yn.item||null,qn=!1,cr={};if(cr[Ze.substr(5)]=!0,qt&&An!==G&&(G&&$e(G,null,"mouseleave",yt,Et),An&&$e(An,null,"mouseenter",yt,Et),G=An),ie^ur&&($e(this,null,ur?"mouseenter":"mouseleave",yt,Et),qn=!0),(ur||cr.drag)&&!Et.equals(X)&&(Xe(this,An,ln?Ze:"mousemove",yt,Et,X),qn=!0),ie=ur,cr.down&&ur||cr.up&&j){if(Xe(this,An,Ze,yt,Et,j),cr.down){if(Ee=An===pe&&Date.now()-oe<300,I=pe=An,!J&&An){for(var mr=An;mr&&!mr.responds("mousedrag");)mr=mr._parent;mr&&(te=An)}j=Et}else cr.up&&(!J&&An===I&&(oe=Date.now(),Xe(this,An,Ee?"doubleclick":"click",yt,Et,j),Ee=!1),I=te=null);ie=!1,qn=!0}X=Et,qn&&In&&(R=In._handleMouseEvent(Ze,yt,Et,cr)||R),yt.cancelable!==!1&&(R&&!cr.move||cr.down&&Kn("mouseup"))&&yt.preventDefault()},_handleKeyEvent:function(Ze,yt,Et,Yt){var qt=this._scope,ln=qt.tool,In;function Zn(Kn){Kn.responds(Ze)&&(ar=qt,Kn.emit(Ze,In=In||new Fa(Ze,yt,Et,Yt)))}this.isVisible()&&(Zn(this),ln&&ln.responds(Ze)&&Zn(ln))},_countItemEvent:function(Ze,yt){var Et=this._itemEvents,Yt=Et.native,qt=Et.virtual;for(var ln in ft)Yt[ln]=(Yt[ln]||0)+(ft[ln][Ze]||0)*yt;qt[Ze]=(qt[Ze]||0)+yt},statics:{updateFocus:v,_resetState:function(){o=h=R=ie=!1,t=i=j=X=I=G=te=pe=oe=Ee=null}}}}),wo=zi.extend({_class:"CanvasView",initialize:function(t,i){if(!(i instanceof s.HTMLCanvasElement)){var o=nt.read(arguments,1);if(o.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+u.slice(arguments,1));i=di.getCanvas(o)}var h=this._context=i.getContext("2d");if(h.save(),this._pixelRatio=1,!/^off|false$/.test(b.getAttribute(i,"hidpi"))){var d=s.devicePixelRatio||1,v=Ti.getPrefixed(h,"backingStorePixelRatio")||1;this._pixelRatio=d/v}zi.call(this,t,i),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(i,o){var h=this._pixelRatio;if(t.base.call(this,i*h,o*h),h!==1){var d=this._element,v=this._context;if(!b.hasAttribute(d,"resize")){var D=d.style;D.width=i+"px",D.height=o+"px"}v.restore(),v.save(),v.scale(h,h)}},getContext:function(){return this._context},getPixelSize:function t(i){var o=ar.agent,h;if(o&&o.firefox)h=t.base.call(this,i);else{var d=this._context,v=d.font;d.font=i+" serif",h=parseFloat(d.font),d.font=v}return h},getTextWidth:function(t,i){var o=this._context,h=o.font,d=0;o.font=t;for(var v=0,D=i.length;v<D;v++)d=Math.max(d,o.measureText(i[v]).width);return o.font=h,d},update:function(){if(!this._needsUpdate)return!1;var t=this._project,i=this._context,o=this._viewSize;return i.clearRect(0,0,o.width+1,o.height+1),t&&t.draw(i,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),xo=u.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Uo.modifiers}}),Fa=xo.extend({_class:"KeyEvent",initialize:function(t,i,o,h){this.type=t,this.event=i,this.key=o,this.character=h},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Uo=new function(){var t={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},i={tab:"	",space:" ",enter:"\r"},o={},h={},d,v,D=new u({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var P=ar&&ar.agent;return P&&P.mac?this.meta:this.control}}});function A(P){var F=P.key||P.keyIdentifier;return F=/^U\+/.test(F)?String.fromCharCode(parseInt(F.substr(2),16)):/^Arrow[A-Z]/.test(F)?F.substr(5):F==="Unidentified"||F===n?String.fromCharCode(P.keyCode):F,t[F]||(F.length>1?u.hyphenate(F):F.toLowerCase())}function T(P,F,V,z){var R=zi._focused,J;if(o[F]=P,P?h[F]=V:delete h[F],F.length>1&&(J=u.camelize(F))in D){D[J]=P;var Y=ar&&ar.agent;if(J==="meta"&&Y&&Y.mac)if(P)d={};else{for(var ie in d)ie in h&&T(!1,ie,d[ie],z);d=null}}else P&&d&&(d[F]=V);R&&R._handleKeyEvent(P?"keydown":"keyup",z,F,V)}return Fi.add(c,{keydown:function(P){var F=A(P),V=ar&&ar.agent;F.length>1||V&&V.chrome&&(P.altKey||V.mac&&P.metaKey||!V.mac&&P.ctrlKey)?T(!0,F,i[F]||(F.length>1?"":F),P):v=F},keypress:function(P){if(v){var F=A(P),V=P.charCode,z=V>=32?String.fromCharCode(V):F.length>1?"":F;F!==v&&(F=z.toLowerCase()),T(!0,F,z,P),v=null}},keyup:function(P){var F=A(P);F in h&&T(!1,F,h[F],P)}}),Fi.add(s,{blur:function(P){for(var F in h)T(!1,F,h[F],P)}}),{modifiers:D,isDown:function(P){return!!o[P]}}},so=xo.extend({_class:"MouseEvent",initialize:function(t,i,o,h,d){this.type=t,this.event=i,this.point=o,this.target=h,this.delta=d},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),pa=xo.extend({_class:"ToolEvent",_item:null,initialize:function(t,i,o){this.tool=t,this.type=i,this.event=o},_choosePoint:function(t,i){return t||(i?i.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var i=t.item,o=i._parent;/^(Group|CompoundPath)$/.test(o._class);)i=o,o=o._parent;this._item=i}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),ea=k.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){k.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,t!=null&&this._maxDistance!=null&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,this._minDistance!=null&&t!=null&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,i,o,h){ar=this._scope,h.drag&&!this.responds(t)&&(t="mousemove");var d=h.move||h.drag,v=this.responds(t),D=this.minDistance,A=this.maxDistance,T=!1,P=this;function F(z,R){var J=o,Y=d?P._point:P._downPoint||J;if(d){if(P._moveCount>=0&&J.equals(Y))return!1;if(Y&&(z!=null||R!=null)){var ie=J.subtract(Y),j=ie.getLength();if(j<(z||0))return!1;R&&(J=Y.add(ie.normalize(Math.min(j,R))))}P._moveCount++}return P._point=J,P._lastPoint=Y||J,h.down&&(P._moveCount=-1,P._downPoint=J,P._downCount++),!0}function V(){v&&(T=P.emit(t,new pa(P,t,i))||T)}if(h.down)F(),V();else if(h.up)F(null,A),V();else if(v)for(;F(D,A);)V();return T}}),fs=u.extend(m,{_class:"Tween",statics:{easings:new u({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+2*(2-t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(i,o,h,d,v,D){this.object=i;var A=typeof v,T=A==="function";this.type=T?A:A==="string"?v:"linear",this.easing=T?v:t.easings[this.type],this.duration=d,this.running=!1,this._then=null,this._startTime=null;var P=o||h;this._keys=P?Object.keys(P):[],this._parsedKeys=this._parseKeys(this._keys),this._from=P&&this._getState(o),this._to=P&&this._getState(h),D!==!1&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var i=this.easing(t),o=this._keys,h=function(F){return typeof F=="function"?F(i,t):F},d=0,v=o&&o.length;d<v;d++){var D=o[d],A=h(this._from[D]),T=h(this._to[D]),P=A&&T&&A.__add&&T.__add?T.__subtract(A).__multiply(i).__add(A):(T-A)*i+A;this._setProperty(this._parsedKeys[D],P)}this.responds("update")&&this.emit("update",new u({progress:t,factor:i})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var i=this._startTime,o=i?(t-i)/this.duration:0;i||(this._startTime=t),this.update(o)},_getState:function(t){for(var i=this._keys,o={},h=0,d=i.length;h<d;h++){var v=i[h],D=this._parsedKeys[v],A=this._getProperty(D),T;if(t){var P=this._resolveValue(A,t[v]);this._setProperty(D,P),T=this._getProperty(D),T=T&&T.clone?T.clone():T,this._setProperty(D,A)}else T=A&&A.clone?A.clone():A;o[v]=T}return o},_resolveValue:function(t,i){if(i){if(Array.isArray(i)&&i.length===2){var o=i[0];return o&&o.match&&o.match(/^[+\-\*\/]=/)?this._calculate(t,o[0],i[1]):i}else if(typeof i=="string"){var h=i.match(/^[+\-*/]=(.*)/);if(h){var d=JSON.parse(h[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,i[0],d)}}}return i},_calculate:function(t,i,o){return ar.PaperScript.calculateBinary(t,i,o)},_parseKeys:function(t){for(var i={},o=0,h=t.length;o<h;o++){var d=t[o],v=d.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");i[d]=v.split("/")}return i},_getProperty:function(t,i){for(var o=this.object,h=0,d=t.length-(i||0);h<d&&o;h++)o=o[t[h]];return o},_setProperty:function(t,i){var o=this._getProperty(t,1);o&&(o[t[t.length-1]]=i)}}),Ds={request:function(t){var i=new e.XMLHttpRequest;return i.open((t.method||"get").toUpperCase(),t.url,u.pick(t.async,!0)),t.mimeType&&i.overrideMimeType(t.mimeType),i.onload=function(){var o=i.status;o===0||o===200?t.onLoad&&t.onLoad.call(i,i.responseText):i.onerror()},i.onerror=function(){var o=i.status,h='Could not load "'+t.url+'" (Status: '+o+")";if(t.onError)t.onError(h,o);else throw new Error(h)},i.send(null)}},di=u.exports.CanvasProvider={canvases:[],getCanvas:function(t,i,o){if(!s)return null;var h,d=!0;typeof t=="object"&&(i=t.height,t=t.width),this.canvases.length?h=this.canvases.pop():(h=c.createElement("canvas"),d=!1);var v=h.getContext("2d",o||{});if(!v)throw new Error("Canvas "+h+" is unable to provide a 2D context.");return h.width===t&&h.height===i?d&&v.clearRect(0,0,t+1,i+1):(h.width=t,h.height=i),v.save(),h},getContext:function(t,i,o){var h=this.getCanvas(t,i,o);return h?h.getContext("2d",o||{}):null},release:function(t){var i=t&&t.canvas?t.canvas:t;i&&i.getContext&&(i.getContext("2d").restore(),this.canvases.push(i))}},Ai=new function(){var t=Math.min,i=Math.max,o=Math.abs,h,d,v,D,A,T,P,F,V,z,R;function J(te,pe,oe){return .2989*te+.587*pe+.114*oe}function Y(te,pe,oe,Xe){var $e=Xe-J(te,pe,oe);V=te+$e,z=pe+$e,R=oe+$e;var Xe=J(V,z,R),ft=t(V,z,R),Ze=i(V,z,R);if(ft<0){var yt=Xe-ft;V=Xe+(V-Xe)*Xe/yt,z=Xe+(z-Xe)*Xe/yt,R=Xe+(R-Xe)*Xe/yt}if(Ze>255){var Et=255-Xe,Yt=Ze-Xe;V=Xe+(V-Xe)*Et/Yt,z=Xe+(z-Xe)*Et/Yt,R=Xe+(R-Xe)*Et/Yt}}function ie(te,pe,oe){return i(te,pe,oe)-t(te,pe,oe)}function j(te,pe,oe,Ee){var $e=[te,pe,oe],Xe=i(te,pe,oe),ft=t(te,pe,oe),Ze;ft=ft===te?0:ft===pe?1:2,Xe=Xe===te?0:Xe===pe?1:2,Ze=t(ft,Xe)===0?i(ft,Xe)===1?2:1:0,$e[Xe]>$e[ft]?($e[Ze]=($e[Ze]-$e[ft])*Ee/($e[Xe]-$e[ft]),$e[Xe]=Ee):$e[Ze]=$e[Xe]=0,$e[ft]=0,V=$e[0],z=$e[1],R=$e[2]}var X={multiply:function(){V=A*h/255,z=T*d/255,R=P*v/255},screen:function(){V=A+h-A*h/255,z=T+d-T*d/255,R=P+v-P*v/255},overlay:function(){V=A<128?2*A*h/255:255-2*(255-A)*(255-h)/255,z=T<128?2*T*d/255:255-2*(255-T)*(255-d)/255,R=P<128?2*P*v/255:255-2*(255-P)*(255-v)/255},"soft-light":function(){var te=h*A/255;V=te+A*(255-(255-A)*(255-h)/255-te)/255,te=d*T/255,z=te+T*(255-(255-T)*(255-d)/255-te)/255,te=v*P/255,R=te+P*(255-(255-P)*(255-v)/255-te)/255},"hard-light":function(){V=h<128?2*h*A/255:255-2*(255-h)*(255-A)/255,z=d<128?2*d*T/255:255-2*(255-d)*(255-T)/255,R=v<128?2*v*P/255:255-2*(255-v)*(255-P)/255},"color-dodge":function(){V=A===0?0:h===255?255:t(255,255*A/(255-h)),z=T===0?0:d===255?255:t(255,255*T/(255-d)),R=P===0?0:v===255?255:t(255,255*P/(255-v))},"color-burn":function(){V=A===255?255:h===0?0:i(0,255-(255-A)*255/h),z=T===255?255:d===0?0:i(0,255-(255-T)*255/d),R=P===255?255:v===0?0:i(0,255-(255-P)*255/v)},darken:function(){V=A<h?A:h,z=T<d?T:d,R=P<v?P:v},lighten:function(){V=A>h?A:h,z=T>d?T:d,R=P>v?P:v},difference:function(){V=A-h,V<0&&(V=-V),z=T-d,z<0&&(z=-z),R=P-v,R<0&&(R=-R)},exclusion:function(){V=A+h*(255-A-A)/255,z=T+d*(255-T-T)/255,R=P+v*(255-P-P)/255},hue:function(){j(h,d,v,ie(A,T,P)),Y(V,z,R,J(A,T,P))},saturation:function(){j(A,T,P,ie(h,d,v)),Y(V,z,R,J(A,T,P))},luminosity:function(){Y(A,T,P,J(h,d,v))},color:function(){Y(h,d,v,J(A,T,P))},add:function(){V=t(A+h,255),z=t(T+d,255),R=t(P+v,255)},subtract:function(){V=i(A-h,0),z=i(T-d,0),R=i(P-v,0)},average:function(){V=(A+h)/2,z=(T+d)/2,R=(P+v)/2},negation:function(){V=255-o(255-h-A),z=255-o(255-d-T),R=255-o(255-v-P)}},I=this.nativeModes=u.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(te){this[te]=!0},{}),G=di.getContext(1,1,{willReadFrequently:!0});G&&(u.each(X,function(te,pe){var oe=pe==="darken",Ee=!1;G.save();try{G.fillStyle=oe?"#300":"#a00",G.fillRect(0,0,1,1),G.globalCompositeOperation=pe,G.globalCompositeOperation===pe&&(G.fillStyle=oe?"#a00":"#300",G.fillRect(0,0,1,1),Ee=G.getImageData(0,0,1,1).data[0]!==oe?170:51)}catch{}G.restore(),I[pe]=Ee}),di.release(G)),this.process=function(te,pe,oe,Ee,$e){var Xe=pe.canvas,ft=te==="normal";if(ft||I[te])oe.save(),oe.setTransform(1,0,0,1,0,0),oe.globalAlpha=Ee,ft||(oe.globalCompositeOperation=te),oe.drawImage(Xe,$e.x,$e.y),oe.restore();else{var Ze=X[te];if(!Ze)return;for(var yt=oe.getImageData($e.x,$e.y,Xe.width,Xe.height),Et=yt.data,Yt=pe.getImageData(0,0,Xe.width,Xe.height).data,qt=0,ln=Et.length;qt<ln;qt+=4){h=Yt[qt],A=Et[qt],d=Yt[qt+1],T=Et[qt+1],v=Yt[qt+2],P=Et[qt+2],D=Yt[qt+3],F=Et[qt+3],Ze();var In=D*Ee/255,Zn=1-In;Et[qt]=In*V+Zn*A,Et[qt+1]=In*z+Zn*T,Et[qt+2]=In*R+Zn*P,Et[qt+3]=D*Ee+Zn*F}oe.putImageData(yt,$e.x,$e.y)}}},ui=new function(){var t="http://www.w3.org/2000/svg",i="http://www.w3.org/2000/xmlns",o="http://www.w3.org/1999/xlink",h={href:o,xlink:i,xmlns:i+"/","xmlns:xlink":i+"/"};function d(A,T,P){return D(c.createElementNS(t,A),T,P)}function v(A,T){var P=h[T],F=P?A.getAttributeNS(P,T):A.getAttribute(T);return F==="null"?null:F}function D(A,T,P){for(var F in T){var V=T[F],z=h[F];typeof V=="number"&&P&&(V=P.number(V)),z?A.setAttributeNS(z,F,V):A.setAttribute(F,V)}return A}return{svg:t,xmlns:i,xlink:o,create:d,get:v,set:D}},bo=u.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,i){return!i&&(t instanceof Pi||t instanceof On||t instanceof Ns)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,i){var o=u.capitalize(i),h=t[2];this[i]={type:t[1],property:i,attribute:t[0],toSVG:h,fromSVG:h&&u.each(h,function(d,v){this[d]=v},{}),exportFilter:t[3],get:"get"+o,set:"set"+o}},{});new function(){var t;function i(X,I,G){var te=new u,pe=X.getTranslation();if(I){var oe;X.isInvertible()?(X=X._shiftless(),oe=X._inverseTransform(pe),pe=null):oe=new re,te[G?"cx":"x"]=oe.x,te[G?"cy":"y"]=oe.y}if(!X.isIdentity()){var Ee=X.decompose();if(Ee){var $e=[],Xe=Ee.rotation,ft=Ee.scaling,Ze=Ee.skewing;pe&&!pe.isZero()&&$e.push("translate("+t.point(pe)+")"),Xe&&$e.push("rotate("+t.number(Xe)+")"),(!Ae.isZero(ft.x-1)||!Ae.isZero(ft.y-1))&&$e.push("scale("+t.point(ft)+")"),Ze.x&&$e.push("skewX("+t.number(Ze.x)+")"),Ze.y&&$e.push("skewY("+t.number(Ze.y)+")"),te.transform=$e.join(" ")}else te.transform="matrix("+X.getValues().join(",")+")"}return te}function o(X,I){for(var G=i(X._matrix),te=X._children,pe=ui.create("g",G,t),oe=0,Ee=te.length;oe<Ee;oe++){var $e=te[oe],Xe=ie($e,I);if(Xe)if($e.isClipMask()){var ft=ui.create("clipPath");ft.appendChild(Xe),J($e,ft,"clip"),ui.set(pe,{"clip-path":"url(#"+ft.id+")"})}else pe.appendChild(Xe)}return pe}function h(X,I){var G=i(X._matrix,!0),te=X.getSize(),pe=X.getImage();return G.x-=te.width/2,G.y-=te.height/2,G.width=te.width,G.height=te.height,G.href=I.embedImages==!1&&pe&&pe.src||X.toDataURL(),ui.create("image",G,t)}function d(X,I){var G=I.matchShapes;if(G){var te=X.toShape(!1);if(te)return v(te)}var pe=X._segments,oe=pe.length,Ee,$e=i(X._matrix);if(G&&oe>=2&&!X.hasHandles())if(oe>2){Ee=X._closed?"polygon":"polyline";for(var Xe=[],ft=0;ft<oe;ft++)Xe.push(t.point(pe[ft]._point));$e.points=Xe.join(" ")}else{Ee="line";var Ze=pe[0]._point,yt=pe[1]._point;$e.set({x1:Ze.x,y1:Ze.y,x2:yt.x,y2:yt.y})}else Ee="path",$e.d=X.getPathData(null,I.precision);return ui.create(Ee,$e,t)}function v(X){var I=X._type,G=X._radius,te=i(X._matrix,!0,I!=="rectangle");if(I==="rectangle"){I="rect";var pe=X._size,oe=pe.width,Ee=pe.height;te.x-=oe/2,te.y-=Ee/2,te.width=oe,te.height=Ee,G.isZero()&&(G=null)}return G&&(I==="circle"?te.r=G:(te.rx=G.width,te.ry=G.height)),ui.create(I,te,t)}function D(X,I){var G=i(X._matrix),te=X.getPathData(null,I.precision);return te&&(G.d=te),ui.create("path",G,t)}function A(X,I){var G=i(X._matrix,!0),te=X._definition,pe=R(te,"symbol"),oe=te._item,Ee=oe.getStrokeBounds();return pe||(pe=ui.create("symbol",{viewBox:t.rectangle(Ee)}),pe.appendChild(ie(oe,I)),J(te,pe,"symbol")),G.href="#"+pe.id,G.x+=Ee.x,G.y+=Ee.y,G.width=Ee.width,G.height=Ee.height,G.overflow="visible",ui.create("use",G,t)}function T(X){var I=R(X,"color");if(!I){var G=X.getGradient(),te=G._radial,pe=X.getOrigin(),oe=X.getDestination(),Ee;if(te){Ee={cx:pe.x,cy:pe.y,r:pe.getDistance(oe)};var $e=X.getHighlight();$e&&(Ee.fx=$e.x,Ee.fy=$e.y)}else Ee={x1:pe.x,y1:pe.y,x2:oe.x,y2:oe.y};Ee.gradientUnits="userSpaceOnUse",I=ui.create((te?"radial":"linear")+"Gradient",Ee,t);for(var Xe=G._stops,ft=0,Ze=Xe.length;ft<Ze;ft++){var yt=Xe[ft],Et=yt._color,Yt=Et.getAlpha(),qt=yt._offset;Ee={offset:qt??ft/(Ze-1)},Et&&(Ee["stop-color"]=Et.toCSS(!0)),Yt<1&&(Ee["stop-opacity"]=Yt),I.appendChild(ui.create("stop",Ee,t))}J(X,I,"color")}return"url(#"+I.id+")"}function P(X){var I=ui.create("text",i(X._matrix,!0),t);return I.textContent=X._content,I}var F={Group:o,Layer:o,Raster:h,Path:d,Shape:v,CompoundPath:D,SymbolItem:A,PointText:P};function V(X,I,G){var te={},pe=!G&&X.getParent(),oe=[];return X._name!=null&&(te.id=X._name),u.each(bo,function(Ee){var $e=Ee.get,Xe=Ee.type,ft=X[$e]();if(Ee.exportFilter?Ee.exportFilter(X,ft):!pe||!u.equals(pe[$e](),ft)){if(Xe==="color"&&ft!=null){var Ze=ft.getAlpha();Ze<1&&(te[Ee.attribute+"-opacity"]=Ze)}Xe==="style"?oe.push(Ee.attribute+": "+ft):te[Ee.attribute]=ft==null?"none":Xe==="color"?ft.gradient?T(ft):ft.toCSS(!0):Xe==="array"?ft.join(","):Xe==="lookup"?Ee.toSVG[ft]:ft}}),oe.length&&(te.style=oe.join(";")),te.opacity===1&&delete te.opacity,X._visible||(te.visibility="hidden"),ui.set(I,te,t)}var z;function R(X,I){return z||(z={ids:{},svgs:{}}),X&&z.svgs[I+"-"+(X._id||X.__id||(X.__id=rt.get("svg")))]}function J(X,I,G){z||R();var te=z.ids[G]=(z.ids[G]||0)+1;I.id=G+"-"+te,z.svgs[G+"-"+(X._id||X.__id)]=I}function Y(X,I){var G=X,te=null;if(z){G=X.nodeName.toLowerCase()==="svg"&&X;for(var pe in z.svgs)te||(G||(G=ui.create("svg"),G.appendChild(X)),te=G.insertBefore(ui.create("defs"),G.firstChild)),te.appendChild(z.svgs[pe]);z=null}return I.asString?new e.XMLSerializer().serializeToString(G):G}function ie(X,I,G){var te=F[X._class],pe=te&&te(X,I);if(pe){var oe=I.onExport;oe&&(pe=oe(X,pe,I)||pe);var Ee=JSON.stringify(X._data);Ee&&Ee!=="{}"&&Ee!=="null"&&pe.setAttribute("data-paper-data",Ee)}return pe&&V(X,pe,G)}function j(X){return X||(X={}),t=new ve(X.precision),X}He.inject({exportSVG:function(X){return X=j(X),Y(ie(this,X,!0),X)}}),Cn.inject({exportSVG:function(X){X=j(X);var I=this._children,G=this.getView(),te=u.pick(X.bounds,"view"),pe=X.matrix||te==="view"&&G._matrix,oe=pe&&At.read([pe]),Ee=te==="view"?new Ie([0,0],G.getViewSize()):te==="content"?He._getBounds(I,oe,{stroke:!0}).rect:Ie.read([te],0,{readNull:!0}),$e={version:"1.1",xmlns:ui.svg,"xmlns:xlink":ui.xlink};Ee&&($e.width=Ee.width,$e.height=Ee.height,(Ee.x||Ee.x===0||Ee.y||Ee.y===0)&&($e.viewBox=t.rectangle(Ee)));var Xe=ui.create("svg",$e,t),ft=Xe;oe&&!oe.isIdentity()&&(ft=Xe.appendChild(ui.create("g",i(oe),t)));for(var Ze=0,yt=I.length;Ze<yt;Ze++)ft.appendChild(ie(I[Ze],X,!0));return Y(Xe,X)}})},new function(){var t={},i;function o(I,G,te,pe,oe,Ee){var $e=ui.get(I,G)||Ee,Xe=$e==null?pe?null:te?"":0:te?$e:parseFloat($e);return/%\s*$/.test($e)?Xe/100*(oe?1:i[/x|^width/.test(G)?"width":"height"]):Xe}function h(I,G,te,pe,oe,Ee,$e){return G=o(I,G||"x",!1,pe,oe,Ee),te=o(I,te||"y",!1,pe,oe,$e),pe&&(G==null||te==null)?null:new re(G,te)}function d(I,G,te,pe,oe){return G=o(I,G||"width",!1,pe,oe),te=o(I,te||"height",!1,pe,oe),pe&&(G==null||te==null)?null:new nt(G,te)}function v(I,G,te){return I==="none"?null:G==="number"?parseFloat(I):G==="array"?I?I.split(/[\s,]+/g).map(parseFloat):[]:G==="color"?ie(I)||I:G==="lookup"?te[I]:I}function D(I,G,te,pe){var oe=I.childNodes,Ee=G==="clippath",$e=G==="defs",Xe=new _e,ft=Xe._project,Ze=ft._currentStyle,yt=[];if(!Ee&&!$e&&(Xe=Y(Xe,I,pe),ft._currentStyle=Xe._style.clone()),pe)for(var Et=I.querySelectorAll("defs"),Yt=0,qt=Et.length;Yt<qt;Yt++)j(Et[Yt],te,!1);for(var Yt=0,qt=oe.length;Yt<qt;Yt++){var ln=oe[Yt],In;ln.nodeType===1&&!/^defs$/i.test(ln.nodeName)&&(In=j(ln,te,!1))&&!(In instanceof ei)&&yt.push(In)}return Xe.addChildren(yt),Ee&&(Xe=Y(Xe.reduce(),I,pe)),ft._currentStyle=Ze,(Ee||$e)&&(Xe.remove(),Xe=null),Xe}function A(I,G){for(var te=I.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),pe=[],oe=0,Ee=te.length;oe<Ee;oe+=2)pe.push(new re(parseFloat(te[oe]),parseFloat(te[oe+1])));var $e=new ai(pe);return G==="polygon"&&$e.closePath(),$e}function T(I){return Pi.create(I.getAttribute("d"))}function P(I,G){var te=(o(I,"href",!0)||"").substring(1),pe=G==="radialgradient",oe;if(te)oe=t[te].getGradient(),oe._radial^pe&&(oe=oe.clone(),oe._radial=pe);else{for(var Ee=I.childNodes,$e=[],Xe=0,ft=Ee.length;Xe<ft;Xe++){var Ze=Ee[Xe];Ze.nodeType===1&&$e.push(Y(new io,Ze))}oe=new fo($e,pe)}var yt,Et,Yt,qt=o(I,"gradientUnits",!0)!=="userSpaceOnUse";pe?(yt=h(I,"cx","cy",!1,qt,"50%","50%"),Et=yt.add(o(I,"r",!1,!1,qt,"50%"),0),Yt=h(I,"fx","fy",!0,qt)):(yt=h(I,"x1","y1",!1,qt,"0%","0%"),Et=h(I,"x2","y2",!1,qt,"100%","0%"));var ln=Y(new Zi(oe,yt,Et,Yt),I);return ln._scaleToBounds=qt,null}var F={"#document":function(I,G,te,pe){for(var oe=I.childNodes,Ee=0,$e=oe.length;Ee<$e;Ee++){var Xe=oe[Ee];if(Xe.nodeType===1)return j(Xe,te,pe)}},g:D,svg:D,clippath:D,polygon:A,polyline:A,path:T,lineargradient:P,radialgradient:P,image:function(I){var G=new Kr(o(I,"href",!0));return G.on("load",function(){var te=d(I);this.setSize(te);var pe=h(I).add(te.divide(2));this._matrix.append(new At().translate(pe))}),G},symbol:function(I,G,te,pe){return new ei(D(I,G,te,pe),!0)},defs:D,use:function(I){var G=(o(I,"href",!0)||"").substring(1),te=t[G],pe=h(I);return te?te instanceof ei?te.place(pe):te.clone().translate(pe):null},circle:function(I){return new On.Circle(h(I,"cx","cy"),o(I,"r"))},ellipse:function(I){return new On.Ellipse({center:h(I,"cx","cy"),radius:d(I,"rx","ry")})},rect:function(I){return new On.Rectangle(new Ie(h(I),d(I)),d(I,"rx","ry"))},line:function(I){return new ai.Line(h(I,"x1","y1"),h(I,"x2","y2"))},text:function(I){var G=new da(h(I).add(h(I,"dx","dy")));return G.setContent(I.textContent.trim()||""),G},switch:D};function V(I,G,te,pe){if(I.transform){for(var oe=(pe.getAttribute(te)||"").split(/\)\s*/g),Ee=new At,$e=0,Xe=oe.length;$e<Xe;$e++){var ft=oe[$e];if(!ft)break;for(var Ze=ft.split(/\(\s*/),yt=Ze[0],Et=Ze[1].split(/[\s,]+/g),Yt=0,qt=Et.length;Yt<qt;Yt++)Et[Yt]=parseFloat(Et[Yt]);switch(yt){case"matrix":Ee.append(new At(Et[0],Et[1],Et[2],Et[3],Et[4],Et[5]));break;case"rotate":Ee.rotate(Et[0],Et[1]||0,Et[2]||0);break;case"translate":Ee.translate(Et[0],Et[1]||0);break;case"scale":Ee.scale(Et);break;case"skewX":Ee.skew(Et[0],0);break;case"skewY":Ee.skew(0,Et[0]);break}}I.transform(Ee)}}function z(I,G,te){var pe=te==="fill-opacity"?"getFillColor":"getStrokeColor",oe=I[pe]&&I[pe]();oe&&oe.setAlpha(parseFloat(G))}var R=u.set(u.each(bo,function(I){this[I.attribute]=function(G,te){if(G[I.set]&&(G[I.set](v(te,I.type,I.fromSVG)),I.type==="color")){var pe=G[I.get]();if(pe&&pe._scaleToBounds){var oe=G.getBounds();pe.transform(new At().translate(oe.getPoint()).scale(oe.getSize()))}}}},{}),{id:function(I,G){t[G]=I,I.setName&&I.setName(G)},"clip-path":function(I,G){var te=ie(G);if(te)if(te=te.clone(),te.setClipMask(!0),I instanceof _e)I.insertChild(0,te);else return new _e(te,I)},gradientTransform:V,transform:V,"fill-opacity":z,"stroke-opacity":z,visibility:function(I,G){I.setVisible&&I.setVisible(G==="visible")},display:function(I,G){I.setVisible&&I.setVisible(G!==null)},"stop-color":function(I,G){I.setColor&&I.setColor(G)},"stop-opacity":function(I,G){I._color&&I._color.setAlpha(parseFloat(G))},offset:function(I,G){if(I.setOffset){var te=G.match(/(.*)%$/);I.setOffset(te?te[1]/100:parseFloat(G))}},viewBox:function(I,G,te,pe,oe){var Ee=new Ie(v(G,"array")),$e=d(pe,null,null,!0),Xe,ft;if(I instanceof _e){var Ze=$e?$e.divide(Ee.getSize()):1,ft=new At().scale(Ze).translate(Ee.getPoint().negate());Xe=I}else I instanceof ei&&($e&&Ee.setSize($e),Xe=I._item);if(Xe){if(J(pe,"overflow",oe)!=="visible"){var yt=new On.Rectangle(Ee);yt.setClipMask(!0),Xe.addChild(yt)}ft&&Xe.transform(ft)}}});function J(I,G,te){var pe=I.attributes[G],oe=pe&&pe.value;if(!oe&&I.style){var Ee=u.camelize(G);oe=I.style[Ee],!oe&&te.node[Ee]!==te.parent[Ee]&&(oe=te.node[Ee])}return oe?oe==="none"?null:oe:n}function Y(I,G,te){var pe=G.parentNode,oe={node:Ti.getStyles(G)||{},parent:!te&&!/^defs$/i.test(pe.tagName)&&Ti.getStyles(pe)||{}};return u.each(R,function(Ee,$e){var Xe=J(G,$e,oe);I=Xe!==n&&Ee(I,Xe,$e,G,oe)||I}),I}function ie(I){var G=I&&I.match(/\((?:["'#]*)([^"')]+)/),te=G&&G[1],pe=te&&t[s?te.replace(s.location.href.split("#")[0]+"#",""):te];return pe&&pe._scaleToBounds&&(pe=pe.clone(),pe._scaleToBounds=!0),pe}function j(I,G,te){var pe=I.nodeName.toLowerCase(),oe=pe!=="#document",Ee=c.body,$e,Xe,ft;te&&oe&&(i=ar.getView().getSize(),i=d(I,null,null,!0)||i,$e=ui.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),Xe=I.parentNode,ft=I.nextSibling,$e.appendChild(I),Ee.appendChild($e));var Ze=ar.settings,yt=Ze.applyMatrix,Et=Ze.insertItems;Ze.applyMatrix=!1,Ze.insertItems=!1;var Yt=F[pe],qt=Yt&&Yt(I,pe,G,te)||null;if(Ze.insertItems=Et,Ze.applyMatrix=yt,qt){oe&&!(qt instanceof _e)&&(qt=Y(qt,I,te));var ln=G.onImport,In=oe&&I.getAttribute("data-paper-data");ln&&(qt=ln(I,qt,G)||qt),G.expandShapes&&qt instanceof On&&(qt.remove(),qt=qt.toPath()),In&&(qt._data=JSON.parse(In))}return $e&&(Ee.removeChild($e),Xe&&(ft?Xe.insertBefore(I,ft):Xe.appendChild(I))),te&&(t={},qt&&u.pick(G.applyMatrix,yt)&&qt.matrix.apply(!0,!0)),qt}function X(I,G,te){if(!I)return null;G=typeof G=="function"?{onLoad:G}:G||{};var pe=ar,oe=null;function Ee(Ze){try{var yt=typeof Ze=="object"?Ze:new e.DOMParser().parseFromString(Ze.trim(),"image/svg+xml");if(!yt.nodeName)throw yt=null,new Error("Unsupported SVG source: "+I);ar=pe,oe=j(yt,G,!0),(!G||G.insert!==!1)&&te._insertItem(n,oe);var Et=G.onLoad;Et&&Et(oe,Ze)}catch(Yt){$e(Yt)}}function $e(Ze,yt){var Et=G.onError;if(Et)Et(Ze,yt);else throw new Error(Ze)}if(typeof I=="string"&&!/^[\s\S]*</.test(I)){var Xe=c.getElementById(I);Xe?Ee(Xe):Ds.request({url:I,async:!0,onLoad:Ee,onError:$e})}else if(typeof File<"u"&&I instanceof File){var ft=new FileReader;return ft.onload=function(){Ee(ft.result)},ft.onerror=function(){$e(ft.error)},ft.readAsText(I)}else Ee(I);return oe}He.inject({importSVG:function(I,G){return X(I,G,this)}}),Cn.inject({importSVG:function(I,G){return this.activate(),X(I,G,this)}})},u.exports.PaperScript=(function(){var t=this,i=t.acorn;if(!i&&typeof Du<"u")try{i=Uh()}catch{}if(!i){var o,h;i=o=h={},function(Y,ie){if(typeof o=="object"&&typeof h=="object")return ie(o);if(typeof n=="function"&&n.amd)return n(["exports"],ie);ie(Y.acorn||(Y.acorn={}))}(this,function(Y){Y.version="0.5.0";var ie,j,X,I;Y.parse=function(ke,et){return j=String(ke),X=j.length,te(et),Ct(),vd(ie.program)};var G=Y.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function te(ke){ie=ke||{};for(var et in G)Object.prototype.hasOwnProperty.call(ie,et)||(ie[et]=G[et]);I=ie.sourceFile||null}var pe=Y.getLineInfo=function(ke,et){for(var Nt=1,dn=0;;){Z.lastIndex=dn;var Qn=Z.exec(ke);if(Qn&&Qn.index<et)++Nt,dn=Qn.index+Qn[0].length;else break}return{line:Nt,column:et-dn}};Y.tokenize=function(ke,et){j=String(ke),X=j.length,te(et),Ct();var Nt={};function dn(Qn){return In=$e,za(Qn),Nt.start=Ee,Nt.end=$e,Nt.startLoc=Xe,Nt.endLoc=ft,Nt.type=Ze,Nt.value=yt,Nt}return dn.jumpTo=function(Qn,br){if(oe=Qn,ie.locations){Yt=1,qt=Z.lastIndex=0;for(var wr;(wr=Z.exec(j))&&wr.index<Qn;)++Yt,qt=wr.index+wr[0].length}Et=br,Wn()},dn};var oe,Ee,$e,Xe,ft,Ze,yt,Et,Yt,qt,ln,In,Zn,Kn,ur,yn;function An(ke,et){var Nt=pe(j,ke);et+=" ("+Nt.line+":"+Nt.column+")";var dn=new SyntaxError(et);throw dn.pos=ke,dn.loc=Nt,dn.raisedAt=oe,dn}var qn=[],cr={type:"num"},mr={type:"regexp"},Rr={type:"string"},Lr={type:"name"},Ir={type:"eof"},ti={keyword:"break"},Wr={keyword:"case",beforeExpr:!0},ls={keyword:"catch"},Vr={keyword:"continue"},$i={keyword:"debugger"},Qi={keyword:"default"},Oi={keyword:"do",isLoop:!0},Bi={keyword:"else",beforeExpr:!0},ys={keyword:"finally"},ns={keyword:"for",isLoop:!0},As={keyword:"function"},rs={keyword:"if"},Ji={keyword:"return",beforeExpr:!0},Fs={keyword:"switch"},Is={keyword:"throw",beforeExpr:!0},Ws={keyword:"try"},Ca={keyword:"var"},ta={keyword:"while",isLoop:!0},Po={keyword:"with"},il={keyword:"new",beforeExpr:!0},Oo={keyword:"this"},sl={keyword:"null",atomValue:null},Ya={keyword:"true",atomValue:!0},al={keyword:"false",atomValue:!1},Vi={keyword:"in",binop:7,beforeExpr:!0},Ll={break:ti,case:Wr,catch:ls,continue:Vr,debugger:$i,default:Qi,do:Oi,else:Bi,finally:ys,for:ns,function:As,if:rs,return:Ji,switch:Fs,throw:Is,try:Ws,var:Ca,while:ta,with:Po,null:sl,true:Ya,false:al,new:il,in:Vi,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Oo,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},po={type:"[",beforeExpr:!0},Za={type:"]"},ga={type:"{",beforeExpr:!0},$a={type:"}"},oa={type:"(",beforeExpr:!0},Zs={type:")"},_={type:",",beforeExpr:!0},he={type:";",beforeExpr:!0},gt={type:":",beforeExpr:!0},jt={type:"."},wn={type:"?",beforeExpr:!0},nr={binop:10,beforeExpr:!0},l={isAssign:!0,beforeExpr:!0},f={isAssign:!0,beforeExpr:!0},x={postfix:!0,prefix:!0,isUpdate:!0},N={prefix:!0,beforeExpr:!0},ge={binop:1,beforeExpr:!0},Oe={binop:2,beforeExpr:!0},Ht={binop:3,beforeExpr:!0},Sn={binop:4,beforeExpr:!0},Rn={binop:5,beforeExpr:!0},dr={binop:6,beforeExpr:!0},Dr={binop:7,beforeExpr:!0},Pr={binop:8,beforeExpr:!0},Ur={binop:9,prefix:!0,beforeExpr:!0},pi={binop:10,beforeExpr:!0};Y.tokTypes={bracketL:po,bracketR:Za,braceL:ga,braceR:$a,parenL:oa,parenR:Zs,comma:_,semi:he,colon:gt,dot:jt,question:wn,slash:nr,eq:l,name:Lr,eof:Ir,num:cr,regexp:mr,string:Rr};for(var mi in Ll)Y.tokTypes["_"+mi]=Ll[mi];function gi(ke){ke=ke.split(" ");var et="",Nt=[];e:for(var dn=0;dn<ke.length;++dn){for(var Qn=0;Qn<Nt.length;++Qn)if(Nt[Qn][0].length==ke[dn].length){Nt[Qn].push(ke[dn]);continue e}Nt.push([ke[dn]])}function br(Yr){if(Yr.length==1)return et+="return str === "+JSON.stringify(Yr[0])+";";et+="switch(str){";for(var Es=0;Es<Yr.length;++Es)et+="case "+JSON.stringify(Yr[Es])+":";et+="return true}return false;"}if(Nt.length>3){Nt.sort(function(Yr,Es){return Es.length-Yr.length}),et+="switch(str.length){";for(var dn=0;dn<Nt.length;++dn){var wr=Nt[dn];et+="case "+wr[0].length+":",br(wr)}et+="}"}else br(ke);return new Function("str",et)}var xa=gi("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Xn=gi("class enum extends super const export import"),Un=gi("implements interface let package private protected public static yield"),rr=gi("eval arguments"),Nr=gi("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),vi=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,xi="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ri="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Ui=new RegExp("["+xi+"]"),zs=new RegExp("["+xi+Ri+"]"),M=/[\n\r\u2028\u2029]/,Z=/\r\n|[\n\r\u2028\u2029]/g,xe=Y.isIdentifierStart=function(ke){return ke<65?ke===36:ke<91?!0:ke<97?ke===95:ke<123?!0:ke>=170&&Ui.test(String.fromCharCode(ke))},Re=Y.isIdentifierChar=function(ke){return ke<48?ke===36:ke<58?!0:ke<65?!1:ke<91?!0:ke<97?ke===95:ke<123?!0:ke>=170&&zs.test(String.fromCharCode(ke))};function vt(){this.line=Yt,this.column=oe-qt}function Ct(){Yt=1,oe=qt=0,Et=!0,Wn()}function It(ke,et){$e=oe,ie.locations&&(ft=new vt),Ze=ke,Wn(),yt=et,Et=ke.beforeExpr}function Pn(){var ke=ie.onComment&&ie.locations&&new vt,et=oe,Nt=j.indexOf("*/",oe+=2);if(Nt===-1&&An(oe-2,"Unterminated comment"),oe=Nt+2,ie.locations){Z.lastIndex=et;for(var dn;(dn=Z.exec(j))&&dn.index<oe;)++Yt,qt=dn.index+dn[0].length}ie.onComment&&ie.onComment(!0,j.slice(et+2,Nt),et,oe,ke,ie.locations&&new vt)}function xn(){for(var ke=oe,et=ie.onComment&&ie.locations&&new vt,Nt=j.charCodeAt(oe+=2);oe<X&&Nt!==10&&Nt!==13&&Nt!==8232&&Nt!==8233;)++oe,Nt=j.charCodeAt(oe);ie.onComment&&ie.onComment(!1,j.slice(ke+2,oe),ke,oe,et,ie.locations&&new vt)}function Wn(){for(;oe<X;){var ke=j.charCodeAt(oe);if(ke===32)++oe;else if(ke===13){++oe;var et=j.charCodeAt(oe);et===10&&++oe,ie.locations&&(++Yt,qt=oe)}else if(ke===10||ke===8232||ke===8233)++oe,ie.locations&&(++Yt,qt=oe);else if(ke>8&&ke<14)++oe;else if(ke===47){var et=j.charCodeAt(oe+1);if(et===42)Pn();else if(et===47)xn();else break}else if(ke===160)++oe;else if(ke>=5760&&vi.test(String.fromCharCode(ke)))++oe;else break}}function Cr(){var ke=j.charCodeAt(oe+1);return ke>=48&&ke<=57?ps(!0):(++oe,It(jt))}function kr(){var ke=j.charCodeAt(oe+1);return Et?(++oe,Li()):ke===61?is(f,2):is(nr,1)}function hr(){var ke=j.charCodeAt(oe+1);return ke===61?is(f,2):is(pi,1)}function Gr(ke){var et=j.charCodeAt(oe+1);return et===ke?is(ke===124?ge:Oe,2):et===61?is(f,2):is(ke===124?Ht:Rn,1)}function _i(){var ke=j.charCodeAt(oe+1);return ke===61?is(f,2):is(Sn,1)}function ds(ke){var et=j.charCodeAt(oe+1);return et===ke?et==45&&j.charCodeAt(oe+2)==62&&M.test(j.slice(In,oe))?(oe+=3,xn(),Wn(),za()):is(x,2):et===61?is(f,2):is(Ur,1)}function us(ke){var et=j.charCodeAt(oe+1),Nt=1;return et===ke?(Nt=ke===62&&j.charCodeAt(oe+2)===62?3:2,j.charCodeAt(oe+Nt)===61?is(f,Nt+1):is(Pr,Nt)):et==33&&ke==60&&j.charCodeAt(oe+2)==45&&j.charCodeAt(oe+3)==45?(oe+=4,xn(),Wn(),za()):(et===61&&(Nt=j.charCodeAt(oe+2)===61?3:2),is(Dr,Nt))}function So(ke){var et=j.charCodeAt(oe+1);return et===61?is(dr,j.charCodeAt(oe+2)===61?3:2):is(ke===61?l:N,1)}function Ka(ke){switch(ke){case 46:return Cr();case 40:return++oe,It(oa);case 41:return++oe,It(Zs);case 59:return++oe,It(he);case 44:return++oe,It(_);case 91:return++oe,It(po);case 93:return++oe,It(Za);case 123:return++oe,It(ga);case 125:return++oe,It($a);case 58:return++oe,It(gt);case 63:return++oe,It(wn);case 48:var et=j.charCodeAt(oe+1);if(et===120||et===88)return Ms();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ps(!1);case 34:case 39:return ri(ke);case 47:return kr();case 37:case 42:return hr();case 124:case 38:return Gr(ke);case 94:return _i();case 43:case 45:return ds(ke);case 60:case 62:return us(ke);case 61:case 33:return So(ke);case 126:return is(N,1)}return!1}function za(ke){if(ke?oe=Ee+1:Ee=oe,ie.locations&&(Xe=new vt),ke)return Li();if(oe>=X)return It(Ir);var et=j.charCodeAt(oe);if(xe(et)||et===92)return Xo();var Nt=Ka(et);if(Nt===!1){var dn=String.fromCharCode(et);if(dn==="\\"||Ui.test(dn))return Xo();An(oe,"Unexpected character '"+dn+"'")}return Nt}function is(ke,et){var Nt=j.slice(oe,oe+et);oe+=et,It(ke,Nt)}function Li(){for(var Qn="",ke,et,Nt=oe;;){oe>=X&&An(Nt,"Unterminated regular expression");var dn=j.charAt(oe);if(M.test(dn)&&An(Nt,"Unterminated regular expression"),ke)ke=!1;else{if(dn==="[")et=!0;else if(dn==="]"&&et)et=!1;else if(dn==="/"&&!et)break;ke=dn==="\\"}++oe}var Qn=j.slice(Nt,oe);++oe;var br=qi();br&&!/^[gmsiy]*$/.test(br)&&An(Nt,"Invalid regexp flag");try{var wr=new RegExp(Qn,br)}catch(Yr){Yr instanceof SyntaxError&&An(Nt,Yr.message),An(Yr)}return It(mr,wr)}function ko(ke,et){for(var Nt=oe,dn=0,Qn=0,br=et??1/0;Qn<br;++Qn){var wr=j.charCodeAt(oe),Yr;if(wr>=97?Yr=wr-97+10:wr>=65?Yr=wr-65+10:wr>=48&&wr<=57?Yr=wr-48:Yr=1/0,Yr>=ke)break;++oe,dn=dn*ke+Yr}return oe===Nt||et!=null&&oe-Nt!==et?null:dn}function Ms(){oe+=2;var ke=ko(16);return ke==null&&An(Ee+2,"Expected hexadecimal number"),xe(j.charCodeAt(oe))&&An(oe,"Identifier directly after number"),It(cr,ke)}function ps(ke){var et=oe,Nt=!1,dn=j.charCodeAt(oe)===48;!ke&&ko(10)===null&&An(et,"Invalid number"),j.charCodeAt(oe)===46&&(++oe,ko(10),Nt=!0);var Qn=j.charCodeAt(oe);(Qn===69||Qn===101)&&(Qn=j.charCodeAt(++oe),(Qn===43||Qn===45)&&++oe,ko(10)===null&&An(et,"Invalid number"),Nt=!0),xe(j.charCodeAt(oe))&&An(oe,"Identifier directly after number");var br=j.slice(et,oe),wr;return Nt?wr=parseFloat(br):!dn||br.length===1?wr=parseInt(br,10):/[89]/.test(br)||yn?An(et,"Invalid number"):wr=parseInt(br,8),It(cr,wr)}function ri(ke){oe++;for(var et="";;){oe>=X&&An(Ee,"Unterminated string constant");var Nt=j.charCodeAt(oe);if(Nt===ke)return++oe,It(Rr,et);if(Nt===92){Nt=j.charCodeAt(++oe);var dn=/^[0-7]+/.exec(j.slice(oe,oe+3));for(dn&&(dn=dn[0]);dn&&parseInt(dn,8)>255;)dn=dn.slice(0,-1);if(dn==="0"&&(dn=null),++oe,dn)yn&&An(oe-2,"Octal literal in strict mode"),et+=String.fromCharCode(parseInt(dn,8)),oe+=dn.length-1;else switch(Nt){case 110:et+=`
`;break;case 114:et+="\r";break;case 120:et+=String.fromCharCode(Yl(2));break;case 117:et+=String.fromCharCode(Yl(4));break;case 85:et+=String.fromCharCode(Yl(8));break;case 116:et+="	";break;case 98:et+="\b";break;case 118:et+="\v";break;case 102:et+="\f";break;case 48:et+="\0";break;case 13:j.charCodeAt(oe)===10&&++oe;case 10:ie.locations&&(qt=oe,++Yt);break;default:et+=String.fromCharCode(Nt);break}}else(Nt===13||Nt===10||Nt===8232||Nt===8233)&&An(Ee,"Unterminated string constant"),et+=String.fromCharCode(Nt),++oe}}function Yl(ke){var et=ko(16,ke);return et===null&&An(Ee,"Bad character escape sequence"),et}var es;function qi(){es=!1;for(var ke,et=!0,Nt=oe;;){var dn=j.charCodeAt(oe);if(Re(dn))es&&(ke+=j.charAt(oe)),++oe;else if(dn===92){es||(ke=j.slice(Nt,oe)),es=!0,j.charCodeAt(++oe)!=117&&An(oe,"Expecting Unicode escape sequence \\uXXXX"),++oe;var Qn=Yl(4),br=String.fromCharCode(Qn);br||An(oe-1,"Invalid Unicode escape"),(et?xe(Qn):Re(Qn))||An(oe-4,"Invalid Unicode escape"),ke+=br}else break;et=!1}return es?ke:j.slice(Nt,oe)}function Xo(){var ke=qi(),et=Lr;return!es&&Nr(ke)&&(et=Ll[ke]),It(et,ke)}function ii(){ln=Ee,In=$e,Zn=ft,za()}function _l(ke){if(yn=ke,oe=Ee,ie.locations)for(;oe<qt;)qt=j.lastIndexOf(`
`,qt-2)+1,--Yt;Wn(),za()}function Io(){this.type=null,this.start=Ee,this.end=null}function Gu(){this.start=Xe,this.end=null,I!==null&&(this.source=I)}function gs(){var ke=new Io;return ie.locations&&(ke.loc=new Gu),ie.directSourceFile&&(ke.sourceFile=ie.directSourceFile),ie.ranges&&(ke.range=[Ee,0]),ke}function Da(ke){var et=new Io;return et.start=ke.start,ie.locations&&(et.loc=new Gu,et.loc.start=ke.loc.start),ie.ranges&&(et.range=[ke.range[0],0]),et}function $r(ke,et){return ke.type=et,ke.end=In,ie.locations&&(ke.loc.end=Zn),ie.ranges&&(ke.range[1]=In),ke}function Yu(ke){return ie.ecmaVersion>=5&&ke.type==="ExpressionStatement"&&ke.expression.type==="Literal"&&ke.expression.value==="use strict"}function Si(ke){if(Ze===ke)return ii(),!0}function bs(){return!ie.strictSemicolons&&(Ze===Ir||Ze===$a||M.test(j.slice(In,Ee)))}function Pa(){!Si(he)&&!bs()&&Ei()}function qr(ke){Ze===ke?ii():Ei()}function Ei(){An(Ee,"Unexpected token")}function uu(ke){ke.type!=="Identifier"&&ke.type!=="MemberExpression"&&An(ke.start,"Assigning to rvalue"),yn&&ke.type==="Identifier"&&rr(ke.name)&&An(ke.start,"Assigning to "+ke.name+" in strict mode")}function vd(ke){ln=In=oe,ie.locations&&(Zn=new vt),Kn=yn=null,ur=[],za();var et=ke||gs(),Nt=!0;for(ke||(et.body=[]);Ze!==Ir;){var dn=Oa();et.body.push(dn),Nt&&Yu(dn)&&_l(!0),Nt=!1}return $r(et,"Program")}var lc={kind:"loop"},yl={kind:"switch"};function Oa(){(Ze===nr||Ze===f&&yt=="/=")&&za(!0);var ke=Ze,et=gs();switch(ke){case ti:case Vr:ii();var Nt=ke===ti;Si(he)||bs()?et.label=null:Ze!==Lr?Ei():(et.label=En(),Pa());for(var dn=0;dn<ur.length;++dn){var Qn=ur[dn];if((et.label==null||Qn.name===et.label.name)&&(Qn.kind!=null&&(Nt||Qn.kind==="loop")||et.label&&Nt))break}return dn===ur.length&&An(et.start,"Unsyntactic "+ke.keyword),$r(et,Nt?"BreakStatement":"ContinueStatement");case $i:return ii(),Pa(),$r(et,"DebuggerStatement");case Oi:return ii(),ur.push(lc),et.body=Oa(),ur.pop(),qr(ta),et.test=Lo(),Pa(),$r(et,"DoWhileStatement");case ns:if(ii(),ur.push(lc),qr(oa),Ze===he)return xl(et,null);if(Ze===Ca){var br=gs();return ii(),ol(br,!0),$r(br,"VariableDeclaration"),br.declarations.length===1&&Si(Vi)?qa(et,br):xl(et,br)}var br=Us(!1,!0);return Si(Vi)?(uu(br),qa(et,br)):xl(et,br);case As:return ii(),Gt(et,!0);case rs:return ii(),et.test=Lo(),et.consequent=Oa(),et.alternate=Si(Bi)?Oa():null,$r(et,"IfStatement");case Ji:return!Kn&&!ie.allowReturnOutsideFunction&&An(Ee,"'return' outside of function"),ii(),Si(he)||bs()?et.argument=null:(et.argument=Us(),Pa()),$r(et,"ReturnStatement");case Fs:ii(),et.discriminant=Lo(),et.cases=[],qr(ga),ur.push(yl);for(var wr,Yr;Ze!=$a;)if(Ze===Wr||Ze===Qi){var Es=Ze===Wr;wr&&$r(wr,"SwitchCase"),et.cases.push(wr=gs()),wr.consequent=[],ii(),Es?wr.test=Us():(Yr&&An(ln,"Multiple default clauses"),Yr=!0,wr.test=null),qr(gt)}else wr||Ei(),wr.consequent.push(Oa());return wr&&$r(wr,"SwitchCase"),ii(),ur.pop(),$r(et,"SwitchStatement");case Is:return ii(),M.test(j.slice(In,Ee))&&An(In,"Illegal newline after throw"),et.argument=Us(),Pa(),$r(et,"ThrowStatement");case Ws:if(ii(),et.block=wl(),et.handler=null,Ze===ls){var ra=gs();ii(),qr(oa),ra.param=En(),yn&&rr(ra.param.name)&&An(ra.param.start,"Binding "+ra.param.name+" in strict mode"),qr(Zs),ra.guard=null,ra.body=wl(),et.handler=$r(ra,"CatchClause")}return et.guardedHandlers=qn,et.finalizer=Si(ys)?wl():null,!et.handler&&!et.finalizer&&An(et.start,"Missing catch or finally clause"),$r(et,"TryStatement");case Ca:return ii(),ol(et),Pa(),$r(et,"VariableDeclaration");case ta:return ii(),et.test=Lo(),ur.push(lc),et.body=Oa(),ur.pop(),$r(et,"WhileStatement");case Po:return yn&&An(Ee,"'with' in strict mode"),ii(),et.object=Lo(),et.body=Oa(),$r(et,"WithStatement");case ga:return wl();case he:return ii(),$r(et,"EmptyStatement");default:var Xa=yt,ao=Us();if(ke===Lr&&ao.type==="Identifier"&&Si(gt)){for(var dn=0;dn<ur.length;++dn)ur[dn].name===Xa&&An(ao.start,"Label '"+Xa+"' is already declared");var cu=Ze.isLoop?"loop":Ze===Fs?"switch":null;return ur.push({name:Xa,kind:cu}),et.body=Oa(),ur.pop(),et.label=ao,$r(et,"LabeledStatement")}else return et.expression=ao,Pa(),$r(et,"ExpressionStatement")}}function Lo(){qr(oa);var ke=Us();return qr(Zs),ke}function wl(ke){var et=gs(),Nt=!0,dn=!1,Qn;for(et.body=[],qr(ga);!Si($a);){var br=Oa();et.body.push(br),Nt&&ke&&Yu(br)&&(Qn=dn,_l(dn=!0)),Nt=!1}return dn&&!Qn&&_l(!1),$r(et,"BlockStatement")}function xl(ke,et){return ke.init=et,qr(he),ke.test=Ze===he?null:Us(),qr(he),ke.update=Ze===Zs?null:Us(),qr(Zs),ke.body=Oa(),ur.pop(),$r(ke,"ForStatement")}function qa(ke,et){return ke.left=et,ke.right=Us(),qr(Zs),ke.body=Oa(),ur.pop(),$r(ke,"ForInStatement")}function ol(ke,et){for(ke.declarations=[],ke.kind="var";;){var Nt=gs();if(Nt.id=En(),yn&&rr(Nt.id.name)&&An(Nt.id.start,"Binding "+Nt.id.name+" in strict mode"),Nt.init=Si(l)?Us(!0,et):null,ke.declarations.push($r(Nt,"VariableDeclarator")),!Si(_))break}return ke}function Us(ke,et){var Nt=Zu(et);if(!ke&&Ze===_){var dn=Da(Nt);for(dn.expressions=[Nt];Si(_);)dn.expressions.push(Zu(et));return $r(dn,"SequenceExpression")}return Nt}function Zu(ke){var et=Zl(ke);if(Ze.isAssign){var Nt=Da(et);return Nt.operator=yt,Nt.left=et,ii(),Nt.right=Zu(ke),uu(et),$r(Nt,"AssignmentExpression")}return et}function Zl(ke){var et=Gs(ke);if(Si(wn)){var Nt=Da(et);return Nt.test=et,Nt.consequent=Us(!0),qr(gt),Nt.alternate=Us(!0,ke),$r(Nt,"ConditionalExpression")}return et}function Gs(ke){return la(uc(),-1,ke)}function la(ke,et,Nt){var dn=Ze.binop;if(dn!=null&&(!Nt||Ze!==Vi)&&dn>et){var Qn=Da(ke);Qn.left=ke,Qn.operator=yt;var br=Ze;ii(),Qn.right=la(uc(),dn,Nt);var wr=$r(Qn,br===ge||br===Oe?"LogicalExpression":"BinaryExpression");return la(wr,et,Nt)}return ke}function uc(){if(Ze.prefix){var ke=gs(),et=Ze.isUpdate;return ke.operator=yt,ke.prefix=!0,Et=!0,ii(),ke.argument=uc(),et?uu(ke.argument):yn&&ke.operator==="delete"&&ke.argument.type==="Identifier"&&An(ke.start,"Deleting local variable in strict mode"),$r(ke,et?"UpdateExpression":"UnaryExpression")}for(var Nt=Zh();Ze.postfix&&!bs();){var ke=Da(Nt);ke.operator=yt,ke.prefix=!1,ke.argument=Nt,uu(Nt),ii(),Nt=$r(ke,"UpdateExpression")}return Nt}function Zh(){return $l(gn())}function $l(ke,et){if(Si(jt)){var Nt=Da(ke);return Nt.object=ke,Nt.property=En(!0),Nt.computed=!1,$l($r(Nt,"MemberExpression"),et)}else if(Si(po)){var Nt=Da(ke);return Nt.object=ke,Nt.property=Us(),Nt.computed=!0,qr(Za),$l($r(Nt,"MemberExpression"),et)}else if(!et&&Si(oa)){var Nt=Da(ke);return Nt.callee=ke,Nt.arguments=Nn(Zs,!1),$l($r(Nt,"CallExpression"),et)}else return ke}function gn(){switch(Ze){case Oo:var dn=gs();return ii(),$r(dn,"ThisExpression");case Lr:return En();case cr:case Rr:case mr:var dn=gs();return dn.value=yt,dn.raw=j.slice(Ee,$e),ii(),$r(dn,"Literal");case sl:case Ya:case al:var dn=gs();return dn.value=Ze.atomValue,dn.raw=Ze.keyword,ii(),$r(dn,"Literal");case oa:var ke=Xe,et=Ee;ii();var Nt=Us();return Nt.start=et,Nt.end=$e,ie.locations&&(Nt.loc.start=ke,Nt.loc.end=ft),ie.ranges&&(Nt.range=[et,$e]),qr(Zs),Nt;case po:var dn=gs();return ii(),dn.elements=Nn(Za,!0,!0),$r(dn,"ArrayExpression");case ga:return fr();case As:var dn=gs();return ii(),Gt(dn,!1);case il:return jn();default:Ei()}}function jn(){var ke=gs();return ii(),ke.callee=$l(gn(),!0),Si(oa)?ke.arguments=Nn(Zs,!1):ke.arguments=qn,$r(ke,"NewExpression")}function fr(){var ke=gs(),et=!0,Nt=!1;for(ke.properties=[],ii();!Si($a);){if(et)et=!1;else if(qr(_),ie.allowTrailingCommas&&Si($a))break;var dn={key:sr()},Qn=!1,br;if(Si(gt)?(dn.value=Us(!0),br=dn.kind="init"):ie.ecmaVersion>=5&&dn.key.type==="Identifier"&&(dn.key.name==="get"||dn.key.name==="set")?(Qn=Nt=!0,br=dn.kind=dn.key.name,dn.key=sr(),Ze!==oa&&Ei(),dn.value=Gt(gs(),!1)):Ei(),dn.key.type==="Identifier"&&(yn||Nt))for(var wr=0;wr<ke.properties.length;++wr){var Yr=ke.properties[wr];if(Yr.key.name===dn.key.name){var Es=br==Yr.kind||Qn&&Yr.kind==="init"||br==="init"&&(Yr.kind==="get"||Yr.kind==="set");Es&&!yn&&br==="init"&&Yr.kind==="init"&&(Es=!1),Es&&An(dn.key.start,"Redefinition of property")}}ke.properties.push(dn)}return $r(ke,"ObjectExpression")}function sr(){return Ze===cr||Ze===Rr?gn():En(!0)}function Gt(ke,et){Ze===Lr?ke.id=En():et?Ei():ke.id=null,ke.params=[];var Nt=!0;for(qr(oa);!Si(Zs);)Nt?Nt=!1:qr(_),ke.params.push(En());var dn=Kn,Qn=ur;if(Kn=!0,ur=[],ke.body=wl(!0),Kn=dn,ur=Qn,yn||ke.body.body.length&&Yu(ke.body.body[0]))for(var br=ke.id?-1:0;br<ke.params.length;++br){var wr=br<0?ke.id:ke.params[br];if((Un(wr.name)||rr(wr.name))&&An(wr.start,"Defining '"+wr.name+"' in strict mode"),br>=0)for(var Yr=0;Yr<br;++Yr)wr.name===ke.params[Yr].name&&An(wr.start,"Argument name clash in strict mode")}return $r(ke,et?"FunctionDeclaration":"FunctionExpression")}function Nn(ke,et,Nt){for(var dn=[],Qn=!0;!Si(ke);){if(Qn)Qn=!1;else if(qr(_),et&&ie.allowTrailingCommas&&Si(ke))break;Nt&&Ze===_?dn.push(null):dn.push(Us(!0))}return dn}function En(ke){var et=gs();return ke&&ie.forbidReserved=="everywhere"&&(ke=!1),Ze===Lr?(!ke&&(ie.forbidReserved&&(ie.ecmaVersion===3?xa:Xn)(yt)||yn&&Un(yt))&&j.slice(Ee,$e).indexOf("\\")==-1&&An(Ee,"The keyword '"+yt+"' is reserved"),et.name=yt):ke&&Ze.keyword?et.name=Ze.keyword:Ei(),Et=!1,ii(),$r(et,"Identifier")}}),i.version||(i=null)}function d(Y,ie){return(t.acorn||i).parse(Y,ie)}var v={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},D={"-":"__negate","+":"__self"},A=u.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(Y){this["__"+Y]="#"+Y},{__self:function(){return this}});re.inject(A),nt.inject(A),Zi.inject(A);function T(Y,ie,j){var X=v[ie];if(Y&&Y[X]){var I=Y[X](j);return ie==="!="?!I:I}switch(ie){case"+":return Y+j;case"-":return Y-j;case"*":return Y*j;case"/":return Y/j;case"%":return Y%j;case"==":return Y==j;case"!=":return Y!=j}}function P(Y,ie){var j=D[Y];if(ie&&ie[j])return ie[j]();switch(Y){case"+":return+ie;case"-":return-ie}}function F(Y,ie){if(!Y)return"";ie=ie||{};var j=[];function X(yn){for(var An=0,qn=j.length;An<qn;An++){var cr=j[An];if(cr[0]>=yn)break;yn+=cr[1]}return yn}function I(yn){return Y.substring(X(yn.range[0]),X(yn.range[1]))}function G(yn,An){return Y.substring(X(yn.range[1]),X(An.range[0]))}function te(yn,An){for(var qn=X(yn.range[0]),cr=X(yn.range[1]),mr=0,Rr=j.length-1;Rr>=0;Rr--)if(qn>j[Rr][0]){mr=Rr+1;break}j.splice(mr,0,[qn,An.length-cr+qn]),Y=Y.substring(0,qn)+An+Y.substring(cr)}function pe(yn,An){switch(yn.type){case"UnaryExpression":if(yn.operator in D&&yn.argument.type!=="Literal"){var qn=I(yn.argument);te(yn,'$__("'+yn.operator+'", '+qn+")")}break;case"BinaryExpression":if(yn.operator in v&&yn.left.type!=="Literal"){var cr=I(yn.left),mr=I(yn.right),Rr=G(yn.left,yn.right),Lr=yn.operator;te(yn,"__$__("+cr+","+Rr.replace(new RegExp("\\"+Lr),'"'+Lr+'"')+", "+mr+")")}break;case"UpdateExpression":case"AssignmentExpression":var Ir=An&&An.type;if(!(Ir==="ForStatement"||Ir==="BinaryExpression"&&/^[=!<>]/.test(An.operator)||Ir==="MemberExpression"&&An.computed)){if(yn.type==="UpdateExpression"){var qn=I(yn.argument),ti="__$__("+qn+', "'+yn.operator[0]+'", 1)',Wr=qn+" = "+ti;yn.prefix?Wr="("+Wr+")":(Ir==="AssignmentExpression"||Ir==="VariableDeclarator"||Ir==="BinaryExpression")&&(I(An.left||An.id)===qn&&(Wr=ti),Wr=qn+"; "+Wr),te(yn,Wr)}else if(/^.=$/.test(yn.operator)&&yn.left.type!=="Literal"){var cr=I(yn.left),mr=I(yn.right),ti=cr+" = __$__("+cr+', "'+yn.operator[0]+'", '+mr+")";te(yn,/^\(.*\)$/.test(I(yn))?"("+ti+")":ti)}}break}}function oe(yn){switch(yn.type){case"ExportDefaultDeclaration":te({range:[yn.start,yn.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var An=yn.declaration,qn=yn.specifiers;if(An){var cr=An.declarations;cr&&(cr.forEach(function(Rr){te(Rr,"module.exports."+I(Rr))}),te({range:[yn.start,An.start+An.kind.length]},""))}else if(qn){var mr=qn.map(function(Rr){var Lr=I(Rr);return"module.exports."+Lr+" = "+Lr+"; "}).join("");mr&&te(yn,mr)}break}}function Ee(yn,An,qn){if(yn){for(var cr in yn)if(cr!=="range"&&cr!=="loc"){var mr=yn[cr];if(Array.isArray(mr))for(var Rr=0,Lr=mr.length;Rr<Lr;Rr++)Ee(mr[Rr],yn,qn);else mr&&typeof mr=="object"&&Ee(mr,yn,qn)}qn.operatorOverloading!==!1&&pe(yn,An),qn.moduleExports!==!1&&oe(yn)}}function $e(yn){var An="",qn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(yn=(Math.abs(yn)<<1)+(yn<0?1:0);yn||!An;){var cr=yn&31;yn>>=5,yn&&(cr|=32),An+=qn[cr]}return An}var Xe=ie.url||"",ft=ie.sourceMaps,Ze=ie.paperFeatures||{},yt=ie.source||Y,Et=ie.offset||0,Yt=ar.agent,qt=Yt.versionNumber,ln=!1,In=/\r\n|\n|\r/mg,Zn;if(ft&&(Yt.chrome&&qt>=30||Yt.webkit&&qt>=537.76||Yt.firefox&&qt>=23||Yt.node)){if(Yt.node)Et-=2;else if(s&&Xe&&!s.location.href.indexOf(Xe)){var Kn=c.getElementsByTagName("html")[0].innerHTML;Et=Kn.substr(0,Kn.indexOf(Y)+1).match(In).length+1}ln=Et>0&&!(Yt.chrome&&qt>=36||Yt.safari&&qt>=600||Yt.firefox&&qt>=40||Yt.node);var ur=["AA"+$e(ln?0:Et)+"A"];ur.length=(Y.match(In)||[]).length+1+(ln?Et:0),Zn={version:3,file:Xe,names:[],mappings:ur.join(";AACA"),sourceRoot:"",sources:[Xe],sourcesContent:[yt]}}return(Ze.operatorOverloading!==!1||Ze.moduleExports!==!1)&&Ee(d(Y,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,Ze),Zn&&(ln&&(Y=new Array(Et+1).join(`
`)+Y),/^(inline|both)$/.test(ft)&&(Y+=`
//# sourceMappingURL=data:application/json;base64,`+e.btoa(unescape(encodeURIComponent(JSON.stringify(Zn))))),Y+=`
//# sourceURL=`+(Xe||"paperscript")),{url:Xe,source:yt,code:Y,map:Zn}}function V(Y,ie,j){ar=ie;var X=ie.getView(),I=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(Y)&&!/\bnew\s+Tool\b/.test(Y)?new ea:null,G=I?I._events:[],te=["onFrame","onResize"].concat(G),pe=[],oe=[],Ee,$e=typeof Y=="object"?Y:F(Y,j);Y=$e.code;function Xe(qt,ln){for(var In in qt)(ln||!/^_/.test(In))&&new RegExp("([\\b\\s\\W]|^)"+In.replace(/\$/g,"\\$")+"\\b").test(Y)&&(pe.push(In),oe.push(qt[In]))}Xe({__$__:T,$__:P,paper:ie,tool:I},!0),Xe(ie),Y="var module = { exports: {} }; "+Y;var Et=u.each(te,function(qt){new RegExp("\\s+"+qt+"\\b").test(Y)&&(pe.push(qt),this.push("module.exports."+qt+" = "+qt+";"))},[]).join(`
`);Et&&(Y+=`
`+Et),Y+=`
return module.exports;`;var ft=ar.agent;if(c&&(ft.chrome||ft.firefox&&ft.versionNumber<40)){var Ze=c.createElement("script"),yt=c.head||c.getElementsByTagName("head")[0];ft.firefox&&(Y=`
`+Y),Ze.appendChild(c.createTextNode("document.__paperscript__ = function("+pe+") {"+Y+`
}`)),yt.appendChild(Ze),Ee=c.__paperscript__,delete c.__paperscript__,yt.removeChild(Ze)}else Ee=Function(pe,Y);var Et=Ee&&Ee.apply(ie,oe),Yt=Et||{};return u.each(G,function(qt){var ln=Yt[qt];ln&&(I[qt]=ln)}),X&&(Yt.onResize&&X.setOnResize(Yt.onResize),X.emit("resize",{size:X.size,delta:new re}),Yt.onFrame&&X.setOnFrame(Yt.onFrame),X.requestUpdate()),Et}function z(Y){if(/^text\/(?:x-|)paperscript$/.test(Y.type)&&b.getAttribute(Y,"ignore")!=="true"){var ie=b.getAttribute(Y,"canvas"),j=c.getElementById(ie),X=Y.src||Y.getAttribute("data-src"),I=b.hasAttribute(Y,"async"),G="data-paper-scope";if(!j)throw new Error('Unable to find canvas with id "'+ie+'"');var te=b.get(j.getAttribute(G))||new b().setup(j);return j.setAttribute(G,te._id),X?Ds.request({url:X,async:I,mimeType:"text/plain",onLoad:function(pe){V(pe,te,X)}}):V(Y.innerHTML,te,Y.baseURI),Y.setAttribute("data-paper-ignore","true"),te}}function R(){u.each(c&&c.getElementsByTagName("script"),z)}function J(Y){return Y?z(Y):R()}return s&&(c.readyState==="complete"?setTimeout(R):Fi.add(s,{load:R})),{compile:F,execute:V,load:J,parse:d,calculateBinary:T,calculateUnary:P}}).call(this);var ar=new(b.inject(u.exports,{Base:u,Numerical:Ae,Key:Uo,DomEvent:Fi,DomElement:Ti,document:c,window:s,Symbol:ei,PlacedSymbol:Mi}));return ar.agent.node&&Fh(ar),typeof n=="function"&&n.amd?n("paper",ar):y&&(y.exports=ar),ar}).call(Go,typeof self=="object"?self:null)})(ad);var od=ad.exports;const jh=eh(od);function Uu(y){if(!(typeof window>"u")){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=y,document.head.appendChild(e),y}}function ju(y,e){var n=y.__state.conversionName.toString(),s=Math.round(y.r),c=Math.round(y.g),u=Math.round(y.b),m=y.a,b=Math.round(y.h),k=y.s.toFixed(1),W=y.v.toFixed(1);if(e||n==="THREE_CHAR_HEX"||n==="SIX_CHAR_HEX"){for(var ve=y.hex.toString(16);ve.length<6;)ve="0"+ve;return"#"+ve}else{if(n==="CSS_RGB")return"rgb("+s+","+c+","+u+")";if(n==="CSS_RGBA")return"rgba("+s+","+c+","+u+","+m+")";if(n==="HEX")return"0x"+y.hex.toString(16);if(n==="RGB_ARRAY")return"["+s+","+c+","+u+"]";if(n==="RGBA_ARRAY")return"["+s+","+c+","+u+","+m+"]";if(n==="RGB_OBJ")return"{r:"+s+",g:"+c+",b:"+u+"}";if(n==="RGBA_OBJ")return"{r:"+s+",g:"+c+",b:"+u+",a:"+m+"}";if(n==="HSV_OBJ")return"{h:"+b+",s:"+k+",v:"+W+"}";if(n==="HSVA_OBJ")return"{h:"+b+",s:"+k+",v:"+W+",a:"+m+"}"}return"unknown format"}var Ep=Array.prototype.forEach,Vu=Array.prototype.slice,Or={BREAK:{},extend:function(y){return this.each(Vu.call(arguments,1),function(e){var n=this.isObject(e)?Object.keys(e):[];n.forEach((function(s){this.isUndefined(e[s])||(y[s]=e[s])}).bind(this))},this),y},defaults:function(y){return this.each(Vu.call(arguments,1),function(e){var n=this.isObject(e)?Object.keys(e):[];n.forEach((function(s){this.isUndefined(y[s])&&(y[s]=e[s])}).bind(this))},this),y},compose:function(){var y=Vu.call(arguments);return function(){for(var e=Vu.call(arguments),n=y.length-1;n>=0;n--)e=[y[n].apply(this,e)];return e[0]}},each:function(y,e,n){if(y){if(Ep&&y.forEach&&y.forEach===Ep)y.forEach(e,n);else if(y.length===y.length+0){var s=void 0,c=void 0;for(s=0,c=y.length;s<c;s++)if(s in y&&e.call(n,y[s],s)===this.BREAK)return}else for(var u in y)if(e.call(n,y[u],u)===this.BREAK)return}},defer:function(y){setTimeout(y,0)},debounce:function(y,e,n){var s=void 0;return function(){var c=this,u=arguments;function m(){s=null,n||y.apply(c,u)}var b=n||!s;clearTimeout(s),s=setTimeout(m,e),b&&y.apply(c,u)}},toArray:function(y){return y.toArray?y.toArray():Vu.call(y)},isUndefined:function(y){return y===void 0},isNull:function(y){return y===null},isNaN:function(y){function e(n){return y.apply(this,arguments)}return e.toString=function(){return y.toString()},e}(function(y){return isNaN(y)}),isArray:Array.isArray||function(y){return y.constructor===Array},isObject:function(y){return y===Object(y)},isNumber:function(y){return y===y+0},isString:function(y){return y===y+""},isBoolean:function(y){return y===!1||y===!0},isFunction:function(y){return y instanceof Function}},Yd=[{litmus:Or.isString,conversions:{THREE_CHAR_HEX:{read:function(y){var e=y.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return e===null?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:ju},SIX_CHAR_HEX:{read:function(y){var e=y.match(/^#([A-F0-9]{6})$/i);return e===null?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:ju},CSS_RGB:{read:function(y){var e=y.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return e===null?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:ju},CSS_RGBA:{read:function(y){var e=y.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return e===null?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:ju}}},{litmus:Or.isNumber,conversions:{HEX:{read:function(y){return{space:"HEX",hex:y,conversionName:"HEX"}},write:function(y){return y.hex}}}},{litmus:Or.isArray,conversions:{RGB_ARRAY:{read:function(y){return y.length!==3?!1:{space:"RGB",r:y[0],g:y[1],b:y[2]}},write:function(y){return[y.r,y.g,y.b]}},RGBA_ARRAY:{read:function(y){return y.length!==4?!1:{space:"RGB",r:y[0],g:y[1],b:y[2],a:y[3]}},write:function(y){return[y.r,y.g,y.b,y.a]}}}},{litmus:Or.isObject,conversions:{RGBA_OBJ:{read:function(y){return Or.isNumber(y.r)&&Or.isNumber(y.g)&&Or.isNumber(y.b)&&Or.isNumber(y.a)?{space:"RGB",r:y.r,g:y.g,b:y.b,a:y.a}:!1},write:function(y){return{r:y.r,g:y.g,b:y.b,a:y.a}}},RGB_OBJ:{read:function(y){return Or.isNumber(y.r)&&Or.isNumber(y.g)&&Or.isNumber(y.b)?{space:"RGB",r:y.r,g:y.g,b:y.b}:!1},write:function(y){return{r:y.r,g:y.g,b:y.b}}},HSVA_OBJ:{read:function(y){return Or.isNumber(y.h)&&Or.isNumber(y.s)&&Or.isNumber(y.v)&&Or.isNumber(y.a)?{space:"HSV",h:y.h,s:y.s,v:y.v,a:y.a}:!1},write:function(y){return{h:y.h,s:y.s,v:y.v,a:y.a}}},HSV_OBJ:{read:function(y){return Or.isNumber(y.h)&&Or.isNumber(y.s)&&Or.isNumber(y.v)?{space:"HSV",h:y.h,s:y.s,v:y.v}:!1},write:function(y){return{h:y.h,s:y.s,v:y.v}}}}}],Vh=void 0,Tf=void 0,ih=function(){Tf=!1;var y=arguments.length>1?Or.toArray(arguments):arguments[0];return Or.each(Yd,function(e){if(e.litmus(y))return Or.each(e.conversions,function(n,s){if(Vh=n.read(y),Tf===!1&&Vh!==!1)return Tf=Vh,Vh.conversionName=s,Vh.conversion=n,Or.BREAK}),Or.BREAK}),Tf},sh=void 0,sc={hsv_to_rgb:function(y,e,n){var s=Math.floor(y/60)%6,c=y/60-Math.floor(y/60),u=n*(1-e),m=n*(1-c*e),b=n*(1-(1-c)*e),k=[[n,b,u],[m,n,u],[u,n,b],[u,m,n],[b,u,n],[n,u,m]][s];return{r:k[0]*255,g:k[1]*255,b:k[2]*255}},rgb_to_hsv:function(y,e,n){var s=Math.min(y,e,n),c=Math.max(y,e,n),u=c-s,m=void 0,b=void 0;if(c!==0)b=u/c;else return{h:NaN,s:0,v:0};return y===c?m=(e-n)/u:e===c?m=2+(n-y)/u:m=4+(y-e)/u,m/=6,m<0&&(m+=1),{h:m*360,s:b,v:c/255}},rgb_to_hex:function(y,e,n){var s=this.hex_with_component(0,2,y);return s=this.hex_with_component(s,1,e),s=this.hex_with_component(s,0,n),s},component_from_hex:function(y,e){return y>>e*8&255},hex_with_component:function(y,e,n){return n<<(sh=e*8)|y&~(255<<sh)}},Ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},aa=function(y,e){if(!(y instanceof e))throw new TypeError("Cannot call a class as a function")},ha=function(){function y(e,n){for(var s=0;s<n.length;s++){var c=n[s];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}return function(e,n,s){return n&&y(e.prototype,n),s&&y(e,s),e}}(),lu=function y(e,n,s){e===null&&(e=Function.prototype);var c=Object.getOwnPropertyDescriptor(e,n);if(c===void 0){var u=Object.getPrototypeOf(e);return u===null?void 0:y(u,n,s)}else{if("value"in c)return c.value;var m=c.get;return m===void 0?void 0:m.call(s)}},$o=function(y,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);y.prototype=Object.create(e&&e.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(y,e):y.__proto__=e)},Au=function(y,e){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:y},Ao=function(){function y(){if(aa(this,y),this.__state=ih.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return ha(y,[{key:"toString",value:function(){return ju(this)}},{key:"toHexString",value:function(){return ju(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),y}();function Eo(y,e,n){Object.defineProperty(y,e,{get:function(){return this.__state.space==="RGB"?this.__state[e]:(Ao.recalculateRGB(this,e,n),this.__state[e])},set:function(s){this.__state.space!=="RGB"&&(Ao.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=s}})}function ld(y,e){Object.defineProperty(y,e,{get:function(){return this.__state.space==="HSV"?this.__state[e]:(Ao.recalculateHSV(this),this.__state[e])},set:function(n){this.__state.space!=="HSV"&&(Ao.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=n}})}Ao.recalculateRGB=function(y,e,n){if(y.__state.space==="HEX")y.__state[e]=sc.component_from_hex(y.__state.hex,n);else if(y.__state.space==="HSV")Or.extend(y.__state,sc.hsv_to_rgb(y.__state.h,y.__state.s,y.__state.v));else throw new Error("Corrupted color state")},Ao.recalculateHSV=function(y){var e=sc.rgb_to_hsv(y.r,y.g,y.b);Or.extend(y.__state,{s:e.s,v:e.v}),Or.isNaN(e.h)?Or.isUndefined(y.__state.h)&&(y.__state.h=0):y.__state.h=e.h},Ao.COMPONENTS=["r","g","b","h","s","v","hex","a"],Eo(Ao.prototype,"r",2),Eo(Ao.prototype,"g",1),Eo(Ao.prototype,"b",0),ld(Ao.prototype,"h"),ld(Ao.prototype,"s"),ld(Ao.prototype,"v"),Object.defineProperty(Ao.prototype,"a",{get:function(){return this.__state.a},set:function(y){this.__state.a=y}}),Object.defineProperty(Ao.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=sc.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(y){this.__state.space="HEX",this.__state.hex=y}});var Hu=function(){function y(e,n){aa(this,y),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return ha(y,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),y}(),Tp={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},Ol={};Or.each(Tp,function(y,e){Or.each(y,function(n){Ol[n]=e})});var Wl=/(\d+(\.\d+)?)px/;function Ko(y){if(y==="0"||Or.isUndefined(y))return 0;var e=y.match(Wl);return Or.isNull(e)?0:parseFloat(e[1])}var vr={makeSelectable:function(y,e){y===void 0||y.style===void 0||(y.onselectstart=e?function(){return!1}:function(){},y.style.MozUserSelect=e?"auto":"none",y.style.KhtmlUserSelect=e?"auto":"none",y.unselectable=e?"on":"off")},makeFullscreen:function(y,e,n){var s=n,c=e;Or.isUndefined(c)&&(c=!0),Or.isUndefined(s)&&(s=!0),y.style.position="absolute",c&&(y.style.left=0,y.style.right=0),s&&(y.style.top=0,y.style.bottom=0)},fakeEvent:function(y,e,n,s){var c=n||{},u=Ol[e];if(!u)throw new Error("Event type "+e+" not supported.");var m=document.createEvent(u);switch(u){case"MouseEvents":{var b=c.x||c.clientX||0,k=c.y||c.clientY||0;m.initMouseEvent(e,c.bubbles||!1,c.cancelable||!0,window,c.clickCount||1,0,0,b,k,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var W=m.initKeyboardEvent||m.initKeyEvent;Or.defaults(c,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),W(e,c.bubbles||!1,c.cancelable,window,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.keyCode,c.charCode);break}default:{m.initEvent(e,c.bubbles||!1,c.cancelable||!0);break}}Or.defaults(m,s),y.dispatchEvent(m)},bind:function(y,e,n,s){var c=s||!1;return y.addEventListener?y.addEventListener(e,n,c):y.attachEvent&&y.attachEvent("on"+e,n),vr},unbind:function(y,e,n,s){var c=s||!1;return y.removeEventListener?y.removeEventListener(e,n,c):y.detachEvent&&y.detachEvent("on"+e,n),vr},addClass:function(y,e){if(y.className===void 0)y.className=e;else if(y.className!==e){var n=y.className.split(/ +/);n.indexOf(e)===-1&&(n.push(e),y.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return vr},removeClass:function(y,e){if(e)if(y.className===e)y.removeAttribute("class");else{var n=y.className.split(/ +/),s=n.indexOf(e);s!==-1&&(n.splice(s,1),y.className=n.join(" "))}else y.className=void 0;return vr},hasClass:function(y,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(y.className)||!1},getWidth:function(y){var e=getComputedStyle(y);return Ko(e["border-left-width"])+Ko(e["border-right-width"])+Ko(e["padding-left"])+Ko(e["padding-right"])+Ko(e.width)},getHeight:function(y){var e=getComputedStyle(y);return Ko(e["border-top-width"])+Ko(e["border-bottom-width"])+Ko(e["padding-top"])+Ko(e["padding-bottom"])+Ko(e.height)},getOffset:function(y){var e=y,n={left:0,top:0};if(e.offsetParent)do n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;while(e);return n},isActive:function(y){return y===document.activeElement&&(y.type||y.href)}},ah=function(y){$o(e,y);function e(n,s){aa(this,e);var c=Au(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,s)),u=c;c.__prev=c.getValue(),c.__checkbox=document.createElement("input"),c.__checkbox.setAttribute("type","checkbox");function m(){u.setValue(!u.__prev)}return vr.bind(c.__checkbox,"change",m,!1),c.domElement.appendChild(c.__checkbox),c.updateDisplay(),c}return ha(e,[{key:"setValue",value:function(n){var s=lu(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),s}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),lu(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Hu),fi=function(y){$o(e,y);function e(n,s,c){aa(this,e);var u=Au(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,s)),m=c,b=u;if(u.__select=document.createElement("select"),Or.isArray(m)){var k={};Or.each(m,function(W){k[W]=W}),m=k}return Or.each(m,function(W,ve){var Ae=document.createElement("option");Ae.innerHTML=ve,Ae.setAttribute("value",W),b.__select.appendChild(Ae)}),u.updateDisplay(),vr.bind(u.__select,"change",function(){var W=this.options[this.selectedIndex].value;b.setValue(W)}),u.domElement.appendChild(u.__select),u}return ha(e,[{key:"setValue",value:function(n){var s=lu(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),s}},{key:"updateDisplay",value:function(){return vr.isActive(this.__select)?this:(this.__select.value=this.getValue(),lu(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(Hu),pg=function(y){$o(e,y);function e(n,s){aa(this,e);var c=Au(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,s)),u=c;function m(){u.setValue(u.__input.value)}function b(){u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}return c.__input=document.createElement("input"),c.__input.setAttribute("type","text"),vr.bind(c.__input,"keyup",m),vr.bind(c.__input,"change",m),vr.bind(c.__input,"blur",b),vr.bind(c.__input,"keydown",function(k){k.keyCode===13&&this.blur()}),c.updateDisplay(),c.domElement.appendChild(c.__input),c}return ha(e,[{key:"updateDisplay",value:function(){return vr.isActive(this.__input)||(this.__input.value=this.getValue()),lu(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Hu);function Mp(y){var e=y.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var Wu=function(y){$o(e,y);function e(n,s,c){aa(this,e);var u=Au(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,s)),m=c||{};return u.__min=m.min,u.__max=m.max,u.__step=m.step,Or.isUndefined(u.__step)?u.initialValue===0?u.__impliedStep=1:u.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(u.initialValue))/Math.LN10))/10:u.__impliedStep=u.__step,u.__precision=Mp(u.__impliedStep),u}return ha(e,[{key:"setValue",value:function(n){var s=n;return this.__min!==void 0&&s<this.__min?s=this.__min:this.__max!==void 0&&s>this.__max&&(s=this.__max),this.__step!==void 0&&s%this.__step!==0&&(s=Math.round(s/this.__step)*this.__step),lu(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,s)}},{key:"min",value:function(n){return this.__min=n,this}},{key:"max",value:function(n){return this.__max=n,this}},{key:"step",value:function(n){return this.__step=n,this.__impliedStep=n,this.__precision=Mp(n),this}}]),e}(Hu);function Zd(y,e){var n=Math.pow(10,e);return Math.round(y*n)/n}var ud=function(y){$o(e,y);function e(n,s,c){aa(this,e);var u=Au(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,s,c));u.__truncationSuspended=!1;var m=u,b=void 0;function k(){var mt=parseFloat(m.__input.value);Or.isNaN(mt)||m.setValue(mt)}function W(){m.__onFinishChange&&m.__onFinishChange.call(m,m.getValue())}function ve(){W()}function Ae(mt){var nt=b-mt.clientY;m.setValue(m.getValue()+nt*m.__impliedStep),b=mt.clientY}function rt(){vr.unbind(window,"mousemove",Ae),vr.unbind(window,"mouseup",rt),W()}function re(mt){vr.bind(window,"mousemove",Ae),vr.bind(window,"mouseup",rt),b=mt.clientY}return u.__input=document.createElement("input"),u.__input.setAttribute("type","text"),vr.bind(u.__input,"change",k),vr.bind(u.__input,"blur",ve),vr.bind(u.__input,"mousedown",re),vr.bind(u.__input,"keydown",function(mt){mt.keyCode===13&&(m.__truncationSuspended=!0,this.blur(),m.__truncationSuspended=!1,W())}),u.updateDisplay(),u.domElement.appendChild(u.__input),u}return ha(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():Zd(this.getValue(),this.__precision),lu(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Wu);function Pp(y,e,n,s,c){return s+(c-s)*((y-e)/(n-e))}var Ra=function(y){$o(e,y);function e(n,s,c,u,m){aa(this,e);var b=Au(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,s,{min:c,max:u,step:m})),k=b;b.__background=document.createElement("div"),b.__foreground=document.createElement("div"),vr.bind(b.__background,"mousedown",W),vr.bind(b.__background,"touchstart",rt),vr.addClass(b.__background,"slider"),vr.addClass(b.__foreground,"slider-fg");function W(nt){document.activeElement.blur(),vr.bind(window,"mousemove",ve),vr.bind(window,"mouseup",Ae),ve(nt)}function ve(nt){nt.preventDefault();var tn=k.__background.getBoundingClientRect();return k.setValue(Pp(nt.clientX,tn.left,tn.right,k.__min,k.__max)),!1}function Ae(){vr.unbind(window,"mousemove",ve),vr.unbind(window,"mouseup",Ae),k.__onFinishChange&&k.__onFinishChange.call(k,k.getValue())}function rt(nt){nt.touches.length===1&&(vr.bind(window,"touchmove",re),vr.bind(window,"touchend",mt),re(nt))}function re(nt){var tn=nt.touches[0].clientX,Ie=k.__background.getBoundingClientRect();k.setValue(Pp(tn,Ie.left,Ie.right,k.__min,k.__max))}function mt(){vr.unbind(window,"touchmove",re),vr.unbind(window,"touchend",mt),k.__onFinishChange&&k.__onFinishChange.call(k,k.getValue())}return b.updateDisplay(),b.__background.appendChild(b.__foreground),b.domElement.appendChild(b.__background),b}return ha(e,[{key:"updateDisplay",value:function(){var n=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=n*100+"%",lu(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Wu),Mf=function(y){$o(e,y);function e(n,s,c){aa(this,e);var u=Au(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,s)),m=u;return u.__button=document.createElement("div"),u.__button.innerHTML=c===void 0?"Fire":c,vr.bind(u.__button,"click",function(b){return b.preventDefault(),m.fire(),!1}),vr.addClass(u.__button,"button"),u.domElement.appendChild(u.__button),u}return ha(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(Hu),ac=function(y){$o(e,y);function e(n,s){aa(this,e);var c=Au(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,s));c.__color=new Ao(c.getValue()),c.__temp=new Ao(0);var u=c;c.domElement=document.createElement("div"),vr.makeSelectable(c.domElement,!1),c.__selector=document.createElement("div"),c.__selector.className="selector",c.__saturation_field=document.createElement("div"),c.__saturation_field.className="saturation-field",c.__field_knob=document.createElement("div"),c.__field_knob.className="field-knob",c.__field_knob_border="2px solid ",c.__hue_knob=document.createElement("div"),c.__hue_knob.className="hue-knob",c.__hue_field=document.createElement("div"),c.__hue_field.className="hue-field",c.__input=document.createElement("input"),c.__input.type="text",c.__input_textShadow="0 1px 1px ",vr.bind(c.__input,"keydown",function(nt){nt.keyCode===13&&Ae.call(this)}),vr.bind(c.__input,"blur",Ae),vr.bind(c.__selector,"mousedown",function(){vr.addClass(this,"drag").bind(window,"mouseup",function(){vr.removeClass(u.__selector,"drag")})}),vr.bind(c.__selector,"touchstart",function(){vr.addClass(this,"drag").bind(window,"touchend",function(){vr.removeClass(u.__selector,"drag")})});var m=document.createElement("div");Or.extend(c.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Or.extend(c.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:c.__field_knob_border+(c.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Or.extend(c.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Or.extend(c.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Or.extend(m.style,{width:"100%",height:"100%",background:"none"}),Hh(m,"top","rgba(0,0,0,0)","#000"),Or.extend(c.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),$d(c.__hue_field),Or.extend(c.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:c.__input_textShadow+"rgba(0,0,0,0.7)"}),vr.bind(c.__saturation_field,"mousedown",b),vr.bind(c.__saturation_field,"touchstart",b),vr.bind(c.__field_knob,"mousedown",b),vr.bind(c.__field_knob,"touchstart",b),vr.bind(c.__hue_field,"mousedown",k),vr.bind(c.__hue_field,"touchstart",k);function b(nt){re(nt),vr.bind(window,"mousemove",re),vr.bind(window,"touchmove",re),vr.bind(window,"mouseup",W),vr.bind(window,"touchend",W)}function k(nt){mt(nt),vr.bind(window,"mousemove",mt),vr.bind(window,"touchmove",mt),vr.bind(window,"mouseup",ve),vr.bind(window,"touchend",ve)}function W(){vr.unbind(window,"mousemove",re),vr.unbind(window,"touchmove",re),vr.unbind(window,"mouseup",W),vr.unbind(window,"touchend",W),rt()}function ve(){vr.unbind(window,"mousemove",mt),vr.unbind(window,"touchmove",mt),vr.unbind(window,"mouseup",ve),vr.unbind(window,"touchend",ve),rt()}function Ae(){var nt=ih(this.value);nt!==!1?(u.__color.__state=nt,u.setValue(u.__color.toOriginal())):this.value=u.__color.toString()}function rt(){u.__onFinishChange&&u.__onFinishChange.call(u,u.__color.toOriginal())}c.__saturation_field.appendChild(m),c.__selector.appendChild(c.__field_knob),c.__selector.appendChild(c.__saturation_field),c.__selector.appendChild(c.__hue_field),c.__hue_field.appendChild(c.__hue_knob),c.domElement.appendChild(c.__input),c.domElement.appendChild(c.__selector),c.updateDisplay();function re(nt){nt.type.indexOf("touch")===-1&&nt.preventDefault();var tn=u.__saturation_field.getBoundingClientRect(),Ie=nt.touches&&nt.touches[0]||nt,Kt=Ie.clientX,At=Ie.clientY,an=(Kt-tn.left)/(tn.right-tn.left),Cn=1-(At-tn.top)/(tn.bottom-tn.top);return Cn>1?Cn=1:Cn<0&&(Cn=0),an>1?an=1:an<0&&(an=0),u.__color.v=Cn,u.__color.s=an,u.setValue(u.__color.toOriginal()),!1}function mt(nt){nt.type.indexOf("touch")===-1&&nt.preventDefault();var tn=u.__hue_field.getBoundingClientRect(),Ie=nt.touches&&nt.touches[0]||nt,Kt=Ie.clientY,At=1-(Kt-tn.top)/(tn.bottom-tn.top);return At>1?At=1:At<0&&(At=0),u.__color.h=At*360,u.setValue(u.__color.toOriginal()),!1}return c}return ha(e,[{key:"updateDisplay",value:function(){var n=ih(this.getValue());if(n!==!1){var s=!1;Or.each(Ao.COMPONENTS,function(m){if(!Or.isUndefined(n[m])&&!Or.isUndefined(this.__color.__state[m])&&n[m]!==this.__color.__state[m])return s=!0,{}},this),s&&Or.extend(this.__color.__state,n)}Or.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var c=this.__color.v<.5||this.__color.s>.5?255:0,u=255-c;Or.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+c+","+c+","+c+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,Hh(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Or.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+c+","+c+","+c+")",textShadow:this.__input_textShadow+"rgba("+u+","+u+","+u+",.7)"})}}]),e}(Hu),oh=["-moz-","-o-","-webkit-","-ms-",""];function Hh(y,e,n,s){y.style.background="",Or.each(oh,function(c){y.style.cssText+="background: "+c+"linear-gradient("+e+", "+n+" 0%, "+s+" 100%); "})}function $d(y){y.style.background="",y.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",y.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",y.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",y.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",y.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var Ma={load:function(y,e){var n=e||document,s=n.createElement("link");s.type="text/css",s.rel="stylesheet",s.href=y,n.getElementsByTagName("head")[0].appendChild(s)},inject:function(y,e){var n=e||document,s=document.createElement("style");s.type="text/css",s.innerHTML=y;var c=n.getElementsByTagName("head")[0];try{c.appendChild(s)}catch{}}},vl=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,Pf=function(y,e){var n=y[e];return Or.isArray(arguments[2])||Or.isObject(arguments[2])?new fi(y,e,arguments[2]):Or.isNumber(n)?Or.isNumber(arguments[2])&&Or.isNumber(arguments[3])?Or.isNumber(arguments[4])?new Ra(y,e,arguments[2],arguments[3],arguments[4]):new Ra(y,e,arguments[2],arguments[3]):Or.isNumber(arguments[4])?new ud(y,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new ud(y,e,{min:arguments[2],max:arguments[3]}):Or.isString(n)?new pg(y,e):Or.isFunction(n)?new Mf(y,e,""):Or.isBoolean(n)?new ah(y,e):null};function Kd(y){setTimeout(y,16.666666666666668)}var lh=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||Kd,cd=function(){function y(){aa(this,y),this.backgroundElement=document.createElement("div"),Or.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),vr.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Or.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;vr.bind(this.backgroundElement,"click",function(){e.hide()})}return ha(y,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Or.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,n=function s(){e.domElement.style.display="none",e.backgroundElement.style.display="none",vr.unbind(e.domElement,"webkitTransitionEnd",s),vr.unbind(e.domElement,"transitionend",s),vr.unbind(e.domElement,"oTransitionEnd",s)};vr.bind(this.domElement,"webkitTransitionEnd",n),vr.bind(this.domElement,"transitionend",n),vr.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-vr.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-vr.getHeight(this.domElement)/2+"px"}}]),y}(),Of=Uu(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);Ma.inject(Of);var hd="dg",Wh=72,kf=20,To="Default",fd=function(){try{return!!window.localStorage}catch{return!1}}(),zo=void 0,dd=!0,kc=void 0,uh=!1,pd=[],Na=function y(e){var n=this,s=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),vr.addClass(this.domElement,hd),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],s=Or.defaults(s,{closeOnTop:!1,autoPlace:!0,width:y.DEFAULT_WIDTH}),s=Or.defaults(s,{resizable:s.autoPlace,hideable:s.autoPlace}),Or.isUndefined(s.load)?s.load={preset:To}:s.preset&&(s.load.preset=s.preset),Or.isUndefined(s.parent)&&s.hideable&&pd.push(this),s.resizable=Or.isUndefined(s.parent)&&s.resizable,s.autoPlace&&Or.isUndefined(s.scrollable)&&(s.scrollable=!0);var c=fd&&localStorage.getItem(Js(this,"isLocal"))==="true",u=void 0,m=void 0;if(Object.defineProperties(this,{parent:{get:function(){return s.parent}},scrollable:{get:function(){return s.scrollable}},autoPlace:{get:function(){return s.autoPlace}},closeOnTop:{get:function(){return s.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:s.load.preset},set:function(Ae){n.parent?n.getRoot().preset=Ae:s.load.preset=Ae,Qd(this),n.revert()}},width:{get:function(){return s.width},set:function(Ae){s.width=Ae,Il(n,Ae)}},name:{get:function(){return s.name},set:function(Ae){s.name=Ae,m&&(m.innerHTML=s.name)}},closed:{get:function(){return s.closed},set:function(Ae){s.closed=Ae,s.closed?vr.addClass(n.__ul,y.CLASS_CLOSED):vr.removeClass(n.__ul,y.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=Ae?y.TEXT_OPEN:y.TEXT_CLOSED)}},load:{get:function(){return s.load}},useLocalStorage:{get:function(){return c},set:function(Ae){fd&&(c=Ae,Ae?vr.bind(window,"unload",u):vr.unbind(window,"unload",u),localStorage.setItem(Js(n,"isLocal"),Ae))}}}),Or.isUndefined(s.parent)){if(this.closed=s.closed||!1,vr.addClass(this.domElement,y.CLASS_MAIN),vr.makeSelectable(this.domElement,!1),fd&&c){n.useLocalStorage=!0;var b=localStorage.getItem(Js(this,"gui"));b&&(s.load=JSON.parse(b))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=y.TEXT_CLOSED,vr.addClass(this.__closeButton,y.CLASS_CLOSE_BUTTON),s.closeOnTop?(vr.addClass(this.__closeButton,y.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(vr.addClass(this.__closeButton,y.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),vr.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{s.closed===void 0&&(s.closed=!0);var k=document.createTextNode(s.name);vr.addClass(k,"controller-name"),m=Op(n,k);var W=function(Ae){return Ae.preventDefault(),n.closed=!n.closed,!1};vr.addClass(this.__ul,y.CLASS_CLOSED),vr.addClass(m,"title"),vr.bind(m,"click",W),s.closed||(this.closed=!1)}s.autoPlace&&(Or.isUndefined(s.parent)&&(dd&&(kc=document.createElement("div"),vr.addClass(kc,hd),vr.addClass(kc,y.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(kc),dd=!1),kc.appendChild(this.domElement),vr.addClass(this.domElement,y.CLASS_AUTO_PLACE)),this.parent||Il(n,s.width)),this.__resizeHandler=function(){n.onResizeDebounced()},vr.bind(window,"resize",this.__resizeHandler),vr.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),vr.bind(this.__ul,"transitionend",this.__resizeHandler),vr.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),s.resizable&&Ic(this),u=function(){fd&&localStorage.getItem(Js(n,"isLocal"))==="true"&&localStorage.setItem(Js(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=u;function ve(){var Ae=n.getRoot();Ae.width+=1,Or.defer(function(){Ae.width-=1})}s.parent||ve()};Na.toggleHide=function(){uh=!uh,Or.each(pd,function(y){y.domElement.style.display=uh?"none":""})},Na.CLASS_AUTO_PLACE="a",Na.CLASS_AUTO_PLACE_CONTAINER="ac",Na.CLASS_MAIN="main",Na.CLASS_CONTROLLER_ROW="cr",Na.CLASS_TOO_TALL="taller-than-window",Na.CLASS_CLOSED="closed",Na.CLASS_CLOSE_BUTTON="close-button",Na.CLASS_CLOSE_TOP="close-top",Na.CLASS_CLOSE_BOTTOM="close-bottom",Na.CLASS_DRAG="drag",Na.DEFAULT_WIDTH=245,Na.TEXT_CLOSED="Close Controls",Na.TEXT_OPEN="Open Controls",Na._keydownHandler=function(y){document.activeElement.type!=="text"&&(y.which===Wh||y.keyCode===Wh)&&Na.toggleHide()},vr.bind(window,"keydown",Na._keydownHandler,!1),Or.extend(Na.prototype,{add:function(y,e){return ch(this,y,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(y,e){return ch(this,y,e,{color:!0})},remove:function(y){this.__ul.removeChild(y.__li),this.__controllers.splice(this.__controllers.indexOf(y),1);var e=this;Or.defer(function(){e.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&kc.removeChild(this.domElement);var y=this;Or.each(this.__folders,function(e){y.removeFolder(e)}),vr.unbind(window,"keydown",Na._keydownHandler,!1),qd(this)},addFolder:function(y){if(this.__folders[y]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+y+'"');var e={name:y,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[y]&&(e.closed=this.load.folders[y].closed,e.load=this.load.folders[y]);var n=new Na(e);this.__folders[y]=n;var s=Op(this,n.domElement);return vr.addClass(s,"folder"),n},removeFolder:function(y){this.__ul.removeChild(y.domElement.parentElement),delete this.__folders[y.name],this.load&&this.load.folders&&this.load.folders[y.name]&&delete this.load.folders[y.name],qd(y);var e=this;Or.each(y.__folders,function(n){y.removeFolder(n)}),Or.defer(function(){e.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var y=this.getRoot();if(y.scrollable){var e=vr.getOffset(y.__ul).top,n=0;Or.each(y.__ul.childNodes,function(s){y.autoPlace&&s===y.__save_row||(n+=vr.getHeight(s))}),window.innerHeight-e-kf<n?(vr.addClass(y.domElement,Na.CLASS_TOO_TALL),y.__ul.style.height=window.innerHeight-e-kf+"px"):(vr.removeClass(y.domElement,Na.CLASS_TOO_TALL),y.__ul.style.height="auto")}y.__resize_handle&&Or.defer(function(){y.__resize_handle.style.height=y.__ul.offsetHeight+"px"}),y.__closeButton&&(y.__closeButton.style.width=y.width+"px")},onResizeDebounced:Or.debounce(function(){this.onResize()},50),remember:function(){if(Or.isUndefined(zo)&&(zo=new cd,zo.domElement.innerHTML=vl),this.parent)throw new Error("You can only call remember on a top level GUI.");var y=this;Or.each(Array.prototype.slice.call(arguments),function(e){y.__rememberedObjects.length===0&&If(y),y.__rememberedObjects.indexOf(e)===-1&&y.__rememberedObjects.push(e)}),this.autoPlace&&Il(this,this.width)},getRoot:function(){for(var y=this;y.parent;)y=y.parent;return y},getSaveObject:function(){var y=this.load;return y.closed=this.closed,this.__rememberedObjects.length>0&&(y.preset=this.preset,y.remembered||(y.remembered={}),y.remembered[this.preset]=Lf(this)),y.folders={},Or.each(this.__folders,function(e,n){y.folders[n]=e.getSaveObject()}),y},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Lf(this),kl(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(y){this.load.remembered||(this.load.remembered={},this.load.remembered[To]=Lf(this,!0)),this.load.remembered[y]=Lf(this),this.preset=y,ho(this,y,!0),this.saveToLocalStorageIfPossible()},revert:function(y){Or.each(this.__controllers,function(e){this.getRoot().load.remembered?Gh(y||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())},this),Or.each(this.__folders,function(e){e.revert(e)}),y||kl(this.getRoot(),!1)},listen:function(y){var e=this.__listening.length===0;this.__listening.push(y),e&&Ip(this.__listening)},updateDisplay:function(){Or.each(this.__controllers,function(y){y.updateDisplay()}),Or.each(this.__folders,function(y){y.updateDisplay()})}});function Op(y,e,n){var s=document.createElement("li");return e&&s.appendChild(e),n?y.__ul.insertBefore(s,n):y.__ul.appendChild(s),y.onResize(),s}function qd(y){vr.unbind(window,"resize",y.__resizeHandler),y.saveToLocalStorageIfPossible&&vr.unbind(window,"unload",y.saveToLocalStorageIfPossible)}function kl(y,e){var n=y.__preset_select[y.__preset_select.selectedIndex];e?n.innerHTML=n.value+"*":n.innerHTML=n.value}function kp(y,e,n){if(n.__li=e,n.__gui=y,Or.extend(n,{options:function(u){if(arguments.length>1){var m=n.__li.nextElementSibling;return n.remove(),ch(y,n.object,n.property,{before:m,factoryArgs:[Or.toArray(arguments)]})}if(Or.isArray(u)||Or.isObject(u)){var b=n.__li.nextElementSibling;return n.remove(),ch(y,n.object,n.property,{before:b,factoryArgs:[u]})}},name:function(u){return n.__li.firstElementChild.firstElementChild.innerHTML=u,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof Ra){var s=new ud(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});Or.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(u){var m=n[u],b=s[u];n[u]=s[u]=function(){var k=Array.prototype.slice.call(arguments);return b.apply(s,k),m.apply(n,k)}}),vr.addClass(e,"has-slider"),n.domElement.insertBefore(s.domElement,n.domElement.firstElementChild)}else if(n instanceof ud){var c=function(u){if(Or.isNumber(n.__min)&&Or.isNumber(n.__max)){var m=n.__li.firstElementChild.firstElementChild.innerHTML,b=n.__gui.__listening.indexOf(n)>-1;n.remove();var k=ch(y,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return k.name(m),b&&k.listen(),k}return u};n.min=Or.compose(c,n.min),n.max=Or.compose(c,n.max)}else n instanceof ah?(vr.bind(e,"click",function(){vr.fakeEvent(n.__checkbox,"click")}),vr.bind(n.__checkbox,"click",function(u){u.stopPropagation()})):n instanceof Mf?(vr.bind(e,"click",function(){vr.fakeEvent(n.__button,"click")}),vr.bind(e,"mouseover",function(){vr.addClass(n.__button,"hover")}),vr.bind(e,"mouseout",function(){vr.removeClass(n.__button,"hover")})):n instanceof ac&&(vr.addClass(e,"color"),n.updateDisplay=Or.compose(function(u){return e.style.borderLeftColor=n.__color.toString(),u},n.updateDisplay),n.updateDisplay());n.setValue=Or.compose(function(u){return y.getRoot().__preset_select&&n.isModified()&&kl(y.getRoot(),!0),u},n.setValue)}function Gh(y,e){var n=y.getRoot(),s=n.__rememberedObjects.indexOf(e.object);if(s!==-1){var c=n.__rememberedObjectIndecesToControllers[s];if(c===void 0&&(c={},n.__rememberedObjectIndecesToControllers[s]=c),c[e.property]=e,n.load&&n.load.remembered){var u=n.load.remembered,m=void 0;if(u[y.preset])m=u[y.preset];else if(u[To])m=u[To];else return;if(m[s]&&m[s][e.property]!==void 0){var b=m[s][e.property];e.initialValue=b,e.setValue(b)}}}}function ch(y,e,n,s){if(e[n]===void 0)throw new Error('Object "'+e+'" has no property "'+n+'"');var c=void 0;if(s.color)c=new ac(e,n);else{var u=[e,n].concat(s.factoryArgs);c=Pf.apply(y,u)}s.before instanceof Hu&&(s.before=s.before.__li),Gh(y,c),vr.addClass(c.domElement,"c");var m=document.createElement("span");vr.addClass(m,"property-name"),m.innerHTML=c.property;var b=document.createElement("div");b.appendChild(m),b.appendChild(c.domElement);var k=Op(y,b,s.before);return vr.addClass(k,Na.CLASS_CONTROLLER_ROW),c instanceof ac?vr.addClass(k,"color"):vr.addClass(k,Ta(c.getValue())),kp(y,k,c),y.__controllers.push(c),c}function Js(y,e){return document.location.href+"."+e}function ho(y,e,n){var s=document.createElement("option");s.innerHTML=e,s.value=e,y.__preset_select.appendChild(s),n&&(y.__preset_select.selectedIndex=y.__preset_select.length-1)}function Xd(y,e){e.style.display=y.useLocalStorage?"block":"none"}function If(y){var e=y.__save_row=document.createElement("li");vr.addClass(y.domElement,"has-save"),y.__ul.insertBefore(e,y.__ul.firstChild),vr.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",vr.addClass(n,"button gears");var s=document.createElement("span");s.innerHTML="Save",vr.addClass(s,"button"),vr.addClass(s,"save");var c=document.createElement("span");c.innerHTML="New",vr.addClass(c,"button"),vr.addClass(c,"save-as");var u=document.createElement("span");u.innerHTML="Revert",vr.addClass(u,"button"),vr.addClass(u,"revert");var m=y.__preset_select=document.createElement("select");if(y.load&&y.load.remembered?Or.each(y.load.remembered,function(Ae,rt){ho(y,rt,rt===y.preset)}):ho(y,To,!1),vr.bind(m,"change",function(){for(var Ae=0;Ae<y.__preset_select.length;Ae++)y.__preset_select[Ae].innerHTML=y.__preset_select[Ae].value;y.preset=this.value}),e.appendChild(m),e.appendChild(n),e.appendChild(s),e.appendChild(c),e.appendChild(u),fd){var b=document.getElementById("dg-local-explain"),k=document.getElementById("dg-local-storage"),W=document.getElementById("dg-save-locally");W.style.display="block",localStorage.getItem(Js(y,"isLocal"))==="true"&&k.setAttribute("checked","checked"),Xd(y,b),vr.bind(k,"change",function(){y.useLocalStorage=!y.useLocalStorage,Xd(y,b)})}var ve=document.getElementById("dg-new-constructor");vr.bind(ve,"keydown",function(Ae){Ae.metaKey&&(Ae.which===67||Ae.keyCode===67)&&zo.hide()}),vr.bind(n,"click",function(){ve.innerHTML=JSON.stringify(y.getSaveObject(),void 0,2),zo.show(),ve.focus(),ve.select()}),vr.bind(s,"click",function(){y.save()}),vr.bind(c,"click",function(){var Ae=prompt("Enter a new preset name.");Ae&&y.saveAs(Ae)}),vr.bind(u,"click",function(){y.revert()})}function Ic(y){var e=void 0;y.__resize_handle=document.createElement("div"),Or.extend(y.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function n(u){return u.preventDefault(),y.width+=e-u.clientX,y.onResize(),e=u.clientX,!1}function s(){vr.removeClass(y.__closeButton,Na.CLASS_DRAG),vr.unbind(window,"mousemove",n),vr.unbind(window,"mouseup",s)}function c(u){return u.preventDefault(),e=u.clientX,vr.addClass(y.__closeButton,Na.CLASS_DRAG),vr.bind(window,"mousemove",n),vr.bind(window,"mouseup",s),!1}vr.bind(y.__resize_handle,"mousedown",c),vr.bind(y.__closeButton,"mousedown",c),y.domElement.insertBefore(y.__resize_handle,y.domElement.firstElementChild)}function Il(y,e){y.domElement.style.width=e+"px",y.__save_row&&y.autoPlace&&(y.__save_row.style.width=e+"px"),y.__closeButton&&(y.__closeButton.style.width=e+"px")}function Lf(y,e){var n={};return Or.each(y.__rememberedObjects,function(s,c){var u={},m=y.__rememberedObjectIndecesToControllers[c];Or.each(m,function(b,k){u[k]=e?b.initialValue:b.getValue()}),n[c]=u}),n}function Qd(y){for(var e=0;e<y.__preset_select.length;e++)y.__preset_select[e].value===y.preset&&(y.__preset_select.selectedIndex=e)}function Ip(y){y.length!==0&&lh.call(window,function(){Ip(y)}),Or.each(y,function(e){e.updateDisplay()})}var Jd=Na;let Gl=null;class oc{constructor(e){if(this.debug=null,this.config=null,this.updateConfig=n=>{this.config=n},Gl)return Gl;Gl=this,this.config=e,this.init()}init(){if(this.debug)return;const e=new Jd({width:300});let n;window.parent!==window?(n=this.getExportIntegration(),e.add(n,"export").name("Save")):(n=this.getExportStandalone(),e.add(n,"export").name("Export")),this.debug=e,this.debug.domElement.style.display="none",new URLSearchParams(window.location.search).get("config")==="true"&&(this.debug.open(),this.debug.domElement.style.display="block")}getExportIntegration(){return{export:()=>{const e="babylon-customization.json",n=this.exportConfigCustmizations(this.config);window.parent.postMessage({type:"exportConfig",data:{filename:e,config:n}},"*")}}}getExportStandalone(){return{export:()=>{const e="babylon-customization.json",n=JSON.stringify(this.exportConfigCustmizations(this.config));let s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}}updateDisplay(e){if(e){for(var n in e.__controllers)e.__controllers[n].updateDisplay();for(var s in e.__folders)this.updateDisplay(e.__folders[s])}}exportConfigCustmizations(e){if(!(!e||!this.debug))return e}exportCustomProperties(e){return Object.entries(e.__folders).map(([n,s])=>({[n]:this.exportCustomPropertiesProps(s)})).reduce((n,s)=>({...s,...n}),{})}exportCustomPropertiesProps(e){const n=e.__controllers.reduce((c,u)=>({...c,[u.property]:u.getValue()}),{}),s=Object.entries(e.__folders).map(([c,u])=>({[c]:this.exportCustomPropertiesProps(u)})).reduce((c,u)=>({...u,...c}),{});return{...n,...s}}}class tm{constructor(e,n,s){this.gui=null,this.config=null,this.sceneHelper=null,this.shadowMinZController=null,this.shadowMaxZController=null;const c=new oc(e);c.init(),this.gui=c,this.onUpdate=n,this.config=e,this.sceneHelper=s}setupGui(e){if(!this.config)return;const n=s=>{var c;this.onUpdate(s),(c=this.gui)==null||c.updateConfig(s)};this.configureGeneral(this.config,n),this.configureEnvironment(this.config,n),this.configureLights(this.config,n),this.configureCamera(this.config,n,e),this.configureShadows(this.config,n),this.configureAr(this.config,n),this.configureModel(this.config,n),this.configureAnimations(this.config,n,e)}configureModel(e,n){var s,c;if(!e.model)return;const u=(c=(s=this.gui)==null?void 0:s.debug)==null?void 0:c.addFolder("Model"),m=u==null?void 0:u.addFolder("rotation"),b=u==null?void 0:u.addFolder("config");m==null||m.add(e.model.rotation,"x",-5,5,1e-5).name("X").onChange(()=>{n(e)}),m==null||m.add(e.model.rotation,"y",-5,5,1e-5).name("Y").onChange(()=>{n(e)}),m==null||m.add(e.model.rotation,"z",-5,5,1e-5).name("Z").onChange(()=>{n(e)}),e.model.config||(e.model.config={doubleSided:!0}),b==null||b.add(e.model.config,"doubleSided").name("Double Sided").onFinishChange(()=>{n(e)})}configureShadows(e,n){var s,c,u,m,b,k;if(!e.environment||!e.environment.shadows)return;const W=(c=(s=this.gui)==null?void 0:s.debug)==null?void 0:c.addFolder("Shadows");W==null||W.add(e.environment.shadows,"enableShadows").name("Enable Shadows").onChange(()=>{n(e)}),W==null||W.addColor(e.environment.shadows,"shadowHexColor").name("Hex Color").onChange(()=>{n(e)}),W==null||W.add(e.environment.shadows,"shadowDarkness",0,1,.1).name("Transparency").onChange(()=>{n(e)}),W==null||W.add(e.environment.shadows,"groundSizeMultiplierWidth",0,5,.1).name("Ground Width").onChange(()=>{n(e)}),W==null||W.add(e.environment.shadows,"groundSizeMultiplierLength",0,5,.1).name("Ground Length").onChange(()=>{n(e)}),W==null||W.add(e.environment.shadows,"shadowMapSize",0,128,4).name("Map Size").onChange(()=>{n(e)});const ve={enableShadowMinZ:!!((m=(u=e==null?void 0:e.environment)==null?void 0:u.shadows)!=null&&m.shadowMinZ),enableShadowMaxZ:!!((k=(b=e==null?void 0:e.environment)==null?void 0:b.shadows)!=null&&k.shadowMaxZ)};W==null||W.add(ve,"enableShadowMinZ").name("Enable starting shadow clipping").onChange(()=>{ve.enableShadowMinZ?e.environment.shadows.shadowMinZ=0:(e.environment.shadows.shadowMinZ=null,n(e)),this.buildShadowZConfig(e,W,n)}),W==null||W.add(ve,"enableShadowMaxZ").name("Enable ending shadow clipping").onChange(()=>{ve.enableShadowMaxZ?e.environment.shadows.shadowMaxZ=0:(e.environment.shadows.shadowMaxZ=null,n(e)),this.buildShadowZConfig(e,W,n)}),W&&this.buildShadowZConfig(e,W,n)}buildShadowZConfig(e,n,s){var c,u,m,b,k,W,ve,Ae,rt,re;((u=(c=e==null?void 0:e.environment)==null?void 0:c.shadows)==null?void 0:u.shadowMinZ)!==void 0&&((b=(m=e==null?void 0:e.environment)==null?void 0:m.shadows)==null?void 0:b.shadowMinZ)!==null?this.shadowMinZController||(this.shadowMinZController=n==null?void 0:n.add((k=e==null?void 0:e.environment)==null?void 0:k.shadows,"shadowMinZ",-50,0,1).name("Clipping Start").onChange(()=>{s(e)})):this.shadowMinZController&&(n==null||n.remove(this.shadowMinZController),this.shadowMinZController=null),((ve=(W=e==null?void 0:e.environment)==null?void 0:W.shadows)==null?void 0:ve.shadowMaxZ)!==void 0&&((rt=(Ae=e==null?void 0:e.environment)==null?void 0:Ae.shadows)==null?void 0:rt.shadowMaxZ)!==null?this.shadowMaxZController||(this.shadowMaxZController=n==null?void 0:n.add((re=e==null?void 0:e.environment)==null?void 0:re.shadows,"shadowMaxZ",0,50,1).name("Clipping End").onChange(()=>{s(e)})):this.shadowMaxZController&&(n==null||n.remove(this.shadowMaxZController),this.shadowMaxZController=null)}configureGeneral(e,n){var s,c;if(!e.general)return;const u=(c=(s=this.gui)==null?void 0:s.debug)==null?void 0:c.addFolder("General");u==null||u.addColor(e.general,"backgroundColor").name("Background Color").onChange(()=>{n(e)}),u==null||u.add(e.general,"removeDefaultBackground").name("Remove Background").onChange(()=>{n(e)}),e.camera&&(u==null||u.add(e.camera,"toneMappingEnabled").name("Tone Mapping Enabled").onFinishChange(()=>{n(e)}),u==null||u.add(e.camera,"toneMappingType",{Standard:0,AcesToneMapping:1}).name("Tone Mapping Type").onFinishChange(()=>{var m;(m=e==null?void 0:e.camera)!=null&&m.toneMappingType&&(e.camera.toneMappingType=Number(e.camera.toneMappingType)),n(e)}))}configureAr(e,n){var s,c,u,m,b;if(!e.general||!e.general.meshSize)return;const k=(c=(s=this.gui)==null?void 0:s.debug)==null?void 0:c.addFolder("Augmented Reality");k==null||k.add(e.general,"arEnabled").name("Enabled").onChange(()=>{n(e)}),k==null||k.add({enabled:e.general.arAnchor==="wall"},"enabled").name("Enable wall placement").onChange(mt=>{e.general&&(e.general.arAnchor=mt?"wall":null),n(e)}),k==null||k.add({enabled:e.general.arScale??!1},"enabled").name("Resizable in AR").onChange(mt=>{e.general&&(e.general.arScale=mt),n(e)}),k==null||k.add({enabled:e.general.arOnTheFly},"enabled").name("Faster AR Conversion").onChange(mt=>{e.general&&(e.general.arOnTheFly=mt),n(e)});const W=k==null?void 0:k.addFolder("Measure Scene Ar"),ve={options:{width:((u=e.general.meshSize)==null?void 0:u.width)??!1,height:((m=e.general.meshSize)==null?void 0:m.height)??!1,depth:((b=e.general.meshSize)==null?void 0:b.depth)??!1}};let Ae=(()=>{const{width:mt,height:nt,depth:tn}=ve.options;return mt?"width":nt?"height":tn?"depth":null})();const rt=mt=>{if(mt==="none"||!mt)return 0;if(e.general&&e.general.meshSize)return e.general.meshSize[mt]};W==null||W.add(ve,"options",{None:"none",Width:"width",Height:"height",Depth:"depth"}).name("Know Dimension").setValue(Ae).onFinishChange(mt=>{Ae=mt,mt==="none"&&e.general&&e.general.meshSize&&(e.general.meshSize={width:null,height:null,depth:null},n(e)),re==null||re.setValue(rt(Ae))});const re=W==null?void 0:W.add({size:0},"size",-500,500,1).name("Measure (cm)").setValue(rt(Ae)).onFinishChange(mt=>{e.general&&e.general.meshSize&&(Object.keys(e.general.meshSize).forEach(nt=>{e.general&&e.general.meshSize&&(e.general.meshSize[nt]=nt!==Ae?null:mt)}),n(e))})}configureEnvironment(e,n){var s,c;if(!e.general||!e.general.environmentOptions)return;const u=(c=(s=this.gui)==null?void 0:s.debug)==null?void 0:c.addFolder("Environment");u==null||u.add(e.general,"exposure",0,5,.1).name("Exposure").onChange(()=>{n(e)}),u==null||u.add(e.general,"contrast",0,5,.1).name("Contrast").onChange(()=>{n(e)}).isModified,u==null||u.add(e.general.environmentOptions,"rotationY",0,10,.001).name("Rotation Y").onChange(()=>{n(e)}),u==null||u.add(e.general.environmentOptions,"intensity",0,20,.1).name("Intensity").onChange(()=>{n(e)}),u==null||u.add(e.general.environmentOptions,"pbrIntensity",0,20,.1).name("PBR Intensity").onChange(()=>{n(e)})}configureCamera(e,n,s){var c,u;const m=s==null?void 0:s.cameras.find(rt=>rt instanceof window.BABYLON.ArcRotateCamera);if(!e.camera||!e.camera.position||!m)return;const b=(u=(c=this.gui)==null?void 0:c.debug)==null?void 0:u.addFolder("Camera");b==null||b.add(e.camera,"autoRotate").name("Auto Rotate").onChange(()=>{n(e)}),e.camera.zoom===void 0&&(e.camera.zoom=0),b==null||b.add(e.camera,"zoom",-50,10,.1).name("Initial Zoom").onChange(()=>{n(e)}),b==null||b.add(e.camera.position,"fov",0,1.6,.001).name("Fov").onChange(rt=>{m.fov=rt,s==null||s.render()});const k=b==null?void 0:b.addFolder("position");k==null||k.add(e.camera.position,"alpha",-10,10,.01).name("X").onChange(rt=>{m.alpha=rt,s==null||s.render()}),k==null||k.add(e.camera.position,"beta",-3,3,.01).name("Y").onChange(rt=>{m.beta=rt,s==null||s.render()});const W=b==null?void 0:b.addFolder("Zoom Settings");e.camera.useMinZoomPerc=e.camera.useMinZoomPerc===null?!1:e.camera.useMinZoomPerc,e.camera.useMaxZoomPerc=e.camera.useMaxZoomPerc===null?!1:e.camera.useMaxZoomPerc,W==null||W.add(e.camera,"useMinZoomPerc",0,1,.01).name("Enable Max Zoom").onChange(()=>{n(e)});const ve=W==null?void 0:W.add(e.camera,"minZoomPerc",0,10,.01).name("Max Zoom");ve==null||ve.onChange(rt=>{var re;const mt=(re=e.camera)==null?void 0:re.maxZoomPerc;mt&&rt>mt&&ve.setValue(mt),n(e)}),W==null||W.add(e.camera,"useMaxZoomPerc",0,1,.01).name("Enable Min Zoom").onChange(()=>{n(e)});const Ae=W==null?void 0:W.add(e.camera,"maxZoomPerc",0,10,.01).name("Min Zoom");Ae==null||Ae.onChange(rt=>{var re;const mt=(re=e.camera)==null?void 0:re.minZoomPerc;rt===0?Ae.setValue(.01):mt&&rt<mt&&Ae.setValue(mt),n(e)})}configureLights(e,n){var s,c;if(!e.lights)return;const u=(c=(s=this.gui)==null?void 0:s.debug)==null?void 0:c.addFolder("Lights");this.configureLight(u,"Directional Light Back",e.lights.directionalLightBack,e,n),this.configureLight(u,"Directional Light Left",e.lights.directionalLightLeft,e,n),this.configureLight(u,"Point Light Back",e.lights.pointLightBack,e,n),this.configureLight(u,"Point Light Front",e.lights.pointLightFront,e,n),this.configureLight(u,"Hemisphere Light",e.lights.hemisphereLight,e,n)}configureLight(e,n,s,c,u){const m=e==null?void 0:e.addFolder(n),b=m==null?void 0:m.addFolder("position"),k=m==null?void 0:m.addFolder("general");b==null||b.add(s.position,"x",-100,100,.1).name("Position X").onChange(()=>{u(c)}),b==null||b.add(s.position,"y",-100,100,.1).name("Position Y").onChange(()=>{u(c)}),b==null||b.add(s.position,"z",-100,100,.1).name("Position Z").onChange(()=>{u(c)}),k==null||k.add(s.general,"intensity",0,50,.1).name("Intensity").onChange(()=>{u(c)}),k==null||k.add(s.general,"visible").name("Visible").onChange(()=>{u(c)})}configureAnimations(e,n,s){var c,u;const m=(s==null?void 0:s.animationGroups)&&s.animationGroups.length>0;if(!e.animations||!m)return;const b=(u=(c=this.gui)==null?void 0:c.debug)==null?void 0:u.addFolder("animations");b==null||b.add(e.animations,"runAtStart").name("Run At Start").onChange(()=>n(e)),b==null||b.add(e.animations,"loop").name("Loop").onChange(()=>n(e)),b==null||b.add(e.animations,"speed",.1,5,.1).name("Speed").onChange(()=>n(e))}}var rl=(y=>(y.CameraMovement="camera-movement",y.ScriptExecution="script-execution",y.DesignChanged="design-changed",y))(rl||{});class Mo{constructor(e){this._zkScene=null,this._zkModel=null,this._canvasID="zakeke-canvas-viewer3D-"+Zakeke.makeID(5),this._canvas=null,this._domElement=null,this._lastWidth=Number.MIN_VALUE,this._lastHeight=Number.MIN_VALUE,this._engine=null,this._scene=null,this._bindedResize=null,this._sceneHelper=null,this._environmentManager=null,this._glowManager=null,this._sceneActionsExecutor=null,this._renderingNeeded=!1,this._renderingPaused=!1,this._autoRender=!1,this._antialias=!0,this._postProcesses=[],this._camera=null,this._hemiLight=null,this._pointLight=null,this._highlightColor="#00ff00",this._highlightSize=2,this._highlightLayer=null,this._highlightBlurHorizontalSize=1,this._highlightBlurVerticalSize=1,this._highlightAnimationID=null,this._highlightCurrentMeshes=[],this._highlightNextMeshes=[],this._deviceType=MPlaza.DeviceType.All,this._destroyed=!1,this._sceneDesignManager=null,this._meshLocationsManager=null,this._groupPickedListeners=[],this._focusAttributesListeners=[],this._designNotifyMessageListeners=[],this._designRemoveMessageListeners=[],this._designEventMessages=[],this._onDelayLoadingStart=null,this._onDelayLoadingProgress=null,this._onDelayLoadingSuccess=null,this._onDelayLoadingError=null,this._infoPointPickedListeners=[],this._infoPointContentShownListeners=[],this._infoPointContentHiddenListeners=[],this._beginAssetsLoadingListeners=[],this._endAssetsLoadingListeners=[],this._nextSceneMeshesLoadedListeners=[],this._nextSceneTexturesLoadedListeners=[],this._beginSceneLoadingListeners=[],this._endSceneLoadingListeners=[],this._arFileUrls={},this._designTextureResolution=1024,this._configPreview=!1,this._defaultBackgroundColor=null,this._grids=[],this._dracoCompression=null,this._infoPointsManager=null,this._infoPointsManagerStyle=null,this._canShowInfoPoints=!0,this._canShowInfoPointsContent=!0,this._broadcastChannel=null,this._isHologramSource=!1,this._isHologram=!1,this._lastResizableMeshID="",this._brandLogoButton=null,this._advancedTexture=null,this._createGui=null,this._performanceInfo=null,this._currentRotation=0,this._isRotating=!1,this._isViewer=!1,this._isSelectionMode=!0,this._mouseWheelInput=null,this._modelParentNode=null,this.setCameraLocked=n=>{this._zkScene&&this._sceneHelper&&this._scene&&(this._sceneHelper.setupCamera(),this._camera=this._scene.activeCamera,this._camera&&(n?(this._sceneHelper.setCameraLimitLowerRadius(!0),this._sceneHelper.setMinZoomPerc(1),this._sceneHelper.setMaxZoomPerc(1)):(this._sceneHelper.setCameraLimitLowerRadius(!1),this._sceneHelper.setMinZoomPerc(1),this._sceneHelper.setMaxZoomPerc(1.5))))},e!=null&&(typeof e=="boolean"?this._configPreview=e:(this._configPreview=e.configPreview,e.defaultBackgroundColor&&(this._defaultBackgroundColor=window.BABYLON.Color4.FromHexString(e.defaultBackgroundColor)),this._isViewer=(e==null?void 0:e.isViewer)??!1)),this._elementSelector=new Th}get zkScene(){return this._zkScene}get zkModel(){return this._zkModel}get canvas(){return this._canvas}get engine(){return this._engine}get scene(){return this._scene}get autoRender(){return this._autoRender}set autoRender(e){this._autoRender=e}get antialias(){return this._antialias}set antialias(e){this._antialias=e}get isLowEndDevice(){return this._performanceInfo&&this._performanceInfo.isLowEndDevice}get isHologramSource(){return this.isHologramSource}get createGui(){return this._createGui}set createGui(e){this._createGui=e}set isHologramSource(e){this._isHologramSource=e,e&&(this._isHologram=!1,this.detachBroadcastChannelEventHandlers())}get isHologram(){return this._isHologram}set isHologram(e){this._isHologram=e,e?(this._isHologramSource=!1,this.attachBroadcastChannelEventHandlers()):this.detachBroadcastChannelEventHandlers(),this.refreshEnvironment()}get isSelectionMode(){return this._isSelectionMode}set isSelectionMode(e){this._isSelectionMode=e}getAntialiasEnabled(){let e=!0;return this._zkScene?this._zkScene.getAntialiasEnabled()??e:e}setAntialiasEnabled(e){this._zkScene&&(this._zkScene.setAntialiasEnabled(e),e?this.enableAntialiasing():this.disableAntialiasing())}getARScale(){let e=!0;return this._zkScene?this._zkScene.getARScale()??e:e}setARScale(e){this._zkScene&&this._zkScene.setARScale(e)}getUseMaterialOffloading(){let e=!1;return this.zkScene?this.zkScene.getUseMaterialOffloading()??e:e}setUseMaterialOffloading(e){this._zkScene&&this._zkScene.setUseMaterialOffloading(e)}getPrefetchMeshes(){return this.zkScene?this.zkScene.getPrefetchMeshes()??!0:!0}setPrefetchMeshes(e){this._zkScene&&this._zkScene.setPrefetchMeshes(e)}getPrefetchMaterials(){return this.zkScene?this.zkScene.getPrefetchMaterials()??!0:!0}setPrefetchMaterials(e){this._zkScene&&this._zkScene.setPrefetchMaterials(e)}getShowHideInfoPoints(){return this.canShowInfoPoints}setShowHideInfoPoints(e){this.canShowInfoPoints=e}get camera(){return this._camera}get deviceType(){return this._deviceType}set deviceType(e){this._deviceType=e}getDeviceType(){return this.deviceType}get highlightColor(){return this._highlightColor}set highlightColor(e){this._highlightColor=e}get highlightSize(){return this._highlightSize}set highlightSize(e){this._highlightSize=e}get destroyed(){return this._destroyed}get onDelayLoadingStart(){return this._onDelayLoadingStart}set onDelayLoadingStart(e){this._onDelayLoadingStart=e}get onDelayLoadingProgress(){return this._onDelayLoadingProgress}set onDelayLoadingProgress(e){this._onDelayLoadingProgress=e}get onDelayLoadingSuccess(){return this._onDelayLoadingSuccess}set onDelayLoadingSuccess(e){this._onDelayLoadingSuccess=e}get onDelayLoadingError(){return this._onDelayLoadingError}set onDelayLoadingError(e){this._onDelayLoadingError=e}get dracoCompression(){return this._dracoCompression||(this._dracoCompression=kh.Default),this._dracoCompression}get infoPointsShown(){return this._infoPointsManager?this._infoPointsManager.infoPointsShown:!1}get infoPointsManagerStyle(){return this._infoPointsManagerStyle}set infoPointsManagerStyle(e){this._infoPointsManagerStyle=e,this.updateInfoPointsManagerStyle()}get canShowInfoPoints(){return this._canShowInfoPoints}set canShowInfoPoints(e){this._canShowInfoPoints=e,this.refreshInfoPoints()}get canShowInfoPointsContent(){return this._canShowInfoPointsContent}set canShowInfoPointsContent(e){this._canShowInfoPointsContent=e,this._infoPointsManager&&(this._infoPointsManager.canShowInfoPointsContent=e)}static async createSceneViewerAsync(e){const n=new Mo(e);return await n.initAsync(),n}dispose(){this.closeBroadcastChannel(),this.removeCanvas(),this.removeDomElement(),this.deleteScene(),this.deleteEngine()}async initAsync(){this._bindedResize=this.resize.bind(this),Zakeke.Tools.Init(),window.BABYLON.Geometry.onDelayLoadingStart=e=>{this._onDelayLoadingStart&&this._onDelayLoadingStart(e)},window.BABYLON.Geometry.onDelayLoadingProgress=e=>{this._onDelayLoadingProgress&&this._onDelayLoadingProgress(e)},window.BABYLON.Geometry.onDelayLoadingSuccess=e=>{this._onDelayLoadingSuccess&&this._onDelayLoadingSuccess(e)},window.BABYLON.Geometry.onDelayLoadingError=e=>{this._onDelayLoadingError&&this._onDelayLoadingError(e)},window.BABYLON.Geometry.dracoDecodingFunction=(e,n,s)=>{this.dracoDecodingFunction(e,n,s)},this.createCanvas(),this.createDOMElement(),await this.init3DEngineAsync()}async init3DEngineAsync(){this.createEngine(),await this.createEmptySceneAsync(),this._destroyed=!1}createCanvas(){return this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id",this._canvasID),this._canvas.setAttribute("touch-action","none"),this._canvas.addEventListener("dblclick",e=>this.setRenderingNeeded()),this._canvas}removeCanvas(){this._canvas&&(this._canvas.remove(),this._canvas=null)}deleteEngine(){this._engine&&(this._engine.dispose(),this._engine=null),this._destroyed=!0,$(window).off("resize",this._bindedResize)}deleteScene(){this.deleteComponents(),this._scene&&(this._scene.dispose(),this._scene=null)}deleteComponents(){this.resetPerformanceInfo(),this.emptyArFileCache(),this.disposeInfoPointsManager(),this._meshLocationsManager&&(this._meshLocationsManager.dispose(),this._meshLocationsManager=null),this._sceneDesignManager&&(this._sceneDesignManager.dispose(),this._sceneDesignManager=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null),this._glowManager&&(this._glowManager.dispose(),this._glowManager=null),this._sceneActionsExecutor&&(this._sceneActionsExecutor.dispose(),this._sceneActionsExecutor=null),this.disposePostProcesses()}disposeInfoPointsManager(){this._infoPointsManager&&(this._infoPointsManager.dispose(),this._infoPointsManager=null)}disposePostProcesses(){for(;this._postProcesses.length>0;){var e=this._postProcesses.pop();e&&e.dispose()}}emptyArFileCache(){this._arFileUrls={}}async resetSceneAsync(){await this.init3DEngineAsync()}replaceModel(e){this._zkModel=e,this.render()}setZkScene(e){this._zkScene=e}closeBroadcastChannel(){this._broadcastChannel&&(this._broadcastChannel.close(),this._broadcastChannel=null)}openBroadcastChannel(){if(!this._broadcastChannel&&window.BroadcastChannel)try{this._broadcastChannel=new BroadcastChannel("zakeke-broadcast-channel")}catch(e){console.error("Failed opening broadcast channel"),console.error(e)}}getOrCreateBroadcastChannel(){return this.openBroadcastChannel(),this._broadcastChannel}createEngine(){this.deleteScene(),this.deleteEngine(),this._engine=new window.BABYLON.Engine(this._canvas,!0,{stencil:!0,preserveDrawingBuffer:!0}),this._engine.enableOfflineSupport=!1,this._engine.disableUniformBuffers=!0,Logger.info("WebGL version: "+this._engine.webGLVersion),$(window).resize(this._bindedResize),$(window).on("orientationchange",()=>{setTimeout(()=>this._bindedResize(),100)})}createBrandLogoButton(){var e=window.BABYLON.GUI.Button.CreateImageOnlyButton("zakeke-logo","https://zakeke.blob.core.windows.net/files/images/logo_hq.png");return e.image.stretch=window.BABYLON.GUI.Image.STRETCH_UNIFORM,e.width="120px",e.height="70px",e.color="transparent",e.hoverCursor="pointer",e.onPointerClickObservable.add(function(){window.open("https://www.zakeke.com/")}),this._brandLogoButton=e,this._advancedTexture=window.BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI",!0,this._scene),this._advancedTexture.updateSamplingMode(window.BABYLON.Texture.NEAREST_NEAREST),this._advancedTexture.renderScale=2,this._advancedTexture.addControl(this._brandLogoButton),this._brandLogoButton}async createEmptySceneAsync(){this.deleteScene(),this._engine&&(this._scene=new window.BABYLON.Scene(this._engine),this._defaultBackgroundColor&&this._scene.clearColor.copyFrom(this._defaultBackgroundColor),await this.setupSceneAsync())}refreshLights(){var e,n,s,c,u,m;if(!this._zkScene)return;((n=(e=this._zkScene)==null?void 0:e.getGeneralConfig())==null?void 0:n.get("preventDefaultLights"))!==!0&&((s=this._sceneHelper)==null||s.setupLights());const b=(u=(c=this._zkScene)==null?void 0:c.getSceneConfig())==null?void 0:u.get("lights");b!=null&&b.attributes&&((m=this._sceneHelper)==null||m.setUpCustomLights(b.attributes))}async setupSceneAsync(e=!0){var n,s,c,u,m,b,k,W,ve,Ae,rt;if(this._zkScene&&this._zkScene.get("config")&&(s=(n=this._zkScene.get("config"))==null?void 0:n.get("general"))!=null&&s.get("meshSize")){const re=(u=(c=this._zkScene.get("config"))==null?void 0:c.get("general"))==null?void 0:u.get("meshSize"),mt=(m=this._scene)==null?void 0:m.meshes.find(nt=>!nt.parent);mt&&re&&(re.width||re.height||re.depth)&&(mt.metadata?mt.metadata.sizecm=re:mt.metadata={sizecm:re})}if(this.refreshModel(),this._engine&&this._scene){this._sceneHelper=new Tr(this._scene);const re=this._zkScene?this._zkScene.getCameraPositionScale():void 0,mt=this._zkScene?this._zkScene.getCameraLimitLowerRadius():void 0,nt=this._zkScene?this._zkScene.getCameraZoomEnabled():void 0,tn=this._zkScene?this._zkScene.getCameraUseMinZoomPerc():!1,Ie=this._zkScene?this._zkScene.getCameraMinZoomPerc():1,Kt=this._zkScene?this._zkScene.getCameraUseMaxZoomPerc():!1,At=this._zkScene?this._zkScene.getCameraMaxZoomPerc():1.5,an=this._zkScene?this._zkScene.getCameraLowerAlphaLimit():null,Cn=this._zkScene?this._zkScene.getCameraUpperAlphaLimit():null,He=this._zkScene?this._zkScene.getCameraLowerBetaLimit():null,_e=this._zkScene?this._zkScene.getCameraUpperBetaLimit():null,Sr=this._zkScene?(b=this._zkScene.getCameraConfig())==null?void 0:b.get("zoom"):null;if(re!=null&&re!=null&&this._sceneHelper.setCameraPositionScale(re,!1),mt!=null&&mt!=null&&this._sceneHelper.setCameraLimitLowerRadius(mt,!1),nt!=null&&nt!=null&&this._sceneHelper.setZoomEnabled(nt),this._sceneHelper.setCameraZoom(Sr),this._sceneHelper.setupCamera(),this._camera=this._scene.activeCamera,this._mouseWheelInput=((k=this._camera)==null?void 0:k.inputs.attached.mousewheel)??null,this._camera&&(tn?this._sceneHelper.setMinZoomPerc(Ie):this._sceneHelper.setMinZoomPerc(null),Kt?this._sceneHelper.setMaxZoomPerc(At):this._sceneHelper.setMaxZoomPerc(null),this._sceneHelper.setCameraAlphaLimits(an,Cn),this._sceneHelper.setCameraBetaLimits(He,_e)),this._camera&&e&&(this._camera.onViewMatrixChangedObservable.add(()=>{this.notifyCameraMovement()}),this._camera.onRestoreStateObservable.add(()=>{this.setupShaderMaterialsCameraPosition(),this.setRenderingNeeded()}),this.refreshCameraPosition()),(W=this._sceneHelper)==null||W.setupAnimations(this._zkScene),this._modelParentNode||(this._modelParentNode=new window.BABYLON.TransformNode("modelParent")),(ve=this._sceneHelper)==null||ve.setupShadows(this._zkScene),this.refreshLights(),this.createHighlightLayer(),await this.refreshEnvironment(),await this.fixEnvironmentTexture(),this.setupGlowManager(),this._zkScene&&(this._meshLocationsManager=new Qs,this._meshLocationsManager.setModelAndScene(this._zkScene,this._scene),this._meshLocationsManager.addMeshAnimationCompletedListener(()=>this.setRenderingNeeded())),await this.setupSceneActionsExecutorAsync(),this.setRenderingOnDelayLoaded(),this.setupAntialiasPostProcesses(),this._scene.onPointerDown=(On,Kr)=>this.onPointerDown(On,Kr),this._scene.registerBeforeRender(()=>{this.onBeforeRender()}),this.refreshInfoPoints(),this.refreshModel(),this.refreshPBRMaterials(),this._zkScene){const On=(rt=(Ae=this._zkScene)==null?void 0:Ae.getGeneralConfig())==null?void 0:rt.get("removeDefaultBackground");this._sceneHelper.removeDefaultBackground(On),this._sceneHelper.setUpSceneToneMapping(this._zkScene)}this._engine.stopRenderLoop(),this.render(),this._engine.runRenderLoop(()=>{this.checkRendering()})}}onBeforeRender(){if(this._scene&&this._sceneHelper){if(this._camera){const e=this._sceneHelper.getDefaultPointLight();e&&(e.position=this._camera.position)}this._scene.meshes.forEach(e=>{e.mustDepthSortFacets&&e.isFacetDataEnabled&&e.updateFacetData()})}}render(){this._scene&&!this._scene.isDisposed&&!this._renderingPaused&&this._scene.render()}checkRendering(){this._scene&&(this._autoRender||this._renderingNeeded||this._scene._activeAnimatables.length!==0||this._sceneHelper&&this._sceneHelper.userIsMoving()?(this.checkPerformance(),this.isLowEndDevice||this._autoRender||this._scene._activeAnimatables.length!==0||this._sceneHelper&&this._sceneHelper.userIsMoving()?this.disableAntialiasing():this.enableAntialiasing(),this.render(),this._renderingNeeded&&(this._renderingNeeded=!1)):!this._scene.postProcessesEnabled&&this.canEnableAntialiasing()&&(this.enableAntialiasing(),this.render()),this._infoPointsManager&&this._infoPointsManager.updateInfoPointsVisibility()&&this.render())}resetPerformanceInfo(){this._performanceInfo=null}checkPerformance(){if(this._performanceInfo||(this._performanceInfo={totalFPS:0,countFPS:0,isLowEndDevice:!1,chekDone:!1}),this._engine&&!this._performanceInfo.chekDone){this._performanceInfo.totalFPS+=this._engine.getFps(),this._performanceInfo.countFPS++;const e=this._performanceInfo.totalFPS/this._performanceInfo.countFPS;this._performanceInfo.countFPS>30&&(this._performanceInfo.isLowEndDevice=e<=30,this._performanceInfo.chekDone=!0)}}setupAntialiasPostProcesses(){this._antialias&&this.getAntialiasEnabled()&&this.createAntialiasPostProcesses()}createAntialiasPostProcesses(){if(this._camera&&this._postProcesses.length===0){var e=/firefox/i.test(navigator.userAgent);e||this._postProcesses.push(new window.BABYLON.PassPostProcess("scale_pass",4,this._camera,window.BABYLON.Texture.BILINEAR_SAMPLINGMODE)),this._postProcesses.push(new window.BABYLON.PassPostProcess("scale_pass",2,this._camera,window.BABYLON.Texture.BILINEAR_SAMPLINGMODE)),this._postProcesses.push(new window.BABYLON.PassPostProcess("scale_pass",1,this._camera,window.BABYLON.Texture.BILINEAR_SAMPLINGMODE))}}canEnableAntialiasing(){return this._scene&&this._antialias&&this.getAntialiasEnabled()}enableAntialiasing(){this._scene&&this.canEnableAntialiasing()&&(this.createAntialiasPostProcesses(),this._scene.postProcessesEnabled=!0)}disableAntialiasing(e=!1){this._scene&&this._antialias&&(this._scene.postProcessesEnabled=!1),e&&this.disposePostProcesses()}getDAMMainMesh(){var e,n;return(n=(e=this._sceneHelper)==null?void 0:e.getVTOMeshes().userMeshes.filter(s=>!s.parent))==null?void 0:n[0]}setRenderingNeeded(){this._renderingNeeded=!0}setLongRenderingNeeded(){this.setRenderingNeeded();for(let e=50;e<=1e3;e+=200)setTimeout(()=>this.setRenderingNeeded(),e)}refreshRendering(){this.setLongRenderingNeeded()}pauseRendering(){this._renderingPaused=!0}resumeRendering(){this._renderingPaused=!1,this.setRenderingNeeded()}setLoadingScreen(e){this._engine&&(this._engine.loadingScreen=e)}setRenderingOnDelayLoaded(){if(this._scene){var e=this;this._scene.getGeometries().forEach(function(n){var s=n.onGeometryUpdated;n.onGeometryUpdated=function(c,u){e.setLongRenderingNeeded(),s&&s.apply(this,[c,u])}})}}createHighlightLayer(){this._scene&&(this._highlightLayer=new window.BABYLON.HighlightLayer("hl1",this._scene),this.updateHighlightLayerExcludedDesignMeshes(),this.setupHighlightLayerIntensity())}setupHighlightLayerIntensity(){this._highlightLayer&&(this._highlightLayer.blurHorizontalSize=this._highlightSize,this._highlightLayer.blurVerticalSize=this._highlightSize,this._highlightBlurHorizontalSize=this._highlightSize,this._highlightBlurVerticalSize=this._highlightSize)}updateHighlightLayerExcludedDesignMeshes(){this.scene&&this._sceneHelper&&this._highlightLayer&&(this._highlightLayer.removeAllMeshes(),this.scene.meshes.filter(this._sceneHelper.isCanvasMesh).forEach(e=>this._highlightLayer.addExcludedMesh(e)))}createDOMElement(){this._canvas&&(this._domElement=document.createElement("div"),this._domElement.setAttribute("id","zakeke-canvas-viewer3D-div-"+Zakeke.makeID(5)),this._domElement.appendChild(this._canvas),this._domElement.style.position="absolute",this._domElement.style.width="100%",this._domElement.style.height="100%",this._domElement.style.left="0",this._domElement.style.top="0")}removeDomElement(){this._domElement&&(this.detach(),this._domElement.remove(),this._domElement=null)}appendTo(e){this._domElement&&(e.firstChild?e.insertBefore(this._domElement,e.firstChild):e.appendChild(this._domElement),e.appendChild(this._domElement),this.resize(),this.resize())}detach(){this._domElement&&this._domElement.parentNode&&this._domElement.parentNode.removeChild(this._domElement)}updateView(e=!0,n=!1){this.resize(n),e&&this._scene&&this.adjustCamera(!1)}resize(e=!1){if(this._canvas){this.disableAntialiasing(!0);var n=this._canvas.parentNode;if(!(!n||!(n instanceof HTMLElement))){var s=n.offsetWidth,c=n.offsetHeight;(s!=this._lastWidth||c!=this._lastHeight||e)&&(this._canvas.style.width="100%",this._canvas.style.height="100%",this._engine&&(this._engine.resize(),this._brandLogoButton&&(this._brandLogoButton.left=-this._canvas.width+100+"px",this._brandLogoButton.top=-this._canvas.height+50+"px",console.group("BrandLogoButton","left: "+this._brandLogoButton.left+" - top: "+this._brandLogoButton.top),console.groupEnd()),this.setRenderingNeeded())),this._lastWidth=s,this._lastHeight=c,this.enableAntialiasing()}}}switchFullScreen(e){this._sceneHelper&&this._sceneHelper.switchFullScreen(e)}setupGlowManager(){this._glowManager&&(this._glowManager.dispose(),this._glowManager=null),this._zkScene&&this._scene&&(this._glowManager=new ug(this._zkScene,this._scene),this._glowManager.update(),this.setRenderingNeeded())}async setupSceneActionsExecutorAsync(){this._zkScene&&this._scene&&(this._sceneActionsExecutor=new ks(this._zkScene,this._scene),this._sceneActionsExecutor.deviceType=this.deviceType,this._sceneActionsExecutor.useMaterialOffloading=!this._configPreview&&this.getUseMaterialOffloading(),this._sceneActionsExecutor.prefetchMeshes=this.getPrefetchMeshes(),this._sceneActionsExecutor.prefetchMaterials=this.getPrefetchMaterials(),this._sceneActionsExecutor.addMeshDesignRefreshRequiredListeners(async e=>{await this.refreshMeshesDesignAsync(e.meshes,e.effect)}),this._sceneActionsExecutor.addBeginAssetsLoadingListener(()=>this.fireBeginAssetsLoadingEvent()),this._sceneActionsExecutor.addEndAssetsLoadingListener(()=>this.fireEndAssetsLoadingEvent()))}restoreCameraState(){this._sceneHelper&&(this._sceneHelper.restoreCameraState(),this._sceneHelper.setupShaderMaterialsCameraPosition(),this.setRenderingNeeded())}async fixEnvironmentTexture(){if(this._scene&&this._scene.environmentTexture&&this._scene.environmentTexture.url&&typeof this._scene.environmentTexture.url=="string"){const e=this._scene.environmentTexture.url,n=(e.match(/http/g)||[]).length;let s=e;if(n>1){let b=e.lastIndexOf("http");b>=0&&(s=e.substring(b))}else if(n==0&&this._zkScene&&this._zkScene.get("rootUrl")){let b=this._zkScene.get("rootUrl");if(b){const k=b.endsWith("/")?"":"/";s=b+k+e}}else if(n===0)return;let c,u,m;this._scene&&this._scene.metadata&&(this._scene.metadata.environmentTextureRotationY!==void 0&&typeof this._scene.metadata.environmentTextureRotationY=="number"&&(c=this._scene.metadata.environmentTextureRotationY),this._scene.metadata.environmentTextureExtensions&&(u=this._scene.metadata.environmentTextureExtensions),this._scene.metadata.environmentTextureFiles&&(m=this._scene.metadata.environmentTextureFiles)),await this.setSceneEnvironmentTexture(s,c,u,m)}else await this.checkSceneEmptyEnvironmentTexture()}async checkSceneEmptyEnvironmentTexture(){this._scene&&this._sceneHelper&&this._sceneHelper.containsPBRMaterials()&&!this._scene.environmentTexture&&await this.setDefaultSceneEnvironmentTexture()}async setDefaultSceneEnvironmentTexture(){const e=Ii.Environment.EnvironmentTextureCDNUrl;await this.setSceneEnvironmentTexture(e)}async setSceneEnvironmentTexture(e,n,s,c,u,m){return new Promise(b=>{if(this._scene&&this._sceneHelper)if(this._scene.environmentTexture&&this._sceneHelper.isTextureWithUrl(this._scene.environmentTexture)&&this._scene.environmentTexture.url&&this._scene.environmentTexture.url!=e&&(this._scene.environmentTexture.dispose(),this._scene.environmentTexture=null),this._scene&&this._sceneHelper){this._scene.environmentTexture&&this._sceneHelper.isTextureWithUrl(this._scene.environmentTexture)&&this._scene.environmentTexture.url&&this._scene.environmentTexture.url!=e&&(this._scene.environmentTexture.dispose(),this._scene.environmentTexture=null);const k=()=>{u&&u(),this.setLongRenderingNeeded()};this._scene.metadata||(this._scene.metadata={}),delete this._scene.metadata.environmentTextureType,delete this._scene.metadata.environmentTextureSize,delete this._scene.metadata.environmentTextureExtensions,delete this._scene.metadata.environmentTextureFiles;let W=null;e.endsWith(".dds")?W=window.BABYLON.CubeTexture.CreateFromPrefilteredData(e,this._scene):e.endsWith(".hdr")?(W=new window.BABYLON.HDRCubeTexture(e,this._scene,128,(m==null?void 0:m.get("mipMaps"))||void 0,(m==null?void 0:m.get("generateHarmonics"))||void 0,(m==null?void 0:m.get("gammaSpace"))||void 0,(m==null?void 0:m.get("prefilterOnLoad"))||void 0,k),this._scene.metadata.environmentTextureType="BABYLON.HDRCubeTexture",this._scene.metadata.environmentTextureSize=128):e.endsWith(".env")?W=new window.BABYLON.CubeTexture(e,this._scene,null,!1,null,k,null,void 0,!0,void 0,!0):e.endsWith(".basis")?W=window.BABYLON.CubeTexture.CreateFromPrefilteredData(e,this._scene):s&&s.length===6&&c&&c.length===6&&(W=new window.BABYLON.CubeTexture(e,this._scene,s,!1,c,k),this._scene.metadata.environmentTextureExtensions=s,this._scene.metadata.environmentTextureFiles=c),W&&Tr.whenTextureIsReadyAsync(W).then(()=>{var ve,Ae,rt,re,mt,nt,tn,Ie;if(W&&this._scene){const Kt=(re=(rt=(Ae=(ve=this._zkScene)==null?void 0:ve.get("config"))==null?void 0:Ae.get("general"))==null?void 0:rt.get("environmentOptions"))==null?void 0:re.get("intensity"),At=(Ie=(tn=(nt=(mt=this._zkScene)==null?void 0:mt.get("config"))==null?void 0:nt.get("general"))==null?void 0:tn.get("environmentOptions"))==null?void 0:Ie.get("rotationY");Kt&&(W.level=Kt),At?W.rotationY=At:this._scene.metadata&&this._scene.metadata.environmentTextureRotationY!=null&&delete this._scene.metadata.environmentTextureRotationY,this._scene.environmentTexture=W,this.setRenderingNeeded(),b()}})}else b()})}async loadSceneFromModelAsync(e,n,s){if(e&&e instanceof MPlaza.Model&&(this._zkModel=e),n&&n instanceof Zakeke.Scene){this._zkScene=n,this.checkSceneShaderMaterials(n);const c=n.get("rootUrl"),u=n.get("sceneFileName");c&&u&&await this.loadSceneFromRemoteFilesAsync(c,u,s)}}async loadSceneFromModelDataAsync(e,n,s,c){if(e&&e instanceof MPlaza.Model&&(this._zkModel=e),n&&n instanceof Zakeke.Scene){this._zkScene=n,this.checkSceneShaderMaterials(n);var u="data:"+s;const m=n.get("rootUrl");m&&await this.loadSceneFromRemoteFilesAsync(m,u,c)}}preSceneFileLoading(){}postSceneFileLoading(){}async loadSceneFromRemoteFilesAsync(e,n,s){if(!this._engine)throw new Error("Unable to load scene when the 3D engine is null");try{this.fireBeginSceneLoadingEvent(),this.preSceneFileLoading(),this.pauseRendering(),this._engine.sceneFileRootUrl=e;let c=await window.BABYLON.SceneLoader.LoadAsync(e,n,this._engine,s);if(this._destroyed){Logger.info("Loading scene engine destroyed"),c.dispose();return}if(await new Promise(W=>c.executeWhenReady(()=>W())),this._destroyed)throw Logger.info("Loading scene engine destroyed"),c.dispose(),new Error("Engine destroyed while loading scene");const u=Tr.visibleMeshesRequireDelayedLoading(c);u&&this.fireBeginAssetsLoadingEvent();let m=0;const b=c.meshes.filter(W=>W.isVisible);for(let W=0;W<b.length;W++)await this.fireNextSceneMeshesLoadedEvent(W+1,b.length),await new Promise(ve=>{setTimeout(()=>{ve()},10)});await Tr.whenAllVisibleMeshesAreReadyAsync(b),u&&this.fireEndAssetsLoadingEvent(),this.deleteScene(),this._scene=c;let k=[];for(let W=0;W<this._scene.textures.length;W++){const ve=this._scene.textures[W];k.push(ve.name),ve instanceof window.BABYLON.Texture&&ve.onLoadObservable&&ve.onLoadObservable.add(Ae=>{this.setLongRenderingNeeded()})}if(this._scene&&this._scene.metadata&&!this._scene.metadata.delayedMaterials)for(let W=0;W<this._scene.textures.length;W++)await this.fireNextSceneTextureLoadedEvent(W+1,this._scene.textures.length),await new Promise(ve=>{setTimeout(()=>{ve()},10)});if(await this.setupSceneAsync(),this._sceneHelper){this._configPreview&&this._scene.metadata&&this._scene.metadata.delayedMaterials&&await this._sceneHelper.loadAllDelayedMaterialsAsync(e,this.fireNextSceneTextureLoadedEvent.bind(this)),this._configPreview&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&this._sceneHelper.loadAllOffloadedMaterials(e),this._configPreview&&this._scene.metadata&&this._scene.metadata.originalMeshMaterials&&this._sceneHelper.unsetAllDummyMaterials(),this._sceneHelper.setupShaderMaterialsCameraPosition();try{await this.reloadAllLoadingErrorTexturesAsync()}catch(W){console.error(W)}}if(this._environmentManager){const W=this._environmentManager.getSkyboxTexture();W&&await Tr.whenTextureIsReadyAsync(W)}}finally{this.resumeRendering(),this.postSceneFileLoading(),this.fireEndSceneLoadingEvent()}}getSkyboxTexture(){var e;return(e=this._environmentManager)==null?void 0:e.getSkyboxTexture()}async loadSceneFromRemoteFilesAsync_OLD(e,n,s){return new Promise(async(c,u)=>{this._engine||u(),this.preSceneFileLoading(),this._engine.sceneFileRootUrl=e;let m=await window.BABYLON.SceneLoader.LoadAsync(e,n,this._engine,s);if(this._destroyed){Logger.info("Loading scene engine destroyed"),m.dispose();return}m.executeWhenReady(async()=>{this._destroyed&&(Logger.info("Loading scene engine destroyed"),m.dispose(),u());const b=m.meshes.filter(W=>W.isVisible),k=Tr.visibleMeshesRequireDelayedLoading(m);k&&this.fireBeginAssetsLoadingEvent(),await Tr.whenAllVisibleMeshesAreReadyAsync(b),k&&this.fireEndAssetsLoadingEvent(),this.deleteScene(),this._scene=m;for(let W=0;W<this._scene.textures.length;W++){const ve=this._scene.textures[W];ve instanceof window.BABYLON.Texture&&ve.onLoadObservable&&ve.onLoadObservable.add(Ae=>{this.setLongRenderingNeeded()})}await this.setupSceneAsync(),this._sceneHelper&&(this._configPreview&&this._scene.metadata&&this._scene.metadata.delayedMaterials&&await this._sceneHelper.loadAllDelayedMaterialsAsync(e),this._configPreview&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&this._sceneHelper.loadAllOffloadedMaterials(e),this._configPreview&&this._scene.metadata&&this._scene.metadata.originalMeshMaterials&&this._sceneHelper.unsetAllDummyMaterials(),this._sceneHelper.setupShaderMaterialsCameraPosition()),this.postSceneFileLoading(),c()})})}checkSceneShaderMaterials(e){if(e instanceof Zakeke.Scene&&e.get("shaderMaterials"))for(let n=0;n<e.get("shaderMaterials").length;n++){const s=e.get("shaderMaterials").at(n),c=s.get("name"),u=s.get("vertex"),m=s.get("fragment");if(c&&u&&m){const b={name:c,vertex:u,fragment:m};this.setupShadersStore(b)}}}checkShaderMaterial(e){if(e&&e instanceof Zakeke.Material&&e.get("shaders")){const n=e.get("shaders").get("name"),s=e.get("shaders").get("vertex"),c=e.get("shaders").get("fragment");if(n&&s&&c){const u={name:n,vertex:s,fragment:c};this.setupShadersStore(u)}}}setupShadersStore(e){if(e&&e.hasOwnProperty("name")&&e.hasOwnProperty("vertex")&&e.hasOwnProperty("fragment")){var n=e.name+"VertexShader",s=e.name+"FragmentShader";window.BABYLON.Effect.ShadersStore[n]=e.vertex,window.BABYLON.Effect.ShadersStore[s]=e.fragment}}isRealMesh(e){return this._sceneHelper?this._sceneHelper.isRealMesh(e):!1}countSceneMeshes(){return this._sceneHelper?this._sceneHelper.countSceneMeshes():0}getVisibleMeshes(){return this._sceneHelper?this._sceneHelper.getVisibleMeshes():[]}getSceneBoundingInfo(){return this._sceneHelper?this._sceneHelper.getSceneBoundingInfo():null}selectMesh(e){this.selectUnselectMesh(e,!0)}unselectMesh(e){this.selectUnselectMesh(e,!1)}unselectAllMeshes(){this._scene&&(this._scene.meshes.forEach(e=>this.unselectSingleMesh(e)),this.fireFocusAttributesEvent({groups:[]}))}selectUnselectMesh(e,n){if(this._scene&&(this._scene.meshes.forEach(c=>this.unselectSingleMesh(c)),n)){let c=m=>{this.selectSingleMesh(m);const b=m.getChildMeshes();b&&b.forEach(k=>c(k))};const u=this._scene.getMeshByID(e);if(u){c(u);const m=this.getGroupForMesh(u);m&&(this.highlightGroupForMesh(u),this.fireGroupPickedEvent({groupID:m.get("groupID")}));var s=this.getVisibleHiddenAttributesForMesh(u);this.fireFocusAttributesEvent({groups:s}),s.length>0&&this.highlightMeshes([u])}}}selectSingleMesh(e){this.setRenderingNeeded(),e.selected=!0}unselectSingleMesh(e){this.setRenderingNeeded(),e.selected=!1}selectMeshesWithMaterial(e){this.selectUnselectMeshesWithMaterial(e,!0)}unselectMeshesWithMaterial(e){this.selectUnselectMeshesWithMaterial(e,!1)}selectUnselectMeshesWithMaterial(e,n){if(this._scene&&(this._scene.meshes.forEach(s=>this.unselectSingleMesh(s)),n)){let s=c=>{c.material&&c.material.id===e&&this.selectSingleMesh(c);const u=c.getChildMeshes();u&&u.forEach(m=>{s(m)})};this._scene.meshes.forEach(c=>{s(c)})}}onPointerDown(e,n){n.hit&&n.pickedMesh?this.selectMesh(n.pickedMesh.id):this.unselectAllMeshes()}getSelectedRootMesh(){if(this._scene)for(let e=0;e<this._scene.meshes.length;e++){const n=this._scene.meshes[e];if(n.selected){const s=n.parent;if(!s||!s.selected)return n}}return null}getMeshByID(e){return this._scene?this._scene.getMeshByID(e):null}getMeshByName(e){return this._scene?this._scene.getMeshByName(e):null}getMaterialByID(e){return this._scene?this._scene.getMaterialByID(e):null}setCameraLocation(e,n=!1,s=!0){if(this._zkScene&&this._sceneHelper){const c=this._zkScene.getCameraLocation(e);if(c){const u=new window.BABYLON.Vector3(c.get("px"),c.get("py"),c.get("pz")),m=new window.BABYLON.Vector3(c.get("tx"),c.get("ty"),c.get("tz"));if(s){if(!n)this._sceneHelper.animateCamera(m,u,.5);else if(this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){const b=this._sceneHelper.computeCameraAngleOfView(m,u);this._sceneHelper.animateCameraToFinalParamters(b.alpha,b.beta,this._camera.radius,this._camera.target,.5)}}else if(!n)this._sceneHelper.moveCamera(m,u);else if(this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){const b=this._sceneHelper.computeCameraAngleOfView(m,u);this._sceneHelper.moveCameraToFinalParameters(b.alpha,b.beta,this._camera.radius,this._camera.target)}}}this.setRenderingNeeded()}adjustCamera(e){this._sceneHelper&&(e!=null&&e!=null&&typeof e=="boolean"?this._sceneHelper.adjustCamera(void 0,void 0,void 0,e):this._sceneHelper.adjustCamera(),this.setupShaderMaterialsCameraPosition(),this.setRenderingNeeded())}zoomIn(){this._sceneHelper&&this._sceneHelper.zoomIn()}zoomOut(){this._sceneHelper&&this._sceneHelper.zoomOut()}zoom(e){this._sceneHelper&&this._sceneHelper.zoom(e)}setCameraPivot(e){if(this._scene&&this._sceneHelper){const n=e?this._scene.getMeshByID(e):null;this._sceneHelper.setCameraPivot(n)}}setCameraZoomEnabled(e){this._scene&&this._sceneHelper&&(this._sceneHelper.setZoomEnabled(e),this.setRenderingNeeded())}async executeScriptAsync(e){this._sceneActionsExecutor&&(await this._sceneActionsExecutor.executeScriptAsync(e),this.notifyScriptExecution(e),this.setupShaderMaterialsCameraPosition(),this.refreshInfoPoints(),this.setLongRenderingNeeded())}async executeActionsAsync(e,n,s){this._sceneActionsExecutor&&(await this._sceneActionsExecutor.executeActionsAsync(e,n,s),this.notifyActionExecution(e,n,s),this.setupShaderMaterialsCameraPosition(),this.refreshInfoPoints(),this.setLongRenderingNeeded())}async prefetchMeshesForUnselectedOptionsAsync(e){this._sceneActionsExecutor&&await this._sceneActionsExecutor.prefetchMeshesForUnselectedOptionsAsync(e)}async prefetchDataForUnselectedOptionsAsync(e){this._sceneActionsExecutor&&await this._sceneActionsExecutor.prefetchDataForUnselectedOptionsAsync(e)}async refreshPBRMaterials(){var e,n,s,c,u;const m=(e=this._scene)==null?void 0:e.materials,b=(s=(n=this._zkScene)==null?void 0:n.get("config"))==null?void 0:s.toJSON();if(!b||!m)return;const k=(u=(c=b==null?void 0:b.general)==null?void 0:c.environmentOptions)==null?void 0:u.pbrIntensity;k&&(m==null||m.forEach(W=>{W instanceof window.BABYLON.PBRMaterial&&(W.environmentIntensity=k)}))}async refreshModel(){var e,n,s,c,u,m,b,k;const W=(e=this._scene)==null?void 0:e.meshes,ve=(s=(n=this._zkScene)==null?void 0:n.get("config"))==null?void 0:s.toJSON();if(!(!ve||!W)&&((b=this._sceneHelper)==null||b.transformEntireScene((c=ve.model)==null?void 0:c.position,(u=ve.model)==null?void 0:u.rotation,(m=ve.model)==null?void 0:m.scale,this._modelParentNode),(k=ve.model)!=null&&k.config)){const Ae=ve.model.config.doubleSided;Ae!==void 0&&(W==null||W.forEach(rt=>{rt.material instanceof window.BABYLON.PBRMaterial&&rt.material&&!(rt instanceof window.BABYLON.GroundMesh)&&(rt.material.backFaceCulling=!Ae)}))}}async refreshEnvironment(){if(this._zkScene&&this._scene){const e=this._zkScene.getOrCreateGeneralConfig().get("environmentTexture"),n=this._zkScene.getOrCreateGeneralConfig().get("environmentOptions");e&&n&&!this._scene.textures.some(s=>s.url===e)&&await this.setSceneEnvironmentTexture(e,void 0,void 0,void 0,void 0,n),(!this._environmentManager||this._environmentManager.scene!=this._scene||this._environmentManager.isHologram!=this._isHologram)&&(this._environmentManager=new Ih(this._zkScene,this._scene,this._isHologram)),this._environmentManager.update(),this.setLongRenderingNeeded(),this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera&&(this._autoRender=this._camera.useAutoRotationBehavior),this.setRenderingNeeded()}}highlightMeshes(e){if(!e||Object.prototype.toString.call(e)!=="[object Array]"||this._highlightSize==0)return;const n=this._highlightBlurHorizontalSize,s=this._highlightBlurVerticalSize,c=b=>{b.isVisible&&this._highlightLayer&&this._highlightLayer.addMesh(b,window.BABYLON.Color3.FromHexString(this._highlightColor)),b.getChildMeshes().forEach(k=>{k instanceof window.BABYLON.Mesh&&c(k)})},u=b=>{this._highlightLayer&&this._highlightLayer.removeMesh(b),b.getChildMeshes().forEach(k=>{k instanceof window.BABYLON.Mesh&&u(k)})},m=()=>{if(this._highlightAnimationID&&(clearInterval(this._highlightAnimationID),this._highlightAnimationID=null),this._highlightCurrentMeshes&&this._highlightCurrentMeshes.forEach(b=>{b instanceof window.BABYLON.Mesh&&u(b)}),this._highlightLayer&&(this._highlightLayer.blurHorizontalSize=n,this._highlightLayer.blurVerticalSize=s),this._highlightNextMeshes){const b=this._highlightNextMeshes;this._highlightNextMeshes=[],this.highlightMeshes(b)}};if(this._highlightAnimationID){this._highlightNextMeshes=e,m();return}if(this._highlightLayer||this.createHighlightLayer(),this._highlightLayer){this._highlightCurrentMeshes=e,e.forEach(rt=>{rt instanceof window.BABYLON.Mesh&&c(rt)});const b=800,k=20,W=k/b;let ve=n,Ae=s;this._highlightAnimationID=window.setInterval(()=>{this._highlightLayer&&(ve-=n*W,Ae-=s*W,ve=Math.max(0,ve),Ae=Math.max(0,Ae),ve>=0&&(this._highlightLayer.blurHorizontalSize=ve),Ae>=0&&(this._highlightLayer.blurVerticalSize=Ae),(ve==0||Ae==0)&&m(),this.setRenderingNeeded())},k),this.setRenderingNeeded()}}highlightGroupForMesh(e){const n=this.getGroupForMesh(e);this.highlightGroup(n)}highlightGroupByID(e){if(this._zkModel){const n=this._zkModel.get("attributeGroups").findWhere({groupID:e});n?this.highlightGroup(n):this.highlightGroup(null)}}highlightGroup(e){if(this._zkScene&&this._scene&&e){const s=e.get("meshSelector");if(s){var n=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,s,MPlaza.SceneElementType.Mesh);this.highlightMeshes(n)}}}getGroupForMesh(e){if(this._zkModel&&this._zkScene&&this._scene&&e&&this._sceneHelper){const n=this._zkModel.get("attributeGroups");for(let s=0;s<n.length;s++){const c=n.at(s),u=c.get("meshSelector");if(u){const m=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,u,MPlaza.SceneElementType.Mesh);for(let b=0;b<m.length;b++){let k=m[b];if(e.id==k.id||this._sceneHelper.meshHasParent(e.id,k.id))return c}}}}return null}highlightAttributeByID(e){if(this._zkModel){const n=this._zkModel.get("attributes").findWhere({attributeID:e});n?this.highlightAttribute(n):this.highlightAttribute(null)}}highlightAttribute(e){if(this._zkScene&&this._scene&&e){const s=e.get("meshSelector");if(s){var n=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,s,MPlaza.SceneElementType.Mesh);this.highlightMeshes(n)}}}getVisibleHiddenAttributesForMesh(e){const n=[],s=u=>{let m=n.find(b=>b.groupId==u);return m||(m={groupId:u,visibleAttributes:[],hiddenAttributes:[]},n.push(m)),m};if(this._zkModel&&this._zkScene&&this._scene&&e){const u=this._zkModel.get("attributes");for(let m=0;m<u.length;m++){const b=u.at(m),k=b.get("attributeID"),W=b.get("meshSelector");if(W){const ve=s(b.get("groupID"));var c=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,W,MPlaza.SceneElementType.Mesh);c.find(Ae=>this._sceneHelper?e.id==Ae.id||this._sceneHelper.meshHasParent(e.id,Ae.id):!1)?ve.visibleAttributes.push(k):ve.hiddenAttributes.push(k)}}}return n.filter(u=>u.visibleAttributes.length>0)}fireGroupPickedEvent(e){for(let n=0;n<this._groupPickedListeners.length;n++)this._groupPickedListeners[n](e)}addGroupPickedListener(e){this._groupPickedListeners.push(e)}fireFocusAttributesEvent(e){for(let n=0;n<this._focusAttributesListeners.length;n++)this._focusAttributesListeners[n](e)}addFocusAttributesListener(e){this._focusAttributesListeners.push(e)}addNotifyMessageListener(e){this._designNotifyMessageListeners.push(e),this._sceneDesignManager&&this._sceneDesignManager.addNotifyMessageListener(e)}addRemoveMessageListener(e){this._designRemoveMessageListeners.push(e),this._sceneDesignManager&&this._sceneDesignManager.addRemoveMessageListener(e)}setEventMessages(e){this._designEventMessages=e,this._sceneDesignManager&&this._sceneDesignManager.setEventMessages(e)}addInfoPointPickedListener(e){this._infoPointPickedListeners.push(e),this._infoPointsManager&&this._infoPointsManager.addInfoPointPickedListener(e)}addInfoPointContentShownListener(e){this._infoPointContentShownListeners.push(e),this._infoPointsManager&&this._infoPointsManager.addInfoPointContentShownListener(e)}addInfoPointContentHiddenListener(e){this._infoPointContentHiddenListeners.push(e),this._infoPointsManager&&this._infoPointsManager.addInfoPointContentHiddenListener(e)}addBeginAssetsLoadingListener(e){this._beginAssetsLoadingListeners.push(e)}fireBeginAssetsLoadingEvent(){Logger.info("Begin Assets Loading");for(let e=0;e<this._beginAssetsLoadingListeners.length;++e)this._beginAssetsLoadingListeners[e]()}addEndAssetsLoadingListener(e){this._endAssetsLoadingListeners.push(e)}fireEndAssetsLoadingEvent(){Logger.info("End Assets Loading");for(let e=0;e<this._endAssetsLoadingListeners.length;++e)this._endAssetsLoadingListeners[e]()}addNextSceneMeshesLoadedListeners(e){this._nextSceneMeshesLoadedListeners.push(e)}async fireNextSceneMeshesLoadedEvent(e,n){let s=[];for(let c=0;c<this._nextSceneMeshesLoadedListeners.length;++c)s.push(this._nextSceneMeshesLoadedListeners[c](e,n));await Promise.all(s)}addNextSceneTextureLoadedListeners(e){this._nextSceneTexturesLoadedListeners.push(e)}async fireNextSceneTextureLoadedEvent(e,n){let s=[];for(let c=0;c<this._nextSceneTexturesLoadedListeners.length;++c)s.push(this._nextSceneTexturesLoadedListeners[c](e,n));await Promise.all(s)}addBeginSceneLoadingListener(e){this._beginAssetsLoadingListeners.push(e)}fireBeginSceneLoadingEvent(){Logger.info("Begin Scene Loading");for(let e=0;e<this._beginAssetsLoadingListeners.length;++e)this._beginAssetsLoadingListeners[e]()}addEndSceneLoadingListener(e){this._endAssetsLoadingListeners.push(e)}fireEndSceneLoadingEvent(){Logger.info("End Scene Loading");for(let e=0;e<this._endAssetsLoadingListeners.length;++e)this._endAssetsLoadingListeners[e]()}async getSceneScreenshotAsync(e,n){return this._sceneHelper?(this.setRenderingNeeded(),await this._sceneHelper.takeScreenshotAsync(e,n)):null}async getSceneContentScreenshotAsync(e,n,s=0,c,u,m){if(!this._sceneHelper||!this.scene||!this.zkModel||!this.zkScene)return null;this.preSceneContentScreenshot(),this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null),this.setRenderingNeeded();let b="";if(u)b=await this._sceneHelper.takeContentScreenshotAsync(e,n);else{const W=this._canvas;if(W){const ve=W.width,Ae=W.height;W.width=e,W.height=n;const rt=this.scene.activeCamera.position.clone(),re=this.scene.activeCamera.target.clone(),mt=m?{position:new window.BABYLON.Vector3(m.get("px"),m.get("py"),m.get("pz")),target:new window.BABYLON.Vector3(m.get("tx"),m.get("ty"),m.get("tz"))}:{position:this._scene.activeCamera.position,target:this._scene.activeCamera.target};this._scene.activeCamera.position=mt.position,this._scene.activeCamera.target=mt.target,this._scene.render(),b=await this._sceneHelper.takeContentScreenshotAsync(e,n),this._scene.activeCamera.position=rt,this._scene.activeCamera.target=re,W.width=ve,W.height=Ae}}console.log("senza Utils");let k=await Oh(b);if(k||(console.error("Failed trimming image.",b),k=b),k=await Dp(k,e,n,s),!k)throw new Error("Failed resizing image.");return this.refreshEnvironment(),this.postSceneContentScreenshot(),k}preSceneContentScreenshot(){}postSceneContentScreenshot(){}preSceneMaterialScreenshot(){this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null)}postSceneMaterialScreenshot(){this.refreshEnvironment()}async getMaterialScreenshotAsync(e,n,s){if(!this._scene||!this._sceneHelper)return null;this.preSceneMaterialScreenshot();let c=null;const u=await this.getSceneRootUrl();if(u){const m=await tl.getPreviewsAsync(this._scene,u,[e],{width:n,height:s,crop:!0},!1),b=Object.keys(m.previewFiles);b.length==1&&(c=m.previewFiles[b[0]])}else{const m=await this._sceneHelper.takeMaterialScreenshotAsync(e,n,s);console.log("0 TRIM IMAGE",m);const b=await Oh(m);b&&(c=b)}return this.postSceneMaterialScreenshot(),c}clearListeners(){this._groupPickedListeners=[],this._focusAttributesListeners=[]}async renderDesignAsync(e,n=!0){if(this._scene&&this._zkScene&&this._zkModel&&e){if(this._sceneDesignManager&&this._sceneDesignManager.isForModels(this._scene,this._zkModel,e))this._sceneDesignManager.showDesign=n,this._sceneDesignManager.rotation=this._currentRotation,await this._sceneDesignManager.refreshAsync();else{this.emptyArFileCache(),this._sceneDesignManager&&(this._sceneDesignManager.dispose(),this._sceneDesignManager=null),this._sceneDesignManager=new Vl(this._scene,this._zkScene,this._zkModel,e,n),this._sceneDesignManager.addRenderingNeededListener(()=>{this.setLongRenderingNeeded(),this.notifyDesignChanged(e)}),this._sceneDesignManager.setCustomizerGrids(this._grids),this._sceneDesignManager.setEventMessages(this._designEventMessages);for(const s of this._designNotifyMessageListeners)this._sceneDesignManager.addNotifyMessageListener(s);for(const s of this._designRemoveMessageListeners)this._sceneDesignManager.addRemoveMessageListener(s);await this._sceneDesignManager.refreshAsync()}this.updateHighlightLayerExcludedDesignMeshes(),this.setLongRenderingNeeded()}}resetDesign(){this._scene&&this._zkScene&&this._zkModel&&(this._sceneDesignManager&&(this._sceneDesignManager.dispose(),this._sceneDesignManager=null),this.updateHighlightLayerExcludedDesignMeshes(),this.setLongRenderingNeeded())}clearMeshDesignManagers(){this._sceneDesignManager&&this._sceneDesignManager.clearMeshDesignManagers()}async refreshMeshesDesignAsync(e,n){e&&Object.prototype.toString.call(e)==="[object Array]"&&e.forEach(async s=>await this.refreshMeshDesignAsync(s.id,void 0,n||void 0))}async refreshMeshDesignAsync(e,n=0,s){var c;(c=this._sceneDesignManager)==null||c.refreshMeshDesignAsync(e,n,s)}setCustomizerGrids(e){var n;this._grids=e,(n=this._sceneDesignManager)==null||n.setCustomizerGrids(e)}removeDesignItem(e){var n;(n=this._sceneDesignManager)==null||n.removeItem(e)}addDesignItemText(e,n){var s;return(s=this._sceneDesignManager)==null?void 0:s.addItemText(e,n)}async addDesignItemImage(e,n){var s;await((s=this._sceneDesignManager)==null?void 0:s.addItemImage(e,n))}getDesignItemsInfo(){var e;return((e=this._sceneDesignManager)==null?void 0:e.getItemsInfo())||[]}setDesignItemText(e,n){var s;(s=this._sceneDesignManager)==null||s.setItemText(e,n)}setDesignItemBold(e,n){var s;(s=this._sceneDesignManager)==null||s.setItemBold(e,n)}setDesignItemItalic(e,n){var s;(s=this._sceneDesignManager)==null||s.setItemItalic(e,n)}setDesignItemColor(e,n){var s;(s=this._sceneDesignManager)==null||s.setItemColor(e,n)}setDesignItemFontFamily(e,n){var s;(s=this._sceneDesignManager)==null||s.setItemFontFamily(e,n)}async setDesignItemImage(e,n){var s;await((s=this._sceneDesignManager)==null?void 0:s.setItemImage(e,n))}setItemTextOnPath(e,n,s){var c;(c=this._sceneDesignManager)==null||c.setItemTextOnPath(e,n,s)}removeDesignItemImage(e){var n;(n=this._sceneDesignManager)==null||n.removeItemImage(e)}setDesignVisibility(e,n){var s;(s=this._sceneDesignManager)==null||s.setDesignVisibility(e,n)}setupShaderMaterialsCameraPosition(){if(this._scene)for(let e=0;e<this._scene.materials.length;e++){const n=this._scene.materials[e];this.setupShaderMaterialCameraPosition(n)}}setupShaderMaterialCameraPosition(e){this._scene&&this._scene.activeCamera&&e&&e instanceof window.BABYLON.ShaderMaterial&&e.setVector3("cameraPosition",this._scene.activeCamera.position)}setMeshLocation(e){this._meshLocationsManager&&this._meshLocationsManager.setMeshLocationByID(e)}async explodeMeshes(){this._meshLocationsManager&&await this._meshLocationsManager.explodeMeshes()}async collapseMeshes(){this._meshLocationsManager&&await this._meshLocationsManager.collapseMeshes()}dracoDecodingFunction(e,n,s){this.decodeDracoFile(e,n,s)}decodeDracoFile(e,n,s){var c=new Date().getTime(),u=new Uint8Array(n),m=msgpack.decode(u);this.dracoCompression.decodeMeshAsync(m.data,m.attributes).then(function(b){let k={};b&&(b.indices&&(k.indices=b.indices),b.positions&&(k.positions=b.positions),b.normals&&(k.normals=b.normals),b.tangents&&(k.tangents=b.tangents),b.uvs&&(k.uvs=b.uvs),b.uvs2&&(k.uv2s=b.uvs2),b.uvs3&&(k.uv3s=b.uvs3),b.uvs4&&(k.uv4s=b.uvs4),b.uvs5&&(k.uv5s=b.uvs5),b.uvs6&&(k.uv6s=b.uvs6));var W=new Date,ve=W.getTime(),Ae=ve-c,rt=W.getHours()+":"+W.getMinutes()+":"+W.getSeconds()+"."+W.getMilliseconds();console.log("Draco Decoding ["+rt+"] - "+e+"	"+n.byteLength+"	"+Ae+" ms"),s&&s(k)})}exportSceneToBabylon(){return!this._zkScene||!this._sceneHelper?null:this._sceneHelper.exportSceneToBabylon()}exportVisibleMeshesToBabylon(){return!this._zkScene||!this._sceneHelper?null:this._sceneHelper.exportVisibleMeshesToBabylon()}async exportMeshesForTyOnToBabylon(){return!this._zkScene||!this._sceneHelper?null:await this._sceneHelper.exportMeshesForTyOnToBabylon()}async exportMeshToBabylon(e){if(!this._scene||!this._zkScene||!this._sceneHelper)return null;const n=this._scene.getMeshById(e);return n?await this._sceneHelper.exportMeshToBabylon(n):null}async downloadMeshToBabylon(e){if(!this._scene||!this._zkScene||!this._sceneHelper)return;const n=this._scene.getMeshById(e);n&&await this._sceneHelper.downloadMeshBabylonAsync(n)}async saveSceneOnDatabaseAsync(e){const n=this.exportSceneToBabylon();if(n){const s=new nl;await s.openAsync(),await s.saveFileAsync(e,n)}}async saveVisibleMeshesOnDatabaseAsync(e){const n=await this.exportMeshesForTyOnToBabylon();if(n){const s=new nl;await s.openAsync(),await s.saveFileAsync(e,n)}}async saveGlbOnDatabaseAsync(e){let n=null,s="";if(n=await this.exportSceneToLocalGLBAsync(),n){const c=await n.arrayBuffer(),u=Math.random().toString(36).substring(7),m=new FormData;m.append("blob",new Blob([c]),`model_${u}.glb`);try{const b=await fetch(Zakeke.config.baseApiUrl+"tryonassetupload/asset-upload",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer "+window.token},body:m});if(b.status===200)return s=await b.text(),s=s.replace(/^"|"$/g,"").substring(s.indexOf("fileUrl=")+8-1),console.log("solo parametro restituito da asset-upload",s),s;console.error("Error uploading model",b)}catch(b){console.error("Error uploading model",b)}}return s}getArFileUrlCacheKey(e,n,s="usdz"){let c="scene_"+e;if(n&&(c+="_code_"+n),this._sceneDesignManager){var u=this._sceneDesignManager.getDesignItemsJson();if(u){var m=CryptoJS.SHA1(u).toString();c+="_design_"+this._sceneDesignManager.getDesignID()+"_"+m}}return c+="_"+s,c}getCachedArFileUrl(e,n,s="usdz"){var c=this.getArFileUrlCacheKey(e,n,s);return this._arFileUrls.hasOwnProperty(c)?this._arFileUrls[c]:null}cacheArFileUrl(e,n,s,c){if(c){var u=this.getArFileUrlCacheKey(e,n||void 0,s);this._arFileUrls[u]=c}}async exportMeshToGLBBlob(e){var n,s,c,u;if(!this._scene||!this._zkScene||!this._sceneHelper)return null;let m=null;const b=this._zkScene.get("rootUrl");b&&(m=b),await((n=this._sceneDesignManager)==null?void 0:n.changeToRasterizedTextures()),(s=this._sceneDesignManager)==null||s.expandCanvasMeshes(.05);let k=await this._sceneHelper.exportMeshToGLBBlob(m,e);return console.log("dopo l'export faccio rientrare l'expand",k),(c=this._sceneDesignManager)==null||c.expandCanvasMeshes(-.05),await((u=this._sceneDesignManager)==null?void 0:u.changeToDynamicTextures()),k}async exportSceneToUsdzAsync(e,n,s){var c,u,m,b;if(!this._zkScene||!this._sceneHelper)return null;const k="usdz";let W=null;if(e&&(!this._sceneDesignManager||s)&&(W=this.getCachedArFileUrl(e,n,k)),W)return W;let ve=null,Ae=null;const rt=this._zkScene.get("name");rt&&(ve=rt);const re=this._zkScene.get("rootUrl");return re&&(Ae=re),await((c=this._sceneDesignManager)==null?void 0:c.changeToRasterizedTextures()),this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),W=await this._sceneHelper.exportSceneToUsdzAsync(ve,Ae,this._sceneDesignManager&&!s?void 0:e,this._sceneDesignManager&&!s?void 0:n,((u=this.zkScene)==null?void 0:u.getARMeshSize())??null,this.getDAMMainMesh()??null,(m=this._zkScene)==null?void 0:m.getARScale()),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),await((b=this._sceneDesignManager)==null?void 0:b.changeToDynamicTextures()),W&&e&&!this._sceneDesignManager&&this.cacheArFileUrl(e,n||null,k,W),W}async exportMeshToUsdzAsync(e){var n,s,c;const u=this.getMeshByID(e);if(u&&this._zkScene&&this._sceneHelper){let m=null;const b=this._zkScene.get("rootUrl");b&&(m=b),await((n=this._sceneDesignManager)==null?void 0:n.changeToRasterizedTextures());const k=await this._sceneHelper.exportMeshToUsdzAsync(m,u,((s=this.zkScene)==null?void 0:s.getARMeshSize())??null,this.getDAMMainMesh()??null,this.getARScale());return await((c=this._sceneDesignManager)==null?void 0:c.changeToDynamicTextures()),Logger.info("USDZ: "+k),k}return null}async exportSceneToRemoteGlTFAsync(e,n,s){var c,u,m,b;if(!this._sceneHelper)return null;const k="glTF";let W=null;if(e&&(!this._sceneDesignManager||s)&&(W=this.getCachedArFileUrl(e,n,k)),W)return W;let ve=null,Ae=null;if(this._zkScene){const rt=this._zkScene.get("name");rt&&(ve=rt);const re=this._zkScene.get("rootUrl");re&&(Ae=re)}return await((c=this._sceneDesignManager)==null?void 0:c.changeToRasterizedTextures()),this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),W=await this._sceneHelper.exportSceneToRemoteGlTFAsync(ve,Ae,this._sceneDesignManager&&!s?void 0:e,this._sceneDesignManager&&!s?void 0:n,((u=this.zkScene)==null?void 0:u.getARMeshSize())??null,this.getDAMMainMesh()??null,(m=this._zkScene)==null?void 0:m.getARScale()),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),await((b=this._sceneDesignManager)==null?void 0:b.changeToDynamicTextures()),W&&e&&!this._sceneDesignManager&&this.cacheArFileUrl(e,n||null,k,W),Logger.info("GlTF: "+W),W}async exportMeshToRemoteGlTFAsync(e){var n,s,c;const u=this.getMeshByID(e);if(u&&this._zkScene&&this._sceneHelper){let m=null;const b=this._zkScene.get("rootUrl");b&&(m=b),await((n=this._sceneDesignManager)==null?void 0:n.changeToRasterizedTextures());const k=await this._sceneHelper.exportMeshToRemoteGlTFAsync(m,u,((s=this.zkScene)==null?void 0:s.getARMeshSize())??null,this.getDAMMainMesh()??null,this.getARScale());return Logger.info("GlTF: "+k),await((c=this._sceneDesignManager)==null?void 0:c.changeToDynamicTextures()),k}return null}async exportSceneToRemoteGLBAsync(e,n,s){var c,u,m,b;if(!this._sceneHelper)return null;const k="glb";let W=null;if(e&&(!this._sceneDesignManager||s)&&(W=this.getCachedArFileUrl(e,n,k)),W)return W;let ve=null,Ae=null;if(this._zkScene){const rt=this._zkScene.get("name");rt&&(ve=rt);const re=this._zkScene.get("rootUrl");re&&(Ae=re)}return await((c=this._sceneDesignManager)==null?void 0:c.changeToRasterizedTextures()),this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),W=await this._sceneHelper.exportSceneToRemoteGLBAsync(ve,Ae,this._sceneDesignManager&&!s?void 0:e,this._sceneDesignManager&&!s?void 0:n,((u=this.zkScene)==null?void 0:u.getARMeshSize())??null,this.getDAMMainMesh()??null,(m=this._zkScene)==null?void 0:m.getARScale()),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),await((b=this._sceneDesignManager)==null?void 0:b.changeToDynamicTextures()),W&&e&&!this._sceneDesignManager&&this.cacheArFileUrl(e,n||null,k,W),Logger.info("GLB: "+W),W}async exportMeshToRemoteGLBAsync(e){var n,s,c;const u=this.getMeshByID(e);if(u&&this._zkScene&&this._sceneHelper){let m=null;const b=this._zkScene.get("rootUrl");b&&(m=b),await((n=this._sceneDesignManager)==null?void 0:n.changeToRasterizedTextures());const k=await this._sceneHelper.exportMeshToRemoteGLBAsync(m,u,((s=this.zkScene)==null?void 0:s.getARMeshSize())??null,this.getDAMMainMesh()??null,this.getARScale());return Logger.info("GlTF: "+k),await((c=this._sceneDesignManager)==null?void 0:c.changeToDynamicTextures()),k}return null}async exportSceneToARAsync(e,n){var s,c;let u=[];if(!this._sceneHelper)return u;let m=null,b=null;if(this._zkScene){const k=this._zkScene.get("name");k&&(m=k);const W=this._zkScene.get("rootUrl");W&&(b=W)}return await((s=this._sceneDesignManager)==null?void 0:s.changeToRasterizedTextures()),this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),u=await this._sceneHelper.exportSceneToARMultiformatAsync(m,b,["usdz","glb"],e,n),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),await((c=this._sceneDesignManager)==null?void 0:c.changeToDynamicTextures()),u}async exportMeshToARAsync(e){var n,s,c;let u=[];const m=this.getMeshByID(e);if(m&&this._zkScene&&this._sceneHelper){let b=null;const k=this._zkScene.get("rootUrl");k&&(b=k),await((n=this._sceneDesignManager)==null?void 0:n.changeToRasterizedTextures()),u=await this._sceneHelper.exportMeshToARMultiformatAsync(b,m,["usdz","glb"],((s=this.zkScene)==null?void 0:s.getARMeshSize())??null,this.getDAMMainMesh()??null,this.getARScale()),await((c=this._sceneDesignManager)==null?void 0:c.changeToDynamicTextures())}return u}isAREnabled(){if(!this._zkScene)return!1;let e=this._zkScene.getAREnabled();return e!=null&&e&&this._sceneHelper!=null&&this._sceneHelper.checkMaterialsForAR()}async exportSceneToLocalGLBAsync(){var e,n;await((e=this._sceneDesignManager)==null?void 0:e.changeToRasterizedTextures()),this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes();let s=null;return this._sceneHelper&&(s=await this._sceneHelper.exportSceneToLocalGLBBlobAsync()),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),await((n=this._sceneDesignManager)==null?void 0:n.changeToDynamicTextures()),s}async downloadSceneLocalGLBAsync(){this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),this._sceneHelper&&await this._sceneHelper.downloadSceneLocalGLBAsync(),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes()}async exportSceneToLocalUSDZAsync(){var e,n;await((e=this._sceneDesignManager)==null?void 0:e.changeToRasterizedTextures()),this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes();let s=null;return this._sceneHelper&&(s=await this._sceneHelper.exportSceneToLocalUSDZUrlAsync()),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),await((n=this._sceneDesignManager)==null?void 0:n.changeToDynamicTextures()),s}async downloadSceneLocalUSDZAsync(){this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),this._sceneHelper&&await this._sceneHelper.downloadSceneLocalUSDZAsync(),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes()}getSceneRootUrl(){return new Promise((e,n)=>{let s=null;this._zkScene?(s=this._zkScene.get("rootUrl")||null,s?e(s):jQuery.ajax({url:this._zkScene.getSceneRootUrlApiUrl(),type:"GET",success:function(c){s=c,e(s)},error:function(c,u,m){n(m)}})):e(s)})}isTryOnMeshVisibleEnabledToShow(){const e=this.getVisibleMeshes();for(const n of e){const s=n.getChildren();if(s.length>0&&s.find(c=>this._sceneHelper.isTryOnEnabledForMesh(c))&&this._sceneHelper.isTryOnEnabledForMesh(n))return!0}return!1}getTryOnMeshVisible(){const e=this.getVisibleMeshes();for(let n of e){const s=n.getChildren();if(s.length>0&&!n.parent&&s.find(c=>{var u;return(u=this._sceneHelper)==null?void 0:u.isTryOnEnabledForMesh(c)}))return n}return null}getFrameDAMSettings(){if(this._zkScene){const e=this._zkScene.getFrameDAMSettings()??null;if(e)return JSON.parse(e)}return null}getMeshFineTuningData(e){const n=typeof e=="string"?this.getMeshByID(e):e;return n&&n.metadata&&n.metadata.tryOnFineTuningSettings?n.metadata.tryOnFineTuningSettings:null}getDAMFineTuningData(){var e,n;return(e=this.zkScene)!=null&&e.getFrameDAMSettings()&&((n=this.getFrameDAMSettings())==null?void 0:n.finetuning)||null}getTryOnFineTuningMeshVisible(){var e;const n=this.getVisibleMeshes();for(const s of n){const c=s.getChildren();if(c.length>0&&c.find(u=>{var m;return(m=this._sceneHelper)==null?void 0:m.isTryOnEnabledForMesh(u)})&&(e=s==null?void 0:s.metadata)!=null&&e.tryOnFineTuningSettings)return s}return null}refreshInfoPoints(){if(!(this._zkScene&&this._zkScene.getInfoPointsEnabled()&&this.canShowInfoPoints)){this.disposeInfoPointsManager(),this.setLongRenderingNeeded();return}const e=this.getInfoPointsManagerStyle();let n=null;this._infoPointsManager||this._scene&&this._zkScene&&(this._infoPointsManager=new _o(this._zkScene,this._scene,e),this._infoPointPickedListeners&&this._infoPointPickedListeners.length>0&&this._infoPointsManager.addInfoPointPickedListenerRange(this._infoPointPickedListeners),this._infoPointContentShownListeners&&this._infoPointContentShownListeners.length>0&&this._infoPointsManager.addInfoPointContentShownListenerRange(this._infoPointContentShownListeners),this._infoPointContentHiddenListeners&&this._infoPointContentHiddenListeners.length>0&&this._infoPointsManager.addInfoPointContentHiddenListenerRange(this._infoPointContentHiddenListeners),this._infoPointsManager.onBeforeShowImages=()=>{n===null&&(n=this.antialias),this.antialias=!1,this.disableAntialiasing()},this._infoPointsManager.onAfterShowImages=()=>{this.antialias=n,n=null,this.enableAntialiasing(),this.setLongRenderingNeeded()},this._infoPointsManager.addRenderingNeededListener(()=>this.setRenderingNeeded())),this._infoPointsManager&&(this.updateInfoPointsManagerStyle(),this._infoPointsManager.canShowInfoPointsContent=this.canShowInfoPointsContent,this._infoPointsManager.refresh()),this.setLongRenderingNeeded()}getInfoPointsManagerStyle(){const e=this._infoPointsManagerStyle?this._infoPointsManagerStyle:{};if(this._zkScene){const n=this._zkScene.getInfoPointsStyleConfig();n&&(e.infoPointsStyle||(e.infoPointsStyle={}),n.get("borderColor")&&(e.infoPointsStyle.borderColor=n.get("borderColor")),n.get("innerPointColor")&&(e.infoPointsStyle.innerPointColor=n.get("innerPointColor")),n.get("color")&&(e.infoPointsStyle.color=n.get("color")),n.get("highlightColor")&&(e.infoPointsStyle.highlightColor=n.get("highlightColor")))}return e}updateInfoPointsManagerStyle(){if(this._infoPointsManager){const e=this.getInfoPointsManagerStyle();this._infoPointsManager.applyStyle(e)}}showInfoPoints(){this._infoPointsManager&&(this._infoPointsManager.showInfoPoints(),this.render(),this.setRenderingNeeded())}hideInfoPoints(){this._infoPointsManager&&(this._infoPointsManager.hideInfoPoints(),this.render(),this.setRenderingNeeded())}async reloadAllLoadingErrorTexturesAsync(){if(this._zkScene&&this._sceneHelper){const e=this._zkScene.get("rootUrl");e&&await this._sceneHelper.reloadAllLoadingErrorTexturesAsync(e)}}async reloadMaterialLoadingErrorTexturesAsync(e){if(this._zkScene&&this._sceneHelper){const n=this._zkScene.get("rootUrl");n&&await this._sceneHelper.reloadMaterialLoadingErrorTexturesAsync(n,e)}}async reloadLoadingErrorTextureAsync(e){if(this._zkScene&&this._sceneHelper){const n=this._zkScene.get("rootUrl");n&&await this._sceneHelper.reloadLoadingErrorTextureAsync(n,e)}}isTextureLoadingError(e){return this._sceneHelper?this._sceneHelper.isTextureLoadingError(e):!1}materialHasLoadingErrorTextues(e){return this._sceneHelper?this._sceneHelper.materialHasLoadingErrorTextues(e):!1}notifyCameraMovement(){if(this._isHologramSource&&this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){let e=this.getOrCreateBroadcastChannel();if(!e)return;e.postMessage({type:"camera-movement",target:{x:this._camera.target.x,y:this._camera.target.y,z:this._camera.target.z},alpha:this._camera.alpha,beta:this._camera.beta,radius:this._camera.radius})}}notifyScriptExecution(e){if(this._isHologramSource){const n=e.map(c=>({attributeID:c.attributeID,selectedValue:c.selectedValue,actions:c.actions.map(u=>u.toJSON())}));let s=this.getOrCreateBroadcastChannel();if(!s)return;s.postMessage({type:"script-execution",script:n})}}notifyDesignChanged(e){if(this._isHologramSource){let n=this.getOrCreateBroadcastChannel();if(!n)return;n.postMessage({type:"design-changed",design:e.toJSON()})}}notifyActionExecution(e,n,s){this.notifyScriptExecution([{attributeID:e,selectedValue:n,actions:s}])}attachBroadcastChannelEventHandlers(){if(this._isHologram&&!this._isHologramSource){var e=this.getOrCreateBroadcastChannel();if(!e)return;e.onmessage=n=>this.onBroadcastMessageReceived(n)}}detachBroadcastChannelEventHandlers(){this._broadcastChannel&&(this._broadcastChannel.onmessage=null)}onBroadcastMessageReceived(e){this._isHologram&&e&&e.data&&e.data.type&&(e.data.type==="camera-movement"?this.processCameraMovementEvent(e):e.data.type==="script-execution"?this.processScriptExecution(e):e.data.type==="design-changed"&&this.processDesignChanged(e))}processCameraMovementEvent(e){this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera&&e&&e.data&&(this._camera.target=new window.BABYLON.Vector3(e.data.target.x,e.data.target.y,e.data.target.z),this._camera.alpha=e.data.alpha,this._camera.beta=e.data.beta,this._camera.radius=e.data.radius,this.setRenderingNeeded())}processScriptExecution(e){if(e&&e.data&&e.data.script&&Object.prototype.toString.call(e.data.script)==="[object Array]"){var n=e.data.script.map(s=>({attributeID:s.attributeID,selectedValue:s.selectedValue,actions:s.actions.map(c=>new MPlaza.AttributeSceneAction(c))}));this.executeScriptAsync(n)}}processDesignChanged(e){if(e&&e.data&&e.data.design){let n=new MPlaza.Design(e.data.design);this.renderDesignAsync(n)}}loadSceneConfig(e){const n=new Zakeke.SceneConfig(e);if(this._zkScene&&!this._zkScene.get("config"))this._zkScene.set("config",n);else{const s=new Zakeke.Scene;s.set("config",n),this._zkScene=s}this.checkSceneShaderMaterials(this._zkScene)}updateFromConfig(e,n){var s,c;if(this._zkScene){let u=(c=(s=this._zkScene)==null?void 0:s.get("config"))==null?void 0:c.toJSON();const m=Rs.merge(u,e),b=new Zakeke.SceneConfig(m);if(this._zkScene.set("config",b),(n==null?void 0:n.preventRefresh)===!0)return;this.setupSceneAsync((n==null?void 0:n.updateCamera)===!0)}}refreshCameraPosition(){var e,n,s;const c=(n=(e=this._zkScene)==null?void 0:e.get("config"))==null?void 0:n.toJSON(),u=c==null?void 0:c.camera;u&&u!=null&&u.position&&((s=this._sceneHelper)==null||s.setUpCameraByOptions(u.position))}setupDebugGUI(){var e;const n=(e=this._zkScene)==null?void 0:e.get("config"),s=c=>{this.updateFromConfig(c,{updateCamera:!1})};this._createGui=new tm(n.toJSON(),c=>s(c),this._sceneHelper),this._createGui.setupGui(this._scene)}async setUpEmptyScene(e){this._scene&&(e&&this.loadSceneConfig(e),await this.setupSceneAsync(),this.setRenderingNeeded())}async loadFromSceneUrl(e,n,s){await this.loadSceneFromRemoteFilesAsync(e,n),s&&this.loadSceneConfig(s),await this.setupSceneAsync(),this.setRenderingNeeded()}async loadFromGlbUrl(e,n){var s,c,u;const m=((s=n==null?void 0:n.camera)==null?void 0:s.animateIntro)!==void 0?(c=n==null?void 0:n.camera)==null?void 0:c.animateIntro:!0;await((u=this._sceneHelper)==null?void 0:u.importMeshesFromUrlAsync(e,null,void 0,m,".glb",this._isViewer)),n&&this.loadSceneConfig(n),await this.setupSceneAsync(),this.updateView(!1,!0)}async loadFromFile(e,n){var s,c;((s=n==null?void 0:n.camera)==null?void 0:s.animateIntro)!==void 0&&((c=n==null?void 0:n.camera)==null||c.animateIntro);try{await window.BABYLON.SceneLoader.AppendAsync(e.name,e,this._scene)}catch(u){console.log("dropObjectIntoScene: ",u)}n&&this.loadSceneConfig(n),await this.setupSceneAsync(),this.updateView(!0,!0),this.setRenderingNeeded()}async showResizableCanvasModel(e){if(this._scene&&this._zkScene&&this._zkModel&&this._sceneHelper){const n=await this._sceneHelper.showResizableCanvas(e.width,e.height,e.depth,e.borderRadius,e.type,e.borderColor,e.columns,e.rows,e.ppcm);if(!n)return{meshes:[],matrixJson:""};const s=new jh.PaperScope;s.setup(new s.Size(1,1));const c=new s.Matrix,u=Tl.DEFAULT_SIZE;c.translate(u/2,u/2),c.scale(u/e.width,u/e.height);const m=JSON.stringify(c.values);return{meshes:n,matrixJson:m}}return{meshes:[],matrixJson:""}}async showResizableCanvasPerCurrentSide(e){console.log("showResizableCanvasPerCurrentSide",e);const n=`resizable-canvas-${e.width}-${e.height}-${e.colorId}-${e.currentSideId}-${e.columns}-${e.rows}-${e.type}-${e.borderColor}`;if(this._lastResizableMeshID===n)return;this._lastResizableMeshID=n;const s=await this.showResizableCanvasModel(e);if(s.meshes.length===0)return;const c=this._zkModel.get("scenes").at(0).get("meshSides");c.filter(b=>b.get("isResizable")).forEach(b=>c.remove(b));const u=e.type==="mirrored"?["front","borders"]:["front"];let m=0;for(const b of s.meshes)if(b&&u.includes(b.name)){b.id=n.replace("sideIdPlaceholder",e.currentSideId.toString())+m++;const k=new MPlaza.ModelSceneMeshSide({sideID:e.currentSideId,meshID:b.id,uvChannel:0,percWidth:1,percHeight:1,subMeshID:0,matrix:s.matrixJson,isResizable:!0});c.push(k)}console.log({meshSides:c}),setTimeout(()=>this.adjustCamera(!1),100)}async showResizableCanvasPerVariant(e){if(console.log("showResizableCanvasPerVariant",e),!this.zkModel)return;const n=`resizable-canvas-${e.width}-${e.height}-${e.colorId}-sideIdPlaceholder-${e.columns}-${e.rows}-${e.type}-${e.borderColor}`;if(this._lastResizableMeshID===n)return;this._lastResizableMeshID=n;const s=await this.showResizableCanvasModel(e);if(s.meshes.length===0)return;let c=0;const u=e.sidesIds.length>1;let m=["front","back","borders"];e.type==="colored"?u?m=["front","back"]:m=["front"]:e.type==="mirrored"&&(u?m=["front","back","borders"]:m=["front","borders"]);const b=this._zkModel.get("scenes").at(0).get("meshSides");b.filter(k=>k.get("isResizable")).forEach(k=>b.remove(k));for(const k of s.meshes)if(k&&m.includes(k.name)){const W=!u||k.name==="front"?e.sidesIds[0]:e.sidesIds[1];k.id=n.replace("sideIdPlaceholder",W.toString())+c++;const ve=new MPlaza.ModelSceneMeshSide({sideID:W,meshID:k.id,uvChannel:0,percWidth:1,percHeight:1,subMeshID:0,matrix:s.matrixJson,isResizable:!0});b.push(ve)}setTimeout(()=>this.adjustCamera(!1),100)}clearResizableProduct(){var e;(e=this._sceneHelper)==null||e.clearResizableMeshes()}setMouseWheelInputEnabled(e){this._camera&&this._mouseWheelInput&&(e?this._camera.inputs.add(this._mouseWheelInput):this._camera.inputs.remove(this._mouseWheelInput))}setCameraPinchingZoom(e){if(this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){const n=this._camera.inputs.attached.pointers;n.pinchZoom=e,n.multiTouchPanAndZoom=e}}switchMode(e){var n;e==="upload"&&(this._lastResizableMeshID=""),(n=this._sceneHelper)==null||n.switchMode(e),setTimeout(()=>this.adjustCamera(!1),100)}async setCanvasRotation(e,n){var s;if(e=e%360,this._isRotating||!this._zkModel||!this._sceneHelper||!this._sceneDesignManager||this._currentRotation===e)return;const c=this._zkModel.get("scenes").at(0).get("meshSides");if(c.length===0)return;const u=c.at(0).get("meshID"),m=this.getMeshByID(u);if(!m)return;const b=m.getFacetNormal(0);this._isRotating=!0,await((s=this._sceneHelper)==null?void 0:s.rotate(this._currentRotation-e,b,n)),this._currentRotation=e,this._isRotating=!1,this._sceneDesignManager.rotation=this._currentRotation,await this._sceneDesignManager.refreshAsync(),this.setRenderingNeeded()}getFitToScreenMargin(){return this._zkScene?this._zkScene.getFitToScreenMargin():1}setFitToScreenMargin(e){this._zkScene&&this._zkScene.setFitToScreenMargin(e)}}class Lc{constructor(e){this.materials=[],this.guid=Zakeke.generateUUID(),this.groupName=e}}var gd=(y=>(y[y.uploading=0]="uploading",y[y.progress=1]="progress",y[y.checking=2]="checking",y[y.success=3]="success",y[y.completed_success=4]="completed_success",y[y.completed_error=5]="completed_error",y))(gd||{});const Bc=class z_ extends Mo{constructor(e){super({configPreview:!0}),this._dracoEnabled=!0,this._dracoEncodingSpeed=5,this._dracoDecodingSpeed=5,this._envMode=se.Editor,this._selectOnPick=!0,this._showBoundingBox=!1,this._editorBackgroundColor="#444444",this._showGround=!0,this._ground=null,this._showLights=!1,this._lightsLayer=null,this._showAxes=!1,this._axesLayer=null,this._showFineTuning=!1,this._fineTuningModelLoaded=!1,this._showHighlight=!0,this._highlightOver=!0,this._highlightOverColor="#0082ff",this._editingMode=B.None,this._manipulatedNode=null,this._oldManipulatedNode=null,this._EditControl=org.ssatguru.babylonjs.component.EditControl,this._editControl=null,this._editControlVisible=!1,this._shiftPressed=!1,this._ctrlPressed=!1,this._realMeshVisibility={},this._sceneSourceTasks=[],this._isLoadingSourceFiles=!1,this._authorizationToken="",this._incrementalWorkersScriptsUrls=[],this._preUpdateListeners=[],this._postUpdateListeners=[],this._meshSelectedListeners=[],this._selectionChangedListeners=[],this._lightSelectedListeners=[],this._sceneCreatedListeners=[],this._cameraLocationCreatedListeners=[],this._sceneSourceTaskSuccessListeners=[],this._sceneSourceTaskErrorListeners=[],this._sceneSourceTasksCheckListeners=[],this._meshesUpdateListeners=[],this._materialsUpdateListeners=[],this._lightsUpdateListeners=[],this._cameraLocationsUpdateListeners=[],this._meshLocationCreatedListeners=[],this._meshLocationsUpdateListeners=[],this._arTaskSuccessListeners=[],this._arTaskErrorListeners=[],this._arTasksCheckListeners=[],this._tryOnFineTuningSettingListeners=[],this._tryOnFineTuningCloseListeners=[],this._pickedProvider=sd.NotSelected,this._providerData={mesh:new Blob},this._sessionTryOnEnabled=!1,this._tryOnInfoLoading=!0,this._initialMeshMaterials={},this._initialSubMeshMaterials={},this._lastMeshMaterials={},this._lastSubMeshMaterials={},this._meshOver=null,this._incrementalFilesMaker=null,this._sceneToBlobs=null,this._showMeasurements=!1,this._modelMeasurements=window.BABYLON.Vector3.Zero(),e&&(this._incrementalWorkersScriptsUrls=e.incrementalWorkersScriptsUrls,this._authorizationToken=e.authorizationToken,e.showGround!=null&&e.showGround!=null&&(this._showGround=e.showGround),e.editorBackgroundColor!==void 0&&e.editorBackgroundColor!==null&&(this._editorBackgroundColor=e.editorBackgroundColor),e.showHighlight!==void 0&&e.showHighlight!==null&&(this._showHighlight=e.showHighlight),e.highlightColor!==void 0&&e.highlightColor!==null&&(this._highlightColor=e.highlightColor),e.highlightOver!==void 0&&e.highlightOver!=null&&(this._highlightOver=e.highlightOver),e.highlightOverColor!==void 0&&e.highlightOverColor!=null&&(this._highlightOverColor=e.highlightOverColor))}get realMeshVisibility(){return this._realMeshVisibility}get environmentManager(){return this._environmentManager}get envMode(){return this._envMode}get sceneSourceTasks(){return this._sceneSourceTasks}set envMode(e){this._envMode!=e&&(this._envMode=e,this.refreshEnvironment())}get selectOnPick(){return this._selectOnPick}set seletOnPick(e){this._selectOnPick!=e&&(this._selectOnPick=e)}get showBoundingBox(){return this._showBoundingBox}set showBoundingBox(e){this._showBoundingBox!=e&&(this._showBoundingBox=e,this.updateBoundingBox(),this.setRenderingNeeded())}get editorBackgroundColor(){return this._editorBackgroundColor}set editorBackgroundColor(e){this._editorBackgroundColor!=e&&this.setEditorBackgroundColor(e)}get showGround(){return this._showGround}set showGround(e){this._showGround!=e&&(this._showGround=e,this.refreshGround())}get showLights(){return this._showLights}set showLights(e){this._showLights!=e&&(this._showLights=e,this._lightsLayer&&this._lightsLayer.refresh(),this.setRenderingNeeded())}get showAxes(){return this._showAxes}set showAxes(e){this._showAxes!=e&&(this._showAxes=e,this._axesLayer&&this._axesLayer.refresh(),this.setRenderingNeeded())}get showFineTuning(){return this._showFineTuning}set showFineTuning(e){this._showFineTuning=e,this._fineTuningModelLoaded=!1}set fineTuningModelLoaded(e){this._fineTuningModelLoaded=e}get fineTuningModelLoaded(){return this._fineTuningModelLoaded}get sessionTryOnEnabled(){return this._sessionTryOnEnabled}set sessionTryOnEnabled(e){this._sessionTryOnEnabled=e}get tryOnInfoLoading(){return this._tryOnInfoLoading}set tryOnInfoLoading(e){this._tryOnInfoLoading=e}get showHighlight(){return this._showHighlight}set showHighlight(e){this._showHighlight!=e&&(this._showHighlight=e)}get highlightOver(){return this._highlightOver}set highlightOver(e){this._highlightOver!=e&&(this._highlightOver=e)}get highlightOverColor(){return this._highlightOverColor}set highlightOverColor(e){this._highlightOverColor!=e&&(this._highlightOverColor=e)}get editingMode(){return this._editingMode}set editingMode(e){this._editingMode!=e&&this.setEditingMode(e)}get editControlVisible(){return this._editControlVisible}set editControlVisible(e){this._editControlVisible!=e&&this.showHideEditControl(e)}get selectedProvider(){return this._pickedProvider}get selectedProviderFineTuningData(){return this._providerData}get modelMeasurements(){return this._modelMeasurements}set modelMeasurements(e){this._modelMeasurements=e}get showMeasurements(){return this._showMeasurements}fireHideMeasurementsEvent(){this._showMeasurements=!1}fireShowMeasurementsEvent(){this._showMeasurements=!0}static async createSceneEditorAsync(e){const n=new z_(e);return await n.initAsync(),n.checkSceneSourceTasks(),n}createCanvas(){const e=super.createCanvas();return e.addEventListener("keydown",n=>{this._shiftPressed=n.key=="Shift",this._ctrlPressed=n.key=="Control"},!1),e.addEventListener("keyup",n=>{this._shiftPressed=n.key!="Shift",this._ctrlPressed=n.key!="Control"},!1),e.addEventListener("dblclick",n=>{this.setRenderingNeeded()}),e}deleteComponents(){super.deleteComponents(),this._editControl&&(this._editControl.detach(),this._editControl=null),this._lightsLayer&&(this._lightsLayer.dispose(),this._lightsLayer=null),this._axesLayer&&(this._axesLayer.dispose(),this._axesLayer=null)}dispose(){super.dispose(),this._incrementalFilesMaker&&(this._incrementalFilesMaker.dispose(),delete this._incrementalFilesMaker),this._sceneToBlobs&&(this._sceneToBlobs.dispose(),delete this._sceneToBlobs)}createEngine(){super.createEngine(),window.BABYLON.SceneLoader.ForceFullSceneLoadingForIncremental=!0}async createEmptySceneAsync(){await super.createEmptySceneAsync(),this._engine&&this.fireSceneCreatedEvent()}async setupSceneAsync(){await super.setupSceneAsync(),this._engine&&this._scene&&(this._scene.setRenderingAutoClearDepthStencil(1,!0,!0,!1),this._scene.setRenderingAutoClearDepthStencil(2,!0,!0,!1),this._lightsLayer=new Cu(this),this._lightsLayer.addLightSelectedListener(e=>{this.lightsLayer_onLightSelected(e)}),this.setupAxes(),this._zkModel&&this._meshLocationsManager&&(this._meshLocationsManager.addBeforeSaveMeshLocationListener(()=>this.onBeforeSaveMeshLocation()),this._meshLocationsManager.addAfterSaveMeshLocationListener(()=>this.onAfterSaveMeshLocation())),this._scene.onPointerMove=(e,n)=>this.onPointerMove(e,n))}render(){this.firePreUpdateEvent(),super.render(),this._lightsLayer&&this._lightsLayer.render(),this._axesLayer&&this._axesLayer.render(),this.firePostUpdateEvent()}deleteHighlightLayer(){this._highlightLayer&&(this._highlightLayer.dispose(),this._highlightLayer=null),this.setRenderingNeeded()}setupAntialiasPostProcesses(){this.antialias&&this.getAntialiasEnabled()&&(this.createAntialiasPostProcesses(),this.disableAntialiasing())}canEnableAntialiasing(){return this._scene&&this._antialias&&this.getAntialiasEnabled()&&this.envMode===se.Viewer}setupHighlightLayerIntensity(){this._highlightLayer&&(this._highlightLayer.blurHorizontalSize=this._highlightBlurHorizontalSize,this._highlightLayer.blurVerticalSize=this._highlightBlurVerticalSize)}setupAxes(){this._axesLayer=new cs(this)}getMatchSameNameTextures(){return this._zkScene?this._zkScene.getMatchSameNameTextures()??!1:!1}setMatchSameNameTextures(e){this._zkScene&&this._zkScene.setMatchSameNameTextures(e)}getAREnabled(){let e=!1;return this._zkScene?this._zkScene.getAREnabled()??e:e}setAREnabled(e){this._zkScene&&this._zkScene.setAREnabled(e)}getAROnTheFly(){let e=!1;return this._zkScene?this._zkScene.getAROnTheFly()??e:e}setAROnTheFly(e){this._zkScene&&this._zkScene.setAROnTheFly(e)}setARAnchor(e){this._zkScene&&this._zkScene.setARAnchor(e)}getTryOnEnabled(){let e=!1;return this._zkScene?this._zkScene.getTryOnEnabled()??e:e}setTryOnEnabled(e){this._zkScene&&this._zkScene.setTryOnEnabled(e)}setTryOnSelectedType(e){if(this._zkScene){const n=this.getTryOnDefaultTypeSettings(),s=this._zkScene.getTryOnSettings()||n;s.type=e,this.setTryOnTypeSettings(s)}}setFrameDAMSettings(e){this._zkScene&&this._zkScene.setFrameDAMSettings(typeof e=="string"?e:JSON.stringify(e))}getForceDracoCompression(){let e=!1;return this._zkScene?this._zkScene.getForceDracoCompression()??e:e}setForceDracoCompression(e){this._zkScene&&this._zkScene.setForceDracoCompression(e)}getWebPEnabled(){return this._zkScene?this._zkScene.getWebPEnabled():!1}setWebPEnabled(e){this._zkScene&&this._zkScene.setWebPEnabled(e)}getWebPType(){return this._zkScene?this._zkScene.getWebPType():"Lossless"}setWebPType(e){this._zkScene&&this._zkScene.setWebPType(e)}getWebPQuality(){return this._zkScene?this._zkScene.getWebPQuality():80}setWebPQuality(e){this._zkScene&&this._zkScene.setWebPQuality(e)}setProvider(e){this._pickedProvider=e}setProviderFineTuningData(e){this._providerData={mesh:e.mesh?e.mesh:this._providerData.mesh,settings:e.settings?e.settings:this._providerData.settings}}resetProviderFineTuningData(){var e;(e=this._scene)==null||e.meshes.forEach(n=>{n.metadata&&n.metadata.tryOnFineTuningSettings&&(n.metadata.tryOnFineTuningSettings=null)}),this._providerData={}}setMeshFineTuningData(e,n){const s=typeof e=="string"?this.getMeshByID(e):e;s&&(s.metadata||(s.metadata={}),s.metadata.tryOnFineTuningSettings=n)}setDAMFineTuningData(e){const n={finetuning:e};this.setFrameDAMSettings(n)}getTryOnSelectedType(){if(this._zkScene){let e=this._zkScene.getTryOnSettings();if(e&&e.type)return e.type}return null}getTryOnSettings(){const e=this.getTryOnDefaultTypeSettings();if(this._zkScene){let n=this._zkScene.getTryOnSettings();if(n)return n}return e}getTryOnSetting(e){if(this._zkScene){let n=this._zkScene.getTryOnSettings();if(n&&e in n.typeSettings&&n.typeSettings[e]&&typeof n.typeSettings[e]=="boolean")return n.typeSettings[e]}return!1}setTryOnSetting(e,n){let s=this.getTryOnDefaultTypeSettings();if(this._zkScene){let c=this._zkScene.getTryOnSettings();if(!c){switch(e){case Zo.GlassPupillaryDistanceTool:case Zo.VirtualTryOn:case Zo.MandatoryPupillaryDistance:s.typeSettings[e]=n;break;case Zo.StyleButton:s.styleButton=n}this.setTryOnTypeSettings(s);return}switch(e){case Zo.GlassPupillaryDistanceTool:c.typeSettings.pd=n;break;case Zo.VirtualTryOn:c.typeSettings.try_on=n;break;case Zo.MandatoryPupillaryDistance:c.typeSettings.mandatoryPD=n;break;case Zo.StyleButton:c.styleButton=n;break}c.typeSettings.pd&&c.typeSettings.try_on||(c.styleButton="single"),this._zkScene.setTryOnSettings(c)}}setTryOnTypeSettings(e){this._zkScene&&this._zkScene.setTryOnSettings(e)}getTryOnDefaultTypeSettings(){return{type:Rh.NotSelected,styleButton:"single",buttonCustomizations:[{image:"base",textLabel:"Virtual Try-on",textColor:null,backgroundColor:null,borderColor:null,borderWidth:0,borderRadius:0}],typeSettings:{try_on:!0,pd:!1,active:this.getTryOnEnabled()??!1}}}setTryOnDefaultTypeSettings(){let e=this.getTryOnDefaultTypeSettings();this.setTryOnTypeSettings(e)}getUseDelayedMaterialLoading(){let e=!1;return this.zkScene?this.zkScene.getUseDelayedMaterialLoading()??e:e}setUseDelayedMaterialLoading(e){this._zkScene&&this._zkScene.setUseDelayedMaterialLoading(e)}getUseDelayedTextureLoading(){return this._zkScene?this._zkScene.getUseDelayedTextureLoading()??!1:!1}setUseDelayedTextureLoading(e){this._zkScene&&this._zkScene.setUseDelayedTextureLoading(e)}getGlowEnabled(){return this._glowManager?this._glowManager.enabled:!1}setGlowEnabled(e){this._glowManager&&(this._glowManager.enabled=e,this.setRenderingNeeded())}getGlowIntensity(){return this._glowManager?this._glowManager.intensity:1}setGlowIntensity(e){this._glowManager&&(this._glowManager.intensity=e,this.setRenderingNeeded())}getGlowBlurSize(){return this._glowManager?this._glowManager.blurSize:16}setGlowBlurSize(e){this._glowManager&&(this._glowManager.blurSize=e,this.setRenderingNeeded())}getInfoPointsEnabled(){let e=!1;return this._zkScene?this._zkScene.getInfoPointsEnabled()??e:e}setInfoPointsEnabled(e){this._zkScene&&this._zkScene.setInfoPointsEnabled(e),this.refreshInfoPoints()}getInfoPointsBorderColor(){const e="";return this._zkScene?this._zkScene.getInfoPointsBorderColor()??e:e}setInfoPointsBorderColor(e){this._zkScene&&(this._zkScene.setInfoPointsBorderColor(e),this.refreshInfoPoints())}getInfoPointsInnerPointColor(){const e="";return this._zkScene?this._zkScene.getInfoPointsInnerPointColor()??e:e}setInfoPointsInnerPointColor(e){this._zkScene&&(this._zkScene.setInfoPointsInnerPointColor(e),this.refreshInfoPoints())}getInfoPointsColor(){const e="";return this._zkScene?this._zkScene.getInfoPointsColor()??e:e}setInfoPointsColor(e){this._zkScene&&(this._zkScene.setInfoPointsColor(e),this.refreshInfoPoints())}getInfoPointsHighlightColor(){const e="";return this._zkScene?this._zkScene.getInfoPointsHighlightColor()??e:e}setInfoPointsHighlightColor(e){this._zkScene&&(this._zkScene.setInfoPointsHighlightColor(e),this.refreshInfoPoints())}enableGlowForMesh(e){this._glowManager&&this._glowManager.enableGlowForMesh(e)}disableGlowForMesh(e){this._glowManager&&(this._glowManager.disableGlowForMesh(e),this.setRenderingNeeded())}enableARForMesh(e){e&&(e.metadata||(e.metadata={}),e.metadata.AR=!0)}disableARForMesh(e){e&&(e.metadata||(e.metadata={}),e.metadata.AR=!1)}disableTryOnForMesh(e){e&&(e.metadata||(e.metadata={}),e.metadata.TryOn=!1,e.getChildMeshes().forEach(n=>this.disableTryOnForMesh(n)))}enableTryOnForMesh(e){e&&(e.metadata||(e.metadata={}),e.metadata.TryOn=!0,e.getChildMeshes().forEach(n=>this.enableTryOnForMesh(n)))}enableInfoPointsForMesh(e){e&&(e.metadata||(e.metadata={}),e.metadata.showInfoPoints=!0,this.refreshInfoPoints())}disableInfoPointsForMesh(e){e&&e.metadata&&e.metadata.showInfoPoints!==void 0&&e.metadata.showInfoPoints!==null&&(delete e.metadata.showInfoPoints,this.refreshInfoPoints())}enableForcedInfoPointsVisibilityOnMesh(e){e&&(e.metadata||(e.metadata={}),e.metadata.forceShowInfoPoints=!0,this.refreshInfoPoints())}disableForcedInfoPointsVisibilityOnMesh(e){e&&e.metadata&&e.metadata.forceShowInfoPoints!==void 0&&e.metadata.forceShowInfoPoints!==null&&(delete e.metadata.forceShowInfoPoints,this.refreshInfoPoints())}setEditorBackgroundColor(e){this._editorBackgroundColor=e,this.refreshEnvironment()}setViewerBackgroundAlpha(e){this._zkScene&&(this._zkScene.getOrCreateGeneralConfig().set("backgroundAlpha",e),this.refreshEnvironment())}setViewerBackgroundColor(e){this._zkScene&&(this._zkScene.getOrCreateGeneralConfig().set("backgroundColor",e),this.refreshEnvironment())}setViewerEnvironmentSizeAuto(e){this._zkScene&&(this._zkScene.getOrCreateEnvironmentConfig().set("sizeAuto",e),this.refreshEnvironment())}setViewerEnvironmentMainColor(e){this._zkScene&&(this._zkScene.getOrCreateEnvironmentConfig().set("mainColor",e),this.refreshEnvironment())}setViewerSkyboxCreateSkybox(e){this._zkScene&&(this._zkScene.getOrCreateSkyboxConfig().set("createSkybox",e),this.refreshEnvironment())}setViewerSkyboxSize(e){this._zkScene&&(this._zkScene.getOrCreateSkyboxConfig().set("size",e),this.refreshEnvironment())}setViewerSkyboxBlur(e){if(this._zkScene){let n=e>=0?e:0;this._zkScene.getOrCreateSkyboxConfig().set("blur",n),this.refreshEnvironment()}}setViewerSkyboxTexture(e,n,s){if(this._zkScene&&e!=null&&typeof e=="string"){const c=this._zkScene.getOrCreateSkyboxConfig();c.set("texture",e),c.set("extensions",n),c.set("files",s),this.refreshEnvironment()}}removeViewerSkyboxTexture(){if(this._zkScene){const e=this._zkScene.getSkyboxConfig();e&&e.get("texture")!=null&&(e.unset("texture"),this.refreshEnvironment())}}setViewerSkyboxColor(e){this._zkScene&&e!=null&&typeof e=="string"&&(this._zkScene.getOrCreateSkyboxConfig().set("color",e),this.refreshEnvironment())}setViewerGroundCreateGround(e){this._zkScene&&e!=null&&typeof e=="boolean"&&(this._zkScene.getOrCreateGroundConfig().set("createGround",e),this.refreshEnvironment())}setViewerGroundSize(e){this._zkScene&&(this._zkScene.getOrCreateGroundConfig().set("size",e),this.refreshEnvironment())}setViewerGroundTexture(e){this._zkScene&&e!=null&&typeof e=="string"&&(this._zkScene.getOrCreateGroundConfig().set("texture",e),this.refreshEnvironment())}removeViewerGroundTexture(){if(this._zkScene){const e=this._zkScene.getGroundConfig();e&&e.get("texture")!=null&&(e.unset("texture"),this.refreshEnvironment())}}setViewerGroundColor(e){this._zkScene&&e!=null&&typeof e=="string"&&(this._zkScene.getOrCreateGroundConfig().set("color",e),this.refreshEnvironment())}setViewerGroundOpacity(e){this._zkScene&&e!=null&&typeof e=="number"&&(this._zkScene.getOrCreateGroundConfig().set("opacity",e),this.refreshEnvironment())}setViewerGroundEnableShadow(e){this._zkScene&&e!=null&&typeof e=="boolean"&&(this._zkScene.getOrCreateGroundConfig().set("enableShadow",e),this.refreshEnvironment())}setViewerGroundShadowLevel(e){this._zkScene&&e!=null&&typeof e=="number"&&(this._zkScene.getOrCreateGroundConfig().set("shadowLevel",e),this.refreshEnvironment())}setViewerGroundEnableMirror(e){this._zkScene&&e!=null&&typeof e=="boolean"&&(this._zkScene.getOrCreateGroundConfig().set("enableMirror",e),this.refreshEnvironment())}setViewerGroundMirrorBlur(e){this._zkScene&&e!=null&&typeof e=="number"&&(this._zkScene.getOrCreateGroundConfig().set("mirrorBlurKernel",e),this.refreshEnvironment())}setViewerCameraAutoRotate(e){this._zkScene&&e!=null&&typeof e=="boolean"&&(this._zkScene.getOrCreateCameraConfig().set("autoRotate",e),this.autoRender=e,this.refreshEnvironment())}setViewerCameraContrast(e){this._zkScene&&e!=null&&typeof e=="number"&&(this._zkScene.getOrCreateCameraConfig().set("contrast",e),this.refreshEnvironment())}setViewerCameraExposure(e){this._zkScene&&e!=null&&typeof e=="number"&&(this._zkScene.getOrCreateCameraConfig().set("exposure",e),this.refreshEnvironment())}setViewerCameraUpperAlphaLimit(e){var n;if(this._zkScene&&e!=null&&typeof e=="number"){const s=this._zkScene.getOrCreateCameraConfig().get("lowerAlphaLimit");this._zkScene.setCameraUpperAlphaLimit(Math.max(e,s??e)),(n=this._sceneHelper)==null||n.setCameraUpperAlphaLimit(Math.max(e,s??e)),this.setRenderingNeeded()}}setViewerCameraLowerAlphaLimit(e){var n;if(this._zkScene&&e!=null&&typeof e=="number"){const s=this._zkScene.getOrCreateCameraConfig().get("upperAlphaLimit");this._zkScene.setCameraLowerAlphaLimit(Math.min(e,s??e)),(n=this._sceneHelper)==null||n.setCameraLowerAlphaLimit(Math.min(e,s??e)),this.setRenderingNeeded()}}setViewerCameraLowerBetaLimit(e){var n;if(this._zkScene&&e!=null&&typeof e=="number"){const s=this._zkScene.getOrCreateCameraConfig().get("upperBetaLimit");this._zkScene.setCameraLowerBetaLimit(Math.min(e,s??e)),(n=this._sceneHelper)==null||n.setCameraLowerBetaLimit(Math.min(e,s??e)),this.setRenderingNeeded()}}setViewerCameraUpperBetaLimit(e){var n;if(this._zkScene&&e!=null&&typeof e=="number"){const s=this._zkScene.getOrCreateCameraConfig().get("lowerBetaLimit");this._zkScene.setCameraUpperBetaLimit(Math.max(e,s??e)),(n=this._sceneHelper)==null||n.setCameraUpperBetaLimit(Math.max(e,s??e)),this.setRenderingNeeded()}}setViewerCameraToneMappingEnabled(e){this._zkScene&&e!=null&&typeof e=="boolean"&&(this._zkScene.getOrCreateCameraConfig().set("toneMappingEnabled",e),this.refreshEnvironment())}serializeFromVector(e){return e?{x:e.x,y:e.y,z:e.z}:null}setModelTransformsFromDAMMesh(){var e;const n=this.getDAMMainMesh();if(n){const s=n.position,c=n.rotation,u=n.scaling,m=(e=this._zkScene)==null?void 0:e.getOrCreateModelConfig();m.set("position",this.serializeFromVector(s)),m.set("rotation",this.serializeFromVector(c)),m.set("scale",this.serializeFromVector(u))}}resetEditorEnvironment(){this.resetEditorBackground(),this.resetEditorCamera(),this.setRenderingNeeded()}resetEditorBackground(){this._scene&&(this._scene.clearColor=window.BABYLON.Color3.FromHexString(this._editorBackgroundColor).toColor4(),this.refreshGround(),this.setRenderingNeeded())}resetEditorCamera(){if(this._scene){const e=this._scene.activeCamera;e instanceof window.BABYLON.ArcRotateCamera&&(e.useAutoRotationBehavior=!1),this._autoRender=!1,this.setRenderingNeeded()}}preSceneContentScreenshot(){this.resetEditorEnvironment(),this.removeGround()}postSceneContentScreenshot(){}preSceneMaterialScreenshot(){super.preSceneMaterialScreenshot(),this.adjustSceneForSerialization()}postSceneMaterialScreenshot(){super.postSceneMaterialScreenshot()}sceneReadyForSave(){if(this._scene){for(let e=0;e<this._scene.meshes.length;e++)if(!this._scene.meshes[e].isReady())return!1}return!0}isCurrentCameraPivot(e){if(this._sceneHelper){const n=this._sceneHelper.getCameraPivot();return n&&n.id===e}return!1}getCurrentCameraPivotID(){if(this._scene&&this._sceneHelper){const e=this._sceneHelper.getCameraPivot();if(e){const n=this._scene.getMeshByID(e.id);if(n)return n.id}}return null}setCameraPivot(e){if(this._scene&&this._sceneHelper){for(let s=0;s<this._scene.meshes.length;s++){var n=this._scene.meshes[s];n.metadata&&n.metadata.isCameraPivot!=null&&delete n.metadata.isCameraPivot}if(e){const s=this._scene.getMeshByID(e);s&&(s.metadata=s.metadata||{},s.metadata.isCameraPivot=!0),this._sceneHelper.setCameraPivot(s||null)}else this._sceneHelper.setCameraPivot(null)}}async getBlobFromEmbeddedTextureAsync(e){let n=null;if(e.url){const m=e.url;var s=m.substring(0,5)==="data:",c=m.substring(0,5)==="blob:",u=s&&m.indexOf(";base64,")!==-1;if(s&&e._buffer&&(e._buffer instanceof ArrayBuffer||e._buffer instanceof Uint8Array||e._buffer instanceof Blob))e._buffer instanceof Blob?n=e._buffer:e._buffer instanceof Uint8Array?n=new Blob([e._buffer],{type:e.mimeType}):e._buffer instanceof ArrayBuffer&&(n=new Blob([new Uint8Array(e._buffer)],{type:e.mimeType}));else if(c)await new Promise(b=>{var k=new XMLHttpRequest;k.open("GET",m,!0),k.responseType="blob",k.onload=function(W){this.status==200&&b(this.response)},k.send()});else if(u){const b=new Uint8Array(window.BABYLON.Tools.DecodeBase64(m));n=new Blob([b],{type:e.mimeType})}}return n}async uploadEmbeddedTexturesAsync(e){const n=[];if(this._zkScene&&this._scene&&this._sceneHelper){this._scene,this._zkScene;const s=this._sceneHelper;this.getAllMaterials().forEach(c=>{c.getActiveTextures().filter(u=>u instanceof window.BABYLON.Texture).forEach(u=>{if(u.url){var m=u.url.substring(0,5)==="data:",b=u.url.substring(0,5)==="blob:",k=m&&u.url.indexOf(";base64,")!==-1;if(m||b||k){const W=s.getMaterialTextureType(c,u);W&&n.push({texture:u,material:c,type:W})}}})})}for(let s=0;s<n.length;s++){const c=n[s],u=c.texture,m=await this.getBlobFromEmbeddedTextureAsync(u);if(m){let b=".png";u.mimeType==="image/jpeg"&&(b=".jpg");const k=`${c.type.replace(" ","_")}${b}`;let W=new File([m],k);const ve=await this.uploadTextureFileAsync(W,c.material);if(ve){const Ae=ve.get("url");Ae&&await new Promise((rt,re)=>{u.updateURL(Ae,void 0,()=>rt(),void 0,()=>re())})}e&&e(s/n.length*100,"textures")}}}useIncrementalLoading(){if(this._sceneHelper){const e=this._sceneHelper.getTotalVertices(),n=this._sceneHelper.getTotalIndices();if(e+n>=1e3)return!0}return!1}updateSceneModel(e,n,s,c){if(this._zkScene&&this._scene){this._scene;const u=this._zkScene;this.resetRealVisibility();const m=this.infoPointsShown;m&&this.hideInfoPoints(),this.uploadEmbeddedTexturesAsync((b,k)=>{s&&s(b,k)}).then(()=>{this.getSceneScreenshotAsync(500,450).then(b=>{m&&this.showInfoPoints(),u.set("imageData",b),u.set("version",u.get("version")+1);var k=this.useIncrementalLoading();k?this.uploadSceneIncrementalFiles(W=>{this.onUploadScenFileSuccess(W),e&&e()},W=>{n&&n(W)},W=>{s&&s(W)},c):this.uploadSceneFile(W=>{this.onUploadScenFileSuccess(W),e&&e()},W=>{n&&n(W)},(W,ve)=>{s&&s(W,ve)})})}).catch(b=>{n&&n(b)})}}onUploadScenFileSuccess(e){this._zkScene&&e&&(e.hasOwnProperty("fileObjectID")||e.hasOwnProperty("fileLength"))&&e.hasOwnProperty("rootUrl")&&e.hasOwnProperty("sceneFileName")&&(e.hasOwnProperty("manifestFileObjectID")||e.hasOwnProperty("manifestFileLength"))&&(e.hasOwnProperty("incrementalsFileObjectID")||e.hasOwnProperty("incrementalsFileLength"))?(this._zkScene.set("fileObjectID",e.fileObjectID),this._zkScene.set("fileLength",e.fileLength),this._zkScene.set("url",e.url),this._zkScene.set("rootUrl",e.rootUrl),this._zkScene.set("sceneFileName",e.sceneFileName),this._zkScene.set("manifestFileObjectID",e.manifestFileObjectID),this._zkScene.set("manifestFileLength",e.manifestFileLength),this._zkScene.set("manifestFileUrl",e.manifestFileUrl),this._zkScene.set("incrementalsFileObjectID",e.incrementalsFileObjectID),this._zkScene.set("incrementalsFileLength",e.incrementalsFileLength),this._zkScene.set("incrementalsFileUrl",e.incrementalsFileUrl)):Logger.info("le informazioni sul file di scena salvato sono vuote o incorrette")}uploadSceneFile(e,n,s){if(!this._scene||!this._zkScene){n&&n("No scene to upload");return}this._scene;const c=this._zkScene,u=c.get("version"),m=this.getSceneJson();this.getSceneFileBlobsAsync(m,u,b=>{s&&s(b,"optimize")}).then(b=>{const k=new FormData;for(let W=0;W<b.length;W++){const ve=b[W];k.append("file_"+W,ve.blob,ve.name)}fetch(c.getSceneIncrementalFileUploadUrl(),{method:"POST",body:k,headers:{Authorization:"Bearer "+this._authorizationToken}}).then(W=>{if(!W.ok)throw new Error("HTTP error "+W.status);return W.json()}).then(W=>{e&&e(W)}).catch(W=>{n&&n(W.message)})})}async getSceneFileBlobsAsync(e,n,s){let c=[];return this._sceneToBlobs||(this._sceneToBlobs=new Bh(this._incrementalWorkersScriptsUrls)),this._sceneToBlobs&&(await this._sceneToBlobs.whenReadyAsync(),c=await this._sceneToBlobs.getSceneBlobsAsync(e,n,s)),c}getSceneJson(){var e;let n="";if(this._scene&&this._sceneHelper){const s=this._envMode;this.setEnvironmentMode(se.Editor),this.disableAntialiasing(!0);const c=this.resetCameraRotationLimits();this.deleteHighlightLayer();const u=this._manipulatedNode;this.setManipulatedNode(null),this.getUseMaterialOffloading()&&!this.getUseDelayedMaterialLoading()&&this._sceneHelper.offloadAllUnusedMaterials(),this._sceneHelper.setDummyMaterialToInvisibleMeshes(),this.adjustSceneForSerialization();const m=window.BABYLON.SceneSerializer.Serialize(this._scene);if(m.postProcesses=[],n=JSON.stringify(m),this.getUseMaterialOffloading()&&!this.getUseDelayedMaterialLoading()){const b=(e=this._zkScene)==null?void 0:e.get("rootUrl");b&&this._sceneHelper.loadAllOffloadedMaterials(b)}this._sceneHelper.unsetAllDummyMaterials(),s!=se.Editor&&this.setEnvironmentMode(s),this.enableAntialiasing(),this.createHighlightLayer(),this.setManipulatedNode(u),this.setCameraRotationLimits(c)}return n}resetCameraRotationLimits(){const e={lowerAlphaLimit:null,upperAlphaLimit:null,lowerBetaLimit:null,upperBetaLimit:null};return this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera&&(e.lowerAlphaLimit=this._camera.lowerAlphaLimit,e.upperAlphaLimit=this._camera.upperAlphaLimit,e.lowerBetaLimit=this._camera.lowerBetaLimit,e.upperBetaLimit=this._camera.upperBetaLimit,this._camera.lowerAlphaLimit=null,this._camera.upperAlphaLimit=null,this._camera.lowerBetaLimit=.01,this._camera.upperBetaLimit=Math.PI-.01),e}setCameraRotationLimits(e){e=e||{lowerAlphaLimit:null,upperAlphaLimit:null,lowerBetaLimit:.01,upperBetaLimit:Math.PI-.01},this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera&&(this._camera.lowerAlphaLimit=e.lowerAlphaLimit,this._camera.upperAlphaLimit=e.upperAlphaLimit,this._camera.lowerBetaLimit=e.lowerBetaLimit||.01,this._camera.upperBetaLimit=e.upperBetaLimit||Math.PI-.01)}adjustSceneForSerialization(){if(this._scene&&this._sceneHelper&&this._zkScene){const e=this._sceneHelper;this.removeDisabledFresnelParameters();let n=!1;this._zkScene.getUseDelayedTextureLoading()!=null&&(n=this._zkScene.getUseDelayedTextureLoading()),this._scene.useDelayedTextureLoading=n;const s=this.getMatchSameNameTextures(),c=this._zkScene.getSourcesIDs();this._zkScene.getLibraryMaterialIDs();const u={},m={},b=[],k=[],W=[],ve=e.getTextureUrl(this._scene.environmentTexture),Ae=ve!==null&&ve.endsWith(Ii.Environment.EnvironmentTextureName);if(this._zkScene.set("useDefaultEnvironmentTexture",Ae),this._scene.environmentTexture&&(this._scene.environmentTexture instanceof window.BABYLON.CubeTexture||this._scene.environmentTexture instanceof window.BABYLON.HDRCubeTexture)){const Kt=this._scene.environmentTexture.rotationY;this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.environmentTextureRotationY=Kt}this._scene.textures.forEach(Kt=>{if(!e.isTextureWithUrl(Kt))return;let At=Kt.url;if(Kt.getInternalTexture){const an=Kt.getInternalTexture();an&&an.url&&(At=an.url)}if(At){let an=At;if(an===Ii.Environment.EnvironmentTextureCDNUrl){Kt.url="textures/"+Zakeke.getEmptyUUID().replace(/-/g,"")+"/"+Ii.Environment.EnvironmentTextureName,Kt.name=Kt.url;return}if(an==Ii.Environment.SkyboxTextureCDNUrl||an==Ii.Environment.GroundTextureCDNUrl)return;let Cn=!1;an.startsWith("blob:")&&Kt.metadata&&Kt.metadata.fileUrl&&(an=Kt.metadata.fileUrl);for(let _e=0;_e<c.length;_e++){let Sr=c[_e].replace(/-/g,""),On=an.indexOf(Sr);if(On!=-1){Cn=!0,Kt.name=an.substring(On),Kt.url=Kt.name,Logger.info("texture url: "+Kt.url);break}}let He=!1;if(Kt.materialMapping){He=!0;let _e=Kt.materialMapping.libraryMaterialID.replace(/-/g,""),Sr=Kt.materialMapping.sceneMaterialID.replace(/-/g,""),On=an,Kr=Kt.name,Mi=an.indexOf(_e);if(Mi!=-1){let ei=an.replace(new RegExp(_e,"g"),Sr);On=ei,Kr=ei;let oi={};if(u.hasOwnProperty(_e)?oi=u[_e]:u[_e]=oi,Mi=ei.lastIndexOf("/"),Mi!==-1){let xr=ei.substring(Mi+1);oi.hasOwnProperty(xr)?(On=oi[xr],Kr=On,wa(b,On)||b.push(On)):(Mi=ei.lastIndexOf("/",Mi-1),Mi!==-1&&(Mi=ei.lastIndexOf("/",Mi-1),Mi!=-1&&(On=ei.substring(Mi+1),Kr=On,wa(b,On)||b.push(On),s&&(oi[xr]=On))))}Kt.name=Kr,Kt.url=On}}if(!Cn&&!He){const _e=this.extractTextureNameAndUrl(an,s,m);if(_e.url&&_e.name&&(Kt.url=_e.url,Kt.name=_e.name,wa(b,Kt.url)||b.push(Kt.url)),Kt.metadata&&Kt.metadata.mobileUrl){const Sr=this.extractTextureNameAndUrl(Kt.metadata.mobileUrl,s,m);Sr.url&&Sr.name&&(Kt.metadata.mobileUrl=Sr.url,wa(b,Kt.metadata.mobileUrl)||b.push(Kt.metadata.mobileUrl),wa(W,Kt.metadata.mobileUrl)||W.push(Kt.metadata.mobileUrl),wa(k,Kt.url)||k.push(Kt.url))}}}});const rt=["px","py","pz","nx","ny","nz"],re=Kt=>{let At=Kt.lastIndexOf("."),an=Kt;if(At!==-1){let Cn=Kt.substring(0,At);for(let He=0;He<rt.length;He++){const _e=rt[He];if(At=Cn.lastIndexOf("_"+_e),At!=-1){an=Cn.substring(0,At);break}}}return an},mt=Kt=>{const At=re(Kt);for(let an=0;an<b.length;an++){const Cn=b[an];if(At.endsWith(Cn))return!0}return!1},nt=Kt=>{const At=re(Kt);for(let an=0;an<k.length;an++){const Cn=k[an];if(At.endsWith(Cn))return!0}return!1},tn=Kt=>{const At=re(Kt);for(let an=0;an<W.length;an++){const Cn=W[an];if(At.endsWith(Cn))return!0}return!1},Ie=[];for(let Kt=0;Kt<this._zkScene.get("textures").length;Kt++){const At=this._zkScene.get("textures").at(Kt),an=At.get("url");an&&mt(an)?nt(an)?At.set("usage",Zakeke.TextureUsage.Desktop):tn(an)?At.set("usage",Zakeke.TextureUsage.Mobile):At.set("usage",Zakeke.TextureUsage.Any):Ie.push(At)}Ie.length>0&&this._zkScene.get("textures").remove(Ie),this._zkScene.set("usedTextureUrls",b)}}extractTextureNameAndUrl(e,n,s){const c={name:"",url:""};let u=e.lastIndexOf("/");if(u!==-1){const m=e.substring(u+1);if(s.hasOwnProperty(m))c.url=s[m],c.name=c.url;else if(u=e.lastIndexOf("/",u-1),u!==-1&&(u=e.lastIndexOf("/",u-1),u!==-1)){const b=e.substring(u+1);c.url=b,c.name=b,n&&(s[m]=b)}}return c}removeDisabledFresnelParameters(){const e=function(n){return n&&n.isEnabled!=null&&!n.isEnabled&&n.leftColor!=null&&n.leftColor!=null&&n.leftColor instanceof window.BABYLON.Color3&&n.leftColor.equals(window.BABYLON.Color3.White())&&n.rightColor!=null&&n.rightColor!=null&&n.rightColor instanceof window.BABYLON.Color3&&n.rightColor.equals(window.BABYLON.Color3.Black())&&n.bias!=null&&n.bias==0&&n.power!=null&&n.power==1};this._scene&&this._scene.materials.forEach(function(n){n instanceof window.BABYLON.StandardMaterial?(n.diffuseFresnelParameters&&e(n.diffuseFresnelParameters)&&(n.diffuseFresnelParameters=new window.BABYLON.FresnelParameters,n.diffuseFresnelParameters.isEnabled=!1),n.emissiveFresnelParameters&&e(n.emissiveFresnelParameters)&&(n.emissiveFresnelParameters=new window.BABYLON.FresnelParameters,n.emissiveFresnelParameters.isEnabled=!1),n.opacityFresnelParameters&&e(n.opacityFresnelParameters)&&(n.opacityFresnelParameters=new window.BABYLON.FresnelParameters,n.opacityFresnelParameters.isEnabled=!1),n.reflectionFresnelParameters&&e(n.reflectionFresnelParameters)&&(n.reflectionFresnelParameters=new window.BABYLON.FresnelParameters,n.reflectionFresnelParameters.isEnabled=!1),n.refractionFresnelParameters&&e(n.refractionFresnelParameters)&&(n.refractionFresnelParameters=new window.BABYLON.FresnelParameters,n.refractionFresnelParameters.isEnabled=!1)):n instanceof window.BABYLON.PBRMaterial||n instanceof Zakeke.PBRMaterial&&n.opacityFresnelParameters&&e(n.opacityFresnelParameters)&&(n.opacityFresnelParameters=void 0)})}uploadSceneIncrementalFiles(e,n,s,c){if(!this._scene||!this._zkScene||!this._sceneHelper){n&&n("No scene to upload");return}const u=this._zkScene,m=this._sceneHelper;let b=u.get("version"),k=this.envMode;this.setEnvironmentMode(se.Editor),this.disableAntialiasing(!0);let W=this.resetCameraRotationLimits();this.deleteHighlightLayer(),this.adjustSceneForSerialization(),m.setDummyMaterialToInvisibleMeshes();let ve=this.getUseDelayedMaterialLoading(),Ae=this.getUseMaterialOffloading(),rt={},re={};ve?this.getAllMaterials().forEach(tn=>{const Ie=this.getMeshesUsingMaterial(tn.id);tn.id!=="default material"&&Ie.length===0&&(rt[tn.id]={name:tn.name,file:"material_"+b+"_"+tn.id.replace(/[^a-z0-9]/gi,"_").toLowerCase()+".json"})}):Ae&&this.getAllMaterials().forEach(tn=>{const Ie=this.getMeshesUsingMaterial(tn.id);tn.id!=="default material"&&Ie.length===0&&(re[tn.id]=m.getOffloadedMaterialInfo(tn))}),this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.offloadedMaterials=re,this._scene.metadata.delayedMaterials=rt;let mt=window.BABYLON.SceneSerializer.Serialize(this._scene);if(mt.postProcesses=[],mt.metadata&&mt.metadata.originalMeshMaterials){const tn=JSON.parse(JSON.stringify(mt.metadata.originalMeshMaterials));m.unsetAllDummyMaterials(),mt.metadata.originalMeshMaterials=tn}const nt={useDraco:this._dracoEnabled,forceDraco:u.getForceDracoCompression()??!1,dracoEncodingSpeed:this._dracoEncodingSpeed,dracoDecodingSpeed:this._dracoDecodingSpeed,excludedMeshes:[],delayMatarialLoading:Object.keys(rt),offloadedMaterialIDs:Object.keys(re)};console.log(nt),this.getSceneIncrementalFilesAsync(b,mt,nt,s).then(tn=>{let Ie=new FormData;for(let At=0;At<tn.length;At++){const an=tn[At];let Cn=an.name,He=an.data,_e=!1;!an.dracoEncoded&&an.data.length>180&&an.data.length<45e4&&(Logger.info("Uncompressed file length: "+an.data.length),He=LZString.compressToUint8Array(an.data),Logger.info("Compressed file length: "+He.length),Cn="compressed_"+an.name,_e=!0);let Sr;if(!an.dracoEncoded&&!_e)Sr=new Blob([He],{type:"text/plain"});else{var Kt=He.buffer;Sr=new Blob([Kt])}Ie.append("file_"+At,Sr,Cn)}fetch(u.getSceneIncrementalFileUploadUrl(),{method:"POST",headers:{Authorization:"Bearer "+this._authorizationToken},body:Ie}).then(At=>{if(!At.ok)throw new Error("HTTP error "+At.status);return At.json()}).then(At=>{e&&e(At)}).catch(function(At){n&&n(At.message)}),k!=se.Editor&&this.setEnvironmentMode(k),this.enableAntialiasing(),this.createHighlightLayer(),this.setCameraRotationLimits(W)})}async getSceneIncrementalFilesAsync(e,n,s,c){let u=[];return this._incrementalFilesMaker||(this._incrementalFilesMaker=new Wo(this._incrementalWorkersScriptsUrls)),this._incrementalFilesMaker&&(await this._incrementalFilesMaker.whenReadyAsync(),u=await this._incrementalFilesMaker.getIncrementalFilesAsync(n,e,s)),u}async setNewSceneModelAsync(e,n){this._zkModel=e,this._zkScene=n,await this.init3DEngineAsync(),this.fireMeshesUpdateEvent(),this.fireMaterialsUpdateEvent(),this.fireLightsUpdateEvent(),this.fireCameraLocationsUpdateEvent()}getSceneConfig(){var e;return((e=this._zkScene)==null?void 0:e.getSceneConfig())??null}preSceneFileLoading(){this.resetRealVisibility()}postSceneFileLoading(){this.fireSceneCreatedEvent(),this.fireMeshesUpdateEvent(),this.fireMaterialsUpdateEvent(),this.fireLightsUpdateEvent(),this.fireCameraLocationsUpdateEvent()}loadSceneSourceFiles(e,n,s,c){if(this._zkScene){const W=this._zkScene,ve=new FormData;if(n)ve.append("url",n);else if(e){for(let Ie=0;Ie<e.length;Ie++)ve.append("file-"+Ie,e[Ie]);var u=this._zkScene.getTexturesConfig();if(u){var m=new Zakeke.SceneSourceTaskOptions;m.set("textures",u);var b=JSON.stringify(m),k=new Blob([b],{type:"application/json"});ve.append("task-options",k,"task-options.json")}}const Ae={downloadProgress:0,uploadProgress:0,status:0,message:"",sceneSourceInfo:{},taskID:void 0,sourceID:void 0,meshes:[]};this._sceneSourceTasks.push(Ae);const rt=W.getSourceTasksUrl(),re=new Request(rt,{method:"POST",headers:{Authorization:"Bearer "+this._authorizationToken},body:ve}),mt=Ie=>{const Kt=Ie.loaded/Ie.total;Ae.uploadProgress=Kt*100,this.fireSceneSourceTaskCheckEvent()},nt=Ie=>{const Kt=Ie.loaded/Ie.total;Ae.downloadProgress=Kt*100,this.fireSceneSourceTaskCheckEvent()},tn=new XMLHttpRequest;tn.upload.addEventListener("progress",mt),tn.addEventListener("progress",nt),re.signal.addEventListener("fetch",()=>tn.send()),fetch(re).then(Ie=>Ie.json()).then(Ie=>{Ie&&Ie.hasOwnProperty("taskID")&&Ie.hasOwnProperty("sourceID")?(Ae.taskID=Ie.taskID,Ae.sourceID=Ie.sourceID,Ae.status=1,this.fireSceneSourceTaskCheckEvent()):Logger.info("task creation process did not go well"),s&&s(Ae)}).catch(Ie=>{this._sceneSourceTasks=this._sceneSourceTasks.filter(Kt=>{}),this.fireSceneSourceTaskCheckEvent(),c&&c(Ie)}),this.fireSceneSourceTaskCheckEvent()}}checkSceneSourceTasks(){if(this._scene&&this._zkScene&&this._sceneSourceTasks&&this._sceneSourceTasks.length>0){const n=this._zkScene;for(let s=0;s<this._sceneSourceTasks.length;s++){let c=this._sceneSourceTasks[s];if(c.status==5||c.status==4){this._sceneSourceTasks.splice(s--,1),this.fireSceneSourceTaskCheckEvent();continue}if(!(c.status==2||c.status==0)){if(c.status==1){c.status=2;const u=m=>{m.status=5,this.fireSceneSourceTaskErrorEvent(m.taskID),this.fireSceneSourceTaskCheckEvent()};var e=async m=>{try{const b=await fetch(n.getSourceTaskResultUrl(m.taskID),{method:"GET",cache:"no-cache",headers:{Authorization:"Bearer "+this._authorizationToken}});if(b.ok){const k=await b.json();if(k&&k.hasOwnProperty("taskID")&&k.hasOwnProperty("state")&&k.hasOwnProperty("message")&&k.hasOwnProperty("sourceFile"))if(k.state==2){m.sceneSourceInfo={sourceID:k.sourceFile.sourceID,fileObjectID:k.sourceFile.fileObjectID,fileLength:k.sourceFile.fileLength,url:k.sourceFile.url,rootUrl:k.sourceFile.rootUrl,sceneFileName:k.sourceFile.sceneFileName,textureFiles:[]};for(let W=0;W<k.sourceFile.textureFiles.length;W++)m.sceneSourceInfo.textureFiles.push({textureID:k.sourceFile.textureFiles[W].textureID,fileObjectID:k.sourceFile.textureFiles[W].fileObjectID,fileLength:k.sourceFile.textureFiles[W].fileLength,url:k.sourceFile.textureFiles[W].url});m.status=3}else k.state==3?u(m):m.status=1;else u(m)}else u(m)}catch{u(m)}};e(c)}c.status==3&&(this._isLoadingSourceFiles||(this._isLoadingSourceFiles=!0,c.sceneSourceInfo.rootUrl&&c.sceneSourceInfo.sceneFileName?(this.updateSceneModelFromSourceTask(c),this.loadMeshesFromRemoteFiles(c.sceneSourceInfo.rootUrl,c.sceneSourceInfo.sceneFileName,u=>{u&&Object.prototype.toString.call(u)==="[object Array]"&&u.forEach(m=>{m.isPickable=!0}),this._isLoadingSourceFiles=!1,this.fireSceneSourceTaskSuccessEvent(u),this.fireMeshesUpdateEvent(),this.fireMaterialsUpdateEvent(),this.fireLightsUpdateEvent(),c.meshes=u,c.status=4},u=>{Logger.info("Errore nel caricamento delle mesh: "+u),this._isLoadingSourceFiles=!1,this.fireSceneSourceTaskErrorEvent(c.taskID),c.status=5})):(Logger.info("Risultato del task di caricamento non valido"),this._isLoadingSourceFiles=!1,this.fireSceneSourceTaskErrorEvent(c.taskID),c.status=5),this.fireSceneSourceTaskCheckEvent()))}}}setTimeout(()=>this.checkSceneSourceTasks(),500)}updateSceneModelFromSourceTask(e){if(this._zkScene){const n=new Zakeke.SceneSource;n.set("sourceID",e.sceneSourceInfo.sourceID),n.set("fileObjectID",e.sceneSourceInfo.fileObjectID),n.set("fileLength",e.sceneSourceInfo.fileLength),n.set("url",e.sceneSourceInfo.url),n.set("rootUrl",e.sceneSourceInfo.rootUrl),n.set("sceneFileName",e.sceneSourceInfo.sceneFileName);for(let s=0;s<e.sceneSourceInfo.textureFiles.length;s++){const c=e.sceneSourceInfo.textureFiles[s];if(c.textureID&&(c.fileObjectID||c.fileLength)&&c.url){const u=new Zakeke.SceneSourceTexture;u.set("textureID",c.textureID),u.set("fileObjectID",c.fileObjectID),u.set("fileLength",c.fileLength),u.set("url",c.url),n.get("textures").push(u)}}this._zkScene.get("sources").push(n)}}loadMeshesFromRemoteFiles(e,n,s,c){if(!this._scene||!this._sceneHelper){c&&c("No scene to fill with imported meshes");return}this._scene;const u=this._sceneHelper;let m=e+n;u.importMeshesFromUrlAsync(m,null,void 0).then(async b=>(Logger.info("Uploading embedded textures..."),await this.uploadEmbeddedTexturesAsync(),b)).then(b=>(Logger.info("File imported successfully."),this.checkSceneEmptyEnvironmentTexture(),this.refreshEnvironment(),b)).then(b=>{Logger.info("Operation completed successfully."),s==null||s(b)}).catch(b=>{Logger.info("Error loading file"),c&&c(b)}),Logger.info("loading finished")}loadMeshesFromRemoteFiles_OLD(e,n,s,c){if(!this._scene||!this._sceneHelper){c&&c("No scene to fill with imported meshes");return}const u=this._scene,m=this._sceneHelper;let b=n,k=n.lastIndexOf(".");k!==-1&&(b=n.substr(0,k));const W=this._scene.materials.map(re=>re.id);let ve;window.BABYLON.GLTFFileLoader.IncrementalLoading=!1,window.BABYLON.SceneLoader.OnPluginActivatedObservable.add(re=>{ve=re.name});const Ae=new window.BABYLON.AssetsManager(this._scene),rt=Ae.addMeshTask("mesh-task","",e,n);rt.onSuccess=re=>{Logger.info("task completed successfully");const mt=re.loadedMeshes,nt=new window.BABYLON.Mesh(b,u);nt.id=Zakeke.generateUUID(),nt.metadata={isRealMesh:!0,isGroup:!0},mt.forEach(tn=>{tn.parent||(tn.parent=nt),tn.material||(tn.material=new window.BABYLON.StandardMaterial(tn.name+"Mat",u)),tn.id=Zakeke.generateUUID()}),u.materials.forEach(tn=>{wa(W,tn.id)||(tn.id=Zakeke.generateUUID())}),this.checkSceneEmptyEnvironmentTexture(),this.refreshEnvironment(),m.adjustCamera(ve,!1,!1),m.setupShaderMaterialsCameraPosition(),s&&s(mt)},rt.onError=(re,mt,nt)=>{Logger.info("task completed with errors"),c&&c(mt)},Ae.onFinish=function(){Logger.info("loading finished")},Ae.load()}isRealMesh(e){return this._sceneHelper?this._sceneHelper.isRealMesh(e):!1}onMeshChanged(e){this.updateBoundingBox(),this.setRenderingNeeded()}onSubMeshChanged(e){this.updateBoundingBox(),this.setRenderingNeeded()}onMaterialChanged(e){this.setRenderingNeeded()}onLightChanged(e){this.setRenderingNeeded()}getSceneMeshesByName(e){return this._sceneHelper?this._sceneHelper.getSceneMeshesByName(e):[]}getSceneMeshes(){return this._sceneHelper?this._sceneHelper.getSceneMeshes():[]}getMeshesUsingMaterial(e){return this._sceneHelper?this._sceneHelper.getMeshesUsingMaterial(e):[]}getMeshesMaterials(e){return this._sceneHelper?this._sceneHelper.getMeshesMaterials(e):[]}getMeshMaterials(e){return this._sceneHelper?this._sceneHelper.getMeshMaterials(e):[]}getAllMaterials(){return this._sceneHelper?this._sceneHelper.getAllMaterials():[]}getGroupedMaterials(){const e=[],n={},s=this.getAllMaterials();for(let c=0;c<s.length;c++){let u=s[c];if(u.id=="groundMaterial")continue;const m=this.getMaterialGroup(u.id);let b=null;n.hasOwnProperty(m)?b=n[m]:(b=new Lc(m),e.push(b),n[m]=b),b&&b.materials.push(u)}return e.sort(function(c,u){var m=c.groupName.toLowerCase(),b=u.groupName.toLowerCase();return m<b?-1:m>b?1:0})}setMaterialsGroup(e,n,s=!0){for(let c=0;c<e.length;c++){const u=e[c];this.setMaterialGroup(u,n,s)}}setMaterialGroup(e,n,s=!0){!this._scene||!this._scene.getMaterialByID(e)||(this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.groups||(this._scene.metadata.groups={}),this._scene.metadata.groups[e]=n,s&&this.fireMaterialsUpdateEvent())}getMaterialGroup(e){return this._scene&&this._scene.metadata&&this._scene.metadata.groups&&this._scene.metadata.groups.hasOwnProperty(e)?this._scene.metadata.groups[e]:z_.EmptyGroupName}removeMaterialGroup(e){this._scene&&this._scene.metadata&&this._scene.metadata.groups&&this._scene.metadata.groups.hasOwnProperty(e)&&(delete this._scene.metadata.groups[e],this.fireMaterialsUpdateEvent())}getMaterialsByGroup(e){const n=[],s=e||z_.EmptyGroupName;return this._scene&&this._sceneHelper&&this._sceneHelper.getAllMaterials().forEach(c=>{this.getMaterialGroup(c.id)===s&&n.push(c)}),n}getGroupCenter(e){return this._sceneHelper?this._sceneHelper.getMeshHierarchyCenter(e):null}getGroupBoundingInfo(e){let n=e.getHierarchyBoundingVectors(!0);return new window.BABYLON.BoundingInfo(n.min,n.max)}showHideBoundingBox(e){this._showBoundingBox=e,this.updateBoundingBox(),this.setRenderingNeeded()}updateBoundingBox(){this.deleteBoundingBox(),this.showBoundingBox&&this.createSceneBoundingBox(!0)}deleteBoundingBox(){let e=this.getSceneBoundingBox();e&&e.dispose()}setCameraPositionScale(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraPositionScale(e),this._sceneHelper.setCameraPositionScale(e,!0),this.setRenderingNeeded())}setCameraLimitLowerRadius(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLimitLowerRadius(e),this._sceneHelper.setCameraLimitLowerRadius(e,!0),this.setRenderingNeeded())}setCameraZoomEnabled(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraZoomEnabled(e),this._sceneHelper.setZoomEnabled(e),this.setRenderingNeeded())}setCameraUseMinZoomPercentage(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraUseMinZoomPerc(e),this._sceneHelper.setMinZoomPerc(e?this._zkScene.getCameraMinZoomPerc():void 0),this.setRenderingNeeded())}setCameraMinZoomPercentage(e){if(this._zkScene&&this._sceneHelper){this._zkScene.setCameraMinZoomPerc(e);var n=this._zkScene.getCameraUseMinZoomPerc();this._sceneHelper.setMinZoomPerc(n?e:void 0),this.setRenderingNeeded()}}setCameraUseMaxZoomPercentage(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraUseMaxZoomPerc(e),this._sceneHelper.setMaxZoomPerc(e?this._zkScene.getCameraMaxZoomPerc():void 0),this.setRenderingNeeded())}setCameraMaxZoomPercentage(e){if(this._zkScene&&this._sceneHelper){this._zkScene.setCameraMaxZoomPerc(e);const n=this._zkScene.getCameraUseMaxZoomPerc();this._sceneHelper.setMaxZoomPerc(n?e:void 0),this.setRenderingNeeded()}}lockCameraAlphaAngle(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){const e=this._camera.alpha??0;this._zkScene.setCameraLowerAlphaLimit(e),this._zkScene.setCameraUpperAlphaLimit(e),this._sceneHelper.setCameraAlphaLimits(e,e),this.setRenderingNeeded()}}unlockCameraAlphaAngle(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLowerAlphaLimit(null),this._zkScene.setCameraUpperAlphaLimit(null),this._sceneHelper.setCameraAlphaLimits(null,null),this.setRenderingNeeded())}lockCameraBetaAngle(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){var e=this._camera.beta??-1.57;this._zkScene.setCameraLowerBetaLimit(e),this._zkScene.setCameraUpperBetaLimit(e),this._sceneHelper.setCameraBetaLimits(e,e),this.setRenderingNeeded()}}unlockCameraBetaAngle(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLowerBetaLimit(null),this._zkScene.setCameraUpperBetaLimit(null),this._sceneHelper.setCameraBetaLimits(null,null),this.setRenderingNeeded())}setCameraLowerAlphaLimit(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){const e=this._camera.alpha;this._zkScene.setCameraLowerAlphaLimit(e),this._sceneHelper.setCameraLowerAlphaLimit(e),this.setRenderingNeeded()}}unsetCameraLowerAlphaLimit(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLowerAlphaLimit(null),this._sceneHelper.setCameraLowerAlphaLimit(null),this.setRenderingNeeded())}setCameraUpperAlphaLimit(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){var e=this._camera.alpha;this._zkScene.setCameraUpperAlphaLimit(e),this._sceneHelper.setCameraUpperAlphaLimit(e),this.setRenderingNeeded()}}unsetCameraUpperAlphaLimit(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraUpperAlphaLimit(null),this._sceneHelper.setCameraUpperAlphaLimit(null),this.setRenderingNeeded())}setCameraLowerBetaLimit(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){const e=this._camera.beta;this._zkScene.setCameraLowerBetaLimit(e),this._sceneHelper.setCameraLowerBetaLimit(e),this.setRenderingNeeded()}}unsetCameraLowerBetaLimit(){this._zkScene&&this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLowerBetaLimit(null),this._sceneHelper.setCameraLowerBetaLimit(null),this.setRenderingNeeded())}setCameraUpperBetaLimit(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){const e=this._camera.beta;this._zkScene.setCameraUpperBetaLimit(e),this._sceneHelper.setCameraUpperBetaLimit(e),this.setRenderingNeeded()}}unsetCameraUpperBetaLimit(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraUpperBetaLimit(null),this._sceneHelper.setCameraUpperBetaLimit(null),this.setRenderingNeeded())}selectMesh(e){this.selectUnselectMesh(e,!0)}unselectMesh(e){this.selectUnselectMesh(e,!1)}unselectAllMeshes(){this._scene&&this._scene.meshes.forEach(e=>this.unselectSingleMesh(e))}selectUnselectMesh(e,n){if(this._scene){if(this.deleteBoundingBox(),this.unselectAllMeshes(),n){const s=u=>{this.selectSingleMesh(u),u.getChildMeshes().forEach(m=>s(m))};let c=this._scene.getMeshByID(e);this._isSelectionMode||(c=this.getDAMMainMesh()??c),c&&s(c),this.setManipulatedNode(c)}else this.setManipulatedNode(null);this.fireSelectionChangedEvent()}}selectSingleMesh(e){e.selected=!0,this.highlightMesh(e,!0),this.setRenderingNeeded()}unselectSingleMesh(e){e.selected=!1,this.highlightMesh(e,!1),this.setRenderingNeeded()}isMeshSelected(e){return e&&e.selected!=null&&e.selected}showMesh(e){this.resetRealVisibility(),this.showHideMesh(e,!0,!0)}hideMesh(e){this.resetRealVisibility(),this.showHideMesh(e,!1,!0)}showHideMesh(e,n,s=!0){var c;if(this._scene&&this._sceneHelper&&this._camera){this._scene;const u=this._sceneHelper,m=this._camera,b=(ve,Ae)=>{ve.isVisible=Ae,Logger.info(ve.name),ve.getChildMeshes().forEach(rt=>b(rt,Ae))},k=(ve,Ae)=>{b(ve,Ae),!(u&&m&&ve.metadata&&ve.metadata.isGroup&&ve.getChildMeshes().length===0)&&Ae&&!m.isCompletelyInFrustum(ve)&&(u.adjustCamera(void 0,!1,!1),u.setupShaderMaterialsCameraPosition()),s&&this.fireMeshesUpdateEvent(),this.setRenderingNeeded()},W=this._scene.getMeshByID(e);if(W){const ve=(c=this._zkScene)==null?void 0:c.get("rootUrl");ve?u.unsetMeshDummyMaterialAsync(W,ve,!0).then(()=>k(W,n)):k(W,n)}this.refreshInfoPoints()}}setTemporaryExclusivelyVisible(e){this._scene&&(this.resetRealVisibility(),this._realMeshVisibility={},this._scene.meshes.forEach(n=>{this._realMeshVisibility[n.id]=n.isVisible,this.isRealMesh(n)&&(n.isVisible=!1)}),this.showHideMesh(e,!0,!1))}resetRealVisibility(){this._scene&&this._sceneHelper&&this._realMeshVisibility&&(this._sceneHelper.getSceneMeshes().forEach(e=>{this._realMeshVisibility.hasOwnProperty(e.id)&&(e.isVisible=this._realMeshVisibility[e.id])}),this.setRenderingNeeded())}changeMaterialColor(e,n,s){this._sceneHelper&&this._sceneHelper.changeMaterialColor(e,n,s)}renameMesh(e,n){if(this._scene){const s=this._scene.getMeshByID(e);s&&(s.name=n,this.fireMeshesUpdateEvent())}}firePreUpdateEvent(){this._preUpdateListeners.forEach(e=>e())}addPreUpdateListener(e){this._preUpdateListeners.push(e)}removePreUpdateListener(e){for(let n=0;n<this._preUpdateListeners.length;n++)if(this._preUpdateListeners[n]==e){this._preUpdateListeners.splice(n--,1);break}}firePostUpdateEvent(){this._postUpdateListeners.forEach(e=>e())}addPostUpdateListener(e){this._postUpdateListeners.push(e)}removePostUpdateListener(e){for(let n=0;n<this._postUpdateListeners.length;n++)if(this._postUpdateListeners[n]==e){this._postUpdateListeners.splice(n--,1);break}}fireMeshSelectedEvent(e){this._meshSelectedListeners.forEach(n=>n(e))}addMeshSelectedListener(e){this._meshSelectedListeners.push(e)}removeMeshSelectedListener(e){const n=this._meshSelectedListeners.indexOf(e);n!=-1&&this._meshSelectedListeners.splice(n,1)}fireSelectionChangedEvent(){this._selectionChangedListeners.forEach(e=>e())}addSelectionChangedListener(e){this._selectionChangedListeners.push(e)}removeSelectionChangedListener(e){const n=this._selectionChangedListeners.indexOf(e);n!=-1&&this._selectionChangedListeners.splice(n,1)}fireLightSelectedEvent(e){this._lightSelectedListeners.forEach(n=>n(e))}addLightSelectedListener(e){this._lightSelectedListeners.push(e)}fireSceneCreatedEvent(){this._sceneCreatedListeners.forEach(e=>e())}addSceneCreatedListener(e){this._sceneCreatedListeners.push(e)}fireCameraLocationCreatedEvent(e){this._cameraLocationCreatedListeners.forEach(n=>n(e))}addCameraLocationCreatedListener(e){this._cameraLocationCreatedListeners.push(e)}fireCameraLocationsUpdateEvent(e){if(!e&&this._scene&&(e=this.getAllCameraLocations()),!e)throw"Failed firing positions update event: lights are null and no scene present";this._cameraLocationsUpdateListeners.forEach(n=>n(e))}addCameraLocationsUpdateListener(e){this._cameraLocationsUpdateListeners.push(e)}fireSceneSourceTaskSuccessEvent(e){this._sceneSourceTaskSuccessListeners.forEach(n=>n(e))}addSceneSourceTaskSuccessListener(e){this._sceneSourceTaskSuccessListeners.push(e)}fireSceneSourceTaskErrorEvent(e){this._sceneSourceTaskErrorListeners.forEach(n=>n(e))}addSceneSourceTaskErrorListener(e){this._sceneSourceTaskErrorListeners.push(e)}removeSceneSourceTaskErrorListener(e){const n=this._sceneSourceTaskErrorListeners.indexOf(e);n!=-1&&this._sceneSourceTaskErrorListeners.splice(n,1)}fireSceneSourceTaskCheckEvent(){this._sceneSourceTasksCheckListeners.forEach(e=>e())}addSceneSourceTaskCheckListener(e){this._sceneSourceTasksCheckListeners.push(e)}removeSceneSourceTaskCheckListener(e){const n=this._sceneSourceTasksCheckListeners.indexOf(e);n!=-1&&this._sceneSourceTasksCheckListeners.splice(n,1)}fireMeshesUpdateEvent(e){if(!e&&this._scene&&(e=this.getSceneMeshes()),!e)throw"Failed firing mesh update event: meshes are null and no scene present";this._meshesUpdateListeners.forEach(n=>n(e))}addMeshesUpdateListener(e){this._meshesUpdateListeners.push(e)}removeMeshesUpdateListener(e){const n=this._meshesUpdateListeners.indexOf(e);n!=-1&&this._meshesUpdateListeners.splice(n,1)}fireMaterialsUpdateEvent(e){if(!e&&this._scene&&(e=this.getGroupedMaterials()),!e)throw"Failed firing materials update event: materials are null and no scene present";this._materialsUpdateListeners.forEach(n=>n(e))}addMaterialsUpdateListener(e){this._materialsUpdateListeners.push(e)}fireLightsUpdateEvent(e){if(!e&&this._scene&&(e=this.getAllLights()),!e)throw"Failed firing lights update event: lights are null and no scene present";this._lightsUpdateListeners.forEach(n=>n(e))}addLightsUpdateListener(e){this._lightsUpdateListeners.push(e)}fireMeshLocationCreatedEvent(e){this._meshLocationCreatedListeners.forEach(n=>n(e))}addMeshLocationCreatedListener(e){this._meshLocationCreatedListeners.push(e)}fireMeshLocationsUpdateEvent(e){if(!e&&this._scene&&(e=this.getAllMeshLocations()),e)this._meshLocationsUpdateListeners.forEach(n=>n(e));else throw"Failed firing mesh positions update event: positions are null and no scene present"}addMeshLocatonsUpdateListener(e){this._meshLocationsUpdateListeners.push(e)}fireArTaskSuccessEvent(){this._arTaskSuccessListeners.forEach(e=>e())}addArTaskSuccessListener(e){this._arTaskSuccessListeners.push(e)}fireArTaskErrorEvent(){this._arTaskErrorListeners.forEach(e=>e())}addArTaskErrorListener(e){this._arTaskErrorListeners.push(e)}fireArTaskCheckEvent(){this._arTasksCheckListeners.forEach(e=>e())}addArTaskCheckListener(e){this._arTasksCheckListeners.push(e)}fireFineTuningSettingEvent(e){this._tryOnFineTuningSettingListeners.forEach(n=>n(e))}addFineTuningSettingListener(e){return this._tryOnFineTuningSettingListeners.push(e),this._tryOnFineTuningSettingListeners.length-1}removeFineTuningSettingListener(e){this._tryOnFineTuningSettingListeners.splice(e,1)}removeAllFineTuningSettingListeners(){this._tryOnFineTuningSettingListeners=[]}fireFineTuningCloseEvent(){this._tryOnFineTuningCloseListeners.forEach(e=>e())}addFineTuningCloseListener(e){this._tryOnFineTuningCloseListeners.push(e)}clearListeners(){this._meshSelectedListeners=[],this._selectionChangedListeners=[],this._lightSelectedListeners=[],this._sceneCreatedListeners=[],this._cameraLocationCreatedListeners=[],this._sceneSourceTaskSuccessListeners=[],this._sceneSourceTaskErrorListeners=[],this._sceneSourceTasksCheckListeners=[],this._meshesUpdateListeners=[],this._materialsUpdateListeners=[],this._lightsUpdateListeners=[],this._cameraLocationsUpdateListeners=[],this._meshLocationCreatedListeners=[],this._meshLocationsUpdateListeners=[],this._arTaskSuccessListeners=[],this._arTaskErrorListeners=[],this._arTasksCheckListeners=[],this._tryOnFineTuningSettingListeners=[],this._tryOnFineTuningCloseListeners=[]}onPointerDown(e,n){if(!(!this._scene||!this._sceneHelper||this._envMode!=se.Editor)&&this._selectOnPick&&n&&n.hit&&n.pickedMesh&&n.pickedMesh!==this._ground){this.selectMesh(n.pickedMesh.id);const s=this.convertSceneToScreenPoint(this._scene.pointerX,this._scene.pointerY);if(s){const c={name:n.pickedMesh.name,id:n.pickedMesh.id,scenePointerX:this._scene.pointerX,scenePointerY:this._scene.pointerY,screenPointerX:s.X,screenPointerY:s.Y};this.fireMeshSelectedEvent(c)}}}onPointerMove(e,n){if(!this._scene||!this._sceneHelper||this._envMode!=se.Editor)return;if(this.highlightMeshOver(!1),!this._highlightOver){this._meshOver=null;return}const s=this._scene.pick(this._scene.pointerX,this._scene.pointerY);s&&s.hit&&s.pickedMesh&&this._sceneHelper.isRealMesh(s.pickedMesh)&&(this._meshOver=s.pickedMesh,this.highlightMeshOver(!0))}getSubMesh(e,n){return this._sceneHelper?this._sceneHelper.getSubMesh(e,n):null}getLightByID(e){return this._scene?this._scene.getLightByID(e):null}applyMaterialByName(e,n){this._sceneHelper&&this._sceneHelper.applyMaterialByName(e,n)}applyMaterial(e,n){this._sceneHelper&&(this._sceneHelper.applyMaterial(e,n),this.setLongRenderingNeeded())}applyMaterialToSubMeshByName(e,n,s){this._sceneHelper&&this._sceneHelper.applyMaterialToSubMeshByName(e,n,s)}applyMaterialToSubMesh(e,n,s){this._sceneHelper&&this._sceneHelper.applyMaterialToSubMesh(e,n,s)}resetMeshMaterial(e,n){n?this._initialMeshMaterials:this._lastMeshMaterials}resetSubMeshMaterial(e,n,s){const c=s?this._initialSubMeshMaterials:this._lastSubMeshMaterials;if(e&&n&&e.material instanceof window.BABYLON.MultiMaterial){const u=n.materialIndex;if(u>=0&&u<e.material.subMaterials.length){const m=`${e.id}_${u}`;if(c.hasOwnProperty(m)){const b=c[m],k=this.getMaterialByID(b);k&&(e.material.subMaterials[u]=k)}}}this.setRenderingNeeded()}getExtension(e){var n=e.lastIndexOf(".");if(n!==-1){var s=e.substring(n).toLowerCase();return s}}loadMobileTextureFilesAsync(e,n,s,c){return new Promise((u,m)=>{this.loadMobileTextureFiles(e,n,s,c,()=>u(),b=>m())})}loadMobileTextureFiles(e,n,s,c,u,m){const b=e.length===6||this.getExtension(e[0].name)===".dds"||this.getExtension(e[0].name)===".hdr"||this.getExtension(e[0].name)===".env"||this.getExtension(e[0].name)===".basis";this.uploadTextureFiles(e,n,s,k=>{k.length>0&&(b?this.setMobileCubeTextureImages(k,n,s):this.setMobileTextureImage(k[0],n,s,c)),u&&u()},m,!1)}loadTextureFilesAsync(e,n,s,c){return new Promise((u,m)=>{this.loadTextureFiles(e,n,s,c,()=>u(),b=>m(b))})}loadTextureFiles(e,n,s,c,u,m){const b=e.length===6||this.getExtension(e[0].name)===".dds"||this.getExtension(e[0].name)===".hdr"||this.getExtension(e[0].name)===".env"||this.getExtension(e[0].name)===".basis";this.uploadTextureFiles(e,n,s,async k=>{k.length>0&&(b?await this.setCubeTextureImages(k,n,s):(await this.setTextureImage(k[0],n,s,c),(!s.includes("sheen")&&!s.includes("clearCoat")&&!s.includes("subSurface")&&!s.includes("anisotropy")&&(!n[s+"Texture"].metadata||!n[s+"Texture"].metadata.mobileUrl)||!n[s.split("_")[0]][s.toLowerCase().includes("texture")?"texture":s.split("_")[1]+"Texture"].metadata||!n[s.split("_")[0]][s.toLowerCase().includes("texture")?"texture":s.split("_")[1]+"Texture"].metadata.mobileUrl)&&await new Promise(async W=>{this.uploadTextureFiles(e,n,s,async ve=>{this.setMobileTextureImage(ve[0],n,s,c),W()},m,!0)})),u&&u())},m,!1)}getRecursiveBoundingBox(e){this.calculateRecursiveBoundingBox(e);const n=e.getBoundingInfo().boundingBox.scale(2);return e.setBoundingInfo(new window.BABYLON.BoundingInfo(window.BABYLON.Vector3.Zero(),window.BABYLON.Vector3.Zero())),new window.BABYLON.BoundingBox(n.minimum,n.maximum)}calculateRecursiveBoundingBox(e){const n=c=>{c.refreshBoundingInfo();for(const u of c.getChildMeshes(!0))n(u)};n(e);const s=e.getHierarchyBoundingVectors(!0);e.setBoundingInfo(new window.BABYLON.BoundingInfo(s.min,s.max))}calculateBoundingBox(e){let{min:n,max:s}=e[0].getHierarchyBoundingVectors(!1);for(let c=1;c<e.length;c++){const u=e[c].getHierarchyBoundingVectors(!1);n=window.BABYLON.Vector3.Minimize(n,u.min),s=window.BABYLON.Vector3.Maximize(s,u.max)}return new window.BABYLON.BoundingBox(n,s).extendSizeWorld.length()}checkMeshHiddenByMeshes(e,n,s,c){const u=this.calculateBoundingBox(n),m=this.calculateBoundingBox(e);return m-m*s>u?1:m+m*c<u?-1:0}uploadTextureFileAsync(e,n){return new Promise((s,c)=>{if(!this._scene||!this._zkScene||!e){s(null);return}const u=n?n.id:Zakeke.getEmptyUUID(),m=W=>{if(this._zkScene&&W&&W.textureID&&W.materialID&&(W.fileObjectID||W.fileLength)&&W.url){const ve=new Zakeke.SceneTexture;return ve.set("textureID",W.textureID),ve.set("materialID",W.materialID),ve.set("fileObjectID",W.fileObjectID),ve.set("fileLength",W.fileLength),ve.set("url",W.url),this._zkScene.get("textures").push(ve),ve}return null},b=new FormData;b.append("file",e);const k={method:"POST",headers:{Authorization:`Bearer ${this._authorizationToken}`},body:b};fetch(this.getTexturesUploadUrl(u),k).then(W=>{if(W.ok)return W.json();throw new Error("An error occurred")}).then(W=>{if(Array.isArray(W)){const ve=m(W[0]);ve?s(ve):c("Invalid image")}else c("Invalid image")}).catch(W=>{c("An error occurred: "+W.message)})})}async uploadTextureFiles(e,n,s,c,u,m){if(!this._scene||!this._zkScene||!e||e.length==0)return;const b=n?n.id:Zakeke.getEmptyUUID(),k=At=>{if(this._zkScene&&At&&At.textureID&&At.materialID&&(At.fileObjectID||At.fileLength)&&At.url){const an=new Zakeke.SceneTexture;return an.set("textureID",At.textureID),an.set("materialID",At.materialID),an.set("fileObjectID",At.fileObjectID),an.set("fileLength",At.fileLength),an.set("url",At.url),this._zkScene.get("textures").push(an),an}return null},W=At=>{const an=At.lastIndexOf(".");return an!==-1?At.substring(an):null},ve=(At,an)=>{const Cn=At.lastIndexOf(".");return Cn!==-1?At.substring(0,Cn).endsWith("_"+an):!1},Ae=W(e[0].name),rt=this.canLoadCubemap(n,s)&&(e.length==6||Ae===".dds"||Ae===".hdr"||Ae===".env"||Ae===".basis"),re=[];if(rt&&e.length==6){const At=["px","py","pz","nx","ny","nz"];for(let an=0;an<e.length;an++){const Cn=e[an];let He=-1;for(let _e=0;_e<At.length;_e++)if(ve(Cn.name,At[_e])){re.push(Cn),He=_e;break}He!==-1&&At.splice(He,1)}if(At.length!=0){const an="Immagini per la cube map non valide";u&&u(an),Logger.info(an);return}}else re.push(e[0]);const mt=new FormData;for(let At=0;At<re.length;At++)mt.append("file-"+At,re[At]);var nt=this._zkScene.getTexturesConfig();if(nt){var tn=JSON.stringify(nt),Ie=new Blob([tn],{type:"application/json"});mt.append("options",Ie,"options.json")}mt.forEach(At=>console.log("File: ",At));const Kt={method:"POST",headers:{Authorization:`Bearer ${this._authorizationToken}`},body:mt};fetch(this.getTexturesUploadUrl(b)+"?resize="+m,Kt).then(At=>{if(!At.ok)throw new Error("An error occurred: "+At.status);return At.json()}).then(At=>{const an=[];if(Object.prototype.toString.call(At)==="[object Array]")for(let Cn=0;Cn<At.length;Cn++){const He=k(At[Cn]);if(!He){const _e="Immagini non valide";if(u){u(_e);return}}He&&an.push(He)}c&&c(an)}).catch(At=>{const an="An error occurred: "+At.message;u&&u(an)})}getTexturesUploadUrl(e){return this._zkScene?this._zkScene.getTexturesUrl(e):""}removeAllMaterialPhotos(e){if(this._zkScene){const n=[];for(let s=0;s<this._zkScene.get("materialPhotos").length;s++)this._zkScene.get("materialPhotos").at(s).get("materialID")===e.id&&n.push(this._zkScene.get("materialPhotos").at(s));n.length>0&&this._zkScene.get("materialPhotos").remove(n)}}removeMaterialPhotoAtIndex(e,n){if(this._zkScene){const s=[];for(let c=0;c<this._zkScene.get("materialPhotos").length;c++)this._zkScene.get("materialPhotos").at(c).get("materialID")===e.id&&s.push(this._zkScene.get("materialPhotos").at(c));if(s.length>0){const c=s[n];this._zkScene.get("materialPhotos").remove(c)}}}loadMaterialPhotoFiles(e,n,s,c){this.uploadMaterialPhotoFiles(e,n,u=>{this.refreshInfoPoints(),s&&s()},c)}uploadMaterialPhotoFiles(e,n,s,c){if(!this._scene||!this._zkScene||!e||e.length===0)return;const u=n.id,m=W=>{if(this._zkScene&&W&&W.photoID&&W.materialID&&(W.fileObjectID||W.fileLength)&&W.url){const ve=new Zakeke.SceneMaterialPhoto;return ve.set("photoID",W.photoID),ve.set("materialID",W.materialID),ve.set("fileObjectID",W.fileObjectID),ve.set("fileLength",W.fileLength),ve.set("url",W.url),this._zkScene.get("materialPhotos").push(ve),ve}return null},b=W=>{const ve=W.lastIndexOf(".");return ve!==-1?W.substring(ve):null},k=new FormData;for(let W=0;W<e.length;W++){const ve=b(e[W].name);(ve===".png"||ve===".jpg")&&k.append("file-"+W,e[W])}jQuery.ajax({url:this.getMaterialPhotosUploadUrl(u),data:k,cache:!1,contentType:!1,processData:!1,type:"POST",success:W=>{const ve=[];if(Object.prototype.toString.call(W)==="[object Array]")for(let Ae=0;Ae<W.length;Ae++){const rt=m(W[Ae]);if(!rt){const re="Immagini non valide";if(c){c(re);return}}rt&&ve.push(rt)}s&&s(ve)},error:(W,ve,Ae)=>{const rt="An error occurred: "+ve+" Error: "+Ae;c&&c(rt)}})}getMaterialPhotosUploadUrl(e){return this._zkScene?this._zkScene.getMaterialPhotosUrl(e):""}canLoadCubemap(e,n){return e?e instanceof window.BABYLON.StandardMaterial&&(n=="reflection"||n=="refraction")?!0:e instanceof window.BABYLON.PBRMetallicRoughnessMaterial||e instanceof window.BABYLON.PBRSpecularGlossinessMaterial?n==="environment":e instanceof window.BABYLON.PBRMaterial||e instanceof Zakeke.PBRMaterial?n==="reflection":e instanceof window.BABYLON.ShaderMaterial:n=="environment"||n=="skybox"}setEnvironmentTexture(e,n,s,c,u){n==="environment"?this.setSceneEnvironmentTexture(e,void 0,s,c,u):n==="skybox"?this.setViewerSkyboxTexture(e,s,c):n==="ground"&&this.setViewerGroundTexture(e)}removeSceneEnvironmentTexture(){this._scene&&this._scene.environmentTexture&&(this._scene.environmentTexture.dispose(),this._scene.environmentTexture=null,this._scene.metadata&&this._scene.metadata.environmentTextureRotationY!=null&&delete this._scene.metadata.environmentTextureRotationY),this.setRenderingNeeded()}setSceneEnvironmentTextureRotationY(e){this._scene&&this._scene.environmentTexture&&(this._scene.environmentTexture instanceof window.BABYLON.CubeTexture||this._scene.environmentTexture instanceof window.BABYLON.HDRCubeTexture)&&(this._scene.environmentTexture.rotationY=e*Math.PI/180,this.setLongRenderingNeeded())}async setTextureImage(e,n,s,c){return new Promise(u=>{if(this._scene&&e&&e instanceof Zakeke.SceneTexture){const m=e.get("url");if(m)if(!n)this.setEnvironmentTexture(m,s);else{const b=this.getMaterialTexture(n,s);let k=!0;b&&b instanceof window.BABYLON.Texture&&(k=b.invertY);const W=new window.BABYLON.Texture(m,this._scene,c,k,void 0,()=>this.setRenderingNeeded());b&&b instanceof window.BABYLON.Texture&&(W.uScale=b.uScale,W.vScale=b.vScale,W.uOffset=b.uOffset,W.vOffset=b.vOffset,W.uAng=b.uAng,W.vAng=b.vAng,W.level=b.level,W.coordinatesIndex=b.coordinatesIndex,W.coordinatesMode=b.coordinatesMode,W.hasAlpha=b.hasAlpha,W.wrapU=b.wrapU,W.wrapV=b.wrapV,W.gammaSpace=b.gammaSpace),Tr.whenTextureIsReadyAsync(W).then(()=>{this.applyTexture(W,n,s),b&&!this.isTextureUsed(b)&&b.dispose(),this.setRenderingNeeded(),u()})}}})}async setCubeTextureImages(e,n,s){return new Promise(c=>{(!this._scene||Object.prototype.toString.call(e)!="[object Array]")&&c();for(let k=0;k<e.length;k++){const W=e[k];(!W||!(W instanceof Zakeke.SceneTexture))&&c()}const u=()=>this.setLongRenderingNeeded();let m=null;const b=this.getCubeTextureInfo(e);if(b.url&&this._scene)if(e.length===1){const k=b.url;k&&(n?k.endsWith(".dds")?m=window.BABYLON.CubeTexture.CreateFromPrefilteredData(k,this._scene):k.endsWith(".hdr")?m=new window.BABYLON.HDRCubeTexture(k,this._scene,128,void 0,void 0,void 0,void 0,u):k.endsWith(".env")?m=new window.BABYLON.CubeTexture(k,this._scene,null,!1,null,u,null,void 0,!0,void 0,!0):k.endsWith(".basis")&&(m=window.BABYLON.CubeTexture.CreateFromPrefilteredData(k,this._scene)):this.setEnvironmentTexture(k,s))}else e.length===6&&b.files.length===6&&b.extensions.length===6&&(n?m=new window.BABYLON.CubeTexture(b.url,this._scene,b.extensions,!1,b.files,u):this.setEnvironmentTexture(b.url,s,b.extensions,b.files,u));m?Tr.whenTextureIsReadyAsync(m).then(()=>{if(n){const k=this.getMaterialTexture(n,s);this.applyTexture(m,n,s),k&&!this.isTextureUsed(k)&&k.dispose(),this.setRenderingNeeded(),c()}}):c()})}setMobileTextureImage(e,n,s,c){if(this._scene&&this._sceneHelper){const u=e.get("url");if(u){let m=null;n?m=this.getMaterialTexture(n,s):m=this._scene.environmentTexture,m!==null&&this._sceneHelper.isTextureWithUrl(m)&&(m.metadata||(m.metadata={}),m.metadata.mobileUrl=u)}}}setMobileCubeTextureImages(e,n,s){if(!this._scene||Object.prototype.toString.call(e)!="[object Array]")return;for(let u=0;u<e.length;u++){const m=e[u];if(!m||!(m instanceof Zakeke.SceneTexture))return}const c=this.getCubeTextureInfo(e);if(c.url){let u=null;n?u=this.getMaterialTexture(n,s):u=this._scene.environmentTexture,u&&u instanceof window.BABYLON.CubeTexture&&(u.metadata||(u.metadata={}),u.metadata.mobileUrl=c.url,c.files.length===6&&(u.metadata.mobileFiles=c.files,u.metadata.mobileExtensions=c.extensions))}}getCubeTextureInfo(e){const n={url:null,files:[],extensions:[]};if(e.length===1)n.url=e[0].get("url")||null;else if(e.length===6){const s=["px","py","pz","nx","ny","nz"];let c=null;const u=[],m=[],b=(ve,Ae)=>{const rt=ve.lastIndexOf(".");return rt!==-1?ve.substring(0,rt).endsWith("_"+Ae):!1},k=(ve,Ae)=>{const rt=ve.lastIndexOf(".");if(rt!==-1){const re=ve.substring(0,rt);if(re.endsWith("_"+Ae))return re.substring(0,re.length-("_"+Ae).length)}return null},W=(ve,Ae)=>{const rt=ve.lastIndexOf("_"+Ae);return rt!==-1?ve.substr(rt):null};for(let ve=0;ve<s.length;ve++){const Ae=s[ve];for(let rt=0;rt<e.length;rt++){const re=e[rt].get("url");if(re&&b(re,Ae)){u.push(re);const mt=W(re,Ae);mt&&m.push(mt),c||(c=k(re,Ae));break}}}n.url=c,n.files=u,n.extensions=m}return n}isTextureUsed(e){if(this._scene&&e)for(let n=0;n<this._scene.materials.length;n++){const s=this._scene.materials[n].getActiveTextures();for(let c=0;c<s.length;c++)if(s[c].uid===e.uid)return!0}return!1}async changeTextureInvertYAsync(e,n,s){if(this._scene&&this._sceneHelper){var c=this._sceneHelper.getMaterialTexture(e,n);if(c&&c instanceof window.BABYLON.Texture&&c.invertY!=s){let m=c.url;if(m){let b=m;if(!/^(?:\/|[a-z]+:\/\/)/.test(m)){var u=await this.getSceneRootUrl();u&&(b=u+m)}const k=new window.BABYLON.Texture(b,this._scene,void 0,s,void 0,()=>this.setRenderingNeeded());c&&c instanceof window.BABYLON.Texture&&(k.uScale=c.uScale,k.vScale=c.vScale,k.uOffset=c.uOffset,k.vOffset=c.vOffset,k.uAng=c.uAng,k.vAng=c.vAng,k.level=c.level,k.coordinatesIndex=c.coordinatesIndex,k.coordinatesMode=c.coordinatesMode,k.hasAlpha=c.hasAlpha,k.wrapU=c.wrapU,k.wrapV=c.wrapV,k.gammaSpace=c.gammaSpace),await Tr.whenTextureIsReadyAsync(k),this.applyTexture(k,e,n),c&&!this.isTextureUsed(c)&&c.dispose(),this.setRenderingNeeded()}}}}applyTextureByName(e,n,s){if(this._scene){const c=this._scene.textures.find(u=>u.name===e);c&&this.applyTexture(c,n,s)}}applyTexture(e,n,s){if(e&&s=="lightmap"&&(e.coordinatesIndex=1,(n instanceof window.BABYLON.StandardMaterial||n instanceof window.BABYLON.PBRMaterial||n instanceof window.BABYLON.PBRBaseSimpleMaterial)&&(n.useLightmapAsShadowmap=!0)),n instanceof window.BABYLON.StandardMaterial)switch(s){case"diffuse":n.diffuseTexture=e;break;case"emissive":n.emissiveTexture=e;break;case"ambient":n.ambientTexture=e;break;case"lightmap":n.lightmapTexture=e;break;case"opacity":n.opacityTexture=e;break;case"specular":n.specularTexture=e;break;case"reflection":n.reflectionTexture=e;break;case"refraction":n.refractionTexture=e;break;case"bump":n.bumpTexture=e;break}else if(n instanceof window.BABYLON.PBRMetallicRoughnessMaterial)switch(s){case"environment":case"normal":case"emissive":case"occlusion":case"base":case"metallicRoughness":n[`${s}Texture`]=e;break}else if(n instanceof window.BABYLON.PBRSpecularGlossinessMaterial)switch(s){case"environment":case"normal":case"emissive":case"occlusion":case"diffuse":case"specularGlossiness":n[`${s}Texture`]=e;break}else if(n instanceof window.BABYLON.PBRMaterial)switch(s){case"cameraColorGrading":n.cameraColorGradingTexture=e;break;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":n[`${s}Texture`]=e;break;case"refraction":n.refractionTexture=e;break;case"environmentBRDF":n.environmentBRDFTexture=e;break;case"clearCoat_texture":n.clearCoat.texture=e;break;case"clearCoat_bump":n.clearCoat.bumpTexture=e;break;case"clearCoat_tint":n.clearCoat.tintTexture=e;break;case"clearCoat_textureRoughness":n.clearCoat.textureRoughness=e;break;case"anisotropy_texture":n.anisotropy.texture=e;break;case"sheen_texture":n.sheen.texture=e;break;case"sheen_textureRoughness":n.sheen.textureRoughness=e;break;case"subSurface_thickness":n.subSurface.thicknessTexture=e;break;case"subSurface_translucencyIntensity":n.subSurface.translucencyIntensityTexture=e;break;case"subSurface_refractionIntensity":n.subSurface.refractionIntensityTexture=e;break}else if(n instanceof window.BABYLON.ShaderMaterial)e&&e instanceof window.BABYLON.Texture?n.setTexture(s,e):n.removeTexture(s);else if(n instanceof Zakeke.PBRMaterial)switch(s){case"albedo":n.albedoTexture=e;break;case"bump":n.bumpTexture=e;break;case"reflection":n.reflectionTexture=e;break;case"matCapReflection":n.matCapReflectionTexture=e;break;case"reflectivity":n.reflectivityTexture=e;break;case"microsurface":n.microsurfaceTexture=e;break;case"ambient":n.ambientTexture=e;break;case"ao":n.aoTexture=e;break;case"opacity":n.opacityTexture=e;break}this.setLongRenderingNeeded()}getMaterialTexture(e,n){if(e instanceof window.BABYLON.StandardMaterial)switch(n){case"diffuse":return e.diffuseTexture;case"emissive":return e.emissiveTexture;case"ambient":return e.ambientTexture;case"lightmap":return e.lightmapTexture;case"opacity":return e.opacityTexture;case"specular":return e.specularTexture;case"reflection":return e.reflectionTexture;case"refraction":return e.refractionTexture;case"bump":return e.bumpTexture}else if(e instanceof window.BABYLON.PBRMetallicRoughnessMaterial)switch(n){case"environment":return e.environmentTexture;case"normal":return e.normalTexture;case"emissive":return e.emissiveTexture;case"occlusion":return e.occlusionTexture;case"base":return e.baseTexture;case"metallicRoughness":return e.metallicRoughnessTexture}else if(e instanceof window.BABYLON.PBRSpecularGlossinessMaterial)switch(n){case"environment":return e.environmentTexture;case"normal":return e.normalTexture;case"emissive":return e.emissiveTexture;case"occlusion":return e.occlusionTexture;case"diffuse":return e.diffuseTexture;case"specularGlossiness":return e.specularGlossinessTexture}else if(e instanceof window.BABYLON.PBRMaterial)switch(n){case"cameraColorGrading":return e.cameraColorGradingTexture;case"albedo":return e.albedoTexture;case"ambient":return e.ambientTexture;case"opacity":return e.opacityTexture;case"reflection":return e.reflectionTexture;case"emissive":return e.emissiveTexture;case"reflectivity":return e.reflectivityTexture;case"metallic":return e.metallicTexture;case"microSurface":return e.microSurfaceTexture;case"bump":return e.bumpTexture;case"lightmap":return e.lightmapTexture;case"refraction":return e.refractionTexture;case"clearCoat":return e.clearCoat.texture;case"clearCoat_bump":return e.clearCoat.bumpTexture;case"clearCoat_tint":return e.clearCoat.tintTexture;case"clearCoat_textureRoughness":return e.clearCoat.textureRoughness;case"clearCoat_texture":return e.clearCoat.texture;case"anisotropy_texture":return e.anisotropy.texture;case"sheen_texture":return e.sheen.texture;case"sheen_textureRoughness":return e.sheen.textureRoughness;case"subSurface_thickness":return e.subSurface.thicknessTexture;case"subSurface_refractionIntensity":return e.subSurface.refractionIntensityTexture;case"subSurface_translucencyIntensity":return e.subSurface.translucencyIntensityTexture}else if(e instanceof Zakeke.PBRMaterial)switch(n){case"albedo":return e.albedoTexture;case"bump":return e.bumpTexture;case"reflection":return e.reflectionTexture;case"matCapReflection":return e.matCapReflectionTexture;case"reflectivity":return e.reflectivityTexture;case"microsurface":return e.microsurfaceTexture;case"ambient":return e.ambientTexture;case"ao":return e.aoTexture;case"opacity":return e.opacityTexture}return null}removeMaterialTexture(e,n){this.applyTexture(null,e,n)}removeMaterialMobileTexture(e,n){const s=this.getMaterialTexture(e,n);s&&s.metadata&&s.metadata.mobileUrl&&(delete s.metadata.mobileUrl,s.metadata.hasOwnProperty("mobileFiles")&&delete s.metadata.mobileFiles,s.metadata.hasOwnProperty("mobileExtensions")&&delete s.metadata.mobileExtensions,Object.keys(s.metadata).length===0&&s.metadata.constructor===Object&&delete s.metadata)}createGroup(e,n,s){if(this._scene){const c=new window.BABYLON.Mesh(n,this._scene);if(c.id=Zakeke.generateUUID(),c.metadata={isRealMesh:!0,isGroup:!0},e){const u=this._scene.getMeshByID(e);u&&(c.parent=u)}return s&&s.forEach(u=>u.parent=c),this.fireMeshesUpdateEvent(),c}return null}deleteMesh(e,n){const s={meshIDs:[],materialIDs:[]};if(this._scene&&this._sceneHelper&&this._zkScene){const c=this._scene,u=this._sceneHelper,m=this._zkScene,b=c.getMeshByID(e);if(b){const k=ve=>{const Ae=this.getMeshMaterials(ve);for(let rt=0;rt<Ae.length;rt++){const re=Ae[rt];if(!re)continue;const mt=this.getMeshesUsingMaterial(re.id);mt.length===1&&mt.every(nt=>u.meshHasParent(nt.id,b.id))&&(s.materialIDs.push(Ae[rt].id),Ae[rt].dispose())}ve.getChildMeshes().forEach(rt=>k(rt))};n&&(k(b),this.fireMaterialsUpdateEvent());const W=u.getCameraPivot();W&&W===b&&this.setCameraPivot(null),this.isMeshSelected(b)&&this.unselectMesh(b.id),b.dispose(),s.meshIDs.push(e)}this.fireMeshesUpdateEvent(),this.setRenderingNeeded(),s.materialIDs.forEach(k=>{const W=m.getLibraryShaderMaterialIDForSceneMaterial(k);W&&m.unregisterShaderMaterial(W)})}return s}deleteAllMeshes(){if(this._scene&&this._sceneHelper){for(let e=0;e<this._scene.meshes.length;e++){const n=this._scene.meshes[e];this._sceneHelper.isRealMesh(n)&&(this._scene.meshes.splice(e--,1),n.dispose())}this.setCameraPivot(null),this.setRenderingNeeded()}}deleteDuplicatedMeshesWithDifferentParent(e,n){const s={meshIDs:[],materialIDs:[]};if(this._scene&&this._sceneHelper&&this._zkScene){const c=this._scene,u=this._sceneHelper,m=this._zkScene,b=W=>{const ve=this.getSceneMeshesByName(W.name);let Ae=!1;for(let re=0;re<ve.length;re++){var rt=ve[re];if(rt.id!=W.id&&!u.meshHasParent(rt.id,e)){if(n){const mt=this.getMeshMaterials(rt);for(let nt=0;nt<mt.length;nt++)this.getMeshesUsingMaterial(mt[nt].id).length==1&&(s.materialIDs.push(mt[nt].id),mt[nt].dispose())}s.meshIDs.push(rt.id),rt.dispose(),ve.splice(re--,1),Ae=!0;break}}Ae||W.getChildMeshes().forEach(re=>b(re))},k=c.getMeshByID(e);k&&k.getChildMeshes().forEach(W=>b(W)),this.setRenderingNeeded(),s.materialIDs.forEach(W=>{const ve=m.getLibraryShaderMaterialIDForSceneMaterial(W);ve&&m.unregisterShaderMaterial(ve)})}return s}deleteDuplicatedChildMeshes(e,n){const s={meshIDs:[],materialIDs:[]};if(this._scene&&this._sceneHelper&&this._zkScene){const c=this._scene,u=this._sceneHelper,m=this._zkScene,b=W=>{const ve=this.getSceneMeshesByName(W.name);let Ae=!1;for(let rt=0;rt<ve.length;rt++){const re=ve[rt];if(re.id!=W.id&&!u.meshHasParent(re.id,e)){if(n){const mt=this.getMeshMaterials(W);for(let nt=0;nt<mt.length;nt++)this.getMeshesUsingMaterial(mt[nt].id).length==1&&(s.materialIDs.push(mt[nt].id),mt[nt].dispose())}s.meshIDs.push(W.id),W.dispose(),Ae=!0;break}}if(!Ae){const rt=W.getChildMeshes();for(let re=0;re<rt.length;re++)b(rt[re])}},k=c.getMeshByID(e);k&&k.getChildMeshes().forEach(W=>b(W)),this.setRenderingNeeded(),s.materialIDs.forEach(W=>{const ve=m.getLibraryShaderMaterialIDForSceneMaterial(W);ve&&m.unregisterShaderMaterial(ve)})}return s}deleteMaterial(e){if(this._scene&&this._sceneHelper){const n=this._scene.getMaterialByID(e);n&&(this.deleteMaterialInternal(n),this.fireMaterialsUpdateEvent(),this.setRenderingNeeded())}}deleteMaterialInternal(e){if(this._scene&&this._sceneHelper&&e){const n=e.id;if(this._zkScene){const c=this._zkScene.getLibraryShaderMaterialIDForSceneMaterial(e.id);c&&this._zkScene.unregisterShaderMaterial(c)}const s=this._sceneHelper.getTexturesExclusivelyForMaterial(e);e.dispose();for(let c=0;c<s.length;c++)s[c].dispose();this._sceneHelper.removeSceneMaterialMetadata(n)}}deleteAllMaterials(){if(this._scene){for(;this._scene.materials.length>0;){const e=this._scene.materials.pop();e&&this.deleteMaterialInternal(e)}this.fireMaterialsUpdateEvent(),this.setRenderingNeeded(),this.fireMaterialsUpdateEvent()}}renameMaterial(e,n){if(this._scene){const s=this._scene.getMaterialByID(e);s&&(s.name=n),this.fireMaterialsUpdateEvent()}}cloneMesh(e){let n=null;return this._scene&&this._sceneHelper&&(n=this._sceneHelper.cloneMesh(e,!1,!1),this.setRenderingNeeded(),this.fireMeshesUpdateEvent()),n}duplicateMesh(e,n=!1){let s=null;return this._scene&&this._sceneHelper&&(s=this._sceneHelper.cloneMesh(e,!0,n),this.setRenderingNeeded(),this.fireMeshesUpdateEvent()),s}cloneMaterial(e,n,s){let c=null;if(this._scene&&this._sceneHelper){const m=this._scene.getMaterialById(e);if(m){const b=s||m.name+" - clone";if(c=m.clone(b),c){const k=n||Zakeke.generateUUID();if(c.id=k,this._zkScene){const W=this._zkScene.getMappingForSceneMaterial(m.id);if(W){var u=W.get("libraryMaterialID");this._zkScene.mapLibraryMaterial(u,c.id);const ve=this._sceneHelper.getTexturesForMaterial(c),Ae=this._sceneHelper.getTexturesForMaterial(c);for(let rt=0;rt<Ae.length;rt++){const re=Ae[rt],mt=ve[rt];re.materialMapping=mt.materialMapping}}}}}this.setRenderingNeeded(),this.fireMaterialsUpdateEvent()}return c}createMaterial(e,n,s){let c=null;if(this._scene){const u=e||"new material",m=n||"Standard";m==="Standard"?c=new window.BABYLON.StandardMaterial(u,this._scene):m==="PBRMetallicRoughness"?(c=new window.BABYLON.PBRMetallicRoughnessMaterial(u,this._scene),c.subSurface.indexOfRefraction=1,c._imageProcessingConfiguration.contrast=1):m==="PBRSpecularGlossiness"?c=new window.BABYLON.PBRSpecularGlossinessMaterial(u,this._scene):m==="PBR"?(c=new window.BABYLON.PBRMaterial(u,this._scene),c.enableSpecularAntiAliasing=!0,c.metallic=.9,c.roughness=.3,c.indexOfRefraction=1.5):m==="NewPBR"&&(c=new Zakeke.PBRMaterial(u,this._scene)),c&&(c.id=Zakeke.generateUUID(),s&&(c.metadata||(c.metadata={}),c.metadata.group=s)),this.checkSceneEmptyEnvironmentTexture(),this.setRenderingNeeded(),this.fireMaterialsUpdateEvent()}return c}changeMeshParent(e,n){if(this._scene){const s=this._scene.getMeshById(e);if(s&&(!s.parent||s.parent.id!=n)){const c=this._scene.getMeshById(n);s.setParent(c),this.setRenderingNeeded(),this.fireMeshesUpdateEvent()}}}removeMeshParent(e){if(this._scene){const n=this._scene.getMeshByID(e);n&&(n.parent=null,this.fireMeshesUpdateEvent())}}setManipulatedNode(e){e!==this._manipulatedNode&&(this._manipulatedNode=e,this.showHideEditControl(this._editControlVisible),this.setRenderingNeeded())}importLibraryMaterial(e){if(this._scene&&this._sceneHelper&&this._zkScene&&e&&e instanceof Zakeke.Material){e.get("shaders")&&this.checkShaderMaterial(e);const s=e.get("JSON")||e.get("json"),c=e.get("rootUrl");if(s&&c){const u=JSON.parse(s),m=window.BABYLON.Material.Parse(u,this._scene,c);if(m){if(m.id=Zakeke.generateUUID(),this._zkScene.mapLibraryMaterial(e.getMaterialID(),m.id),e.get("shaders")){const k=e.get("shaders"),W=k.get("name"),ve=k.get("vertex"),Ae=k.get("fragment");W&&ve&&Ae&&this._zkScene.registerShaderMaterial(e.getMaterialID(),W,ve,Ae),this.setupShaderMaterialCameraPosition(m)}e.get("sourceTextureImages").forEach(k=>{var W,ve;if((W=this._zkScene)!=null&&W.get("textures").find(rt=>rt.get("url")===k.get("url")))return;let Ae=new Zakeke.SceneTexture;Ae.set("textureID",Zakeke.generateUUID()),Ae.set("materialID",m.id),Ae.set("fileObjectID",k.get("fileObjectID")),Ae.set("fileLength",k.get("fileLength")),Ae.set("url",k.get("url")),(ve=this.zkScene)==null||ve.get("textures").push(Ae)}),e.get("textureImages").forEach(k=>{var W,ve;if((W=this._zkScene)!=null&&W.get("textures").find(rt=>rt.get("url")===k.get("imageUrl")))return;let Ae=new Zakeke.SceneTexture;Ae.set("textureID",Zakeke.generateUUID()),Ae.set("materialID",m.id),Ae.set("fileObjectID",k.get("fileObjectID")),Ae.set("fileLength",k.get("fileLength")),Ae.set("url",k.get("imageUrl")),(ve=this.zkScene)==null||ve.get("textures").push(Ae)});const b=this._sceneHelper.getTexturesForMaterial(m);for(let k=0;k<b.length;k++){var n=b[k];n.materialMapping={libraryMaterialRootUrl:c,libraryMaterialID:e.getMaterialID(),sceneMaterialID:m.id}}}}this.fireMaterialsUpdateEvent(),this.setRenderingNeeded()}}getTexturesForMaterial(e){return this._sceneHelper?this._sceneHelper.getTexturesForMaterial(e):[]}getStandardMaterialTextures(e){return this._sceneHelper?this._sceneHelper.getStandardMaterialTextures(e):[]}getPBRBaseSimpleMaterialTextures(e){return this._sceneHelper?this._sceneHelper.getPBRBaseSimpleMaterialTextures(e):[]}getPBRMaterialTextures(e){return this._sceneHelper?this._sceneHelper.getPBRMaterialTextures(e):[]}getNewPBRMaterialTextures(e){return this._sceneHelper?this._sceneHelper.getNewPBRMaterialTextures(e):[]}getPBRMetallicRoughnessMaterialTextures(e){return this._sceneHelper?this._sceneHelper.getPBRMetallicRoughnessMaterialTextures(e):[]}getPBRSpecularGlossinessMaterialTextures(e){return this._sceneHelper?this._sceneHelper.getPBRSpecularGlossinessMaterialTextures(e):[]}removeCameraLocation(e){var n;(n=this._zkScene)==null||n.get("cameraLocations").remove(e),this.fireCameraLocationsUpdateEvent()}saveCameraLocation(e){if(this._zkScene&&this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){const n=this._camera.position,s=this._camera.target,c=new Zakeke.SceneCameraLocation;c.set("name",e),c.set("px",n.x),c.set("py",n.y),c.set("pz",n.z),c.set("tx",s.x),c.set("ty",s.y),c.set("tz",s.z),this._zkScene.get("cameraLocations").push(c),this.fireCameraLocationCreatedEvent(c),this.fireCameraLocationsUpdateEvent()}}clearCameraLocations(){if(this._zkScene){const e=this._zkScene.get("cameraLocations");for(;e.length>0;)e.remove(e.at(0));this.fireCameraLocationsUpdateEvent()}}getAllCameraLocations(){const e=[];if(this._zkScene)for(let n=0;n<this._zkScene.get("cameraLocations").length;n++)e.push(this._zkScene.get("cameraLocations").at(n));return e}saveMeshLocation(e){this._meshLocationsManager&&this._meshLocationsManager.saveMeshLocation(e)}saveExplodedMeshLocation(){this._meshLocationsManager&&this._meshLocationsManager.saveExplodedMeshLocation()}saveCollapsedMeshLocation(){this._meshLocationsManager&&this._meshLocationsManager.saveCollapsedMeshLocation()}onBeforeSaveMeshLocation(){this._oldManipulatedNode=this._manipulatedNode,this.setManipulatedNode(null)}onAfterSaveMeshLocation(){this.fireMeshLocationsUpdateEvent(),this.setManipulatedNode(this._oldManipulatedNode)}clearMeshLocations(){this._meshLocationsManager&&this._meshLocationsManager.clearMeshLocations()}getAllMeshLocations(){const e=[];if(this._zkScene)for(let n=0;n<this._zkScene.get("meshLocations").length;n++)e.push(this._zkScene.get("meshLocations").at(n));return e}makeLibraryMaterial(e,n){return new Promise((s,c)=>{this.getMaterialScreenShotForLibrary(e,u=>{u?this.createLibraryMaterial(e,n,u,s):c("No data generated for screenshot")})})}getMaterialScreenShotForLibrary(e,n){if(this._scene&&this._sceneHelper){this.resetEditorEnvironment(),this.removeGround(),this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null);const s=500,c=500;this._sceneHelper.takeMaterialScreenshotAsync(e,s,c).then(u=>{Al(u,s,c,m=>{this.refreshEnvironment(),n&&n(m)})})}else n&&n(null)}createLibraryMaterial(e,n,s,c){let u=null;const m=()=>{u&&this.deleteMaterial(u.id),c&&c()};if(!this._scene||!this._sceneHelper||!this._zkScene){m();return}const b=this._scene,k=this._sceneHelper,W=this._zkScene;if(!b.getMaterialByID(e)){m();return}const ve=new Zakeke.Material;ve.set("name",n),ve.set("imageData",s);let Ae=e,rt=Ae.replace(/-/g,"");const re=ve.getMaterialID(),mt=re.replace(/-/g,"");if(u=this.cloneMaterial(e,re,n),!u){m();return}const nt=W.getSourcesIDs();W.getLibraryMaterialIDs();const tn=k.getTexturesForMaterial(u),Ie=[];for(let _e=0;_e<tn.length;_e++){const Sr=tn[_e];if(Sr.materialMapping){const On=Sr.materialMapping.libraryMaterialID;On&&Ie.push(On)}}let Kt=new Zakeke.Materials;const At=["px","py","pz","nx","ny","nz"],an=function(_e){const Sr=_e.lastIndexOf(".");if(Sr!==-1){const On=_e.substring(0,Sr);if(At.some(Kr=>On.endsWith("_"+Kr)))return On.substring(0,On.length-3)}return _e},Cn=(_e,Sr)=>an(_e).endsWith(Sr),He=()=>{for(let Sr=0;Sr<tn.length;Sr++){const On=tn[Sr];if(On&&k.isTextureWithUrl(On)&&On.url){let Kr=null,Mi=null;for(let Fn=0;Fn<nt.length;Fn++){const si=nt[Fn].replace(/-/g,"");if(On.url.indexOf(si)!=-1){Kr=nt[Fn],Mi=si;break}}const ei=[];for(let Fn=0;Fn<W.get("textures").length;Fn++){const si=W.get("textures").at(Fn);si.get("url")&&Cn(si.get("url"),On.url)&&ei.push({fileObjectID:si.get("fileObjectID"),url:si.get("url"),fileLength:si.get("fileLength")})}for(let Fn=0;Fn<ei.length;Fn++){const si=new Zakeke.MaterialSourceTextureImage;si.set("fileObjectID",ei[Fn].fileObjectID),si.set("url",ei[Fn].url||""),si.set("fileLength",ei[Fn].fileLength||-1),Kr?(si.set("sceneID",W.getSceneID()),si.set("sourceID",Kr)):(si.set("sceneID",W.getSceneID()),si.set("materialID",Ae)),ve.get("sourceTextureImages").push(si)}let oi="",xr="",Ts=On.name;if(Kr&&Mi){const Fn=On.url.indexOf(Mi);Fn!=-1&&(Ts=On.url.substring(Fn)),oi=Mi,xr="textures/"+mt,On.name=Ts.replace(new RegExp(oi,"g"),xr)}else{var _e=On.url.lastIndexOf("/");_e!==-1&&(_e=On.url.lastIndexOf("/",_e-1),_e!==-1&&(_e=On.url.lastIndexOf("/",_e-1),_e!=-1&&(Ts=On.url.substring(_e+1)))),oi=rt,xr=mt,On.name=Ts.replace(new RegExp("textures/([A-Za-z0-9]*)/(.*)","g"),"textures/"+xr+"/$2")}On.url=On.name}}if(u){const Sr=u.serialize(),On=JSON.stringify(Sr);ve.set("JSON",On),ve.save(null,{success:function(Kr,Mi,ei){m()},error:function(Kr,Mi,ei){m()}})}else m()};if(Ie.length>0){const _e={ids:Ie.join(",")};try{Kt.fetch({success:(Sr,On,Kr)=>{Kt=Sr,He()},error:(Sr,On,Kr)=>{Logger.info("Errore nel salvataggio del materiale di libreria"),m()},data:_e})}catch{}}else He()}lightsLayer_onLightSelected(e){this.fireLightSelectedEvent(e)}isDefaultLight(e){return this._sceneHelper?this._sceneHelper.isDefaultLight(e):!1}createLight(e,n){let s=null;if(this._scene){const c=e||"new light",u=n||"Point",m=window.BABYLON.Vector3.Zero(),b=window.BABYLON.Vector3.Zero(),k=25*Math.PI/180,W=2;u=="Point"?s=new window.BABYLON.PointLight(c,m,this._scene):u=="Directional"?s=new window.BABYLON.DirectionalLight(c,b,this._scene):u=="Spot"?s=new window.BABYLON.SpotLight(c,m,b,k,W,this._scene):u=="Hemispheric"&&(s=new window.BABYLON.HemisphericLight(c,b,this._scene)),s&&(s.id=Zakeke.generateUUID()),this._lightsLayer&&this._lightsLayer.refresh(),this.setRenderingNeeded(),this.fireLightsUpdateEvent()}return s}cloneLight(e,n,s){let c=null;if(this._scene){const u=this._scene.getLightByID(e);if(u){const m=s||u.name+" - clone";if(c=u.clone(m),c){c.name=m;const b=n||Zakeke.generateUUID();c.id=b,this._lightsLayer&&this._lightsLayer.refresh()}}this.setRenderingNeeded(),this.fireLightsUpdateEvent()}return c}renameLight(e,n){if(this._scene){const s=this._scene.getLightByID(e);s&&(s.name=n,this._lightsLayer&&this._lightsLayer.refresh()),this.fireLightsUpdateEvent()}}deleteLight(e){if(this._scene){const n=this._scene.getLightByID(e);n&&(n.dispose(),this._scene.meshes.forEach(s=>s._markSubMeshesAsLightDirty()),this._lightsLayer&&this._lightsLayer.refresh()),this.setRenderingNeeded(),this.fireLightsUpdateEvent()}}getAllLights(){return this._scene?this._scene.lights:[]}canShowLights(){return this._showLights&&this._envMode==se.Editor}showHideLights(e){this._showLights=e,this._lightsLayer&&this._lightsLayer.refresh(),this.setRenderingNeeded()}canShowGround(){return this._showGround&&this._envMode==se.Editor}removeGround(){this._ground&&(this._ground.dispose(),this._ground=null),this.setRenderingNeeded()}refreshGround(){if(!this._scene)return;if(this.removeGround(),!this.canShowGround()){this.setRenderingNeeded();return}const e=this._scene.clearColor,n=e.toHexString(),s=hi(n)?.8:-.5,c=window.BABYLON.Color3.FromHexString(Ph(n,s));let u=1e3,m=1;if(this.countSceneMeshes()>0){const k=this._scene.getWorldExtends(ve=>this.isRealMesh(ve)),W=k.max.subtract(k.min).length()*1.5;isFinite(W)&&(u=W*20,m=u/100)}this._ground=window.BABYLON.Mesh.CreateGround("ground",u,u,10,this._scene),this._ground.doNotSerialize=!0,this._ground.isVisible=this.showGround,this._ground.isPickable=!1,this._ground.metadata={isRealMesh:!1,isGround:!0};const b=new window.BABYLON.GridMaterial("groundMaterial",this._scene);b.doNotSerialize=!0,b.backFaceCulling=!1,b.mainColor=new window.BABYLON.Color3(e.r,e.g,e.b),b.opacity=1,b.gridRatio=m,b.lineColor=c,b.metadata={isRealMaterial:!1},this._ground.material=b,this.setRenderingNeeded()}showHideGround(e){this.showGround=e,this.refreshGround()}canShowAxes(){return this._showAxes&&this._envMode==se.Editor}showHideAxes(e){this._showAxes=e,this._axesLayer&&this._axesLayer.refresh(),this.setRenderingNeeded()}showHideHighlight(e){this._showHighlight=e;const n=this.getSelectedRootMesh();this.highlightMesh(n,e),this.setRenderingNeeded()}setHighlightOver(e){this._highlightOver=e}highlightMesh(e,n){if(!this._showHighlight||this._envMode!=se.Editor){this.deleteHighlightLayer();return}e&&e instanceof window.BABYLON.Mesh&&(n?(this._highlightLayer||this.createHighlightLayer(),this._highlightLayer&&this._highlightLayer.addMesh(e,window.BABYLON.Color3.FromHexString(this._highlightColor))):this._highlightLayer&&this._highlightLayer.removeMesh(e)),this.setLongRenderingNeeded()}highlightMeshOver(e){if(!this._showHighlight||this._envMode!=se.Editor){this.deleteHighlightLayer();return}this._meshOver&&this._meshOver instanceof window.BABYLON.Mesh&&!this.isMeshSelected(this._meshOver)&&(e&&this._highlightOver?(this._highlightLayer||this.createHighlightLayer(),this._highlightLayer&&!this._highlightLayer.hasMesh(this._meshOver)&&this._highlightLayer.addMesh(this._meshOver,window.BABYLON.Color3.FromHexString(this.highlightOverColor))):this._highlightLayer&&this._highlightLayer.removeMesh(this._meshOver)),this.setLongRenderingNeeded()}showHideEditControl(e){this._scene&&this._camera&&this._canvas&&(this._editControlVisible=e,this._editControl&&(!e||this._manipulatedNode==null)&&(this._editControl.detach(),this._editControl=null),e&&this._manipulatedNode&&(this._editControl?this._editControl.switchTo(this._manipulatedNode):(this._editControl=new this._EditControl(this._manipulatedNode,this._camera,this._canvas,.75,!0),this._editControl.setRotSnapValue(3.14/18),this._editControl.setTransSnapValue(.5),this._editControl.setScaleSnapValue(.25),this._editControl.addActionEndListener(n=>{this.fireMeshesUpdateEvent()})),this.setEditingMode(this._editingMode)),this.setRenderingNeeded())}setEditingMode(e){this._editingMode=e,this._editControl&&(e===B.Translate?this._editControl.enableTranslation():e===B.Rotate?this._editControl.enableRotation():e===B.Scaling&&this._editControl.enableScaling()),this.setRenderingNeeded()}undoEditing(){this._editControl&&this._editControl.undo()}redoEditing(){this._editControl&&this._editControl.redo()}setEnvironmentMode(e){e!=this._envMode&&(this._envMode=e,this.refreshEnvironment())}async refreshEnvironment(){this._scene&&(this.setRenderingNeeded(),this._envMode==se.Editor?(this.disableAntialiasing(),this.resetEditorEnvironment(),this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null)):(this.deleteHighlightLayer(),this.refreshGround(),this._zkScene&&((!this._environmentManager||this._environmentManager.scene!=this._scene)&&(this._environmentManager=new Ih(this._zkScene,this._scene)),this._environmentManager.update(),this.setLongRenderingNeeded())),this.refreshGround(),this._lightsLayer&&this._lightsLayer.refresh(),this._axesLayer&&this._axesLayer.refresh(),this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera&&(this.autoRender=this._camera.useAutoRotationBehavior),this.setRenderingNeeded())}zoomOnMesh(e){this._sceneHelper&&this._sceneHelper.zoomOnMesh(e)}moveCameraToMeshPosition(e){if(this._scene&&this._sceneHelper&&this._camera&&this._camera instanceof window.BABYLON.ArcRotateCamera){const s=this._sceneHelper.getMeshHierarchyCenter(e),c=this._camera.target,u=this._camera.radius,m=s.subtract(c),b=m.length();if(isFinite(b)){let k=m.normalize(),W=c.add(k.scale(u));const ve=new window.BABYLON.Ray(W,k.scale(-1),u),Ae=this._scene.pickWithRay(ve,rt=>rt===e);if(Ae&&Ae.hit){const rt=new window.BABYLON.Vector3,re=new window.BABYLON.Quaternion,mt=new window.BABYLON.Vector3;e.getWorldMatrix().decompose(rt,re,mt),.1/rt.length()*100,Ae.pickedPoint;var n=Ae.getNormal();n&&(k=n.normalize(),W=c.add(k.scale(u)))}this._sceneHelper.animateCamera(c,W,1)}this.setRenderingNeeded()}}exportMeshToOBJ(e){if(!this._scene)return;const n=this._scene.getMeshByID(e);if(!n||!(n instanceof window.BABYLON.Mesh))return;const s=window.BABYLON.OBJExport.OBJ([n]);this.saveTextAsFile(s,n.name+".obj")}exportMeshGeometryToJson(e){if(!this._scene)return;const n=this._scene.getMeshByID(e);if(!n||!(n instanceof window.BABYLON.Mesh))return;const s={positions:n.getVerticesData(window.BABYLON.VertexBuffer.PositionKind),normals:n.getVerticesData(window.BABYLON.VertexBuffer.NormalKind),colors:n.getVerticesData(window.BABYLON.VertexBuffer.ColorKind),uvs:n.getVerticesData(window.BABYLON.VertexBuffer.UVKind),uvs2:n.getVerticesData(window.BABYLON.VertexBuffer.UV2Kind),indices:n.getIndices()},c=JSON.stringify(s,null,0);this.saveTextAsFile(c,n.name+".json")}enableDisableARForMesh(e,n){const s=this.getMeshByID(e);s&&(s.metadata||(s.metadata={}),s.metadata.AR=n)}isAREnabledForMesh(e){const n=this.getMeshByID(e);return n&&n.metadata?n.metadata.AR!==void 0?n.metadata.AR:!0:!1}enableDisableTryOnForMesh(e,n){const s=this.getMeshByID(e);s&&(s.metadata||(s.metadata={}),s.metadata.AR=n)}isTryOnEnabledForMesh(e){const n=this.getMeshByID(e);return n&&n.metadata?n.metadata.TryOn!==void 0?n.metadata.TryOn:!0:!1}splitSubMeshes(e){if(this._scene&&this._sceneHelper){const n=this._scene.getMeshByID(e);n&&this._sceneHelper.createMeshesFromSubMeshes(n)}}flipMeshFaces(e){const n=this.getMeshByID(e);if(!n)return;const s=c=>{c instanceof window.BABYLON.Mesh&&c.flipFaces(!0),c.getChildMeshes().forEach(u=>s(u))};s(n)}convertSceneToScreenPoint(e,n){if(this._canvas){let s=0,c=0,u=this._canvas;do s+=u.offsetLeft,c+=u.offsetTop,u=u.offsetParent;while(u);return{X:e+s,Y:n+c}}return null}saveTextAsFile(e,n){const s=e,c=new Blob([s],{type:"text/plain"}),u=window.URL.createObjectURL(c),m=n;this.downloadFile(m,u)}saveBytesAsFile(e,n){const s=new Blob([e]),c=window.URL.createObjectURL(s);this.downloadFile(n,c)}saveBlobAsFile(e,n,s){let c=null;s?c=window.URL.createObjectURL(new Blob([e],{type:s})):c=window.URL.createObjectURL(new Blob([e])),this.downloadFile(n,c)}downloadFile(e,n){var s=document.createElement("a");s.download=e,s.innerHTML="Download File",s.href=n,s.onclick=c=>{document.body.removeChild(s)},s.style.display="none",document.body.appendChild(s),s.click()}exportDracoEncodedToFile(e){if(!this._scene)return;const n=this._scene.getMeshByID(e);if(!n)return;const s=this.getDracoEncodedGeometry(n);s&&this.saveBytesAsFile(s,n.name+"_draco.dat")}getDracoEncodedGeometry(e){let n=null;if(this._scene&&e&&e instanceof window.BABYLON.Mesh){const c=e.getVerticesData(window.BABYLON.VertexBuffer.PositionKind),u=e.getVerticesData(window.BABYLON.VertexBuffer.NormalKind),m=e.getVerticesData(window.BABYLON.VertexBuffer.ColorKind),b=e.getVerticesData(window.BABYLON.VertexBuffer.UVKind),k=e.getVerticesData(window.BABYLON.VertexBuffer.UV2Kind),W=e.getIndices(),ve={};W&&(ve.indices=new Uint32Array(W)),c&&(ve.positions=new Float32Array(c)),u&&(ve.normals=new Float32Array(u)),b&&(ve.uvs=new Float32Array(b)),k&&(ve.uvs2=new Float32Array(k)),m&&(ve.colors=new Uint32Array(m));const Ae=DracoEncoderModule(),rt=new Ae.Encoder,re=new Ae.MeshBuilder,mt=new Ae.Mesh,nt=ve.indices.length/3,tn=ve.positions.length/3;re.AddFacesToMesh(mt,nt,ve.indices),re.AddFloatAttributeToMesh(mt,Ae.POSITION,tn,3,ve.positions),ve.normals&&re.AddFloatAttributeToMesh(mt,Ae.NORMAL,tn,3,ve.normals),ve.colors&&re.AddFloatAttributeToMesh(mt,Ae.COLOR,tn,4,ve.colors),ve.uvs&&re.AddFloatAttributeToMesh(mt,Ae.TEX_COORD,tn,2,ve.uvs),ve.uvs2&&re.AddFloatAttributeToMesh(mt,Ae.TEX_COORD,tn,2,ve.uvs2),rt.SetSpeedOptions(5,5),rt.SetAttributeQuantization(Ae.POSITION,14),rt.SetAttributeQuantization(Ae.TEX_COORD,12),rt.SetAttributeQuantization(Ae.NORMAL,10),rt.SetAttributeQuantization(Ae.COLOR,10),rt.SetAttributeQuantization(Ae.GENERIC,8),rt.SetEncodingMethod(Ae.MESH_EDGEBREAKER_ENCODING);const Ie=new Ae.DracoInt8Array,Kt=rt.EncodeMeshToDracoBuffer(mt,Ie);n=new ArrayBuffer(Kt);var s=new Int8Array(n);for(let At=0;At<Kt;++At)s[At]=Ie.GetValue(At);Ae.destroy(mt),Ae.destroy(Ie),Ae.destroy(rt),Ae.destroy(re)}return n}createCustomMesh(){let e=null;if(this._scene){e=new window.BABYLON.Mesh("custom",this._scene);var n=[-5,2,-3,-7,-2,-3,-3,-2,-3,5,2,3,7,-2,3,3,-2,3],s=[0,1,2,3,4,5],c=[1,0,0,1,1,0,0,1,1,0,0,1,0,1,0,0,0,1,1,0,0,1,0,1],u=[0,1,0,0,1,0],m=[];window.BABYLON.VertexData.ComputeNormals(n,s,m);const b=new window.BABYLON.VertexData;b.positions=n,b.indices=s,b.colors=c,b.normals=m,b.uvs=u,b.applyToMesh(e)}return e}createBox(e,n){let s=null,c=null;return this._scene&&this._sceneHelper&&(e&&(c=this._scene.getMeshByID(e)),s=this._sceneHelper.createBox(c,n),this.setLongRenderingNeeded()),s}getSceneBoundingBox(){let e=null;if(this._scene)for(let n=0;n<this._scene.meshes.length;n++){const s=this._scene.meshes[n];if(s&&s.metadata&&s.metadata.sceneBoundingBox){e=s;break}}return e}getOrCreateSceneBoundingBox(e=!0){let n=this.getSceneBoundingBox();return n||(n=this.createBoundingBox(null,"SceneBoundingBox",e),n&&(n.metadata||(n.metadata={}),n.metadata.boundingBox=!0,n.metadata.sceneBoundingBox=!0)),n}createSceneBoundingBox(e=!0){let n=this.getSceneBoundingBox();return n?n.isVisible=e:(n=this.createBoundingBox(null,"SceneBoundingBox",e),n&&(n.metadata||(n.metadata={}),n.metadata.boundingBox=!0,n.metadata.sceneBoundingBox=!0)),n}createBoundingBox(e,n,s=!0){let c=null;if(e&&(c=this.getMeshByID(e)),this._sceneHelper){var u=this._sceneHelper.createBoundingBox(c,n);return u&&(u.isVisible=s),this.setLongRenderingNeeded(),u}return null}createSphere(e,n){let s=null,c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=this._sceneHelper.createSphere(c,n),this.setLongRenderingNeeded()),s}createPlane(e,n){let s=null,c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=this._sceneHelper.createPlane(c,n),this.setLongRenderingNeeded()),s}createDisc(e,n){let s=null,c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=this._sceneHelper.createDisc(c,n),this.setLongRenderingNeeded()),s}createCylinder(e,n){let s=null,c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=this._sceneHelper.createCylinder(c,n),this.setLongRenderingNeeded()),s}createTorus(e,n){let s=null,c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=this._sceneHelper.createTorus(c,n),this.setLongRenderingNeeded()),s}createKnot(e,n){let s=null,c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=this._sceneHelper.createKnot(c,n),this.setLongRenderingNeeded()),s}createRibbon(e,n){let s=null,c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=this._sceneHelper.createRibbon(c,n),this.setLongRenderingNeeded()),s}async createRoundedCubeAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createRoundedCubeAsync(c,n),this.setLongRenderingNeeded()),s}async createRoundedCylinderAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createRoundedCylinderAsync(c,n),this.setLongRenderingNeeded()),s}async createMatBallAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createMatBallAsync(c,n),this.setLongRenderingNeeded()),s}async createMaleHeadAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createMaleHeadAsync(c,n),this.setLongRenderingNeeded()),s}async createFemaleHeadAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createFemaleHeadAsync(c,n),this.setLongRenderingNeeded()),s}async createPokemonBallAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createPokemonBallAsync(c,n),this.setLongRenderingNeeded()),s}async createShaderBallAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createShaderBallAsync(c,n),this.setLongRenderingNeeded()),s}async createBootsAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createBootsAsync(c,n),this.setLongRenderingNeeded()),s}async createSuzanneAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createSuzanneAsync(c,n),this.setLongRenderingNeeded()),s}async createStepPyramidAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createStepPyramidAsync(c,n),this.setLongRenderingNeeded()),s}async createTeapotAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createTeapotAsync(c,n),this.setLongRenderingNeeded()),s}async createAlloyWheelAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createAlloyWheelAsync(c,n),this.setLongRenderingNeeded()),s}async createTryonReferenceGlassesFrameAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.createTryonReferenceGlassesFrameAsync(c,n),this.setLongRenderingNeeded()),s}removeAllVTOReferenceMeshes(){if(!this.scene)return[];const e=[],n=[...this.scene.meshes];for(const s of n)s.name&&s.name.toLowerCase().includes("vto_reference")?s.dispose(!1,!0):e.push(s);return e}hideAllVTOFiles(e){for(const n of e)n.name&&n.name.toLowerCase().includes("vto_reference")&&(n.metadata||(n.metadata={}),n.metadata.TryOn=!1)}async createTryOnReferenceModelsAsync(e,n,s){let c=null,u=[];return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(u=await this._sceneHelper.createTryOnReferenceModelsAsync(c,n,s),this.fireMeshesUpdateEvent(),this.setRenderingNeeded(),this.hideAllVTOFiles(u)),u}setTryOnReferenceVisible(e){this._sceneHelper&&(this._sceneHelper.setTryOnReferenceVisible(e),this.setRenderingNeeded())}isTryOnReferenceVisible(){return this._sceneHelper?this._sceneHelper.isTryOnReferenceVisible():!1}scaleSceneToTryonReferenceModels(e){var n;this._sceneHelper&&(this._sceneHelper.scaleSceneToTryonReferenceModels(e),(n=this._sceneHelper)==null||n.setupShadows(this._zkScene),this.setRenderingNeeded())}getSceneScalingPercentageForVTO(){return this._sceneHelper?this._sceneHelper.getSceneScalingPercentageForVTO():100}setSceneScalePercentageForVTO(e){var n;this._sceneHelper&&(this._sceneHelper.setSceneScalePercentageForVTO(e),(n=this._sceneHelper)==null||n.setupShadows(this._zkScene),this.setRenderingNeeded())}getScenePositionPercentageForVTO(){return this._sceneHelper?this._sceneHelper.getScenePositionPercentageForVTO():{x:0,y:0,z:0}}setScenePositionPercentageForVTO(e,n,s){var c;this._sceneHelper&&(this._sceneHelper.setScenePositionPercentageForVTO(e,n,s),(c=this._sceneHelper)==null||c.setupShadows(this._zkScene),this.setRenderingNeeded())}getSceneRotationForVTO(){return this._sceneHelper?this._sceneHelper.getSceneRotationForVTO():{x:0,y:0,z:0}}setSceneRotationForVTO(e,n,s){var c;this._sceneHelper&&(this._sceneHelper.setSceneRotationForVTO(e,n,s),(c=this._sceneHelper)==null||c.setupShadows(this._zkScene),this.setRenderingNeeded())}setVTOReferenceVisible(e){this._sceneHelper&&(this._sceneHelper.setVTOReferenceVisible(e),this.setRenderingNeeded())}setShadowsVisibility(e){var n;this._sceneHelper&&(this._sceneHelper.setShadowsVisibility(e),(n=this._sceneHelper)==null||n.setupShadows(this._zkScene),this.setRenderingNeeded())}async importMeshesFromUrlAsync(e,n){let s=[],c=null;return this._scene&&e&&(c=this._scene.getMeshById(e)),this._sceneHelper&&(s=await this._sceneHelper.importMeshesFromUrlAsync(n,c),this.checkSceneEmptyEnvironmentTexture(),this.setLongRenderingNeeded()),s}async connectMeshToModelSideAsync(e,n,s){this._sceneDesignManager&&this._sceneDesignManager.connectMeshToModelSideAsync(e,n,s)}clearMeshDesignManagers(){this._sceneDesignManager&&this._sceneDesignManager.clearMeshDesignManagers()}getMeshDesignMananger(e,n){var s;return this._sceneDesignManager&&this.scene?(s=this._sceneDesignManager)==null?void 0:s.getMeshDesignMananger(e,n):null}translateDesignView(e,n,s,c){this._sceneDesignManager&&this._sceneDesignManager.translateDesignView(e,n,s,c)}rotateDesignView(e,n,s,c,u){this._sceneDesignManager&&this._sceneDesignManager.rotateDesignView(e,n,s,c,u)}scaleDesignView(e,n,s,c,u,m){this._sceneDesignManager&&this._sceneDesignManager.scaleDesignView(e,n,s,c,u,m)}async setDesignViewTextureUVChannelAsync(e,n,s){this._sceneDesignManager&&await this._sceneDesignManager.setDesignViewTextureUVChannelAsync(e,n,s)}async setDesignViewFormFactorAsync(e,n,s,c){this._sceneDesignManager&&await this._sceneDesignManager.setDesignViewFormFactorAsync(e,n,s,c)}getCurrentARMeshUsedForMeasure(){var e;return(e=this.scene)==null?void 0:e.meshes.find(n=>n.metadata&&n.metadata.sizecm)}getCurrentARSizeCm(){var e;const n=this.getCurrentARMeshUsedForMeasure();return(e=n==null?void 0:n.metadata)==null?void 0:e.sizecm}setSceneSizeCm(e,n){const s=this.getOrCreateSceneBoundingBox(!1);s&&this.setMeshSizeCm(s.id,e,n)}getSceneWidthCm(){const e=this.getSceneBoundingBox();return e&&e.metadata&&e.metadata.sizecm&&e.metadata.sizecm.width?e.metadata.sizecm.width:null}getSceneHeightCm(){const e=this.getSceneBoundingBox();return e&&e.metadata&&e.metadata.sizecm&&e.metadata.sizecm.height?e.metadata.sizecm.height:null}getSceneDepthCm(){const e=this.getSceneBoundingBox();return e&&e.metadata&&e.metadata.sizecm&&e.metadata.sizecm.depth?e.metadata.sizecm.depth:null}setMeshSizeCm(e,n,s){const c=this.getMeshByID(e);if(c){let u=null;n&&typeof n=="number"&&!isNaN(n)&&(s==="width"?u={width:n}:s==="height"?u={height:n}:s==="depth"&&(u={depth:n})),c.metadata||(c.metadata={}),c.metadata.sizecm=u}}getMeshWidthCm(e){const n=this.getMeshByID(e);return n&&n.metadata&&n.metadata.sizecm&&n.metadata.sizecm.width?n.metadata.sizecm.width:null}getMeshHeightCm(e){const n=this.getMeshByID(e);return n&&n.metadata&&n.metadata.sizecm&&n.metadata.sizecm.height?n.metadata.sizecm.height:null}getMeshDepthCm(e){const n=this.getMeshByID(e);return n&&n.metadata&&n.metadata.sizecm&&n.metadata.sizecm.depth?n.metadata.sizecm.depth:null}async getMaterialsPreviewsAsync(e,n,s,c,u=!0){const m=[];if(this._scene&&this._sceneHelper&&this._zkScene){const k=await this.getSceneRootUrl();if(k){const W=await tl.getPreviewsAsync(this._scene,k,e,{width:n,height:s},!0);for(var b in W.previewFiles)m.push(W.previewFiles[b])}}return m}async getAllMaterialsPreviewsAsync(e,n,s,c=!0){const u=[];if(this._scene&&this._sceneHelper&&this._zkScene){const m=this._sceneHelper.getAllMaterials().map(b=>b.id);return this.getMaterialsPreviewsAsync(m,e,n,s,c)}return u}async downloadMaterialsPreviewsAsync(e,n,s,c){if(this._scene&&this._sceneHelper&&this._zkScene){const u=await this.getSceneRootUrl();u&&await tl.downloadPreviewsAsync(this._scene,u,e,{width:n,height:s,crop:c})}}async downloadAllMaterialsPreviewsAsync(e,n,s){if(this._scene&&this._sceneHelper&&this._zkScene){const c=this._sceneHelper.getAllMaterials().map(u=>u.id);await this.downloadMaterialsPreviewsAsync(c,e,n,s)}}createEnvelopeMesh(e){if(this._scene&&this._sceneHelper){const n=this._scene.getMeshByID(e);if(n&&n instanceof window.BABYLON.Mesh)return this._sceneHelper.createEnvelopeMesh(n)}return null}expandMesh(e,n){if(this._scene&&this._sceneHelper){const s=this._scene.getMeshByID(e);s&&s instanceof window.BABYLON.Mesh&&this._sceneHelper.expandMesh(s,n)}}enableDisableMeshFacetData(e,n){if(this._scene&&this._sceneHelper){const s=this._scene.getMeshByID(e);s&&(n?s.updateFacetData():s.disableFacetData())}}enableDisableDepthSortFacets(e,n){if(this._scene&&this._sceneHelper){const s=this._scene.getMeshByID(e);s&&(s.mustDepthSortFacets=n)}}};Bc.EmptyGroupName="_dummy_";let Yh=Bc;var Rc=(y=>(y[y.Box=0]="Box",y[y.RoundedBox=1]="RoundedBox",y[y.Sphere=2]="Sphere",y[y.Plane=3]="Plane",y[y.Cylinder=4]="Cylinder",y[y.RoundedCylinder=5]="RoundedCylinder",y[y.Torus=6]="Torus",y[y.Knot=7]="Knot",y[y.Ribbon=8]="Ribbon",y[y.Custom=9]="Custom",y))(Rc||{});class md extends Yh{constructor(e){super(e),this._zkMaterial=null,this._material=null,this._meshType=0,this._mesh=null,this._materialCreatedListeners=[],this._filesInput=null}get zkMaterial(){return this._zkMaterial}get material(){return this._material}static async createMaterialEditorAsync(e){e||(e={authorizationToken:"",showGround:!1,editorBackgroundColor:"#33334c",showHighlight:!1,incrementalWorkersScriptsUrls:[]});const n=new md(e);return await n.initAsync(),n}deleteComponents(){super.deleteComponents(),this.deleteEditorMaterial(),this.deleteEditorMesh()}deleteEditorMaterial(){this._material&&(this._material.dispose(),this._material=null,this.fireMaterialCreatedEvent())}deleteEditorMesh(){this._mesh&&(this._mesh.dispose(),this._mesh=null),this._scene&&this._sceneHelper&&this._sceneHelper.getSceneMeshes().forEach(e=>e.dispose())}dispose(){super.dispose()}async createEmptySceneAsync(){await super.createEmptySceneAsync(),this.createEditorMaterial(void 0,"Standard"),await this.createEditorMeshAsync()}createEditorMaterial(e,n,s){let c=null;return n!="ShaderMaterial"?c=super.createMaterial(e,n,s):(c=this.createShaderMaterial(),c&&(c.id=Zakeke.generateUUID(),this.checkSceneEmptyEnvironmentTexture())),this._material=c,this.setRenderingNeeded(),this.fireMaterialCreatedEvent(),c}applyEditorMaterial(){this._material&&this._mesh&&this.applyMaterial(this._material,this._mesh)}async replaceSceneAsync(e){var n=null,s=null;this._material&&this._zkMaterial&&(n=this._material.serialize(),s=this._zkMaterial.get("rootUrl")),this.deleteScene(),this._scene=e,await this.setupSceneAsync(),n&&s?(this._material=window.BABYLON.Material.Parse(n,this._scene,s),this.fireMaterialCreatedEvent()):this.createEditorMaterial(void 0,"Standard"),this.applyEditorMaterial(),this.adjustCamera(!1)}createShaderMaterial(){let e=null;if(this._scene&&this._zkMaterial&&this._zkMaterial.get("shaders")){const s=this._zkMaterial.get("name")||"ShaderMaterial - "+Zakeke.makeID(5);var n={vertex:this._zkMaterial.get("shaders").get("name"),fragment:this._zkMaterial.get("shaders").get("name")};const c={attributes:this._zkMaterial.getShaderAttributeOptions(Zakeke.ShaderOptionType.Attribute),uniforms:this._zkMaterial.getShaderAttributeOptions(Zakeke.ShaderOptionType.Uniform),samplers:this._zkMaterial.getShaderAttributeOptions(Zakeke.ShaderOptionType.Sampler)};e=new window.BABYLON.ShaderMaterial(s,this._scene,n,c),this.setupShaderMaterialCameraPosition(e)}return e}createEditorMaterialFromJson(e,n){if(this._scene){var s=JSON.parse(e);this._material=window.BABYLON.Material.Parse(s,this._scene,n),this._material&&this.setupShaderMaterialCameraPosition(this._material),this.checkSceneEmptyEnvironmentTexture(),this.fireMaterialCreatedEvent()}}async createEditorMeshAsync(){switch(this.deleteEditorMesh(),this._meshType){case 0:this._mesh=this.createBox(null,"box");break;case 1:{const e=await this.createRoundedCubeAsync(null,"rounded box");e.length==1?this._mesh=e[0]:this._mesh=this.createGroup(null,"rounded box group",e)}break;case 2:this._mesh=this.createSphere(null,"sphere");break;case 3:this._mesh=this.createPlane(null,"plane");break;case 4:this._mesh=this.createCylinder(null,"cylinder");break;case 5:{const e=await this.createRoundedCylinderAsync(null,"rounded cylinder");e.length==1?this._mesh=e[0]:(this._mesh=this.createGroup(null,"rounded cylinder group"),e.forEach(n=>n.parent=this._mesh))}break;case 6:this._mesh=this.createTorus(null,"torus");break;case 7:this._mesh=this.createKnot(null,"knot");break;case 8:this._mesh=this.createRibbon(null,"ribbon");break}this.applyEditorMaterial(),this.adjustCamera(!1)}async setEditorMeshType(e){this._meshType=e,await this.createEditorMeshAsync()}async updateMaterialModelAsync(){if(this._zkMaterial&&this._material&&this._sceneHelper){const n=await this._sceneHelper.takeMaterialScreenshotAsync(this._material.id,500,450);this._zkMaterial.set("imageData",n);const s=this._zkMaterial.get("name");s&&s!=this._material.name&&(this._material.name=s);var e=this.getEditorMaterialJson();e&&this._zkMaterial.set("JSON",e)}}getEditorMaterialJson(){if(this._scene&&this._sceneHelper&&this._material){const s=this._sceneHelper;this._scene.textures.forEach(c=>{if(s.isTextureWithUrl(c)&&c.url){var u=c.url.lastIndexOf("/");if(u!==-1&&(u=c.url.lastIndexOf("/",u-1),u!==-1&&(u=c.url.lastIndexOf("/",u-1),u!=-1))){var m=c.url.substring(u+1);c.name=m,c.url=c.name}}});var e=this._material.serialize(),n=JSON.stringify(e);return n}return null}setMaterialModel(e,n){if(this._zkMaterial=e,this.deleteEditorMaterial(),this._zkMaterial&&this._zkMaterial instanceof Zakeke.Material){const u=this._zkMaterial.get("shaders");if(u){const m=u.get("name"),b=u.get("vertex"),k=u.get("fragment");m&&b&&k&&this.setupShadersStore({name:m,vertex:b,fragment:k})}var s=this._zkMaterial.get("JSON"),c=this._zkMaterial.get("rootUrl");s&&c?this.createEditorMaterialFromJson(s,c):this.createEditorMaterial(this._zkMaterial.get("name")||void 0,n),this._material&&(this._material.id=this._zkMaterial.getMaterialID())}else this.createEditorMaterial(void 0,n);this.applyEditorMaterial(),this.adjustCamera(!1),this.setupShaderMaterialsCameraPosition()}getTexturesUploadUrl(e){return this._zkMaterial?this._zkMaterial.getTexturesUrl():""}loadEditorMaterialTextureFiles__(e,n,s,c){this.loadTextureFiles(e,this._material,n,!1,s,c)}loadEditorMaterialTextureFiles(e,n,s,c){if(!this._material)return;const u=re=>{let mt=re.lastIndexOf(".");if(mt!==-1)return re.substring(mt)},m=(re,mt)=>{const nt=re.lastIndexOf(".");return nt!==-1?re.substring(0,nt).endsWith("_"+mt):!1};if(!(!e||e.length==0)){var b=this.canLoadCubemap(this._material,n)&&(e.length==6||u(e[0].name)==".dds"||u(e[0].name)==".hdr"),k=[];if(b&&e.length==6){var W=["px","py","pz","nx","ny","nz"];for(let re=0;re<e.length;re++){const mt=e[re];let nt=-1;for(var ve=0;ve<W.length;ve++)if(m(mt.name,W[ve])){k.push(mt),nt=ve;break}nt!==-1&&W.splice(nt,1)}if(W.length!=0){var Ae="Immagini per la cube map non valide";c&&c(Ae),Logger.info(Ae);return}}else k.push(e[0]);var rt=new FormData;for(let re=0;re<k.length;re++)rt.append("file-"+re,k[re]);jQuery.ajax({url:this.getTexturesUploadUrl(this._material.id),data:rt,cache:!1,contentType:!1,processData:!1,type:"POST",success:re=>{Object.prototype.toString.call(re)==="[object Array]"&&(b?this.setEditorMaterialCubeTextureImages(re,n):this.setEditorMaterialTextureImage(re[0],n)),s&&s()},error:(re,mt,nt)=>{var tn="An error occurred: "+mt+"nError: "+nt;c&&c(tn)}})}}setEditorMaterialTextureImage(e,n){if(this._scene&&this._zkMaterial&&this._material&&e&&e.imageUrl&&e.fileObjectID){const s=new Zakeke.MaterialTextureImage;s.set("textureImageID",Zakeke.generateUUID()),s.set("fileObjectID",e.fileObjectID),s.set("imageUrl",e.imageUrl),this._zkMaterial.get("textureImages").push(s);const c=e.imageUrl,u=new window.BABYLON.Texture(c,this._scene),m=this.getMaterialTexture(this._material,n);m&&m instanceof window.BABYLON.Texture&&(u.uScale=m.uScale,u.vScale=m.vScale,u.uOffset=m.uOffset,u.vOffset=m.vOffset,u.uAng=m.uAng,u.vAng=m.vAng,u.level=m.level,u.coordinatesIndex=m.coordinatesIndex,u.coordinatesMode=m.coordinatesMode,u.hasAlpha=m.hasAlpha,u.wrapU=m.wrapU,u.wrapV=m.wrapV),this.applyTexture(u,this._material,n),m&&!this.isTextureUsed(m)&&m.dispose()}}setEditorMaterialCubeTextureImages(e,n){if(!this._scene||!this._zkMaterial||!this._material||Object.prototype.toString.call(e)!="[object Array]")return;let s=null;const c=()=>this.setRenderingNeeded();if(e.length==1){let k=e[0];if(k.imageUrl&&k.fileObjectID){k.imageUrl.endsWith(".dds")?s=window.BABYLON.CubeTexture.CreateFromPrefilteredData(k.imageUrl,this._scene):k.imageUrl.endsWith(".hdr")&&(s=new window.BABYLON.HDRCubeTexture(k.imageUrl,this._scene,512,void 0,void 0,void 0,void 0,c));var u=new Zakeke.MaterialTextureImage;u.set("textureImageID",Zakeke.generateUUID()),u.set("fileObjectID",k.fileObjectID),u.set("imageUrl",k.imageUrl),this._zkMaterial.get("textureImages").push(u)}}else if(e.length==6){const k=["px","py","pz","nx","ny","nz"];let W="";const ve=[],Ae=[],rt=(nt,tn)=>{var Ie=nt.lastIndexOf(".");if(Ie!==-1){var Kt=nt.substring(0,Ie);return Kt.endsWith("_"+tn)}return!1},re=(nt,tn)=>{const Ie=nt.lastIndexOf(".");if(Ie!==-1){var Kt=nt.substring(0,Ie);if(Kt.endsWith("_"+tn))return Kt.substring(0,Kt.length-("_"+tn).length)}return null},mt=(nt,tn)=>{const Ie=nt.lastIndexOf("_"+tn);return Ie!==-1?nt.substr(Ie):null};for(let nt=0;nt<k.length;nt++){var m=k[nt];for(let tn=0;tn<e.length;tn++){const Ie=e[tn].imageUrl;if(Ie&&rt(Ie,m)){ve.push(Ie),Ae.push(mt(Ie,m)??""),W||(W=re(Ie,m)??"");break}}}for(let nt=0;nt<e.length;nt++){const tn=e[nt];if(tn.imageUrl&&tn.fileObjectID!=null){const Ie=tn.imageUrl,Kt=tn.fileObjectID,At=new Zakeke.MaterialTextureImage;At.set("textureImageID",Zakeke.generateUUID()),At.set("fileObjectID",Kt),At.set("imageUrl",Ie),this._zkMaterial.get("textureImages").push(At)}}s=new window.BABYLON.CubeTexture(W,this._scene,Ae,!1,ve)}if(s){var b=this.getMaterialTexture(this._material,n);this.applyTexture(s,this._material,n),b&&!this.isTextureUsed(b)&&b.dispose()}}fireMaterialCreatedEvent(){for(let e=0;e<this._materialCreatedListeners.length;++e)this._materialCreatedListeners[e]()}addMaterialCreatedListener(e){this._materialCreatedListeners.push(e)}loadFiles(e,n,s){if(!this._engine||!this._scene||!this._sceneHelper)return;const c=this._engine,u=this._scene,m=this._sceneHelper;this._filesInput||(this._filesInput=new window.BABYLON.FilesInput(c,u,async(b,k)=>{await this.replaceSceneAsync(k);const W=m.getSceneMeshes();this._meshType=9,this._mesh=this.createGroup(null,"group",W),this.applyEditorMaterial(),n&&n()},null,null,null,null,null,(b,k,W)=>{s&&s(W)})),this._filesInput&&this._filesInput.loadFiles(e)}}const ep="https://3dviewer-img.futurefashionsolution.com/_common/envMap/default.env",Nc={general:{backgroundAlpha:1,backgroundColor:"#ffffff",removeDefaultBackground:!0,environmentTexture:ep,matchSameNameTextures:null,antialiasEnabled:null,tryOnEnabled:null,tryOnSettings:null,arEnabled:!0,arOnTheFly:!1,arAnchor:null,arScale:null,meshSize:{height:null,width:null,depth:null},frameDAMSettings:null,useDelayedTextureLoading:null,useDelayedMaterialLoading:null,useMaterialOffloading:null,prefetchMeshes:null,prefetchMaterials:null,exposure:1,contrast:1,preventDefaultLights:!0,forceDracoCompression:null,fitToScreenMargin:1,environmentOptions:{mipMaps:!1,generateHarmonics:!1,gammaSpace:!0,prefilterOnLoad:!0,rotationY:1.57,intensity:1,pbrIntensity:1}},environment:{sizeAuto:null,mainColor:"#CB0E00",backgroundColor:"#5CA0B5",skybox:{createSkybox:!1,size:null,texture:null,extensions:null,files:null,color:null,blur:0},ground:{createGround:!1,size:null,texture:null,color:null,opacity:null,enableShadow:!1,shadowLevel:null,enableMirror:!0,mirrorBlurKernel:null},shadows:{enableShadows:!1,groundSizeMultiplierWidth:1.2,groundSizeMultiplierLength:1.5,shadowMapSize:51,shadowHexColor:"#454545",contactHardeningUVRatio:.4,useContactHardeningShadow:!0,useBlurCloseExponentialShadowMap:!1,usePercentageCloserFiltering:!1,useKernelBlur:!0,usePoissonSampling:!1,blurBoxOffset:10,blurScale:4,blurKernel:10,depthScale:1,shadowDarkness:.3}},camera:{autoRotate:!1,rotationSpeed:.2,changeRotationDirection:!1,contrast:1.6,exposure:.8,toneMappingEnabled:!1,toneMappingType:0,setInitialZoomToBoundingBox:!0,initialZoomToBBInertiaDamping:.9,initialZoomToBBModelSizeRadius:.7,initialZoomToBBScrollZoomEnabled:!0,initialZoomToBBScrollLowerLimit:2,initialZoomToBBScrollUpperLimit:2,positionScale:null,limitLowerRadius:!0,zoomEnabled:null,useMinZoomPerc:!0,minZoomPerc:.5,useMaxZoomPerc:!0,maxZoomPerc:1.5,lowerAlphaLimit:null,upperAlphaLimit:null,fixedAlphaAngle:null,fixedBetaAngle:null,useLowerAlphaLimit:null,lowerBetaLimit:0,upperBetaLimit:3,useLowerBetaLimit:null,useUpperAlphaLimit:null,useUpperBetaLimit:null,zoom:0,position:{alpha:1.57,beta:1.55,fov:.4},animateIntro:!1},model:{rotation:{x:0,y:0,z:0},position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},config:{doubleSided:!1}},glow:null,infoPoints:null,uiConfig:{urlARIcon:"",urlLoader:""},lights:{directionalLightBack:{position:{x:-1,y:0,z:-1},general:{intensity:3,visible:!0}},directionalLightLeft:{position:{x:0,y:0,z:1},general:{intensity:1.2,visible:!0}},pointLightBack:{position:{x:1,y:.5,z:.5},general:{intensity:2,visible:!1}},pointLightFront:{position:{x:-1,y:.5,z:-.5},general:{intensity:2,visible:!1}},hemisphereLight:{position:{x:0,y:30.76964,z:0},general:{intensity:.5,visible:!1}}},textures:null,animations:{runAtStart:!0,loop:!0,speed:1}}},"./node_modules/axios/lib/adapters/adapters.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>me});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/helpers/null.js"),Fe=K("./node_modules/axios/lib/adapters/xhr.js"),Be=K("./node_modules/axios/lib/core/AxiosError.js");const ce={http:B.default,xhr:Fe.default};se.default.forEach(ce,(we,ae)=>{if(we){try{Object.defineProperty(we,"name",{value:ae})}catch{}Object.defineProperty(we,"adapterName",{value:ae})}});const me={getAdapter:we=>{we=se.default.isArray(we)?we:[we];const{length:ae}=we;let De,Pe;for(let Se=0;Se<ae&&(De=we[Se],!(Pe=se.default.isString(De)?ce[De.toLowerCase()]:De));Se++);if(!Pe)throw Pe===!1?new Be.default(`Adapter ${De} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(se.default.hasOwnProp(ce,De)?`Adapter '${De}' is not available in the build`:`Unknown adapter '${De}'`);if(!se.default.isFunction(Pe))throw new TypeError("adapter is not a function");return Pe},adapters:ce}},"./node_modules/axios/lib/adapters/xhr.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>at});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/core/settle.js"),Fe=K("./node_modules/axios/lib/helpers/cookies.js"),Be=K("./node_modules/axios/lib/helpers/buildURL.js"),ce=K("./node_modules/axios/lib/core/buildFullPath.js"),me=K("./node_modules/axios/lib/helpers/isURLSameOrigin.js"),we=K("./node_modules/axios/lib/defaults/transitional.js"),ae=K("./node_modules/axios/lib/core/AxiosError.js"),De=K("./node_modules/axios/lib/cancel/CanceledError.js"),Pe=K("./node_modules/axios/lib/helpers/parseProtocol.js"),Se=K("./node_modules/axios/lib/platform/browser/index.js"),ee=K("./node_modules/axios/lib/core/AxiosHeaders.js"),Qe=K("./node_modules/axios/lib/helpers/speedometer.js");function wt(Ne,Je){let pt=0;const ot=(0,Qe.default)(50,250);return Jt=>{const Qt=Jt.loaded,ut=Jt.lengthComputable?Jt.total:void 0,St=Qt-pt,Lt=ot(St),Ue=Qt<=ut;pt=Qt;const Ut={loaded:Qt,total:ut,progress:ut?Qt/ut:void 0,bytes:St,rate:Lt||void 0,estimated:Lt&&ut&&Ue?(ut-Qt)/Lt:void 0,event:Jt};Ut[Je?"download":"upload"]=!0,Ne(Ut)}}const at=typeof XMLHttpRequest<"u"&&function(Ne){return new Promise(function(pt,ot){let Jt=Ne.data;const Qt=ee.default.from(Ne.headers).normalize(),ut=Ne.responseType;let St;function Lt(){Ne.cancelToken&&Ne.cancelToken.unsubscribe(St),Ne.signal&&Ne.signal.removeEventListener("abort",St)}se.default.isFormData(Jt)&&(Se.default.isStandardBrowserEnv||Se.default.isStandardBrowserWebWorkerEnv)&&Qt.setContentType(!1);let Ue=new XMLHttpRequest;if(Ne.auth){const $t=Ne.auth.username||"",sn=Ne.auth.password?unescape(encodeURIComponent(Ne.auth.password)):"";Qt.set("Authorization","Basic "+btoa($t+":"+sn))}const Ut=(0,ce.default)(Ne.baseURL,Ne.url);Ue.open(Ne.method.toUpperCase(),(0,Be.default)(Ut,Ne.params,Ne.paramsSerializer),!0),Ue.timeout=Ne.timeout;function Ot(){if(!Ue)return;const $t=ee.default.from("getAllResponseHeaders"in Ue&&Ue.getAllResponseHeaders()),lt={data:!ut||ut==="text"||ut==="json"?Ue.responseText:Ue.response,status:Ue.status,statusText:Ue.statusText,headers:$t,config:Ne,request:Ue};(0,B.default)(function(zt){pt(zt),Lt()},function(zt){ot(zt),Lt()},lt),Ue=null}if("onloadend"in Ue?Ue.onloadend=Ot:Ue.onreadystatechange=function(){!Ue||Ue.readyState!==4||Ue.status===0&&!(Ue.responseURL&&Ue.responseURL.indexOf("file:")===0)||setTimeout(Ot)},Ue.onabort=function(){Ue&&(ot(new ae.default("Request aborted",ae.default.ECONNABORTED,Ne,Ue)),Ue=null)},Ue.onerror=function(){ot(new ae.default("Network Error",ae.default.ERR_NETWORK,Ne,Ue)),Ue=null},Ue.ontimeout=function(){let sn=Ne.timeout?"timeout of "+Ne.timeout+"ms exceeded":"timeout exceeded";const lt=Ne.transitional||we.default;Ne.timeoutErrorMessage&&(sn=Ne.timeoutErrorMessage),ot(new ae.default(sn,lt.clarifyTimeoutError?ae.default.ETIMEDOUT:ae.default.ECONNABORTED,Ne,Ue)),Ue=null},Se.default.isStandardBrowserEnv){const $t=(Ne.withCredentials||(0,me.default)(Ut))&&Ne.xsrfCookieName&&Fe.default.read(Ne.xsrfCookieName);$t&&Qt.set(Ne.xsrfHeaderName,$t)}Jt===void 0&&Qt.setContentType(null),"setRequestHeader"in Ue&&se.default.forEach(Qt.toJSON(),function(sn,lt){Ue.setRequestHeader(lt,sn)}),se.default.isUndefined(Ne.withCredentials)||(Ue.withCredentials=!!Ne.withCredentials),ut&&ut!=="json"&&(Ue.responseType=Ne.responseType),typeof Ne.onDownloadProgress=="function"&&Ue.addEventListener("progress",wt(Ne.onDownloadProgress,!0)),typeof Ne.onUploadProgress=="function"&&Ue.upload&&Ue.upload.addEventListener("progress",wt(Ne.onUploadProgress)),(Ne.cancelToken||Ne.signal)&&(St=$t=>{Ue&&(ot(!$t||$t.type?new De.default(null,Ne,Ue):$t),Ue.abort(),Ue=null)},Ne.cancelToken&&Ne.cancelToken.subscribe(St),Ne.signal&&(Ne.signal.aborted?St():Ne.signal.addEventListener("abort",St)));const rn=(0,Pe.default)(Ut);if(rn&&Se.default.protocols.indexOf(rn)===-1){ot(new ae.default("Unsupported protocol "+rn+":",ae.default.ERR_BAD_REQUEST,Ne));return}Ue.send(Jt||null)})}},"./node_modules/axios/lib/axios.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>pt});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/helpers/bind.js"),Fe=K("./node_modules/axios/lib/core/Axios.js"),Be=K("./node_modules/axios/lib/core/mergeConfig.js"),ce=K("./node_modules/axios/lib/defaults/index.js"),me=K("./node_modules/axios/lib/helpers/formDataToJSON.js"),we=K("./node_modules/axios/lib/cancel/CanceledError.js"),ae=K("./node_modules/axios/lib/cancel/CancelToken.js"),De=K("./node_modules/axios/lib/cancel/isCancel.js"),Pe=K("./node_modules/axios/lib/env/data.js"),Se=K("./node_modules/axios/lib/helpers/toFormData.js"),ee=K("./node_modules/axios/lib/core/AxiosError.js"),Qe=K("./node_modules/axios/lib/helpers/spread.js"),wt=K("./node_modules/axios/lib/helpers/isAxiosError.js"),Dt=K("./node_modules/axios/lib/core/AxiosHeaders.js"),at=K("./node_modules/axios/lib/helpers/HttpStatusCode.js");function Ne(ot){const Jt=new Fe.default(ot),Qt=(0,B.default)(Fe.default.prototype.request,Jt);return se.default.extend(Qt,Fe.default.prototype,Jt,{allOwnKeys:!0}),se.default.extend(Qt,Jt,null,{allOwnKeys:!0}),Qt.create=function(St){return Ne((0,Be.default)(ot,St))},Qt}const Je=Ne(ce.default);Je.Axios=Fe.default,Je.CanceledError=we.default,Je.CancelToken=ae.default,Je.isCancel=De.default,Je.VERSION=Pe.VERSION,Je.toFormData=Se.default,Je.AxiosError=ee.default,Je.Cancel=Je.CanceledError,Je.all=function(Jt){return Promise.all(Jt)},Je.spread=Qe.default,Je.isAxiosError=wt.default,Je.mergeConfig=Be.default,Je.AxiosHeaders=Dt.default,Je.formToJSON=ot=>(0,me.default)(se.default.isHTMLForm(ot)?new FormData(ot):ot),Je.HttpStatusCode=at.default,Je.default=Je;const pt=Je},"./node_modules/axios/lib/cancel/CancelToken.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Fe});var se=K("./node_modules/axios/lib/cancel/CanceledError.js");class B{constructor(ce){if(typeof ce!="function")throw new TypeError("executor must be a function.");let me;this.promise=new Promise(function(De){me=De});const we=this;this.promise.then(ae=>{if(!we._listeners)return;let De=we._listeners.length;for(;De-- >0;)we._listeners[De](ae);we._listeners=null}),this.promise.then=ae=>{let De;const Pe=new Promise(Se=>{we.subscribe(Se),De=Se}).then(ae);return Pe.cancel=function(){we.unsubscribe(De)},Pe},ce(function(De,Pe,Se){we.reason||(we.reason=new se.default(De,Pe,Se),me(we.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(ce){if(this.reason){ce(this.reason);return}this._listeners?this._listeners.push(ce):this._listeners=[ce]}unsubscribe(ce){if(!this._listeners)return;const me=this._listeners.indexOf(ce);me!==-1&&this._listeners.splice(me,1)}static source(){let ce;return{token:new B(function(ae){ce=ae}),cancel:ce}}}const Fe=B},"./node_modules/axios/lib/cancel/CanceledError.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Be});var se=K("./node_modules/axios/lib/core/AxiosError.js"),B=K("./node_modules/axios/lib/utils.js");function Fe(ce,me,we){se.default.call(this,ce??"canceled",se.default.ERR_CANCELED,me,we),this.name="CanceledError"}B.default.inherits(Fe,se.default,{__CANCEL__:!0});const Be=Fe},"./node_modules/axios/lib/cancel/isCancel.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>se});function se(B){return!!(B&&B.__CANCEL__)}},"./node_modules/axios/lib/core/Axios.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Se});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/helpers/buildURL.js"),Fe=K("./node_modules/axios/lib/core/InterceptorManager.js"),Be=K("./node_modules/axios/lib/core/dispatchRequest.js"),ce=K("./node_modules/axios/lib/core/mergeConfig.js"),me=K("./node_modules/axios/lib/core/buildFullPath.js"),we=K("./node_modules/axios/lib/helpers/validator.js"),ae=K("./node_modules/axios/lib/core/AxiosHeaders.js");const De=we.default.validators;class Pe{constructor(Qe){this.defaults=Qe,this.interceptors={request:new Fe.default,response:new Fe.default}}request(Qe,wt){typeof Qe=="string"?(wt=wt||{},wt.url=Qe):wt=Qe||{},wt=(0,ce.default)(this.defaults,wt);const{transitional:Dt,paramsSerializer:at,headers:Ne}=wt;Dt!==void 0&&we.default.assertOptions(Dt,{silentJSONParsing:De.transitional(De.boolean),forcedJSONParsing:De.transitional(De.boolean),clarifyTimeoutError:De.transitional(De.boolean)},!1),at!=null&&(se.default.isFunction(at)?wt.paramsSerializer={serialize:at}:we.default.assertOptions(at,{encode:De.function,serialize:De.function},!0)),wt.method=(wt.method||this.defaults.method||"get").toLowerCase();let Je;Je=Ne&&se.default.merge(Ne.common,Ne[wt.method]),Je&&se.default.forEach(["delete","get","head","post","put","patch","common"],Ue=>{delete Ne[Ue]}),wt.headers=ae.default.concat(Je,Ne);const pt=[];let ot=!0;this.interceptors.request.forEach(function(Ut){typeof Ut.runWhen=="function"&&Ut.runWhen(wt)===!1||(ot=ot&&Ut.synchronous,pt.unshift(Ut.fulfilled,Ut.rejected))});const Jt=[];this.interceptors.response.forEach(function(Ut){Jt.push(Ut.fulfilled,Ut.rejected)});let Qt,ut=0,St;if(!ot){const Ue=[Be.default.bind(this),void 0];for(Ue.unshift.apply(Ue,pt),Ue.push.apply(Ue,Jt),St=Ue.length,Qt=Promise.resolve(wt);ut<St;)Qt=Qt.then(Ue[ut++],Ue[ut++]);return Qt}St=pt.length;let Lt=wt;for(ut=0;ut<St;){const Ue=pt[ut++],Ut=pt[ut++];try{Lt=Ue(Lt)}catch(Ot){Ut.call(this,Ot);break}}try{Qt=Be.default.call(this,Lt)}catch(Ue){return Promise.reject(Ue)}for(ut=0,St=Jt.length;ut<St;)Qt=Qt.then(Jt[ut++],Jt[ut++]);return Qt}getUri(Qe){Qe=(0,ce.default)(this.defaults,Qe);const wt=(0,me.default)(Qe.baseURL,Qe.url);return(0,B.default)(wt,Qe.params,Qe.paramsSerializer)}}se.default.forEach(["delete","get","head","options"],function(Qe){Pe.prototype[Qe]=function(wt,Dt){return this.request((0,ce.default)(Dt||{},{method:Qe,url:wt,data:(Dt||{}).data}))}}),se.default.forEach(["post","put","patch"],function(Qe){function wt(Dt){return function(Ne,Je,pt){return this.request((0,ce.default)(pt||{},{method:Qe,headers:Dt?{"Content-Type":"multipart/form-data"}:{},url:Ne,data:Je}))}}Pe.prototype[Qe]=wt(),Pe.prototype[Qe+"Form"]=wt(!0)});const Se=Pe},"./node_modules/axios/lib/core/AxiosError.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>ce});var se=K("./node_modules/axios/lib/utils.js");function B(me,we,ae,De,Pe){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=me,this.name="AxiosError",we&&(this.code=we),ae&&(this.config=ae),De&&(this.request=De),Pe&&(this.response=Pe)}se.default.inherits(B,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:se.default.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Fe=B.prototype,Be={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(me=>{Be[me]={value:me}}),Object.defineProperties(B,Be),Object.defineProperty(Fe,"isAxiosError",{value:!0}),B.from=(me,we,ae,De,Pe,Se)=>{const ee=Object.create(Fe);return se.default.toFlatObject(me,ee,function(wt){return wt!==Error.prototype},Qe=>Qe!=="isAxiosError"),B.call(ee,me.message,we,ae,De,Pe),ee.cause=me,ee.name=me.name,Se&&Object.assign(ee,Se),ee};const ce=B},"./node_modules/axios/lib/core/AxiosHeaders.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>ee});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/helpers/parseHeaders.js");const Fe=Symbol("internals");function Be(Qe){return Qe&&String(Qe).trim().toLowerCase()}function ce(Qe){return Qe===!1||Qe==null?Qe:se.default.isArray(Qe)?Qe.map(ce):String(Qe)}function me(Qe){const wt=Object.create(null),Dt=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let at;for(;at=Dt.exec(Qe);)wt[at[1]]=at[2];return wt}const we=Qe=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(Qe.trim());function ae(Qe,wt,Dt,at,Ne){if(se.default.isFunction(at))return at.call(this,wt,Dt);if(Ne&&(wt=Dt),!!se.default.isString(wt)){if(se.default.isString(at))return wt.indexOf(at)!==-1;if(se.default.isRegExp(at))return at.test(wt)}}function De(Qe){return Qe.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(wt,Dt,at)=>Dt.toUpperCase()+at)}function Pe(Qe,wt){const Dt=se.default.toCamelCase(" "+wt);["get","set","has"].forEach(at=>{Object.defineProperty(Qe,at+Dt,{value:function(Ne,Je,pt){return this[at].call(this,wt,Ne,Je,pt)},configurable:!0})})}class Se{constructor(wt){wt&&this.set(wt)}set(wt,Dt,at){const Ne=this;function Je(ot,Jt,Qt){const ut=Be(Jt);if(!ut)throw new Error("header name must be a non-empty string");const St=se.default.findKey(Ne,ut);(!St||Ne[St]===void 0||Qt===!0||Qt===void 0&&Ne[St]!==!1)&&(Ne[St||Jt]=ce(ot))}const pt=(ot,Jt)=>se.default.forEach(ot,(Qt,ut)=>Je(Qt,ut,Jt));return se.default.isPlainObject(wt)||wt instanceof this.constructor?pt(wt,Dt):se.default.isString(wt)&&(wt=wt.trim())&&!we(wt)?pt((0,B.default)(wt),Dt):wt!=null&&Je(Dt,wt,at),this}get(wt,Dt){if(wt=Be(wt),wt){const at=se.default.findKey(this,wt);if(at){const Ne=this[at];if(!Dt)return Ne;if(Dt===!0)return me(Ne);if(se.default.isFunction(Dt))return Dt.call(this,Ne,at);if(se.default.isRegExp(Dt))return Dt.exec(Ne);throw new TypeError("parser must be boolean|regexp|function")}}}has(wt,Dt){if(wt=Be(wt),wt){const at=se.default.findKey(this,wt);return!!(at&&this[at]!==void 0&&(!Dt||ae(this,this[at],at,Dt)))}return!1}delete(wt,Dt){const at=this;let Ne=!1;function Je(pt){if(pt=Be(pt),pt){const ot=se.default.findKey(at,pt);ot&&(!Dt||ae(at,at[ot],ot,Dt))&&(delete at[ot],Ne=!0)}}return se.default.isArray(wt)?wt.forEach(Je):Je(wt),Ne}clear(wt){const Dt=Object.keys(this);let at=Dt.length,Ne=!1;for(;at--;){const Je=Dt[at];(!wt||ae(this,this[Je],Je,wt,!0))&&(delete this[Je],Ne=!0)}return Ne}normalize(wt){const Dt=this,at={};return se.default.forEach(this,(Ne,Je)=>{const pt=se.default.findKey(at,Je);if(pt){Dt[pt]=ce(Ne),delete Dt[Je];return}const ot=wt?De(Je):String(Je).trim();ot!==Je&&delete Dt[Je],Dt[ot]=ce(Ne),at[ot]=!0}),this}concat(...wt){return this.constructor.concat(this,...wt)}toJSON(wt){const Dt=Object.create(null);return se.default.forEach(this,(at,Ne)=>{at!=null&&at!==!1&&(Dt[Ne]=wt&&se.default.isArray(at)?at.join(", "):at)}),Dt}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([wt,Dt])=>wt+": "+Dt).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(wt){return wt instanceof this?wt:new this(wt)}static concat(wt,...Dt){const at=new this(wt);return Dt.forEach(Ne=>at.set(Ne)),at}static accessor(wt){const at=(this[Fe]=this[Fe]={accessors:{}}).accessors,Ne=this.prototype;function Je(pt){const ot=Be(pt);at[ot]||(Pe(Ne,pt),at[ot]=!0)}return se.default.isArray(wt)?wt.forEach(Je):Je(wt),this}}Se.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),se.default.freezeMethods(Se.prototype),se.default.freezeMethods(Se);const ee=Se},"./node_modules/axios/lib/core/InterceptorManager.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Fe});var se=K("./node_modules/axios/lib/utils.js");class B{constructor(){this.handlers=[]}use(ce,me,we){return this.handlers.push({fulfilled:ce,rejected:me,synchronous:we?we.synchronous:!1,runWhen:we?we.runWhen:null}),this.handlers.length-1}eject(ce){this.handlers[ce]&&(this.handlers[ce]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(ce){se.default.forEach(this.handlers,function(we){we!==null&&ce(we)})}}const Fe=B},"./node_modules/axios/lib/core/buildFullPath.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Fe});var se=K("./node_modules/axios/lib/helpers/isAbsoluteURL.js"),B=K("./node_modules/axios/lib/helpers/combineURLs.js");function Fe(Be,ce){return Be&&!(0,se.default)(ce)?(0,B.default)(Be,ce):ce}},"./node_modules/axios/lib/core/dispatchRequest.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>ae});var se=K("./node_modules/axios/lib/core/transformData.js"),B=K("./node_modules/axios/lib/cancel/isCancel.js"),Fe=K("./node_modules/axios/lib/defaults/index.js"),Be=K("./node_modules/axios/lib/cancel/CanceledError.js"),ce=K("./node_modules/axios/lib/core/AxiosHeaders.js"),me=K("./node_modules/axios/lib/adapters/adapters.js");function we(De){if(De.cancelToken&&De.cancelToken.throwIfRequested(),De.signal&&De.signal.aborted)throw new Be.default(null,De)}function ae(De){return we(De),De.headers=ce.default.from(De.headers),De.data=se.default.call(De,De.transformRequest),["post","put","patch"].indexOf(De.method)!==-1&&De.headers.setContentType("application/x-www-form-urlencoded",!1),me.default.getAdapter(De.adapter||Fe.default.adapter)(De).then(function(ee){return we(De),ee.data=se.default.call(De,De.transformResponse,ee),ee.headers=ce.default.from(ee.headers),ee},function(ee){return(0,B.default)(ee)||(we(De),ee&&ee.response&&(ee.response.data=se.default.call(De,De.transformResponse,ee.response),ee.response.headers=ce.default.from(ee.response.headers))),Promise.reject(ee)})}},"./node_modules/axios/lib/core/mergeConfig.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Be});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/core/AxiosHeaders.js");const Fe=ce=>ce instanceof B.default?ce.toJSON():ce;function Be(ce,me){me=me||{};const we={};function ae(wt,Dt,at){return se.default.isPlainObject(wt)&&se.default.isPlainObject(Dt)?se.default.merge.call({caseless:at},wt,Dt):se.default.isPlainObject(Dt)?se.default.merge({},Dt):se.default.isArray(Dt)?Dt.slice():Dt}function De(wt,Dt,at){if(se.default.isUndefined(Dt)){if(!se.default.isUndefined(wt))return ae(void 0,wt,at)}else return ae(wt,Dt,at)}function Pe(wt,Dt){if(!se.default.isUndefined(Dt))return ae(void 0,Dt)}function Se(wt,Dt){if(se.default.isUndefined(Dt)){if(!se.default.isUndefined(wt))return ae(void 0,wt)}else return ae(void 0,Dt)}function ee(wt,Dt,at){if(at in me)return ae(wt,Dt);if(at in ce)return ae(void 0,wt)}const Qe={url:Pe,method:Pe,data:Pe,baseURL:Se,transformRequest:Se,transformResponse:Se,paramsSerializer:Se,timeout:Se,timeoutMessage:Se,withCredentials:Se,adapter:Se,responseType:Se,xsrfCookieName:Se,xsrfHeaderName:Se,onUploadProgress:Se,onDownloadProgress:Se,decompress:Se,maxContentLength:Se,maxBodyLength:Se,beforeRedirect:Se,transport:Se,httpAgent:Se,httpsAgent:Se,cancelToken:Se,socketPath:Se,responseEncoding:Se,validateStatus:ee,headers:(wt,Dt)=>De(Fe(wt),Fe(Dt),!0)};return se.default.forEach(Object.keys(ce).concat(Object.keys(me)),function(Dt){const at=Qe[Dt]||De,Ne=at(ce[Dt],me[Dt],Dt);se.default.isUndefined(Ne)&&at!==ee||(we[Dt]=Ne)}),we}},"./node_modules/axios/lib/core/settle.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>B});var se=K("./node_modules/axios/lib/core/AxiosError.js");function B(Fe,Be,ce){const me=ce.config.validateStatus;!ce.status||!me||me(ce.status)?Fe(ce):Be(new se.default("Request failed with status code "+ce.status,[se.default.ERR_BAD_REQUEST,se.default.ERR_BAD_RESPONSE][Math.floor(ce.status/100)-4],ce.config,ce.request,ce))}},"./node_modules/axios/lib/core/transformData.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Be});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/defaults/index.js"),Fe=K("./node_modules/axios/lib/core/AxiosHeaders.js");function Be(ce,me){const we=this||B.default,ae=me||we,De=Fe.default.from(ae.headers);let Pe=ae.data;return se.default.forEach(ce,function(ee){Pe=ee.call(we,Pe,De.normalize(),me?me.status:void 0)}),De.normalize(),Pe}},"./node_modules/axios/lib/defaults/index.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Se});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/core/AxiosError.js"),Fe=K("./node_modules/axios/lib/defaults/transitional.js"),Be=K("./node_modules/axios/lib/helpers/toFormData.js"),ce=K("./node_modules/axios/lib/helpers/toURLEncodedForm.js"),me=K("./node_modules/axios/lib/platform/browser/index.js"),we=K("./node_modules/axios/lib/helpers/formDataToJSON.js");const ae={"Content-Type":void 0};function De(ee,Qe,wt){if(se.default.isString(ee))try{return(Qe||JSON.parse)(ee),se.default.trim(ee)}catch(Dt){if(Dt.name!=="SyntaxError")throw Dt}return(wt||JSON.stringify)(ee)}const Pe={transitional:Fe.default,adapter:["xhr","http"],transformRequest:[function(Qe,wt){const Dt=wt.getContentType()||"",at=Dt.indexOf("application/json")>-1,Ne=se.default.isObject(Qe);if(Ne&&se.default.isHTMLForm(Qe)&&(Qe=new FormData(Qe)),se.default.isFormData(Qe))return at&&at?JSON.stringify((0,we.default)(Qe)):Qe;if(se.default.isArrayBuffer(Qe)||se.default.isBuffer(Qe)||se.default.isStream(Qe)||se.default.isFile(Qe)||se.default.isBlob(Qe))return Qe;if(se.default.isArrayBufferView(Qe))return Qe.buffer;if(se.default.isURLSearchParams(Qe))return wt.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),Qe.toString();let pt;if(Ne){if(Dt.indexOf("application/x-www-form-urlencoded")>-1)return(0,ce.default)(Qe,this.formSerializer).toString();if((pt=se.default.isFileList(Qe))||Dt.indexOf("multipart/form-data")>-1){const ot=this.env&&this.env.FormData;return(0,Be.default)(pt?{"files[]":Qe}:Qe,ot&&new ot,this.formSerializer)}}return Ne||at?(wt.setContentType("application/json",!1),De(Qe)):Qe}],transformResponse:[function(Qe){const wt=this.transitional||Pe.transitional,Dt=wt&&wt.forcedJSONParsing,at=this.responseType==="json";if(Qe&&se.default.isString(Qe)&&(Dt&&!this.responseType||at)){const Je=!(wt&&wt.silentJSONParsing)&&at;try{return JSON.parse(Qe)}catch(pt){if(Je)throw pt.name==="SyntaxError"?B.default.from(pt,B.default.ERR_BAD_RESPONSE,this,null,this.response):pt}}return Qe}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:me.default.classes.FormData,Blob:me.default.classes.Blob},validateStatus:function(Qe){return Qe>=200&&Qe<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};se.default.forEach(["delete","get","head"],function(Qe){Pe.headers[Qe]={}}),se.default.forEach(["post","put","patch"],function(Qe){Pe.headers[Qe]=se.default.merge(ae)});const Se=Pe},"./node_modules/axios/lib/defaults/transitional.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>se});const se={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},"./node_modules/axios/lib/env/data.js":(je,be,K)=>{K.r(be),K.d(be,{VERSION:()=>se});const se="1.3.6"},"./node_modules/axios/lib/helpers/AxiosURLSearchParams.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>ce});var se=K("./node_modules/axios/lib/helpers/toFormData.js");function B(me){const we={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(me).replace(/[!'()~]|%20|%00/g,function(De){return we[De]})}function Fe(me,we){this._pairs=[],me&&(0,se.default)(me,this,we)}const Be=Fe.prototype;Be.append=function(we,ae){this._pairs.push([we,ae])},Be.toString=function(we){const ae=we?function(De){return we.call(this,De,B)}:B;return this._pairs.map(function(Pe){return ae(Pe[0])+"="+ae(Pe[1])},"").join("&")};const ce=Fe},"./node_modules/axios/lib/helpers/HttpStatusCode.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>B});const se={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(se).forEach(([Fe,Be])=>{se[Be]=Fe});const B=se},"./node_modules/axios/lib/helpers/bind.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>se});function se(B,Fe){return function(){return B.apply(Fe,arguments)}}},"./node_modules/axios/lib/helpers/buildURL.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Be});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/helpers/AxiosURLSearchParams.js");function Fe(ce){return encodeURIComponent(ce).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Be(ce,me,we){if(!me)return ce;const ae=we&&we.encode||Fe,De=we&&we.serialize;let Pe;if(De?Pe=De(me,we):Pe=se.default.isURLSearchParams(me)?me.toString():new B.default(me,we).toString(ae),Pe){const Se=ce.indexOf("#");Se!==-1&&(ce=ce.slice(0,Se)),ce+=(ce.indexOf("?")===-1?"?":"&")+Pe}return ce}},"./node_modules/axios/lib/helpers/combineURLs.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>se});function se(B,Fe){return Fe?B.replace(/\/+$/,"")+"/"+Fe.replace(/^\/+/,""):B}},"./node_modules/axios/lib/helpers/cookies.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Fe});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/platform/browser/index.js");const Fe=B.default.isStandardBrowserEnv?function(){return{write:function(me,we,ae,De,Pe,Se){const ee=[];ee.push(me+"="+encodeURIComponent(we)),se.default.isNumber(ae)&&ee.push("expires="+new Date(ae).toGMTString()),se.default.isString(De)&&ee.push("path="+De),se.default.isString(Pe)&&ee.push("domain="+Pe),Se===!0&&ee.push("secure"),document.cookie=ee.join("; ")},read:function(me){const we=document.cookie.match(new RegExp("(^|;\\s*)("+me+")=([^;]*)"));return we?decodeURIComponent(we[3]):null},remove:function(me){this.write(me,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"./node_modules/axios/lib/helpers/formDataToJSON.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>ce});var se=K("./node_modules/axios/lib/utils.js");function B(me){return se.default.matchAll(/\w+|\[(\w*)]/g,me).map(we=>we[0]==="[]"?"":we[1]||we[0])}function Fe(me){const we={},ae=Object.keys(me);let De;const Pe=ae.length;let Se;for(De=0;De<Pe;De++)Se=ae[De],we[Se]=me[Se];return we}function Be(me){function we(ae,De,Pe,Se){let ee=ae[Se++];const Qe=Number.isFinite(+ee),wt=Se>=ae.length;return ee=!ee&&se.default.isArray(Pe)?Pe.length:ee,wt?(se.default.hasOwnProp(Pe,ee)?Pe[ee]=[Pe[ee],De]:Pe[ee]=De,!Qe):((!Pe[ee]||!se.default.isObject(Pe[ee]))&&(Pe[ee]=[]),we(ae,De,Pe[ee],Se)&&se.default.isArray(Pe[ee])&&(Pe[ee]=Fe(Pe[ee])),!Qe)}if(se.default.isFormData(me)&&se.default.isFunction(me.entries)){const ae={};return se.default.forEachEntry(me,(De,Pe)=>{we(B(De),Pe,ae,0)}),ae}return null}const ce=Be},"./node_modules/axios/lib/helpers/isAbsoluteURL.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>se});function se(B){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(B)}},"./node_modules/axios/lib/helpers/isAxiosError.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>B});var se=K("./node_modules/axios/lib/utils.js");function B(Fe){return se.default.isObject(Fe)&&Fe.isAxiosError===!0}},"./node_modules/axios/lib/helpers/isURLSameOrigin.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Fe});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/platform/browser/index.js");const Fe=B.default.isStandardBrowserEnv?function(){const ce=/(msie|trident)/i.test(navigator.userAgent),me=document.createElement("a");let we;function ae(De){let Pe=De;return ce&&(me.setAttribute("href",Pe),Pe=me.href),me.setAttribute("href",Pe),{href:me.href,protocol:me.protocol?me.protocol.replace(/:$/,""):"",host:me.host,search:me.search?me.search.replace(/^\?/,""):"",hash:me.hash?me.hash.replace(/^#/,""):"",hostname:me.hostname,port:me.port,pathname:me.pathname.charAt(0)==="/"?me.pathname:"/"+me.pathname}}return we=ae(window.location.href),function(Pe){const Se=se.default.isString(Pe)?ae(Pe):Pe;return Se.protocol===we.protocol&&Se.host===we.host}}():function(){return function(){return!0}}()},"./node_modules/axios/lib/helpers/null.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>se});const se=null},"./node_modules/axios/lib/helpers/parseHeaders.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Fe});var se=K("./node_modules/axios/lib/utils.js");const B=se.default.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Fe=Be=>{const ce={};let me,we,ae;return Be&&Be.split(`
`).forEach(function(Pe){ae=Pe.indexOf(":"),me=Pe.substring(0,ae).trim().toLowerCase(),we=Pe.substring(ae+1).trim(),!(!me||ce[me]&&B[me])&&(me==="set-cookie"?ce[me]?ce[me].push(we):ce[me]=[we]:ce[me]=ce[me]?ce[me]+", "+we:we)}),ce}},"./node_modules/axios/lib/helpers/parseProtocol.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>se});function se(B){const Fe=/^([-+\w]{1,25})(:?\/\/|:)/.exec(B);return Fe&&Fe[1]||""}},"./node_modules/axios/lib/helpers/speedometer.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>B});function se(Fe,Be){Fe=Fe||10;const ce=new Array(Fe),me=new Array(Fe);let we=0,ae=0,De;return Be=Be!==void 0?Be:1e3,function(Se){const ee=Date.now(),Qe=me[ae];De||(De=ee),ce[we]=Se,me[we]=ee;let wt=ae,Dt=0;for(;wt!==we;)Dt+=ce[wt++],wt=wt%Fe;if(we=(we+1)%Fe,we===ae&&(ae=(ae+1)%Fe),ee-De<Be)return;const at=Qe&&ee-Qe;return at?Math.round(Dt*1e3/at):void 0}}const B=se},"./node_modules/axios/lib/helpers/spread.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>se});function se(B){return function(Be){return B.apply(null,Be)}}},"./node_modules/axios/lib/helpers/toFormData.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Pe});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/core/AxiosError.js"),Fe=K("./node_modules/axios/lib/helpers/null.js");function Be(Se){return se.default.isPlainObject(Se)||se.default.isArray(Se)}function ce(Se){return se.default.endsWith(Se,"[]")?Se.slice(0,-2):Se}function me(Se,ee,Qe){return Se?Se.concat(ee).map(function(Dt,at){return Dt=ce(Dt),!Qe&&at?"["+Dt+"]":Dt}).join(Qe?".":""):ee}function we(Se){return se.default.isArray(Se)&&!Se.some(Be)}const ae=se.default.toFlatObject(se.default,{},null,function(ee){return/^is[A-Z]/.test(ee)});function De(Se,ee,Qe){if(!se.default.isObject(Se))throw new TypeError("target must be an object");ee=ee||new(Fe.default||FormData),Qe=se.default.toFlatObject(Qe,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ue,Ut){return!se.default.isUndefined(Ut[Ue])});const wt=Qe.metaTokens,Dt=Qe.visitor||Jt,at=Qe.dots,Ne=Qe.indexes,pt=(Qe.Blob||typeof Blob<"u"&&Blob)&&se.default.isSpecCompliantForm(ee);if(!se.default.isFunction(Dt))throw new TypeError("visitor must be a function");function ot(Lt){if(Lt===null)return"";if(se.default.isDate(Lt))return Lt.toISOString();if(!pt&&se.default.isBlob(Lt))throw new B.default("Blob is not supported. Use a Buffer instead.");return se.default.isArrayBuffer(Lt)||se.default.isTypedArray(Lt)?pt&&typeof Blob=="function"?new Blob([Lt]):Buffer.from(Lt):Lt}function Jt(Lt,Ue,Ut){let Ot=Lt;if(Lt&&!Ut&&typeof Lt=="object"){if(se.default.endsWith(Ue,"{}"))Ue=wt?Ue:Ue.slice(0,-2),Lt=JSON.stringify(Lt);else if(se.default.isArray(Lt)&&we(Lt)||(se.default.isFileList(Lt)||se.default.endsWith(Ue,"[]"))&&(Ot=se.default.toArray(Lt)))return Ue=ce(Ue),Ot.forEach(function($t,sn){!(se.default.isUndefined($t)||$t===null)&&ee.append(Ne===!0?me([Ue],sn,at):Ne===null?Ue:Ue+"[]",ot($t))}),!1}return Be(Lt)?!0:(ee.append(me(Ut,Ue,at),ot(Lt)),!1)}const Qt=[],ut=Object.assign(ae,{defaultVisitor:Jt,convertValue:ot,isVisitable:Be});function St(Lt,Ue){if(!se.default.isUndefined(Lt)){if(Qt.indexOf(Lt)!==-1)throw Error("Circular reference detected in "+Ue.join("."));Qt.push(Lt),se.default.forEach(Lt,function(Ot,rn){(!(se.default.isUndefined(Ot)||Ot===null)&&Dt.call(ee,Ot,se.default.isString(rn)?rn.trim():rn,Ue,ut))===!0&&St(Ot,Ue?Ue.concat(rn):[rn])}),Qt.pop()}}if(!se.default.isObject(Se))throw new TypeError("data must be an object");return St(Se),ee}const Pe=De},"./node_modules/axios/lib/helpers/toURLEncodedForm.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>Be});var se=K("./node_modules/axios/lib/utils.js"),B=K("./node_modules/axios/lib/helpers/toFormData.js"),Fe=K("./node_modules/axios/lib/platform/browser/index.js");function Be(ce,me){return(0,B.default)(ce,new Fe.default.classes.URLSearchParams,Object.assign({visitor:function(we,ae,De,Pe){return Fe.default.isNode&&se.default.isBuffer(we)?(this.append(ae,we.toString("base64")),!1):Pe.defaultVisitor.apply(this,arguments)}},me))}},"./node_modules/axios/lib/helpers/validator.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>me});var se=K("./node_modules/axios/lib/env/data.js"),B=K("./node_modules/axios/lib/core/AxiosError.js");const Fe={};["object","boolean","number","function","string","symbol"].forEach((we,ae)=>{Fe[we]=function(Pe){return typeof Pe===we||"a"+(ae<1?"n ":" ")+we}});const Be={};Fe.transitional=function(ae,De,Pe){function Se(ee,Qe){return"[Axios v"+se.VERSION+"] Transitional option '"+ee+"'"+Qe+(Pe?". "+Pe:"")}return(ee,Qe,wt)=>{if(ae===!1)throw new B.default(Se(Qe," has been removed"+(De?" in "+De:"")),B.default.ERR_DEPRECATED);return De&&!Be[Qe]&&(Be[Qe]=!0,console.warn(Se(Qe," has been deprecated since v"+De+" and will be removed in the near future"))),ae?ae(ee,Qe,wt):!0}};function ce(we,ae,De){if(typeof we!="object")throw new B.default("options must be an object",B.default.ERR_BAD_OPTION_VALUE);const Pe=Object.keys(we);let Se=Pe.length;for(;Se-- >0;){const ee=Pe[Se],Qe=ae[ee];if(Qe){const wt=we[ee],Dt=wt===void 0||Qe(wt,ee,we);if(Dt!==!0)throw new B.default("option "+ee+" must be "+Dt,B.default.ERR_BAD_OPTION_VALUE);continue}if(De!==!0)throw new B.default("Unknown option "+ee,B.default.ERR_BAD_OPTION)}}const me={assertOptions:ce,validators:Fe}},"./node_modules/axios/lib/platform/browser/classes/Blob.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>se});const se=typeof Blob<"u"?Blob:null},"./node_modules/axios/lib/platform/browser/classes/FormData.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>se});const se=typeof FormData<"u"?FormData:null},"./node_modules/axios/lib/platform/browser/classes/URLSearchParams.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>B});var se=K("./node_modules/axios/lib/helpers/AxiosURLSearchParams.js");const B=typeof URLSearchParams<"u"?URLSearchParams:se.default},"./node_modules/axios/lib/platform/browser/index.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>me});var se=K("./node_modules/axios/lib/platform/browser/classes/URLSearchParams.js"),B=K("./node_modules/axios/lib/platform/browser/classes/FormData.js"),Fe=K("./node_modules/axios/lib/platform/browser/classes/Blob.js");const Be=(()=>{let we;return typeof navigator<"u"&&((we=navigator.product)==="ReactNative"||we==="NativeScript"||we==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),ce=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",me={isBrowser:!0,classes:{URLSearchParams:se.default,FormData:B.default,Blob:Fe.default},isStandardBrowserEnv:Be,isStandardBrowserWebWorkerEnv:ce,protocols:["http","https","file","blob","url","data"]}},"./node_modules/axios/lib/utils.js":(je,be,K)=>{K.r(be),K.d(be,{default:()=>en});var se=K("./node_modules/axios/lib/helpers/bind.js");const{toString:B}=Object.prototype,{getPrototypeOf:Fe}=Object,Be=(bt=>Vt=>{const _n=B.call(Vt);return bt[_n]||(bt[_n]=_n.slice(8,-1).toLowerCase())})(Object.create(null)),ce=bt=>(bt=bt.toLowerCase(),Vt=>Be(Vt)===bt),me=bt=>Vt=>typeof Vt===bt,{isArray:we}=Array,ae=me("undefined");function De(bt){return bt!==null&&!ae(bt)&&bt.constructor!==null&&!ae(bt.constructor)&&Qe(bt.constructor.isBuffer)&&bt.constructor.isBuffer(bt)}const Pe=ce("ArrayBuffer");function Se(bt){let Vt;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?Vt=ArrayBuffer.isView(bt):Vt=bt&&bt.buffer&&Pe(bt.buffer),Vt}const ee=me("string"),Qe=me("function"),wt=me("number"),Dt=bt=>bt!==null&&typeof bt=="object",at=bt=>bt===!0||bt===!1,Ne=bt=>{if(Be(bt)!=="object")return!1;const Vt=Fe(bt);return(Vt===null||Vt===Object.prototype||Object.getPrototypeOf(Vt)===null)&&!(Symbol.toStringTag in bt)&&!(Symbol.iterator in bt)},Je=ce("Date"),pt=ce("File"),ot=ce("Blob"),Jt=ce("FileList"),Qt=bt=>Dt(bt)&&Qe(bt.pipe),ut=bt=>{let Vt;return bt&&(typeof FormData=="function"&&bt instanceof FormData||Qe(bt.append)&&((Vt=Be(bt))==="formdata"||Vt==="object"&&Qe(bt.toString)&&bt.toString()==="[object FormData]"))},St=ce("URLSearchParams"),Lt=bt=>bt.trim?bt.trim():bt.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ue(bt,Vt,{allOwnKeys:_n=!1}={}){if(bt===null||typeof bt>"u")return;let Yn,or;if(typeof bt!="object"&&(bt=[bt]),we(bt))for(Yn=0,or=bt.length;Yn<or;Yn++)Vt.call(null,bt[Yn],Yn,bt);else{const lr=_n?Object.getOwnPropertyNames(bt):Object.keys(bt),Jn=lr.length;let $n;for(Yn=0;Yn<Jn;Yn++)$n=lr[Yn],Vt.call(null,bt[$n],$n,bt)}}function Ut(bt,Vt){Vt=Vt.toLowerCase();const _n=Object.keys(bt);let Yn=_n.length,or;for(;Yn-- >0;)if(or=_n[Yn],Vt===or.toLowerCase())return or;return null}const Ot=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Um,rn=bt=>!ae(bt)&&bt!==Ot;function $t(){const{caseless:bt}=rn(this)&&this||{},Vt={},_n=(Yn,or)=>{const lr=bt&&Ut(Vt,or)||or;Ne(Vt[lr])&&Ne(Yn)?Vt[lr]=$t(Vt[lr],Yn):Ne(Yn)?Vt[lr]=$t({},Yn):we(Yn)?Vt[lr]=Yn.slice():Vt[lr]=Yn};for(let Yn=0,or=arguments.length;Yn<or;Yn++)arguments[Yn]&&Ue(arguments[Yn],_n);return Vt}const sn=(bt,Vt,_n,{allOwnKeys:Yn}={})=>(Ue(Vt,(or,lr)=>{_n&&Qe(or)?bt[lr]=(0,se.default)(or,_n):bt[lr]=or},{allOwnKeys:Yn}),bt),lt=bt=>(bt.charCodeAt(0)===65279&&(bt=bt.slice(1)),bt),Zt=(bt,Vt,_n,Yn)=>{bt.prototype=Object.create(Vt.prototype,Yn),bt.prototype.constructor=bt,Object.defineProperty(bt,"super",{value:Vt.prototype}),_n&&Object.assign(bt.prototype,_n)},zt=(bt,Vt,_n,Yn)=>{let or,lr,Jn;const $n={};if(Vt=Vt||{},bt==null)return Vt;do{for(or=Object.getOwnPropertyNames(bt),lr=or.length;lr-- >0;)Jn=or[lr],(!Yn||Yn(Jn,bt,Vt))&&!$n[Jn]&&(Vt[Jn]=bt[Jn],$n[Jn]=!0);bt=_n!==!1&&Fe(bt)}while(bt&&(!_n||_n(bt,Vt))&&bt!==Object.prototype);return Vt},Le=(bt,Vt,_n)=>{bt=String(bt),(_n===void 0||_n>bt.length)&&(_n=bt.length),_n-=Vt.length;const Yn=bt.indexOf(Vt,_n);return Yn!==-1&&Yn===_n},Mt=bt=>{if(!bt)return null;if(we(bt))return bt;let Vt=bt.length;if(!wt(Vt))return null;const _n=new Array(Vt);for(;Vt-- >0;)_n[Vt]=bt[Vt];return _n},Rt=(bt=>Vt=>bt&&Vt instanceof bt)(typeof Uint8Array<"u"&&Fe(Uint8Array)),tt=(bt,Vt)=>{const Yn=(bt&&bt[Symbol.iterator]).call(bt);let or;for(;(or=Yn.next())&&!or.done;){const lr=or.value;Vt.call(bt,lr[0],lr[1])}},We=(bt,Vt)=>{let _n;const Yn=[];for(;(_n=bt.exec(Vt))!==null;)Yn.push(_n);return Yn},C=ce("HTMLFormElement"),U=bt=>bt.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(_n,Yn,or){return Yn.toUpperCase()+or}),Q=(({hasOwnProperty:bt})=>(Vt,_n)=>bt.call(Vt,_n))(Object.prototype),fe=ce("RegExp"),de=(bt,Vt)=>{const _n=Object.getOwnPropertyDescriptors(bt),Yn={};Ue(_n,(or,lr)=>{Vt(or,lr,bt)!==!1&&(Yn[lr]=or)}),Object.defineProperties(bt,Yn)},Ce=bt=>{de(bt,(Vt,_n)=>{if(Qe(bt)&&["arguments","caller","callee"].indexOf(_n)!==-1)return!1;const Yn=bt[_n];if(Qe(Yn)){if(Vt.enumerable=!1,"writable"in Vt){Vt.writable=!1;return}Vt.set||(Vt.set=()=>{throw Error("Can not rewrite read-only method '"+_n+"'")})}})},Ye=(bt,Vt)=>{const _n={},Yn=or=>{or.forEach(lr=>{_n[lr]=!0})};return we(bt)?Yn(bt):Yn(String(bt).split(Vt)),_n},Ke=()=>{},ct=(bt,Vt)=>(bt=+bt,Number.isFinite(bt)?bt:Vt),_t="abcdefghijklmnopqrstuvwxyz",qe="0123456789",ht={DIGIT:qe,ALPHA:_t,ALPHA_DIGIT:_t+_t.toUpperCase()+qe},Pt=(bt=16,Vt=ht.ALPHA_DIGIT)=>{let _n="";const{length:Yn}=Vt;for(;bt--;)_n+=Vt[Math.random()*Yn|0];return _n};function xt(bt){return!!(bt&&Qe(bt.append)&&bt[Symbol.toStringTag]==="FormData"&&bt[Symbol.iterator])}const en={isArray:we,isArrayBuffer:Pe,isBuffer:De,isFormData:ut,isArrayBufferView:Se,isString:ee,isNumber:wt,isBoolean:at,isObject:Dt,isPlainObject:Ne,isUndefined:ae,isDate:Je,isFile:pt,isBlob:ot,isRegExp:fe,isFunction:Qe,isStream:Qt,isURLSearchParams:St,isTypedArray:Rt,isFileList:Jt,forEach:Ue,merge:$t,extend:sn,trim:Lt,stripBOM:lt,inherits:Zt,toFlatObject:zt,kindOf:Be,kindOfTest:ce,endsWith:Le,toArray:Mt,forEachEntry:tt,matchAll:We,isHTMLForm:C,hasOwnProperty:Q,hasOwnProp:Q,reduceDescriptors:de,freezeMethods:Ce,toObjectSet:Ye,toCamelCase:U,noop:Ke,toFiniteNumber:ct,findKey:Ut,global:Ot,isContextDefined:rn,ALPHABET:ht,generateString:Pt,isSpecCompliantForm:xt,toJSONObject:bt=>{const Vt=new Array(10),_n=(Yn,or)=>{if(Dt(Yn)){if(Vt.indexOf(Yn)>=0)return;if(!("toJSON"in Yn)){Vt[or]=Yn;const lr=we(Yn)?[]:{};return Ue(Yn,(Jn,$n)=>{const Tn=_n(Jn,or+1);!ae(Tn)&&(lr[$n]=Tn)}),Vt[or]=void 0,lr}}return Yn};return _n(bt,0)}}}},Ve={};function st(je){var be=Ve[je];if(be!==void 0)return be.exports;var K=Ve[je]={id:je,loaded:!1,exports:{}};return Te[je].call(K.exports,K,K.exports,st),K.loaded=!0,K.exports}st.n=je=>{var be=je&&je.__esModule?()=>je.default:()=>je;return st.d(be,{a:be}),be},st.d=(je,be)=>{for(var K in be)st.o(be,K)&&!st.o(je,K)&&Object.defineProperty(je,K,{enumerable:!0,get:be[K]})},st.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),st.o=(je,be)=>Object.prototype.hasOwnProperty.call(je,be),st.r=je=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(je,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(je,"__esModule",{value:!0})},st.nmd=je=>(je.paths=[],je.children||(je.children=[]),je);var Tt=st("./src/index.tsx");return Tt})())}(l0)),l0.exports}var r_=sO();function ja(E,H,{checkForDefaultPrevented:L=!0}={}){return function(Te){if(E==null||E(Te),L===!1||!Te.defaultPrevented)return H==null?void 0:H(Te)}}function yb(E,H){if(typeof E=="function")return E(H);E!=null&&(E.current=H)}function p1(...E){return H=>{let L=!1;const le=E.map(Te=>{const Ve=yb(Te,H);return!L&&typeof Ve=="function"&&(L=!0),Ve});if(L)return()=>{for(let Te=0;Te<le.length;Te++){const Ve=le[Te];typeof Ve=="function"?Ve():yb(E[Te],null)}}}}function jo(...E){return hn.useCallback(p1(...E),E)}function aO(E,H){const L=hn.createContext(H),le=Ve=>{const{children:st,...Tt}=Ve,je=hn.useMemo(()=>Tt,Object.values(Tt));return bn.jsx(L.Provider,{value:je,children:st})};le.displayName=E+"Provider";function Te(Ve){const st=hn.useContext(L);if(st)return st;if(H!==void 0)return H;throw new Error(`\`${Ve}\` must be used within \`${E}\``)}return[le,Te]}function xm(E,H=[]){let L=[];function le(Ve,st){const Tt=hn.createContext(st),je=L.length;L=[...L,st];const be=se=>{var we;const{scope:B,children:Fe,...Be}=se,ce=((we=B==null?void 0:B[E])==null?void 0:we[je])||Tt,me=hn.useMemo(()=>Be,Object.values(Be));return bn.jsx(ce.Provider,{value:me,children:Fe})};be.displayName=Ve+"Provider";function K(se,B){var ce;const Fe=((ce=B==null?void 0:B[E])==null?void 0:ce[je])||Tt,Be=hn.useContext(Fe);if(Be)return Be;if(st!==void 0)return st;throw new Error(`\`${se}\` must be used within \`${Ve}\``)}return[be,K]}const Te=()=>{const Ve=L.map(st=>hn.createContext(st));return function(Tt){const je=(Tt==null?void 0:Tt[E])||Ve;return hn.useMemo(()=>({[`__scope${E}`]:{...Tt,[E]:je}}),[Tt,je])}};return Te.scopeName=E,[le,oO(Te,...H)]}function oO(...E){const H=E[0];if(E.length===1)return H;const L=()=>{const le=E.map(Te=>({useScope:Te(),scopeName:Te.scopeName}));return function(Ve){const st=le.reduce((Tt,{useScope:je,scopeName:be})=>{const se=je(Ve)[`__scope${be}`];return{...Tt,...se}},{});return hn.useMemo(()=>({[`__scope${H.scopeName}`]:st}),[st])}};return L.scopeName=H.scopeName,L}var i_=Yb();const lO=n_(i_);var zg=hn.forwardRef((E,H)=>{const{children:L,...le}=E,Te=hn.Children.toArray(L),Ve=Te.find(cO);if(Ve){const st=Ve.props.children,Tt=Te.map(je=>je===Ve?hn.Children.count(st)>1?hn.Children.only(null):hn.isValidElement(st)?st.props.children:null:je);return bn.jsx(L0,{...le,ref:H,children:hn.isValidElement(st)?hn.cloneElement(st,void 0,Tt):null})}return bn.jsx(L0,{...le,ref:H,children:L})});zg.displayName="Slot";var L0=hn.forwardRef((E,H)=>{const{children:L,...le}=E;if(hn.isValidElement(L)){const Te=fO(L),Ve=hO(le,L.props);return L.type!==hn.Fragment&&(Ve.ref=H?p1(H,Te):Te),hn.cloneElement(L,Ve)}return hn.Children.count(L)>1?hn.Children.only(null):null});L0.displayName="SlotClone";var uO=({children:E})=>bn.jsx(bn.Fragment,{children:E});function cO(E){return hn.isValidElement(E)&&E.type===uO}function hO(E,H){const L={...H};for(const le in H){const Te=E[le],Ve=H[le];/^on[A-Z]/.test(le)?Te&&Ve?L[le]=(...Tt)=>{Ve(...Tt),Te(...Tt)}:Te&&(L[le]=Te):le==="style"?L[le]={...Te,...Ve}:le==="className"&&(L[le]=[Te,Ve].filter(Boolean).join(" "))}return{...E,...L}}function fO(E){var le,Te;let H=(le=Object.getOwnPropertyDescriptor(E.props,"ref"))==null?void 0:le.get,L=H&&"isReactWarning"in H&&H.isReactWarning;return L?E.ref:(H=(Te=Object.getOwnPropertyDescriptor(E,"ref"))==null?void 0:Te.get,L=H&&"isReactWarning"in H&&H.isReactWarning,L?E.props.ref:E.props.ref||E.ref)}var dO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Va=dO.reduce((E,H)=>{const L=hn.forwardRef((le,Te)=>{const{asChild:Ve,...st}=le,Tt=Ve?zg:H;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),bn.jsx(Tt,{...st,ref:Te})});return L.displayName=`Primitive.${H}`,{...E,[H]:L}},{});function pO(E,H){E&&i_.flushSync(()=>E.dispatchEvent(H))}function Jp(E){const H=hn.useRef(E);return hn.useEffect(()=>{H.current=E}),hn.useMemo(()=>(...L)=>{var le;return(le=H.current)==null?void 0:le.call(H,...L)},[])}function gO(E,H=globalThis==null?void 0:globalThis.document){const L=Jp(E);hn.useEffect(()=>{const le=Te=>{Te.key==="Escape"&&L(Te)};return H.addEventListener("keydown",le,{capture:!0}),()=>H.removeEventListener("keydown",le,{capture:!0})},[L,H])}var mO="DismissableLayer",B0="dismissableLayer.update",vO="dismissableLayer.pointerDownOutside",_O="dismissableLayer.focusOutside",wb,g1=hn.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sy=hn.forwardRef((E,H)=>{const{disableOutsidePointerEvents:L=!1,onEscapeKeyDown:le,onPointerDownOutside:Te,onFocusOutside:Ve,onInteractOutside:st,onDismiss:Tt,...je}=E,be=hn.useContext(g1),[K,se]=hn.useState(null),B=(K==null?void 0:K.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,Fe]=hn.useState({}),Be=jo(H,Qe=>se(Qe)),ce=Array.from(be.layers),[me]=[...be.layersWithOutsidePointerEventsDisabled].slice(-1),we=ce.indexOf(me),ae=K?ce.indexOf(K):-1,De=be.layersWithOutsidePointerEventsDisabled.size>0,Pe=ae>=we,Se=xO(Qe=>{const wt=Qe.target,Dt=[...be.branches].some(at=>at.contains(wt));!Pe||Dt||(Te==null||Te(Qe),st==null||st(Qe),Qe.defaultPrevented||Tt==null||Tt())},B),ee=bO(Qe=>{const wt=Qe.target;[...be.branches].some(at=>at.contains(wt))||(Ve==null||Ve(Qe),st==null||st(Qe),Qe.defaultPrevented||Tt==null||Tt())},B);return gO(Qe=>{ae===be.layers.size-1&&(le==null||le(Qe),!Qe.defaultPrevented&&Tt&&(Qe.preventDefault(),Tt()))},B),hn.useEffect(()=>{if(K)return L&&(be.layersWithOutsidePointerEventsDisabled.size===0&&(wb=B.body.style.pointerEvents,B.body.style.pointerEvents="none"),be.layersWithOutsidePointerEventsDisabled.add(K)),be.layers.add(K),xb(),()=>{L&&be.layersWithOutsidePointerEventsDisabled.size===1&&(B.body.style.pointerEvents=wb)}},[K,B,L,be]),hn.useEffect(()=>()=>{K&&(be.layers.delete(K),be.layersWithOutsidePointerEventsDisabled.delete(K),xb())},[K,be]),hn.useEffect(()=>{const Qe=()=>Fe({});return document.addEventListener(B0,Qe),()=>document.removeEventListener(B0,Qe)},[]),bn.jsx(Va.div,{...je,ref:Be,style:{pointerEvents:De?Pe?"auto":"none":void 0,...E.style},onFocusCapture:ja(E.onFocusCapture,ee.onFocusCapture),onBlurCapture:ja(E.onBlurCapture,ee.onBlurCapture),onPointerDownCapture:ja(E.onPointerDownCapture,Se.onPointerDownCapture)})});sy.displayName=mO;var yO="DismissableLayerBranch",wO=hn.forwardRef((E,H)=>{const L=hn.useContext(g1),le=hn.useRef(null),Te=jo(H,le);return hn.useEffect(()=>{const Ve=le.current;if(Ve)return L.branches.add(Ve),()=>{L.branches.delete(Ve)}},[L.branches]),bn.jsx(Va.div,{...E,ref:Te})});wO.displayName=yO;function xO(E,H=globalThis==null?void 0:globalThis.document){const L=Jp(E),le=hn.useRef(!1),Te=hn.useRef(()=>{});return hn.useEffect(()=>{const Ve=Tt=>{if(Tt.target&&!le.current){let je=function(){m1(vO,L,be,{discrete:!0})};const be={originalEvent:Tt};Tt.pointerType==="touch"?(H.removeEventListener("click",Te.current),Te.current=je,H.addEventListener("click",Te.current,{once:!0})):je()}else H.removeEventListener("click",Te.current);le.current=!1},st=window.setTimeout(()=>{H.addEventListener("pointerdown",Ve)},0);return()=>{window.clearTimeout(st),H.removeEventListener("pointerdown",Ve),H.removeEventListener("click",Te.current)}},[H,L]),{onPointerDownCapture:()=>le.current=!0}}function bO(E,H=globalThis==null?void 0:globalThis.document){const L=Jp(E),le=hn.useRef(!1);return hn.useEffect(()=>{const Te=Ve=>{Ve.target&&!le.current&&m1(_O,L,{originalEvent:Ve},{discrete:!1})};return H.addEventListener("focusin",Te),()=>H.removeEventListener("focusin",Te)},[H,L]),{onFocusCapture:()=>le.current=!0,onBlurCapture:()=>le.current=!1}}function xb(){const E=new CustomEvent(B0);document.dispatchEvent(E)}function m1(E,H,L,{discrete:le}){const Te=L.originalEvent.target,Ve=new CustomEvent(E,{bubbles:!1,cancelable:!0,detail:L});H&&Te.addEventListener(E,H,{once:!0}),le?pO(Te,Ve):Te.dispatchEvent(Ve)}var p0=0;function ew(){hn.useEffect(()=>{const E=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",E[0]??bb()),document.body.insertAdjacentElement("beforeend",E[1]??bb()),p0++,()=>{p0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(H=>H.remove()),p0--}},[])}function bb(){const E=document.createElement("span");return E.setAttribute("data-radix-focus-guard",""),E.tabIndex=0,E.style.outline="none",E.style.opacity="0",E.style.position="fixed",E.style.pointerEvents="none",E}var g0="focusScope.autoFocusOnMount",m0="focusScope.autoFocusOnUnmount",Sb={bubbles:!1,cancelable:!0},SO="FocusScope",ay=hn.forwardRef((E,H)=>{const{loop:L=!1,trapped:le=!1,onMountAutoFocus:Te,onUnmountAutoFocus:Ve,...st}=E,[Tt,je]=hn.useState(null),be=Jp(Te),K=Jp(Ve),se=hn.useRef(null),B=jo(H,ce=>je(ce)),Fe=hn.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;hn.useEffect(()=>{if(le){let ce=function(De){if(Fe.paused||!Tt)return;const Pe=De.target;Tt.contains(Pe)?se.current=Pe:Bg(se.current,{select:!0})},me=function(De){if(Fe.paused||!Tt)return;const Pe=De.relatedTarget;Pe!==null&&(Tt.contains(Pe)||Bg(se.current,{select:!0}))},we=function(De){if(document.activeElement===document.body)for(const Se of De)Se.removedNodes.length>0&&Bg(Tt)};document.addEventListener("focusin",ce),document.addEventListener("focusout",me);const ae=new MutationObserver(we);return Tt&&ae.observe(Tt,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",ce),document.removeEventListener("focusout",me),ae.disconnect()}}},[le,Tt,Fe.paused]),hn.useEffect(()=>{if(Tt){Db.add(Fe);const ce=document.activeElement;if(!Tt.contains(ce)){const we=new CustomEvent(g0,Sb);Tt.addEventListener(g0,be),Tt.dispatchEvent(we),we.defaultPrevented||(CO(MO(v1(Tt)),{select:!0}),document.activeElement===ce&&Bg(Tt))}return()=>{Tt.removeEventListener(g0,be),setTimeout(()=>{const we=new CustomEvent(m0,Sb);Tt.addEventListener(m0,K),Tt.dispatchEvent(we),we.defaultPrevented||Bg(ce??document.body,{select:!0}),Tt.removeEventListener(m0,K),Db.remove(Fe)},0)}}},[Tt,be,K,Fe]);const Be=hn.useCallback(ce=>{if(!L&&!le||Fe.paused)return;const me=ce.key==="Tab"&&!ce.altKey&&!ce.ctrlKey&&!ce.metaKey,we=document.activeElement;if(me&&we){const ae=ce.currentTarget,[De,Pe]=DO(ae);De&&Pe?!ce.shiftKey&&we===Pe?(ce.preventDefault(),L&&Bg(De,{select:!0})):ce.shiftKey&&we===De&&(ce.preventDefault(),L&&Bg(Pe,{select:!0})):we===ae&&ce.preventDefault()}},[L,le,Fe.paused]);return bn.jsx(Va.div,{tabIndex:-1,...st,ref:B,onKeyDown:Be})});ay.displayName=SO;function CO(E,{select:H=!1}={}){const L=document.activeElement;for(const le of E)if(Bg(le,{select:H}),document.activeElement!==L)return}function DO(E){const H=v1(E),L=Cb(H,E),le=Cb(H.reverse(),E);return[L,le]}function v1(E){const H=[],L=document.createTreeWalker(E,NodeFilter.SHOW_ELEMENT,{acceptNode:le=>{const Te=le.tagName==="INPUT"&&le.type==="hidden";return le.disabled||le.hidden||Te?NodeFilter.FILTER_SKIP:le.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;L.nextNode();)H.push(L.currentNode);return H}function Cb(E,H){for(const L of E)if(!AO(L,{upTo:H}))return L}function AO(E,{upTo:H}){if(getComputedStyle(E).visibility==="hidden")return!0;for(;E;){if(H!==void 0&&E===H)return!1;if(getComputedStyle(E).display==="none")return!0;E=E.parentElement}return!1}function EO(E){return E instanceof HTMLInputElement&&"select"in E}function Bg(E,{select:H=!1}={}){if(E&&E.focus){const L=document.activeElement;E.focus({preventScroll:!0}),E!==L&&EO(E)&&H&&E.select()}}var Db=TO();function TO(){let E=[];return{add(H){const L=E[0];H!==L&&(L==null||L.pause()),E=Ab(E,H),E.unshift(H)},remove(H){var L;E=Ab(E,H),(L=E[0])==null||L.resume()}}}function Ab(E,H){const L=[...E],le=L.indexOf(H);return le!==-1&&L.splice(le,1),L}function MO(E){return E.filter(H=>H.tagName!=="A")}var pc=globalThis!=null&&globalThis.document?hn.useLayoutEffect:()=>{},PO=tP.useId||(()=>{}),OO=0;function Qp(E){const[H,L]=hn.useState(PO());return pc(()=>{L(le=>le??String(OO++))},[E]),H?`radix-${H}`:""}const kO=["top","right","bottom","left"],Ug=Math.min,nf=Math.max,$_=Math.round,P_=Math.floor,op=E=>({x:E,y:E}),IO={left:"right",right:"left",bottom:"top",top:"bottom"},LO={start:"end",end:"start"};function R0(E,H,L){return nf(E,Ug(H,L))}function eg(E,H){return typeof E=="function"?E(H):E}function tg(E){return E.split("-")[0]}function ev(E){return E.split("-")[1]}function tw(E){return E==="x"?"y":"x"}function nw(E){return E==="y"?"height":"width"}function jg(E){return["top","bottom"].includes(tg(E))?"y":"x"}function rw(E){return tw(jg(E))}function BO(E,H,L){L===void 0&&(L=!1);const le=ev(E),Te=rw(E),Ve=nw(Te);let st=Te==="x"?le===(L?"end":"start")?"right":"left":le==="start"?"bottom":"top";return H.reference[Ve]>H.floating[Ve]&&(st=K_(st)),[st,K_(st)]}function RO(E){const H=K_(E);return[N0(E),H,N0(H)]}function N0(E){return E.replace(/start|end/g,H=>LO[H])}function NO(E,H,L){const le=["left","right"],Te=["right","left"],Ve=["top","bottom"],st=["bottom","top"];switch(E){case"top":case"bottom":return L?H?Te:le:H?le:Te;case"left":case"right":return H?Ve:st;default:return[]}}function FO(E,H,L,le){const Te=ev(E);let Ve=NO(tg(E),L==="start",le);return Te&&(Ve=Ve.map(st=>st+"-"+Te),H&&(Ve=Ve.concat(Ve.map(N0)))),Ve}function K_(E){return E.replace(/left|right|bottom|top/g,H=>IO[H])}function zO(E){return{top:0,right:0,bottom:0,left:0,...E}}function _1(E){return typeof E!="number"?zO(E):{top:E,right:E,bottom:E,left:E}}function q_(E){const{x:H,y:L,width:le,height:Te}=E;return{width:le,height:Te,top:L,left:H,right:H+le,bottom:L+Te,x:H,y:L}}function Eb(E,H,L){let{reference:le,floating:Te}=E;const Ve=jg(H),st=rw(H),Tt=nw(st),je=tg(H),be=Ve==="y",K=le.x+le.width/2-Te.width/2,se=le.y+le.height/2-Te.height/2,B=le[Tt]/2-Te[Tt]/2;let Fe;switch(je){case"top":Fe={x:K,y:le.y-Te.height};break;case"bottom":Fe={x:K,y:le.y+le.height};break;case"right":Fe={x:le.x+le.width,y:se};break;case"left":Fe={x:le.x-Te.width,y:se};break;default:Fe={x:le.x,y:le.y}}switch(ev(H)){case"start":Fe[st]-=B*(L&&be?-1:1);break;case"end":Fe[st]+=B*(L&&be?-1:1);break}return Fe}const UO=async(E,H,L)=>{const{placement:le="bottom",strategy:Te="absolute",middleware:Ve=[],platform:st}=L,Tt=Ve.filter(Boolean),je=await(st.isRTL==null?void 0:st.isRTL(H));let be=await st.getElementRects({reference:E,floating:H,strategy:Te}),{x:K,y:se}=Eb(be,le,je),B=le,Fe={},Be=0;for(let ce=0;ce<Tt.length;ce++){const{name:me,fn:we}=Tt[ce],{x:ae,y:De,data:Pe,reset:Se}=await we({x:K,y:se,initialPlacement:le,placement:B,strategy:Te,middlewareData:Fe,rects:be,platform:st,elements:{reference:E,floating:H}});K=ae??K,se=De??se,Fe={...Fe,[me]:{...Fe[me],...Pe}},Se&&Be<=50&&(Be++,typeof Se=="object"&&(Se.placement&&(B=Se.placement),Se.rects&&(be=Se.rects===!0?await st.getElementRects({reference:E,floating:H,strategy:Te}):Se.rects),{x:K,y:se}=Eb(be,B,je)),ce=-1)}return{x:K,y:se,placement:B,strategy:Te,middlewareData:Fe}};async function e_(E,H){var L;H===void 0&&(H={});const{x:le,y:Te,platform:Ve,rects:st,elements:Tt,strategy:je}=E,{boundary:be="clippingAncestors",rootBoundary:K="viewport",elementContext:se="floating",altBoundary:B=!1,padding:Fe=0}=eg(H,E),Be=_1(Fe),me=Tt[B?se==="floating"?"reference":"floating":se],we=q_(await Ve.getClippingRect({element:(L=await(Ve.isElement==null?void 0:Ve.isElement(me)))==null||L?me:me.contextElement||await(Ve.getDocumentElement==null?void 0:Ve.getDocumentElement(Tt.floating)),boundary:be,rootBoundary:K,strategy:je})),ae=se==="floating"?{x:le,y:Te,width:st.floating.width,height:st.floating.height}:st.reference,De=await(Ve.getOffsetParent==null?void 0:Ve.getOffsetParent(Tt.floating)),Pe=await(Ve.isElement==null?void 0:Ve.isElement(De))?await(Ve.getScale==null?void 0:Ve.getScale(De))||{x:1,y:1}:{x:1,y:1},Se=q_(Ve.convertOffsetParentRelativeRectToViewportRelativeRect?await Ve.convertOffsetParentRelativeRectToViewportRelativeRect({elements:Tt,rect:ae,offsetParent:De,strategy:je}):ae);return{top:(we.top-Se.top+Be.top)/Pe.y,bottom:(Se.bottom-we.bottom+Be.bottom)/Pe.y,left:(we.left-Se.left+Be.left)/Pe.x,right:(Se.right-we.right+Be.right)/Pe.x}}const jO=E=>({name:"arrow",options:E,async fn(H){const{x:L,y:le,placement:Te,rects:Ve,platform:st,elements:Tt,middlewareData:je}=H,{element:be,padding:K=0}=eg(E,H)||{};if(be==null)return{};const se=_1(K),B={x:L,y:le},Fe=rw(Te),Be=nw(Fe),ce=await st.getDimensions(be),me=Fe==="y",we=me?"top":"left",ae=me?"bottom":"right",De=me?"clientHeight":"clientWidth",Pe=Ve.reference[Be]+Ve.reference[Fe]-B[Fe]-Ve.floating[Be],Se=B[Fe]-Ve.reference[Fe],ee=await(st.getOffsetParent==null?void 0:st.getOffsetParent(be));let Qe=ee?ee[De]:0;(!Qe||!await(st.isElement==null?void 0:st.isElement(ee)))&&(Qe=Tt.floating[De]||Ve.floating[Be]);const wt=Pe/2-Se/2,Dt=Qe/2-ce[Be]/2-1,at=Ug(se[we],Dt),Ne=Ug(se[ae],Dt),Je=at,pt=Qe-ce[Be]-Ne,ot=Qe/2-ce[Be]/2+wt,Jt=R0(Je,ot,pt),Qt=!je.arrow&&ev(Te)!=null&&ot!==Jt&&Ve.reference[Be]/2-(ot<Je?at:Ne)-ce[Be]/2<0,ut=Qt?ot<Je?ot-Je:ot-pt:0;return{[Fe]:B[Fe]+ut,data:{[Fe]:Jt,centerOffset:ot-Jt-ut,...Qt&&{alignmentOffset:ut}},reset:Qt}}}),VO=function(E){return E===void 0&&(E={}),{name:"flip",options:E,async fn(H){var L,le;const{placement:Te,middlewareData:Ve,rects:st,initialPlacement:Tt,platform:je,elements:be}=H,{mainAxis:K=!0,crossAxis:se=!0,fallbackPlacements:B,fallbackStrategy:Fe="bestFit",fallbackAxisSideDirection:Be="none",flipAlignment:ce=!0,...me}=eg(E,H);if((L=Ve.arrow)!=null&&L.alignmentOffset)return{};const we=tg(Te),ae=jg(Tt),De=tg(Tt)===Tt,Pe=await(je.isRTL==null?void 0:je.isRTL(be.floating)),Se=B||(De||!ce?[K_(Tt)]:RO(Tt)),ee=Be!=="none";!B&&ee&&Se.push(...FO(Tt,ce,Be,Pe));const Qe=[Tt,...Se],wt=await e_(H,me),Dt=[];let at=((le=Ve.flip)==null?void 0:le.overflows)||[];if(K&&Dt.push(wt[we]),se){const ot=BO(Te,st,Pe);Dt.push(wt[ot[0]],wt[ot[1]])}if(at=[...at,{placement:Te,overflows:Dt}],!Dt.every(ot=>ot<=0)){var Ne,Je;const ot=(((Ne=Ve.flip)==null?void 0:Ne.index)||0)+1,Jt=Qe[ot];if(Jt)return{data:{index:ot,overflows:at},reset:{placement:Jt}};let Qt=(Je=at.filter(ut=>ut.overflows[0]<=0).sort((ut,St)=>ut.overflows[1]-St.overflows[1])[0])==null?void 0:Je.placement;if(!Qt)switch(Fe){case"bestFit":{var pt;const ut=(pt=at.filter(St=>{if(ee){const Lt=jg(St.placement);return Lt===ae||Lt==="y"}return!0}).map(St=>[St.placement,St.overflows.filter(Lt=>Lt>0).reduce((Lt,Ue)=>Lt+Ue,0)]).sort((St,Lt)=>St[1]-Lt[1])[0])==null?void 0:pt[0];ut&&(Qt=ut);break}case"initialPlacement":Qt=Tt;break}if(Te!==Qt)return{reset:{placement:Qt}}}return{}}}};function Tb(E,H){return{top:E.top-H.height,right:E.right-H.width,bottom:E.bottom-H.height,left:E.left-H.width}}function Mb(E){return kO.some(H=>E[H]>=0)}const HO=function(E){return E===void 0&&(E={}),{name:"hide",options:E,async fn(H){const{rects:L}=H,{strategy:le="referenceHidden",...Te}=eg(E,H);switch(le){case"referenceHidden":{const Ve=await e_(H,{...Te,elementContext:"reference"}),st=Tb(Ve,L.reference);return{data:{referenceHiddenOffsets:st,referenceHidden:Mb(st)}}}case"escaped":{const Ve=await e_(H,{...Te,altBoundary:!0}),st=Tb(Ve,L.floating);return{data:{escapedOffsets:st,escaped:Mb(st)}}}default:return{}}}}};async function WO(E,H){const{placement:L,platform:le,elements:Te}=E,Ve=await(le.isRTL==null?void 0:le.isRTL(Te.floating)),st=tg(L),Tt=ev(L),je=jg(L)==="y",be=["left","top"].includes(st)?-1:1,K=Ve&&je?-1:1,se=eg(H,E);let{mainAxis:B,crossAxis:Fe,alignmentAxis:Be}=typeof se=="number"?{mainAxis:se,crossAxis:0,alignmentAxis:null}:{mainAxis:se.mainAxis||0,crossAxis:se.crossAxis||0,alignmentAxis:se.alignmentAxis};return Tt&&typeof Be=="number"&&(Fe=Tt==="end"?Be*-1:Be),je?{x:Fe*K,y:B*be}:{x:B*be,y:Fe*K}}const GO=function(E){return E===void 0&&(E=0),{name:"offset",options:E,async fn(H){var L,le;const{x:Te,y:Ve,placement:st,middlewareData:Tt}=H,je=await WO(H,E);return st===((L=Tt.offset)==null?void 0:L.placement)&&(le=Tt.arrow)!=null&&le.alignmentOffset?{}:{x:Te+je.x,y:Ve+je.y,data:{...je,placement:st}}}}},YO=function(E){return E===void 0&&(E={}),{name:"shift",options:E,async fn(H){const{x:L,y:le,placement:Te}=H,{mainAxis:Ve=!0,crossAxis:st=!1,limiter:Tt={fn:me=>{let{x:we,y:ae}=me;return{x:we,y:ae}}},...je}=eg(E,H),be={x:L,y:le},K=await e_(H,je),se=jg(tg(Te)),B=tw(se);let Fe=be[B],Be=be[se];if(Ve){const me=B==="y"?"top":"left",we=B==="y"?"bottom":"right",ae=Fe+K[me],De=Fe-K[we];Fe=R0(ae,Fe,De)}if(st){const me=se==="y"?"top":"left",we=se==="y"?"bottom":"right",ae=Be+K[me],De=Be-K[we];Be=R0(ae,Be,De)}const ce=Tt.fn({...H,[B]:Fe,[se]:Be});return{...ce,data:{x:ce.x-L,y:ce.y-le,enabled:{[B]:Ve,[se]:st}}}}}},ZO=function(E){return E===void 0&&(E={}),{options:E,fn(H){const{x:L,y:le,placement:Te,rects:Ve,middlewareData:st}=H,{offset:Tt=0,mainAxis:je=!0,crossAxis:be=!0}=eg(E,H),K={x:L,y:le},se=jg(Te),B=tw(se);let Fe=K[B],Be=K[se];const ce=eg(Tt,H),me=typeof ce=="number"?{mainAxis:ce,crossAxis:0}:{mainAxis:0,crossAxis:0,...ce};if(je){const De=B==="y"?"height":"width",Pe=Ve.reference[B]-Ve.floating[De]+me.mainAxis,Se=Ve.reference[B]+Ve.reference[De]-me.mainAxis;Fe<Pe?Fe=Pe:Fe>Se&&(Fe=Se)}if(be){var we,ae;const De=B==="y"?"width":"height",Pe=["top","left"].includes(tg(Te)),Se=Ve.reference[se]-Ve.floating[De]+(Pe&&((we=st.offset)==null?void 0:we[se])||0)+(Pe?0:me.crossAxis),ee=Ve.reference[se]+Ve.reference[De]+(Pe?0:((ae=st.offset)==null?void 0:ae[se])||0)-(Pe?me.crossAxis:0);Be<Se?Be=Se:Be>ee&&(Be=ee)}return{[B]:Fe,[se]:Be}}}},$O=function(E){return E===void 0&&(E={}),{name:"size",options:E,async fn(H){var L,le;const{placement:Te,rects:Ve,platform:st,elements:Tt}=H,{apply:je=()=>{},...be}=eg(E,H),K=await e_(H,be),se=tg(Te),B=ev(Te),Fe=jg(Te)==="y",{width:Be,height:ce}=Ve.floating;let me,we;se==="top"||se==="bottom"?(me=se,we=B===(await(st.isRTL==null?void 0:st.isRTL(Tt.floating))?"start":"end")?"left":"right"):(we=se,me=B==="end"?"top":"bottom");const ae=ce-K.top-K.bottom,De=Be-K.left-K.right,Pe=Ug(ce-K[me],ae),Se=Ug(Be-K[we],De),ee=!H.middlewareData.shift;let Qe=Pe,wt=Se;if((L=H.middlewareData.shift)!=null&&L.enabled.x&&(wt=De),(le=H.middlewareData.shift)!=null&&le.enabled.y&&(Qe=ae),ee&&!B){const at=nf(K.left,0),Ne=nf(K.right,0),Je=nf(K.top,0),pt=nf(K.bottom,0);Fe?wt=Be-2*(at!==0||Ne!==0?at+Ne:nf(K.left,K.right)):Qe=ce-2*(Je!==0||pt!==0?Je+pt:nf(K.top,K.bottom))}await je({...H,availableWidth:wt,availableHeight:Qe});const Dt=await st.getDimensions(Tt.floating);return Be!==Dt.width||ce!==Dt.height?{reset:{rects:!0}}:{}}}};function oy(){return typeof window<"u"}function tv(E){return y1(E)?(E.nodeName||"").toLowerCase():"#document"}function sf(E){var H;return(E==null||(H=E.ownerDocument)==null?void 0:H.defaultView)||window}function up(E){var H;return(H=(y1(E)?E.ownerDocument:E.document)||window.document)==null?void 0:H.documentElement}function y1(E){return oy()?E instanceof Node||E instanceof sf(E).Node:!1}function Dd(E){return oy()?E instanceof Element||E instanceof sf(E).Element:!1}function lp(E){return oy()?E instanceof HTMLElement||E instanceof sf(E).HTMLElement:!1}function Pb(E){return!oy()||typeof ShadowRoot>"u"?!1:E instanceof ShadowRoot||E instanceof sf(E).ShadowRoot}function s_(E){const{overflow:H,overflowX:L,overflowY:le,display:Te}=Ad(E);return/auto|scroll|overlay|hidden|clip/.test(H+le+L)&&!["inline","contents"].includes(Te)}function KO(E){return["table","td","th"].includes(tv(E))}function ly(E){return[":popover-open",":modal"].some(H=>{try{return E.matches(H)}catch{return!1}})}function iw(E){const H=sw(),L=Dd(E)?Ad(E):E;return["transform","translate","scale","rotate","perspective"].some(le=>L[le]?L[le]!=="none":!1)||(L.containerType?L.containerType!=="normal":!1)||!H&&(L.backdropFilter?L.backdropFilter!=="none":!1)||!H&&(L.filter?L.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(le=>(L.willChange||"").includes(le))||["paint","layout","strict","content"].some(le=>(L.contain||"").includes(le))}function qO(E){let H=Vg(E);for(;lp(H)&&!Qm(H);){if(iw(H))return H;if(ly(H))return null;H=Vg(H)}return null}function sw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Qm(E){return["html","body","#document"].includes(tv(E))}function Ad(E){return sf(E).getComputedStyle(E)}function uy(E){return Dd(E)?{scrollLeft:E.scrollLeft,scrollTop:E.scrollTop}:{scrollLeft:E.scrollX,scrollTop:E.scrollY}}function Vg(E){if(tv(E)==="html")return E;const H=E.assignedSlot||E.parentNode||Pb(E)&&E.host||up(E);return Pb(H)?H.host:H}function w1(E){const H=Vg(E);return Qm(H)?E.ownerDocument?E.ownerDocument.body:E.body:lp(H)&&s_(H)?H:w1(H)}function t_(E,H,L){var le;H===void 0&&(H=[]),L===void 0&&(L=!0);const Te=w1(E),Ve=Te===((le=E.ownerDocument)==null?void 0:le.body),st=sf(Te);if(Ve){const Tt=F0(st);return H.concat(st,st.visualViewport||[],s_(Te)?Te:[],Tt&&L?t_(Tt):[])}return H.concat(Te,t_(Te,[],L))}function F0(E){return E.parent&&Object.getPrototypeOf(E.parent)?E.frameElement:null}function x1(E){const H=Ad(E);let L=parseFloat(H.width)||0,le=parseFloat(H.height)||0;const Te=lp(E),Ve=Te?E.offsetWidth:L,st=Te?E.offsetHeight:le,Tt=$_(L)!==Ve||$_(le)!==st;return Tt&&(L=Ve,le=st),{width:L,height:le,$:Tt}}function aw(E){return Dd(E)?E:E.contextElement}function $m(E){const H=aw(E);if(!lp(H))return op(1);const L=H.getBoundingClientRect(),{width:le,height:Te,$:Ve}=x1(H);let st=(Ve?$_(L.width):L.width)/le,Tt=(Ve?$_(L.height):L.height)/Te;return(!st||!Number.isFinite(st))&&(st=1),(!Tt||!Number.isFinite(Tt))&&(Tt=1),{x:st,y:Tt}}const XO=op(0);function b1(E){const H=sf(E);return!sw()||!H.visualViewport?XO:{x:H.visualViewport.offsetLeft,y:H.visualViewport.offsetTop}}function QO(E,H,L){return H===void 0&&(H=!1),!L||H&&L!==sf(E)?!1:H}function vm(E,H,L,le){H===void 0&&(H=!1),L===void 0&&(L=!1);const Te=E.getBoundingClientRect(),Ve=aw(E);let st=op(1);H&&(le?Dd(le)&&(st=$m(le)):st=$m(E));const Tt=QO(Ve,L,le)?b1(Ve):op(0);let je=(Te.left+Tt.x)/st.x,be=(Te.top+Tt.y)/st.y,K=Te.width/st.x,se=Te.height/st.y;if(Ve){const B=sf(Ve),Fe=le&&Dd(le)?sf(le):le;let Be=B,ce=F0(Be);for(;ce&&le&&Fe!==Be;){const me=$m(ce),we=ce.getBoundingClientRect(),ae=Ad(ce),De=we.left+(ce.clientLeft+parseFloat(ae.paddingLeft))*me.x,Pe=we.top+(ce.clientTop+parseFloat(ae.paddingTop))*me.y;je*=me.x,be*=me.y,K*=me.x,se*=me.y,je+=De,be+=Pe,Be=sf(ce),ce=F0(Be)}}return q_({width:K,height:se,x:je,y:be})}function ow(E,H){const L=uy(E).scrollLeft;return H?H.left+L:vm(up(E)).left+L}function S1(E,H,L){L===void 0&&(L=!1);const le=E.getBoundingClientRect(),Te=le.left+H.scrollLeft-(L?0:ow(E,le)),Ve=le.top+H.scrollTop;return{x:Te,y:Ve}}function JO(E){let{elements:H,rect:L,offsetParent:le,strategy:Te}=E;const Ve=Te==="fixed",st=up(le),Tt=H?ly(H.floating):!1;if(le===st||Tt&&Ve)return L;let je={scrollLeft:0,scrollTop:0},be=op(1);const K=op(0),se=lp(le);if((se||!se&&!Ve)&&((tv(le)!=="body"||s_(st))&&(je=uy(le)),lp(le))){const Fe=vm(le);be=$m(le),K.x=Fe.x+le.clientLeft,K.y=Fe.y+le.clientTop}const B=st&&!se&&!Ve?S1(st,je,!0):op(0);return{width:L.width*be.x,height:L.height*be.y,x:L.x*be.x-je.scrollLeft*be.x+K.x+B.x,y:L.y*be.y-je.scrollTop*be.y+K.y+B.y}}function ek(E){return Array.from(E.getClientRects())}function tk(E){const H=up(E),L=uy(E),le=E.ownerDocument.body,Te=nf(H.scrollWidth,H.clientWidth,le.scrollWidth,le.clientWidth),Ve=nf(H.scrollHeight,H.clientHeight,le.scrollHeight,le.clientHeight);let st=-L.scrollLeft+ow(E);const Tt=-L.scrollTop;return Ad(le).direction==="rtl"&&(st+=nf(H.clientWidth,le.clientWidth)-Te),{width:Te,height:Ve,x:st,y:Tt}}function nk(E,H){const L=sf(E),le=up(E),Te=L.visualViewport;let Ve=le.clientWidth,st=le.clientHeight,Tt=0,je=0;if(Te){Ve=Te.width,st=Te.height;const be=sw();(!be||be&&H==="fixed")&&(Tt=Te.offsetLeft,je=Te.offsetTop)}return{width:Ve,height:st,x:Tt,y:je}}function rk(E,H){const L=vm(E,!0,H==="fixed"),le=L.top+E.clientTop,Te=L.left+E.clientLeft,Ve=lp(E)?$m(E):op(1),st=E.clientWidth*Ve.x,Tt=E.clientHeight*Ve.y,je=Te*Ve.x,be=le*Ve.y;return{width:st,height:Tt,x:je,y:be}}function Ob(E,H,L){let le;if(H==="viewport")le=nk(E,L);else if(H==="document")le=tk(up(E));else if(Dd(H))le=rk(H,L);else{const Te=b1(E);le={x:H.x-Te.x,y:H.y-Te.y,width:H.width,height:H.height}}return q_(le)}function C1(E,H){const L=Vg(E);return L===H||!Dd(L)||Qm(L)?!1:Ad(L).position==="fixed"||C1(L,H)}function ik(E,H){const L=H.get(E);if(L)return L;let le=t_(E,[],!1).filter(Tt=>Dd(Tt)&&tv(Tt)!=="body"),Te=null;const Ve=Ad(E).position==="fixed";let st=Ve?Vg(E):E;for(;Dd(st)&&!Qm(st);){const Tt=Ad(st),je=iw(st);!je&&Tt.position==="fixed"&&(Te=null),(Ve?!je&&!Te:!je&&Tt.position==="static"&&!!Te&&["absolute","fixed"].includes(Te.position)||s_(st)&&!je&&C1(E,st))?le=le.filter(K=>K!==st):Te=Tt,st=Vg(st)}return H.set(E,le),le}function sk(E){let{element:H,boundary:L,rootBoundary:le,strategy:Te}=E;const st=[...L==="clippingAncestors"?ly(H)?[]:ik(H,this._c):[].concat(L),le],Tt=st[0],je=st.reduce((be,K)=>{const se=Ob(H,K,Te);return be.top=nf(se.top,be.top),be.right=Ug(se.right,be.right),be.bottom=Ug(se.bottom,be.bottom),be.left=nf(se.left,be.left),be},Ob(H,Tt,Te));return{width:je.right-je.left,height:je.bottom-je.top,x:je.left,y:je.top}}function ak(E){const{width:H,height:L}=x1(E);return{width:H,height:L}}function ok(E,H,L){const le=lp(H),Te=up(H),Ve=L==="fixed",st=vm(E,!0,Ve,H);let Tt={scrollLeft:0,scrollTop:0};const je=op(0);if(le||!le&&!Ve)if((tv(H)!=="body"||s_(Te))&&(Tt=uy(H)),le){const B=vm(H,!0,Ve,H);je.x=B.x+H.clientLeft,je.y=B.y+H.clientTop}else Te&&(je.x=ow(Te));const be=Te&&!le&&!Ve?S1(Te,Tt):op(0),K=st.left+Tt.scrollLeft-je.x-be.x,se=st.top+Tt.scrollTop-je.y-be.y;return{x:K,y:se,width:st.width,height:st.height}}function v0(E){return Ad(E).position==="static"}function kb(E,H){if(!lp(E)||Ad(E).position==="fixed")return null;if(H)return H(E);let L=E.offsetParent;return up(E)===L&&(L=L.ownerDocument.body),L}function D1(E,H){const L=sf(E);if(ly(E))return L;if(!lp(E)){let Te=Vg(E);for(;Te&&!Qm(Te);){if(Dd(Te)&&!v0(Te))return Te;Te=Vg(Te)}return L}let le=kb(E,H);for(;le&&KO(le)&&v0(le);)le=kb(le,H);return le&&Qm(le)&&v0(le)&&!iw(le)?L:le||qO(E)||L}const lk=async function(E){const H=this.getOffsetParent||D1,L=this.getDimensions,le=await L(E.floating);return{reference:ok(E.reference,await H(E.floating),E.strategy),floating:{x:0,y:0,width:le.width,height:le.height}}};function uk(E){return Ad(E).direction==="rtl"}const ck={convertOffsetParentRelativeRectToViewportRelativeRect:JO,getDocumentElement:up,getClippingRect:sk,getOffsetParent:D1,getElementRects:lk,getClientRects:ek,getDimensions:ak,getScale:$m,isElement:Dd,isRTL:uk};function A1(E,H){return E.x===H.x&&E.y===H.y&&E.width===H.width&&E.height===H.height}function hk(E,H){let L=null,le;const Te=up(E);function Ve(){var Tt;clearTimeout(le),(Tt=L)==null||Tt.disconnect(),L=null}function st(Tt,je){Tt===void 0&&(Tt=!1),je===void 0&&(je=1),Ve();const be=E.getBoundingClientRect(),{left:K,top:se,width:B,height:Fe}=be;if(Tt||H(),!B||!Fe)return;const Be=P_(se),ce=P_(Te.clientWidth-(K+B)),me=P_(Te.clientHeight-(se+Fe)),we=P_(K),De={rootMargin:-Be+"px "+-ce+"px "+-me+"px "+-we+"px",threshold:nf(0,Ug(1,je))||1};let Pe=!0;function Se(ee){const Qe=ee[0].intersectionRatio;if(Qe!==je){if(!Pe)return st();Qe?st(!1,Qe):le=setTimeout(()=>{st(!1,1e-7)},1e3)}Qe===1&&!A1(be,E.getBoundingClientRect())&&st(),Pe=!1}try{L=new IntersectionObserver(Se,{...De,root:Te.ownerDocument})}catch{L=new IntersectionObserver(Se,De)}L.observe(E)}return st(!0),Ve}function fk(E,H,L,le){le===void 0&&(le={});const{ancestorScroll:Te=!0,ancestorResize:Ve=!0,elementResize:st=typeof ResizeObserver=="function",layoutShift:Tt=typeof IntersectionObserver=="function",animationFrame:je=!1}=le,be=aw(E),K=Te||Ve?[...be?t_(be):[],...t_(H)]:[];K.forEach(we=>{Te&&we.addEventListener("scroll",L,{passive:!0}),Ve&&we.addEventListener("resize",L)});const se=be&&Tt?hk(be,L):null;let B=-1,Fe=null;st&&(Fe=new ResizeObserver(we=>{let[ae]=we;ae&&ae.target===be&&Fe&&(Fe.unobserve(H),cancelAnimationFrame(B),B=requestAnimationFrame(()=>{var De;(De=Fe)==null||De.observe(H)})),L()}),be&&!je&&Fe.observe(be),Fe.observe(H));let Be,ce=je?vm(E):null;je&&me();function me(){const we=vm(E);ce&&!A1(ce,we)&&L(),ce=we,Be=requestAnimationFrame(me)}return L(),()=>{var we;K.forEach(ae=>{Te&&ae.removeEventListener("scroll",L),Ve&&ae.removeEventListener("resize",L)}),se==null||se(),(we=Fe)==null||we.disconnect(),Fe=null,je&&cancelAnimationFrame(Be)}}const dk=GO,pk=YO,gk=VO,mk=$O,vk=HO,Ib=jO,_k=ZO,yk=(E,H,L)=>{const le=new Map,Te={platform:ck,...L},Ve={...Te.platform,_c:le};return UO(E,H,{...Te,platform:Ve})};var U_=typeof document<"u"?hn.useLayoutEffect:hn.useEffect;function X_(E,H){if(E===H)return!0;if(typeof E!=typeof H)return!1;if(typeof E=="function"&&E.toString()===H.toString())return!0;let L,le,Te;if(E&&H&&typeof E=="object"){if(Array.isArray(E)){if(L=E.length,L!==H.length)return!1;for(le=L;le--!==0;)if(!X_(E[le],H[le]))return!1;return!0}if(Te=Object.keys(E),L=Te.length,L!==Object.keys(H).length)return!1;for(le=L;le--!==0;)if(!{}.hasOwnProperty.call(H,Te[le]))return!1;for(le=L;le--!==0;){const Ve=Te[le];if(!(Ve==="_owner"&&E.$$typeof)&&!X_(E[Ve],H[Ve]))return!1}return!0}return E!==E&&H!==H}function E1(E){return typeof window>"u"?1:(E.ownerDocument.defaultView||window).devicePixelRatio||1}function Lb(E,H){const L=E1(E);return Math.round(H*L)/L}function _0(E){const H=hn.useRef(E);return U_(()=>{H.current=E}),H}function wk(E){E===void 0&&(E={});const{placement:H="bottom",strategy:L="absolute",middleware:le=[],platform:Te,elements:{reference:Ve,floating:st}={},transform:Tt=!0,whileElementsMounted:je,open:be}=E,[K,se]=hn.useState({x:0,y:0,strategy:L,placement:H,middlewareData:{},isPositioned:!1}),[B,Fe]=hn.useState(le);X_(B,le)||Fe(le);const[Be,ce]=hn.useState(null),[me,we]=hn.useState(null),ae=hn.useCallback(St=>{St!==ee.current&&(ee.current=St,ce(St))},[]),De=hn.useCallback(St=>{St!==Qe.current&&(Qe.current=St,we(St))},[]),Pe=Ve||Be,Se=st||me,ee=hn.useRef(null),Qe=hn.useRef(null),wt=hn.useRef(K),Dt=je!=null,at=_0(je),Ne=_0(Te),Je=_0(be),pt=hn.useCallback(()=>{if(!ee.current||!Qe.current)return;const St={placement:H,strategy:L,middleware:B};Ne.current&&(St.platform=Ne.current),yk(ee.current,Qe.current,St).then(Lt=>{const Ue={...Lt,isPositioned:Je.current!==!1};ot.current&&!X_(wt.current,Ue)&&(wt.current=Ue,i_.flushSync(()=>{se(Ue)}))})},[B,H,L,Ne,Je]);U_(()=>{be===!1&&wt.current.isPositioned&&(wt.current.isPositioned=!1,se(St=>({...St,isPositioned:!1})))},[be]);const ot=hn.useRef(!1);U_(()=>(ot.current=!0,()=>{ot.current=!1}),[]),U_(()=>{if(Pe&&(ee.current=Pe),Se&&(Qe.current=Se),Pe&&Se){if(at.current)return at.current(Pe,Se,pt);pt()}},[Pe,Se,pt,at,Dt]);const Jt=hn.useMemo(()=>({reference:ee,floating:Qe,setReference:ae,setFloating:De}),[ae,De]),Qt=hn.useMemo(()=>({reference:Pe,floating:Se}),[Pe,Se]),ut=hn.useMemo(()=>{const St={position:L,left:0,top:0};if(!Qt.floating)return St;const Lt=Lb(Qt.floating,K.x),Ue=Lb(Qt.floating,K.y);return Tt?{...St,transform:"translate("+Lt+"px, "+Ue+"px)",...E1(Qt.floating)>=1.5&&{willChange:"transform"}}:{position:L,left:Lt,top:Ue}},[L,Tt,Qt.floating,K.x,K.y]);return hn.useMemo(()=>({...K,update:pt,refs:Jt,elements:Qt,floatingStyles:ut}),[K,pt,Jt,Qt,ut])}const xk=E=>{function H(L){return{}.hasOwnProperty.call(L,"current")}return{name:"arrow",options:E,fn(L){const{element:le,padding:Te}=typeof E=="function"?E(L):E;return le&&H(le)?le.current!=null?Ib({element:le.current,padding:Te}).fn(L):{}:le?Ib({element:le,padding:Te}).fn(L):{}}}},bk=(E,H)=>({...dk(E),options:[E,H]}),Sk=(E,H)=>({...pk(E),options:[E,H]}),Ck=(E,H)=>({..._k(E),options:[E,H]}),Dk=(E,H)=>({...gk(E),options:[E,H]}),Ak=(E,H)=>({...mk(E),options:[E,H]}),Ek=(E,H)=>({...vk(E),options:[E,H]}),Tk=(E,H)=>({...xk(E),options:[E,H]});var Mk="Arrow",T1=hn.forwardRef((E,H)=>{const{children:L,width:le=10,height:Te=5,...Ve}=E;return bn.jsx(Va.svg,{...Ve,ref:H,width:le,height:Te,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:E.asChild?L:bn.jsx("polygon",{points:"0,0 30,0 15,10"})})});T1.displayName=Mk;var Pk=T1;function Ok(E){const[H,L]=hn.useState(void 0);return pc(()=>{if(E){L({width:E.offsetWidth,height:E.offsetHeight});const le=new ResizeObserver(Te=>{if(!Array.isArray(Te)||!Te.length)return;const Ve=Te[0];let st,Tt;if("borderBoxSize"in Ve){const je=Ve.borderBoxSize,be=Array.isArray(je)?je[0]:je;st=be.inlineSize,Tt=be.blockSize}else st=E.offsetWidth,Tt=E.offsetHeight;L({width:st,height:Tt})});return le.observe(E,{box:"border-box"}),()=>le.unobserve(E)}else L(void 0)},[E]),H}var lw="Popper",[M1,cy]=xm(lw),[kk,P1]=M1(lw),O1=E=>{const{__scopePopper:H,children:L}=E,[le,Te]=hn.useState(null);return bn.jsx(kk,{scope:H,anchor:le,onAnchorChange:Te,children:L})};O1.displayName=lw;var k1="PopperAnchor",I1=hn.forwardRef((E,H)=>{const{__scopePopper:L,virtualRef:le,...Te}=E,Ve=P1(k1,L),st=hn.useRef(null),Tt=jo(H,st);return hn.useEffect(()=>{Ve.onAnchorChange((le==null?void 0:le.current)||st.current)}),le?null:bn.jsx(Va.div,{...Te,ref:Tt})});I1.displayName=k1;var uw="PopperContent",[Ik,Lk]=M1(uw),L1=hn.forwardRef((E,H)=>{var Zt,zt,Le,Mt,Rt,tt;const{__scopePopper:L,side:le="bottom",sideOffset:Te=0,align:Ve="center",alignOffset:st=0,arrowPadding:Tt=0,avoidCollisions:je=!0,collisionBoundary:be=[],collisionPadding:K=0,sticky:se="partial",hideWhenDetached:B=!1,updatePositionStrategy:Fe="optimized",onPlaced:Be,...ce}=E,me=P1(uw,L),[we,ae]=hn.useState(null),De=jo(H,We=>ae(We)),[Pe,Se]=hn.useState(null),ee=Ok(Pe),Qe=(ee==null?void 0:ee.width)??0,wt=(ee==null?void 0:ee.height)??0,Dt=le+(Ve!=="center"?"-"+Ve:""),at=typeof K=="number"?K:{top:0,right:0,bottom:0,left:0,...K},Ne=Array.isArray(be)?be:[be],Je=Ne.length>0,pt={padding:at,boundary:Ne.filter(Rk),altBoundary:Je},{refs:ot,floatingStyles:Jt,placement:Qt,isPositioned:ut,middlewareData:St}=wk({strategy:"fixed",placement:Dt,whileElementsMounted:(...We)=>fk(...We,{animationFrame:Fe==="always"}),elements:{reference:me.anchor},middleware:[bk({mainAxis:Te+wt,alignmentAxis:st}),je&&Sk({mainAxis:!0,crossAxis:!1,limiter:se==="partial"?Ck():void 0,...pt}),je&&Dk({...pt}),Ak({...pt,apply:({elements:We,rects:C,availableWidth:U,availableHeight:Q})=>{const{width:fe,height:de}=C.reference,Ce=We.floating.style;Ce.setProperty("--radix-popper-available-width",`${U}px`),Ce.setProperty("--radix-popper-available-height",`${Q}px`),Ce.setProperty("--radix-popper-anchor-width",`${fe}px`),Ce.setProperty("--radix-popper-anchor-height",`${de}px`)}}),Pe&&Tk({element:Pe,padding:Tt}),Nk({arrowWidth:Qe,arrowHeight:wt}),B&&Ek({strategy:"referenceHidden",...pt})]}),[Lt,Ue]=N1(Qt),Ut=Jp(Be);pc(()=>{ut&&(Ut==null||Ut())},[ut,Ut]);const Ot=(Zt=St.arrow)==null?void 0:Zt.x,rn=(zt=St.arrow)==null?void 0:zt.y,$t=((Le=St.arrow)==null?void 0:Le.centerOffset)!==0,[sn,lt]=hn.useState();return pc(()=>{we&&lt(window.getComputedStyle(we).zIndex)},[we]),bn.jsx("div",{ref:ot.setFloating,"data-radix-popper-content-wrapper":"",style:{...Jt,transform:ut?Jt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:sn,"--radix-popper-transform-origin":[(Mt=St.transformOrigin)==null?void 0:Mt.x,(Rt=St.transformOrigin)==null?void 0:Rt.y].join(" "),...((tt=St.hide)==null?void 0:tt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:E.dir,children:bn.jsx(Ik,{scope:L,placedSide:Lt,onArrowChange:Se,arrowX:Ot,arrowY:rn,shouldHideArrow:$t,children:bn.jsx(Va.div,{"data-side":Lt,"data-align":Ue,...ce,ref:De,style:{...ce.style,animation:ut?void 0:"none"}})})})});L1.displayName=uw;var B1="PopperArrow",Bk={top:"bottom",right:"left",bottom:"top",left:"right"},R1=hn.forwardRef(function(H,L){const{__scopePopper:le,...Te}=H,Ve=Lk(B1,le),st=Bk[Ve.placedSide];return bn.jsx("span",{ref:Ve.onArrowChange,style:{position:"absolute",left:Ve.arrowX,top:Ve.arrowY,[st]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[Ve.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[Ve.placedSide],visibility:Ve.shouldHideArrow?"hidden":void 0},children:bn.jsx(Pk,{...Te,ref:L,style:{...Te.style,display:"block"}})})});R1.displayName=B1;function Rk(E){return E!==null}var Nk=E=>({name:"transformOrigin",options:E,fn(H){var me,we,ae;const{placement:L,rects:le,middlewareData:Te}=H,st=((me=Te.arrow)==null?void 0:me.centerOffset)!==0,Tt=st?0:E.arrowWidth,je=st?0:E.arrowHeight,[be,K]=N1(L),se={start:"0%",center:"50%",end:"100%"}[K],B=(((we=Te.arrow)==null?void 0:we.x)??0)+Tt/2,Fe=(((ae=Te.arrow)==null?void 0:ae.y)??0)+je/2;let Be="",ce="";return be==="bottom"?(Be=st?se:`${B}px`,ce=`${-je}px`):be==="top"?(Be=st?se:`${B}px`,ce=`${le.floating.height+je}px`):be==="right"?(Be=`${-je}px`,ce=st?se:`${Fe}px`):be==="left"&&(Be=`${le.floating.width+je}px`,ce=st?se:`${Fe}px`),{data:{x:Be,y:ce}}}});function N1(E){const[H,L="center"]=E.split("-");return[H,L]}var F1=O1,cw=I1,z1=L1,U1=R1,Fk="Portal",hy=hn.forwardRef((E,H)=>{var Tt;const{container:L,...le}=E,[Te,Ve]=hn.useState(!1);pc(()=>Ve(!0),[]);const st=L||Te&&((Tt=globalThis==null?void 0:globalThis.document)==null?void 0:Tt.body);return st?lO.createPortal(bn.jsx(Va.div,{...le,ref:H}),st):null});hy.displayName=Fk;function zk(E,H){return hn.useReducer((L,le)=>H[L][le]??L,E)}var bm=E=>{const{present:H,children:L}=E,le=Uk(H),Te=typeof L=="function"?L({present:le.isPresent}):hn.Children.only(L),Ve=jo(le.ref,jk(Te));return typeof L=="function"||le.isPresent?hn.cloneElement(Te,{ref:Ve}):null};bm.displayName="Presence";function Uk(E){const[H,L]=hn.useState(),le=hn.useRef({}),Te=hn.useRef(E),Ve=hn.useRef("none"),st=E?"mounted":"unmounted",[Tt,je]=zk(st,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return hn.useEffect(()=>{const be=O_(le.current);Ve.current=Tt==="mounted"?be:"none"},[Tt]),pc(()=>{const be=le.current,K=Te.current;if(K!==E){const B=Ve.current,Fe=O_(be);E?je("MOUNT"):Fe==="none"||(be==null?void 0:be.display)==="none"?je("UNMOUNT"):je(K&&B!==Fe?"ANIMATION_OUT":"UNMOUNT"),Te.current=E}},[E,je]),pc(()=>{if(H){let be;const K=H.ownerDocument.defaultView??window,se=Fe=>{const ce=O_(le.current).includes(Fe.animationName);if(Fe.target===H&&ce&&(je("ANIMATION_END"),!Te.current)){const me=H.style.animationFillMode;H.style.animationFillMode="forwards",be=K.setTimeout(()=>{H.style.animationFillMode==="forwards"&&(H.style.animationFillMode=me)})}},B=Fe=>{Fe.target===H&&(Ve.current=O_(le.current))};return H.addEventListener("animationstart",B),H.addEventListener("animationcancel",se),H.addEventListener("animationend",se),()=>{K.clearTimeout(be),H.removeEventListener("animationstart",B),H.removeEventListener("animationcancel",se),H.removeEventListener("animationend",se)}}else je("ANIMATION_END")},[H,je]),{isPresent:["mounted","unmountSuspended"].includes(Tt),ref:hn.useCallback(be=>{be&&(le.current=getComputedStyle(be)),L(be)},[])}}function O_(E){return(E==null?void 0:E.animationName)||"none"}function jk(E){var le,Te;let H=(le=Object.getOwnPropertyDescriptor(E.props,"ref"))==null?void 0:le.get,L=H&&"isReactWarning"in H&&H.isReactWarning;return L?E.ref:(H=(Te=Object.getOwnPropertyDescriptor(E,"ref"))==null?void 0:Te.get,L=H&&"isReactWarning"in H&&H.isReactWarning,L?E.props.ref:E.props.ref||E.ref)}function _m({prop:E,defaultProp:H,onChange:L=()=>{}}){const[le,Te]=Vk({defaultProp:H,onChange:L}),Ve=E!==void 0,st=Ve?E:le,Tt=Jp(L),je=hn.useCallback(be=>{if(Ve){const se=typeof be=="function"?be(E):be;se!==E&&Tt(se)}else Te(be)},[Ve,E,Te,Tt]);return[st,je]}function Vk({defaultProp:E,onChange:H}){const L=hn.useState(E),[le]=L,Te=hn.useRef(le),Ve=Jp(H);return hn.useEffect(()=>{Te.current!==le&&(Ve(le),Te.current=le)},[le,Te,Ve]),L}var Hk=function(E){if(typeof document>"u")return null;var H=Array.isArray(E)?E[0]:E;return H.ownerDocument.body},jm=new WeakMap,k_=new WeakMap,I_={},y0=0,j1=function(E){return E&&(E.host||j1(E.parentNode))},Wk=function(E,H){return H.map(function(L){if(E.contains(L))return L;var le=j1(L);return le&&E.contains(le)?le:(console.error("aria-hidden",L,"in not contained inside",E,". Doing nothing"),null)}).filter(function(L){return!!L})},Gk=function(E,H,L,le){var Te=Wk(H,Array.isArray(E)?E:[E]);I_[L]||(I_[L]=new WeakMap);var Ve=I_[L],st=[],Tt=new Set,je=new Set(Te),be=function(se){!se||Tt.has(se)||(Tt.add(se),be(se.parentNode))};Te.forEach(be);var K=function(se){!se||je.has(se)||Array.prototype.forEach.call(se.children,function(B){if(Tt.has(B))K(B);else try{var Fe=B.getAttribute(le),Be=Fe!==null&&Fe!=="false",ce=(jm.get(B)||0)+1,me=(Ve.get(B)||0)+1;jm.set(B,ce),Ve.set(B,me),st.push(B),ce===1&&Be&&k_.set(B,!0),me===1&&B.setAttribute(L,"true"),Be||B.setAttribute(le,"true")}catch(we){console.error("aria-hidden: cannot operate on ",B,we)}})};return K(H),Tt.clear(),y0++,function(){st.forEach(function(se){var B=jm.get(se)-1,Fe=Ve.get(se)-1;jm.set(se,B),Ve.set(se,Fe),B||(k_.has(se)||se.removeAttribute(le),k_.delete(se)),Fe||se.removeAttribute(L)}),y0--,y0||(jm=new WeakMap,jm=new WeakMap,k_=new WeakMap,I_={})}},hw=function(E,H,L){L===void 0&&(L="data-aria-hidden");var le=Array.from(Array.isArray(E)?E:[E]),Te=Hk(E);return Te?(le.push.apply(le,Array.from(Te.querySelectorAll("[aria-live]"))),Gk(le,Te,L,"aria-hidden")):function(){return null}},ap=function(){return ap=Object.assign||function(H){for(var L,le=1,Te=arguments.length;le<Te;le++){L=arguments[le];for(var Ve in L)Object.prototype.hasOwnProperty.call(L,Ve)&&(H[Ve]=L[Ve])}return H},ap.apply(this,arguments)};function V1(E,H){var L={};for(var le in E)Object.prototype.hasOwnProperty.call(E,le)&&H.indexOf(le)<0&&(L[le]=E[le]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Te=0,le=Object.getOwnPropertySymbols(E);Te<le.length;Te++)H.indexOf(le[Te])<0&&Object.prototype.propertyIsEnumerable.call(E,le[Te])&&(L[le[Te]]=E[le[Te]]);return L}function Yk(E,H,L){if(L||arguments.length===2)for(var le=0,Te=H.length,Ve;le<Te;le++)(Ve||!(le in H))&&(Ve||(Ve=Array.prototype.slice.call(H,0,le)),Ve[le]=H[le]);return E.concat(Ve||Array.prototype.slice.call(H))}var j_="right-scroll-bar-position",V_="width-before-scroll-bar",Zk="with-scroll-bars-hidden",$k="--removed-body-scroll-bar-size";function w0(E,H){return typeof E=="function"?E(H):E&&(E.current=H),E}function Kk(E,H){var L=hn.useState(function(){return{value:E,callback:H,facade:{get current(){return L.value},set current(le){var Te=L.value;Te!==le&&(L.value=le,L.callback(le,Te))}}}})[0];return L.callback=H,L.facade}var qk=typeof window<"u"?hn.useLayoutEffect:hn.useEffect,Bb=new WeakMap;function Xk(E,H){var L=Kk(null,function(le){return E.forEach(function(Te){return w0(Te,le)})});return qk(function(){var le=Bb.get(L);if(le){var Te=new Set(le),Ve=new Set(E),st=L.current;Te.forEach(function(Tt){Ve.has(Tt)||w0(Tt,null)}),Ve.forEach(function(Tt){Te.has(Tt)||w0(Tt,st)})}Bb.set(L,E)},[E]),L}function Qk(E){return E}function Jk(E,H){H===void 0&&(H=Qk);var L=[],le=!1,Te={read:function(){if(le)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return L.length?L[L.length-1]:E},useMedium:function(Ve){var st=H(Ve,le);return L.push(st),function(){L=L.filter(function(Tt){return Tt!==st})}},assignSyncMedium:function(Ve){for(le=!0;L.length;){var st=L;L=[],st.forEach(Ve)}L={push:function(Tt){return Ve(Tt)},filter:function(){return L}}},assignMedium:function(Ve){le=!0;var st=[];if(L.length){var Tt=L;L=[],Tt.forEach(Ve),st=L}var je=function(){var K=st;st=[],K.forEach(Ve)},be=function(){return Promise.resolve().then(je)};be(),L={push:function(K){st.push(K),be()},filter:function(K){return st=st.filter(K),L}}}};return Te}function eI(E){E===void 0&&(E={});var H=Jk(null);return H.options=ap({async:!0,ssr:!1},E),H}var H1=function(E){var H=E.sideCar,L=V1(E,["sideCar"]);if(!H)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var le=H.read();if(!le)throw new Error("Sidecar medium not found");return hn.createElement(le,ap({},L))};H1.isSideCarExport=!0;function tI(E,H){return E.useMedium(H),H1}var W1=eI(),x0=function(){},fy=hn.forwardRef(function(E,H){var L=hn.useRef(null),le=hn.useState({onScrollCapture:x0,onWheelCapture:x0,onTouchMoveCapture:x0}),Te=le[0],Ve=le[1],st=E.forwardProps,Tt=E.children,je=E.className,be=E.removeScrollBar,K=E.enabled,se=E.shards,B=E.sideCar,Fe=E.noIsolation,Be=E.inert,ce=E.allowPinchZoom,me=E.as,we=me===void 0?"div":me,ae=E.gapMode,De=V1(E,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),Pe=B,Se=Xk([L,H]),ee=ap(ap({},De),Te);return hn.createElement(hn.Fragment,null,K&&hn.createElement(Pe,{sideCar:W1,removeScrollBar:be,shards:se,noIsolation:Fe,inert:Be,setCallbacks:Ve,allowPinchZoom:!!ce,lockRef:L,gapMode:ae}),st?hn.cloneElement(hn.Children.only(Tt),ap(ap({},ee),{ref:Se})):hn.createElement(we,ap({},ee,{className:je,ref:Se}),Tt))});fy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};fy.classNames={fullWidth:V_,zeroRight:j_};var nI=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rI(){if(!document)return null;var E=document.createElement("style");E.type="text/css";var H=nI();return H&&E.setAttribute("nonce",H),E}function iI(E,H){E.styleSheet?E.styleSheet.cssText=H:E.appendChild(document.createTextNode(H))}function sI(E){var H=document.head||document.getElementsByTagName("head")[0];H.appendChild(E)}var aI=function(){var E=0,H=null;return{add:function(L){E==0&&(H=rI())&&(iI(H,L),sI(H)),E++},remove:function(){E--,!E&&H&&(H.parentNode&&H.parentNode.removeChild(H),H=null)}}},oI=function(){var E=aI();return function(H,L){hn.useEffect(function(){return E.add(H),function(){E.remove()}},[H&&L])}},G1=function(){var E=oI(),H=function(L){var le=L.styles,Te=L.dynamic;return E(le,Te),null};return H},lI={left:0,top:0,right:0,gap:0},b0=function(E){return parseInt(E||"",10)||0},uI=function(E){var H=window.getComputedStyle(document.body),L=H[E==="padding"?"paddingLeft":"marginLeft"],le=H[E==="padding"?"paddingTop":"marginTop"],Te=H[E==="padding"?"paddingRight":"marginRight"];return[b0(L),b0(le),b0(Te)]},cI=function(E){if(E===void 0&&(E="margin"),typeof window>"u")return lI;var H=uI(E),L=document.documentElement.clientWidth,le=window.innerWidth;return{left:H[0],top:H[1],right:H[2],gap:Math.max(0,le-L+H[2]-H[0])}},hI=G1(),Km="data-scroll-locked",fI=function(E,H,L,le){var Te=E.left,Ve=E.top,st=E.right,Tt=E.gap;return L===void 0&&(L="margin"),`
  .`.concat(Zk,` {
   overflow: hidden `).concat(le,`;
   padding-right: `).concat(Tt,"px ").concat(le,`;
  }
  body[`).concat(Km,`] {
    overflow: hidden `).concat(le,`;
    overscroll-behavior: contain;
    `).concat([H&&"position: relative ".concat(le,";"),L==="margin"&&`
    padding-left: `.concat(Te,`px;
    padding-top: `).concat(Ve,`px;
    padding-right: `).concat(st,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(Tt,"px ").concat(le,`;
    `),L==="padding"&&"padding-right: ".concat(Tt,"px ").concat(le,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(j_,` {
    right: `).concat(Tt,"px ").concat(le,`;
  }
  
  .`).concat(V_,` {
    margin-right: `).concat(Tt,"px ").concat(le,`;
  }
  
  .`).concat(j_," .").concat(j_,` {
    right: 0 `).concat(le,`;
  }
  
  .`).concat(V_," .").concat(V_,` {
    margin-right: 0 `).concat(le,`;
  }
  
  body[`).concat(Km,`] {
    `).concat($k,": ").concat(Tt,`px;
  }
`)},Rb=function(){var E=parseInt(document.body.getAttribute(Km)||"0",10);return isFinite(E)?E:0},dI=function(){hn.useEffect(function(){return document.body.setAttribute(Km,(Rb()+1).toString()),function(){var E=Rb()-1;E<=0?document.body.removeAttribute(Km):document.body.setAttribute(Km,E.toString())}},[])},pI=function(E){var H=E.noRelative,L=E.noImportant,le=E.gapMode,Te=le===void 0?"margin":le;dI();var Ve=hn.useMemo(function(){return cI(Te)},[Te]);return hn.createElement(hI,{styles:fI(Ve,!H,Te,L?"":"!important")})},z0=!1;if(typeof window<"u")try{var L_=Object.defineProperty({},"passive",{get:function(){return z0=!0,!0}});window.addEventListener("test",L_,L_),window.removeEventListener("test",L_,L_)}catch{z0=!1}var Vm=z0?{passive:!1}:!1,gI=function(E){return E.tagName==="TEXTAREA"},Y1=function(E,H){if(!(E instanceof Element))return!1;var L=window.getComputedStyle(E);return L[H]!=="hidden"&&!(L.overflowY===L.overflowX&&!gI(E)&&L[H]==="visible")},mI=function(E){return Y1(E,"overflowY")},vI=function(E){return Y1(E,"overflowX")},Nb=function(E,H){var L=H.ownerDocument,le=H;do{typeof ShadowRoot<"u"&&le instanceof ShadowRoot&&(le=le.host);var Te=Z1(E,le);if(Te){var Ve=$1(E,le),st=Ve[1],Tt=Ve[2];if(st>Tt)return!0}le=le.parentNode}while(le&&le!==L.body);return!1},_I=function(E){var H=E.scrollTop,L=E.scrollHeight,le=E.clientHeight;return[H,L,le]},yI=function(E){var H=E.scrollLeft,L=E.scrollWidth,le=E.clientWidth;return[H,L,le]},Z1=function(E,H){return E==="v"?mI(H):vI(H)},$1=function(E,H){return E==="v"?_I(H):yI(H)},wI=function(E,H){return E==="h"&&H==="rtl"?-1:1},xI=function(E,H,L,le,Te){var Ve=wI(E,window.getComputedStyle(H).direction),st=Ve*le,Tt=L.target,je=H.contains(Tt),be=!1,K=st>0,se=0,B=0;do{var Fe=$1(E,Tt),Be=Fe[0],ce=Fe[1],me=Fe[2],we=ce-me-Ve*Be;(Be||we)&&Z1(E,Tt)&&(se+=we,B+=Be),Tt instanceof ShadowRoot?Tt=Tt.host:Tt=Tt.parentNode}while(!je&&Tt!==document.body||je&&(H.contains(Tt)||H===Tt));return(K&&Math.abs(se)<1||!K&&Math.abs(B)<1)&&(be=!0),be},B_=function(E){return"changedTouches"in E?[E.changedTouches[0].clientX,E.changedTouches[0].clientY]:[0,0]},Fb=function(E){return[E.deltaX,E.deltaY]},zb=function(E){return E&&"current"in E?E.current:E},bI=function(E,H){return E[0]===H[0]&&E[1]===H[1]},SI=function(E){return`
  .block-interactivity-`.concat(E,` {pointer-events: none;}
  .allow-interactivity-`).concat(E,` {pointer-events: all;}
`)},CI=0,Hm=[];function DI(E){var H=hn.useRef([]),L=hn.useRef([0,0]),le=hn.useRef(),Te=hn.useState(CI++)[0],Ve=hn.useState(G1)[0],st=hn.useRef(E);hn.useEffect(function(){st.current=E},[E]),hn.useEffect(function(){if(E.inert){document.body.classList.add("block-interactivity-".concat(Te));var ce=Yk([E.lockRef.current],(E.shards||[]).map(zb),!0).filter(Boolean);return ce.forEach(function(me){return me.classList.add("allow-interactivity-".concat(Te))}),function(){document.body.classList.remove("block-interactivity-".concat(Te)),ce.forEach(function(me){return me.classList.remove("allow-interactivity-".concat(Te))})}}},[E.inert,E.lockRef.current,E.shards]);var Tt=hn.useCallback(function(ce,me){if("touches"in ce&&ce.touches.length===2||ce.type==="wheel"&&ce.ctrlKey)return!st.current.allowPinchZoom;var we=B_(ce),ae=L.current,De="deltaX"in ce?ce.deltaX:ae[0]-we[0],Pe="deltaY"in ce?ce.deltaY:ae[1]-we[1],Se,ee=ce.target,Qe=Math.abs(De)>Math.abs(Pe)?"h":"v";if("touches"in ce&&Qe==="h"&&ee.type==="range")return!1;var wt=Nb(Qe,ee);if(!wt)return!0;if(wt?Se=Qe:(Se=Qe==="v"?"h":"v",wt=Nb(Qe,ee)),!wt)return!1;if(!le.current&&"changedTouches"in ce&&(De||Pe)&&(le.current=Se),!Se)return!0;var Dt=le.current||Se;return xI(Dt,me,ce,Dt==="h"?De:Pe)},[]),je=hn.useCallback(function(ce){var me=ce;if(!(!Hm.length||Hm[Hm.length-1]!==Ve)){var we="deltaY"in me?Fb(me):B_(me),ae=H.current.filter(function(Se){return Se.name===me.type&&(Se.target===me.target||me.target===Se.shadowParent)&&bI(Se.delta,we)})[0];if(ae&&ae.should){me.cancelable&&me.preventDefault();return}if(!ae){var De=(st.current.shards||[]).map(zb).filter(Boolean).filter(function(Se){return Se.contains(me.target)}),Pe=De.length>0?Tt(me,De[0]):!st.current.noIsolation;Pe&&me.cancelable&&me.preventDefault()}}},[]),be=hn.useCallback(function(ce,me,we,ae){var De={name:ce,delta:me,target:we,should:ae,shadowParent:AI(we)};H.current.push(De),setTimeout(function(){H.current=H.current.filter(function(Pe){return Pe!==De})},1)},[]),K=hn.useCallback(function(ce){L.current=B_(ce),le.current=void 0},[]),se=hn.useCallback(function(ce){be(ce.type,Fb(ce),ce.target,Tt(ce,E.lockRef.current))},[]),B=hn.useCallback(function(ce){be(ce.type,B_(ce),ce.target,Tt(ce,E.lockRef.current))},[]);hn.useEffect(function(){return Hm.push(Ve),E.setCallbacks({onScrollCapture:se,onWheelCapture:se,onTouchMoveCapture:B}),document.addEventListener("wheel",je,Vm),document.addEventListener("touchmove",je,Vm),document.addEventListener("touchstart",K,Vm),function(){Hm=Hm.filter(function(ce){return ce!==Ve}),document.removeEventListener("wheel",je,Vm),document.removeEventListener("touchmove",je,Vm),document.removeEventListener("touchstart",K,Vm)}},[]);var Fe=E.removeScrollBar,Be=E.inert;return hn.createElement(hn.Fragment,null,Be?hn.createElement(Ve,{styles:SI(Te)}):null,Fe?hn.createElement(pI,{gapMode:E.gapMode}):null)}function AI(E){for(var H=null;E!==null;)E instanceof ShadowRoot&&(H=E.host,E=E.host),E=E.parentNode;return H}const EI=tI(W1,DI);var dy=hn.forwardRef(function(E,H){return hn.createElement(fy,ap({},E,{ref:H,sideCar:EI}))});dy.classNames=fy.classNames;var fw="Popover",[K1,o2]=xm(fw,[cy]),a_=cy(),[TI,Hg]=K1(fw),q1=E=>{const{__scopePopover:H,children:L,open:le,defaultOpen:Te,onOpenChange:Ve,modal:st=!1}=E,Tt=a_(H),je=hn.useRef(null),[be,K]=hn.useState(!1),[se=!1,B]=_m({prop:le,defaultProp:Te,onChange:Ve});return bn.jsx(F1,{...Tt,children:bn.jsx(TI,{scope:H,contentId:Qp(),triggerRef:je,open:se,onOpenChange:B,onOpenToggle:hn.useCallback(()=>B(Fe=>!Fe),[B]),hasCustomAnchor:be,onCustomAnchorAdd:hn.useCallback(()=>K(!0),[]),onCustomAnchorRemove:hn.useCallback(()=>K(!1),[]),modal:st,children:L})})};q1.displayName=fw;var X1="PopoverAnchor",MI=hn.forwardRef((E,H)=>{const{__scopePopover:L,...le}=E,Te=Hg(X1,L),Ve=a_(L),{onCustomAnchorAdd:st,onCustomAnchorRemove:Tt}=Te;return hn.useEffect(()=>(st(),()=>Tt()),[st,Tt]),bn.jsx(cw,{...Ve,...le,ref:H})});MI.displayName=X1;var Q1="PopoverTrigger",J1=hn.forwardRef((E,H)=>{const{__scopePopover:L,...le}=E,Te=Hg(Q1,L),Ve=a_(L),st=jo(H,Te.triggerRef),Tt=bn.jsx(Va.button,{type:"button","aria-haspopup":"dialog","aria-expanded":Te.open,"aria-controls":Te.contentId,"data-state":iS(Te.open),...le,ref:st,onClick:ja(E.onClick,Te.onOpenToggle)});return Te.hasCustomAnchor?Tt:bn.jsx(cw,{asChild:!0,...Ve,children:Tt})});J1.displayName=Q1;var dw="PopoverPortal",[PI,OI]=K1(dw,{forceMount:void 0}),eS=E=>{const{__scopePopover:H,forceMount:L,children:le,container:Te}=E,Ve=Hg(dw,H);return bn.jsx(PI,{scope:H,forceMount:L,children:bn.jsx(bm,{present:L||Ve.open,children:bn.jsx(hy,{asChild:!0,container:Te,children:le})})})};eS.displayName=dw;var Jm="PopoverContent",tS=hn.forwardRef((E,H)=>{const L=OI(Jm,E.__scopePopover),{forceMount:le=L.forceMount,...Te}=E,Ve=Hg(Jm,E.__scopePopover);return bn.jsx(bm,{present:le||Ve.open,children:Ve.modal?bn.jsx(kI,{...Te,ref:H}):bn.jsx(II,{...Te,ref:H})})});tS.displayName=Jm;var kI=hn.forwardRef((E,H)=>{const L=Hg(Jm,E.__scopePopover),le=hn.useRef(null),Te=jo(H,le),Ve=hn.useRef(!1);return hn.useEffect(()=>{const st=le.current;if(st)return hw(st)},[]),bn.jsx(dy,{as:zg,allowPinchZoom:!0,children:bn.jsx(nS,{...E,ref:Te,trapFocus:L.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ja(E.onCloseAutoFocus,st=>{var Tt;st.preventDefault(),Ve.current||(Tt=L.triggerRef.current)==null||Tt.focus()}),onPointerDownOutside:ja(E.onPointerDownOutside,st=>{const Tt=st.detail.originalEvent,je=Tt.button===0&&Tt.ctrlKey===!0,be=Tt.button===2||je;Ve.current=be},{checkForDefaultPrevented:!1}),onFocusOutside:ja(E.onFocusOutside,st=>st.preventDefault(),{checkForDefaultPrevented:!1})})})}),II=hn.forwardRef((E,H)=>{const L=Hg(Jm,E.__scopePopover),le=hn.useRef(!1),Te=hn.useRef(!1);return bn.jsx(nS,{...E,ref:H,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Ve=>{var st,Tt;(st=E.onCloseAutoFocus)==null||st.call(E,Ve),Ve.defaultPrevented||(le.current||(Tt=L.triggerRef.current)==null||Tt.focus(),Ve.preventDefault()),le.current=!1,Te.current=!1},onInteractOutside:Ve=>{var je,be;(je=E.onInteractOutside)==null||je.call(E,Ve),Ve.defaultPrevented||(le.current=!0,Ve.detail.originalEvent.type==="pointerdown"&&(Te.current=!0));const st=Ve.target;((be=L.triggerRef.current)==null?void 0:be.contains(st))&&Ve.preventDefault(),Ve.detail.originalEvent.type==="focusin"&&Te.current&&Ve.preventDefault()}})}),nS=hn.forwardRef((E,H)=>{const{__scopePopover:L,trapFocus:le,onOpenAutoFocus:Te,onCloseAutoFocus:Ve,disableOutsidePointerEvents:st,onEscapeKeyDown:Tt,onPointerDownOutside:je,onFocusOutside:be,onInteractOutside:K,...se}=E,B=Hg(Jm,L),Fe=a_(L);return ew(),bn.jsx(ay,{asChild:!0,loop:!0,trapped:le,onMountAutoFocus:Te,onUnmountAutoFocus:Ve,children:bn.jsx(sy,{asChild:!0,disableOutsidePointerEvents:st,onInteractOutside:K,onEscapeKeyDown:Tt,onPointerDownOutside:je,onFocusOutside:be,onDismiss:()=>B.onOpenChange(!1),children:bn.jsx(z1,{"data-state":iS(B.open),role:"dialog",id:B.contentId,...Fe,...se,ref:H,style:{...se.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),rS="PopoverClose",LI=hn.forwardRef((E,H)=>{const{__scopePopover:L,...le}=E,Te=Hg(rS,L);return bn.jsx(Va.button,{type:"button",...le,ref:H,onClick:ja(E.onClick,()=>Te.onOpenChange(!1))})});LI.displayName=rS;var BI="PopoverArrow",RI=hn.forwardRef((E,H)=>{const{__scopePopover:L,...le}=E,Te=a_(L);return bn.jsx(U1,{...Te,...le,ref:H})});RI.displayName=BI;function iS(E){return E?"open":"closed"}var NI=q1,FI=J1,zI=eS,sS=tS;function aS(E){var H,L,le="";if(typeof E=="string"||typeof E=="number")le+=E;else if(typeof E=="object")if(Array.isArray(E)){var Te=E.length;for(H=0;H<Te;H++)E[H]&&(L=aS(E[H]))&&(le&&(le+=" "),le+=L)}else for(L in E)E[L]&&(le&&(le+=" "),le+=L);return le}function oS(){for(var E,H,L=0,le="",Te=arguments.length;L<Te;L++)(E=arguments[L])&&(H=aS(E))&&(le&&(le+=" "),le+=H);return le}const pw="-",UI=E=>{const H=VI(E),{conflictingClassGroups:L,conflictingClassGroupModifiers:le}=E;return{getClassGroupId:st=>{const Tt=st.split(pw);return Tt[0]===""&&Tt.length!==1&&Tt.shift(),lS(Tt,H)||jI(st)},getConflictingClassGroupIds:(st,Tt)=>{const je=L[st]||[];return Tt&&le[st]?[...je,...le[st]]:je}}},lS=(E,H)=>{var st;if(E.length===0)return H.classGroupId;const L=E[0],le=H.nextPart.get(L),Te=le?lS(E.slice(1),le):void 0;if(Te)return Te;if(H.validators.length===0)return;const Ve=E.join(pw);return(st=H.validators.find(({validator:Tt})=>Tt(Ve)))==null?void 0:st.classGroupId},Ub=/^\[(.+)\]$/,jI=E=>{if(Ub.test(E)){const H=Ub.exec(E)[1],L=H==null?void 0:H.substring(0,H.indexOf(":"));if(L)return"arbitrary.."+L}},VI=E=>{const{theme:H,classGroups:L}=E,le={nextPart:new Map,validators:[]};for(const Te in L)U0(L[Te],le,Te,H);return le},U0=(E,H,L,le)=>{E.forEach(Te=>{if(typeof Te=="string"){const Ve=Te===""?H:jb(H,Te);Ve.classGroupId=L;return}if(typeof Te=="function"){if(HI(Te)){U0(Te(le),H,L,le);return}H.validators.push({validator:Te,classGroupId:L});return}Object.entries(Te).forEach(([Ve,st])=>{U0(st,jb(H,Ve),L,le)})})},jb=(E,H)=>{let L=E;return H.split(pw).forEach(le=>{L.nextPart.has(le)||L.nextPart.set(le,{nextPart:new Map,validators:[]}),L=L.nextPart.get(le)}),L},HI=E=>E.isThemeGetter,WI=E=>{if(E<1)return{get:()=>{},set:()=>{}};let H=0,L=new Map,le=new Map;const Te=(Ve,st)=>{L.set(Ve,st),H++,H>E&&(H=0,le=L,L=new Map)};return{get(Ve){let st=L.get(Ve);if(st!==void 0)return st;if((st=le.get(Ve))!==void 0)return Te(Ve,st),st},set(Ve,st){L.has(Ve)?L.set(Ve,st):Te(Ve,st)}}},j0="!",V0=":",GI=V0.length,YI=E=>{const{prefix:H,experimentalParseClassName:L}=E;let le=Te=>{const Ve=[];let st=0,Tt=0,je=0,be;for(let Be=0;Be<Te.length;Be++){let ce=Te[Be];if(st===0&&Tt===0){if(ce===V0){Ve.push(Te.slice(je,Be)),je=Be+GI;continue}if(ce==="/"){be=Be;continue}}ce==="["?st++:ce==="]"?st--:ce==="("?Tt++:ce===")"&&Tt--}const K=Ve.length===0?Te:Te.substring(je),se=ZI(K),B=se!==K,Fe=be&&be>je?be-je:void 0;return{modifiers:Ve,hasImportantModifier:B,baseClassName:se,maybePostfixModifierPosition:Fe}};if(H){const Te=H+V0,Ve=le;le=st=>st.startsWith(Te)?Ve(st.substring(Te.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:st,maybePostfixModifierPosition:void 0}}if(L){const Te=le;le=Ve=>L({className:Ve,parseClassName:Te})}return le},ZI=E=>E.endsWith(j0)?E.substring(0,E.length-1):E.startsWith(j0)?E.substring(1):E,$I=E=>{const H=Object.fromEntries(E.orderSensitiveModifiers.map(le=>[le,!0]));return le=>{if(le.length<=1)return le;const Te=[];let Ve=[];return le.forEach(st=>{st[0]==="["||H[st]?(Te.push(...Ve.sort(),st),Ve=[]):Ve.push(st)}),Te.push(...Ve.sort()),Te}},KI=E=>({cache:WI(E.cacheSize),parseClassName:YI(E),sortModifiers:$I(E),...UI(E)}),qI=/\s+/,XI=(E,H)=>{const{parseClassName:L,getClassGroupId:le,getConflictingClassGroupIds:Te,sortModifiers:Ve}=H,st=[],Tt=E.trim().split(qI);let je="";for(let be=Tt.length-1;be>=0;be-=1){const K=Tt[be],{isExternal:se,modifiers:B,hasImportantModifier:Fe,baseClassName:Be,maybePostfixModifierPosition:ce}=L(K);if(se){je=K+(je.length>0?" "+je:je);continue}let me=!!ce,we=le(me?Be.substring(0,ce):Be);if(!we){if(!me){je=K+(je.length>0?" "+je:je);continue}if(we=le(Be),!we){je=K+(je.length>0?" "+je:je);continue}me=!1}const ae=Ve(B).join(":"),De=Fe?ae+j0:ae,Pe=De+we;if(st.includes(Pe))continue;st.push(Pe);const Se=Te(we,me);for(let ee=0;ee<Se.length;++ee){const Qe=Se[ee];st.push(De+Qe)}je=K+(je.length>0?" "+je:je)}return je};function QI(){let E=0,H,L,le="";for(;E<arguments.length;)(H=arguments[E++])&&(L=uS(H))&&(le&&(le+=" "),le+=L);return le}const uS=E=>{if(typeof E=="string")return E;let H,L="";for(let le=0;le<E.length;le++)E[le]&&(H=uS(E[le]))&&(L&&(L+=" "),L+=H);return L};function JI(E,...H){let L,le,Te,Ve=st;function st(je){const be=H.reduce((K,se)=>se(K),E());return L=KI(be),le=L.cache.get,Te=L.cache.set,Ve=Tt,Tt(je)}function Tt(je){const be=le(je);if(be)return be;const K=XI(je,L);return Te(je,K),K}return function(){return Ve(QI.apply(null,arguments))}}const Tu=E=>{const H=L=>L[E]||[];return H.isThemeGetter=!0,H},cS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,hS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,eL=/^\d+\/\d+$/,tL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Wm=E=>eL.test(E),ma=E=>!!E&&!Number.isNaN(Number(E)),pm=E=>!!E&&Number.isInteger(Number(E)),Vb=E=>E.endsWith("%")&&ma(E.slice(0,-1)),Ig=E=>tL.test(E),aL=()=>!0,oL=E=>nL.test(E)&&!rL.test(E),gw=()=>!1,lL=E=>iL.test(E),uL=E=>sL.test(E),cL=E=>!Hi(E)&&!Wi(E),hL=E=>nv(E,pS,gw),Hi=E=>cS.test(E),gm=E=>nv(E,gS,oL),S0=E=>nv(E,bL,ma),fL=E=>nv(E,fS,gw),dL=E=>nv(E,dS,uL),pL=E=>nv(E,gw,lL),Wi=E=>hS.test(E),R_=E=>rv(E,gS),gL=E=>rv(E,SL),mL=E=>rv(E,fS),vL=E=>rv(E,pS),_L=E=>rv(E,dS),yL=E=>rv(E,CL,!0),nv=(E,H,L)=>{const le=cS.exec(E);return le?le[1]?H(le[1]):L(le[2]):!1},rv=(E,H,L=!1)=>{const le=hS.exec(E);return le?le[1]?H(le[1]):L:!1},fS=E=>E==="position",wL=new Set(["image","url"]),dS=E=>wL.has(E),xL=new Set(["length","size","percentage"]),pS=E=>xL.has(E),gS=E=>E==="length",bL=E=>E==="number",SL=E=>E==="family-name",CL=E=>E==="shadow",DL=()=>{const E=Tu("color"),H=Tu("font"),L=Tu("text"),le=Tu("font-weight"),Te=Tu("tracking"),Ve=Tu("leading"),st=Tu("breakpoint"),Tt=Tu("container"),je=Tu("spacing"),be=Tu("radius"),K=Tu("shadow"),se=Tu("inset-shadow"),B=Tu("drop-shadow"),Fe=Tu("blur"),Be=Tu("perspective"),ce=Tu("aspect"),me=Tu("ease"),we=Tu("animate"),ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],De=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Pe=()=>["auto","hidden","clip","visible","scroll"],Se=()=>["auto","contain","none"],ee=()=>[Wi,Hi,je],Qe=()=>[Wm,"full","auto",...ee()],wt=()=>[pm,"none","subgrid",Wi,Hi],Dt=()=>["auto",{span:["full",pm,Wi,Hi]},Wi,Hi],at=()=>[pm,"auto",Wi,Hi],Ne=()=>["auto","min","max","fr",Wi,Hi],Je=()=>["start","end","center","between","around","evenly","stretch","baseline"],pt=()=>["start","end","center","stretch"],ot=()=>["auto",...ee()],Jt=()=>[Wm,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...ee()],Qt=()=>[E,Wi,Hi],ut=()=>[Vb,gm],St=()=>["","none","full",be,Wi,Hi],Lt=()=>["",ma,R_,gm],Ue=()=>["solid","dashed","dotted","double"],Ut=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ot=()=>["","none",Fe,Wi,Hi],rn=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Wi,Hi],$t=()=>["none",ma,Wi,Hi],sn=()=>["none",ma,Wi,Hi],lt=()=>[ma,Wi,Hi],Zt=()=>[Wm,"full",...ee()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ig],breakpoint:[Ig],color:[aL],container:[Ig],"drop-shadow":[Ig],ease:["in","out","in-out"],font:[cL],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ig],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ig],shadow:[Ig],spacing:["px",ma],text:[Ig],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Wm,Hi,Wi,ce]}],container:["container"],columns:[{columns:[ma,Hi,Wi,Tt]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...De(),Hi,Wi]}],overflow:[{overflow:Pe()}],"overflow-x":[{"overflow-x":Pe()}],"overflow-y":[{"overflow-y":Pe()}],overscroll:[{overscroll:Se()}],"overscroll-x":[{"overscroll-x":Se()}],"overscroll-y":[{"overscroll-y":Se()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Qe()}],"inset-x":[{"inset-x":Qe()}],"inset-y":[{"inset-y":Qe()}],start:[{start:Qe()}],end:[{end:Qe()}],top:[{top:Qe()}],right:[{right:Qe()}],bottom:[{bottom:Qe()}],left:[{left:Qe()}],visibility:["visible","invisible","collapse"],z:[{z:[pm,"auto",Wi,Hi]}],basis:[{basis:[Wm,"full","auto",Tt,...ee()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ma,Wm,"auto","initial","none",Hi]}],grow:[{grow:["",ma,Wi,Hi]}],shrink:[{shrink:["",ma,Wi,Hi]}],order:[{order:[pm,"first","last","none",Wi,Hi]}],"grid-cols":[{"grid-cols":wt()}],"col-start-end":[{col:Dt()}],"col-start":[{"col-start":at()}],"col-end":[{"col-end":at()}],"grid-rows":[{"grid-rows":wt()}],"row-start-end":[{row:Dt()}],"row-start":[{"row-start":at()}],"row-end":[{"row-end":at()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ne()}],"auto-rows":[{"auto-rows":Ne()}],gap:[{gap:ee()}],"gap-x":[{"gap-x":ee()}],"gap-y":[{"gap-y":ee()}],"justify-content":[{justify:[...Je(),"normal"]}],"justify-items":[{"justify-items":[...pt(),"normal"]}],"justify-self":[{"justify-self":["auto",...pt()]}],"align-content":[{content:["normal",...Je()]}],"align-items":[{items:[...pt(),"baseline"]}],"align-self":[{self:["auto",...pt(),"baseline"]}],"place-content":[{"place-content":Je()}],"place-items":[{"place-items":[...pt(),"baseline"]}],"place-self":[{"place-self":["auto",...pt()]}],p:[{p:ee()}],px:[{px:ee()}],py:[{py:ee()}],ps:[{ps:ee()}],pe:[{pe:ee()}],pt:[{pt:ee()}],pr:[{pr:ee()}],pb:[{pb:ee()}],pl:[{pl:ee()}],m:[{m:ot()}],mx:[{mx:ot()}],my:[{my:ot()}],ms:[{ms:ot()}],me:[{me:ot()}],mt:[{mt:ot()}],mr:[{mr:ot()}],mb:[{mb:ot()}],ml:[{ml:ot()}],"space-x":[{"space-x":ee()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":ee()}],"space-y-reverse":["space-y-reverse"],size:[{size:Jt()}],w:[{w:[Tt,"screen",...Jt()]}],"min-w":[{"min-w":[Tt,"screen","none",...Jt()]}],"max-w":[{"max-w":[Tt,"screen","none","prose",{screen:[st]},...Jt()]}],h:[{h:["screen",...Jt()]}],"min-h":[{"min-h":["screen","none",...Jt()]}],"max-h":[{"max-h":["screen",...Jt()]}],"font-size":[{text:["base",L,R_,gm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[le,Wi,S0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Vb,Hi]}],"font-family":[{font:[gL,Hi,H]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[Te,Wi,Hi]}],"line-clamp":[{"line-clamp":[ma,"none",Wi,S0]}],leading:[{leading:[Ve,...ee()]}],"list-image":[{"list-image":["none",Wi,Hi]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Wi,Hi]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Qt()}],"text-color":[{text:Qt()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ue(),"wavy"]}],"text-decoration-thickness":[{decoration:[ma,"from-font","auto",Wi,gm]}],"text-decoration-color":[{decoration:Qt()}],"underline-offset":[{"underline-offset":[ma,"auto",Wi,Hi]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ee()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Wi,Hi]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Wi,Hi]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...De(),mL,fL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",vL,hL]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},pm,Wi,Hi],radial:["",Wi,Hi],conic:[pm,Wi,Hi]},_L,dL]}],"bg-color":[{bg:Qt()}],"gradient-from-pos":[{from:ut()}],"gradient-via-pos":[{via:ut()}],"gradient-to-pos":[{to:ut()}],"gradient-from":[{from:Qt()}],"gradient-via":[{via:Qt()}],"gradient-to":[{to:Qt()}],rounded:[{rounded:St()}],"rounded-s":[{"rounded-s":St()}],"rounded-e":[{"rounded-e":St()}],"rounded-t":[{"rounded-t":St()}],"rounded-r":[{"rounded-r":St()}],"rounded-b":[{"rounded-b":St()}],"rounded-l":[{"rounded-l":St()}],"rounded-ss":[{"rounded-ss":St()}],"rounded-se":[{"rounded-se":St()}],"rounded-ee":[{"rounded-ee":St()}],"rounded-es":[{"rounded-es":St()}],"rounded-tl":[{"rounded-tl":St()}],"rounded-tr":[{"rounded-tr":St()}],"rounded-br":[{"rounded-br":St()}],"rounded-bl":[{"rounded-bl":St()}],"border-w":[{border:Lt()}],"border-w-x":[{"border-x":Lt()}],"border-w-y":[{"border-y":Lt()}],"border-w-s":[{"border-s":Lt()}],"border-w-e":[{"border-e":Lt()}],"border-w-t":[{"border-t":Lt()}],"border-w-r":[{"border-r":Lt()}],"border-w-b":[{"border-b":Lt()}],"border-w-l":[{"border-l":Lt()}],"divide-x":[{"divide-x":Lt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Lt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ue(),"hidden","none"]}],"divide-style":[{divide:[...Ue(),"hidden","none"]}],"border-color":[{border:Qt()}],"border-color-x":[{"border-x":Qt()}],"border-color-y":[{"border-y":Qt()}],"border-color-s":[{"border-s":Qt()}],"border-color-e":[{"border-e":Qt()}],"border-color-t":[{"border-t":Qt()}],"border-color-r":[{"border-r":Qt()}],"border-color-b":[{"border-b":Qt()}],"border-color-l":[{"border-l":Qt()}],"divide-color":[{divide:Qt()}],"outline-style":[{outline:[...Ue(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ma,Wi,Hi]}],"outline-w":[{outline:["",ma,R_,gm]}],"outline-color":[{outline:[E]}],shadow:[{shadow:["","none",K,yL,pL]}],"shadow-color":[{shadow:Qt()}],"inset-shadow":[{"inset-shadow":["none",Wi,Hi,se]}],"inset-shadow-color":[{"inset-shadow":Qt()}],"ring-w":[{ring:Lt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Qt()}],"ring-offset-w":[{"ring-offset":[ma,gm]}],"ring-offset-color":[{"ring-offset":Qt()}],"inset-ring-w":[{"inset-ring":Lt()}],"inset-ring-color":[{"inset-ring":Qt()}],opacity:[{opacity:[ma,Wi,Hi]}],"mix-blend":[{"mix-blend":[...Ut(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ut()}],filter:[{filter:["","none",Wi,Hi]}],blur:[{blur:Ot()}],brightness:[{brightness:[ma,Wi,Hi]}],contrast:[{contrast:[ma,Wi,Hi]}],"drop-shadow":[{"drop-shadow":["","none",B,Wi,Hi]}],grayscale:[{grayscale:["",ma,Wi,Hi]}],"hue-rotate":[{"hue-rotate":[ma,Wi,Hi]}],invert:[{invert:["",ma,Wi,Hi]}],saturate:[{saturate:[ma,Wi,Hi]}],sepia:[{sepia:["",ma,Wi,Hi]}],"backdrop-filter":[{"backdrop-filter":["","none",Wi,Hi]}],"backdrop-blur":[{"backdrop-blur":Ot()}],"backdrop-brightness":[{"backdrop-brightness":[ma,Wi,Hi]}],"backdrop-contrast":[{"backdrop-contrast":[ma,Wi,Hi]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ma,Wi,Hi]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ma,Wi,Hi]}],"backdrop-invert":[{"backdrop-invert":["",ma,Wi,Hi]}],"backdrop-opacity":[{"backdrop-opacity":[ma,Wi,Hi]}],"backdrop-saturate":[{"backdrop-saturate":[ma,Wi,Hi]}],"backdrop-sepia":[{"backdrop-sepia":["",ma,Wi,Hi]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":ee()}],"border-spacing-x":[{"border-spacing-x":ee()}],"border-spacing-y":[{"border-spacing-y":ee()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Wi,Hi]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ma,"initial",Wi,Hi]}],ease:[{ease:["linear","initial",me,Wi,Hi]}],delay:[{delay:[ma,Wi,Hi]}],animate:[{animate:["none",we,Wi,Hi]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[Be,Wi,Hi]}],"perspective-origin":[{"perspective-origin":rn()}],rotate:[{rotate:$t()}],"rotate-x":[{"rotate-x":$t()}],"rotate-y":[{"rotate-y":$t()}],"rotate-z":[{"rotate-z":$t()}],scale:[{scale:sn()}],"scale-x":[{"scale-x":sn()}],"scale-y":[{"scale-y":sn()}],"scale-z":[{"scale-z":sn()}],"scale-3d":["scale-3d"],skew:[{skew:lt()}],"skew-x":[{"skew-x":lt()}],"skew-y":[{"skew-y":lt()}],transform:[{transform:[Wi,Hi,"","none","gpu","cpu"]}],"transform-origin":[{origin:rn()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Zt()}],"translate-x":[{"translate-x":Zt()}],"translate-y":[{"translate-y":Zt()}],"translate-z":[{"translate-z":Zt()}],"translate-none":["translate-none"],accent:[{accent:Qt()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Qt()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Wi,Hi]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ee()}],"scroll-mx":[{"scroll-mx":ee()}],"scroll-my":[{"scroll-my":ee()}],"scroll-ms":[{"scroll-ms":ee()}],"scroll-me":[{"scroll-me":ee()}],"scroll-mt":[{"scroll-mt":ee()}],"scroll-mr":[{"scroll-mr":ee()}],"scroll-mb":[{"scroll-mb":ee()}],"scroll-ml":[{"scroll-ml":ee()}],"scroll-p":[{"scroll-p":ee()}],"scroll-px":[{"scroll-px":ee()}],"scroll-py":[{"scroll-py":ee()}],"scroll-ps":[{"scroll-ps":ee()}],"scroll-pe":[{"scroll-pe":ee()}],"scroll-pt":[{"scroll-pt":ee()}],"scroll-pr":[{"scroll-pr":ee()}],"scroll-pb":[{"scroll-pb":ee()}],"scroll-pl":[{"scroll-pl":ee()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Wi,Hi]}],fill:[{fill:["none",...Qt()]}],"stroke-w":[{stroke:[ma,R_,gm,S0]}],stroke:[{stroke:["none",...Qt()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},AL=JI(DL);function ql(...E){return AL(oS(E))}const EL=NI,TL=FI,mS=hn.forwardRef(({className:E,align:H="center",sideOffset:L=4,...le},Te)=>bn.jsx(zI,{children:bn.jsx(sS,{ref:Te,align:H,sideOffset:L,className:ql("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",E),...le})}));mS.displayName=sS.displayName;/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=E=>E.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vS=(...E)=>E.filter((H,L,le)=>!!H&&H.trim()!==""&&le.indexOf(H)===L).join(" ").trim();/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=hn.forwardRef(({color:E="currentColor",size:H=24,strokeWidth:L=2,absoluteStrokeWidth:le,className:Te="",children:Ve,iconNode:st,...Tt},je)=>hn.createElement("svg",{ref:je,...PL,width:H,height:H,stroke:E,strokeWidth:le?Number(L)*24/Number(H):L,className:vS("lucide",Te),...Tt},[...st.map(([be,K])=>hn.createElement(be,K)),...Array.isArray(Ve)?Ve:[Ve]]));/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=(E,H)=>{const L=hn.forwardRef(({className:le,...Te},Ve)=>hn.createElement(OL,{ref:Ve,iconNode:H,className:vS(`lucide-${ML(E)}`,le),...Te}));return L.displayName=`${E}`,L};/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],IL=py("Check",kL);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gy=py("ChevronDown",LL);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],RL=py("ChevronUp",BL);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],FL=py("X",NL),Hb=E=>typeof E=="boolean"?`${E}`:E===0?"0":E,Wb=oS,_S=(E,H)=>L=>{var le;if((H==null?void 0:H.variants)==null)return Wb(E,L==null?void 0:L.class,L==null?void 0:L.className);const{variants:Te,defaultVariants:Ve}=H,st=Object.keys(Te).map(be=>{const K=L==null?void 0:L[be],se=Ve==null?void 0:Ve[be];if(K===null)return null;const B=Hb(K)||Hb(se);return Te[be][B]}),Tt=L&&Object.entries(L).reduce((be,K)=>{let[se,B]=K;return B===void 0||(be[se]=B),be},{}),je=H==null||(le=H.compoundVariants)===null||le===void 0?void 0:le.reduce((be,K)=>{let{class:se,className:B,...Fe}=K;return Object.entries(Fe).every(Be=>{let[ce,me]=Be;return Array.isArray(me)?me.includes({...Ve,...Tt}[ce]):{...Ve,...Tt}[ce]===me})?[...be,se,B]:be},[]);return Wb(E,st,je,L==null?void 0:L.class,L==null?void 0:L.className)},zL=_S("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),yS=hn.forwardRef(({className:E,variant:H,size:L,asChild:le=!1,...Te},Ve)=>{const st=le?zg:"button";return bn.jsx(st,{className:ql(zL({variant:H,size:L,className:E})),ref:Ve,...Te})});yS.displayName="Button";function wS(E){const H=E+"CollectionProvider",[L,le]=xm(H),[Te,Ve]=L(H,{collectionRef:{current:null},itemMap:new Map}),st=Fe=>{const{scope:Be,children:ce}=Fe,me=Ia.useRef(null),we=Ia.useRef(new Map).current;return bn.jsx(Te,{scope:Be,itemMap:we,collectionRef:me,children:ce})};st.displayName=H;const Tt=E+"CollectionSlot",je=Ia.forwardRef((Fe,Be)=>{const{scope:ce,children:me}=Fe,we=Ve(Tt,ce),ae=jo(Be,we.collectionRef);return bn.jsx(zg,{ref:ae,children:me})});je.displayName=Tt;const be=E+"CollectionItemSlot",K="data-radix-collection-item",se=Ia.forwardRef((Fe,Be)=>{const{scope:ce,children:me,...we}=Fe,ae=Ia.useRef(null),De=jo(Be,ae),Pe=Ve(be,ce);return Ia.useEffect(()=>(Pe.itemMap.set(ae,{ref:ae,...we}),()=>void Pe.itemMap.delete(ae))),bn.jsx(zg,{[K]:"",ref:De,children:me})});se.displayName=be;function B(Fe){const Be=Ve(E+"CollectionConsumer",Fe);return Ia.useCallback(()=>{const me=Be.collectionRef.current;if(!me)return[];const we=Array.from(me.querySelectorAll(`[${K}]`));return Array.from(Be.itemMap.values()).sort((Pe,Se)=>we.indexOf(Pe.ref.current)-we.indexOf(Se.ref.current))},[Be.collectionRef,Be.itemMap])}return[{Provider:st,Slot:je,ItemSlot:se},B,le]}var mw="Collapsible",[UL,xS]=xm(mw),[jL,vw]=UL(mw),bS=hn.forwardRef((E,H)=>{const{__scopeCollapsible:L,open:le,defaultOpen:Te,disabled:Ve,onOpenChange:st,...Tt}=E,[je=!1,be]=_m({prop:le,defaultProp:Te,onChange:st});return bn.jsx(jL,{scope:L,disabled:Ve,contentId:Qp(),open:je,onOpenToggle:hn.useCallback(()=>be(K=>!K),[be]),children:bn.jsx(Va.div,{"data-state":yw(je),"data-disabled":Ve?"":void 0,...Tt,ref:H})})});bS.displayName=mw;var SS="CollapsibleTrigger",CS=hn.forwardRef((E,H)=>{const{__scopeCollapsible:L,...le}=E,Te=vw(SS,L);return bn.jsx(Va.button,{type:"button","aria-controls":Te.contentId,"aria-expanded":Te.open||!1,"data-state":yw(Te.open),"data-disabled":Te.disabled?"":void 0,disabled:Te.disabled,...le,ref:H,onClick:ja(E.onClick,Te.onOpenToggle)})});CS.displayName=SS;var _w="CollapsibleContent",DS=hn.forwardRef((E,H)=>{const{forceMount:L,...le}=E,Te=vw(_w,E.__scopeCollapsible);return bn.jsx(bm,{present:L||Te.open,children:({present:Ve})=>bn.jsx(VL,{...le,ref:H,present:Ve})})});DS.displayName=_w;var VL=hn.forwardRef((E,H)=>{const{__scopeCollapsible:L,present:le,children:Te,...Ve}=E,st=vw(_w,L),[Tt,je]=hn.useState(le),be=hn.useRef(null),K=jo(H,be),se=hn.useRef(0),B=se.current,Fe=hn.useRef(0),Be=Fe.current,ce=st.open||Tt,me=hn.useRef(ce),we=hn.useRef(void 0);return hn.useEffect(()=>{const ae=requestAnimationFrame(()=>me.current=!1);return()=>cancelAnimationFrame(ae)},[]),pc(()=>{const ae=be.current;if(ae){we.current=we.current||{transitionDuration:ae.style.transitionDuration,animationName:ae.style.animationName},ae.style.transitionDuration="0s",ae.style.animationName="none";const De=ae.getBoundingClientRect();se.current=De.height,Fe.current=De.width,me.current||(ae.style.transitionDuration=we.current.transitionDuration,ae.style.animationName=we.current.animationName),je(le)}},[st.open,le]),bn.jsx(Va.div,{"data-state":yw(st.open),"data-disabled":st.disabled?"":void 0,id:st.contentId,hidden:!ce,...Ve,ref:K,style:{"--radix-collapsible-content-height":B?`${B}px`:void 0,"--radix-collapsible-content-width":Be?`${Be}px`:void 0,...E.style},children:ce&&Te})});function yw(E){return E?"open":"closed"}var HL=bS,WL=CS,GL=DS,YL=hn.createContext(void 0);function AS(E){const H=hn.useContext(YL);return E||H||"ltr"}var ng="Accordion",ZL=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ww,$L,KL]=wS(ng),[my,l2]=xm(ng,[KL,xS]),xw=xS(),ES=Ia.forwardRef((E,H)=>{const{type:L,...le}=E,Te=le,Ve=le;return bn.jsx(ww.Provider,{scope:E.__scopeAccordion,children:L==="multiple"?bn.jsx(JL,{...Ve,ref:H}):bn.jsx(QL,{...Te,ref:H})})});ES.displayName=ng;var[TS,qL]=my(ng),[MS,XL]=my(ng,{collapsible:!1}),QL=Ia.forwardRef((E,H)=>{const{value:L,defaultValue:le,onValueChange:Te=()=>{},collapsible:Ve=!1,...st}=E,[Tt,je]=_m({prop:L,defaultProp:le,onChange:Te});return bn.jsx(TS,{scope:E.__scopeAccordion,value:Tt?[Tt]:[],onItemOpen:je,onItemClose:Ia.useCallback(()=>Ve&&je(""),[Ve,je]),children:bn.jsx(MS,{scope:E.__scopeAccordion,collapsible:Ve,children:bn.jsx(PS,{...st,ref:H})})})}),JL=Ia.forwardRef((E,H)=>{const{value:L,defaultValue:le,onValueChange:Te=()=>{},...Ve}=E,[st=[],Tt]=_m({prop:L,defaultProp:le,onChange:Te}),je=Ia.useCallback(K=>Tt((se=[])=>[...se,K]),[Tt]),be=Ia.useCallback(K=>Tt((se=[])=>se.filter(B=>B!==K)),[Tt]);return bn.jsx(TS,{scope:E.__scopeAccordion,value:st,onItemOpen:je,onItemClose:be,children:bn.jsx(MS,{scope:E.__scopeAccordion,collapsible:!0,children:bn.jsx(PS,{...Ve,ref:H})})})}),[eB,vy]=my(ng),PS=Ia.forwardRef((E,H)=>{const{__scopeAccordion:L,disabled:le,dir:Te,orientation:Ve="vertical",...st}=E,Tt=Ia.useRef(null),je=jo(Tt,H),be=$L(L),se=AS(Te)==="ltr",B=ja(E.onKeyDown,Fe=>{var wt;if(!ZL.includes(Fe.key))return;const Be=Fe.target,ce=be().filter(Dt=>{var at;return!((at=Dt.ref.current)!=null&&at.disabled)}),me=ce.findIndex(Dt=>Dt.ref.current===Be),we=ce.length;if(me===-1)return;Fe.preventDefault();let ae=me;const De=0,Pe=we-1,Se=()=>{ae=me+1,ae>Pe&&(ae=De)},ee=()=>{ae=me-1,ae<De&&(ae=Pe)};switch(Fe.key){case"Home":ae=De;break;case"End":ae=Pe;break;case"ArrowRight":Ve==="horizontal"&&(se?Se():ee());break;case"ArrowDown":Ve==="vertical"&&Se();break;case"ArrowLeft":Ve==="horizontal"&&(se?ee():Se());break;case"ArrowUp":Ve==="vertical"&&ee();break}const Qe=ae%we;(wt=ce[Qe].ref.current)==null||wt.focus()});return bn.jsx(eB,{scope:L,disabled:le,direction:Te,orientation:Ve,children:bn.jsx(ww.Slot,{scope:L,children:bn.jsx(Va.div,{...st,"data-orientation":Ve,ref:je,onKeyDown:le?void 0:B})})})}),Q_="AccordionItem",[tB,bw]=my(Q_),OS=Ia.forwardRef((E,H)=>{const{__scopeAccordion:L,value:le,...Te}=E,Ve=vy(Q_,L),st=qL(Q_,L),Tt=xw(L),je=Qp(),be=le&&st.value.includes(le)||!1,K=Ve.disabled||E.disabled;return bn.jsx(tB,{scope:L,open:be,disabled:K,triggerId:je,children:bn.jsx(HL,{"data-orientation":Ve.orientation,"data-state":NS(be),...Tt,...Te,ref:H,disabled:K,open:be,onOpenChange:se=>{se?st.onItemOpen(le):st.onItemClose(le)}})})});OS.displayName=Q_;var kS="AccordionHeader",IS=Ia.forwardRef((E,H)=>{const{__scopeAccordion:L,...le}=E,Te=vy(ng,L),Ve=bw(kS,L);return bn.jsx(Va.h3,{"data-orientation":Te.orientation,"data-state":NS(Ve.open),"data-disabled":Ve.disabled?"":void 0,...le,ref:H})});IS.displayName=kS;var H0="AccordionTrigger",LS=Ia.forwardRef((E,H)=>{const{__scopeAccordion:L,...le}=E,Te=vy(ng,L),Ve=bw(H0,L),st=XL(H0,L),Tt=xw(L);return bn.jsx(ww.ItemSlot,{scope:L,children:bn.jsx(WL,{"aria-disabled":Ve.open&&!st.collapsible||void 0,"data-orientation":Te.orientation,id:Ve.triggerId,...Tt,...le,ref:H})})});LS.displayName=H0;var BS="AccordionContent",RS=Ia.forwardRef((E,H)=>{const{__scopeAccordion:L,...le}=E,Te=vy(ng,L),Ve=bw(BS,L),st=xw(L);return bn.jsx(GL,{role:"region","aria-labelledby":Ve.triggerId,"data-orientation":Te.orientation,...st,...le,ref:H,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...E.style}})});RS.displayName=BS;function NS(E){return E?"open":"closed"}var nB=ES,rB=OS,iB=IS,FS=LS,zS=RS;const sB=nB,US=hn.forwardRef(({className:E,...H},L)=>bn.jsx(rB,{ref:L,className:ql("border-b",E),...H}));US.displayName="AccordionItem";const jS=hn.forwardRef(({className:E,children:H,...L},le)=>bn.jsx(iB,{className:"flex",children:bn.jsxs(FS,{ref:le,className:ql("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",E),...L,children:[H,bn.jsx(gy,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));jS.displayName=FS.displayName;const VS=hn.forwardRef(({className:E,children:H,...L},le)=>bn.jsx(zS,{ref:le,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...L,children:bn.jsx("div",{className:ql("pb-4 pt-0",E),children:H})}));VS.displayName=zS.displayName;function Gb(E,[H,L]){return Math.min(L,Math.max(H,E))}function aB(E){const H=hn.useRef({value:E,previous:E});return hn.useMemo(()=>(H.current.value!==E&&(H.current.previous=H.current.value,H.current.value=E),H.current.previous),[E])}var oB="VisuallyHidden",HS=hn.forwardRef((E,H)=>bn.jsx(Va.span,{...E,ref:H,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...E.style}}));HS.displayName=oB;var lB=[" ","Enter","ArrowUp","ArrowDown"],uB=[" ","Enter"],o_="Select",[_y,yy,cB]=wS(o_),[iv,u2]=xm(o_,[cB,cy]),wy=cy(),[hB,Wg]=iv(o_),[fB,dB]=iv(o_),WS=E=>{const{__scopeSelect:H,children:L,open:le,defaultOpen:Te,onOpenChange:Ve,value:st,defaultValue:Tt,onValueChange:je,dir:be,name:K,autoComplete:se,disabled:B,required:Fe,form:Be}=E,ce=wy(H),[me,we]=hn.useState(null),[ae,De]=hn.useState(null),[Pe,Se]=hn.useState(!1),ee=AS(be),[Qe=!1,wt]=_m({prop:le,defaultProp:Te,onChange:Ve}),[Dt,at]=_m({prop:st,defaultProp:Tt,onChange:je}),Ne=hn.useRef(null),Je=me?Be||!!me.closest("form"):!0,[pt,ot]=hn.useState(new Set),Jt=Array.from(pt).map(Qt=>Qt.props.value).join(";");return bn.jsx(F1,{...ce,children:bn.jsxs(hB,{required:Fe,scope:H,trigger:me,onTriggerChange:we,valueNode:ae,onValueNodeChange:De,valueNodeHasChildren:Pe,onValueNodeHasChildrenChange:Se,contentId:Qp(),value:Dt,onValueChange:at,open:Qe,onOpenChange:wt,dir:ee,triggerPointerDownPosRef:Ne,disabled:B,children:[bn.jsx(_y.Provider,{scope:H,children:bn.jsx(fB,{scope:E.__scopeSelect,onNativeOptionAdd:hn.useCallback(Qt=>{ot(ut=>new Set(ut).add(Qt))},[]),onNativeOptionRemove:hn.useCallback(Qt=>{ot(ut=>{const St=new Set(ut);return St.delete(Qt),St})},[]),children:L})}),Je?bn.jsxs(mC,{"aria-hidden":!0,required:Fe,tabIndex:-1,name:K,autoComplete:se,value:Dt,onChange:Qt=>at(Qt.target.value),disabled:B,form:Be,children:[Dt===void 0?bn.jsx("option",{value:""}):null,Array.from(pt)]},Jt):null]})})};WS.displayName=o_;var GS="SelectTrigger",YS=hn.forwardRef((E,H)=>{const{__scopeSelect:L,disabled:le=!1,...Te}=E,Ve=wy(L),st=Wg(GS,L),Tt=st.disabled||le,je=jo(H,st.onTriggerChange),be=yy(L),K=hn.useRef("touch"),[se,B,Fe]=vC(ce=>{const me=be().filter(De=>!De.disabled),we=me.find(De=>De.value===st.value),ae=_C(me,ce,we);ae!==void 0&&st.onValueChange(ae.value)}),Be=ce=>{Tt||(st.onOpenChange(!0),Fe()),ce&&(st.triggerPointerDownPosRef.current={x:Math.round(ce.pageX),y:Math.round(ce.pageY)})};return bn.jsx(cw,{asChild:!0,...Ve,children:bn.jsx(Va.button,{type:"button",role:"combobox","aria-controls":st.contentId,"aria-expanded":st.open,"aria-required":st.required,"aria-autocomplete":"none",dir:st.dir,"data-state":st.open?"open":"closed",disabled:Tt,"data-disabled":Tt?"":void 0,"data-placeholder":gC(st.value)?"":void 0,...Te,ref:je,onClick:ja(Te.onClick,ce=>{ce.currentTarget.focus(),K.current!=="mouse"&&Be(ce)}),onPointerDown:ja(Te.onPointerDown,ce=>{K.current=ce.pointerType;const me=ce.target;me.hasPointerCapture(ce.pointerId)&&me.releasePointerCapture(ce.pointerId),ce.button===0&&ce.ctrlKey===!1&&ce.pointerType==="mouse"&&(Be(ce),ce.preventDefault())}),onKeyDown:ja(Te.onKeyDown,ce=>{const me=se.current!=="";!(ce.ctrlKey||ce.altKey||ce.metaKey)&&ce.key.length===1&&B(ce.key),!(me&&ce.key===" ")&&lB.includes(ce.key)&&(Be(),ce.preventDefault())})})})});YS.displayName=GS;var ZS="SelectValue",$S=hn.forwardRef((E,H)=>{const{__scopeSelect:L,className:le,style:Te,children:Ve,placeholder:st="",...Tt}=E,je=Wg(ZS,L),{onValueNodeHasChildrenChange:be}=je,K=Ve!==void 0,se=jo(H,je.onValueNodeChange);return pc(()=>{be(K)},[be,K]),bn.jsx(Va.span,{...Tt,ref:se,style:{pointerEvents:"none"},children:gC(je.value)?bn.jsx(bn.Fragment,{children:st}):Ve})});$S.displayName=ZS;var pB="SelectIcon",KS=hn.forwardRef((E,H)=>{const{__scopeSelect:L,children:le,...Te}=E;return bn.jsx(Va.span,{"aria-hidden":!0,...Te,ref:H,children:le||"▼"})});KS.displayName=pB;var gB="SelectPortal",qS=E=>bn.jsx(hy,{asChild:!0,...E});qS.displayName=gB;var ym="SelectContent",XS=hn.forwardRef((E,H)=>{const L=Wg(ym,E.__scopeSelect),[le,Te]=hn.useState();if(pc(()=>{Te(new DocumentFragment)},[]),!L.open){const Ve=le;return Ve?i_.createPortal(bn.jsx(QS,{scope:E.__scopeSelect,children:bn.jsx(_y.Slot,{scope:E.__scopeSelect,children:bn.jsx("div",{children:E.children})})}),Ve):null}return bn.jsx(JS,{...E,ref:H})});XS.displayName=ym;var Sd=10,[QS,Gg]=iv(ym),mB="SelectContentImpl",JS=hn.forwardRef((E,H)=>{const{__scopeSelect:L,position:le="item-aligned",onCloseAutoFocus:Te,onEscapeKeyDown:Ve,onPointerDownOutside:st,side:Tt,sideOffset:je,align:be,alignOffset:K,arrowPadding:se,collisionBoundary:B,collisionPadding:Fe,sticky:Be,hideWhenDetached:ce,avoidCollisions:me,...we}=E,ae=Wg(ym,L),[De,Pe]=hn.useState(null),[Se,ee]=hn.useState(null),Qe=jo(H,Zt=>Pe(Zt)),[wt,Dt]=hn.useState(null),[at,Ne]=hn.useState(null),Je=yy(L),[pt,ot]=hn.useState(!1),Jt=hn.useRef(!1);hn.useEffect(()=>{if(De)return hw(De)},[De]),ew();const Qt=hn.useCallback(Zt=>{const[zt,...Le]=Je().map(tt=>tt.ref.current),[Mt]=Le.slice(-1),Rt=document.activeElement;for(const tt of Zt)if(tt===Rt||(tt==null||tt.scrollIntoView({block:"nearest"}),tt===zt&&Se&&(Se.scrollTop=0),tt===Mt&&Se&&(Se.scrollTop=Se.scrollHeight),tt==null||tt.focus(),document.activeElement!==Rt))return},[Je,Se]),ut=hn.useCallback(()=>Qt([wt,De]),[Qt,wt,De]);hn.useEffect(()=>{pt&&ut()},[pt,ut]);const{onOpenChange:St,triggerPointerDownPosRef:Lt}=ae;hn.useEffect(()=>{if(De){let Zt={x:0,y:0};const zt=Mt=>{var Rt,tt;Zt={x:Math.abs(Math.round(Mt.pageX)-(((Rt=Lt.current)==null?void 0:Rt.x)??0)),y:Math.abs(Math.round(Mt.pageY)-(((tt=Lt.current)==null?void 0:tt.y)??0))}},Le=Mt=>{Zt.x<=10&&Zt.y<=10?Mt.preventDefault():De.contains(Mt.target)||St(!1),document.removeEventListener("pointermove",zt),Lt.current=null};return Lt.current!==null&&(document.addEventListener("pointermove",zt),document.addEventListener("pointerup",Le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",zt),document.removeEventListener("pointerup",Le,{capture:!0})}}},[De,St,Lt]),hn.useEffect(()=>{const Zt=()=>St(!1);return window.addEventListener("blur",Zt),window.addEventListener("resize",Zt),()=>{window.removeEventListener("blur",Zt),window.removeEventListener("resize",Zt)}},[St]);const[Ue,Ut]=vC(Zt=>{const zt=Je().filter(Rt=>!Rt.disabled),Le=zt.find(Rt=>Rt.ref.current===document.activeElement),Mt=_C(zt,Zt,Le);Mt&&setTimeout(()=>Mt.ref.current.focus())}),Ot=hn.useCallback((Zt,zt,Le)=>{const Mt=!Jt.current&&!Le;(ae.value!==void 0&&ae.value===zt||Mt)&&(Dt(Zt),Mt&&(Jt.current=!0))},[ae.value]),rn=hn.useCallback(()=>De==null?void 0:De.focus(),[De]),$t=hn.useCallback((Zt,zt,Le)=>{const Mt=!Jt.current&&!Le;(ae.value!==void 0&&ae.value===zt||Mt)&&Ne(Zt)},[ae.value]),sn=le==="popper"?W0:eC,lt=sn===W0?{side:Tt,sideOffset:je,align:be,alignOffset:K,arrowPadding:se,collisionBoundary:B,collisionPadding:Fe,sticky:Be,hideWhenDetached:ce,avoidCollisions:me}:{};return bn.jsx(QS,{scope:L,content:De,viewport:Se,onViewportChange:ee,itemRefCallback:Ot,selectedItem:wt,onItemLeave:rn,itemTextRefCallback:$t,focusSelectedItem:ut,selectedItemText:at,position:le,isPositioned:pt,searchRef:Ue,children:bn.jsx(dy,{as:zg,allowPinchZoom:!0,children:bn.jsx(ay,{asChild:!0,trapped:ae.open,onMountAutoFocus:Zt=>{Zt.preventDefault()},onUnmountAutoFocus:ja(Te,Zt=>{var zt;(zt=ae.trigger)==null||zt.focus({preventScroll:!0}),Zt.preventDefault()}),children:bn.jsx(sy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:Ve,onPointerDownOutside:st,onFocusOutside:Zt=>Zt.preventDefault(),onDismiss:()=>ae.onOpenChange(!1),children:bn.jsx(sn,{role:"listbox",id:ae.contentId,"data-state":ae.open?"open":"closed",dir:ae.dir,onContextMenu:Zt=>Zt.preventDefault(),...we,...lt,onPlaced:()=>ot(!0),ref:Qe,style:{display:"flex",flexDirection:"column",outline:"none",...we.style},onKeyDown:ja(we.onKeyDown,Zt=>{const zt=Zt.ctrlKey||Zt.altKey||Zt.metaKey;if(Zt.key==="Tab"&&Zt.preventDefault(),!zt&&Zt.key.length===1&&Ut(Zt.key),["ArrowUp","ArrowDown","Home","End"].includes(Zt.key)){let Mt=Je().filter(Rt=>!Rt.disabled).map(Rt=>Rt.ref.current);if(["ArrowUp","End"].includes(Zt.key)&&(Mt=Mt.slice().reverse()),["ArrowUp","ArrowDown"].includes(Zt.key)){const Rt=Zt.target,tt=Mt.indexOf(Rt);Mt=Mt.slice(tt+1)}setTimeout(()=>Qt(Mt)),Zt.preventDefault()}})})})})})})});JS.displayName=mB;var vB="SelectItemAlignedPosition",eC=hn.forwardRef((E,H)=>{const{__scopeSelect:L,onPlaced:le,...Te}=E,Ve=Wg(ym,L),st=Gg(ym,L),[Tt,je]=hn.useState(null),[be,K]=hn.useState(null),se=jo(H,Qe=>K(Qe)),B=yy(L),Fe=hn.useRef(!1),Be=hn.useRef(!0),{viewport:ce,selectedItem:me,selectedItemText:we,focusSelectedItem:ae}=st,De=hn.useCallback(()=>{if(Ve.trigger&&Ve.valueNode&&Tt&&be&&ce&&me&&we){const Qe=Ve.trigger.getBoundingClientRect(),wt=be.getBoundingClientRect(),Dt=Ve.valueNode.getBoundingClientRect(),at=we.getBoundingClientRect();if(Ve.dir!=="rtl"){const Rt=at.left-wt.left,tt=Dt.left-Rt,We=Qe.left-tt,C=Qe.width+We,U=Math.max(C,wt.width),Q=window.innerWidth-Sd,fe=Gb(tt,[Sd,Math.max(Sd,Q-U)]);Tt.style.minWidth=C+"px",Tt.style.left=fe+"px"}else{const Rt=wt.right-at.right,tt=window.innerWidth-Dt.right-Rt,We=window.innerWidth-Qe.right-tt,C=Qe.width+We,U=Math.max(C,wt.width),Q=window.innerWidth-Sd,fe=Gb(tt,[Sd,Math.max(Sd,Q-U)]);Tt.style.minWidth=C+"px",Tt.style.right=fe+"px"}const Ne=B(),Je=window.innerHeight-Sd*2,pt=ce.scrollHeight,ot=window.getComputedStyle(be),Jt=parseInt(ot.borderTopWidth,10),Qt=parseInt(ot.paddingTop,10),ut=parseInt(ot.borderBottomWidth,10),St=parseInt(ot.paddingBottom,10),Lt=Jt+Qt+pt+St+ut,Ue=Math.min(me.offsetHeight*5,Lt),Ut=window.getComputedStyle(ce),Ot=parseInt(Ut.paddingTop,10),rn=parseInt(Ut.paddingBottom,10),$t=Qe.top+Qe.height/2-Sd,sn=Je-$t,lt=me.offsetHeight/2,Zt=me.offsetTop+lt,zt=Jt+Qt+Zt,Le=Lt-zt;if(zt<=$t){const Rt=Ne.length>0&&me===Ne[Ne.length-1].ref.current;Tt.style.bottom="0px";const tt=be.clientHeight-ce.offsetTop-ce.offsetHeight,We=Math.max(sn,lt+(Rt?rn:0)+tt+ut),C=zt+We;Tt.style.height=C+"px"}else{const Rt=Ne.length>0&&me===Ne[0].ref.current;Tt.style.top="0px";const We=Math.max($t,Jt+ce.offsetTop+(Rt?Ot:0)+lt)+Le;Tt.style.height=We+"px",ce.scrollTop=zt-$t+ce.offsetTop}Tt.style.margin=`${Sd}px 0`,Tt.style.minHeight=Ue+"px",Tt.style.maxHeight=Je+"px",le==null||le(),requestAnimationFrame(()=>Fe.current=!0)}},[B,Ve.trigger,Ve.valueNode,Tt,be,ce,me,we,Ve.dir,le]);pc(()=>De(),[De]);const[Pe,Se]=hn.useState();pc(()=>{be&&Se(window.getComputedStyle(be).zIndex)},[be]);const ee=hn.useCallback(Qe=>{Qe&&Be.current===!0&&(De(),ae==null||ae(),Be.current=!1)},[De,ae]);return bn.jsx(yB,{scope:L,contentWrapper:Tt,shouldExpandOnScrollRef:Fe,onScrollButtonChange:ee,children:bn.jsx("div",{ref:je,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Pe},children:bn.jsx(Va.div,{...Te,ref:se,style:{boxSizing:"border-box",maxHeight:"100%",...Te.style}})})})});eC.displayName=vB;var _B="SelectPopperPosition",W0=hn.forwardRef((E,H)=>{const{__scopeSelect:L,align:le="start",collisionPadding:Te=Sd,...Ve}=E,st=wy(L);return bn.jsx(z1,{...st,...Ve,ref:H,align:le,collisionPadding:Te,style:{boxSizing:"border-box",...Ve.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});W0.displayName=_B;var[yB,Sw]=iv(ym,{}),G0="SelectViewport",tC=hn.forwardRef((E,H)=>{const{__scopeSelect:L,nonce:le,...Te}=E,Ve=Gg(G0,L),st=Sw(G0,L),Tt=jo(H,Ve.onViewportChange),je=hn.useRef(0);return bn.jsxs(bn.Fragment,{children:[bn.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:le}),bn.jsx(_y.Slot,{scope:L,children:bn.jsx(Va.div,{"data-radix-select-viewport":"",role:"presentation",...Te,ref:Tt,style:{position:"relative",flex:1,overflow:"hidden auto",...Te.style},onScroll:ja(Te.onScroll,be=>{const K=be.currentTarget,{contentWrapper:se,shouldExpandOnScrollRef:B}=st;if(B!=null&&B.current&&se){const Fe=Math.abs(je.current-K.scrollTop);if(Fe>0){const Be=window.innerHeight-Sd*2,ce=parseFloat(se.style.minHeight),me=parseFloat(se.style.height),we=Math.max(ce,me);if(we<Be){const ae=we+Fe,De=Math.min(Be,ae),Pe=ae-De;se.style.height=De+"px",se.style.bottom==="0px"&&(K.scrollTop=Pe>0?Pe:0,se.style.justifyContent="flex-end")}}}je.current=K.scrollTop})})})]})});tC.displayName=G0;var nC="SelectGroup",[wB,xB]=iv(nC),rC=hn.forwardRef((E,H)=>{const{__scopeSelect:L,...le}=E,Te=Qp();return bn.jsx(wB,{scope:L,id:Te,children:bn.jsx(Va.div,{role:"group","aria-labelledby":Te,...le,ref:H})})});rC.displayName=nC;var iC="SelectLabel",sC=hn.forwardRef((E,H)=>{const{__scopeSelect:L,...le}=E,Te=xB(iC,L);return bn.jsx(Va.div,{id:Te.id,...le,ref:H})});sC.displayName=iC;var J_="SelectItem",[bB,aC]=iv(J_),oC=hn.forwardRef((E,H)=>{const{__scopeSelect:L,value:le,disabled:Te=!1,textValue:Ve,...st}=E,Tt=Wg(J_,L),je=Gg(J_,L),be=Tt.value===le,[K,se]=hn.useState(Ve??""),[B,Fe]=hn.useState(!1),Be=jo(H,ae=>{var De;return(De=je.itemRefCallback)==null?void 0:De.call(je,ae,le,Te)}),ce=Qp(),me=hn.useRef("touch"),we=()=>{Te||(Tt.onValueChange(le),Tt.onOpenChange(!1))};if(le==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return bn.jsx(bB,{scope:L,value:le,disabled:Te,textId:ce,isSelected:be,onItemTextChange:hn.useCallback(ae=>{se(De=>De||((ae==null?void 0:ae.textContent)??"").trim())},[]),children:bn.jsx(_y.ItemSlot,{scope:L,value:le,disabled:Te,textValue:K,children:bn.jsx(Va.div,{role:"option","aria-labelledby":ce,"data-highlighted":B?"":void 0,"aria-selected":be&&B,"data-state":be?"checked":"unchecked","aria-disabled":Te||void 0,"data-disabled":Te?"":void 0,tabIndex:Te?void 0:-1,...st,ref:Be,onFocus:ja(st.onFocus,()=>Fe(!0)),onBlur:ja(st.onBlur,()=>Fe(!1)),onClick:ja(st.onClick,()=>{me.current!=="mouse"&&we()}),onPointerUp:ja(st.onPointerUp,()=>{me.current==="mouse"&&we()}),onPointerDown:ja(st.onPointerDown,ae=>{me.current=ae.pointerType}),onPointerMove:ja(st.onPointerMove,ae=>{var De;me.current=ae.pointerType,Te?(De=je.onItemLeave)==null||De.call(je):me.current==="mouse"&&ae.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ja(st.onPointerLeave,ae=>{var De;ae.currentTarget===document.activeElement&&((De=je.onItemLeave)==null||De.call(je))}),onKeyDown:ja(st.onKeyDown,ae=>{var Pe;((Pe=je.searchRef)==null?void 0:Pe.current)!==""&&ae.key===" "||(uB.includes(ae.key)&&we(),ae.key===" "&&ae.preventDefault())})})})})});oC.displayName=J_;var Qv="SelectItemText",lC=hn.forwardRef((E,H)=>{const{__scopeSelect:L,className:le,style:Te,...Ve}=E,st=Wg(Qv,L),Tt=Gg(Qv,L),je=aC(Qv,L),be=dB(Qv,L),[K,se]=hn.useState(null),B=jo(H,we=>se(we),je.onItemTextChange,we=>{var ae;return(ae=Tt.itemTextRefCallback)==null?void 0:ae.call(Tt,we,je.value,je.disabled)}),Fe=K==null?void 0:K.textContent,Be=hn.useMemo(()=>bn.jsx("option",{value:je.value,disabled:je.disabled,children:Fe},je.value),[je.disabled,je.value,Fe]),{onNativeOptionAdd:ce,onNativeOptionRemove:me}=be;return pc(()=>(ce(Be),()=>me(Be)),[ce,me,Be]),bn.jsxs(bn.Fragment,{children:[bn.jsx(Va.span,{id:je.textId,...Ve,ref:B}),je.isSelected&&st.valueNode&&!st.valueNodeHasChildren?i_.createPortal(Ve.children,st.valueNode):null]})});lC.displayName=Qv;var uC="SelectItemIndicator",cC=hn.forwardRef((E,H)=>{const{__scopeSelect:L,...le}=E;return aC(uC,L).isSelected?bn.jsx(Va.span,{"aria-hidden":!0,...le,ref:H}):null});cC.displayName=uC;var Y0="SelectScrollUpButton",hC=hn.forwardRef((E,H)=>{const L=Gg(Y0,E.__scopeSelect),le=Sw(Y0,E.__scopeSelect),[Te,Ve]=hn.useState(!1),st=jo(H,le.onScrollButtonChange);return pc(()=>{if(L.viewport&&L.isPositioned){let Tt=function(){const be=je.scrollTop>0;Ve(be)};const je=L.viewport;return Tt(),je.addEventListener("scroll",Tt),()=>je.removeEventListener("scroll",Tt)}},[L.viewport,L.isPositioned]),Te?bn.jsx(dC,{...E,ref:st,onAutoScroll:()=>{const{viewport:Tt,selectedItem:je}=L;Tt&&je&&(Tt.scrollTop=Tt.scrollTop-je.offsetHeight)}}):null});hC.displayName=Y0;var Z0="SelectScrollDownButton",fC=hn.forwardRef((E,H)=>{const L=Gg(Z0,E.__scopeSelect),le=Sw(Z0,E.__scopeSelect),[Te,Ve]=hn.useState(!1),st=jo(H,le.onScrollButtonChange);return pc(()=>{if(L.viewport&&L.isPositioned){let Tt=function(){const be=je.scrollHeight-je.clientHeight,K=Math.ceil(je.scrollTop)<be;Ve(K)};const je=L.viewport;return Tt(),je.addEventListener("scroll",Tt),()=>je.removeEventListener("scroll",Tt)}},[L.viewport,L.isPositioned]),Te?bn.jsx(dC,{...E,ref:st,onAutoScroll:()=>{const{viewport:Tt,selectedItem:je}=L;Tt&&je&&(Tt.scrollTop=Tt.scrollTop+je.offsetHeight)}}):null});fC.displayName=Z0;var dC=hn.forwardRef((E,H)=>{const{__scopeSelect:L,onAutoScroll:le,...Te}=E,Ve=Gg("SelectScrollButton",L),st=hn.useRef(null),Tt=yy(L),je=hn.useCallback(()=>{st.current!==null&&(window.clearInterval(st.current),st.current=null)},[]);return hn.useEffect(()=>()=>je(),[je]),pc(()=>{var K;const be=Tt().find(se=>se.ref.current===document.activeElement);(K=be==null?void 0:be.ref.current)==null||K.scrollIntoView({block:"nearest"})},[Tt]),bn.jsx(Va.div,{"aria-hidden":!0,...Te,ref:H,style:{flexShrink:0,...Te.style},onPointerDown:ja(Te.onPointerDown,()=>{st.current===null&&(st.current=window.setInterval(le,50))}),onPointerMove:ja(Te.onPointerMove,()=>{var be;(be=Ve.onItemLeave)==null||be.call(Ve),st.current===null&&(st.current=window.setInterval(le,50))}),onPointerLeave:ja(Te.onPointerLeave,()=>{je()})})}),SB="SelectSeparator",pC=hn.forwardRef((E,H)=>{const{__scopeSelect:L,...le}=E;return bn.jsx(Va.div,{"aria-hidden":!0,...le,ref:H})});pC.displayName=SB;var $0="SelectArrow",CB=hn.forwardRef((E,H)=>{const{__scopeSelect:L,...le}=E,Te=wy(L),Ve=Wg($0,L),st=Gg($0,L);return Ve.open&&st.position==="popper"?bn.jsx(U1,{...Te,...le,ref:H}):null});CB.displayName=$0;function gC(E){return E===""||E===void 0}var mC=hn.forwardRef((E,H)=>{const{value:L,...le}=E,Te=hn.useRef(null),Ve=jo(H,Te),st=aB(L);return hn.useEffect(()=>{const Tt=Te.current,je=window.HTMLSelectElement.prototype,K=Object.getOwnPropertyDescriptor(je,"value").set;if(st!==L&&K){const se=new Event("change",{bubbles:!0});K.call(Tt,L),Tt.dispatchEvent(se)}},[st,L]),bn.jsx(HS,{asChild:!0,children:bn.jsx("select",{...le,ref:Ve,defaultValue:L})})});mC.displayName="BubbleSelect";function vC(E){const H=Jp(E),L=hn.useRef(""),le=hn.useRef(0),Te=hn.useCallback(st=>{const Tt=L.current+st;H(Tt),function je(be){L.current=be,window.clearTimeout(le.current),be!==""&&(le.current=window.setTimeout(()=>je(""),1e3))}(Tt)},[H]),Ve=hn.useCallback(()=>{L.current="",window.clearTimeout(le.current)},[]);return hn.useEffect(()=>()=>window.clearTimeout(le.current),[]),[L,Te,Ve]}function _C(E,H,L){const Te=H.length>1&&Array.from(H).every(be=>be===H[0])?H[0]:H,Ve=L?E.indexOf(L):-1;let st=DB(E,Math.max(Ve,0));Te.length===1&&(st=st.filter(be=>be!==L));const je=st.find(be=>be.textValue.toLowerCase().startsWith(Te.toLowerCase()));return je!==L?je:void 0}function DB(E,H){return E.map((L,le)=>E[(H+le)%E.length])}var AB=WS,yC=YS,EB=$S,TB=KS,MB=qS,wC=XS,PB=tC,OB=rC,xC=sC,bC=oC,kB=lC,IB=cC,SC=hC,CC=fC,DC=pC;const C0=AB,D0=OB,A0=EB,H_=hn.forwardRef(({className:E,children:H,...L},le)=>bn.jsxs(yC,{ref:le,className:ql("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",E),...L,children:[H,bn.jsx(TB,{asChild:!0,children:bn.jsx(gy,{className:"h-4 w-4 opacity-50"})})]}));H_.displayName=yC.displayName;const AC=hn.forwardRef(({className:E,...H},L)=>bn.jsx(SC,{ref:L,className:ql("flex cursor-default items-center justify-center py-1",E),...H,children:bn.jsx(RL,{className:"h-4 w-4"})}));AC.displayName=SC.displayName;const EC=hn.forwardRef(({className:E,...H},L)=>bn.jsx(CC,{ref:L,className:ql("flex cursor-default items-center justify-center py-1",E),...H,children:bn.jsx(gy,{className:"h-4 w-4"})}));EC.displayName=CC.displayName;const W_=hn.forwardRef(({className:E,children:H,position:L="popper",...le},Te)=>bn.jsx(MB,{children:bn.jsxs(wC,{ref:Te,className:ql("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",L==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",E),position:L,...le,children:[bn.jsx(AC,{}),bn.jsx(PB,{className:ql("p-1",L==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:H}),bn.jsx(EC,{})]})}));W_.displayName=wC.displayName;const LB=hn.forwardRef(({className:E,...H},L)=>bn.jsx(xC,{ref:L,className:ql("py-1.5 pl-8 pr-2 text-sm font-semibold",E),...H}));LB.displayName=xC.displayName;const G_=hn.forwardRef(({className:E,children:H,...L},le)=>bn.jsxs(bC,{ref:le,className:ql("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",E),...L,children:[bn.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:bn.jsx(IB,{children:bn.jsx(IL,{className:"h-4 w-4"})})}),bn.jsx(kB,{children:H})]}));G_.displayName=bC.displayName;const BB=hn.forwardRef(({className:E,...H},L)=>bn.jsx(DC,{ref:L,className:ql("-mx-1 my-1 h-px bg-muted",E),...H}));BB.displayName=DC.displayName;const RB=_S("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function NB({className:E,variant:H,...L}){return bn.jsx("div",{className:ql(RB({variant:H}),E),...L})}const FB=()=>{var me;const{isSceneLoading:E,groups:H,selectOption:L,templates:le,setTemplate:Te,setCamera:Ve}=r_.useZakeke(),[st,Tt]=hn.useState(null),[je,be]=hn.useState(null),[K,se]=hn.useState(null),B=H.find(we=>we.id===st),Fe=B?B.steps.find(we=>we.id===je):null,Be=hn.useMemo(()=>{var we;return((we=Fe||B)==null?void 0:we.attributes)??[]},[B,Fe]),ce=Be.find(we=>we.id===K);return hn.useEffect(()=>{!B&&H.length>0&&(Tt(H[0].id),H[0].steps.length>0&&be(H[0].steps[0].id),le.length>0&&Te(le[0].id))},[B,H]),hn.useEffect(()=>{!ce&&Be.length>0&&se(Be[0].id)},[ce,Be]),hn.useEffect(()=>{if(B){const we=B.cameraLocationId;we&&Ve(we)}},[st]),E||!H||H.length===0?bn.jsx("span",{className:"text-sm text-muted-foreground animate-pulse",children:"Loading scene..."}):(B&&(B.id===-1||B.name),ce&&ce.name,bn.jsxs("div",{className:"space-y-6 p-1",children:[bn.jsx("div",{className:"text-xl font-semibold border-b pb-2 mb-4",children:"Customize Product"}),H.length>1&&bn.jsxs("div",{className:"space-y-2",children:[bn.jsx("h3",{className:"text-sm font-medium",children:"Group"}),bn.jsxs(C0,{value:st==null?void 0:st.toString(),onValueChange:we=>Tt(parseInt(we)),children:[bn.jsx(H_,{className:"w-full",children:bn.jsx(A0,{placeholder:"Select a group"})}),bn.jsx(W_,{children:bn.jsx(D0,{children:H.map(we=>bn.jsx(G_,{value:we.id.toString(),children:we.id===-1?"Other":we.name},we.id))})})]})]}),B&&B.steps.length>0&&bn.jsx(sB,{type:"single",collapsible:!0,defaultValue:"steps",className:"border rounded-md",children:bn.jsxs(US,{value:"steps",children:[bn.jsx(jS,{className:"px-4",children:"Steps"}),bn.jsx(VS,{className:"px-4 pt-2 pb-3",children:bn.jsx("div",{className:"flex flex-wrap gap-2",children:B.steps.map(we=>bn.jsx(NB,{variant:Fe===we?"default":"outline",className:"cursor-pointer",onClick:()=>be(we.id),children:we.name},we.id))})})]})}),Be.length>0&&bn.jsxs("div",{className:"space-y-2",children:[bn.jsx("h3",{className:"text-sm font-medium",children:"Attributes"}),bn.jsxs(C0,{value:K==null?void 0:K.toString(),onValueChange:we=>se(parseInt(we)),children:[bn.jsx(H_,{className:"w-full",children:bn.jsx(A0,{placeholder:"Select an attribute"})}),bn.jsx(W_,{children:bn.jsx(D0,{children:Be.map(we=>bn.jsx(G_,{value:we.id.toString(),children:we.name},we.id))})})]})]}),ce&&ce.options.length>0&&bn.jsxs("div",{className:"space-y-2",children:[bn.jsxs("h3",{className:"text-sm font-medium",children:["Options for ",ce.name]}),bn.jsxs(C0,{value:((me=ce.options.find(we=>we.selected))==null?void 0:me.id.toString())||"",onValueChange:we=>L(parseInt(we)),children:[bn.jsx(H_,{className:"w-full",children:bn.jsx(A0,{placeholder:"Select an option"})}),bn.jsx(W_,{children:bn.jsx(D0,{children:ce.options.map(we=>bn.jsx(G_,{value:we.id.toString(),children:bn.jsxs("div",{className:"flex items-center",children:[we.imageUrl&&bn.jsx("div",{className:"w-6 h-6 mr-2 overflow-hidden rounded-sm",children:bn.jsx("img",{src:we.imageUrl,alt:we.name,className:"w-full h-full object-cover"})}),bn.jsx("span",{children:we.name})]})},we.id))})})]})]})]}))},zB=()=>bn.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 32 32",children:bn.jsx("path",{d:"M 19 3 C 13.488281 3 9 7.488281 9 13 C 9 15.394531 9.839844 17.589844 11.25 19.3125 L 3.28125 27.28125 L 4.71875 28.71875 L 12.6875 20.75 C 14.410156 22.160156 16.605469 23 19 23 C 24.511719 23 29 18.511719 29 13 C 29 7.488281 24.511719 3 19 3 Z M 19 5 C 23.429688 5 27 8.570313 27 13 C 27 17.429688 23.429688 21 19 21 C 14.570313 21 11 17.429688 11 13 C 11 8.570313 14.570313 5 19 5 Z M 18 9 L 18 12 L 15 12 L 15 14 L 18 14 L 18 17 L 20 17 L 20 14 L 23 14 L 23 12 L 20 12 L 20 9 Z"})}),UB=()=>bn.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 32 32",children:bn.jsx("path",{d:"M 19 3 C 13.488281 3 9 7.488281 9 13 C 9 15.394531 9.839844 17.589844 11.25 19.3125 L 3.28125 27.28125 L 4.71875 28.71875 L 12.6875 20.75 C 14.410156 22.160156 16.605469 23 19 23 C 24.511719 23 29 18.511719 29 13 C 29 7.488281 24.511719 3 19 3 Z M 19 5 C 23.429688 5 27 8.570313 27 13 C 27 17.429688 23.429688 21 19 21 C 14.570313 21 11 17.429688 11 13 C 11 8.570313 14.570313 5 19 5 Z M 15 12 L 15 14 L 23 14 L 23 12 Z"})}),jB=()=>bn.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 30 30",children:bn.jsx("path",{fill:"#263238",d:"M4.591 6.494a.87.87 0 0 0 .881-.875V1.768h3.804a.87.87 0 0 0 .88-.875.87.87 0 0 0-.88-.876H3.711V5.62a.88.88 0 0 0 .88.875ZM20.53 1.75h3.805v3.852c0 .49.387.875.88.875a.87.87 0 0 0 .88-.875V0H20.53a.87.87 0 0 0-.88.875c0 .49.387.875.88.875ZM9.276 27.57H5.472v-3.85a.87.87 0 0 0-.88-.876.87.87 0 0 0-.881.875v5.602h5.565a.87.87 0 0 0 .88-.876.87.87 0 0 0-.88-.875Zm15.939-4.726a.87.87 0 0 0-.88.875v3.851H20.53a.87.87 0 0 0-.88.875c0 .49.387.876.88.876h5.566v-5.602a.88.88 0 0 0-.88-.875ZM14.93 27.203c-.723 0-1.304.577-1.304 1.295s.582 1.295 1.304 1.295a1.296 1.296 0 1 0 0-2.59ZM27.957 15.34c0 1.05-.192 1.95-.576 2.705-.383.75-.909 1.33-1.577 1.735-.665.403-1.42.604-2.267.604-.85 0-1.61-.201-2.278-.604-.665-.406-1.189-.986-1.572-1.74-.384-.754-.575-1.654-.575-2.7 0-1.047.191-1.947.575-2.698.383-.754.907-1.333 1.572-1.736.668-.405 1.427-.608 2.277-.608.847 0 1.603.203 2.268.608.668.403 1.194.982 1.577 1.736.384.751.576 1.65.576 2.699Zm-1.467 0c0-.798-.13-1.47-.389-2.017-.255-.55-.607-.966-1.054-1.247a2.74 2.74 0 0 0-1.51-.427c-.566 0-1.071.143-1.515.427-.445.281-.796.697-1.055 1.247-.256.546-.384 1.219-.384 2.018 0 .799.128 1.473.384 2.023.259.546.61.962 1.055 1.246.444.282.949.422 1.515.422a2.76 2.76 0 0 0 1.51-.422c.447-.284.799-.7 1.054-1.246.26-.55.389-1.224.389-2.023Zm-15.543-3.633v-1.275h7.599v1.275h-3.064v8.543h-1.476v-8.543h-3.059Zm-7.735-1.275 2.733 7.996h.11l2.732-7.996h1.602L6.855 20.25H5.144L1.61 10.432h1.6Z"})}),VB=()=>bn.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 32 32",children:bn.jsx("path",{d:"M 6 3 L 6 29 L 26 29 L 26 3 Z M 8 5 L 24 5 L 24 27 L 8 27 Z M 15.40625 10.34375 C 15.101563 10.339844 14.746094 10.449219 14.5 10.65625 C 14.246094 10.871094 14.132813 11.136719 14.0625 11.40625 C 13.925781 11.945313 13.964844 12.503906 14.09375 13.125 C 14.246094 13.851563 14.679688 14.726563 15.03125 15.5625 C 14.851563 16.324219 14.804688 17 14.53125 17.78125 C 14.296875 18.453125 13.996094 18.839844 13.71875 19.4375 C 13.089844 19.675781 12.339844 19.816406 11.84375 20.125 C 11.308594 20.457031 10.839844 20.824219 10.5625 21.34375 C 10.285156 21.863281 10.316406 22.597656 10.6875 23.125 C 10.871094 23.402344 11.113281 23.621094 11.4375 23.75 C 11.761719 23.878906 12.113281 23.882813 12.40625 23.78125 C 12.996094 23.578125 13.414063 23.125 13.8125 22.59375 C 14.183594 22.101563 14.445313 21.265625 14.78125 20.59375 C 15.285156 20.425781 15.648438 20.214844 16.1875 20.09375 C 16.75 19.96875 17.128906 20.027344 17.65625 19.96875 C 17.882813 20.226563 18.074219 20.640625 18.3125 20.84375 C 18.789063 21.257813 19.3125 21.585938 19.9375 21.625 C 20.5625 21.664063 21.1875 21.273438 21.53125 20.6875 L 21.5625 20.6875 L 21.5625 20.65625 C 21.714844 20.390625 21.820313 20.101563 21.8125 19.78125 C 21.804688 19.460938 21.644531 19.125 21.4375 18.90625 C 21.027344 18.46875 20.503906 18.355469 19.9375 18.28125 C 19.5 18.222656 18.890625 18.378906 18.375 18.40625 C 17.921875 17.808594 17.472656 17.359375 17.0625 16.59375 C 16.839844 16.179688 16.78125 15.828125 16.59375 15.40625 C 16.738281 14.726563 17.023438 13.96875 17.0625 13.375 C 17.109375 12.65625 17.082031 12.035156 16.875 11.46875 C 16.769531 11.183594 16.601563 10.902344 16.34375 10.6875 C 16.09375 10.480469 15.769531 10.351563 15.4375 10.34375 C 15.425781 10.34375 15.417969 10.34375 15.40625 10.34375 Z M 16.0625 17.75 C 16.242188 18.066406 16.464844 18.265625 16.65625 18.5625 C 16.375 18.613281 16.160156 18.5625 15.875 18.625 C 15.828125 18.636719 15.796875 18.675781 15.75 18.6875 C 15.808594 18.53125 15.882813 18.4375 15.9375 18.28125 C 16 18.097656 16.003906 17.933594 16.0625 17.75 Z M 19.75 19.78125 C 20.085938 19.824219 20.207031 19.886719 20.25 19.90625 C 20.242188 19.921875 20.261719 19.917969 20.25 19.9375 C 20.125 20.144531 20.113281 20.128906 20.03125 20.125 C 19.964844 20.121094 19.710938 19.984375 19.46875 19.8125 C 19.539063 19.816406 19.6875 19.773438 19.75 19.78125 Z M 12.75 21.34375 C 12.695313 21.425781 12.648438 21.617188 12.59375 21.6875 C 12.289063 22.09375 12.007813 22.28125 11.9375 22.3125 C 11.925781 22.296875 11.957031 22.3125 11.9375 22.28125 L 11.90625 22.28125 C 11.804688 22.136719 11.832031 22.195313 11.90625 22.0625 C 11.980469 21.929688 12.214844 21.660156 12.625 21.40625 C 12.65625 21.386719 12.71875 21.363281 12.75 21.34375 Z"})});var Cw="Dialog",[TC,c2]=xm(Cw),[HB,Ed]=TC(Cw),MC=E=>{const{__scopeDialog:H,children:L,open:le,defaultOpen:Te,onOpenChange:Ve,modal:st=!0}=E,Tt=hn.useRef(null),je=hn.useRef(null),[be=!1,K]=_m({prop:le,defaultProp:Te,onChange:Ve});return bn.jsx(HB,{scope:H,triggerRef:Tt,contentRef:je,contentId:Qp(),titleId:Qp(),descriptionId:Qp(),open:be,onOpenChange:K,onOpenToggle:hn.useCallback(()=>K(se=>!se),[K]),modal:st,children:L})};MC.displayName=Cw;var PC="DialogTrigger",WB=hn.forwardRef((E,H)=>{const{__scopeDialog:L,...le}=E,Te=Ed(PC,L),Ve=jo(H,Te.triggerRef);return bn.jsx(Va.button,{type:"button","aria-haspopup":"dialog","aria-expanded":Te.open,"aria-controls":Te.contentId,"data-state":Ew(Te.open),...le,ref:Ve,onClick:ja(E.onClick,Te.onOpenToggle)})});WB.displayName=PC;var Dw="DialogPortal",[GB,OC]=TC(Dw,{forceMount:void 0}),kC=E=>{const{__scopeDialog:H,forceMount:L,children:le,container:Te}=E,Ve=Ed(Dw,H);return bn.jsx(GB,{scope:H,forceMount:L,children:hn.Children.map(le,st=>bn.jsx(bm,{present:L||Ve.open,children:bn.jsx(hy,{asChild:!0,container:Te,children:st})}))})};kC.displayName=Dw;var ey="DialogOverlay",IC=hn.forwardRef((E,H)=>{const L=OC(ey,E.__scopeDialog),{forceMount:le=L.forceMount,...Te}=E,Ve=Ed(ey,E.__scopeDialog);return Ve.modal?bn.jsx(bm,{present:le||Ve.open,children:bn.jsx(YB,{...Te,ref:H})}):null});IC.displayName=ey;var YB=hn.forwardRef((E,H)=>{const{__scopeDialog:L,...le}=E,Te=Ed(ey,L);return bn.jsx(dy,{as:zg,allowPinchZoom:!0,shards:[Te.contentRef],children:bn.jsx(Va.div,{"data-state":Ew(Te.open),...le,ref:H,style:{pointerEvents:"auto",...le.style}})})}),wm="DialogContent",LC=hn.forwardRef((E,H)=>{const L=OC(wm,E.__scopeDialog),{forceMount:le=L.forceMount,...Te}=E,Ve=Ed(wm,E.__scopeDialog);return bn.jsx(bm,{present:le||Ve.open,children:Ve.modal?bn.jsx(ZB,{...Te,ref:H}):bn.jsx($B,{...Te,ref:H})})});LC.displayName=wm;var ZB=hn.forwardRef((E,H)=>{const L=Ed(wm,E.__scopeDialog),le=hn.useRef(null),Te=jo(H,L.contentRef,le);return hn.useEffect(()=>{const Ve=le.current;if(Ve)return hw(Ve)},[]),bn.jsx(BC,{...E,ref:Te,trapFocus:L.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ja(E.onCloseAutoFocus,Ve=>{var st;Ve.preventDefault(),(st=L.triggerRef.current)==null||st.focus()}),onPointerDownOutside:ja(E.onPointerDownOutside,Ve=>{const st=Ve.detail.originalEvent,Tt=st.button===0&&st.ctrlKey===!0;(st.button===2||Tt)&&Ve.preventDefault()}),onFocusOutside:ja(E.onFocusOutside,Ve=>Ve.preventDefault())})}),$B=hn.forwardRef((E,H)=>{const L=Ed(wm,E.__scopeDialog),le=hn.useRef(!1),Te=hn.useRef(!1);return bn.jsx(BC,{...E,ref:H,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Ve=>{var st,Tt;(st=E.onCloseAutoFocus)==null||st.call(E,Ve),Ve.defaultPrevented||(le.current||(Tt=L.triggerRef.current)==null||Tt.focus(),Ve.preventDefault()),le.current=!1,Te.current=!1},onInteractOutside:Ve=>{var je,be;(je=E.onInteractOutside)==null||je.call(E,Ve),Ve.defaultPrevented||(le.current=!0,Ve.detail.originalEvent.type==="pointerdown"&&(Te.current=!0));const st=Ve.target;((be=L.triggerRef.current)==null?void 0:be.contains(st))&&Ve.preventDefault(),Ve.detail.originalEvent.type==="focusin"&&Te.current&&Ve.preventDefault()}})}),BC=hn.forwardRef((E,H)=>{const{__scopeDialog:L,trapFocus:le,onOpenAutoFocus:Te,onCloseAutoFocus:Ve,...st}=E,Tt=Ed(wm,L),je=hn.useRef(null),be=jo(H,je);return ew(),bn.jsxs(bn.Fragment,{children:[bn.jsx(ay,{asChild:!0,loop:!0,trapped:le,onMountAutoFocus:Te,onUnmountAutoFocus:Ve,children:bn.jsx(sy,{role:"dialog",id:Tt.contentId,"aria-describedby":Tt.descriptionId,"aria-labelledby":Tt.titleId,"data-state":Ew(Tt.open),...st,ref:be,onDismiss:()=>Tt.onOpenChange(!1)})}),bn.jsxs(bn.Fragment,{children:[bn.jsx(KB,{titleId:Tt.titleId}),bn.jsx(XB,{contentRef:je,descriptionId:Tt.descriptionId})]})]})}),Aw="DialogTitle",RC=hn.forwardRef((E,H)=>{const{__scopeDialog:L,...le}=E,Te=Ed(Aw,L);return bn.jsx(Va.h2,{id:Te.titleId,...le,ref:H})});RC.displayName=Aw;var NC="DialogDescription",FC=hn.forwardRef((E,H)=>{const{__scopeDialog:L,...le}=E,Te=Ed(NC,L);return bn.jsx(Va.p,{id:Te.descriptionId,...le,ref:H})});FC.displayName=NC;var zC="DialogClose",UC=hn.forwardRef((E,H)=>{const{__scopeDialog:L,...le}=E,Te=Ed(zC,L);return bn.jsx(Va.button,{type:"button",...le,ref:H,onClick:ja(E.onClick,()=>Te.onOpenChange(!1))})});UC.displayName=zC;function Ew(E){return E?"open":"closed"}var jC="DialogTitleWarning",[h2,VC]=aO(jC,{contentName:wm,titleName:Aw,docsSlug:"dialog"}),KB=({titleId:E})=>{const H=VC(jC),L=`\`${H.contentName}\` requires a \`${H.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${H.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${H.docsSlug}`;return hn.useEffect(()=>{E&&(document.getElementById(E)||console.error(L))},[L,E]),null},qB="DialogDescriptionWarning",XB=({contentRef:E,descriptionId:H})=>{const le=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${VC(qB).contentName}}.`;return hn.useEffect(()=>{var Ve;const Te=(Ve=E.current)==null?void 0:Ve.getAttribute("aria-describedby");H&&Te&&(document.getElementById(H)||console.warn(le))},[le,E,H]),null},QB=MC,JB=kC,HC=IC,WC=LC,GC=RC,YC=FC,e2=UC;const t2=QB,n2=JB,ZC=hn.forwardRef(({className:E,...H},L)=>bn.jsx(HC,{ref:L,className:ql("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",E),...H}));ZC.displayName=HC.displayName;const $C=hn.forwardRef(({className:E,children:H,...L},le)=>bn.jsxs(n2,{children:[bn.jsx(ZC,{}),bn.jsxs(WC,{ref:le,className:ql("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",E),...L,children:[H,bn.jsxs(e2,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[bn.jsx(FL,{className:"h-4 w-4"}),bn.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));$C.displayName=WC.displayName;const KC=({className:E,...H})=>bn.jsx("div",{className:ql("flex flex-col space-y-1.5 text-center sm:text-left",E),...H});KC.displayName="DialogHeader";const qC=({className:E,...H})=>bn.jsx("div",{className:ql("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",E),...H});qC.displayName="DialogFooter";const XC=hn.forwardRef(({className:E,...H},L)=>bn.jsx(GC,{ref:L,className:ql("text-lg font-semibold leading-none tracking-tight",E),...H}));XC.displayName=GC.displayName;const QC=hn.forwardRef(({className:E,...H},L)=>bn.jsx(YC,{ref:L,className:ql("text-sm text-muted-foreground",E),...H}));QC.displayName=YC.displayName;const r2=()=>{const{zoomIn:E,zoomOut:H,getPDF:L,getTryOnUrl:le,getShareCompositionUrl:Te,getMobileArUrl:Ve,getQrCodeArUrl:st,hasVTryOnEnabled:Tt,isSceneArEnabled:je}=r_.useZakeke(),[be,K]=hn.useState(!1),[se,B]=hn.useState(""),[Fe,Be]=hn.useState(!1),[ce,me]=hn.useState(!1),[we,ae]=hn.useState(!1),[De,Pe]=hn.useState(!1),Se=()=>{E?E():console.log("Zoom in")},ee=()=>{H?H():console.log("Zoom out")},Qe=()=>{le?(Be(!0),le().then(at=>{at?window.open(at,"_blank"):console.log("Virtual try on URL not available")}).catch(at=>console.error("Failed to get try-on URL:",at)).finally(()=>Be(!1))):console.log("Virtual try on feature not available")},wt=()=>{L?(Pe(!0),L().then(at=>{at?(B(at),K(!0)):console.log("PDF URL not available")}).catch(at=>console.error("Failed to get PDF:",at)).finally(()=>Pe(!1))):console.log("PDF export feature not available")},Dt=()=>bn.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[bn.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),bn.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});return bn.jsxs(bn.Fragment,{children:[bn.jsxs("div",{className:"flex space-x-2 items-center justify-center",children:[bn.jsx("button",{className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center",onClick:Se,title:"Zoom In",children:bn.jsx(zB,{})}),bn.jsx("button",{className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center",onClick:ee,title:"Zoom Out",children:bn.jsx(UB,{})}),Tt&&bn.jsx("button",{className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center",onClick:Qe,disabled:Fe,title:"Virtual Try On",children:Fe?bn.jsx(Dt,{}):bn.jsx(jB,{})}),bn.jsx("button",{className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center",onClick:wt,disabled:De,title:"Export PDF",children:De?bn.jsx(Dt,{}):bn.jsx(VB,{})})]}),bn.jsx(t2,{open:be,onOpenChange:K,children:bn.jsxs($C,{className:"sm:max-w-md",children:[bn.jsxs(KC,{children:[bn.jsx(XC,{children:"Download PDF"}),bn.jsx(QC,{children:"Your PDF has been generated. Click the button below to download it."})]}),bn.jsxs(qC,{className:"flex justify-end space-x-2 sm:justify-end",children:[bn.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:()=>K(!1),children:"Cancel"}),bn.jsx("a",{href:se,target:"_blank",download:"custom-design.pdf",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:()=>K(!1),children:"Download"})]})]})})]})};function i2(){return bn.jsx(bn.Fragment,{children:bn.jsxs("div",{className:"relative h-full w-full",children:[bn.jsx("div",{className:"absolute inset-0",children:bn.jsx(r_.ZakekeViewer,{className:"bg-white",bgColor:"#ffffff"})}),bn.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-10",children:bn.jsx("div",{className:"bg-white/80 p-3 rounded-lg shadow-lg",children:bn.jsx(r2,{})})}),bn.jsx("div",{className:"fixed bottom-6 right-6 z-10",children:bn.jsxs(EL,{children:[bn.jsx(TL,{asChild:!0,children:bn.jsxs(yS,{variant:"outline",className:"bg-white p-2 rounded-md shadow-md flex items-center space-x-2",children:[bn.jsx("span",{children:"Customize"}),bn.jsx(gy,{className:"h-5 w-5"})]})}),bn.jsx(mS,{className:"w-80 max-h-[70vh] overflow-auto",side:"top",align:"end",children:bn.jsx(FB,{})})]})})]})})}const s2=new r_.ZakekeEnvironment;function a2(){return bn.jsx(r_.ZakekeProvider,{environment:s2,children:bn.jsx(i2,{})})}oP.createRoot(document.getElementById("root")).render(bn.jsx(Ia.StrictMode,{children:bn.jsx(a2,{})}));
